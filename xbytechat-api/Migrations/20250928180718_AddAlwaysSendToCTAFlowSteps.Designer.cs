// <auto-generated />
using System;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Migrations;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;
using Npgsql.EntityFrameworkCore.PostgreSQL.Metadata;
using xbytechat.api;

#nullable disable

namespace xbytechat.api.Migrations
{
    [DbContext(typeof(AppDbContext))]
    [Migration("20250928180718_AddAlwaysSendToCTAFlowSteps")]
    partial class AddAlwaysSendToCTAFlowSteps
    {
        /// <inheritdoc />
        protected override void BuildTargetModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("ProductVersion", "8.0.18")
                .HasAnnotation("Relational:MaxIdentifierLength", 63);

            NpgsqlModelBuilderExtensions.UseIdentityByDefaultColumns(modelBuilder);

            modelBuilder.Entity("ContactTag", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<DateTime>("AssignedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("AssignedBy")
                        .HasColumnType("text");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("ContactId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("TagId")
                        .HasColumnType("uuid");

                    b.HasKey("Id");

                    b.HasIndex("ContactId");

                    b.HasIndex("TagId");

                    b.ToTable("ContactTags");
                });

            modelBuilder.Entity("MessageLog", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<string>("ButtonBundleJson")
                        .HasColumnType("text");

                    b.Property<Guid?>("CTAFlowConfigId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("CTAFlowStepId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("CampaignId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("ContactId")
                        .HasColumnType("uuid");

                    b.Property<string>("ConversationCategory")
                        .HasColumnType("text");

                    b.Property<string>("ConversationId")
                        .HasColumnType("text");

                    b.Property<DateTimeOffset?>("ConversationStartedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ErrorMessage")
                        .HasColumnType("text");

                    b.Property<int?>("FlowVersion")
                        .HasColumnType("integer");

                    b.Property<bool?>("IsChargeable")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsIncoming")
                        .HasColumnType("boolean");

                    b.Property<string>("MediaUrl")
                        .HasColumnType("text");

                    b.Property<string>("MessageContent")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("MessageId")
                        .HasColumnType("text");

                    b.Property<DateTime?>("MessageTime")
                        .ValueGeneratedOnAddOrUpdate()
                        .HasColumnType("timestamp with time zone")
                        .HasComputedColumnSql("COALESCE(\"SentAt\", \"CreatedAt\")", true);

                    b.Property<decimal?>("PriceAmount")
                        .HasColumnType("numeric");

                    b.Property<string>("PriceCurrency")
                        .HasColumnType("text");

                    b.Property<string>("Provider")
                        .HasColumnType("text");

                    b.Property<string>("ProviderMessageId")
                        .HasColumnType("text");

                    b.Property<string>("RawResponse")
                        .HasColumnType("text");

                    b.Property<string>("RecipientNumber")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<Guid?>("RefMessageId")
                        .HasColumnType("uuid");

                    b.Property<string>("RenderedBody")
                        .HasColumnType("text");

                    b.Property<Guid?>("RunId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("SentAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Source")
                        .HasColumnType("text");

                    b.Property<string>("Status")
                        .IsRequired()
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.HasIndex("CampaignId");

                    b.HasIndex("ContactId");

                    b.HasIndex("MessageId");

                    b.HasIndex("RunId");

                    b.HasIndex("BusinessId", "MessageId")
                        .HasDatabaseName("IX_MessageLogs_Business_MessageId");

                    b.HasIndex("BusinessId", "RecipientNumber")
                        .HasDatabaseName("IX_MessageLogs_Business_Recipient");

                    b.HasIndex("BusinessId", "IsIncoming", "ContactId", "MessageTime")
                        .HasDatabaseName("ix_msglogs_biz_in_contact_msgtime");

                    b.ToTable("MessageLogs");
                });

            modelBuilder.Entity("xbytechat.api.AuthModule.Models.User", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid?>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("DeletedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Email")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("PasswordHash")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("RefreshToken")
                        .HasColumnType("text");

                    b.Property<DateTime?>("RefreshTokenExpiry")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("RoleId")
                        .HasColumnType("uuid");

                    b.Property<string>("Status")
                        .IsRequired()
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.HasIndex("BusinessId");

                    b.HasIndex("RoleId");

                    b.ToTable("Users");

                    b.HasData(
                        new
                        {
                            Id = new Guid("62858aa2-3a54-4fd5-8696-c343d9af7634"),
                            CreatedAt = new DateTime(2025, 1, 1, 0, 0, 0, 0, DateTimeKind.Utc),
                            Email = "admin@xbytechat.com",
                            IsDeleted = false,
                            Name = "Super Admin",
                            PasswordHash = "JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk=",
                            RoleId = new Guid("00000000-0000-0000-0000-000000000001"),
                            Status = "active"
                        });
                });

            modelBuilder.Entity("xbytechat.api.AuthModule.Models.WhatsAppTemplate", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("Body")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<string>("ButtonsJson")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Category")
                        .HasMaxLength(40)
                        .HasColumnType("character varying(40)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ExternalId")
                        .HasMaxLength(120)
                        .HasColumnType("character varying(120)");

                    b.Property<bool>("HasImageHeader")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<string>("Language")
                        .IsRequired()
                        .HasMaxLength(16)
                        .HasColumnType("character varying(16)");

                    b.Property<DateTime>("LastSyncedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(160)
                        .HasColumnType("character varying(160)");

                    b.Property<int>("PlaceholderCount")
                        .HasColumnType("integer");

                    b.Property<string>("Provider")
                        .IsRequired()
                        .HasMaxLength(40)
                        .HasColumnType("character varying(40)");

                    b.Property<string>("RawJson")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Status")
                        .IsRequired()
                        .HasMaxLength(32)
                        .HasColumnType("character varying(32)");

                    b.Property<DateTime>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("BusinessId", "Name");

                    b.HasIndex("BusinessId", "Provider");

                    b.HasIndex("BusinessId", "Name", "Language", "Provider")
                        .IsUnique();

                    b.ToTable("WhatsAppTemplates");
                });

            modelBuilder.Entity("xbytechat.api.CRM.Models.Contact", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid?>("AssignedAgentId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Email")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Group")
                        .HasColumnType("text");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsArchived")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsAutomationPaused")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsFavorite")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("LastCTAInteraction")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("LastCTAType")
                        .HasColumnType("text");

                    b.Property<Guid?>("LastClickedProductId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("LastContactedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("LeadSource")
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("NextFollowUpAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Notes")
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<string>("PhoneNumber")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.Property<string>("ProfileName")
                        .HasColumnType("text");

                    b.Property<DateTime?>("ProfileNameUpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Tags")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.HasKey("Id");

                    b.HasIndex("BusinessId", "PhoneNumber")
                        .IsUnique()
                        .HasDatabaseName("IX_Contacts_BusinessId_PhoneNumber");

                    b.ToTable("Contacts");
                });

            modelBuilder.Entity("xbytechat.api.CRM.Models.Note", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid?>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("ContactId")
                        .HasColumnType("uuid");

                    b.Property<string>("Content")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime?>("EditedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("IsInternal")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsPinned")
                        .HasColumnType("boolean");

                    b.Property<string>("Source")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Title")
                        .IsRequired()
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.ToTable("Notes");
                });

            modelBuilder.Entity("xbytechat.api.CRM.Models.Reminder", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("CompletedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("ContactId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .HasColumnType("text");

                    b.Property<DateTime>("DueAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("FollowUpSent")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsRecurring")
                        .HasColumnType("boolean");

                    b.Property<string>("LastCTAType")
                        .HasColumnType("text");

                    b.Property<DateTime?>("LastClickedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("LinkedCampaign")
                        .HasColumnType("text");

                    b.Property<int?>("Priority")
                        .HasColumnType("integer");

                    b.Property<string>("RecurrencePattern")
                        .HasColumnType("text");

                    b.Property<string>("ReminderType")
                        .HasColumnType("text");

                    b.Property<bool>("SendWhatsappNotification")
                        .HasColumnType("boolean");

                    b.Property<string>("Status")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Title")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.ToTable("Reminders");
                });

            modelBuilder.Entity("xbytechat.api.CRM.Models.Tag", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<string>("Category")
                        .HasColumnType("text");

                    b.Property<string>("ColorHex")
                        .HasColumnType("text");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsSystemTag")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("LastUsedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Notes")
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.ToTable("Tags");
                });

            modelBuilder.Entity("xbytechat.api.Features.AccessControl.Models.Permission", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("Code")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .HasColumnType("text");

                    b.Property<string>("Group")
                        .HasColumnType("text");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.ToTable("Permissions");

                    b.HasData(
                        new
                        {
                            Id = new Guid("30000000-0000-0000-0000-000000000000"),
                            Code = "dashboard.view",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Dashboard",
                            IsActive = true,
                            Name = "dashboard.view"
                        },
                        new
                        {
                            Id = new Guid("30000000-0000-0000-0000-000000000001"),
                            Code = "campaign.view",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Campaign",
                            IsActive = true,
                            Name = "campaign.view"
                        },
                        new
                        {
                            Id = new Guid("30000000-0000-0000-0000-000000000002"),
                            Code = "campaign.create",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Campaign",
                            IsActive = true,
                            Name = "campaign.create"
                        },
                        new
                        {
                            Id = new Guid("30000000-0000-0000-0000-000000000003"),
                            Code = "campaign.delete",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Campaign",
                            IsActive = true,
                            Name = "campaign.delete"
                        },
                        new
                        {
                            Id = new Guid("30000000-0000-0000-0000-000000000004"),
                            Code = "product.view",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Catalog",
                            IsActive = true,
                            Name = "product.view"
                        },
                        new
                        {
                            Id = new Guid("30000000-0000-0000-0000-000000000005"),
                            Code = "product.create",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Catalog",
                            IsActive = true,
                            Name = "product.create"
                        },
                        new
                        {
                            Id = new Guid("30000000-0000-0000-0000-000000000006"),
                            Code = "product.delete",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Catalog",
                            IsActive = true,
                            Name = "product.delete"
                        },
                        new
                        {
                            Id = new Guid("30000000-0000-0000-0000-000000000007"),
                            Code = "contacts.view",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "CRM",
                            IsActive = true,
                            Name = "contacts.view"
                        },
                        new
                        {
                            Id = new Guid("30000000-0000-0000-0000-000000000008"),
                            Code = "tags.edit",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            IsActive = true,
                            Name = "tags.edit"
                        },
                        new
                        {
                            Id = new Guid("30000000-0000-0000-0000-000000000009"),
                            Code = "admin.business.approve",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Admin",
                            IsActive = true,
                            Name = "admin.business.approve"
                        },
                        new
                        {
                            Id = new Guid("30000000-0000-0000-0000-000000000010"),
                            Code = "admin.logs.view",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            IsActive = true,
                            Name = "admin.logs.view"
                        },
                        new
                        {
                            Id = new Guid("30000000-0000-0000-0000-000000000011"),
                            Code = "admin.plans.view",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Admin",
                            IsActive = true,
                            Name = "admin.plans.view"
                        },
                        new
                        {
                            Id = new Guid("30000000-0000-0000-0000-000000000012"),
                            Code = "admin.plans.create",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Admin",
                            IsActive = true,
                            Name = "admin.plans.create"
                        },
                        new
                        {
                            Id = new Guid("30000000-0000-0000-0000-000000000013"),
                            Code = "admin.plans.update",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Admin",
                            IsActive = true,
                            Name = "admin.plans.update"
                        },
                        new
                        {
                            Id = new Guid("30000000-0000-0000-0000-000000000014"),
                            Code = "admin.plans.delete",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Admin",
                            IsActive = true,
                            Name = "admin.plans.delete"
                        },
                        new
                        {
                            Id = new Guid("74c8034f-d9cb-4a17-8578-a9f765bd845c"),
                            Code = "messaging.report.view",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Messaging",
                            IsActive = true,
                            Name = "messaging.report.view"
                        },
                        new
                        {
                            Id = new Guid("c819f1bd-422d-4609-916c-cc185fe44ab0"),
                            Code = "messaging.status.view",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Messaging",
                            IsActive = true,
                            Name = "messaging.status.view"
                        },
                        new
                        {
                            Id = new Guid("eecd0fac-223c-4dba-9fa1-2a6e973d61d1"),
                            Code = "messaging.inbox.view",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Messaging",
                            IsActive = true,
                            Name = "messaging.inbox.view"
                        },
                        new
                        {
                            Id = new Guid("974af1f9-3caa-4857-a1a7-48462c389332"),
                            Code = "messaging.send.text",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Messaging",
                            IsActive = true,
                            Name = "messaging.send.text"
                        },
                        new
                        {
                            Id = new Guid("0485154c-dde5-4732-a7aa-a379c77a5b27"),
                            Code = "messaging.send.template",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Messaging",
                            IsActive = true,
                            Name = "messaging.send.template"
                        },
                        new
                        {
                            Id = new Guid("29461562-ef9c-48c0-a606-482ff57b8f95"),
                            Code = "messaging.send",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Messaging",
                            IsActive = true,
                            Name = "messaging.send"
                        },
                        new
                        {
                            Id = new Guid("bbc5202a-eac9-40bb-aa78-176c677dbf5b"),
                            Code = "messaging.whatsappsettings.view",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Messaging",
                            IsActive = true,
                            Name = "messaging.whatsappsettings.view"
                        },
                        new
                        {
                            Id = new Guid("205b87c7-b008-4e51-9fea-798c2dc4f9c2"),
                            Code = "admin.whatsappsettings.view",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Admin",
                            IsActive = true,
                            Name = "admin.whatsappsettings.view"
                        },
                        new
                        {
                            Id = new Guid("6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d"),
                            Code = "settings.whatsapp.view",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Settings",
                            IsActive = true,
                            Name = "Settings - WhatsApp View"
                        },
                        new
                        {
                            Id = new Guid("ad36cdb7-5221-448b-a6a6-c35c9f88d021"),
                            Code = "inbox.view",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Inbox",
                            IsActive = true,
                            Name = "inbox.view"
                        },
                        new
                        {
                            Id = new Guid("74828fc0-e358-4cfc-b924-13719a0d9f50"),
                            Code = "inbox.menu",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Inbox",
                            IsActive = true,
                            Name = "inbox.menu"
                        },
                        new
                        {
                            Id = new Guid("98572fe7-d142-475a-b990-f248641809e2"),
                            Code = "settings.profile.view",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Settings",
                            IsActive = true,
                            Name = "settings.profile.view"
                        },
                        new
                        {
                            Id = new Guid("821480c6-1464-415e-bba8-066fcb4e7e63"),
                            Code = "automation.menu",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Automation",
                            IsActive = true,
                            Name = "automation.menu"
                        },
                        new
                        {
                            Id = new Guid("918a61d0-5ab6-46af-a3d3-41e37b7710f9"),
                            Code = "automation.Create.Template.Flow",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Automation",
                            IsActive = true,
                            Name = "automation.Create.Template.Flow"
                        },
                        new
                        {
                            Id = new Guid("9ae90cfe-3fea-4307-b024-3083c2728148"),
                            Code = "automation.View.Template.Flow",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Automation",
                            IsActive = true,
                            Name = "automation.View.Template.Flow"
                        },
                        new
                        {
                            Id = new Guid("93c5d5a7-f8dd-460a-8c7b-e3788440ba3a"),
                            Code = "automation.Create.TemplatePlusFreetext.Flow",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Automation",
                            IsActive = true,
                            Name = "automation.Create.TemplatePlusFreetext.Flow"
                        },
                        new
                        {
                            Id = new Guid("7d7cbceb-4ce7-4835-85cd-59562487298d"),
                            Code = "automation.View.TemplatePlusFreetext.Flow",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Automation",
                            IsActive = true,
                            Name = "automation.View.TemplatePlusFreetext.Flow"
                        },
                        new
                        {
                            Id = new Guid("636b17f2-1c54-4e26-a8cd-dbf561dcb522"),
                            Code = "automation.View.Template.Flow_analytics",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Automation",
                            IsActive = true,
                            Name = "automation.View.Template.Flow_analytics"
                        },
                        new
                        {
                            Id = new Guid("adfa8490-9705-4a36-a86e-d5bff7ddc220"),
                            Code = "automation.View.TemplatePlusFreeText.Flow_analytics",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Automation",
                            IsActive = true,
                            Name = "automation.View.TemplatePlusFreeText.Flow_analytics"
                        },
                        new
                        {
                            Id = new Guid("0dedac5b-81c8-44c3-8cfe-76c58e29c6db"),
                            Code = "automation_trigger_test",
                            CreatedAt = new DateTime(2025, 9, 13, 0, 0, 0, 0, DateTimeKind.Utc),
                            Group = "Automation",
                            IsActive = true,
                            Name = "automation_trigger_test"
                        });
                });

            modelBuilder.Entity("xbytechat.api.Features.AccessControl.Models.Plan", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("Code")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .HasColumnType("text");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.ToTable("Plans");

                    b.HasData(
                        new
                        {
                            Id = new Guid("5f9f5de1-a0b2-48ba-b03d-77b27345613f"),
                            Code = "basic",
                            CreatedAt = new DateTime(2025, 1, 1, 0, 0, 0, 0, DateTimeKind.Utc),
                            Description = "Default free plan",
                            IsActive = true,
                            Name = "Basic"
                        });
                });

            modelBuilder.Entity("xbytechat.api.Features.AccessControl.Models.PlanPermission", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<DateTime>("AssignedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("AssignedBy")
                        .HasColumnType("text");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<Guid>("PermissionId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("PlanId")
                        .HasColumnType("uuid");

                    b.HasKey("Id");

                    b.HasIndex("PermissionId");

                    b.HasIndex("PlanId");

                    b.ToTable("PlanPermissions");
                });

            modelBuilder.Entity("xbytechat.api.Features.AccessControl.Models.Role", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .HasColumnType("text");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsSystemDefined")
                        .HasColumnType("boolean");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.ToTable("Roles");

                    b.HasData(
                        new
                        {
                            Id = new Guid("00000000-0000-0000-0000-000000000001"),
                            CreatedAt = new DateTime(2025, 1, 1, 0, 0, 0, 0, DateTimeKind.Utc),
                            Description = "Super Admin",
                            IsActive = true,
                            IsSystemDefined = false,
                            Name = "admin"
                        },
                        new
                        {
                            Id = new Guid("00000000-0000-0000-0000-000000000002"),
                            CreatedAt = new DateTime(2025, 1, 1, 0, 0, 0, 0, DateTimeKind.Utc),
                            Description = "Business Partner",
                            IsActive = true,
                            IsSystemDefined = false,
                            Name = "partner"
                        },
                        new
                        {
                            Id = new Guid("00000000-0000-0000-0000-000000000003"),
                            CreatedAt = new DateTime(2025, 1, 1, 0, 0, 0, 0, DateTimeKind.Utc),
                            Description = "Reseller Partner",
                            IsActive = true,
                            IsSystemDefined = false,
                            Name = "reseller"
                        },
                        new
                        {
                            Id = new Guid("00000000-0000-0000-0000-000000000004"),
                            CreatedAt = new DateTime(2025, 1, 1, 0, 0, 0, 0, DateTimeKind.Utc),
                            Description = "Business Owner",
                            IsActive = true,
                            IsSystemDefined = false,
                            Name = "business"
                        },
                        new
                        {
                            Id = new Guid("00000000-0000-0000-0000-000000000005"),
                            CreatedAt = new DateTime(2025, 1, 1, 0, 0, 0, 0, DateTimeKind.Utc),
                            Description = "Staff",
                            IsActive = true,
                            IsSystemDefined = false,
                            Name = "staff"
                        });
                });

            modelBuilder.Entity("xbytechat.api.Features.AccessControl.Models.RolePermission", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<DateTime>("AssignedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("AssignedBy")
                        .HasColumnType("text");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsRevoked")
                        .HasColumnType("boolean");

                    b.Property<Guid>("PermissionId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("RoleId")
                        .HasColumnType("uuid");

                    b.HasKey("Id");

                    b.HasIndex("PermissionId");

                    b.HasIndex("RoleId");

                    b.ToTable("RolePermissions");
                });

            modelBuilder.Entity("xbytechat.api.Features.AccessControl.Models.UserPermission", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<DateTime>("AssignedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("AssignedBy")
                        .HasColumnType("text");

                    b.Property<bool>("IsGranted")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsRevoked")
                        .HasColumnType("boolean");

                    b.Property<Guid>("PermissionId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("UserId")
                        .HasColumnType("uuid");

                    b.HasKey("Id");

                    b.HasIndex("PermissionId");

                    b.HasIndex("UserId");

                    b.ToTable("UserPermissions");
                });

            modelBuilder.Entity("xbytechat.api.Features.AuditTrail.Models.AuditLog", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("ActionType")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .HasColumnType("text");

                    b.Property<string>("IPAddress")
                        .HasColumnType("text");

                    b.Property<string>("Location")
                        .HasColumnType("text");

                    b.Property<Guid>("PerformedByUserId")
                        .HasColumnType("uuid");

                    b.Property<string>("PerformedByUserName")
                        .HasColumnType("text");

                    b.Property<string>("RoleAtTime")
                        .HasColumnType("text");

                    b.Property<string>("UserAgent")
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.ToTable("AuditLogs");
                });

            modelBuilder.Entity("xbytechat.api.Features.AutoReplyBuilder.Flows.Models.AutoReplyFlow", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("EdgesJson")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("IndustryTag")
                        .HasColumnType("text");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsDefaultTemplate")
                        .HasColumnType("boolean");

                    b.Property<string>("Keyword")
                        .HasColumnType("text");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("NodesJson")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("TriggerKeyword")
                        .HasColumnType("text");

                    b.Property<string>("UseCase")
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.ToTable("AutoReplyFlows");
                });

            modelBuilder.Entity("xbytechat.api.Features.AutoReplyBuilder.Models.AutoReplyFlowEdge", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("FlowId")
                        .HasColumnType("uuid");

                    b.Property<string>("SourceHandle")
                        .HasColumnType("text");

                    b.Property<string>("SourceNodeId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("TargetHandle")
                        .HasColumnType("text");

                    b.Property<string>("TargetNodeId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.HasIndex("FlowId");

                    b.ToTable("AutoReplyFlowEdges");
                });

            modelBuilder.Entity("xbytechat.api.Features.AutoReplyBuilder.Models.AutoReplyFlowNode", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("ConfigJson")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("FlowId")
                        .HasColumnType("uuid");

                    b.Property<string>("Label")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("NodeName")
                        .HasColumnType("text");

                    b.Property<string>("NodeType")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<int>("Order")
                        .HasColumnType("integer");

                    b.HasKey("Id");

                    b.HasIndex("FlowId");

                    b.ToTable("AutoReplyFlowNodes");
                });

            modelBuilder.Entity("xbytechat.api.Features.AutoReplyBuilder.Models.AutoReplyLog", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("ContactId")
                        .HasColumnType("uuid");

                    b.Property<string>("FlowName")
                        .HasColumnType("text");

                    b.Property<Guid?>("MessageLogId")
                        .HasColumnType("uuid");

                    b.Property<string>("ReplyContent")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("TriggerKeyword")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("TriggerType")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime>("TriggeredAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.ToTable("AutoReplyLogs");
                });

            modelBuilder.Entity("xbytechat.api.Features.AutoReplyBuilder.Models.AutoReplyRule", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("FlowId")
                        .HasColumnType("uuid");

                    b.Property<string>("FlowName")
                        .HasColumnType("text");

                    b.Property<string>("IndustryTag")
                        .HasColumnType("text");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<string>("MediaUrl")
                        .HasColumnType("text");

                    b.Property<int>("Priority")
                        .HasColumnType("integer");

                    b.Property<string>("ReplyMessage")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("SourceChannel")
                        .HasColumnType("text");

                    b.Property<string>("TriggerKeyword")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("FlowId");

                    b.ToTable("AutoReplyRules");
                });

            modelBuilder.Entity("xbytechat.api.Features.Automation.Models.AutomationFlow", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("EdgesJson")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("NodesJson")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("TriggerKeyword")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.ToTable("AutomationFlows");
                });

            modelBuilder.Entity("xbytechat.api.Features.BusinessModule.Models.Business", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("Address")
                        .HasColumnType("text");

                    b.Property<DateTime?>("ApprovedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ApprovedBy")
                        .HasColumnType("text");

                    b.Property<string>("BusinessEmail")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("BusinessName")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("CompanyName")
                        .HasColumnType("text");

                    b.Property<string>("CompanyPhone")
                        .HasColumnType("text");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .HasColumnType("text");

                    b.Property<Guid?>("CreatedByPartnerId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("DeletedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("DeletedBy")
                        .HasColumnType("text");

                    b.Property<string>("Industry")
                        .HasColumnType("text");

                    b.Property<bool>("IsApproved")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("LastLoginAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("LogoUrl")
                        .HasColumnType("text");

                    b.Property<string>("Notes")
                        .HasColumnType("text");

                    b.Property<string>("Phone")
                        .HasColumnType("text");

                    b.Property<Guid?>("PlanId")
                        .HasColumnType("uuid");

                    b.Property<string>("RepresentativeName")
                        .HasColumnType("text");

                    b.Property<string>("Source")
                        .HasColumnType("text");

                    b.Property<int>("Status")
                        .HasColumnType("integer");

                    b.Property<string>("Tags")
                        .HasColumnType("text");

                    b.Property<string>("Website")
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.HasIndex("PlanId");

                    b.ToTable("Businesses");
                });

            modelBuilder.Entity("xbytechat.api.Features.CTAFlowBuilder.Models.CTAFlowConfig", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .HasColumnType("text");

                    b.Property<string>("FlowName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsPublished")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("BusinessId", "FlowName", "IsActive")
                        .IsUnique();

                    b.HasIndex("BusinessId", "IsActive", "FlowName")
                        .HasDatabaseName("ix_ctaflowconfigs_biz_active_name");

                    b.ToTable("CTAFlowConfigs");
                });

            modelBuilder.Entity("xbytechat.api.Features.CTAFlowBuilder.Models.CTAFlowStep", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid>("CTAFlowConfigId")
                        .HasColumnType("uuid");

                    b.Property<float?>("PositionX")
                        .HasColumnType("real");

                    b.Property<float?>("PositionY")
                        .HasColumnType("real");

                    b.Property<int?>("ProfileNameSlot")
                        .HasColumnType("integer");

                    b.Property<string>("RequiredSource")
                        .HasColumnType("text");

                    b.Property<string>("RequiredTag")
                        .HasColumnType("text");

                    b.Property<int>("StepOrder")
                        .HasColumnType("integer");

                    b.Property<string>("TemplateToSend")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("TemplateType")
                        .HasColumnType("text");

                    b.Property<string>("TriggerButtonText")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("TriggerButtonType")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<bool>("UseProfileName")
                        .HasColumnType("boolean");

                    b.HasKey("Id");

                    b.HasIndex("CTAFlowConfigId");

                    b.ToTable("CTAFlowSteps");
                });

            modelBuilder.Entity("xbytechat.api.Features.CTAFlowBuilder.Models.FlowButtonLink", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<short>("ButtonIndex")
                        .HasColumnType("smallint");

                    b.Property<string>("ButtonSubType")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("ButtonText")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("ButtonType")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("ButtonValue")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<Guid>("CTAFlowStepId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("NextStepId")
                        .HasColumnType("uuid");

                    b.HasKey("Id");

                    b.HasIndex("CTAFlowStepId");

                    b.ToTable("FlowButtonLinks");
                });

            modelBuilder.Entity("xbytechat.api.Features.CTAFlowBuilder.Models.FlowExecutionLog", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<short?>("ButtonIndex")
                        .HasColumnType("smallint");

                    b.Property<Guid?>("CampaignSendLogId")
                        .HasColumnType("uuid");

                    b.Property<string>("ContactPhone")
                        .HasColumnType("text");

                    b.Property<string>("ErrorMessage")
                        .HasColumnType("text");

                    b.Property<DateTime>("ExecutedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("FlowId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("MessageLogId")
                        .HasColumnType("uuid");

                    b.Property<string>("RawResponse")
                        .HasColumnType("text");

                    b.Property<Guid?>("RequestId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("RunId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("StepId")
                        .HasColumnType("uuid");

                    b.Property<string>("StepName")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<bool>("Success")
                        .HasColumnType("boolean");

                    b.Property<string>("TemplateName")
                        .HasColumnType("text");

                    b.Property<string>("TemplateType")
                        .HasColumnType("text");

                    b.Property<Guid?>("TrackingLogId")
                        .HasColumnType("uuid");

                    b.Property<string>("TriggeredByButton")
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.ToTable("FlowExecutionLogs");
                });

            modelBuilder.Entity("xbytechat.api.Features.CTAManagement.Models.CTADefinition", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<string>("ButtonText")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("ButtonType")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<string>("TargetUrl")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Title")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.ToTable("CTADefinitions");
                });

            modelBuilder.Entity("xbytechat.api.Features.CampaignModule.Models.Audience", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("CampaignId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("CreatedByUserId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("CsvBatchId")
                        .HasColumnType("uuid");

                    b.Property<string>("Description")
                        .HasMaxLength(512)
                        .HasColumnType("character varying(512)");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(160)
                        .HasColumnType("character varying(160)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("CampaignId");

                    b.HasIndex("CsvBatchId");

                    b.HasIndex("BusinessId", "CampaignId");

                    b.HasIndex("BusinessId", "CsvBatchId");

                    b.HasIndex("BusinessId", "IsDeleted")
                        .HasDatabaseName("ix_audiences_biz_deleted");

                    b.ToTable("Audiences", (string)null);
                });

            modelBuilder.Entity("xbytechat.api.Features.CampaignModule.Models.AudienceMember", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("AttributesJson")
                        .HasColumnType("jsonb");

                    b.Property<Guid>("AudienceId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("ContactId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("CreatedByUserId")
                        .HasColumnType("uuid");

                    b.Property<string>("Email")
                        .HasMaxLength(256)
                        .HasColumnType("character varying(256)");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsTransientContact")
                        .HasColumnType("boolean");

                    b.Property<string>("Name")
                        .HasMaxLength(160)
                        .HasColumnType("character varying(160)");

                    b.Property<string>("PhoneE164")
                        .HasMaxLength(32)
                        .HasColumnType("character varying(32)");

                    b.Property<string>("PhoneRaw")
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<DateTime?>("PromotedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("ContactId")
                        .HasDatabaseName("ix_audmember_contact");

                    b.HasIndex("AudienceId", "PhoneE164")
                        .IsUnique()
                        .HasDatabaseName("ux_audmember_audience_phone");

                    b.ToTable("AudienceMembers", (string)null);
                });

            modelBuilder.Entity("xbytechat.api.Features.CampaignModule.Models.Campaign", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid?>("AudienceId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("CTAFlowConfigId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("CampaignId")
                        .HasColumnType("uuid");

                    b.Property<string>("CampaignType")
                        .HasColumnType("text");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .HasColumnType("text");

                    b.Property<Guid?>("CtaId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("DeletedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("DeletedBy")
                        .HasColumnType("text");

                    b.Property<string>("DocumentUrl")
                        .HasColumnType("text");

                    b.Property<string>("FollowUpTemplateId")
                        .HasColumnType("text");

                    b.Property<string>("ImageCaption")
                        .HasColumnType("text");

                    b.Property<string>("ImageUrl")
                        .HasColumnType("text");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<string>("MessageBody")
                        .HasColumnType("text");

                    b.Property<string>("MessageTemplate")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("PhoneNumberId")
                        .HasColumnType("text");

                    b.Property<string>("Provider")
                        .HasColumnType("text");

                    b.Property<DateTime?>("ScheduledAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("SourceCampaignId")
                        .HasColumnType("uuid");

                    b.Property<string>("Status")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("TemplateId")
                        .HasColumnType("text");

                    b.Property<string>("TemplateParameters")
                        .HasColumnType("text");

                    b.Property<string>("TemplateSchemaSnapshot")
                        .HasColumnType("jsonb");

                    b.Property<DateTime>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("VideoUrl")
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.HasIndex("BusinessId");

                    b.HasIndex("CTAFlowConfigId");

                    b.HasIndex("CtaId");

                    b.HasIndex("SourceCampaignId");

                    b.ToTable("Campaigns");
                });

            modelBuilder.Entity("xbytechat.api.Features.CampaignModule.Models.CampaignButton", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid>("CampaignId")
                        .HasColumnType("uuid");

                    b.Property<bool>("IsFromTemplate")
                        .HasColumnType("boolean");

                    b.Property<int>("Position")
                        .HasColumnType("integer");

                    b.Property<string>("Title")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Type")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Value")
                        .IsRequired()
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.HasIndex("CampaignId");

                    b.ToTable("CampaignButtons");
                });

            modelBuilder.Entity("xbytechat.api.Features.CampaignModule.Models.CampaignFlowOverride", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("ButtonText")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<Guid>("CampaignId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .HasColumnType("text");

                    b.Property<string>("OverrideNextTemplate")
                        .HasColumnType("text");

                    b.Property<string>("TemplateName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.HasKey("Id");

                    b.HasIndex("CampaignId");

                    b.ToTable("CampaignFlowOverrides");
                });

            modelBuilder.Entity("xbytechat.api.Features.CampaignModule.Models.CampaignRecipient", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid?>("AudienceMemberId")
                        .HasColumnType("uuid");

                    b.Property<string>("BotId")
                        .HasColumnType("text");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("CampaignId")
                        .HasColumnType("uuid");

                    b.Property<string>("CategoryBrowsed")
                        .HasColumnType("text");

                    b.Property<string>("ClickedCTA")
                        .HasColumnType("text");

                    b.Property<Guid?>("ContactId")
                        .HasColumnType("uuid");

                    b.Property<string>("IdempotencyKey")
                        .HasColumnType("text");

                    b.Property<bool>("IsAutoTagged")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("MaterializedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("MessagePreview")
                        .HasColumnType("text");

                    b.Property<string>("ProductBrowsed")
                        .HasColumnType("text");

                    b.Property<string>("ResolvedButtonUrlsJson")
                        .HasColumnType("jsonb");

                    b.Property<string>("ResolvedParametersJson")
                        .HasColumnType("jsonb");

                    b.Property<DateTime?>("SentAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Status")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("AudienceMemberId");

                    b.HasIndex("BusinessId");

                    b.HasIndex("ContactId");

                    b.HasIndex("IdempotencyKey")
                        .HasDatabaseName("ix_campaignrecipients_idempotency");

                    b.HasIndex("CampaignId", "ContactId")
                        .HasDatabaseName("ix_recipients_campaign_contact");

                    b.ToTable("CampaignRecipients", (string)null);
                });

            modelBuilder.Entity("xbytechat.api.Features.CampaignModule.Models.CampaignVariableMap", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("CampaignId")
                        .HasColumnType("uuid");

                    b.Property<string>("Component")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("CreatedByUserId")
                        .HasColumnType("uuid");

                    b.Property<string>("DefaultValue")
                        .HasColumnType("text");

                    b.Property<string>("Expression")
                        .HasColumnType("text");

                    b.Property<int>("Index")
                        .HasColumnType("integer");

                    b.Property<bool>("IsRequired")
                        .HasColumnType("boolean");

                    b.Property<string>("SourceKey")
                        .HasMaxLength(128)
                        .HasColumnType("character varying(128)");

                    b.Property<string>("SourceType")
                        .IsRequired()
                        .HasMaxLength(32)
                        .HasColumnType("character varying(32)");

                    b.Property<string>("StaticValue")
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.HasIndex("CampaignId");

                    b.ToTable("CampaignVariableMaps");
                });

            modelBuilder.Entity("xbytechat.api.Features.CampaignModule.Models.CsvBatch", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid?>("AudienceId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<string>("Checksum")
                        .HasMaxLength(128)
                        .HasColumnType("character varying(128)");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("CreatedByUserId")
                        .HasColumnType("uuid");

                    b.Property<string>("ErrorMessage")
                        .HasColumnType("text");

                    b.Property<string>("FileName")
                        .HasMaxLength(256)
                        .HasColumnType("character varying(256)");

                    b.Property<string>("HeadersJson")
                        .HasColumnType("jsonb");

                    b.Property<int>("RowCount")
                        .HasColumnType("integer");

                    b.Property<int>("SkippedCount")
                        .HasColumnType("integer");

                    b.Property<string>("Status")
                        .IsRequired()
                        .HasMaxLength(32)
                        .HasColumnType("character varying(32)");

                    b.HasKey("Id");

                    b.HasIndex("AudienceId");

                    b.HasIndex("Checksum")
                        .HasDatabaseName("ix_csvbatch_checksum");

                    b.HasIndex("BusinessId", "AudienceId");

                    b.HasIndex("BusinessId", "CreatedAt")
                        .HasDatabaseName("ix_csvbatch_biz_created");

                    b.ToTable("CsvBatches", (string)null);
                });

            modelBuilder.Entity("xbytechat.api.Features.CampaignModule.Models.CsvRow", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid>("BatchId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("PhoneE164")
                        .HasMaxLength(32)
                        .HasColumnType("character varying(32)");

                    b.Property<string>("PhoneRaw")
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<int>("RowIndex")
                        .HasColumnType("integer");

                    b.Property<string>("RowJson")
                        .IsRequired()
                        .HasColumnType("jsonb");

                    b.Property<string>("ValidationError")
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.HasIndex("PhoneE164")
                        .HasDatabaseName("ix_csvrow_phone");

                    b.HasIndex("BatchId", "RowIndex")
                        .IsUnique()
                        .HasDatabaseName("ux_csvrow_batch_rowidx");

                    b.HasIndex("BusinessId", "BatchId");

                    b.ToTable("CsvRows", (string)null);
                });

            modelBuilder.Entity("xbytechat.api.Features.CampaignModule.Models.OutboundCampaignJob", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<int>("Attempt")
                        .HasColumnType("integer");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("CampaignId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("LastError")
                        .HasMaxLength(4000)
                        .HasColumnType("character varying(4000)");

                    b.Property<int>("MaxAttempts")
                        .HasColumnType("integer");

                    b.Property<DateTimeOffset>("NextAttemptAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Status")
                        .IsRequired()
                        .HasMaxLength(32)
                        .HasColumnType("character varying(32)");

                    b.Property<DateTime>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.HasIndex("CampaignId");

                    b.HasIndex("Status", "NextAttemptAt");

                    b.ToTable("OutboundCampaignJobs", (string)null);
                });

            modelBuilder.Entity("xbytechat.api.Features.CampaignTracking.Models.CampaignSendLog", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<bool>("AllowRetry")
                        .HasColumnType("boolean");

                    b.Property<string>("Browser")
                        .HasColumnType("text");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<string>("ButtonBundleJson")
                        .HasColumnType("text");

                    b.Property<Guid?>("CTAFlowConfigId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("CTAFlowStepId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("CampaignId")
                        .HasColumnType("uuid");

                    b.Property<string>("City")
                        .HasColumnType("text");

                    b.Property<string>("ClickType")
                        .HasColumnType("text");

                    b.Property<DateTime?>("ClickedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("ContactId")
                        .HasColumnType("uuid");

                    b.Property<string>("Country")
                        .HasColumnType("text");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .HasColumnType("text");

                    b.Property<DateTime?>("DeliveredAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("DeviceInfo")
                        .HasColumnType("text");

                    b.Property<string>("DeviceType")
                        .HasColumnType("text");

                    b.Property<string>("ErrorMessage")
                        .HasColumnType("text");

                    b.Property<string>("IpAddress")
                        .HasColumnType("text");

                    b.Property<bool>("IsClicked")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("LastRetryAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("LastRetryStatus")
                        .HasColumnType("text");

                    b.Property<string>("MacAddress")
                        .HasColumnType("text");

                    b.Property<string>("MessageBody")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("MessageId")
                        .HasColumnType("text");

                    b.Property<Guid?>("MessageLogId")
                        .HasColumnType("uuid");

                    b.Property<DateTime?>("ReadAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("RecipientId")
                        .HasColumnType("uuid");

                    b.Property<int>("RetryCount")
                        .HasColumnType("integer");

                    b.Property<Guid?>("RunId")
                        .HasColumnType("uuid");

                    b.Property<string>("SendStatus")
                        .HasColumnType("text");

                    b.Property<DateTime?>("SentAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("SourceChannel")
                        .HasColumnType("text");

                    b.Property<string>("TemplateId")
                        .HasColumnType("text");

                    b.Property<Guid?>("UserId")
                        .HasColumnType("uuid");

                    b.HasKey("Id");

                    b.HasIndex("CampaignId");

                    b.HasIndex("ContactId");

                    b.HasIndex("MessageId");

                    b.HasIndex("MessageLogId");

                    b.HasIndex("RecipientId");

                    b.HasIndex("RunId");

                    b.HasIndex("UserId");

                    b.HasIndex("BusinessId", "MessageId")
                        .HasDatabaseName("IX_CampaignSendLogs_Business_MessageId");

                    b.ToTable("CampaignSendLogs", (string)null);
                });

            modelBuilder.Entity("xbytechat.api.Features.CampaignTracking.Worker.CampaignClickDailyAgg", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<int>("ButtonIndex")
                        .HasColumnType("integer");

                    b.Property<Guid>("CampaignId")
                        .HasColumnType("uuid");

                    b.Property<long>("Clicks")
                        .HasColumnType("bigint");

                    b.Property<DateTime>("Day")
                        .HasColumnType("date");

                    b.HasKey("Id");

                    b.HasIndex("CampaignId", "Day", "ButtonIndex")
                        .IsUnique();

                    b.ToTable("CampaignClickDailyAgg");
                });

            modelBuilder.Entity("xbytechat.api.Features.CampaignTracking.Worker.CampaignClickLog", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<int>("ButtonIndex")
                        .HasColumnType("integer");

                    b.Property<string>("ButtonTitle")
                        .IsRequired()
                        .HasMaxLength(120)
                        .HasColumnType("character varying(120)");

                    b.Property<Guid>("CampaignId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("CampaignSendLogId")
                        .HasColumnType("uuid");

                    b.Property<string>("ClickType")
                        .IsRequired()
                        .HasMaxLength(16)
                        .HasColumnType("character varying(16)");

                    b.Property<DateTime>("ClickedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("ContactId")
                        .HasColumnType("uuid");

                    b.Property<string>("Destination")
                        .IsRequired()
                        .HasMaxLength(2048)
                        .HasColumnType("character varying(2048)");

                    b.Property<string>("Ip")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("character varying(64)");

                    b.Property<Guid?>("RunId")
                        .HasColumnType("uuid");

                    b.Property<string>("UserAgent")
                        .IsRequired()
                        .HasMaxLength(512)
                        .HasColumnType("character varying(512)");

                    b.HasKey("Id");

                    b.HasIndex("CampaignId", "ButtonIndex");

                    b.HasIndex("CampaignId", "ContactId");

                    b.HasIndex("CampaignId", "ClickType", "ClickedAt");

                    b.ToTable("CampaignClickLogs");
                });

            modelBuilder.Entity("xbytechat.api.Features.Catalog.Models.CatalogClickLog", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("BotId")
                        .HasColumnType("text");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<string>("ButtonText")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("CTAJourney")
                        .HasColumnType("text");

                    b.Property<Guid?>("CampaignId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("CampaignSendLogId")
                        .HasColumnType("uuid");

                    b.Property<string>("CategoryBrowsed")
                        .HasColumnType("text");

                    b.Property<DateTime?>("ClickedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid?>("ContactId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("CtaId")
                        .HasColumnType("uuid");

                    b.Property<bool>("FollowUpSent")
                        .HasColumnType("boolean");

                    b.Property<string>("LastInteractionType")
                        .HasColumnType("text");

                    b.Property<Guid?>("MessageLogId")
                        .HasColumnType("uuid");

                    b.Property<string>("PlanSnapshot")
                        .HasColumnType("text");

                    b.Property<string>("ProductBrowsed")
                        .HasColumnType("text");

                    b.Property<Guid?>("ProductId")
                        .HasColumnType("uuid");

                    b.Property<string>("RefMessageId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Source")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("TemplateId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("UserId")
                        .HasColumnType("text");

                    b.Property<string>("UserName")
                        .HasColumnType("text");

                    b.Property<string>("UserPhone")
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.ToTable("CatalogClickLogs");
                });

            modelBuilder.Entity("xbytechat.api.Features.Catalog.Models.Product", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Currency")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("ImageUrl")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("LastClickedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("MostClickedCTA")
                        .HasColumnType("text");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<decimal>("Price")
                        .HasColumnType("numeric");

                    b.Property<int>("TotalClicks")
                        .HasColumnType("integer");

                    b.HasKey("Id");

                    b.ToTable("Products");
                });

            modelBuilder.Entity("xbytechat.api.Features.FeatureAccessModule.Models.FeatureAccess", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("FeatureName")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("Group")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<bool>("IsEnabled")
                        .HasColumnType("boolean");

                    b.Property<string>("Notes")
                        .HasColumnType("text");

                    b.Property<string>("Plan")
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.HasIndex("BusinessId", "FeatureName")
                        .IsUnique();

                    b.ToTable("FeatureAccess");
                });

            modelBuilder.Entity("xbytechat.api.Features.FeatureAccessModule.Models.FeatureMaster", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasMaxLength(250)
                        .HasColumnType("character varying(250)");

                    b.Property<string>("DisplayName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("FeatureCode")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<string>("Group")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.HasKey("Id");

                    b.ToTable("FeatureMaster");
                });

            modelBuilder.Entity("xbytechat.api.Features.FeatureAccessModule.Models.UserFeatureAccess", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("FeatureName")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<bool>("IsEnabled")
                        .HasColumnType("boolean");

                    b.Property<Guid?>("ModifiedByUserId")
                        .HasColumnType("uuid");

                    b.Property<string>("Notes")
                        .HasColumnType("text");

                    b.Property<Guid>("UserId")
                        .HasColumnType("uuid");

                    b.HasKey("Id");

                    b.ToTable("UserFeatureAccess");
                });

            modelBuilder.Entity("xbytechat.api.Features.Inbox.Models.ChatSessionState", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("ContactId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("LastUpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Mode")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("UpdatedBy")
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.ToTable("ChatSessionStates");
                });

            modelBuilder.Entity("xbytechat.api.Features.Inbox.Models.ContactRead", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<Guid>("ContactId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("LastReadAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<Guid>("UserId")
                        .HasColumnType("uuid");

                    b.HasKey("Id");

                    b.HasIndex("ContactId", "UserId")
                        .IsUnique();

                    b.HasIndex("BusinessId", "UserId", "ContactId")
                        .IsUnique()
                        .HasDatabaseName("ux_contactreads_biz_user_contact");

                    b.ToTable("ContactReads");
                });

            modelBuilder.Entity("xbytechat.api.Features.Inbox.Models.QuickReply", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("Body")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .HasColumnType("text");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("boolean");

                    b.Property<string>("Language")
                        .HasMaxLength(8)
                        .HasColumnType("character varying(8)");

                    b.Property<Guid?>("OwnerUserId")
                        .HasColumnType("uuid");

                    b.Property<int>("Scope")
                        .HasColumnType("integer");

                    b.Property<string>("TagsCsv")
                        .HasMaxLength(240)
                        .HasColumnType("character varying(240)");

                    b.Property<string>("Title")
                        .IsRequired()
                        .HasMaxLength(120)
                        .HasColumnType("character varying(120)");

                    b.Property<DateTime>("UpdatedAt")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("timestamp with time zone")
                        .HasDefaultValueSql("NOW()");

                    b.Property<string>("UpdatedBy")
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.HasIndex("UpdatedAt");

                    b.HasIndex("BusinessId", "OwnerUserId", "IsActive");

                    b.HasIndex("BusinessId", "Scope", "IsActive");

                    b.ToTable("QuickReplies");
                });

            modelBuilder.Entity("xbytechat.api.Features.MessageManagement.DTOs.MessageStatusLog", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid?>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("CampaignId")
                        .HasColumnType("uuid");

                    b.Property<string>("Channel")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CustomerProfileName")
                        .HasColumnType("text");

                    b.Property<DateTime?>("DeliveredAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int?>("ErrorCode")
                        .HasColumnType("integer");

                    b.Property<string>("ErrorMessage")
                        .HasColumnType("text");

                    b.Property<bool>("IsSessionOpen")
                        .HasColumnType("boolean");

                    b.Property<string>("MessageId")
                        .HasColumnType("text");

                    b.Property<string>("MessageType")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<long?>("MetaTimestamp")
                        .HasColumnType("bigint");

                    b.Property<string>("RawPayload")
                        .HasColumnType("text");

                    b.Property<DateTime?>("ReadAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("RecipientNumber")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<DateTime?>("SentAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("Status")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("TemplateCategory")
                        .HasColumnType("text");

                    b.Property<string>("TemplateName")
                        .HasColumnType("text");

                    b.Property<Guid?>("UserId")
                        .HasColumnType("uuid");

                    b.HasKey("Id");

                    b.HasIndex("BusinessId");

                    b.HasIndex("CampaignId");

                    b.HasIndex("UserId");

                    b.ToTable("MessageStatusLogs");
                });

            modelBuilder.Entity("xbytechat.api.Features.PlanManagement.Models.PlanFeatureMatrix", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("FeatureName")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<bool>("IsEnabled")
                        .HasColumnType("boolean");

                    b.Property<string>("PlanName")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.HasKey("Id");

                    b.ToTable("PlanFeatureMatrix");
                });

            modelBuilder.Entity("xbytechat.api.Features.Tracking.Models.TrackingLog", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("Browser")
                        .HasColumnType("text");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<string>("ButtonText")
                        .HasColumnType("text");

                    b.Property<string>("CTAType")
                        .HasColumnType("text");

                    b.Property<Guid?>("CampaignId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("CampaignSendLogId")
                        .HasColumnType("uuid");

                    b.Property<string>("City")
                        .HasColumnType("text");

                    b.Property<DateTime>("ClickedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ClickedVia")
                        .HasColumnType("text");

                    b.Property<Guid?>("ContactId")
                        .HasColumnType("uuid");

                    b.Property<string>("ContactPhone")
                        .HasColumnType("text");

                    b.Property<string>("Country")
                        .HasColumnType("text");

                    b.Property<string>("DeviceType")
                        .HasColumnType("text");

                    b.Property<bool>("FollowUpSent")
                        .HasColumnType("boolean");

                    b.Property<string>("IPAddress")
                        .HasColumnType("text");

                    b.Property<string>("LastInteractionType")
                        .HasColumnType("text");

                    b.Property<string>("MessageId")
                        .HasColumnType("text");

                    b.Property<Guid?>("MessageLogId")
                        .HasColumnType("uuid");

                    b.Property<string>("Referrer")
                        .HasColumnType("text");

                    b.Property<Guid?>("SessionId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("SourceId")
                        .HasColumnType("uuid");

                    b.Property<string>("SourceType")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<Guid?>("StepId")
                        .HasColumnType("uuid");

                    b.Property<string>("TemplateId")
                        .HasColumnType("text");

                    b.Property<Guid?>("ThreadId")
                        .HasColumnType("uuid");

                    b.HasKey("Id");

                    b.HasIndex("CampaignId");

                    b.HasIndex("CampaignSendLogId");

                    b.HasIndex("ContactId");

                    b.HasIndex("MessageLogId");

                    b.ToTable("TrackingLogs");
                });

            modelBuilder.Entity("xbytechat.api.Features.Webhooks.Models.FailedWebhookLog", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("ErrorMessage")
                        .HasColumnType("text");

                    b.Property<string>("FailureType")
                        .HasColumnType("text");

                    b.Property<string>("RawJson")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("SourceModule")
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.ToTable("FailedWebhookLogs");
                });

            modelBuilder.Entity("xbytechat.api.Features.Webhooks.Models.WebhookSettings", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<bool>("AutoCleanupEnabled")
                        .HasColumnType("boolean");

                    b.Property<DateTime?>("LastCleanupAt")
                        .HasColumnType("timestamp with time zone");

                    b.HasKey("Id");

                    b.ToTable("WebhookSettings");
                });

            modelBuilder.Entity("xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<bool>("IsDefault")
                        .HasColumnType("boolean");

                    b.Property<string>("PhoneNumberId")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Provider")
                        .IsRequired()
                        .HasColumnType("character varying(50)");

                    b.Property<string>("SenderDisplayName")
                        .HasColumnType("text");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("WhatsAppBusinessNumber")
                        .IsRequired()
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.HasIndex("BusinessId", "Provider", "PhoneNumberId")
                        .IsUnique()
                        .HasDatabaseName("UX_WhatsappPhoneNumbers_Bus_Prov_PhoneId");

                    b.ToTable("WhatsAppPhoneNumbers", (string)null);
                });

            modelBuilder.Entity("xbytechat.api.Features.xbTimelines.Models.LeadTimeline", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("integer");

                    NpgsqlPropertyBuilderExtensions.UseIdentityByDefaultColumn(b.Property<int>("Id"));

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<Guid?>("CTASourceId")
                        .HasColumnType("uuid");

                    b.Property<string>("CTASourceType")
                        .HasColumnType("text");

                    b.Property<string>("CTAType")
                        .HasColumnType("text");

                    b.Property<string>("Category")
                        .HasColumnType("text");

                    b.Property<Guid>("ContactId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("CreatedBy")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("Data")
                        .HasColumnType("text");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("EventType")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<bool>("IsSystemGenerated")
                        .HasColumnType("boolean");

                    b.Property<Guid?>("ReferenceId")
                        .HasColumnType("uuid");

                    b.Property<string>("Source")
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.HasIndex("BusinessId");

                    b.HasIndex("ContactId");

                    b.ToTable("LeadTimelines");
                });

            modelBuilder.Entity("xbytechat.api.Models.BusinessModel.BusinessPlanInfo", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("Plan")
                        .HasColumnType("integer");

                    b.Property<DateTime>("QuotaResetDate")
                        .HasColumnType("timestamp with time zone");

                    b.Property<int>("RemainingMessages")
                        .HasColumnType("integer");

                    b.Property<int>("TotalMonthlyQuota")
                        .HasColumnType("integer");

                    b.Property<DateTime>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<decimal>("WalletBalance")
                        .HasColumnType("numeric");

                    b.HasKey("Id");

                    b.HasIndex("BusinessId")
                        .IsUnique();

                    b.ToTable("BusinessPlanInfos");
                });

            modelBuilder.Entity("xbytechat_api.Features.Billing.Models.ProviderBillingEvent", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<string>("ConversationCategory")
                        .HasColumnType("text");

                    b.Property<string>("ConversationId")
                        .HasColumnType("text");

                    b.Property<DateTimeOffset>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("EventType")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<bool?>("IsChargeable")
                        .HasColumnType("boolean");

                    b.Property<Guid?>("MessageLogId")
                        .HasColumnType("uuid");

                    b.Property<DateTimeOffset>("OccurredAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("PayloadJson")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<decimal?>("PriceAmount")
                        .HasColumnType("numeric");

                    b.Property<string>("PriceCurrency")
                        .HasColumnType("text");

                    b.Property<string>("Provider")
                        .IsRequired()
                        .HasColumnType("text");

                    b.Property<string>("ProviderMessageId")
                        .HasColumnType("text");

                    b.HasKey("Id");

                    b.ToTable("ProviderBillingEvents");
                });

            modelBuilder.Entity("xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity", b =>
                {
                    b.Property<Guid>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("uuid");

                    b.Property<string>("ApiKey")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<string>("ApiUrl")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("character varying(500)");

                    b.Property<Guid>("BusinessId")
                        .HasColumnType("uuid");

                    b.Property<DateTime>("CreatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<bool>("IsActive")
                        .HasColumnType("boolean");

                    b.Property<string>("PhoneNumberId")
                        .HasColumnType("text");

                    b.Property<string>("Provider")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("character varying(50)");

                    b.Property<string>("SenderDisplayName")
                        .HasMaxLength(100)
                        .HasColumnType("character varying(100)");

                    b.Property<DateTime?>("UpdatedAt")
                        .HasColumnType("timestamp with time zone");

                    b.Property<string>("WabaId")
                        .HasColumnType("text");

                    b.Property<string>("WebhookCallbackUrl")
                        .HasMaxLength(1000)
                        .HasColumnType("character varying(1000)");

                    b.Property<string>("WebhookSecret")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("WebhookVerifyToken")
                        .HasMaxLength(200)
                        .HasColumnType("character varying(200)");

                    b.Property<string>("WhatsAppBusinessNumber")
                        .HasMaxLength(20)
                        .HasColumnType("character varying(20)");

                    b.HasKey("Id");

                    b.HasAlternateKey("BusinessId", "Provider")
                        .HasName("AK_WhatsAppSettings_BusinessId_Provider");

                    b.HasIndex("Provider", "PhoneNumberId")
                        .HasDatabaseName("IX_WhatsAppSettings_Provider_PhoneNumberId");

                    b.HasIndex("Provider", "WabaId")
                        .HasDatabaseName("IX_WhatsAppSettings_Provider_WabaId");

                    b.HasIndex("Provider", "WebhookCallbackUrl")
                        .HasDatabaseName("IX_WhatsAppSettings_Provider_CallbackUrl");

                    b.HasIndex("Provider", "WhatsAppBusinessNumber")
                        .HasDatabaseName("IX_WhatsAppSettings_Provider_BusinessNumber");

                    b.HasIndex("BusinessId", "Provider", "IsActive")
                        .HasDatabaseName("IX_WhatsAppSettings_Business_Provider_IsActive");

                    b.ToTable("WhatsAppSettings", (string)null);
                });

            modelBuilder.Entity("ContactTag", b =>
                {
                    b.HasOne("xbytechat.api.CRM.Models.Contact", "Contact")
                        .WithMany("ContactTags")
                        .HasForeignKey("ContactId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("xbytechat.api.CRM.Models.Tag", "Tag")
                        .WithMany("ContactTags")
                        .HasForeignKey("TagId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Contact");

                    b.Navigation("Tag");
                });

            modelBuilder.Entity("MessageLog", b =>
                {
                    b.HasOne("xbytechat.api.Features.BusinessModule.Models.Business", "Business")
                        .WithMany()
                        .HasForeignKey("BusinessId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("xbytechat.api.Features.CampaignModule.Models.Campaign", "SourceCampaign")
                        .WithMany("MessageLogs")
                        .HasForeignKey("CampaignId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("xbytechat.api.CRM.Models.Contact", "Contact")
                        .WithMany()
                        .HasForeignKey("ContactId");

                    b.Navigation("Business");

                    b.Navigation("Contact");

                    b.Navigation("SourceCampaign");
                });

            modelBuilder.Entity("xbytechat.api.AuthModule.Models.User", b =>
                {
                    b.HasOne("xbytechat.api.Features.BusinessModule.Models.Business", "Business")
                        .WithMany("Users")
                        .HasForeignKey("BusinessId");

                    b.HasOne("xbytechat.api.Features.AccessControl.Models.Role", "Role")
                        .WithMany("Users")
                        .HasForeignKey("RoleId");

                    b.Navigation("Business");

                    b.Navigation("Role");
                });

            modelBuilder.Entity("xbytechat.api.CRM.Models.Contact", b =>
                {
                    b.HasOne("xbytechat.api.Features.BusinessModule.Models.Business", "Business")
                        .WithMany()
                        .HasForeignKey("BusinessId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Business");
                });

            modelBuilder.Entity("xbytechat.api.Features.AccessControl.Models.PlanPermission", b =>
                {
                    b.HasOne("xbytechat.api.Features.AccessControl.Models.Permission", "Permission")
                        .WithMany("PlanPermissions")
                        .HasForeignKey("PermissionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("xbytechat.api.Features.AccessControl.Models.Plan", "Plan")
                        .WithMany("PlanPermissions")
                        .HasForeignKey("PlanId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Permission");

                    b.Navigation("Plan");
                });

            modelBuilder.Entity("xbytechat.api.Features.AccessControl.Models.RolePermission", b =>
                {
                    b.HasOne("xbytechat.api.Features.AccessControl.Models.Permission", "Permission")
                        .WithMany("RolePermissions")
                        .HasForeignKey("PermissionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("xbytechat.api.Features.AccessControl.Models.Role", "Role")
                        .WithMany("RolePermissions")
                        .HasForeignKey("RoleId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Permission");

                    b.Navigation("Role");
                });

            modelBuilder.Entity("xbytechat.api.Features.AccessControl.Models.UserPermission", b =>
                {
                    b.HasOne("xbytechat.api.Features.AccessControl.Models.Permission", "Permission")
                        .WithMany("UserPermissions")
                        .HasForeignKey("PermissionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("xbytechat.api.AuthModule.Models.User", "User")
                        .WithMany("UserPermissions")
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Permission");

                    b.Navigation("User");
                });

            modelBuilder.Entity("xbytechat.api.Features.AutoReplyBuilder.Models.AutoReplyFlowEdge", b =>
                {
                    b.HasOne("xbytechat.api.Features.AutoReplyBuilder.Flows.Models.AutoReplyFlow", "Flow")
                        .WithMany()
                        .HasForeignKey("FlowId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Flow");
                });

            modelBuilder.Entity("xbytechat.api.Features.AutoReplyBuilder.Models.AutoReplyFlowNode", b =>
                {
                    b.HasOne("xbytechat.api.Features.AutoReplyBuilder.Flows.Models.AutoReplyFlow", "Flow")
                        .WithMany()
                        .HasForeignKey("FlowId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.OwnsOne("xbytechat.api.Features.AutoReplyBuilder.Models.Position", "Position", b1 =>
                        {
                            b1.Property<Guid>("AutoReplyFlowNodeId")
                                .HasColumnType("uuid");

                            b1.Property<double>("X")
                                .HasColumnType("double precision");

                            b1.Property<double>("Y")
                                .HasColumnType("double precision");

                            b1.HasKey("AutoReplyFlowNodeId");

                            b1.ToTable("AutoReplyFlowNodes");

                            b1.WithOwner()
                                .HasForeignKey("AutoReplyFlowNodeId");
                        });

                    b.Navigation("Flow");

                    b.Navigation("Position")
                        .IsRequired();
                });

            modelBuilder.Entity("xbytechat.api.Features.AutoReplyBuilder.Models.AutoReplyRule", b =>
                {
                    b.HasOne("xbytechat.api.Features.AutoReplyBuilder.Flows.Models.AutoReplyFlow", "Flow")
                        .WithMany()
                        .HasForeignKey("FlowId");

                    b.Navigation("Flow");
                });

            modelBuilder.Entity("xbytechat.api.Features.BusinessModule.Models.Business", b =>
                {
                    b.HasOne("xbytechat.api.Features.AccessControl.Models.Plan", "Plan")
                        .WithMany("Businesses")
                        .HasForeignKey("PlanId");

                    b.Navigation("Plan");
                });

            modelBuilder.Entity("xbytechat.api.Features.CTAFlowBuilder.Models.CTAFlowStep", b =>
                {
                    b.HasOne("xbytechat.api.Features.CTAFlowBuilder.Models.CTAFlowConfig", "Flow")
                        .WithMany("Steps")
                        .HasForeignKey("CTAFlowConfigId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Flow");
                });

            modelBuilder.Entity("xbytechat.api.Features.CTAFlowBuilder.Models.FlowButtonLink", b =>
                {
                    b.HasOne("xbytechat.api.Features.CTAFlowBuilder.Models.CTAFlowStep", "Step")
                        .WithMany("ButtonLinks")
                        .HasForeignKey("CTAFlowStepId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Step");
                });

            modelBuilder.Entity("xbytechat.api.Features.CampaignModule.Models.Audience", b =>
                {
                    b.HasOne("xbytechat.api.Features.CampaignModule.Models.Campaign", "Campaign")
                        .WithMany("Audiences")
                        .HasForeignKey("CampaignId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("xbytechat.api.Features.CampaignModule.Models.CsvBatch", "CsvBatch")
                        .WithMany()
                        .HasForeignKey("CsvBatchId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.Navigation("Campaign");

                    b.Navigation("CsvBatch");
                });

            modelBuilder.Entity("xbytechat.api.Features.CampaignModule.Models.AudienceMember", b =>
                {
                    b.HasOne("xbytechat.api.Features.CampaignModule.Models.Audience", "Audience")
                        .WithMany("Members")
                        .HasForeignKey("AudienceId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Audience");
                });

            modelBuilder.Entity("xbytechat.api.Features.CampaignModule.Models.Campaign", b =>
                {
                    b.HasOne("xbytechat.api.Features.BusinessModule.Models.Business", "Business")
                        .WithMany("Campaigns")
                        .HasForeignKey("BusinessId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("xbytechat.api.Features.CTAFlowBuilder.Models.CTAFlowConfig", "CTAFlowConfig")
                        .WithMany()
                        .HasForeignKey("CTAFlowConfigId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("xbytechat.api.Features.CTAManagement.Models.CTADefinition", "Cta")
                        .WithMany()
                        .HasForeignKey("CtaId");

                    b.HasOne("xbytechat.api.Features.CampaignModule.Models.Campaign", "SourceCampaign")
                        .WithMany()
                        .HasForeignKey("SourceCampaignId");

                    b.Navigation("Business");

                    b.Navigation("CTAFlowConfig");

                    b.Navigation("Cta");

                    b.Navigation("SourceCampaign");
                });

            modelBuilder.Entity("xbytechat.api.Features.CampaignModule.Models.CampaignButton", b =>
                {
                    b.HasOne("xbytechat.api.Features.CampaignModule.Models.Campaign", "Campaign")
                        .WithMany("MultiButtons")
                        .HasForeignKey("CampaignId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Campaign");
                });

            modelBuilder.Entity("xbytechat.api.Features.CampaignModule.Models.CampaignFlowOverride", b =>
                {
                    b.HasOne("xbytechat.api.Features.CampaignModule.Models.Campaign", "Campaign")
                        .WithMany()
                        .HasForeignKey("CampaignId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Campaign");
                });

            modelBuilder.Entity("xbytechat.api.Features.CampaignModule.Models.CampaignRecipient", b =>
                {
                    b.HasOne("xbytechat.api.Features.CampaignModule.Models.AudienceMember", "AudienceMember")
                        .WithMany()
                        .HasForeignKey("AudienceMemberId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("xbytechat.api.Features.BusinessModule.Models.Business", "Business")
                        .WithMany()
                        .HasForeignKey("BusinessId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("xbytechat.api.Features.CampaignModule.Models.Campaign", "Campaign")
                        .WithMany("Recipients")
                        .HasForeignKey("CampaignId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("xbytechat.api.CRM.Models.Contact", "Contact")
                        .WithMany()
                        .HasForeignKey("ContactId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.Navigation("AudienceMember");

                    b.Navigation("Business");

                    b.Navigation("Campaign");

                    b.Navigation("Contact");
                });

            modelBuilder.Entity("xbytechat.api.Features.CampaignModule.Models.CampaignVariableMap", b =>
                {
                    b.HasOne("xbytechat.api.Features.CampaignModule.Models.Campaign", "Campaign")
                        .WithMany("VariableMaps")
                        .HasForeignKey("CampaignId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Campaign");
                });

            modelBuilder.Entity("xbytechat.api.Features.CampaignModule.Models.CsvBatch", b =>
                {
                    b.HasOne("xbytechat.api.Features.CampaignModule.Models.Audience", null)
                        .WithMany()
                        .HasForeignKey("AudienceId")
                        .OnDelete(DeleteBehavior.SetNull);
                });

            modelBuilder.Entity("xbytechat.api.Features.CampaignModule.Models.CsvRow", b =>
                {
                    b.HasOne("xbytechat.api.Features.CampaignModule.Models.CsvBatch", "Batch")
                        .WithMany()
                        .HasForeignKey("BatchId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Batch");
                });

            modelBuilder.Entity("xbytechat.api.Features.CampaignTracking.Models.CampaignSendLog", b =>
                {
                    b.HasOne("xbytechat.api.Features.CampaignModule.Models.Campaign", "Campaign")
                        .WithMany("SendLogs")
                        .HasForeignKey("CampaignId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("xbytechat.api.CRM.Models.Contact", "Contact")
                        .WithMany()
                        .HasForeignKey("ContactId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("MessageLog", "MessageLog")
                        .WithMany()
                        .HasForeignKey("MessageLogId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("xbytechat.api.Features.CampaignModule.Models.CampaignRecipient", "Recipient")
                        .WithMany("SendLogs")
                        .HasForeignKey("RecipientId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("xbytechat.api.AuthModule.Models.User", null)
                        .WithMany("SendLogs")
                        .HasForeignKey("UserId");

                    b.Navigation("Campaign");

                    b.Navigation("Contact");

                    b.Navigation("MessageLog");

                    b.Navigation("Recipient");
                });

            modelBuilder.Entity("xbytechat.api.Features.MessageManagement.DTOs.MessageStatusLog", b =>
                {
                    b.HasOne("xbytechat.api.Features.BusinessModule.Models.Business", "Business")
                        .WithMany("MessageStatusLogs")
                        .HasForeignKey("BusinessId");

                    b.HasOne("xbytechat.api.Features.CampaignModule.Models.Campaign", "Campaign")
                        .WithMany("MessageStatusLogs")
                        .HasForeignKey("CampaignId");

                    b.HasOne("xbytechat.api.AuthModule.Models.User", "User")
                        .WithMany("MessageStatusLogs")
                        .HasForeignKey("UserId");

                    b.Navigation("Business");

                    b.Navigation("Campaign");

                    b.Navigation("User");
                });

            modelBuilder.Entity("xbytechat.api.Features.Tracking.Models.TrackingLog", b =>
                {
                    b.HasOne("xbytechat.api.Features.CampaignModule.Models.Campaign", "Campaign")
                        .WithMany()
                        .HasForeignKey("CampaignId");

                    b.HasOne("xbytechat.api.Features.CampaignTracking.Models.CampaignSendLog", "CampaignSendLog")
                        .WithMany()
                        .HasForeignKey("CampaignSendLogId");

                    b.HasOne("xbytechat.api.CRM.Models.Contact", "Contact")
                        .WithMany()
                        .HasForeignKey("ContactId");

                    b.HasOne("MessageLog", "MessageLog")
                        .WithMany()
                        .HasForeignKey("MessageLogId");

                    b.Navigation("Campaign");

                    b.Navigation("CampaignSendLog");

                    b.Navigation("Contact");

                    b.Navigation("MessageLog");
                });

            modelBuilder.Entity("xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber", b =>
                {
                    b.HasOne("xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity", null)
                        .WithMany("WhatsAppBusinessNumbers")
                        .HasForeignKey("BusinessId", "Provider")
                        .HasPrincipalKey("BusinessId", "Provider")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("xbytechat.api.Features.xbTimelines.Models.LeadTimeline", b =>
                {
                    b.HasOne("xbytechat.api.Features.BusinessModule.Models.Business", "Business")
                        .WithMany()
                        .HasForeignKey("BusinessId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("xbytechat.api.CRM.Models.Contact", "Contact")
                        .WithMany()
                        .HasForeignKey("ContactId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Business");

                    b.Navigation("Contact");
                });

            modelBuilder.Entity("xbytechat.api.Models.BusinessModel.BusinessPlanInfo", b =>
                {
                    b.HasOne("xbytechat.api.Features.BusinessModule.Models.Business", "Business")
                        .WithOne("BusinessPlanInfo")
                        .HasForeignKey("xbytechat.api.Models.BusinessModel.BusinessPlanInfo", "BusinessId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Business");
                });

            modelBuilder.Entity("xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity", b =>
                {
                    b.HasOne("xbytechat.api.Features.BusinessModule.Models.Business", null)
                        .WithMany("WhatsAppSettings")
                        .HasForeignKey("BusinessId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("xbytechat.api.AuthModule.Models.User", b =>
                {
                    b.Navigation("MessageStatusLogs");

                    b.Navigation("SendLogs");

                    b.Navigation("UserPermissions");
                });

            modelBuilder.Entity("xbytechat.api.CRM.Models.Contact", b =>
                {
                    b.Navigation("ContactTags");
                });

            modelBuilder.Entity("xbytechat.api.CRM.Models.Tag", b =>
                {
                    b.Navigation("ContactTags");
                });

            modelBuilder.Entity("xbytechat.api.Features.AccessControl.Models.Permission", b =>
                {
                    b.Navigation("PlanPermissions");

                    b.Navigation("RolePermissions");

                    b.Navigation("UserPermissions");
                });

            modelBuilder.Entity("xbytechat.api.Features.AccessControl.Models.Plan", b =>
                {
                    b.Navigation("Businesses");

                    b.Navigation("PlanPermissions");
                });

            modelBuilder.Entity("xbytechat.api.Features.AccessControl.Models.Role", b =>
                {
                    b.Navigation("RolePermissions");

                    b.Navigation("Users");
                });

            modelBuilder.Entity("xbytechat.api.Features.BusinessModule.Models.Business", b =>
                {
                    b.Navigation("BusinessPlanInfo");

                    b.Navigation("Campaigns");

                    b.Navigation("MessageStatusLogs");

                    b.Navigation("Users");

                    b.Navigation("WhatsAppSettings");
                });

            modelBuilder.Entity("xbytechat.api.Features.CTAFlowBuilder.Models.CTAFlowConfig", b =>
                {
                    b.Navigation("Steps");
                });

            modelBuilder.Entity("xbytechat.api.Features.CTAFlowBuilder.Models.CTAFlowStep", b =>
                {
                    b.Navigation("ButtonLinks");
                });

            modelBuilder.Entity("xbytechat.api.Features.CampaignModule.Models.Audience", b =>
                {
                    b.Navigation("Members");
                });

            modelBuilder.Entity("xbytechat.api.Features.CampaignModule.Models.Campaign", b =>
                {
                    b.Navigation("Audiences");

                    b.Navigation("MessageLogs");

                    b.Navigation("MessageStatusLogs");

                    b.Navigation("MultiButtons");

                    b.Navigation("Recipients");

                    b.Navigation("SendLogs");

                    b.Navigation("VariableMaps");
                });

            modelBuilder.Entity("xbytechat.api.Features.CampaignModule.Models.CampaignRecipient", b =>
                {
                    b.Navigation("SendLogs");
                });

            modelBuilder.Entity("xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity", b =>
                {
                    b.Navigation("WhatsAppBusinessNumbers");
                });
#pragma warning restore 612, 618
        }
    }
}
