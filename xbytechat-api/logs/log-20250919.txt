2025-09-19 08:59:46.368 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 08:59:46.412 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 08:59:46.430 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 08:59:47.478 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 08:59:48.045 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 08:59:48.063 +05:30 [INF] ClickLogWorker started
2025-09-19 08:59:48.350 +05:30 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-19 08:59:48.354 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 08:59:48.357 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 08:59:48.358 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 08:59:48.359 +05:30 [INF] Hosting environment: Development
2025-09-19 08:59:48.361 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 08:59:48.378 +05:30 [INF] Executed DbCommand (73ms) [Parameters=[@__cutoff_0='2025-09-12T03:29:46.5783060Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-19 08:59:49.105 +05:30 [INF] ClickLogWorker stopped
2025-09-19 08:59:50.578 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 08:59:50.786 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 214.726ms
2025-09-19 08:59:50.896 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 08:59:50.896 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 08:59:50.906 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 9.3611ms
2025-09-19 08:59:50.948 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 51.4676ms
2025-09-19 08:59:51.044 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 08:59:51.335 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 290.4846ms
2025-09-19 09:01:07.396 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-19 09:01:07.401 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 09:01:07.440 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:01:07.443 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 47.9532ms
2025-09-19 09:01:07.449 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 49
2025-09-19 09:01:07.457 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:01:07.500 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 09:01:07.518 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-19 09:01:07.585 +05:30 [INF] 🔑 Login attempt for email: tesla@gmail.com
2025-09-19 09:01:07.667 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@__dto_Email_0='tesla@gmail.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-19 09:01:07.758 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__user_BusinessId_Value_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-19 09:01:07.876 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='24c1a1d5-9f49-4555-8663-497a30b5ea8c'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-19 09:01:07.883 +05:30 [INF] ✅ Token generated for: tesla@gmail.com
2025-09-19 09:01:07.927 +05:30 [INF] 🔎 JWT includes plan_id: 5f9f5de1-a0b2-48ba-b03d-77b27345613f
2025-09-19 09:01:07.929 +05:30 [INF] ✅ Login successful for tesla@gmail.com, Role: business, PlanId: "5f9f5de1-a0b2-48ba-b03d-77b27345613f"
2025-09-19 09:01:07.935 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 09:01:07.943 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 421.1229ms
2025-09-19 09:01:07.945 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 09:01:07.949 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 499.5146ms
2025-09-19 09:01:07.952 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 09:01:07.955 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:01:07.956 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.6488ms
2025-09-19 09:01:07.966 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 09:01:07.969 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:01:07.996 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 09:01:08.001 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 09:01:08.014 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-19 09:01:08.041 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 09:01:08.044 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 09:01:08.055 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 51.5566ms
2025-09-19 09:01:08.056 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 09:01:08.057 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 90.8052ms
2025-09-19 09:01:08.070 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 09:01:08.073 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:01:08.074 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.1766ms
2025-09-19 09:01:08.082 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 09:01:08.085 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:01:08.090 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 09:01:08.091 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 09:01:08.226 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 09:01:08.229 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 09:01:08.231 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 138.1108ms
2025-09-19 09:01:08.232 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 09:01:08.233 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 151.0401ms
2025-09-19 09:01:08.551 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 09:01:08.554 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:01:08.557 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 09:01:08.559 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 09:01:08.565 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 09:01:08.568 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 09:01:08.570 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.6254ms
2025-09-19 09:01:08.571 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 09:01:08.572 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.7835ms
2025-09-19 09:01:10.793 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 09:01:10.794 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 09:01:10.797 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:01:10.799 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 6.1403ms
2025-09-19 09:01:10.800 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:01:10.804 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 09:01:10.804 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 204 null null 9.8346ms
2025-09-19 09:01:10.807 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:01:10.810 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 09:01:10.811 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 09:01:10.812 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:01:10.814 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 09:01:10.816 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 09:01:10.817 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 09:01:14.820 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='PINNACLE'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 09:01:14.821 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-19 09:01:14.822 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 09:01:14.824 +05:30 [INF] Executing NotFoundObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 09:01:14.830 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 4010.1463ms
2025-09-19 09:01:14.830 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 4011.8222ms
2025-09-19 09:01:14.831 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 09:01:14.832 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 09:01:14.833 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 200 null application/json; charset=utf-8 4023.4861ms
2025-09-19 09:01:14.834 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 404 null application/json; charset=utf-8 4030.3431ms
2025-09-19 09:01:19.114 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 09:01:19.117 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:01:19.118 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 3.4966ms
2025-09-19 09:01:19.120 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 09:01:19.122 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:01:19.123 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 09:01:19.124 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 09:01:19.128 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 09:01:19.132 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 09:01:19.133 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 7.7031ms
2025-09-19 09:01:19.134 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 09:01:19.135 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 14.6543ms
2025-09-19 09:02:57.480 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-19 09:02:57.483 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:02:57.484 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 4.1412ms
2025-09-19 09:02:57.487 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 47
2025-09-19 09:02:57.490 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:02:57.491 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 09:02:57.492 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-19 09:02:57.496 +05:30 [INF] 🔑 Login attempt for email: tcs@gmail.com
2025-09-19 09:02:57.499 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='tcs@gmail.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-19 09:02:57.505 +05:30 [WRN] ❌ Login failed: Invalid email or password for tcs@gmail.com
2025-09-19 09:02:57.507 +05:30 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType0`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 09:02:57.510 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 16.7147ms
2025-09-19 09:02:57.511 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 09:02:57.512 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 401 null application/json; charset=utf-8 24.82ms
2025-09-19 09:04:58.182 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-19 09:04:58.184 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:04:58.185 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.5994ms
2025-09-19 09:04:58.189 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 49
2025-09-19 09:04:58.192 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:04:58.192 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 09:04:58.193 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-19 09:04:58.201 +05:30 [INF] 🔑 Login attempt for email: tesla@gmail.com
2025-09-19 09:04:58.253 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='tesla@gmail.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-19 09:04:58.257 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-19 09:04:58.262 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='24c1a1d5-9f49-4555-8663-497a30b5ea8c'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-19 09:04:58.264 +05:30 [INF] ✅ Token generated for: tesla@gmail.com
2025-09-19 09:04:58.265 +05:30 [INF] 🔎 JWT includes plan_id: 5f9f5de1-a0b2-48ba-b03d-77b27345613f
2025-09-19 09:04:58.265 +05:30 [INF] ✅ Login successful for tesla@gmail.com, Role: business, PlanId: "5f9f5de1-a0b2-48ba-b03d-77b27345613f"
2025-09-19 09:04:58.267 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 09:04:58.268 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 72.7925ms
2025-09-19 09:04:58.269 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 09:04:58.270 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 80.5912ms
2025-09-19 09:04:58.273 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 09:04:58.275 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:04:58.275 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.6571ms
2025-09-19 09:04:58.278 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 09:04:58.280 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:04:58.281 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 09:04:58.281 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 09:04:58.285 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 09:04:58.288 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 09:04:58.289 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.6342ms
2025-09-19 09:04:58.290 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 09:04:58.291 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.4424ms
2025-09-19 09:04:58.305 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 09:04:58.307 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:04:58.308 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.3449ms
2025-09-19 09:04:58.324 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 09:04:58.326 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:04:58.328 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 09:04:58.329 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 09:04:58.334 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 09:04:58.338 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 09:04:58.339 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.6479ms
2025-09-19 09:04:58.341 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 09:04:58.342 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.3531ms
2025-09-19 09:04:58.409 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 09:04:58.412 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:04:58.413 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 09:04:58.414 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 09:04:58.418 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 09:04:58.422 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 09:04:58.423 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.1145ms
2025-09-19 09:04:58.424 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 09:04:58.425 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.7655ms
2025-09-19 09:05:00.529 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 09:05:00.532 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:05:00.533 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 3.8995ms
2025-09-19 09:05:00.537 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 09:05:00.538 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 09:05:00.540 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:05:00.542 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:05:00.543 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 204 null null 6.1355ms
2025-09-19 09:05:00.544 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 09:05:00.546 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 09:05:00.547 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 09:05:00.549 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:05:00.552 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 09:05:07.305 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 09:05:14.268 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-19 09:05:52.747 +05:30 [ERR] An error occurred using the connection to database 'xplorebyte_new' on server 'tcp://localhost:5432'.
2025-09-19 09:05:52.784 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-19 09:06:59.478 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-19 09:06:59.499 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): The operation has timed out
 ---> System.TimeoutException: The operation has timed out.
   at Npgsql.ThrowHelper.ThrowNpgsqlExceptionWithInnerTimeoutException(String message)
   at Npgsql.Util.NpgsqlTimeout.Check()
   at Npgsql.Util.NpgsqlTimeout.CheckAndGetTimeLeft()
   at Npgsql.Util.NpgsqlTimeout.CheckAndApply(NpgsqlConnector connector)
   at Npgsql.Internal.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): The operation has timed out
 ---> System.TimeoutException: The operation has timed out.
   at Npgsql.ThrowHelper.ThrowNpgsqlExceptionWithInnerTimeoutException(String message)
   at Npgsql.Util.NpgsqlTimeout.Check()
   at Npgsql.Util.NpgsqlTimeout.CheckAndGetTimeLeft()
   at Npgsql.Util.NpgsqlTimeout.CheckAndApply(NpgsqlConnector connector)
   at Npgsql.Internal.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 09:06:59.569 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 105303.6469ms
2025-09-19 09:06:59.571 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 09:07:09.762 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-09-19 09:07:09.772 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 129221.5201ms
2025-09-19 09:06:59.659 +05:30 [ERR] ❌ An unhandled exception occurred
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): The operation has timed out
 ---> System.TimeoutException: The operation has timed out.
   at Npgsql.ThrowHelper.ThrowNpgsqlExceptionWithInnerTimeoutException(String message)
   at Npgsql.Util.NpgsqlTimeout.Check()
   at Npgsql.Util.NpgsqlTimeout.CheckAndGetTimeLeft()
   at Npgsql.Util.NpgsqlTimeout.CheckAndApply(NpgsqlConnector connector)
   at Npgsql.Internal.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at xbytechat.api.Features.WhatsAppSettings.Services.WhatsAppPhoneNumberService.ListAsync(Guid businessId, String provider, CancellationToken ct) in D:\xbytechat\xbytechat-api\xbytechat-api\WhatsAppSettings\Services\WhatsAppPhoneNumberService.cs:line 43
   at xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List(String provider) in D:\xbytechat\xbytechat-api\xbytechat-api\WhatsAppSettings\Controllers\WhatsAppNumbersController.cs:line 59
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_14>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 450
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-09-19 09:07:09.773 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 09:07:09.781 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 129243.1447ms
2025-09-19 09:07:09.787 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 500 null application/json; charset=utf-8 129240.7845ms
2025-09-19 09:07:09.787 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 09:07:09.791 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:07:09.792 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 4.8168ms
2025-09-19 09:07:09.794 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 09:07:09.796 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:07:09.797 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 09:07:09.798 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 09:07:09.803 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 09:07:09.805 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 09:07:09.806 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 6.487ms
2025-09-19 09:07:09.807 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 09:07:09.808 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 13.5217ms
2025-09-19 09:07:09.894 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 09:07:09.896 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:07:09.898 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 09:07:09.899 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 09:07:09.902 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 09:07:09.905 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 09:07:09.906 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 5.8862ms
2025-09-19 09:07:09.907 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 09:07:09.908 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 13.6494ms
2025-09-19 09:07:32.568 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-09-19 09:07:32.571 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:07:32.571 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 3.3706ms
2025-09-19 09:07:32.574 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 571
2025-09-19 09:07:32.577 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:07:32.578 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 09:07:32.582 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 09:07:32.598 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__dto_Provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0 AND w."Provider" = @__dto_Provider_1
LIMIT 1
2025-09-19 09:07:32.658 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='c13c2c23-4ed0-4441-b5b2-6b2b581bdca3', @p0='EAAUbmP4285YBPZAqYJuGlXI40i7MKN202DwogzCcklPXMzYDJbveEn061iSWKtbYytBGf9ZAIQu8NF4NorULDsqnoSeIBGlv2HPzxZCSUWnlSLdJhQPkZAkV3cpPZB4UnkKtoeeZCZCM5UNsWVl7axLKkYNq9anhDZCUP8Ivc8Kg2adzHK6GLsQrRgctKOQNzFjoMIdHW58ooOdgISD4bguDslT7rowdz7QOg1O8BRNJfDQtgJ860nDsjjwpsyllywZDZD' (Nullable = false), @p1='2025-09-19T03:37:32.6023306Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "ApiKey" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-09-19 09:07:32.668 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 09:07:32.669 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 85.306ms
2025-09-19 09:07:32.670 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 09:07:32.671 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 96.7162ms
2025-09-19 09:07:38.353 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - null null
2025-09-19 09:07:38.353 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 09:07:38.356 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:07:38.358 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:07:38.358 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - 204 null null 5.0576ms
2025-09-19 09:07:38.359 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 5.506ms
2025-09-19 09:07:38.363 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 09:07:38.364 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/ - null null
2025-09-19 09:07:38.367 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:07:38.368 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:07:38.369 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 09:07:38.373 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 09:07:38.373 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 09:07:38.376 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-19 09:07:38.380 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=25
2025-09-19 09:07:38.395 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-19 09:07:38.400 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType89`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 09:07:38.409 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 31.1803ms
2025-09-19 09:07:38.410 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 09:07:38.410 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 09:07:38.414 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 51.1044ms
2025-09-19 09:07:38.444 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 09:07:38.475 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 09:07:38.483 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 107.2756ms
2025-09-19 09:07:38.484 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 09:07:38.485 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/ - 200 null application/json; charset=utf-8 120.2987ms
2025-09-19 09:07:45.698 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 09:07:45.701 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:07:45.702 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 4.1811ms
2025-09-19 09:07:45.705 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 79
2025-09-19 09:07:45.708 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:07:45.710 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 09:07:45.712 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 09:08:10.290 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_dto_RecipientNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-19 09:08:16.465 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@p1='75df7429-287c-406a-83d8-0dfa045b0093', @p0='2025-09-19T03:38:13.3270465Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Contacts" SET "LastContactedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 09:08:25.785 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-19 09:09:16.156 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 09:09:16.158 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 09:09:18.175 +05:30 [INF] Received HTTP response headers after 2014.3139ms - 200
2025-09-19 09:09:18.177 +05:30 [INF] End processing HTTP request after 2021.6377ms - 200
2025-09-19 09:09:40.662 +05:30 [INF] Executed DbCommand (24ms) [Parameters=[@p0='e669b383-af1d-4c9d-9ed4-7a78b6b407a6', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T03:39:36.0470153Z' (DbType = DateTime), @p8=NULL, @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='Hello' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRENENzU0RDNCQUU2NkE5ODk5AA==', @p14='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRENENzU0RDNCQUU2NkE5ODk5AA=="}]}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17='Hello', @p18=NULL (DbType = Guid), @p19='2025-09-19T03:39:36.0538066Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
2025-09-19 09:09:40.672 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 09:09:40.675 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 114960.9057ms
2025-09-19 09:09:40.676 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 09:09:40.677 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 200 null application/json; charset=utf-8 114971.7102ms
2025-09-19 09:09:47.478 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 09:09:47.481 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:09:47.482 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.3321ms
2025-09-19 09:09:47.484 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 09:09:47.486 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:09:47.487 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 09:09:47.488 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 09:09:47.492 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 09:09:47.495 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 09:09:47.496 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.6054ms
2025-09-19 09:09:47.498 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 09:09:47.499 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.2461ms
2025-09-19 09:09:47.548 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 09:09:47.552 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:09:47.553 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.4013ms
2025-09-19 09:09:47.557 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 09:09:47.560 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:09:47.562 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 09:09:47.563 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 09:09:47.568 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 09:09:47.573 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 09:09:47.576 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.5666ms
2025-09-19 09:09:47.578 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 09:09:47.579 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.179ms
2025-09-19 09:09:47.605 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 09:09:47.605 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - null null
2025-09-19 09:09:47.607 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 09:09:47.616 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:09:47.618 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:09:47.620 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:09:47.622 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 09:09:47.622 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - 204 null null 16.8698ms
2025-09-19 09:09:47.623 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 15.9285ms
2025-09-19 09:09:47.625 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 09:09:47.628 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 09:09:47.630 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/ - null null
2025-09-19 09:09:47.634 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 09:09:47.637 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:09:47.641 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:09:47.643 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 09:09:47.644 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 09:09:47.645 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 09:09:47.646 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.3458ms
2025-09-19 09:09:47.647 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-19 09:09:47.648 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 09:09:47.650 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 09:09:47.657 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-19 09:09:47.657 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 52.0745ms
2025-09-19 09:09:47.659 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=25
2025-09-19 09:09:47.661 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType89`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 09:09:47.668 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 09:09:47.669 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 17.0577ms
2025-09-19 09:09:47.675 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 09:09:47.675 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 09:09:47.677 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 48.9662ms
2025-09-19 09:09:47.679 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 09:09:47.683 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 28.7872ms
2025-09-19 09:09:47.684 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 09:09:47.685 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/ - 200 null application/json; charset=utf-8 55.2439ms
2025-09-19 09:10:13.354 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 09:10:13.357 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:10:13.358 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 3.3327ms
2025-09-19 09:10:13.360 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 80
2025-09-19 09:10:13.362 +05:30 [INF] CORS policy execution successful.
2025-09-19 09:10:13.364 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 09:10:13.365 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 09:10:15.290 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_dto_RecipientNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-19 09:10:15.296 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='75df7429-287c-406a-83d8-0dfa045b0093', @p0='2025-09-19T03:40:15.2944539Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Contacts" SET "LastContactedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 09:10:15.926 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-19 09:10:15.928 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 09:10:15.929 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 09:10:16.858 +05:30 [INF] Received HTTP response headers after 927.2019ms - 200
2025-09-19 09:10:16.859 +05:30 [INF] End processing HTTP request after 930.551ms - 200
2025-09-19 09:10:16.877 +05:30 [INF] Executed DbCommand (15ms) [Parameters=[@p0='26c84fed-5fcd-4c86-b0e2-c4df46e19210', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T03:40:16.8606744Z' (DbType = DateTime), @p8=NULL, @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='fsrrew' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTlDQkJEOEI0MzQ0QjE4NTFDAA==', @p14='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTlDQkJEOEI0MzQ0QjE4NTFDAA=="}]}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17='fsrrew', @p18=NULL (DbType = Guid), @p19='2025-09-19T03:40:16.8606745Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
2025-09-19 09:10:16.879 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 09:10:16.880 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 3514.0609ms
2025-09-19 09:10:16.881 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 09:10:16.883 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 200 null application/json; charset=utf-8 3522.4074ms
2025-09-19 10:07:29.184 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 10:07:29.221 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 10:07:29.235 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 10:07:29.927 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 10:07:30.867 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 10:07:30.885 +05:30 [INF] ClickLogWorker started
2025-09-19 10:07:31.038 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 10:07:31.039 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 10:07:31.040 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 10:07:31.041 +05:30 [INF] Hosting environment: Development
2025-09-19 10:07:31.042 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 10:07:31.060 +05:30 [INF] Executed DbCommand (69ms) [Parameters=[@__cutoff_0='2025-09-12T04:37:29.3164586Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-19 10:07:31.061 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-19 10:07:31.933 +05:30 [INF] ClickLogWorker stopped
2025-09-19 10:07:33.367 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 10:07:33.496 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 133.6914ms
2025-09-19 10:07:33.559 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 10:07:33.564 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 4.9836ms
2025-09-19 10:07:33.614 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 10:07:33.647 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.6536ms
2025-09-19 10:07:33.760 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 10:07:33.943 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 182.4751ms
2025-09-19 10:08:59.400 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 10:08:59.404 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 10:08:59.440 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:08:59.443 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 43.2331ms
2025-09-19 10:08:59.449 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 88
2025-09-19 10:08:59.458 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:08:59.546 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19-09-2025 04:34:58 AM', Current time (UTC): '19-09-2025 04:38:59 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-19 10:08:59.572 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19-09-2025 04:34:58 AM', Current time (UTC): '19-09-2025 04:38:59 AM'.
2025-09-19 10:08:59.577 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-19 10:08:59.580 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-19 10:08:59.581 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 401 0 null 131.8422ms
2025-09-19 10:09:07.966 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-19 10:09:07.969 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:09:07.970 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 4.8423ms
2025-09-19 10:09:07.973 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 49
2025-09-19 10:09:07.977 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:09:07.981 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 10:09:07.993 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-19 10:09:08.051 +05:30 [INF] 🔑 Login attempt for email: tesla@gmail.com
2025-09-19 10:09:08.116 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_Email_0='tesla@gmail.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-19 10:09:08.200 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__user_BusinessId_Value_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-19 10:09:08.291 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='24c1a1d5-9f49-4555-8663-497a30b5ea8c'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-19 10:09:08.298 +05:30 [INF] ✅ Token generated for: tesla@gmail.com
2025-09-19 10:09:08.306 +05:30 [INF] 🔎 JWT includes plan_id: 5f9f5de1-a0b2-48ba-b03d-77b27345613f
2025-09-19 10:09:08.308 +05:30 [INF] ✅ Login successful for tesla@gmail.com, Role: business, PlanId: "5f9f5de1-a0b2-48ba-b03d-77b27345613f"
2025-09-19 10:09:08.314 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:09:08.321 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 323.9213ms
2025-09-19 10:09:08.322 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 10:09:08.327 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 353.6115ms
2025-09-19 10:09:08.330 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:09:08.333 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:09:08.333 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.9476ms
2025-09-19 10:09:08.336 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:09:08.339 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:09:08.349 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:09:08.353 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 10:09:08.366 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-19 10:09:08.390 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 10:09:08.394 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:09:08.403 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 47.8863ms
2025-09-19 10:09:08.404 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:09:08.405 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 69.0171ms
2025-09-19 10:09:08.420 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:09:08.422 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:09:08.423 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.6976ms
2025-09-19 10:09:08.428 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:09:08.430 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:09:08.433 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:09:08.435 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 10:09:08.443 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 10:09:08.446 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:09:08.448 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.3036ms
2025-09-19 10:09:08.449 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:09:08.450 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.7729ms
2025-09-19 10:09:08.489 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:09:08.492 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:09:08.493 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:09:08.494 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 10:09:08.502 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 10:09:08.506 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:09:08.507 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.4979ms
2025-09-19 10:09:08.509 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:09:08.510 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.6506ms
2025-09-19 10:09:13.250 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - null null
2025-09-19 10:09:13.253 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:09:13.254 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - 204 null null 4.4288ms
2025-09-19 10:09:13.255 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 10:09:13.258 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/ - null null
2025-09-19 10:09:13.260 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:09:13.262 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:09:13.262 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 7.117ms
2025-09-19 10:09:13.263 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 10:09:13.265 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 10:09:13.269 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:09:13.270 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 10:09:13.273 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 10:09:13.276 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=25
2025-09-19 10:09:13.277 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-19 10:09:13.294 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-19 10:09:13.298 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType89`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:09:13.300 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 10:09:13.315 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 35.9662ms
2025-09-19 10:09:13.317 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 10:09:13.318 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 52.3725ms
2025-09-19 10:09:13.335 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 10:09:13.368 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 10:09:13.377 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 106.0444ms
2025-09-19 10:09:13.379 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 10:09:13.380 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/ - 200 null application/json; charset=utf-8 122.159ms
2025-09-19 10:09:17.388 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 10:09:17.391 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:09:17.392 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 4.1325ms
2025-09-19 10:09:17.395 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 82
2025-09-19 10:09:17.398 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:09:17.399 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:09:17.402 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 10:09:20.081 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 10:09:20.082 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 2672.6671ms
2025-09-19 10:09:20.084 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:09:20.085 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/json; charset=utf-8 2689.5607ms
2025-09-19 10:09:37.391 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 10:09:37.393 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:09:37.394 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 2.9948ms
2025-09-19 10:09:37.397 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 82
2025-09-19 10:09:37.399 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:09:37.399 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:09:37.400 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 10:16:58.512 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 10:16:58.551 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 10:16:58.565 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 10:16:59.229 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 10:16:59.703 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 10:16:59.721 +05:30 [INF] ClickLogWorker started
2025-09-19 10:16:59.873 +05:30 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-19 10:16:59.876 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 10:16:59.877 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 10:16:59.878 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 10:16:59.879 +05:30 [INF] Hosting environment: Development
2025-09-19 10:16:59.880 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 10:16:59.889 +05:30 [INF] Executed DbCommand (52ms) [Parameters=[@__cutoff_0='2025-09-12T04:46:58.6483501Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-19 10:17:00.767 +05:30 [INF] ClickLogWorker stopped
2025-09-19 10:17:01.966 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 10:17:02.109 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 150.5481ms
2025-09-19 10:17:02.127 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 10:17:02.135 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.4937ms
2025-09-19 10:17:02.197 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 10:17:02.239 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 41.4432ms
2025-09-19 10:17:02.425 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 10:17:02.626 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 200.2597ms
2025-09-19 10:17:12.117 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-19 10:17:12.122 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 10:17:12.153 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:17:12.156 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 39.2324ms
2025-09-19 10:17:12.160 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 49
2025-09-19 10:17:12.168 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:17:12.260 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 10:17:12.273 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-19 10:17:12.330 +05:30 [INF] 🔑 Login attempt for email: tesla@gmail.com
2025-09-19 10:17:12.391 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_Email_0='tesla@gmail.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-19 10:17:12.480 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__user_BusinessId_Value_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-19 10:17:12.578 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='24c1a1d5-9f49-4555-8663-497a30b5ea8c'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-19 10:17:12.585 +05:30 [INF] ✅ Token generated for: tesla@gmail.com
2025-09-19 10:17:12.593 +05:30 [INF] 🔎 JWT includes plan_id: 5f9f5de1-a0b2-48ba-b03d-77b27345613f
2025-09-19 10:17:12.595 +05:30 [INF] ✅ Login successful for tesla@gmail.com, Role: business, PlanId: "5f9f5de1-a0b2-48ba-b03d-77b27345613f"
2025-09-19 10:17:12.601 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:17:12.610 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 332.6375ms
2025-09-19 10:17:12.612 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 10:17:12.617 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 457.1191ms
2025-09-19 10:17:12.620 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:17:12.624 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:17:12.625 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.7886ms
2025-09-19 10:17:12.628 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:17:12.631 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:17:12.636 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:17:12.641 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 10:17:12.652 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-19 10:17:12.677 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 10:17:12.681 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:17:12.690 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 47.1782ms
2025-09-19 10:17:12.691 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:17:12.692 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 64.3871ms
2025-09-19 10:17:12.706 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:17:12.709 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:17:12.710 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.4168ms
2025-09-19 10:17:12.719 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:17:12.723 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:17:12.729 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:17:12.731 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 10:17:12.740 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 10:17:12.745 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:17:12.746 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.5459ms
2025-09-19 10:17:12.748 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:17:12.749 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 30.4364ms
2025-09-19 10:17:12.791 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:17:12.798 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:17:12.801 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:17:12.803 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 10:17:12.815 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 10:17:12.820 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:17:12.822 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.7625ms
2025-09-19 10:17:12.825 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:17:12.826 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 35.1361ms
2025-09-19 10:17:14.817 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 10:17:14.818 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 10:17:14.821 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:17:14.823 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 6.2321ms
2025-09-19 10:17:14.823 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:17:14.827 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 204 null null 8.6987ms
2025-09-19 10:17:14.830 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 10:17:14.830 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 10:17:14.832 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:17:14.834 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:17:14.835 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 10:17:14.836 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 10:17:14.840 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 10:17:14.840 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 10:17:18.062 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-19 10:17:18.063 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='PINNACLE'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 10:17:18.069 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 10:17:18.076 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 3233.2391ms
2025-09-19 10:17:18.078 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 10:17:18.079 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 200 null application/json; charset=utf-8 3249.2147ms
2025-09-19 10:17:18.094 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-09-19 10:17:18.099 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 3257.6551ms
2025-09-19 10:17:18.101 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 10:17:18.102 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 3272.4962ms
2025-09-19 10:17:18.106 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 10:17:18.109 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:17:18.109 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 3.0581ms
2025-09-19 10:17:18.112 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 10:17:18.114 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:17:18.115 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 10:17:18.117 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 10:17:18.123 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 10:17:18.126 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 10:17:18.127 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 9.2962ms
2025-09-19 10:17:18.129 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 10:17:18.130 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 17.4775ms
2025-09-19 10:17:18.156 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 10:17:18.158 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:17:18.159 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 10:17:18.160 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 10:17:18.166 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 10:17:18.169 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 10:17:18.171 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 9.4902ms
2025-09-19 10:17:18.172 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 10:17:18.173 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 17.2157ms
2025-09-19 10:17:22.271 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-09-19 10:17:22.273 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:17:22.274 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 3.4053ms
2025-09-19 10:17:22.277 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 534
2025-09-19 10:17:22.279 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:17:22.280 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-09-19 10:17:22.284 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 10:17:22.293 +05:30 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:17:22.295 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 9.208ms
2025-09-19 10:17:22.296 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-09-19 10:17:22.296 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 400 null application/json; charset=utf-8 19.315ms
2025-09-19 10:17:25.471 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - null null
2025-09-19 10:17:25.471 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 10:17:25.474 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:17:25.476 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:17:25.477 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - 204 null null 5.9305ms
2025-09-19 10:17:25.478 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 6.3213ms
2025-09-19 10:17:25.481 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 10:17:25.483 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/ - null null
2025-09-19 10:17:25.486 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:17:25.487 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:17:25.489 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 10:17:25.491 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 10:17:25.493 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 10:17:25.494 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-19 10:17:25.498 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=25
2025-09-19 10:17:25.509 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-19 10:17:25.512 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType89`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:17:25.522 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 10:17:25.522 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 26.5058ms
2025-09-19 10:17:25.525 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 10:17:25.527 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 46.6949ms
2025-09-19 10:17:25.556 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 10:17:25.590 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 10:17:25.599 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 105.4442ms
2025-09-19 10:17:25.601 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 10:17:25.602 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/ - 200 null application/json; charset=utf-8 118.4272ms
2025-09-19 10:17:29.275 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 10:17:29.278 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:17:29.279 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 4.111ms
2025-09-19 10:17:29.283 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 81
2025-09-19 10:17:29.286 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:17:29.287 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:17:29.290 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 10:17:50.417 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 10:17:50.419 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 21127.2029ms
2025-09-19 10:17:50.420 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:17:50.421 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/json; charset=utf-8 21137.9967ms
2025-09-19 10:18:12.338 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 10:18:12.404 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 10:18:12.426 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 10:18:13.482 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 10:18:13.928 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 10:18:13.944 +05:30 [INF] ClickLogWorker started
2025-09-19 10:18:14.092 +05:30 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-19 10:18:14.093 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 10:18:14.097 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 10:18:14.098 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 10:18:14.099 +05:30 [INF] Hosting environment: Development
2025-09-19 10:18:14.100 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 10:18:14.110 +05:30 [INF] Executed DbCommand (48ms) [Parameters=[@__cutoff_0='2025-09-12T04:48:12.6418608Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-19 10:18:14.987 +05:30 [INF] ClickLogWorker stopped
2025-09-19 10:18:16.206 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 10:18:16.374 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 176.6601ms
2025-09-19 10:18:16.402 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 10:18:16.410 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.1799ms
2025-09-19 10:18:16.466 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 10:18:16.499 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.2289ms
2025-09-19 10:18:16.621 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 10:18:16.827 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 205.9267ms
2025-09-19 10:18:28.601 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-19 10:18:28.605 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 10:18:28.638 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:18:28.642 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 40.8242ms
2025-09-19 10:18:28.645 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 49
2025-09-19 10:18:28.653 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:18:28.739 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 10:18:28.754 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-19 10:18:28.810 +05:30 [INF] 🔑 Login attempt for email: tesla@gmail.com
2025-09-19 10:18:28.864 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_Email_0='tesla@gmail.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-19 10:18:28.941 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__user_BusinessId_Value_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-19 10:18:29.035 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='24c1a1d5-9f49-4555-8663-497a30b5ea8c'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-19 10:18:29.043 +05:30 [INF] ✅ Token generated for: tesla@gmail.com
2025-09-19 10:18:29.051 +05:30 [INF] 🔎 JWT includes plan_id: 5f9f5de1-a0b2-48ba-b03d-77b27345613f
2025-09-19 10:18:29.052 +05:30 [INF] ✅ Login successful for tesla@gmail.com, Role: business, PlanId: "5f9f5de1-a0b2-48ba-b03d-77b27345613f"
2025-09-19 10:18:29.059 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:18:29.065 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 307.573ms
2025-09-19 10:18:29.067 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 10:18:29.071 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 426.3417ms
2025-09-19 10:18:29.074 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:18:29.078 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:18:29.079 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.1138ms
2025-09-19 10:18:29.081 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:18:29.084 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:18:29.090 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:18:29.093 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 10:18:29.105 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-19 10:18:29.129 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 10:18:29.133 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:18:29.141 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 45.9911ms
2025-09-19 10:18:29.142 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:18:29.143 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 61.855ms
2025-09-19 10:18:29.155 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:18:29.158 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:18:29.160 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.0444ms
2025-09-19 10:18:29.167 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:18:29.170 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:18:29.175 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:18:29.176 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 10:18:29.186 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 10:18:29.190 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:18:29.191 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.1877ms
2025-09-19 10:18:29.193 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:18:29.194 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.4559ms
2025-09-19 10:18:29.224 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:18:29.226 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:18:29.228 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:18:29.230 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 10:18:29.236 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 10:18:29.239 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:18:29.241 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.4431ms
2025-09-19 10:18:29.242 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:18:29.243 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.7504ms
2025-09-19 10:18:31.570 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 10:18:31.572 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 10:18:31.575 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:18:31.577 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 7.324ms
2025-09-19 10:18:31.578 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:18:31.581 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 204 null null 9.8349ms
2025-09-19 10:18:31.581 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 10:18:31.584 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 10:18:31.586 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:18:31.588 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:18:31.590 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 10:18:31.590 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 10:18:31.594 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 10:18:31.595 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 10:18:31.609 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='PINNACLE'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 10:18:31.610 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-19 10:18:31.615 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 10:18:31.622 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 23.9192ms
2025-09-19 10:18:31.623 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 10:18:31.624 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 200 null application/json; charset=utf-8 39.8039ms
2025-09-19 10:18:31.641 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-09-19 10:18:31.648 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 52.1168ms
2025-09-19 10:18:31.650 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 10:18:31.652 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 70.3147ms
2025-09-19 10:18:31.654 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 10:18:31.656 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:18:31.657 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 2.6792ms
2025-09-19 10:18:31.660 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 10:18:31.662 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:18:31.663 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 10:18:31.664 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 10:18:31.669 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 10:18:31.672 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 10:18:31.673 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 7.747ms
2025-09-19 10:18:31.674 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 10:18:31.674 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 10:18:31.677 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:18:31.678 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 17.7465ms
2025-09-19 10:18:31.678 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 10:18:31.681 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 10:18:31.688 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 10:18:31.690 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 10:18:31.692 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 8.6945ms
2025-09-19 10:18:31.693 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 10:18:31.694 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 19.9168ms
2025-09-19 10:18:35.467 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - null null
2025-09-19 10:18:35.469 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:18:35.471 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - 204 null null 3.8491ms
2025-09-19 10:18:35.471 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 10:18:35.475 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/ - null null
2025-09-19 10:18:35.477 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:18:35.479 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:18:35.479 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 7.9079ms
2025-09-19 10:18:35.480 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 10:18:35.483 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 10:18:35.486 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:18:35.487 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 10:18:35.491 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 10:18:35.492 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=25
2025-09-19 10:18:35.495 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-19 10:18:35.509 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-19 10:18:35.513 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType89`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:18:35.515 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 10:18:35.523 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 26.6659ms
2025-09-19 10:18:35.525 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 10:18:35.526 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 43.5895ms
2025-09-19 10:18:35.548 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 10:18:35.579 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 10:18:35.588 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 98.9428ms
2025-09-19 10:18:35.589 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 10:18:35.590 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/ - 200 null application/json; charset=utf-8 114.619ms
2025-09-19 10:18:38.488 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 10:18:38.491 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:18:38.492 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 4.1212ms
2025-09-19 10:18:38.495 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 84
2025-09-19 10:18:38.499 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:18:38.500 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:18:38.503 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 10:18:40.181 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 10:18:40.183 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 1678.4643ms
2025-09-19 10:18:40.185 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:18:40.186 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/json; charset=utf-8 1690.4322ms
2025-09-19 10:27:49.969 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 10:27:50.003 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 10:27:50.015 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 10:27:50.722 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 10:27:51.209 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 10:27:51.224 +05:30 [INF] ClickLogWorker started
2025-09-19 10:27:51.394 +05:30 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-19 10:27:51.396 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 10:27:51.399 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 10:27:51.401 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 10:27:51.402 +05:30 [INF] Hosting environment: Development
2025-09-19 10:27:51.403 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 10:27:51.418 +05:30 [INF] Executed DbCommand (57ms) [Parameters=[@__cutoff_0='2025-09-12T04:57:50.1082847Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-19 10:27:52.270 +05:30 [INF] ClickLogWorker stopped
2025-09-19 10:27:53.497 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 10:27:53.645 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 158.1998ms
2025-09-19 10:27:53.668 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 10:27:53.675 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.9027ms
2025-09-19 10:27:53.734 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 10:27:53.763 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 29.1403ms
2025-09-19 10:27:53.937 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 10:27:54.124 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 186.9632ms
2025-09-19 10:28:30.528 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 10:28:30.532 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 10:28:30.562 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:28:30.564 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 36.2881ms
2025-09-19 10:28:30.571 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 84
2025-09-19 10:28:30.577 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:28:30.662 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:28:30.675 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 10:28:30.711 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 10:28:30.719 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 40.365ms
2025-09-19 10:28:30.720 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:28:30.722 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/json; charset=utf-8 151.0532ms
2025-09-19 10:28:36.691 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:28:36.695 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:28:36.695 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.0204ms
2025-09-19 10:28:36.698 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:28:36.700 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:28:36.703 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:28:36.707 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 10:28:36.801 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-19 10:28:36.852 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 10:28:36.856 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:28:36.862 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 153.813ms
2025-09-19 10:28:36.864 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:28:36.867 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 169.6899ms
2025-09-19 10:28:36.871 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:28:36.873 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:28:36.874 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.9331ms
2025-09-19 10:28:36.877 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:28:36.879 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:28:36.882 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:28:36.883 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 10:28:36.889 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 10:28:36.892 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:28:36.894 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.5073ms
2025-09-19 10:28:36.895 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:28:36.896 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.3857ms
2025-09-19 10:28:36.930 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - null null
2025-09-19 10:28:36.931 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 10:28:36.931 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:28:36.933 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:28:36.935 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:28:36.937 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:28:36.937 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - 204 null null 7.6776ms
2025-09-19 10:28:36.938 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 7.1464ms
2025-09-19 10:28:36.939 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:28:36.941 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 10:28:36.944 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/ - null null
2025-09-19 10:28:36.945 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 10:28:36.947 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:28:36.948 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:28:36.951 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 10:28:36.954 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 10:28:36.956 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 10:28:36.958 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:28:36.959 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 10:28:36.961 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.1612ms
2025-09-19 10:28:36.962 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-19 10:28:36.964 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:28:36.966 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 34.8663ms
2025-09-19 10:28:36.967 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=25
2025-09-19 10:28:36.983 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-19 10:28:36.988 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType89`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:28:37.003 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 37.7771ms
2025-09-19 10:28:37.005 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 10:28:37.006 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 65.0681ms
2025-09-19 10:28:37.012 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 10:28:37.063 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 10:28:37.106 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 10:28:37.114 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 151.612ms
2025-09-19 10:28:37.115 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 10:28:37.116 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/ - 200 null application/json; charset=utf-8 172.4773ms
2025-09-19 10:28:41.317 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 10:28:41.319 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:28:41.320 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 3.5435ms
2025-09-19 10:28:41.322 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 82
2025-09-19 10:28:41.324 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:28:41.326 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:28:41.326 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 10:28:41.331 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 10:28:41.332 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 3.9516ms
2025-09-19 10:28:41.333 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:28:41.333 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/json; charset=utf-8 11.0248ms
2025-09-19 10:28:48.206 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 10:28:48.208 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:28:48.209 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 3.1685ms
2025-09-19 10:28:48.211 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 82
2025-09-19 10:28:48.213 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:28:48.214 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:28:48.215 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 10:28:48.220 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 10:28:48.222 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 5.0368ms
2025-09-19 10:28:48.223 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:28:48.223 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/json; charset=utf-8 12.236ms
2025-09-19 10:30:01.792 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 10:30:01.834 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 10:30:01.850 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 10:30:02.760 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 10:30:03.228 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 10:30:03.244 +05:30 [INF] ClickLogWorker started
2025-09-19 10:30:03.411 +05:30 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-19 10:30:03.411 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 10:30:03.415 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 10:30:03.416 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 10:30:03.417 +05:30 [INF] Hosting environment: Development
2025-09-19 10:30:03.418 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 10:30:03.429 +05:30 [INF] Executed DbCommand (46ms) [Parameters=[@__cutoff_0='2025-09-12T05:00:01.9845003Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-19 10:30:04.283 +05:30 [INF] ClickLogWorker stopped
2025-09-19 10:30:05.404 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 10:30:05.526 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 127.0081ms
2025-09-19 10:30:05.546 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 10:30:05.553 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.9395ms
2025-09-19 10:30:05.613 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 10:30:05.648 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 34.3868ms
2025-09-19 10:30:05.783 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 10:30:05.978 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 195.7836ms
2025-09-19 10:30:09.358 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 10:30:09.362 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 10:30:09.396 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:30:09.399 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 40.9524ms
2025-09-19 10:30:09.404 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 82
2025-09-19 10:30:09.410 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:30:09.504 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:30:09.515 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 10:30:38.758 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 10:30:40.741 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 31222.3065ms
2025-09-19 10:30:40.743 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:30:40.745 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/json; charset=utf-8 31341.0189ms
2025-09-19 10:36:28.161 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 10:36:28.165 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:36:28.166 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 4.7699ms
2025-09-19 10:36:28.173 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 10:36:28.177 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:36:28.180 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 10:36:28.184 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 10:36:28.296 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-19 10:36:28.373 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-09-19 10:36:28.387 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 200.7232ms
2025-09-19 10:36:28.388 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 10:36:28.393 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 219.7566ms
2025-09-19 10:36:28.396 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 10:36:28.399 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:36:28.400 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 3.7452ms
2025-09-19 10:36:28.403 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 10:36:28.405 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:36:28.408 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 10:36:28.413 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 10:36:28.433 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 10:36:28.436 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 10:36:28.438 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 23.4934ms
2025-09-19 10:36:28.440 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 10:36:28.440 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 10:36:28.446 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 42.7904ms
2025-09-19 10:36:28.448 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:36:28.452 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 10:36:28.453 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 10:36:28.460 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 10:36:28.463 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 10:36:28.465 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 10.1978ms
2025-09-19 10:36:28.467 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 10:36:28.469 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 28.7614ms
2025-09-19 10:36:33.884 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-09-19 10:36:33.887 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:36:33.888 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 3.498ms
2025-09-19 10:36:33.890 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 571
2025-09-19 10:36:33.892 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:36:33.904 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 10:36:33.908 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 10:36:33.922 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__dto_Provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0 AND w."Provider" = @__dto_Provider_1
LIMIT 1
2025-09-19 10:36:33.979 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='c13c2c23-4ed0-4441-b5b2-6b2b581bdca3', @p0='2025-09-19T05:06:33.9260170Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 10:36:33.989 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:36:33.992 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 82.2222ms
2025-09-19 10:36:33.993 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 10:36:33.994 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 103.4212ms
2025-09-19 10:36:34.888 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - null null
2025-09-19 10:36:34.890 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:36:34.891 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection - 204 null null 3.0981ms
2025-09-19 10:36:34.894 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - application/json 534
2025-09-19 10:36:34.897 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:36:34.899 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-09-19 10:36:34.905 +05:30 [INF] Route matched with {action = "TestConnection", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnection(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 10:36:34.910 +05:30 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:36:34.912 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api) in 5.0658ms
2025-09-19 10:36:34.913 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnection (xbytechat.api)'
2025-09-19 10:36:34.914 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection - 400 null application/json; charset=utf-8 19.7896ms
2025-09-19 10:36:44.730 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 10:36:44.733 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:36:44.733 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 204 null null 2.9366ms
2025-09-19 10:36:44.753 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 10:36:44.756 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:36:44.757 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 10:36:44.758 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 10:36:44.762 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='PINNACLE'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 10:36:44.764 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 10:36:44.765 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 6.3583ms
2025-09-19 10:36:44.766 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 10:36:44.767 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 200 null application/json; charset=utf-8 14.1681ms
2025-09-19 10:36:46.268 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 10:36:46.271 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:36:46.272 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 3.4358ms
2025-09-19 10:36:46.274 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 10:36:46.276 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:36:46.277 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 10:36:46.278 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 10:36:46.281 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 10:36:46.284 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 10:36:46.285 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 5.9531ms
2025-09-19 10:36:46.286 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 10:36:46.287 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 12.7169ms
2025-09-19 10:36:54.611 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - null null
2025-09-19 10:36:54.613 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 10:36:54.616 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:36:54.619 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:36:54.619 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - 204 null null 8.221ms
2025-09-19 10:36:54.620 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 7.2835ms
2025-09-19 10:36:54.623 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 10:36:54.625 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/ - null null
2025-09-19 10:36:54.628 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:36:54.629 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:36:54.631 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 10:36:54.634 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 10:36:54.635 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 10:36:54.637 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-19 10:36:54.641 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=25
2025-09-19 10:36:54.657 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-19 10:36:54.659 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType89`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:36:54.664 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 26.1487ms
2025-09-19 10:36:54.665 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 10:36:54.666 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 43.1466ms
2025-09-19 10:36:54.673 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 10:36:54.738 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 10:36:54.773 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 10:36:54.780 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 143.6568ms
2025-09-19 10:36:54.781 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 10:36:54.782 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/ - 200 null application/json; charset=utf-8 156.7683ms
2025-09-19 10:41:57.802 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - null null
2025-09-19 10:41:57.814 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 10:41:57.825 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:41:57.829 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:41:57.830 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - 204 null null 27.7013ms
2025-09-19 10:41:57.831 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 17.4692ms
2025-09-19 10:41:57.844 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 10:41:57.849 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/ - null null
2025-09-19 10:41:57.853 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:41:57.857 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:41:57.859 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 10:41:57.859 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 10:41:57.861 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-19 10:41:57.862 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 10:41:57.869 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=25
2025-09-19 10:41:57.962 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-19 10:41:57.965 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType89`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:41:57.967 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 102.3918ms
2025-09-19 10:41:57.969 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 10:41:57.971 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 126.8721ms
2025-09-19 10:41:57.985 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 10:41:57.994 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 10:41:57.998 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 10:41:58.000 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 132.1425ms
2025-09-19 10:41:58.002 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 10:41:58.003 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/ - 200 null application/json; charset=utf-8 154.3731ms
2025-09-19 10:42:29.740 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-19 10:42:29.743 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:42:29.744 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 4.3736ms
2025-09-19 10:42:29.748 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 49
2025-09-19 10:42:29.752 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:42:29.753 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 10:42:29.758 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-19 10:42:29.769 +05:30 [INF] 🔑 Login attempt for email: tesla@gmail.com
2025-09-19 10:42:29.787 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_Email_0='tesla@gmail.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-19 10:42:29.841 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-19 10:42:29.940 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='24c1a1d5-9f49-4555-8663-497a30b5ea8c'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-19 10:42:29.949 +05:30 [INF] ✅ Token generated for: tesla@gmail.com
2025-09-19 10:42:29.958 +05:30 [INF] 🔎 JWT includes plan_id: 5f9f5de1-a0b2-48ba-b03d-77b27345613f
2025-09-19 10:42:29.959 +05:30 [INF] ✅ Login successful for tesla@gmail.com, Role: business, PlanId: "5f9f5de1-a0b2-48ba-b03d-77b27345613f"
2025-09-19 10:42:29.961 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:42:29.963 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 203.3429ms
2025-09-19 10:42:29.964 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 10:42:29.965 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 217.1373ms
2025-09-19 10:42:29.968 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:42:29.970 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:42:29.971 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.1329ms
2025-09-19 10:42:29.975 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:42:29.977 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:42:29.979 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:42:29.983 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 10:42:29.997 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-19 10:42:30.028 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 10:42:30.032 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:42:30.037 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 52.2677ms
2025-09-19 10:42:30.038 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:42:30.039 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 64.8083ms
2025-09-19 10:42:30.054 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:42:30.057 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:42:30.059 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.4998ms
2025-09-19 10:42:30.069 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:42:30.073 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:42:30.075 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:42:30.076 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 10:42:30.082 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 10:42:30.087 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:42:30.089 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.3497ms
2025-09-19 10:42:30.090 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:42:30.092 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.4469ms
2025-09-19 10:42:30.141 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:42:30.145 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:42:30.146 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:42:30.147 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 10:42:30.154 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 10:42:30.159 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:42:30.161 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.5996ms
2025-09-19 10:42:30.163 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:42:30.165 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.4947ms
2025-09-19 10:42:33.436 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - null null
2025-09-19 10:42:33.439 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:42:33.440 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 10:42:33.441 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - 204 null null 5.0791ms
2025-09-19 10:42:33.446 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:42:33.451 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/ - null null
2025-09-19 10:42:33.451 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 10.9819ms
2025-09-19 10:42:33.455 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:42:33.458 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 10:42:33.461 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 10:42:33.463 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:42:33.464 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 10:42:33.466 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 10:42:33.468 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=25
2025-09-19 10:42:33.469 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-19 10:42:33.473 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 10:42:33.487 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-19 10:42:33.491 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 10:42:33.493 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType89`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:42:33.495 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 10:42:33.497 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 20.62ms
2025-09-19 10:42:33.498 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 30.9185ms
2025-09-19 10:42:33.499 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 10:42:33.501 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 10:42:33.502 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 43.5909ms
2025-09-19 10:42:33.503 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/ - 200 null application/json; charset=utf-8 52.7201ms
2025-09-19 10:42:36.592 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 10:42:36.594 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:42:36.595 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 3.4579ms
2025-09-19 10:42:36.598 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 83
2025-09-19 10:42:36.600 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:42:36.601 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:42:36.602 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 10:43:38.715 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 10:43:38.757 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 10:43:38.789 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 10:43:39.626 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 10:43:41.117 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 10:43:41.136 +05:30 [INF] ClickLogWorker started
2025-09-19 10:43:41.314 +05:30 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-19 10:43:41.319 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 10:43:41.320 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 10:43:41.322 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 10:43:41.324 +05:30 [INF] Hosting environment: Development
2025-09-19 10:43:41.325 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 10:43:41.337 +05:30 [INF] Executed DbCommand (70ms) [Parameters=[@__cutoff_0='2025-09-12T05:13:38.8836059Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-19 10:43:42.188 +05:30 [INF] ClickLogWorker stopped
2025-09-19 10:43:43.167 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 10:43:43.343 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 187.4391ms
2025-09-19 10:43:43.361 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 10:43:43.368 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.3461ms
2025-09-19 10:43:43.457 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 10:43:43.496 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 39.1459ms
2025-09-19 10:43:43.680 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 10:43:43.939 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 258.8348ms
2025-09-19 10:43:46.482 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 10:43:46.486 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 10:43:46.523 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:43:46.526 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 43.6106ms
2025-09-19 10:43:46.530 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 83
2025-09-19 10:43:46.541 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:43:46.689 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:43:46.707 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 10:43:46.757 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-19 10:43:46.779 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 67.0381ms
2025-09-19 10:43:46.781 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:43:46.783 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/problem+json; charset=utf-8 253.1259ms
2025-09-19 10:43:48.439 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 83
2025-09-19 10:43:48.442 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:43:48.446 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:43:48.447 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 10:43:48.455 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-19 10:43:48.457 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 7.3392ms
2025-09-19 10:43:48.458 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:43:48.459 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/problem+json; charset=utf-8 20.3905ms
2025-09-19 10:44:45.936 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 10:44:45.980 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 10:44:45.997 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 10:44:46.820 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 10:44:47.381 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 10:44:47.399 +05:30 [INF] ClickLogWorker started
2025-09-19 10:44:47.586 +05:30 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-19 10:44:47.587 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 10:44:47.591 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 10:44:47.592 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 10:44:47.593 +05:30 [INF] Hosting environment: Development
2025-09-19 10:44:47.595 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 10:44:47.604 +05:30 [INF] Executed DbCommand (55ms) [Parameters=[@__cutoff_0='2025-09-12T05:14:46.0972666Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-19 10:44:48.442 +05:30 [INF] ClickLogWorker stopped
2025-09-19 10:44:49.504 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 10:44:49.710 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 215.9687ms
2025-09-19 10:44:49.842 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 10:44:49.842 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 10:44:49.852 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 9.8787ms
2025-09-19 10:44:49.886 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.6694ms
2025-09-19 10:44:50.005 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 10:44:50.309 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 303.8248ms
2025-09-19 10:45:01.846 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 10:45:01.850 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 10:45:01.897 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:45:01.900 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 54.7585ms
2025-09-19 10:45:01.904 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 83
2025-09-19 10:45:01.917 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:45:02.062 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:45:02.080 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 10:45:02.130 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-19 10:45:02.153 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 67.6645ms
2025-09-19 10:45:02.155 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:45:02.158 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/problem+json; charset=utf-8 253.8775ms
2025-09-19 10:45:05.619 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:45:05.625 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:45:05.626 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.3835ms
2025-09-19 10:45:05.630 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:45:05.635 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:45:05.639 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:45:05.646 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 10:45:05.801 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-19 10:45:05.866 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 10:45:05.871 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:45:05.879 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 231.1202ms
2025-09-19 10:45:05.881 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:45:05.885 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 254.5098ms
2025-09-19 10:45:05.890 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:45:05.893 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:45:05.894 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.6049ms
2025-09-19 10:45:05.897 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:45:05.899 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:45:05.903 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:45:05.905 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 10:45:05.914 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 10:45:05.918 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:45:05.920 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.2788ms
2025-09-19 10:45:05.922 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:45:05.923 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.5661ms
2025-09-19 10:45:05.964 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:45:05.965 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - null null
2025-09-19 10:45:05.965 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 10:45:05.967 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:45:05.970 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:45:05.973 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:45:05.975 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:45:05.975 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - 204 null null 10.5388ms
2025-09-19 10:45:05.976 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 10.5224ms
2025-09-19 10:45:05.977 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 10:45:05.980 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 10:45:05.984 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/ - null null
2025-09-19 10:45:05.990 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:45:05.992 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 10:45:05.995 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:45:05.999 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:45:06.001 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 10:45:06.001 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 10:45:06.004 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 18.5089ms
2025-09-19 10:45:06.009 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:45:06.010 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 10:45:06.010 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-19 10:45:06.011 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 46.9311ms
2025-09-19 10:45:06.020 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=25
2025-09-19 10:45:06.041 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-19 10:45:06.046 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType89`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:45:06.068 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 52.6725ms
2025-09-19 10:45:06.069 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 10:45:06.071 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 90.3097ms
2025-09-19 10:45:06.075 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 10:45:06.139 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 10:45:06.196 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 10:45:06.207 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 194.6242ms
2025-09-19 10:45:06.209 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 10:45:06.210 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/ - 200 null application/json; charset=utf-8 226.2819ms
2025-09-19 10:45:09.903 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 10:45:09.906 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:45:09.907 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 4.0335ms
2025-09-19 10:45:09.911 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 83
2025-09-19 10:45:09.914 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:45:09.915 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:45:09.917 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 10:45:09.923 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-19 10:45:09.925 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 6.3094ms
2025-09-19 10:45:09.926 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:45:09.927 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/problem+json; charset=utf-8 16.6039ms
2025-09-19 10:45:20.582 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-19 10:45:20.585 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:45:20.586 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 4.2988ms
2025-09-19 10:45:20.589 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 49
2025-09-19 10:45:20.594 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:45:20.595 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 10:45:20.600 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-19 10:45:20.613 +05:30 [INF] 🔑 Login attempt for email: tesla@gmail.com
2025-09-19 10:45:20.635 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_Email_0='tesla@gmail.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-19 10:45:20.707 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-19 10:45:20.810 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='24c1a1d5-9f49-4555-8663-497a30b5ea8c'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-19 10:45:20.821 +05:30 [INF] ✅ Token generated for: tesla@gmail.com
2025-09-19 10:45:20.834 +05:30 [INF] 🔎 JWT includes plan_id: 5f9f5de1-a0b2-48ba-b03d-77b27345613f
2025-09-19 10:45:20.836 +05:30 [INF] ✅ Login successful for tesla@gmail.com, Role: business, PlanId: "5f9f5de1-a0b2-48ba-b03d-77b27345613f"
2025-09-19 10:45:20.838 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:45:20.841 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 238.7435ms
2025-09-19 10:45:20.842 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 10:45:20.844 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 254.4819ms
2025-09-19 10:45:20.848 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:45:20.851 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:45:20.853 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.0673ms
2025-09-19 10:45:20.856 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:45:20.859 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:45:20.861 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:45:20.862 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 10:45:20.867 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 10:45:20.872 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:45:20.874 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.878ms
2025-09-19 10:45:20.877 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:45:20.878 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 21.6913ms
2025-09-19 10:45:20.895 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:45:20.899 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:45:20.900 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.3602ms
2025-09-19 10:45:20.912 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:45:20.916 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:45:20.917 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:45:20.919 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 10:45:20.926 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 10:45:20.931 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:45:20.933 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.4906ms
2025-09-19 10:45:20.935 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:45:20.936 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.9765ms
2025-09-19 10:45:20.980 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:45:20.983 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:45:20.985 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:45:20.986 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 10:45:20.991 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 10:45:20.996 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:45:20.998 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.9248ms
2025-09-19 10:45:21.000 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:45:21.001 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.9985ms
2025-09-19 10:45:24.611 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - null null
2025-09-19 10:45:24.614 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 10:45:24.616 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:45:24.619 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:45:24.620 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - 204 null null 9.7784ms
2025-09-19 10:45:24.622 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 7.6916ms
2025-09-19 10:45:24.627 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 10:45:24.631 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/ - null null
2025-09-19 10:45:24.636 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:45:24.639 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:45:24.641 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 10:45:24.642 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 10:45:24.643 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-19 10:45:24.644 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 10:45:24.652 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=25
2025-09-19 10:45:24.652 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-19 10:45:24.659 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 10:45:24.663 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType89`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:45:24.669 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 21.3227ms
2025-09-19 10:45:24.669 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 10:45:24.670 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 10:45:24.674 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 10:45:24.675 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 47.5863ms
2025-09-19 10:45:24.676 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 26.7687ms
2025-09-19 10:45:24.682 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 10:45:24.683 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/ - 200 null application/json; charset=utf-8 51.8961ms
2025-09-19 10:45:28.464 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 10:45:28.467 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:45:28.468 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 4.3126ms
2025-09-19 10:45:28.472 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 82
2025-09-19 10:45:28.475 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:45:28.477 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:45:28.478 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 10:45:28.486 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-19 10:45:28.488 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 7.673ms
2025-09-19 10:45:28.489 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:45:28.491 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/problem+json; charset=utf-8 18.4362ms
2025-09-19 10:45:30.464 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 82
2025-09-19 10:45:30.467 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:45:30.468 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:45:30.470 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 10:45:30.472 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-19 10:45:30.474 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 2.4417ms
2025-09-19 10:45:30.475 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:45:30.477 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/problem+json; charset=utf-8 12.8512ms
2025-09-19 10:45:46.706 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 10:45:46.708 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:45:46.709 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 3.3696ms
2025-09-19 10:45:46.713 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 82
2025-09-19 10:45:46.716 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:45:46.718 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:45:46.719 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 10:45:46.722 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-19 10:45:46.724 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 2.6638ms
2025-09-19 10:45:46.726 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:45:46.727 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/problem+json; charset=utf-8 14.7529ms
2025-09-19 10:46:26.531 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 10:46:26.565 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 10:46:26.577 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 10:46:27.261 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 10:46:27.720 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 10:46:27.738 +05:30 [INF] ClickLogWorker started
2025-09-19 10:46:27.913 +05:30 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-19 10:46:27.915 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 10:46:27.919 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 10:46:27.921 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 10:46:27.923 +05:30 [INF] Hosting environment: Development
2025-09-19 10:46:27.924 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 10:46:27.939 +05:30 [INF] Executed DbCommand (61ms) [Parameters=[@__cutoff_0='2025-09-12T05:16:26.6575213Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-19 10:46:28.779 +05:30 [INF] ClickLogWorker stopped
2025-09-19 10:46:30.017 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 10:46:30.152 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 144.098ms
2025-09-19 10:46:30.179 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 10:46:30.187 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.741ms
2025-09-19 10:46:30.229 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 10:46:30.264 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 34.6017ms
2025-09-19 10:46:30.394 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 10:46:30.604 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 209.6097ms
2025-09-19 10:46:36.177 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 10:46:36.182 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 10:46:36.217 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:46:36.220 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 43.11ms
2025-09-19 10:46:36.224 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 82
2025-09-19 10:46:36.233 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:46:36.338 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:46:36.351 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 10:46:36.385 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-19 10:46:36.400 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 44.2815ms
2025-09-19 10:46:36.402 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:46:36.404 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/problem+json; charset=utf-8 180.1224ms
2025-09-19 10:46:49.861 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-19 10:46:49.865 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:46:49.866 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 4.6446ms
2025-09-19 10:46:49.869 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 49
2025-09-19 10:46:49.873 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:46:49.875 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 10:46:49.880 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-19 10:46:49.926 +05:30 [INF] 🔑 Login attempt for email: tesla@gmail.com
2025-09-19 10:46:50.005 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_Email_0='tesla@gmail.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-19 10:46:50.111 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__user_BusinessId_Value_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-19 10:46:50.217 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='24c1a1d5-9f49-4555-8663-497a30b5ea8c'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-19 10:46:50.224 +05:30 [INF] ✅ Token generated for: tesla@gmail.com
2025-09-19 10:46:50.232 +05:30 [INF] 🔎 JWT includes plan_id: 5f9f5de1-a0b2-48ba-b03d-77b27345613f
2025-09-19 10:46:50.234 +05:30 [INF] ✅ Login successful for tesla@gmail.com, Role: business, PlanId: "5f9f5de1-a0b2-48ba-b03d-77b27345613f"
2025-09-19 10:46:50.237 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:46:50.240 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 358.8844ms
2025-09-19 10:46:50.242 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 10:46:50.246 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 377.4347ms
2025-09-19 10:46:50.249 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:46:50.252 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:46:50.253 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.6713ms
2025-09-19 10:46:50.257 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:46:50.260 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:46:50.264 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:46:50.268 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 10:46:50.281 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-19 10:46:50.307 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 10:46:50.310 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:46:50.316 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 45.7612ms
2025-09-19 10:46:50.317 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:46:50.318 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 61.5952ms
2025-09-19 10:46:50.331 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:46:50.334 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:46:50.335 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.7863ms
2025-09-19 10:46:50.343 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:46:50.347 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:46:50.350 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:46:50.352 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 10:46:50.364 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 10:46:50.369 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:46:50.371 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.2794ms
2025-09-19 10:46:50.373 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:46:50.375 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 31.6214ms
2025-09-19 10:46:50.423 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:46:50.427 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:46:50.428 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:46:50.430 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 10:46:50.439 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 10:46:50.444 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:46:50.446 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 13.8147ms
2025-09-19 10:46:50.448 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:46:50.449 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.1031ms
2025-09-19 10:46:52.661 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 10:46:52.679 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:46:52.680 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 18.7801ms
2025-09-19 10:46:52.684 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 10:46:52.689 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:46:52.690 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 10:46:52.694 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 10:46:52.712 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-19 10:46:52.749 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-09-19 10:46:52.763 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 66.2196ms
2025-09-19 10:46:52.764 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 10:46:52.765 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 81.511ms
2025-09-19 10:46:52.769 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 10:46:52.771 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:46:52.772 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 3.5947ms
2025-09-19 10:46:52.776 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 10:46:52.778 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:46:52.779 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 10:46:52.783 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 10:46:52.800 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 10:46:52.803 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 10:46:52.805 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 19.798ms
2025-09-19 10:46:52.806 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 10:46:52.807 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 10:46:52.808 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 31.9803ms
2025-09-19 10:46:52.810 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:46:52.813 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 10:46:52.814 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 10:46:52.820 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 10:46:52.824 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 10:46:52.825 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 9.332ms
2025-09-19 10:46:52.826 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 10:46:52.827 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 20.157ms
2025-09-19 10:46:56.048 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - null null
2025-09-19 10:46:56.051 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 10:46:56.052 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:46:56.055 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:46:56.056 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - 204 null null 8.2421ms
2025-09-19 10:46:56.056 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 5.2161ms
2025-09-19 10:46:56.060 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 10:46:56.063 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/ - null null
2025-09-19 10:46:56.066 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:46:56.067 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:46:56.069 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 10:46:56.071 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 10:46:56.073 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 10:46:56.074 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-19 10:46:56.079 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=25
2025-09-19 10:46:56.089 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-19 10:46:56.093 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType89`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:46:56.102 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 25.1855ms
2025-09-19 10:46:56.103 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 10:46:56.104 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 10:46:56.108 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 47.3636ms
2025-09-19 10:46:56.135 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 10:46:56.173 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 10:46:56.183 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 108.8265ms
2025-09-19 10:46:56.185 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 10:46:56.186 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/ - 200 null application/json; charset=utf-8 123.6784ms
2025-09-19 10:46:59.289 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 10:46:59.292 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:46:59.292 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 3.5443ms
2025-09-19 10:46:59.296 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 81
2025-09-19 10:46:59.298 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:46:59.299 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:46:59.301 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 10:46:59.305 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-19 10:46:59.307 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 4.6566ms
2025-09-19 10:46:59.308 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:46:59.309 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/problem+json; charset=utf-8 13.0127ms
2025-09-19 10:47:11.529 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 10:47:11.532 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:47:11.533 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 3.5069ms
2025-09-19 10:47:11.536 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 81
2025-09-19 10:47:11.538 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:47:11.539 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:47:11.540 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 10:47:11.544 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-19 10:47:11.545 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 4.357ms
2025-09-19 10:47:11.547 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:47:11.548 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/problem+json; charset=utf-8 11.763ms
2025-09-19 10:49:01.435 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 10:49:01.441 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:49:01.441 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 6.3451ms
2025-09-19 10:49:01.447 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 81
2025-09-19 10:49:01.450 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:49:01.451 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:49:01.452 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 10:49:01.454 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-19 10:49:01.455 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 2.1866ms
2025-09-19 10:49:01.456 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:49:01.457 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/problem+json; charset=utf-8 9.9466ms
2025-09-19 10:54:46.552 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 10:54:46.603 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 10:54:46.667 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 10:54:47.594 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 10:54:48.057 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 10:54:48.075 +05:30 [INF] ClickLogWorker started
2025-09-19 10:54:48.252 +05:30 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-19 10:54:48.256 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 10:54:48.257 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 10:54:48.258 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 10:54:48.259 +05:30 [INF] Hosting environment: Development
2025-09-19 10:54:48.259 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 10:54:48.269 +05:30 [INF] Executed DbCommand (50ms) [Parameters=[@__cutoff_0='2025-09-12T05:24:46.7911218Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-19 10:54:49.120 +05:30 [INF] ClickLogWorker stopped
2025-09-19 10:54:50.079 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 10:54:50.209 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 139.2704ms
2025-09-19 10:54:50.223 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 10:54:50.229 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.9167ms
2025-09-19 10:54:50.324 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 10:54:50.355 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 31.4867ms
2025-09-19 10:54:50.520 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 10:54:50.715 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 194.7505ms
2025-09-19 10:55:27.222 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 10:55:27.227 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 10:55:27.273 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:55:27.278 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 56.4475ms
2025-09-19 10:55:27.286 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 81
2025-09-19 10:55:27.296 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:55:27.414 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:55:27.432 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 10:55:27.482 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-19 10:55:27.504 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 65.8786ms
2025-09-19 10:55:27.506 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:55:27.509 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/problem+json; charset=utf-8 222.9345ms
2025-09-19 10:55:31.340 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:55:31.345 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:55:31.346 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.5931ms
2025-09-19 10:55:31.349 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:55:31.353 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:55:31.359 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:55:31.365 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 10:55:31.531 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-19 10:55:31.597 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 10:55:31.602 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:55:31.624 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 256.6057ms
2025-09-19 10:55:31.625 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:55:31.630 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 280.6745ms
2025-09-19 10:55:31.634 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:55:31.636 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:55:31.637 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.7198ms
2025-09-19 10:55:31.641 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:55:31.645 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:55:31.659 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:55:31.661 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 10:55:31.675 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 10:55:31.680 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:55:31.682 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 18.2864ms
2025-09-19 10:55:31.684 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:55:31.686 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 44.7831ms
2025-09-19 10:55:31.728 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - null null
2025-09-19 10:55:31.729 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 10:55:31.729 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:55:31.735 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:55:31.738 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:55:31.740 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:55:31.741 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - 204 null null 13.3663ms
2025-09-19 10:55:31.742 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 12.8067ms
2025-09-19 10:55:31.744 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:55:31.747 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 10:55:31.750 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/ - null null
2025-09-19 10:55:31.751 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 10:55:31.754 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:55:31.756 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:55:31.760 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 10:55:31.763 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 10:55:31.764 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 10:55:31.769 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 10:55:31.770 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:55:31.770 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-19 10:55:31.773 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.9583ms
2025-09-19 10:55:31.777 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:55:31.779 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=25
2025-09-19 10:55:31.779 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 49.2938ms
2025-09-19 10:55:31.800 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-19 10:55:31.804 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType89`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:55:31.823 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 48.1779ms
2025-09-19 10:55:31.825 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 10:55:31.826 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 79.8563ms
2025-09-19 10:55:31.830 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 10:55:31.880 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 10:55:31.927 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 10:55:31.935 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 163.5194ms
2025-09-19 10:55:31.937 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 10:55:31.938 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/ - 200 null application/json; charset=utf-8 188.4218ms
2025-09-19 10:55:40.369 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-19 10:55:40.372 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:55:40.373 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.6534ms
2025-09-19 10:55:40.375 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 49
2025-09-19 10:55:40.378 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:55:40.380 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 10:55:40.384 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-19 10:55:40.393 +05:30 [INF] 🔑 Login attempt for email: tesla@gmail.com
2025-09-19 10:55:40.409 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_Email_0='tesla@gmail.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-19 10:55:40.456 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-19 10:55:40.528 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='24c1a1d5-9f49-4555-8663-497a30b5ea8c'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-19 10:55:40.535 +05:30 [INF] ✅ Token generated for: tesla@gmail.com
2025-09-19 10:55:40.543 +05:30 [INF] 🔎 JWT includes plan_id: 5f9f5de1-a0b2-48ba-b03d-77b27345613f
2025-09-19 10:55:40.544 +05:30 [INF] ✅ Login successful for tesla@gmail.com, Role: business, PlanId: "5f9f5de1-a0b2-48ba-b03d-77b27345613f"
2025-09-19 10:55:40.546 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:55:40.548 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 162.133ms
2025-09-19 10:55:40.549 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 10:55:40.550 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 174.5592ms
2025-09-19 10:55:40.553 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:55:40.554 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:55:40.555 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.6208ms
2025-09-19 10:55:40.558 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:55:40.559 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:55:40.560 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:55:40.561 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 10:55:40.565 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 10:55:40.568 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:55:40.571 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.4703ms
2025-09-19 10:55:40.572 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:55:40.573 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.0117ms
2025-09-19 10:55:40.583 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:55:40.585 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:55:40.586 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.9537ms
2025-09-19 10:55:40.589 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:55:40.591 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:55:40.593 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:55:40.594 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 10:55:40.599 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 10:55:40.603 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:55:40.604 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.5353ms
2025-09-19 10:55:40.606 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:55:40.607 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.4457ms
2025-09-19 10:55:40.646 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 10:55:40.655 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:55:40.656 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:55:40.657 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 10:55:40.664 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 10:55:40.668 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:55:40.670 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.0671ms
2025-09-19 10:55:40.671 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 10:55:40.672 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.25ms
2025-09-19 10:55:43.932 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - null null
2025-09-19 10:55:43.934 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:55:43.936 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - 204 null null 3.4465ms
2025-09-19 10:55:43.937 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 10:55:43.939 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/ - null null
2025-09-19 10:55:43.941 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:55:43.943 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:55:43.944 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 7.4879ms
2025-09-19 10:55:43.945 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 10:55:43.947 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 10:55:43.948 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 10:55:43.950 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:55:43.952 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 10:55:43.952 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=25
2025-09-19 10:55:43.953 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-19 10:55:43.956 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 10:55:43.963 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 10:55:43.963 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-19 10:55:43.966 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 10:55:43.967 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType89`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 10:55:43.968 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 17.2097ms
2025-09-19 10:55:43.969 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 12.8006ms
2025-09-19 10:55:43.970 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 10:55:43.971 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 10:55:43.972 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/ - 200 null application/json; charset=utf-8 32.4672ms
2025-09-19 10:55:43.973 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 25.4244ms
2025-09-19 10:55:47.498 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 10:55:47.500 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:55:47.501 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 2.9548ms
2025-09-19 10:55:47.504 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 81
2025-09-19 10:55:47.506 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:55:47.507 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:55:47.508 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 10:55:47.511 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-19 10:55:47.512 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 2.7392ms
2025-09-19 10:55:47.513 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:55:47.513 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/problem+json; charset=utf-8 9.5359ms
2025-09-19 10:56:05.064 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 10:56:05.068 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:56:05.075 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 11.2835ms
2025-09-19 10:56:05.080 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 81
2025-09-19 10:56:05.084 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:56:05.085 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:56:05.087 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 10:56:05.095 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-19 10:56:05.098 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 8.6285ms
2025-09-19 10:56:05.099 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:56:05.101 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/problem+json; charset=utf-8 20.7738ms
2025-09-19 10:56:32.703 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 10:56:32.714 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:56:32.716 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 13.0292ms
2025-09-19 10:56:32.720 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 81
2025-09-19 10:56:32.724 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:56:32.726 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:56:32.728 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 10:56:32.732 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-09-19 10:56:32.734 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 3.4369ms
2025-09-19 10:56:32.736 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:56:32.737 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/problem+json; charset=utf-8 16.7591ms
2025-09-19 10:57:18.991 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 10:57:19.045 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 10:57:19.064 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 10:57:20.190 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 10:57:20.887 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 10:57:20.907 +05:30 [INF] ClickLogWorker started
2025-09-19 10:57:21.104 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 10:57:21.105 +05:30 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-19 10:57:21.106 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 10:57:21.111 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 10:57:21.112 +05:30 [INF] Hosting environment: Development
2025-09-19 10:57:21.113 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 10:57:21.127 +05:30 [INF] Executed DbCommand (65ms) [Parameters=[@__cutoff_0='2025-09-12T05:27:19.2016460Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-19 10:57:21.965 +05:30 [INF] ClickLogWorker stopped
2025-09-19 10:57:22.553 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 10:57:22.750 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 205.5922ms
2025-09-19 10:57:22.772 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 10:57:22.786 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 13.9901ms
2025-09-19 10:57:22.853 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 10:57:22.889 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.6828ms
2025-09-19 10:57:23.057 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 10:57:23.313 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 255.0825ms
2025-09-19 10:57:26.095 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 10:57:26.099 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 10:57:26.139 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:57:26.141 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 45.895ms
2025-09-19 10:57:26.145 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 81
2025-09-19 10:57:26.154 +05:30 [INF] CORS policy execution successful.
2025-09-19 10:57:26.256 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 10:57:26.270 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 11:03:03.245 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 11:03:03.255 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 336980.708ms
2025-09-19 11:03:03.256 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 11:03:03.258 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/json; charset=utf-8 337112.3731ms
2025-09-19 11:03:09.588 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 11:03:09.591 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:03:09.592 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 3.903ms
2025-09-19 11:03:09.595 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 81
2025-09-19 11:03:09.598 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:03:09.602 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 11:03:09.604 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 11:03:17.660 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 11:03:17.663 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 8056.3133ms
2025-09-19 11:03:17.664 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 11:03:17.665 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/json; charset=utf-8 8070.5739ms
2025-09-19 11:03:30.565 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-19 11:03:30.568 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:03:30.569 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 4.262ms
2025-09-19 11:03:30.572 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 49
2025-09-19 11:03:30.576 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:03:30.579 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 11:03:30.583 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-19 11:03:30.627 +05:30 [INF] 🔑 Login attempt for email: tesla@gmail.com
2025-09-19 11:03:30.708 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__dto_Email_0='tesla@gmail.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-19 11:03:30.794 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__user_BusinessId_Value_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-19 11:03:30.894 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='24c1a1d5-9f49-4555-8663-497a30b5ea8c'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-19 11:03:30.903 +05:30 [INF] ✅ Token generated for: tesla@gmail.com
2025-09-19 11:03:30.911 +05:30 [INF] 🔎 JWT includes plan_id: 5f9f5de1-a0b2-48ba-b03d-77b27345613f
2025-09-19 11:03:30.913 +05:30 [INF] ✅ Login successful for tesla@gmail.com, Role: business, PlanId: "5f9f5de1-a0b2-48ba-b03d-77b27345613f"
2025-09-19 11:03:30.915 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 11:03:30.918 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 333.805ms
2025-09-19 11:03:30.920 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 11:03:30.924 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 352.2368ms
2025-09-19 11:03:30.927 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 11:03:30.929 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:03:30.930 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.3192ms
2025-09-19 11:03:30.933 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 11:03:30.936 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:03:30.938 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 11:03:30.942 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 11:03:30.954 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-19 11:03:30.979 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 11:03:30.982 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 11:03:30.987 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 42.999ms
2025-09-19 11:03:30.988 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 11:03:30.989 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 56.3069ms
2025-09-19 11:03:31.004 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 11:03:31.007 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:03:31.010 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.3001ms
2025-09-19 11:03:31.019 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 11:03:31.022 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:03:31.023 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 11:03:31.024 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 11:03:31.031 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 11:03:31.034 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 11:03:31.035 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.2636ms
2025-09-19 11:03:31.036 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 11:03:31.037 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 18.833ms
2025-09-19 11:03:31.074 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 11:03:31.077 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:03:31.078 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 11:03:31.079 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 11:03:31.084 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 11:03:31.087 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 11:03:31.089 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.6087ms
2025-09-19 11:03:31.090 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 11:03:31.091 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.0178ms
2025-09-19 11:03:33.627 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - null null
2025-09-19 11:03:33.628 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 11:03:33.630 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:03:33.632 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:03:33.633 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - 204 null null 5.6488ms
2025-09-19 11:03:33.633 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 5.0311ms
2025-09-19 11:03:33.638 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 11:03:33.640 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/ - null null
2025-09-19 11:03:33.644 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:03:33.645 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:03:33.646 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 11:03:33.649 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 11:03:33.651 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 11:03:33.652 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-19 11:03:33.658 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=25
2025-09-19 11:03:33.672 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-19 11:03:33.675 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType89`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 11:03:33.683 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 11:03:33.690 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 35.9343ms
2025-09-19 11:03:33.691 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 11:03:33.692 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 54.4448ms
2025-09-19 11:03:33.717 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 11:03:33.750 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 11:03:33.758 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 105.8136ms
2025-09-19 11:03:33.759 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 11:03:33.760 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/ - 200 null application/json; charset=utf-8 119.9283ms
2025-09-19 11:03:37.453 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 11:03:37.456 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:03:37.457 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 3.9564ms
2025-09-19 11:03:37.460 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 80
2025-09-19 11:03:37.462 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:03:37.464 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 11:03:37.464 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 11:43:04.642 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 11:43:04.999 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 11:43:05.271 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 11:43:08.012 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 11:43:09.682 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 11:43:09.737 +05:30 [INF] ClickLogWorker started
2025-09-19 11:43:10.748 +05:30 [INF] Executed DbCommand (71ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-19 11:43:10.805 +05:30 [INF] Executed DbCommand (130ms) [Parameters=[@__cutoff_0='2025-09-12T06:13:06.5633795Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-19 11:43:11.127 +05:30 [INF] ClickLogWorker stopped
2025-09-19 11:43:11.399 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 11:43:11.401 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 11:43:11.403 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 11:43:11.405 +05:30 [INF] Hosting environment: Development
2025-09-19 11:43:11.407 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 11:43:12.926 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 11:43:13.839 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 851.6934ms
2025-09-19 11:43:13.984 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 11:43:14.007 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 11:43:14.015 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.8854ms
2025-09-19 11:43:14.180 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 195.6619ms
2025-09-19 11:43:14.400 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 11:43:15.025 +05:30 [ERR] ❌ An unhandled exception occurred
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-09-19 11:43:15.238 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 500 null application/json; charset=utf-8 838.022ms
2025-09-19 11:43:27.069 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 11:43:27.074 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 11:43:27.123 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:43:27.128 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 59.488ms
2025-09-19 11:43:27.132 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 11:43:27.144 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:43:27.364 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 11:43:27.389 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 11:43:27.532 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-19 11:43:27.606 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 11:43:27.617 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 11:43:27.638 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 242.2838ms
2025-09-19 11:43:27.640 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 11:43:27.648 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 515.6244ms
2025-09-19 11:43:27.653 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 11:43:27.656 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:43:27.658 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.9996ms
2025-09-19 11:43:27.662 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 11:43:27.665 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:43:27.670 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 11:43:27.672 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 11:43:27.684 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 11:43:27.689 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 11:43:27.691 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 17.7636ms
2025-09-19 11:43:27.693 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 11:43:27.695 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 33.4452ms
2025-09-19 11:43:33.639 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-19 11:43:33.642 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:43:33.643 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 4.1404ms
2025-09-19 11:43:33.647 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 49
2025-09-19 11:43:33.652 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:43:33.654 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 11:43:33.659 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-19 11:43:33.678 +05:30 [INF] 🔑 Login attempt for email: tesla@gmail.com
2025-09-19 11:43:33.706 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_Email_0='tesla@gmail.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-19 11:43:33.758 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-19 11:43:33.854 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='24c1a1d5-9f49-4555-8663-497a30b5ea8c'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-19 11:43:33.862 +05:30 [INF] ✅ Token generated for: tesla@gmail.com
2025-09-19 11:43:33.872 +05:30 [INF] 🔎 JWT includes plan_id: 5f9f5de1-a0b2-48ba-b03d-77b27345613f
2025-09-19 11:43:33.873 +05:30 [INF] ✅ Login successful for tesla@gmail.com, Role: business, PlanId: "5f9f5de1-a0b2-48ba-b03d-77b27345613f"
2025-09-19 11:43:33.875 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 11:43:33.878 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 217.8406ms
2025-09-19 11:43:33.880 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 11:43:33.881 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 233.172ms
2025-09-19 11:43:33.884 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 11:43:33.886 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:43:33.887 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.3838ms
2025-09-19 11:43:33.889 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 11:43:33.891 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:43:33.893 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 11:43:33.894 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 11:43:33.900 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 11:43:33.903 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 11:43:33.904 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.7123ms
2025-09-19 11:43:33.905 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 11:43:33.906 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.0826ms
2025-09-19 11:43:33.919 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 11:43:33.922 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:43:33.923 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.688ms
2025-09-19 11:43:33.927 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 11:43:33.930 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:43:33.932 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 11:43:33.933 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 11:43:33.938 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 11:43:33.941 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 11:43:33.942 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.6367ms
2025-09-19 11:43:33.943 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 11:43:33.945 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.4646ms
2025-09-19 11:43:34.012 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 11:43:34.014 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:43:34.015 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 11:43:34.016 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 11:43:34.021 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 11:43:34.024 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 11:43:34.025 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.3878ms
2025-09-19 11:43:34.026 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 11:43:34.027 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.7003ms
2025-09-19 11:43:36.633 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 11:43:36.635 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 11:43:36.637 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:43:36.641 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 7.3007ms
2025-09-19 11:43:36.641 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:43:36.645 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 11:43:36.646 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 204 null null 11.4312ms
2025-09-19 11:43:36.650 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:43:36.654 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 11:43:36.656 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 11:43:36.657 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:43:36.660 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 11:43:36.663 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 11:43:36.666 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 11:43:36.685 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-19 11:43:36.687 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='PINNACLE'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 11:43:36.692 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 11:43:36.701 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 32.7417ms
2025-09-19 11:43:36.703 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 11:43:36.704 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 200 null application/json; charset=utf-8 50.1858ms
2025-09-19 11:43:36.721 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-09-19 11:43:36.728 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 62.3855ms
2025-09-19 11:43:36.730 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 11:43:36.731 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 85.4672ms
2025-09-19 11:43:36.733 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 11:43:36.735 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:43:36.736 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 2.7954ms
2025-09-19 11:43:36.739 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 11:43:36.741 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:43:36.742 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 11:43:36.743 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 11:43:36.748 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 11:43:36.752 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 11:43:36.753 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 7.9729ms
2025-09-19 11:43:36.754 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 11:43:36.755 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 16.3843ms
2025-09-19 11:43:36.761 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 11:43:36.763 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:43:36.765 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 11:43:36.766 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 11:43:36.772 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 11:43:36.775 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 11:43:36.777 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 9.1912ms
2025-09-19 11:43:36.778 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 11:43:36.780 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 19.1326ms
2025-09-19 11:44:04.603 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 11:44:04.605 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:44:04.606 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 3.3418ms
2025-09-19 11:44:04.609 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - application/json 119
2025-09-19 11:44:04.611 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:44:04.612 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api)'
2025-09-19 11:44:04.615 +05:30 [INF] Route matched with {action = "Upsert", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Upsert(System.String, UpsertRequest) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 11:44:06.356 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
LIMIT 1
2025-09-19 11:44:06.364 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__providerForChild_1='META_CLOUD', @__phoneNumberId_2='234324'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__providerForChild_1 AND w."PhoneNumberId" = @__phoneNumberId_2
LIMIT 1
2025-09-19 11:44:06.511 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@p0='40ea332a-574b-40ca-bb22-225dd0dc068b', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='2025-09-19T06:14:06.3386108Z' (DbType = DateTime), @p3='True', @p4='True', @p5='234324' (Nullable = false), @p6='META_CLOUD' (Nullable = false), @p7='sad', @p8=NULL (DbType = DateTime), @p9='324324' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WhatsAppPhoneNumbers" ("Id", "BusinessId", "CreatedAt", "IsActive", "IsDefault", "PhoneNumberId", "Provider", "SenderDisplayName", "UpdatedAt", "WhatsAppBusinessNumber")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-19 11:44:06.544 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__providerForChild_1='META_CLOUD', @__entity_Id_2='40ea332a-574b-40ca-bb22-225dd0dc068b'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" AS w
SET "IsDefault" = FALSE
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__providerForChild_1 AND w."Id" <> @__entity_Id_2
2025-09-19 11:44:06.557 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p3='c13c2c23-4ed0-4441-b5b2-6b2b581bdca3', @p0='234324', @p1='2025-09-19T06:14:06.3386108Z' (Nullable = true) (DbType = DateTime), @p2='324324'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "PhoneNumberId" = @p0, "UpdatedAt" = @p1, "WhatsAppBusinessNumber" = @p2
WHERE "Id" = @p3;
2025-09-19 11:44:06.571 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber'.
2025-09-19 11:44:06.575 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api) in 1957.5421ms
2025-09-19 11:44:06.576 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api)'
2025-09-19 11:44:06.577 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 1968.3731ms
2025-09-19 11:44:15.726 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/40ea332a-574b-40ca-bb22-225dd0dc068b - null null
2025-09-19 11:44:15.729 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:44:15.730 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/40ea332a-574b-40ca-bb22-225dd0dc068b - 204 null null 3.328ms
2025-09-19 11:44:15.732 +05:30 [INF] Request starting HTTP/1.1 DELETE http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/40ea332a-574b-40ca-bb22-225dd0dc068b - null null
2025-09-19 11:44:15.734 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:44:15.735 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Delete (xbytechat.api)'
2025-09-19 11:44:15.738 +05:30 [INF] Route matched with {action = "Delete", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(System.String, System.Guid) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 11:44:15.771 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='40ea332a-574b-40ca-bb22-225dd0dc068b', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."Id" = @__id_0 AND w."BusinessId" = @__businessId_1 AND lower(w."Provider") = @__ToLower_2
LIMIT 1
2025-09-19 11:44:15.780 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='40ea332a-574b-40ca-bb22-225dd0dc068b'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "WhatsAppPhoneNumbers"
WHERE "Id" = @p0;
2025-09-19 11:44:15.787 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-19 11:44:15.788 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Delete (xbytechat.api) in 48.331ms
2025-09-19 11:44:15.789 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Delete (xbytechat.api)'
2025-09-19 11:44:15.790 +05:30 [INF] Request finished HTTP/1.1 DELETE http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/40ea332a-574b-40ca-bb22-225dd0dc068b - 204 null null 57.5953ms
2025-09-19 11:44:25.749 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 11:44:25.759 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 9.431ms
2025-09-19 11:44:25.781 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 11:44:25.783 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 11:44:25.793 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 10.7575ms
2025-09-19 11:44:25.796 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 15.1578ms
2025-09-19 11:44:25.855 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 11:44:25.876 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/favicon-32x32.png - null null
2025-09-19 11:44:25.888 +05:30 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-09-19 11:44:25.890 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/favicon-32x32.png - 200 628 image/png 14.1567ms
2025-09-19 11:44:25.907 +05:30 [ERR] ❌ An unhandled exception occurred
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-09-19 11:44:25.910 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 500 null application/json; charset=utf-8 55.4962ms
2025-09-19 11:44:37.170 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 11:44:37.173 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 3.8246ms
2025-09-19 11:44:37.193 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 11:44:37.193 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 11:44:37.198 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 5.2405ms
2025-09-19 11:44:37.201 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 7.9322ms
2025-09-19 11:44:37.264 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 11:44:37.304 +05:30 [ERR] ❌ An unhandled exception occurred
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-09-19 11:44:37.307 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 500 null application/json; charset=utf-8 43.0362ms
2025-09-19 11:44:38.110 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 11:44:38.115 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 4.2738ms
2025-09-19 11:44:38.133 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 11:44:38.133 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 11:44:38.138 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 4.6152ms
2025-09-19 11:44:38.139 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 6.65ms
2025-09-19 11:44:38.192 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 11:44:38.229 +05:30 [ERR] ❌ An unhandled exception occurred
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-09-19 11:44:38.231 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 500 null application/json; charset=utf-8 39.7632ms
2025-09-19 11:45:25.475 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 11:45:25.519 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 11:45:25.531 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 11:45:26.302 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 11:45:26.771 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 11:45:26.788 +05:30 [INF] ClickLogWorker started
2025-09-19 11:45:26.938 +05:30 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-19 11:45:26.939 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 11:45:26.942 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 11:45:26.944 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 11:45:26.944 +05:30 [INF] Hosting environment: Development
2025-09-19 11:45:26.945 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 11:45:26.955 +05:30 [INF] Executed DbCommand (46ms) [Parameters=[@__cutoff_0='2025-09-12T06:15:25.6442507Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-19 11:45:27.827 +05:30 [INF] ClickLogWorker stopped
2025-09-19 11:45:29.192 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 11:45:29.361 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 175.7939ms
2025-09-19 11:45:29.390 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 11:45:29.398 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.9449ms
2025-09-19 11:45:29.462 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 11:45:29.514 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 52.492ms
2025-09-19 11:45:29.684 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 11:45:29.860 +05:30 [ERR] ❌ An unhandled exception occurred
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-09-19 11:45:29.899 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 500 null application/json; charset=utf-8 215.5558ms
2025-09-19 11:48:18.460 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 11:48:18.492 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 11:48:18.505 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 11:48:19.267 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 11:48:19.722 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 11:48:19.741 +05:30 [INF] ClickLogWorker started
2025-09-19 11:48:19.922 +05:30 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-19 11:48:19.923 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 11:48:19.927 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 11:48:19.928 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 11:48:19.928 +05:30 [INF] Hosting environment: Development
2025-09-19 11:48:19.929 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 11:48:19.939 +05:30 [INF] Executed DbCommand (50ms) [Parameters=[@__cutoff_0='2025-09-12T06:18:18.6512029Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-19 11:48:20.787 +05:30 [INF] ClickLogWorker stopped
2025-09-19 11:48:21.941 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 11:48:22.079 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 146.0602ms
2025-09-19 11:48:22.099 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 11:48:22.107 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.1441ms
2025-09-19 11:48:22.173 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 11:48:22.210 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 37.5752ms
2025-09-19 11:48:22.353 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 11:48:22.501 +05:30 [ERR] ❌ An unhandled exception occurred
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-09-19 11:48:22.540 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 500 null application/json; charset=utf-8 187.4473ms
2025-09-19 11:48:53.514 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 11:48:53.521 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 7.4563ms
2025-09-19 11:48:53.545 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 11:48:53.547 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 11:48:53.554 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.5959ms
2025-09-19 11:48:53.574 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.9153ms
2025-09-19 11:48:53.669 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 11:48:53.815 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 146.4936ms
2025-09-19 11:48:59.999 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 11:48:59.999 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - null null
2025-09-19 11:49:00.005 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 11:49:00.046 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:00.046 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:00.053 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - 204 null null 53.5584ms
2025-09-19 11:49:00.053 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 53.5462ms
2025-09-19 11:49:00.060 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 11:49:00.062 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/ - null null
2025-09-19 11:49:00.068 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:00.068 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:00.225 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 11:49:00.228 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 11:49:00.239 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 11:49:00.239 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-19 11:49:00.254 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=25
2025-09-19 11:49:00.310 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-19 11:49:00.323 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 11:49:00.338 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType89`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 11:49:00.365 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 121.6114ms
2025-09-19 11:49:00.367 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 11:49:00.373 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 312.4489ms
2025-09-19 11:49:00.402 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 11:49:00.487 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 11:49:00.513 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 272.5578ms
2025-09-19 11:49:00.514 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 11:49:00.515 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/ - 200 null application/json; charset=utf-8 453.1563ms
2025-09-19 11:49:03.451 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 11:49:03.454 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:03.455 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 4.1548ms
2025-09-19 11:49:03.458 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 81
2025-09-19 11:49:03.461 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:03.465 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 11:49:03.469 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 11:49:03.528 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 11:49:03.539 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_dto_RecipientNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-19 11:49:03.602 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p1='75df7429-287c-406a-83d8-0dfa045b0093', @p0='2025-09-19T06:19:03.5414634Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Contacts" SET "LastContactedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 11:49:03.627 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='234324'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 11:49:03.768 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='dc1e494a-a223-467b-99c0-137abf5bb2f5', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T06:19:03.6954429Z' (DbType = DateTime), @p8='❌ Provider configuration error.', @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='dfsfdsf' (Nullable = false), @p13=NULL, @p14=NULL, @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17='dfsfdsf', @p18=NULL (DbType = Guid), @p19='2025-09-19T06:19:03.6960847Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
2025-09-19 11:49:03.780 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 11:49:03.786 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 314.9947ms
2025-09-19 11:49:03.787 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 11:49:03.787 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/json; charset=utf-8 329.4122ms
2025-09-19 11:49:15.568 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-19 11:49:15.571 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:15.572 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.886ms
2025-09-19 11:49:15.575 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 49
2025-09-19 11:49:15.579 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:15.580 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 11:49:15.582 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-19 11:49:15.602 +05:30 [INF] 🔑 Login attempt for email: tesla@gmail.com
2025-09-19 11:49:15.617 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='tesla@gmail.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-19 11:49:15.658 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-19 11:49:15.736 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='24c1a1d5-9f49-4555-8663-497a30b5ea8c'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-19 11:49:15.749 +05:30 [INF] ✅ Token generated for: tesla@gmail.com
2025-09-19 11:49:15.757 +05:30 [INF] 🔎 JWT includes plan_id: 5f9f5de1-a0b2-48ba-b03d-77b27345613f
2025-09-19 11:49:15.765 +05:30 [INF] ✅ Login successful for tesla@gmail.com, Role: business, PlanId: "5f9f5de1-a0b2-48ba-b03d-77b27345613f"
2025-09-19 11:49:15.768 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 11:49:15.770 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 186.3513ms
2025-09-19 11:49:15.771 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 11:49:15.772 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 197.1262ms
2025-09-19 11:49:15.776 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 11:49:15.779 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:15.780 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.8027ms
2025-09-19 11:49:15.783 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 11:49:15.785 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:15.787 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 11:49:15.792 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 11:49:15.809 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-19 11:49:15.833 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 11:49:15.840 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 11:49:15.847 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 54.496ms
2025-09-19 11:49:15.849 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 11:49:15.849 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 66.637ms
2025-09-19 11:49:15.862 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 11:49:15.865 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:15.865 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.3831ms
2025-09-19 11:49:15.870 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 11:49:15.872 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:15.874 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 11:49:15.875 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 11:49:15.882 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 11:49:15.885 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 11:49:15.886 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.5817ms
2025-09-19 11:49:15.887 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 11:49:15.889 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 19.0144ms
2025-09-19 11:49:15.921 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 11:49:15.924 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:15.925 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 11:49:15.926 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 11:49:15.931 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 11:49:15.934 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 11:49:15.935 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.9984ms
2025-09-19 11:49:15.936 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 11:49:15.936 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.1491ms
2025-09-19 11:49:18.220 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 11:49:18.221 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 11:49:18.224 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:18.226 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 6.6603ms
2025-09-19 11:49:18.227 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:18.230 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 204 null null 9.4165ms
2025-09-19 11:49:18.235 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 11:49:18.235 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 11:49:18.238 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:18.239 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:18.240 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 11:49:18.241 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 11:49:18.244 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 11:49:18.244 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 11:49:18.260 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-19 11:49:18.260 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='PINNACLE'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 11:49:18.266 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 11:49:18.268 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 22.4986ms
2025-09-19 11:49:18.269 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 11:49:18.270 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 200 null application/json; charset=utf-8 35.3845ms
2025-09-19 11:49:18.286 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-09-19 11:49:18.299 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 52.3413ms
2025-09-19 11:49:18.300 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 11:49:18.301 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 66.3557ms
2025-09-19 11:49:18.304 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 11:49:18.306 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:18.307 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 2.51ms
2025-09-19 11:49:18.308 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 11:49:18.310 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:18.311 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 11:49:18.312 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 11:49:18.315 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 11:49:18.318 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 11:49:18.319 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 6.1099ms
2025-09-19 11:49:18.320 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 11:49:18.321 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 12.5636ms
2025-09-19 11:49:18.325 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 11:49:18.328 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:18.329 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 11:49:18.330 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 11:49:18.335 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 11:49:18.338 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 11:49:18.339 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 8.1769ms
2025-09-19 11:49:18.341 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 11:49:18.341 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 16.2927ms
2025-09-19 11:49:39.200 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 11:49:39.202 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:39.203 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 3.5342ms
2025-09-19 11:49:39.209 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 11:49:39.211 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:39.212 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 204 null null 3.0355ms
2025-09-19 11:49:39.218 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 11:49:39.218 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 11:49:39.221 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:39.223 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:39.224 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 11:49:39.224 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 11:49:39.225 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 11:49:39.226 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 11:49:39.232 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-19 11:49:39.233 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='PINNACLE'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 11:49:39.236 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-09-19 11:49:39.238 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 11:49:39.238 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 10.8701ms
2025-09-19 11:49:39.239 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 10.2145ms
2025-09-19 11:49:39.240 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 11:49:39.241 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 11:49:39.242 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 23.4519ms
2025-09-19 11:49:39.242 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 200 null application/json; charset=utf-8 23.9357ms
2025-09-19 11:49:39.247 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 11:49:39.248 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:39.249 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 2.4713ms
2025-09-19 11:49:39.251 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 11:49:39.253 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:39.254 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 11:49:39.255 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 11:49:39.260 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 11:49:39.262 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 11:49:39.263 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 6.5556ms
2025-09-19 11:49:39.264 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 11:49:39.264 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 11:49:39.265 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 13.606ms
2025-09-19 11:49:39.269 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:39.273 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 11:49:39.274 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 11:49:39.278 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 11:49:39.281 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 11:49:39.283 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 7.3074ms
2025-09-19 11:49:39.284 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 11:49:39.285 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 20.6679ms
2025-09-19 11:49:43.459 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-09-19 11:49:43.461 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:43.462 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 3.0034ms
2025-09-19 11:49:43.464 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 553
2025-09-19 11:49:43.467 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:43.468 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 11:49:43.471 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 11:49:43.503 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__dto_Provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0 AND w."Provider" = @__dto_Provider_1
LIMIT 1
2025-09-19 11:49:43.530 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@p2='c13c2c23-4ed0-4441-b5b2-6b2b581bdca3', @p0='EAAUbmP4285YBPTNJUw3y5Qv337bw4C7SQ2EjHH888J0Xs2DPyj0P2auFpqIaZC4TIeW4qMV3N31FC15xsgetGYBUGUNwlGHhpjE6lq4a3FvW9F03r0a4gcZAA40DUBISAfMf0qhPbvQFRwwObQGCGhDPjcVmVmhU2WGEvrjdWr9T1zsuIx7RruNh0nfQmWZCX7wbMhueSHsesi7AZCJucCEFYNgBeJLf9G3ikR6Fw7XLlnlqmZCV1M2LlczvteQZDZD' (Nullable = false), @p1='2025-09-19T06:19:43.5103516Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "ApiKey" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-09-19 11:49:43.534 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 11:49:43.536 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 63.7119ms
2025-09-19 11:49:43.537 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 11:49:43.538 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 73.5248ms
2025-09-19 11:49:47.754 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 11:49:47.756 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - null null
2025-09-19 11:49:47.758 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:47.760 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:47.761 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 6.4556ms
2025-09-19 11:49:47.762 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - 204 null null 7.6927ms
2025-09-19 11:49:47.765 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/ - null null
2025-09-19 11:49:47.767 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 11:49:47.769 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:47.771 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:47.772 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 11:49:47.772 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 11:49:47.773 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 11:49:47.774 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-19 11:49:47.776 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=25
2025-09-19 11:49:47.780 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-19 11:49:47.780 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 11:49:47.786 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType89`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 11:49:47.789 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 12.9177ms
2025-09-19 11:49:47.789 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 11:49:47.791 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 11:49:47.793 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 11:49:47.793 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 25.8515ms
2025-09-19 11:49:47.795 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 19.4448ms
2025-09-19 11:49:47.798 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 11:49:47.799 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/ - 200 null application/json; charset=utf-8 34.4993ms
2025-09-19 11:49:54.084 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 11:49:54.086 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:54.087 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 3.525ms
2025-09-19 11:49:54.090 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 85
2025-09-19 11:49:54.093 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:49:54.094 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 11:49:54.095 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 11:49:54.101 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 11:49:54.106 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_dto_RecipientNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-19 11:49:54.111 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='75df7429-287c-406a-83d8-0dfa045b0093', @p0='2025-09-19T06:19:54.1093113Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Contacts" SET "LastContactedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 11:49:54.114 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='234324'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 11:49:54.158 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='da5ade68-a159-4ca1-9da2-b9c3a1b54a3a', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T06:19:54.1554583Z' (DbType = DateTime), @p8='❌ Provider configuration error.', @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='hiehekjekje' (Nullable = false), @p13=NULL, @p14=NULL, @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17='hiehekjekje', @p18=NULL (DbType = Guid), @p19='2025-09-19T06:19:54.1554585Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
2025-09-19 11:49:54.160 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 11:49:54.161 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 64.0365ms
2025-09-19 11:49:54.162 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 11:49:54.163 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/json; charset=utf-8 73.3473ms
2025-09-19 11:50:04.023 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 11:50:04.025 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:50:04.026 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 3.345ms
2025-09-19 11:50:04.028 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 85
2025-09-19 11:50:04.030 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:50:04.031 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 11:50:04.032 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 11:51:29.073 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 11:51:49.498 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_dto_RecipientNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-19 11:51:57.315 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='75df7429-287c-406a-83d8-0dfa045b0093', @p0='2025-09-19T06:21:54.9583874Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Contacts" SET "LastContactedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 11:52:11.760 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='234324'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 11:52:21.329 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p0='438c3c61-3630-4729-bcd1-84cee29dfe85', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T06:22:21.3085271Z' (DbType = DateTime), @p8='❌ Provider configuration error.', @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='hiehekjekje' (Nullable = false), @p13=NULL, @p14=NULL, @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17='hiehekjekje', @p18=NULL (DbType = Guid), @p19='2025-09-19T06:22:21.3085272Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
2025-09-19 11:52:21.331 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 11:52:21.332 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 137297.9677ms
2025-09-19 11:52:21.333 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 11:52:21.334 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/json; charset=utf-8 137305.3548ms
2025-09-19 11:54:47.940 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 11:54:47.942 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:54:47.943 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 3.5111ms
2025-09-19 11:54:47.946 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 85
2025-09-19 11:54:47.948 +05:30 [INF] CORS policy execution successful.
2025-09-19 11:54:47.949 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 11:54:47.950 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 11:55:21.606 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 11:55:36.562 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_dto_RecipientNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-19 11:55:42.013 +05:30 [INF] Executed DbCommand (42ms) [Parameters=[@p1='75df7429-287c-406a-83d8-0dfa045b0093', @p0='2025-09-19T06:25:39.4347175Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Contacts" SET "LastContactedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 11:55:47.061 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='234324'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 12:09:53.345 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 12:09:53.377 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 12:09:53.389 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 12:09:54.051 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 12:09:54.523 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 12:09:54.542 +05:30 [INF] ClickLogWorker started
2025-09-19 12:09:54.733 +05:30 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-19 12:09:54.739 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 12:09:54.741 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 12:09:54.742 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 12:09:54.743 +05:30 [INF] Hosting environment: Development
2025-09-19 12:09:54.745 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 12:09:54.753 +05:30 [INF] Executed DbCommand (58ms) [Parameters=[@__cutoff_0='2025-09-12T06:39:53.4726845Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-19 12:09:55.576 +05:30 [INF] ClickLogWorker stopped
2025-09-19 12:09:56.793 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 12:09:56.926 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 139.6645ms
2025-09-19 12:09:56.944 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 12:09:56.951 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.9774ms
2025-09-19 12:09:57.001 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 12:09:57.029 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.323ms
2025-09-19 12:09:57.176 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 12:09:57.397 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 220.4041ms
2025-09-19 12:10:27.120 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 12:10:27.123 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 12:10:27.158 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:10:27.161 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 41.376ms
2025-09-19 12:10:27.164 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 12:10:27.171 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:10:27.283 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 12:10:27.295 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 12:10:27.385 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-19 12:10:27.439 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 12:10:27.446 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 12:10:27.463 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 164.0004ms
2025-09-19 12:10:27.464 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 12:10:27.468 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 304.8221ms
2025-09-19 12:10:27.472 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 12:10:27.475 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:10:27.476 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.8515ms
2025-09-19 12:10:27.478 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 12:10:27.481 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:10:27.484 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 12:10:27.485 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 12:10:27.492 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 12:10:27.496 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 12:10:27.497 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.6643ms
2025-09-19 12:10:27.498 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 12:10:27.499 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.655ms
2025-09-19 12:10:27.532 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 12:10:27.534 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 12:10:27.534 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 12:10:27.536 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:10:27.539 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:10:27.543 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:10:27.543 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 9.5902ms
2025-09-19 12:10:27.544 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 204 null null 9.6375ms
2025-09-19 12:10:27.545 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 12:10:27.547 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 12:10:27.550 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 12:10:27.550 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 12:10:27.553 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:10:27.555 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:10:27.558 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:10:27.559 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 12:10:27.562 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 12:10:27.565 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 12:10:27.565 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 12:10:27.566 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:10:27.567 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 9.9168ms
2025-09-19 12:10:27.573 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 12:10:27.575 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 42.8254ms
2025-09-19 12:10:27.590 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-19 12:10:27.597 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='PINNACLE'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 12:10:27.600 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 12:10:27.610 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 40.2939ms
2025-09-19 12:10:27.613 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:10:27.614 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 200 null application/json; charset=utf-8 67.3211ms
2025-09-19 12:10:27.642 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-09-19 12:10:27.649 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 80.348ms
2025-09-19 12:10:27.650 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 12:10:27.651 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 101.411ms
2025-09-19 12:10:27.654 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:10:27.656 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:10:27.657 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 3.1936ms
2025-09-19 12:10:27.660 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:10:27.662 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:10:27.663 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:10:27.664 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:10:27.669 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 12:10:27.674 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 12:10:27.675 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 9.573ms
2025-09-19 12:10:27.677 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:10:27.678 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 17.8561ms
2025-09-19 12:10:27.681 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:10:27.684 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:10:27.686 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:10:27.687 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:10:27.693 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 12:10:27.696 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 12:10:27.697 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 8.6276ms
2025-09-19 12:10:27.699 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:10:27.700 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 18.7404ms
2025-09-19 12:10:35.584 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 12:10:35.584 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 12:10:35.587 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:10:35.589 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:10:35.590 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 6.1934ms
2025-09-19 12:10:35.590 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 204 null null 6.269ms
2025-09-19 12:10:35.593 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 12:10:35.595 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 12:10:35.597 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:10:35.598 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:10:35.599 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:10:35.600 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 12:10:35.600 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:10:35.601 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 12:10:35.606 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='PINNACLE'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 12:10:35.607 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-19 12:10:35.611 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 12:10:35.612 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-09-19 12:10:35.613 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 10.4247ms
2025-09-19 12:10:35.614 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 9.9896ms
2025-09-19 12:10:35.615 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:10:35.616 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 12:10:35.617 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 200 null application/json; charset=utf-8 23.8802ms
2025-09-19 12:10:35.618 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 22.6824ms
2025-09-19 12:10:35.623 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:10:35.625 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:10:35.626 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 2.7054ms
2025-09-19 12:10:35.628 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:10:35.630 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:10:35.631 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:10:35.632 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:10:35.637 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 12:10:35.639 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 12:10:35.640 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 6.372ms
2025-09-19 12:10:35.641 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:10:35.641 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:10:35.644 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:10:35.644 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 16.3546ms
2025-09-19 12:10:35.645 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:10:35.648 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:10:35.652 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 12:10:35.654 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 12:10:35.655 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 6.0522ms
2025-09-19 12:10:35.656 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:10:35.657 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 15.9355ms
2025-09-19 12:12:10.366 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:12:10.373 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:12:10.374 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 7.6375ms
2025-09-19 12:12:10.377 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - application/json 134
2025-09-19 12:12:10.379 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:12:10.380 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api)'
2025-09-19 12:12:10.384 +05:30 [INF] Route matched with {action = "Upsert", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Upsert(System.String, UpsertRequest) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:12:11.818 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
LIMIT 1
2025-09-19 12:12:11.832 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__providerForChild_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__providerForChild_1 AND w."PhoneNumberId" = @__phoneNumberId_2
LIMIT 1
2025-09-19 12:12:11.987 +05:30 [INF] Executed DbCommand (22ms) [Parameters=[@p0='f4cd845c-bf23-42f7-b866-9dbcc6766935', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='2025-09-19T06:42:11.7967733Z' (DbType = DateTime), @p3='True', @p4='True', @p5='673199269218077' (Nullable = false), @p6='META_CLOUD' (Nullable = false), @p7='First', @p8=NULL (DbType = DateTime), @p9='5551622077' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WhatsAppPhoneNumbers" ("Id", "BusinessId", "CreatedAt", "IsActive", "IsDefault", "PhoneNumberId", "Provider", "SenderDisplayName", "UpdatedAt", "WhatsAppBusinessNumber")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-19 12:12:12.028 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__providerForChild_1='META_CLOUD', @__entity_Id_2='f4cd845c-bf23-42f7-b866-9dbcc6766935'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" AS w
SET "IsDefault" = FALSE
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__providerForChild_1 AND w."Id" <> @__entity_Id_2
2025-09-19 12:12:12.042 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p3='c13c2c23-4ed0-4441-b5b2-6b2b581bdca3', @p0='673199269218077', @p1='2025-09-19T06:42:11.7967733Z' (Nullable = true) (DbType = DateTime), @p2='5551622077'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "PhoneNumberId" = @p0, "UpdatedAt" = @p1, "WhatsAppBusinessNumber" = @p2
WHERE "Id" = @p3;
2025-09-19 12:12:12.063 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber'.
2025-09-19 12:12:12.066 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api) in 1680.8556ms
2025-09-19 12:12:12.068 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api)'
2025-09-19 12:12:12.069 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 1692.1953ms
2025-09-19 12:12:15.048 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-09-19 12:12:15.051 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:12:15.052 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 3.3811ms
2025-09-19 12:12:15.055 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 566
2025-09-19 12:12:15.057 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:12:15.058 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 12:12:15.062 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 12:12:15.077 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__dto_Provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0 AND w."Provider" = @__dto_Provider_1
LIMIT 1
2025-09-19 12:12:15.083 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='c13c2c23-4ed0-4441-b5b2-6b2b581bdca3', @p0='2025-09-19T06:42:15.0813827Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 12:12:15.085 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 12:12:15.089 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 25.7544ms
2025-09-19 12:12:15.090 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 12:12:15.091 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 35.7657ms
2025-09-19 12:12:36.748 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - null null
2025-09-19 12:12:36.748 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 12:12:36.750 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:12:36.753 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:12:36.753 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - 204 null null 5.7158ms
2025-09-19 12:12:36.754 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 6.2939ms
2025-09-19 12:12:36.757 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 12:12:36.759 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/ - null null
2025-09-19 12:12:36.763 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:12:36.764 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:12:36.765 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 12:12:36.768 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 12:12:36.769 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 12:12:36.771 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-19 12:12:36.774 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=25
2025-09-19 12:12:36.785 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-19 12:12:36.789 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType89`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 12:12:36.797 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 24.3185ms
2025-09-19 12:12:36.799 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 12:12:36.800 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 42.9002ms
2025-09-19 12:12:36.811 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 12:12:36.851 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 12:12:36.886 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 12:12:36.895 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 124.158ms
2025-09-19 12:12:36.896 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 12:12:36.897 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/ - 200 null application/json; charset=utf-8 137.4549ms
2025-09-19 12:12:39.950 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 12:12:39.953 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:12:39.954 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 4.1312ms
2025-09-19 12:12:39.957 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 80
2025-09-19 12:12:39.961 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:12:39.962 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 12:12:39.965 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 12:13:03.161 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 12:13:19.910 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_dto_RecipientNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-19 12:13:24.891 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@p1='75df7429-287c-406a-83d8-0dfa045b0093', @p0='2025-09-19T06:43:22.6062890Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Contacts" SET "LastContactedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 12:13:37.912 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 12:13:43.642 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-19 12:14:05.286 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 12:14:05.306 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 12:14:07.290 +05:30 [INF] Received HTTP response headers after 1981.6075ms - 200
2025-09-19 12:14:07.292 +05:30 [INF] End processing HTTP request after 2007.3547ms - 200
2025-09-19 12:14:15.801 +05:30 [INF] Executed DbCommand (24ms) [Parameters=[@p0='2bfe1e44-f191-446e-9202-11cd3d9b2588', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T06:44:15.7198930Z' (DbType = DateTime), @p8=NULL, @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='dgdfgd' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREUyQjgyMDM0MUYxNkNFOEVDAA==', @p14='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREUyQjgyMDM0MUYxNkNFOEVDAA=="}]}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17='dgdfgd', @p18=NULL (DbType = Guid), @p19='2025-09-19T06:44:15.7199342Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
2025-09-19 12:14:15.812 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 12:14:15.815 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 95848.5418ms
2025-09-19 12:14:15.816 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 12:14:15.817 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 200 null application/json; charset=utf-8 95859.58ms
2025-09-19 12:14:33.753 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 12:14:33.756 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:14:33.757 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 3.8654ms
2025-09-19 12:14:33.761 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 86
2025-09-19 12:14:33.763 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:14:33.764 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 12:14:33.765 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 12:14:34.975 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 12:14:34.981 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_dto_RecipientNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-19 12:14:34.984 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='75df7429-287c-406a-83d8-0dfa045b0093', @p0='2025-09-19T06:44:34.9832107Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Contacts" SET "LastContactedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 12:14:34.988 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 12:14:34.992 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-19 12:14:34.997 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 12:14:34.998 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 12:14:35.913 +05:30 [INF] Received HTTP response headers after 913.8293ms - 200
2025-09-19 12:14:35.915 +05:30 [INF] End processing HTTP request after 917.2337ms - 200
2025-09-19 12:14:35.920 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='78438cde-006a-42ab-b54b-32fa2175f7bd', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T06:44:35.9167533Z' (DbType = DateTime), @p8=NULL, @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='dgdfgdfdfdsf' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODA5QTIzRDVCOUQxQzcyMTkwAA==', @p14='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODA5QTIzRDVCOUQxQzcyMTkwAA=="}]}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17='dgdfgdfdfdsf', @p18=NULL (DbType = Guid), @p19='2025-09-19T06:44:35.9167535Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
2025-09-19 12:14:35.922 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 12:14:35.924 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 2157.6123ms
2025-09-19 12:14:35.925 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 12:14:35.926 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 200 null application/json; charset=utf-8 2165.3146ms
2025-09-19 12:22:24.402 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 12:22:24.408 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 12:22:24.417 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:22:24.420 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:22:24.421 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 23.5144ms
2025-09-19 12:22:24.423 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 204 null null 14.5425ms
2025-09-19 12:22:24.435 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 12:22:24.440 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 12:22:24.445 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:22:24.448 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:22:24.450 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:22:24.451 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 12:22:24.452 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:22:24.453 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 12:22:24.588 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='PINNACLE'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 12:22:24.592 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 12:22:24.594 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 138.2601ms
2025-09-19 12:22:24.597 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:22:24.598 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 200 null application/json; charset=utf-8 163.3266ms
2025-09-19 12:22:24.652 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-19 12:22:24.657 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-09-19 12:22:24.659 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 199.9645ms
2025-09-19 12:22:24.662 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 12:22:24.663 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 223.0388ms
2025-09-19 12:22:24.670 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:22:24.674 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:22:24.675 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 5.998ms
2025-09-19 12:22:24.681 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:22:24.686 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:22:24.687 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:22:24.689 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:22:24.696 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 12:22:24.703 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 12:22:24.731 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 38.6722ms
2025-09-19 12:22:24.732 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:22:24.737 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:22:24.742 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:22:24.743 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 61.9365ms
2025-09-19 12:22:24.745 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:22:24.752 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:22:24.759 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 12:22:24.764 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 12:22:24.768 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 13.6174ms
2025-09-19 12:22:24.771 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:22:24.773 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 40.9052ms
2025-09-19 12:22:27.465 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/f4cd845c-bf23-42f7-b866-9dbcc6766935 - null null
2025-09-19 12:22:27.470 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:22:27.472 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/f4cd845c-bf23-42f7-b866-9dbcc6766935 - 204 null null 6.3597ms
2025-09-19 12:22:27.477 +05:30 [INF] Request starting HTTP/1.1 DELETE http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/f4cd845c-bf23-42f7-b866-9dbcc6766935 - null null
2025-09-19 12:22:27.481 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:22:27.483 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Delete (xbytechat.api)'
2025-09-19 12:22:27.490 +05:30 [INF] Route matched with {action = "Delete", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(System.String, System.Guid) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:22:27.516 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='f4cd845c-bf23-42f7-b866-9dbcc6766935', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."Id" = @__id_0 AND w."BusinessId" = @__businessId_1 AND lower(w."Provider") = @__ToLower_2
LIMIT 1
2025-09-19 12:22:27.554 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[@p0='f4cd845c-bf23-42f7-b866-9dbcc6766935'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "WhatsAppPhoneNumbers"
WHERE "Id" = @p0;
2025-09-19 12:22:27.567 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-19 12:22:27.569 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Delete (xbytechat.api) in 76.1218ms
2025-09-19 12:22:27.571 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Delete (xbytechat.api)'
2025-09-19 12:22:27.573 +05:30 [INF] Request finished HTTP/1.1 DELETE http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/f4cd845c-bf23-42f7-b866-9dbcc6766935 - 204 null null 96.5587ms
2025-09-19 12:22:29.566 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-09-19 12:22:29.571 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:22:29.572 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 6.4177ms
2025-09-19 12:22:29.578 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 566
2025-09-19 12:22:29.585 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:22:29.587 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 12:22:29.589 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 12:22:29.598 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__dto_Provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0 AND w."Provider" = @__dto_Provider_1
LIMIT 1
2025-09-19 12:22:29.625 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[@p1='c13c2c23-4ed0-4441-b5b2-6b2b581bdca3', @p0='2025-09-19T06:52:29.6040396Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 12:22:29.630 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 12:22:29.633 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 40.4373ms
2025-09-19 12:22:29.635 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 12:22:29.637 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 58.7673ms
2025-09-19 12:22:35.332 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - null null
2025-09-19 12:22:35.334 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 12:22:35.340 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:22:35.343 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:22:35.345 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - 204 null null 12.4212ms
2025-09-19 12:22:35.346 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 11.5952ms
2025-09-19 12:22:35.350 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 12:22:35.355 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/ - null null
2025-09-19 12:22:35.359 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:22:35.362 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:22:35.364 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 12:22:35.365 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 12:22:35.366 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-19 12:22:35.368 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 12:22:35.376 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=25
2025-09-19 12:22:35.377 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-19 12:22:35.384 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 12:22:35.387 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType89`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 12:22:35.393 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 23.2622ms
2025-09-19 12:22:35.396 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 12:22:35.396 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 12:22:35.397 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 46.9652ms
2025-09-19 12:22:35.401 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 12:22:35.408 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 34.7136ms
2025-09-19 12:22:35.411 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 12:22:35.413 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/ - 200 null application/json; charset=utf-8 58.0662ms
2025-09-19 12:22:39.277 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 12:22:39.281 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:22:39.282 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 5.4344ms
2025-09-19 12:22:39.287 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 80
2025-09-19 12:22:39.292 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:22:39.294 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 12:22:39.295 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 12:22:40.725 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 12:22:40.733 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_dto_RecipientNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-19 12:22:40.743 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='75df7429-287c-406a-83d8-0dfa045b0093', @p0='2025-09-19T06:52:40.7408073Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Contacts" SET "LastContactedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 12:22:40.749 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 12:22:40.834 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='5ae28ecb-d380-4142-ad3f-11d9d23a6541', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T06:52:40.8291378Z' (DbType = DateTime), @p8='❌ Provider configuration error.', @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='dfsfds' (Nullable = false), @p13=NULL, @p14=NULL, @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17='dfsfds', @p18=NULL (DbType = Guid), @p19='2025-09-19T06:52:40.8291380Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
2025-09-19 12:22:40.838 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 12:22:40.840 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 1542.2993ms
2025-09-19 12:22:40.842 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 12:22:40.844 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/json; charset=utf-8 1557.1601ms
2025-09-19 12:25:20.764 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 12:25:20.764 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 12:25:20.777 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:25:20.768 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:25:20.783 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 204 null null 18.9238ms
2025-09-19 12:25:20.789 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 21.3778ms
2025-09-19 12:25:20.794 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 12:25:20.797 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 12:25:20.800 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:25:20.802 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:25:20.803 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:25:20.804 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 12:25:20.805 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:25:20.806 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 12:25:20.811 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='PINNACLE'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 12:25:20.821 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-19 12:25:20.823 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 12:25:20.825 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-09-19 12:25:20.826 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 18.1063ms
2025-09-19 12:25:20.828 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 16.2609ms
2025-09-19 12:25:20.829 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:25:20.831 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 12:25:20.832 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 200 null application/json; charset=utf-8 37.5305ms
2025-09-19 12:25:20.833 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 35.7372ms
2025-09-19 12:25:20.840 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:25:20.843 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:25:20.844 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 3.9737ms
2025-09-19 12:25:20.847 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:25:20.850 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:25:20.852 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:25:20.853 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:25:20.857 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 12:25:20.862 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 12:25:20.863 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 7.8809ms
2025-09-19 12:25:20.865 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:25:20.865 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:25:20.866 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 18.7091ms
2025-09-19 12:25:20.870 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:25:20.874 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:25:20.876 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:25:20.881 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 12:25:20.885 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 12:25:20.886 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 8.5161ms
2025-09-19 12:25:20.888 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:25:20.890 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 24.6204ms
2025-09-19 12:27:16.059 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:27:16.072 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:27:16.073 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 13.9156ms
2025-09-19 12:27:16.085 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - application/json 129
2025-09-19 12:27:16.090 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:27:16.091 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api)'
2025-09-19 12:27:16.093 +05:30 [INF] Route matched with {action = "Upsert", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Upsert(System.String, UpsertRequest) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:27:18.810 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
LIMIT 1
2025-09-19 12:27:18.817 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__providerForChild_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__providerForChild_1 AND w."PhoneNumberId" = @__phoneNumberId_2
LIMIT 1
2025-09-19 12:27:18.825 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='e7abb04c-eaee-4f66-9234-6ef058499674', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='2025-09-19T06:57:18.8049868Z' (DbType = DateTime), @p3='True', @p4='True', @p5='673199269218077' (Nullable = false), @p6='META_CLOUD' (Nullable = false), @p7='', @p8=NULL (DbType = DateTime), @p9='5551622077' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WhatsAppPhoneNumbers" ("Id", "BusinessId", "CreatedAt", "IsActive", "IsDefault", "PhoneNumberId", "Provider", "SenderDisplayName", "UpdatedAt", "WhatsAppBusinessNumber")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-19 12:27:18.835 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__providerForChild_1='META_CLOUD', @__entity_Id_2='e7abb04c-eaee-4f66-9234-6ef058499674'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" AS w
SET "IsDefault" = FALSE
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__providerForChild_1 AND w."Id" <> @__entity_Id_2
2025-09-19 12:27:18.841 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='c13c2c23-4ed0-4441-b5b2-6b2b581bdca3', @p0='2025-09-19T06:57:18.8049868Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 12:27:18.864 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber'.
2025-09-19 12:27:18.866 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api) in 2770.4459ms
2025-09-19 12:27:18.868 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api)'
2025-09-19 12:27:18.870 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 2785.1728ms
2025-09-19 12:27:35.235 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:27:35.240 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:27:35.242 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 7.536ms
2025-09-19 12:27:35.250 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - application/json 130
2025-09-19 12:27:35.255 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:27:35.257 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api)'
2025-09-19 12:27:35.259 +05:30 [INF] Route matched with {action = "Upsert", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Upsert(System.String, UpsertRequest) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:27:37.758 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
LIMIT 1
2025-09-19 12:27:37.763 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__providerForChild_1='META_CLOUD', @__phoneNumberId_2='673199269218078'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__providerForChild_1 AND w."PhoneNumberId" = @__phoneNumberId_2
LIMIT 1
2025-09-19 12:27:37.770 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='d8257b00-6960-4016-ab12-3d89fa80e77a', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='2025-09-19T06:57:37.6454784Z' (DbType = DateTime), @p3='True', @p4='False', @p5='673199269218078' (Nullable = false), @p6='META_CLOUD' (Nullable = false), @p7='', @p8=NULL (DbType = DateTime), @p9='5551622078' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WhatsAppPhoneNumbers" ("Id", "BusinessId", "CreatedAt", "IsActive", "IsDefault", "PhoneNumberId", "Provider", "SenderDisplayName", "UpdatedAt", "WhatsAppBusinessNumber")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-19 12:27:37.775 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber'.
2025-09-19 12:27:37.777 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api) in 2515.7225ms
2025-09-19 12:27:37.778 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api)'
2025-09-19 12:27:37.780 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 2529.1137ms
2025-09-19 12:27:40.279 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/d8257b00-6960-4016-ab12-3d89fa80e77a/default - null null
2025-09-19 12:27:40.283 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:27:40.285 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/d8257b00-6960-4016-ab12-3d89fa80e77a/default - 204 null null 5.6858ms
2025-09-19 12:27:40.290 +05:30 [INF] Request starting HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/d8257b00-6960-4016-ab12-3d89fa80e77a/default - application/json 4
2025-09-19 12:27:40.293 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:27:40.295 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 12:27:40.301 +05:30 [INF] Route matched with {action = "SetDefault", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetDefault(System.String, System.Guid) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:27:40.312 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='d8257b00-6960-4016-ab12-3d89fa80e77a', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."Id" = @__id_0 AND w."BusinessId" = @__businessId_1 AND lower(w."Provider") = @__ToLower_2
LIMIT 1
2025-09-19 12:27:40.321 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" AS w
SET "IsDefault" = FALSE
WHERE w."BusinessId" = @__businessId_0 AND lower(w."Provider") = @__ToLower_1
2025-09-19 12:27:40.328 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='d8257b00-6960-4016-ab12-3d89fa80e77a', @p0='True', @p1='2025-09-19T06:57:40.3245248Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" SET "IsDefault" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-09-19 12:27:40.354 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-19 12:27:40.355 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api) in 51.1997ms
2025-09-19 12:27:40.357 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 12:27:40.359 +05:30 [INF] Request finished HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/d8257b00-6960-4016-ab12-3d89fa80e77a/default - 204 null null 69.0947ms
2025-09-19 12:27:43.537 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:27:43.542 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:27:43.543 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 5.6361ms
2025-09-19 12:27:43.551 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - application/json 173
2025-09-19 12:27:43.555 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:27:43.556 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api)'
2025-09-19 12:27:43.558 +05:30 [INF] Route matched with {action = "Upsert", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Upsert(System.String, UpsertRequest) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:27:46.398 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
LIMIT 1
2025-09-19 12:27:46.408 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__providerForChild_1='META_CLOUD', @__phoneNumberId_2='673199269218078'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__providerForChild_1 AND w."PhoneNumberId" = @__phoneNumberId_2
LIMIT 1
2025-09-19 12:27:46.415 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='d8257b00-6960-4016-ab12-3d89fa80e77a', @p0='2025-09-19T06:57:46.3889758Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 12:27:46.420 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__providerForChild_1='META_CLOUD', @__entity_Id_2='d8257b00-6960-4016-ab12-3d89fa80e77a'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" AS w
SET "IsDefault" = FALSE
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__providerForChild_1 AND w."Id" <> @__entity_Id_2
2025-09-19 12:27:46.429 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p3='c13c2c23-4ed0-4441-b5b2-6b2b581bdca3', @p0='673199269218078', @p1='2025-09-19T06:57:46.3889758Z' (Nullable = true) (DbType = DateTime), @p2='5551622078'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "PhoneNumberId" = @p0, "UpdatedAt" = @p1, "WhatsAppBusinessNumber" = @p2
WHERE "Id" = @p3;
2025-09-19 12:27:46.446 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber'.
2025-09-19 12:27:46.448 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api) in 2887.6408ms
2025-09-19 12:27:46.450 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api)'
2025-09-19 12:27:46.452 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 2900.9189ms
2025-09-19 12:28:06.954 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - null null
2025-09-19 12:28:06.954 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 12:28:06.958 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:28:06.960 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:28:06.962 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - 204 null null 8.5587ms
2025-09-19 12:28:06.963 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 8.4712ms
2025-09-19 12:28:06.975 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 12:28:06.979 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/ - null null
2025-09-19 12:28:06.983 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:28:06.986 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:28:06.988 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 12:28:06.989 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 12:28:06.991 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-19 12:28:06.992 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 12:28:07.003 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-19 12:28:07.003 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=25
2025-09-19 12:28:07.007 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType89`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 12:28:07.013 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 12:28:07.015 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 18.9953ms
2025-09-19 12:28:07.022 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 12:28:07.023 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 12:28:07.024 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 49.0228ms
2025-09-19 12:28:07.028 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 12:28:07.034 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 33.1061ms
2025-09-19 12:28:07.036 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 12:28:07.038 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/ - 200 null application/json; charset=utf-8 59.0571ms
2025-09-19 12:28:13.539 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 12:28:13.545 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:28:13.547 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 7.5947ms
2025-09-19 12:28:13.552 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 78
2025-09-19 12:28:13.559 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:28:13.561 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 12:28:13.563 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 12:28:16.380 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 12:28:16.385 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_dto_RecipientNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-19 12:28:16.392 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='75df7429-287c-406a-83d8-0dfa045b0093', @p0='2025-09-19T06:58:16.3894462Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Contacts" SET "LastContactedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 12:28:16.396 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218078'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 12:28:16.403 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-19 12:28:16.407 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218078/messages
2025-09-19 12:28:16.409 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218078/messages
2025-09-19 12:28:17.241 +05:30 [INF] Received HTTP response headers after 829.5625ms - 400
2025-09-19 12:28:17.243 +05:30 [INF] End processing HTTP request after 835.4791ms - 400
2025-09-19 12:28:17.245 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"Unsupported post request. Object with ID '673199269218078' does not exist, cannot be loaded due to missing permissions, or does not support this operation. Please read the Graph API documentation at https:\/\/developers.facebook.com\/docs\/graph-api","type":"GraphMethodException","code":100,"error_subcode":33,"fbtrace_id":"AASMEnuLiiMomLUzz16UH70"}}
2025-09-19 12:28:17.252 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='a6b61cae-d337-473a-96a6-e64d3f6da103', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T06:58:17.2482662Z' (DbType = DateTime), @p8='❌ WhatsApp API returned an error.', @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='grtt' (Nullable = false), @p13=NULL, @p14='{"error":{"message":"Unsupported post request. Object with ID '673199269218078' does not exist, cannot be loaded due to missing permissions, or does not support this operation. Please read the Graph API documentation at https:\/\/developers.facebook.com\/docs\/graph-api","type":"GraphMethodException","code":100,"error_subcode":33,"fbtrace_id":"AASMEnuLiiMomLUzz16UH70"}}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17='grtt', @p18=NULL (DbType = Guid), @p19='2025-09-19T06:58:17.2482664Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
2025-09-19 12:28:17.257 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 12:28:17.259 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 3692.2778ms
2025-09-19 12:28:17.260 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 12:28:17.262 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/json; charset=utf-8 3709.9427ms
2025-09-19 12:28:31.266 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 12:28:31.266 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 12:28:31.269 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:28:31.272 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:28:31.273 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 6.4659ms
2025-09-19 12:28:31.273 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 204 null null 6.9899ms
2025-09-19 12:28:31.276 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 12:28:31.279 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 12:28:31.281 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:28:31.282 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:28:31.283 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:28:31.284 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 12:28:31.284 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:28:31.285 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 12:28:31.288 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='PINNACLE'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 12:28:31.294 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 12:28:31.298 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 12.1985ms
2025-09-19 12:28:31.299 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:28:31.300 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 200 null application/json; charset=utf-8 23.9897ms
2025-09-19 12:28:31.344 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-19 12:28:31.346 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-09-19 12:28:31.347 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 58.0098ms
2025-09-19 12:28:31.347 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 12:28:31.348 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 69.6049ms
2025-09-19 12:28:31.351 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:28:31.352 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:28:31.353 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 2.207ms
2025-09-19 12:28:31.355 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:28:31.357 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:28:31.358 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:28:31.358 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:28:31.361 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 12:28:31.364 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 12:28:31.365 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 5.1383ms
2025-09-19 12:28:31.366 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:28:31.366 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 11.4192ms
2025-09-19 12:28:31.370 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:28:31.372 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:28:31.373 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:28:31.374 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:28:31.378 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 12:28:31.380 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 12:28:31.381 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 5.4439ms
2025-09-19 12:28:31.381 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:28:31.382 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 12.8042ms
2025-09-19 12:28:33.282 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/d8257b00-6960-4016-ab12-3d89fa80e77a/default - null null
2025-09-19 12:28:33.284 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:28:33.284 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/d8257b00-6960-4016-ab12-3d89fa80e77a/default - 204 null null 2.8416ms
2025-09-19 12:28:33.287 +05:30 [INF] Request starting HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/d8257b00-6960-4016-ab12-3d89fa80e77a/default - application/json 4
2025-09-19 12:28:33.289 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:28:33.290 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 12:28:33.291 +05:30 [INF] Route matched with {action = "SetDefault", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetDefault(System.String, System.Guid) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:28:33.294 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='d8257b00-6960-4016-ab12-3d89fa80e77a', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."Id" = @__id_0 AND w."BusinessId" = @__businessId_1 AND lower(w."Provider") = @__ToLower_2
LIMIT 1
2025-09-19 12:28:33.297 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" AS w
SET "IsDefault" = FALSE
WHERE w."BusinessId" = @__businessId_0 AND lower(w."Provider") = @__ToLower_1
2025-09-19 12:28:33.301 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='d8257b00-6960-4016-ab12-3d89fa80e77a', @p0='2025-09-19T06:58:33.2992787Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 12:28:33.303 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-19 12:28:33.304 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api) in 12.3255ms
2025-09-19 12:28:33.305 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 12:28:33.306 +05:30 [INF] Request finished HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/d8257b00-6960-4016-ab12-3d89fa80e77a/default - 204 null null 19.185ms
2025-09-19 12:28:41.044 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - null null
2025-09-19 12:28:41.046 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 12:28:41.046 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:28:41.048 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:28:41.049 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - 204 null null 5.3981ms
2025-09-19 12:28:41.050 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 3.6896ms
2025-09-19 12:28:41.052 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 12:28:41.055 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/ - null null
2025-09-19 12:28:41.056 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:28:41.058 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:28:41.059 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 12:28:41.059 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 12:28:41.060 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-19 12:28:41.060 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 12:28:41.065 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-19 12:28:41.066 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=25
2025-09-19 12:28:41.067 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType89`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 12:28:41.069 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 12:28:41.071 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 9.004ms
2025-09-19 12:28:41.073 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 12:28:41.074 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 21.9889ms
2025-09-19 12:28:41.075 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 12:28:41.078 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 12:28:41.079 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 14.7119ms
2025-09-19 12:28:41.080 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 12:28:41.081 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/ - 200 null application/json; charset=utf-8 25.9031ms
2025-09-19 12:28:44.941 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 12:28:44.943 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:28:44.944 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 3.3972ms
2025-09-19 12:28:44.947 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 80
2025-09-19 12:28:44.949 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:28:44.950 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 12:28:44.951 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 12:28:47.000 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 12:28:47.004 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_dto_RecipientNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-19 12:28:47.026 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p1='75df7429-287c-406a-83d8-0dfa045b0093', @p0='2025-09-19T06:58:47.0066297Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Contacts" SET "LastContactedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 12:28:47.030 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218078'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 12:28:47.033 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-19 12:28:47.035 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218078/messages
2025-09-19 12:28:47.035 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218078/messages
2025-09-19 12:28:47.403 +05:30 [INF] Received HTTP response headers after 367.0802ms - 400
2025-09-19 12:28:47.405 +05:30 [INF] End processing HTTP request after 370.1768ms - 400
2025-09-19 12:28:47.406 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"Unsupported post request. Object with ID '673199269218078' does not exist, cannot be loaded due to missing permissions, or does not support this operation. Please read the Graph API documentation at https:\/\/developers.facebook.com\/docs\/graph-api","type":"GraphMethodException","code":100,"error_subcode":33,"fbtrace_id":"AnrPoCV5kvn5rIzJyGkrZu_"}}
2025-09-19 12:28:47.421 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@p0='f39cd14f-b3d9-4fa7-8c14-82bf7ac803df', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T06:58:47.4073422Z' (DbType = DateTime), @p8='❌ WhatsApp API returned an error.', @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='sadada' (Nullable = false), @p13=NULL, @p14='{"error":{"message":"Unsupported post request. Object with ID '673199269218078' does not exist, cannot be loaded due to missing permissions, or does not support this operation. Please read the Graph API documentation at https:\/\/developers.facebook.com\/docs\/graph-api","type":"GraphMethodException","code":100,"error_subcode":33,"fbtrace_id":"AnrPoCV5kvn5rIzJyGkrZu_"}}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17='sadada', @p18=NULL (DbType = Guid), @p19='2025-09-19T06:58:47.4073424Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
2025-09-19 12:28:47.424 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 12:28:47.425 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 2472.4814ms
2025-09-19 12:28:47.426 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 12:28:47.427 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/json; charset=utf-8 2479.945ms
2025-09-19 12:29:01.572 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 12:29:01.572 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 12:29:01.575 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:29:01.577 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:29:01.577 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 5.5415ms
2025-09-19 12:29:01.578 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 204 null null 5.5491ms
2025-09-19 12:29:01.580 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 12:29:01.583 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 12:29:01.586 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:29:01.588 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:29:01.589 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:29:01.589 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 12:29:01.590 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:29:01.591 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 12:29:01.594 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='PINNACLE'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 12:29:01.596 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-19 12:29:01.597 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 12:29:01.599 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-09-19 12:29:01.600 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 7.9832ms
2025-09-19 12:29:01.601 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 6.7741ms
2025-09-19 12:29:01.602 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:29:01.603 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 12:29:01.603 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 200 null application/json; charset=utf-8 23.193ms
2025-09-19 12:29:01.604 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 21.2881ms
2025-09-19 12:29:01.608 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:29:01.610 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:29:01.610 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 2.018ms
2025-09-19 12:29:01.612 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:29:01.614 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:29:01.615 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:29:01.615 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:29:01.619 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 12:29:01.621 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 12:29:01.622 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 5.5806ms
2025-09-19 12:29:01.623 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:29:01.624 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 11.6002ms
2025-09-19 12:29:01.626 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:29:01.629 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:29:01.630 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:29:01.631 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:29:01.634 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 12:29:01.637 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 12:29:01.638 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 5.3234ms
2025-09-19 12:29:01.639 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:29:01.639 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 12.9925ms
2025-09-19 12:29:13.925 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/d8257b00-6960-4016-ab12-3d89fa80e77a/default - null null
2025-09-19 12:29:13.928 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:29:13.928 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/d8257b00-6960-4016-ab12-3d89fa80e77a/default - 204 null null 3.0282ms
2025-09-19 12:29:13.931 +05:30 [INF] Request starting HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/d8257b00-6960-4016-ab12-3d89fa80e77a/default - application/json 4
2025-09-19 12:29:13.933 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:29:13.934 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 12:29:13.935 +05:30 [INF] Route matched with {action = "SetDefault", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetDefault(System.String, System.Guid) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:29:13.938 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='d8257b00-6960-4016-ab12-3d89fa80e77a', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."Id" = @__id_0 AND w."BusinessId" = @__businessId_1 AND lower(w."Provider") = @__ToLower_2
LIMIT 1
2025-09-19 12:29:13.942 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" AS w
SET "IsDefault" = FALSE
WHERE w."BusinessId" = @__businessId_0 AND lower(w."Provider") = @__ToLower_1
2025-09-19 12:29:13.945 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='d8257b00-6960-4016-ab12-3d89fa80e77a', @p0='True', @p1='2025-09-19T06:59:13.9441262Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" SET "IsDefault" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-09-19 12:29:13.948 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-19 12:29:13.949 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api) in 12.9356ms
2025-09-19 12:29:13.950 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 12:29:13.951 +05:30 [INF] Request finished HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/d8257b00-6960-4016-ab12-3d89fa80e77a/default - 204 null null 19.9801ms
2025-09-19 12:29:15.767 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-09-19 12:29:15.769 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:29:15.769 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 2.471ms
2025-09-19 12:29:15.772 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 566
2025-09-19 12:29:15.774 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:29:15.775 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 12:29:15.776 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 12:29:15.779 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__dto_Provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0 AND w."Provider" = @__dto_Provider_1
LIMIT 1
2025-09-19 12:29:15.800 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@p1='c13c2c23-4ed0-4441-b5b2-6b2b581bdca3', @p0='2025-09-19T06:59:15.7817998Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 12:29:15.802 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 12:29:15.803 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 26.1848ms
2025-09-19 12:29:15.805 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 12:29:15.805 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 33.5597ms
2025-09-19 12:29:27.424 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/e7abb04c-eaee-4f66-9234-6ef058499674/default - null null
2025-09-19 12:29:27.426 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:29:27.427 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/e7abb04c-eaee-4f66-9234-6ef058499674/default - 204 null null 2.5424ms
2025-09-19 12:29:27.429 +05:30 [INF] Request starting HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/e7abb04c-eaee-4f66-9234-6ef058499674/default - application/json 4
2025-09-19 12:29:27.431 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:29:27.432 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 12:29:27.433 +05:30 [INF] Route matched with {action = "SetDefault", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetDefault(System.String, System.Guid) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:29:27.436 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='e7abb04c-eaee-4f66-9234-6ef058499674', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."Id" = @__id_0 AND w."BusinessId" = @__businessId_1 AND lower(w."Provider") = @__ToLower_2
LIMIT 1
2025-09-19 12:29:27.440 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" AS w
SET "IsDefault" = FALSE
WHERE w."BusinessId" = @__businessId_0 AND lower(w."Provider") = @__ToLower_1
2025-09-19 12:29:27.443 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='e7abb04c-eaee-4f66-9234-6ef058499674', @p0='True', @p1='2025-09-19T06:59:27.4416289Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" SET "IsDefault" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-09-19 12:29:27.446 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-19 12:29:27.447 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api) in 12.9454ms
2025-09-19 12:29:27.448 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 12:29:27.449 +05:30 [INF] Request finished HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/e7abb04c-eaee-4f66-9234-6ef058499674/default - 204 null null 20.01ms
2025-09-19 12:29:29.104 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-09-19 12:29:29.106 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:29:29.106 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 2.6548ms
2025-09-19 12:29:29.109 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 566
2025-09-19 12:29:29.111 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:29:29.112 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 12:29:29.113 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 12:29:29.116 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__dto_Provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0 AND w."Provider" = @__dto_Provider_1
LIMIT 1
2025-09-19 12:29:29.139 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p1='c13c2c23-4ed0-4441-b5b2-6b2b581bdca3', @p0='2025-09-19T06:59:29.1196085Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 12:29:29.141 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 12:29:29.142 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 27.4016ms
2025-09-19 12:29:29.143 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 12:29:29.144 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 34.8487ms
2025-09-19 12:29:38.489 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - null null
2025-09-19 12:29:38.491 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:29:38.491 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - 204 null null 2.8497ms
2025-09-19 12:29:38.492 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 12:29:38.495 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/ - null null
2025-09-19 12:29:38.497 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:29:38.498 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:29:38.499 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 7.3585ms
2025-09-19 12:29:38.500 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 12:29:38.502 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 12:29:38.503 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 12:29:38.505 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:29:38.506 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=25
2025-09-19 12:29:38.507 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 12:29:38.510 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 12:29:38.510 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-19 12:29:38.514 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 12:29:38.516 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-19 12:29:38.517 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 12:29:38.518 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType89`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 12:29:38.519 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 13.6712ms
2025-09-19 12:29:38.520 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 6.3415ms
2025-09-19 12:29:38.521 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 12:29:38.522 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 12:29:38.523 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/ - 200 null application/json; charset=utf-8 28.5952ms
2025-09-19 12:29:38.524 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 22.301ms
2025-09-19 12:29:43.997 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 12:29:44.000 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:29:44.000 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 3.5392ms
2025-09-19 12:29:44.003 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 79
2025-09-19 12:29:44.005 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:29:44.006 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 12:29:44.007 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 12:29:46.291 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 12:29:46.295 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_dto_RecipientNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-19 12:29:46.299 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='75df7429-287c-406a-83d8-0dfa045b0093', @p0='2025-09-19T06:59:46.2975383Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Contacts" SET "LastContactedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 12:29:46.301 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218078'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 12:29:46.304 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-19 12:29:46.306 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218078/messages
2025-09-19 12:29:46.307 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218078/messages
2025-09-19 12:29:46.648 +05:30 [INF] Received HTTP response headers after 340.3309ms - 400
2025-09-19 12:29:46.649 +05:30 [INF] End processing HTTP request after 343.0897ms - 400
2025-09-19 12:29:46.650 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"Unsupported post request. Object with ID '673199269218078' does not exist, cannot be loaded due to missing permissions, or does not support this operation. Please read the Graph API documentation at https:\/\/developers.facebook.com\/docs\/graph-api","type":"GraphMethodException","code":100,"error_subcode":33,"fbtrace_id":"AqXyUCGZ4Ou7ZNAscPVwyhP"}}
2025-09-19 12:29:46.672 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p0='e9df71c3-f9ea-4a7e-be69-c3bd879c0bd4', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T06:59:46.6516829Z' (DbType = DateTime), @p8='❌ WhatsApp API returned an error.', @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='adasd' (Nullable = false), @p13=NULL, @p14='{"error":{"message":"Unsupported post request. Object with ID '673199269218078' does not exist, cannot be loaded due to missing permissions, or does not support this operation. Please read the Graph API documentation at https:\/\/developers.facebook.com\/docs\/graph-api","type":"GraphMethodException","code":100,"error_subcode":33,"fbtrace_id":"AqXyUCGZ4Ou7ZNAscPVwyhP"}}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17='adasd', @p18=NULL (DbType = Guid), @p19='2025-09-19T06:59:46.6516831Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
2025-09-19 12:29:46.674 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 12:29:46.675 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 2666.8035ms
2025-09-19 12:29:46.676 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 12:29:46.677 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/json; charset=utf-8 2674.0708ms
2025-09-19 12:30:23.254 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - null null
2025-09-19 12:30:23.263 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 12:30:23.267 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:30:23.269 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:30:23.270 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - 204 null null 15.9552ms
2025-09-19 12:30:23.271 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 7.9888ms
2025-09-19 12:30:23.275 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 12:30:23.281 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/ - null null
2025-09-19 12:30:23.283 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:30:23.285 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:30:23.286 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 12:30:23.286 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 12:30:23.287 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-19 12:30:23.288 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 12:30:23.291 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-19 12:30:23.292 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=25
2025-09-19 12:30:23.294 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType89`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 12:30:23.297 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 12:30:23.298 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 9.3981ms
2025-09-19 12:30:23.302 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 12:30:23.302 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 12:30:23.304 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 12:30:23.305 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 29.76ms
2025-09-19 12:30:23.306 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 14.0504ms
2025-09-19 12:30:23.309 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 12:30:23.310 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/ - 200 null application/json; charset=utf-8 29.5604ms
2025-09-19 12:30:30.520 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 12:30:30.522 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:30:30.523 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 2.8533ms
2025-09-19 12:30:30.525 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 81
2025-09-19 12:30:30.528 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:30:30.529 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 12:30:30.530 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 12:30:32.821 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 12:30:32.826 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_dto_RecipientNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-19 12:30:32.830 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='75df7429-287c-406a-83d8-0dfa045b0093', @p0='2025-09-19T07:00:32.8287321Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Contacts" SET "LastContactedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 12:30:32.833 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218078'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 12:30:32.837 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-19 12:30:32.839 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218078/messages
2025-09-19 12:30:32.840 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218078/messages
2025-09-19 12:30:33.518 +05:30 [INF] Received HTTP response headers after 677.2939ms - 400
2025-09-19 12:30:33.520 +05:30 [INF] End processing HTTP request after 681.1124ms - 400
2025-09-19 12:30:33.521 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"Unsupported post request. Object with ID '673199269218078' does not exist, cannot be loaded due to missing permissions, or does not support this operation. Please read the Graph API documentation at https:\/\/developers.facebook.com\/docs\/graph-api","type":"GraphMethodException","code":100,"error_subcode":33,"fbtrace_id":"ADAa4g2LfehXSyc567HciZL"}}
2025-09-19 12:30:33.543 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='8ffc483f-d0dd-4f57-bb6c-4bf6f7ab49e7', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T07:00:33.5403321Z' (DbType = DateTime), @p8='❌ WhatsApp API returned an error.', @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='zdfzvzx' (Nullable = false), @p13=NULL, @p14='{"error":{"message":"Unsupported post request. Object with ID '673199269218078' does not exist, cannot be loaded due to missing permissions, or does not support this operation. Please read the Graph API documentation at https:\/\/developers.facebook.com\/docs\/graph-api","type":"GraphMethodException","code":100,"error_subcode":33,"fbtrace_id":"ADAa4g2LfehXSyc567HciZL"}}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17='zdfzvzx', @p18=NULL (DbType = Guid), @p19='2025-09-19T07:00:33.5403322Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
2025-09-19 12:30:33.545 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 12:30:33.547 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 3015.5393ms
2025-09-19 12:30:33.548 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 12:30:33.549 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/json; charset=utf-8 3023.3633ms
2025-09-19 12:30:37.547 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 12:30:37.547 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 12:30:37.549 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:30:37.551 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:30:37.552 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 5.1209ms
2025-09-19 12:30:37.553 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 204 null null 5.5742ms
2025-09-19 12:30:37.555 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 12:30:37.558 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 12:30:37.560 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:30:37.562 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:30:37.563 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:30:37.563 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 12:30:37.564 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:30:37.565 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 12:30:37.568 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='PINNACLE'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 12:30:37.571 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-19 12:30:37.573 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 12:30:37.574 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-09-19 12:30:37.575 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 8.8951ms
2025-09-19 12:30:37.576 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 7.1963ms
2025-09-19 12:30:37.577 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:30:37.578 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 12:30:37.579 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 200 null application/json; charset=utf-8 23.2714ms
2025-09-19 12:30:37.579 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 21.213ms
2025-09-19 12:30:37.584 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:30:37.586 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:30:37.587 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 2.3392ms
2025-09-19 12:30:37.589 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:30:37.591 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:30:37.592 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:30:37.593 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:30:37.596 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 12:30:37.598 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 12:30:37.599 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 5.3479ms
2025-09-19 12:30:37.600 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:30:37.601 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 11.9629ms
2025-09-19 12:30:37.607 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:30:37.610 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:30:37.611 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:30:37.612 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:30:37.616 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 12:30:37.619 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 12:30:37.620 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 5.7597ms
2025-09-19 12:30:37.621 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:30:37.622 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 14.3553ms
2025-09-19 12:30:40.220 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/d8257b00-6960-4016-ab12-3d89fa80e77a - null null
2025-09-19 12:30:40.222 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:30:40.223 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/d8257b00-6960-4016-ab12-3d89fa80e77a - 204 null null 3.2527ms
2025-09-19 12:30:40.226 +05:30 [INF] Request starting HTTP/1.1 DELETE http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/d8257b00-6960-4016-ab12-3d89fa80e77a - null null
2025-09-19 12:30:40.227 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:30:40.228 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Delete (xbytechat.api)'
2025-09-19 12:30:40.229 +05:30 [INF] Route matched with {action = "Delete", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Delete(System.String, System.Guid) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:30:40.232 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='d8257b00-6960-4016-ab12-3d89fa80e77a', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."Id" = @__id_0 AND w."BusinessId" = @__businessId_1 AND lower(w."Provider") = @__ToLower_2
LIMIT 1
2025-09-19 12:30:40.254 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p0='d8257b00-6960-4016-ab12-3d89fa80e77a'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "WhatsAppPhoneNumbers"
WHERE "Id" = @p0;
2025-09-19 12:30:40.256 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-19 12:30:40.257 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Delete (xbytechat.api) in 26.5485ms
2025-09-19 12:30:40.258 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Delete (xbytechat.api)'
2025-09-19 12:30:40.259 +05:30 [INF] Request finished HTTP/1.1 DELETE http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/d8257b00-6960-4016-ab12-3d89fa80e77a - 204 null null 33.4593ms
2025-09-19 12:30:41.518 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-09-19 12:30:41.521 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:30:41.522 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 3.9666ms
2025-09-19 12:30:41.524 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 566
2025-09-19 12:30:41.526 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:30:41.527 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 12:30:41.528 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 12:30:41.531 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__dto_Provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0 AND w."Provider" = @__dto_Provider_1
LIMIT 1
2025-09-19 12:30:41.553 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p1='c13c2c23-4ed0-4441-b5b2-6b2b581bdca3', @p0='2025-09-19T07:00:41.5342264Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 12:30:41.555 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 12:30:41.556 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 26.6302ms
2025-09-19 12:30:41.557 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 12:30:41.558 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 33.4272ms
2025-09-19 12:30:47.026 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - null null
2025-09-19 12:30:47.027 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 12:30:47.029 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:30:47.032 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:30:47.033 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - 204 null null 6.4339ms
2025-09-19 12:30:47.034 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 7.21ms
2025-09-19 12:30:47.037 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 12:30:47.040 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/ - null null
2025-09-19 12:30:47.042 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:30:47.044 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:30:47.045 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 12:30:47.045 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 12:30:47.046 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-19 12:30:47.047 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 12:30:47.051 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-19 12:30:47.053 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=25
2025-09-19 12:30:47.054 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType89`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 12:30:47.057 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 12:30:47.059 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 9.8701ms
2025-09-19 12:30:47.062 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 12:30:47.062 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 12:30:47.064 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 12:30:47.065 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 27.572ms
2025-09-19 12:30:47.066 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 13.3433ms
2025-09-19 12:30:47.070 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 12:30:47.071 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/ - 200 null application/json; charset=utf-8 31.1448ms
2025-09-19 12:30:51.587 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 12:30:51.590 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:30:51.591 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 3.6572ms
2025-09-19 12:30:51.593 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 79
2025-09-19 12:30:51.595 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:30:51.597 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 12:30:51.598 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 12:30:53.571 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 12:30:53.575 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_dto_RecipientNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-19 12:30:53.595 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@p1='75df7429-287c-406a-83d8-0dfa045b0093', @p0='2025-09-19T07:00:53.5768949Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Contacts" SET "LastContactedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 12:30:53.598 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218078'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 12:30:53.630 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='691dd97c-aac7-44b7-b2ec-67b1f9eaa9b2', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T07:00:53.6287229Z' (DbType = DateTime), @p8='❌ Provider configuration error.', @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='sdfsd' (Nullable = false), @p13=NULL, @p14=NULL, @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17='sdfsd', @p18=NULL (DbType = Guid), @p19='2025-09-19T07:00:53.6287231Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
2025-09-19 12:30:53.632 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 12:30:53.633 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 2034.259ms
2025-09-19 12:30:53.634 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 12:30:53.635 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/json; charset=utf-8 2041.2884ms
2025-09-19 12:31:01.191 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 12:31:01.193 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:31:01.194 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 3.1398ms
2025-09-19 12:31:01.197 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 12:31:01.200 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:31:01.201 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 204 null null 3.8675ms
2025-09-19 12:31:01.209 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 12:31:01.212 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 12:31:01.212 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:31:01.214 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:31:01.215 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 12:31:01.215 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:31:01.216 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 12:31:01.217 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:31:01.220 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-19 12:31:01.224 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='PINNACLE'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 12:31:01.227 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-09-19 12:31:01.228 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 12:31:01.229 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 10.5103ms
2025-09-19 12:31:01.230 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 8.3729ms
2025-09-19 12:31:01.231 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 12:31:01.232 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:31:01.233 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 23.5411ms
2025-09-19 12:31:01.233 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 200 null application/json; charset=utf-8 21.7464ms
2025-09-19 12:31:01.238 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:31:01.239 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:31:01.240 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 2.0545ms
2025-09-19 12:31:01.242 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:31:01.243 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:31:01.244 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:31:01.244 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:31:01.247 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 12:31:01.249 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 12:31:01.250 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 4.6509ms
2025-09-19 12:31:01.251 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:31:01.252 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 9.9261ms
2025-09-19 12:31:01.254 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:31:01.256 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:31:01.257 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:31:01.258 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:31:01.261 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 12:31:01.263 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 12:31:01.264 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 4.8839ms
2025-09-19 12:31:01.265 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:31:01.266 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 11.5681ms
2025-09-19 12:32:08.659 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:32:08.661 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:32:08.661 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 2.6827ms
2025-09-19 12:32:08.667 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - application/json 173
2025-09-19 12:32:08.669 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:32:08.670 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api)'
2025-09-19 12:32:08.670 +05:30 [INF] Route matched with {action = "Upsert", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Upsert(System.String, UpsertRequest) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:32:11.181 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
LIMIT 1
2025-09-19 12:32:11.189 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__providerForChild_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__providerForChild_1 AND w."PhoneNumberId" = @__phoneNumberId_2
LIMIT 1
2025-09-19 12:32:11.193 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='e7abb04c-eaee-4f66-9234-6ef058499674', @p0='2025-09-19T07:02:11.1798152Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 12:32:11.195 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__providerForChild_1='META_CLOUD', @__entity_Id_2='e7abb04c-eaee-4f66-9234-6ef058499674'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" AS w
SET "IsDefault" = FALSE
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__providerForChild_1 AND w."Id" <> @__entity_Id_2
2025-09-19 12:32:11.199 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p3='c13c2c23-4ed0-4441-b5b2-6b2b581bdca3', @p0='673199269218077', @p1='2025-09-19T07:02:11.1798152Z' (Nullable = true) (DbType = DateTime), @p2='5551622077'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "PhoneNumberId" = @p0, "UpdatedAt" = @p1, "WhatsAppBusinessNumber" = @p2
WHERE "Id" = @p3;
2025-09-19 12:32:11.220 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber'.
2025-09-19 12:32:11.221 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api) in 2549.6922ms
2025-09-19 12:32:11.222 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api)'
2025-09-19 12:32:11.223 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 2556.1479ms
2025-09-19 12:32:13.509 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-09-19 12:32:13.511 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:32:13.512 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 3.3311ms
2025-09-19 12:32:13.516 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 566
2025-09-19 12:32:13.518 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:32:13.519 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 12:32:13.520 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 12:32:13.524 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__dto_Provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0 AND w."Provider" = @__dto_Provider_1
LIMIT 1
2025-09-19 12:32:13.528 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='c13c2c23-4ed0-4441-b5b2-6b2b581bdca3', @p0='2025-09-19T07:02:13.5270564Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 12:32:13.531 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 12:32:13.532 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 10.3235ms
2025-09-19 12:32:13.533 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 12:32:13.534 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 18.5688ms
2025-09-19 12:32:17.685 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - null null
2025-09-19 12:32:17.688 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:32:17.689 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 12:32:17.689 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - 204 null null 3.7112ms
2025-09-19 12:32:17.696 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:32:17.699 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/ - null null
2025-09-19 12:32:17.700 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 11.5177ms
2025-09-19 12:32:17.702 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:32:17.704 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 12:32:17.705 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 12:32:17.707 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:32:17.708 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 12:32:17.709 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 12:32:17.710 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=25
2025-09-19 12:32:17.710 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-19 12:32:17.713 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 12:32:17.717 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-19 12:32:17.719 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 12:32:17.720 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType89`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 12:32:17.721 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 12:32:17.722 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 7.3882ms
2025-09-19 12:32:17.723 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 13.5272ms
2025-09-19 12:32:17.724 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 12:32:17.725 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 12:32:17.726 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 21.4829ms
2025-09-19 12:32:17.727 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/ - 200 null application/json; charset=utf-8 27.3577ms
2025-09-19 12:32:22.662 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 12:32:22.665 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:32:22.666 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 3.2837ms
2025-09-19 12:32:22.669 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 79
2025-09-19 12:32:22.671 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:32:22.672 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 12:32:22.673 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 12:32:23.782 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 12:32:23.787 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_dto_RecipientNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-19 12:32:23.808 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p1='75df7429-287c-406a-83d8-0dfa045b0093', @p0='2025-09-19T07:02:23.7893561Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Contacts" SET "LastContactedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 12:32:23.811 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 12:32:23.814 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-19 12:32:23.816 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 12:32:23.817 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 12:32:25.045 +05:30 [INF] Received HTTP response headers after 1227.4544ms - 200
2025-09-19 12:32:25.047 +05:30 [INF] End processing HTTP request after 1231.2309ms - 200
2025-09-19 12:32:25.050 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='f8284192-3d1e-403f-9a90-c80700fde8d1', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T07:02:25.0487848Z' (DbType = DateTime), @p8=NULL, @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='sdsad' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ5Mzg5MkY1RUMwMTkwRTJEAA==', @p14='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ5Mzg5MkY1RUMwMTkwRTJEAA=="}]}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17='sdsad', @p18=NULL (DbType = Guid), @p19='2025-09-19T07:02:25.0487849Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
2025-09-19 12:32:25.053 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 12:32:25.054 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 2379.1673ms
2025-09-19 12:32:25.055 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 12:32:25.056 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 200 null application/json; charset=utf-8 2387.5769ms
2025-09-19 12:32:28.680 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 12:32:28.680 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 12:32:28.683 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:32:28.690 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:32:28.692 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 204 null null 11.9453ms
2025-09-19 12:32:28.691 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 10.9196ms
2025-09-19 12:32:28.696 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 12:32:28.700 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 12:32:28.702 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:32:28.704 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:32:28.706 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:32:28.706 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 12:32:28.706 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:32:28.707 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 12:32:28.711 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='PINNACLE'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 12:32:28.714 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-19 12:32:28.716 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 12:32:28.718 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-09-19 12:32:28.719 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 10.1989ms
2025-09-19 12:32:28.720 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 7.5428ms
2025-09-19 12:32:28.721 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:32:28.722 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 12:32:28.723 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 200 null application/json; charset=utf-8 22.5225ms
2025-09-19 12:32:28.724 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 27.5339ms
2025-09-19 12:32:28.728 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:32:28.730 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:32:28.731 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 2.3671ms
2025-09-19 12:32:28.733 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:32:28.735 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:32:28.736 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:32:28.738 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:32:28.741 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 12:32:28.744 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 12:32:28.745 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 5.8422ms
2025-09-19 12:32:28.746 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:32:28.746 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 12:32:28.752 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 18.4763ms
2025-09-19 12:32:28.754 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:32:28.757 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:32:28.758 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 12:32:28.760 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 12:32:28.763 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 12:32:28.764 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 5.4779ms
2025-09-19 12:32:28.765 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 12:32:28.766 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 20.0778ms
2025-09-19 12:32:56.452 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-19 12:32:56.455 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:32:56.456 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.4722ms
2025-09-19 12:32:56.458 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-09-19 12:32:56.461 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:32:56.462 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 12:32:56.466 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-19 12:32:56.476 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-09-19 12:32:56.539 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-19 12:32:56.573 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-09-19 12:32:56.580 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-09-19 12:32:56.588 +05:30 [INF] 🔎 JWT includes plan_id: 
2025-09-19 12:32:56.589 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: admin, PlanId: null
2025-09-19 12:32:56.590 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 12:32:56.592 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 124.1102ms
2025-09-19 12:32:56.593 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 12:32:56.594 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 135.8581ms
2025-09-19 12:32:56.598 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 12:32:56.600 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:32:56.601 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.7429ms
2025-09-19 12:32:56.603 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 12:32:56.605 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:32:56.606 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 12:32:56.607 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 12:32:56.609 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 12:32:56.611 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 3.3487ms
2025-09-19 12:32:56.613 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 12:32:56.613 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 10.3007ms
2025-09-19 12:32:56.624 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 12:32:56.627 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:32:56.628 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.6551ms
2025-09-19 12:32:56.636 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 12:32:56.638 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:32:56.639 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 12:32:56.640 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 12:32:56.642 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 12:32:56.644 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.7251ms
2025-09-19 12:32:56.645 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 12:32:56.646 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 10.1911ms
2025-09-19 12:32:56.698 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 12:32:56.700 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:32:56.701 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 12:32:56.702 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 12:32:56.703 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 12:32:56.708 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.8135ms
2025-09-19 12:32:56.709 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 12:32:56.712 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.0474ms
2025-09-19 12:33:01.813 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - null null
2025-09-19 12:33:01.814 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - null null
2025-09-19 12:33:01.815 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:33:01.818 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:33:01.818 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - 204 null null 5.6802ms
2025-09-19 12:33:01.819 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - 204 null null 4.8211ms
2025-09-19 12:33:01.822 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - null null
2025-09-19 12:33:01.824 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan - null null
2025-09-19 12:33:01.826 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:33:01.828 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:33:01.829 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-09-19 12:33:01.830 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-09-19 12:33:01.834 +05:30 [INF] Route matched with {action = "GetPlans", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlans() on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 12:33:01.834 +05:30 [INF] Route matched with {action = "GetGroupedPermissions", controller = "Permission"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGroupedPermissions() on controller xbytechat.api.Features.AccessControl.Controllers.PermissionController (xbytechat.api).
2025-09-19 12:33:01.841 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."IsActive"
2025-09-19 12:33:01.845 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 12:33:01.846 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api) in 10.7858ms
2025-09-19 12:33:01.847 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-09-19 12:33:01.849 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan - 200 null application/json; charset=utf-8 24.3548ms
2025-09-19 12:33:01.852 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/5f9f5de1-a0b2-48ba-b03d-77b27345613f/permissions - null null
2025-09-19 12:33:01.854 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:33:01.855 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/5f9f5de1-a0b2-48ba-b03d-77b27345613f/permissions - 204 null null 3.1163ms
2025-09-19 12:33:01.858 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/5f9f5de1-a0b2-48ba-b03d-77b27345613f/permissions - null null
2025-09-19 12:33:01.860 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:33:01.861 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-09-19 12:33:01.866 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 12:33:01.869 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 12:33:01.883 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Key", t1."Id", t1."Code", t1."CreatedAt", t1."Description", t1."Group", t1."IsActive", t1."Name"
FROM (
    SELECT t."Key"
    FROM (
        SELECT COALESCE(p."Group", 'Ungrouped') AS "Key"
        FROM "Permissions" AS p
        WHERE p."IsActive"
    ) AS t
    GROUP BY t."Key"
) AS t0
LEFT JOIN (
    SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name", COALESCE(p0."Group", 'Ungrouped') AS "Key"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t1 ON t0."Key" = t1."Key"
ORDER BY t0."Key"
2025-09-19 12:33:01.890 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 12:33:01.905 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 37.1286ms
2025-09-19 12:33:01.905 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api) in 68.5493ms
2025-09-19 12:33:01.906 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-09-19 12:33:01.907 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-09-19 12:33:01.908 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/5f9f5de1-a0b2-48ba-b03d-77b27345613f/permissions - 200 null application/json; charset=utf-8 50.7248ms
2025-09-19 12:33:01.909 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - 200 null application/json; charset=utf-8 87.6742ms
2025-09-19 12:33:11.426 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/5f9f5de1-a0b2-48ba-b03d-77b27345613f/permissions - null null
2025-09-19 12:33:11.428 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:33:11.429 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/5f9f5de1-a0b2-48ba-b03d-77b27345613f/permissions - 204 null null 3.0575ms
2025-09-19 12:33:11.432 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/5f9f5de1-a0b2-48ba-b03d-77b27345613f/permissions - application/json 781
2025-09-19 12:33:11.434 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:33:11.437 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-09-19 12:33:11.440 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 12:33:11.470 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-09-19 12:33:11.501 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='11082ac0-9f9e-4498-b807-f6df000df180', @p1='15988bc4-c13d-40e2-9488-4743213063ac', @p2='8044e8c0-b179-4b50-9d21-94afc4bbe86d', @p3='8b9d4e00-3efc-4d46-9e0f-2ccb4757da0f', @p4='8c33c2a8-dfc7-4e7a-9fd7-4a7213179ae7', @p5='ac80016e-ba99-4a13-9729-21e8ba1834ca', @p6='b6389896-9ad3-4a74-bfda-2bd1966711dd', @p7='ba990ace-f9e5-465b-a1c9-b5d1b49d0243', @p8='d9ed122f-e2f2-4ef0-a1cc-ecfad8459573', @p9='dced5842-07f4-46fc-8613-b41482655130', @p10='ea74737f-4c40-4a49-a45e-ddfa5d38f64d', @p11='f0fcece2-09f0-4136-b5d1-a89859612d48', @p12='1316e42b-d585-4550-baca-6b5b254f0c5a', @p13='2025-09-19T07:03:11.4911312Z' (DbType = DateTime), @p14='system', @p15='True', @p16='0485154c-dde5-4732-a7aa-a379c77a5b27', @p17='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p18='20ec59ed-cc9e-48f5-8122-55f7a158a2ae', @p19='2025-09-19T07:03:11.4910157Z' (DbType = DateTime), @p20='system', @p21='True', @p22='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p23='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p24='369f3888-c5f3-408c-9c56-192ddc8b8f7e', @p25='2025-09-19T07:03:11.4910792Z' (DbType = DateTime), @p26='system', @p27='True', @p28='ad36cdb7-5221-448b-a6a6-c35c9f88d021', @p29='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p30='392d4e33-dcd0-4497-abae-3e81332b6d6b', @p31='2025-09-19T07:03:11.4911251Z' (DbType = DateTime), @p32='system', @p33='True', @p34='c819f1bd-422d-4609-916c-cc185fe44ab0', @p35='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p36='48d9f7d2-df52-4a07-8481-feffca822881', @p37='2025-09-19T07:03:11.4911179Z' (DbType = DateTime), @p38='system', @p39='True', @p40='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p41='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p42='4cd52e01-b3b0-410b-b6ed-9d5e1cd65fc1', @p43='2025-09-19T07:03:11.4910566Z' (DbType = DateTime), @p44='system', @p45='True', @p46='636b17f2-1c54-4e26-a8cd-dbf561dcb522', @p47='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p48='4f6a3ce6-785d-47b2-9de5-48abaccf9493', @p49='2025-09-19T07:03:11.4910629Z' (DbType = DateTime), @p50='system', @p51='True', @p52='0dedac5b-81c8-44c3-8cfe-76c58e29c6db', @p53='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p54='56082fc6-cb74-431c-bfa1-86e78467c4fa', @p55='2025-09-19T07:03:11.4904995Z' (DbType = DateTime), @p56='system', @p57='True', @p58='adfa8490-9705-4a36-a86e-d5bff7ddc220', @p59='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p60='5a16cd5c-0fcb-48f4-bf30-6109228fa248', @p61='2025-09-19T07:03:11.4910495Z' (DbType = DateTime), @p62='system', @p63='True', @p64='7d7cbceb-4ce7-4835-85cd-59562487298d', @p65='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p66='626d8574-d239-4508-b5aa-805df917c334', @p67='2025-09-19T07:03:11.4909957Z' (DbType = DateTime), @p68='system', @p69='True', @p70='9ae90cfe-3fea-4307-b024-3083c2728148', @p71='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p72='bb5ef6c3-8141-4d08-8da0-6c222385a222', @p73='2025-09-19T07:03:11.4813434Z' (DbType = DateTime), @p74='system', @p75='True', @p76='205b87c7-b008-4e51-9fea-798c2dc4f9c2', @p77='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p78='be2dc9d0-6ccf-4b14-be75-3979b88f1cf2', @p79='2025-09-19T07:03:11.4911106Z' (DbType = DateTime), @p80='system', @p81='True', @p82='974af1f9-3caa-4857-a1a7-48462c389332', @p83='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p84='d2235028-0a8d-420d-8348-c9e5e93e2ba7', @p85='2025-09-19T07:03:11.4910853Z' (DbType = DateTime), @p86='system', @p87='True', @p88='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p89='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p90='dd58d6cd-0939-496c-968f-3c41a644c255', @p91='2025-09-19T07:03:11.4911397Z' (DbType = DateTime), @p92='system', @p93='True', @p94='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p95='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p96='ddf322ac-537e-4179-b3c4-3e7913fcf180', @p97='2025-09-19T07:03:11.4910387Z' (DbType = DateTime), @p98='system', @p99='True', @p100='821480c6-1464-415e-bba8-066fcb4e7e63', @p101='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p102='e5e2772a-5c27-4004-8096-0c3c674ee4f9', @p103='2025-09-19T07:03:11.4910690Z' (DbType = DateTime), @p104='system', @p105='True', @p106='74828fc0-e358-4cfc-b924-13719a0d9f50', @p107='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p108='f35532f8-81cb-489e-a7a3-140fe02dc676', @p109='2025-09-19T07:03:11.4911521Z' (DbType = DateTime), @p110='system', @p111='True', @p112='98572fe7-d142-475a-b990-f248641809e2', @p113='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p114='fb6f0336-ef29-4e1d-83d3-f7b192e23356', @p115='2025-09-19T07:03:11.4910993Z' (DbType = DateTime), @p116='system', @p117='True', @p118='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p119='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p120='fbaa661a-01e3-4abe-b304-ce3286862de9', @p121='2025-09-19T07:03:11.4910927Z' (DbType = DateTime), @p122='system', @p123='True', @p124='29461562-ef9c-48c0-a606-482ff57b8f95', @p125='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p126='ffe80a8e-225b-4e8e-9b9f-881929d7d437', @p127='2025-09-19T07:03:11.4910272Z' (DbType = DateTime), @p128='system', @p129='True', @p130='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p131='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p12, @p13, @p14, @p15, @p16, @p17);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p18, @p19, @p20, @p21, @p22, @p23);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p24, @p25, @p26, @p27, @p28, @p29);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p42, @p43, @p44, @p45, @p46, @p47);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p48, @p49, @p50, @p51, @p52, @p53);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p54, @p55, @p56, @p57, @p58, @p59);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p60, @p61, @p62, @p63, @p64, @p65);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p66, @p67, @p68, @p69, @p70, @p71);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p72, @p73, @p74, @p75, @p76, @p77);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p78, @p79, @p80, @p81, @p82, @p83);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p84, @p85, @p86, @p87, @p88, @p89);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p90, @p91, @p92, @p93, @p94, @p95);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p96, @p97, @p98, @p99, @p100, @p101);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p102, @p103, @p104, @p105, @p106, @p107);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p108, @p109, @p110, @p111, @p112, @p113);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p114, @p115, @p116, @p117, @p118, @p119);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p120, @p121, @p122, @p123, @p124, @p125);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p126, @p127, @p128, @p129, @p130, @p131);
2025-09-19 12:33:11.505 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 12:33:11.506 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 64.4461ms
2025-09-19 12:33:11.507 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-09-19 12:33:11.508 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/5f9f5de1-a0b2-48ba-b03d-77b27345613f/permissions - 200 null application/json; charset=utf-8 75.9486ms
2025-09-19 12:33:11.510 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/5f9f5de1-a0b2-48ba-b03d-77b27345613f/permissions - null null
2025-09-19 12:33:11.512 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:33:11.512 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-09-19 12:33:11.513 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 12:33:11.516 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-19 12:33:11.520 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 12:33:11.520 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.9249ms
2025-09-19 12:33:11.521 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-09-19 12:33:11.522 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/5f9f5de1-a0b2-48ba-b03d-77b27345613f/permissions - 200 null application/json; charset=utf-8 12.3884ms
2025-09-19 12:33:37.430 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/5f9f5de1-a0b2-48ba-b03d-77b27345613f/permissions - null null
2025-09-19 12:33:37.432 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:33:37.433 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/5f9f5de1-a0b2-48ba-b03d-77b27345613f/permissions - 204 null null 3.2206ms
2025-09-19 12:33:37.435 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/5f9f5de1-a0b2-48ba-b03d-77b27345613f/permissions - application/json 937
2025-09-19 12:33:37.438 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:33:37.439 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-09-19 12:33:37.440 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 12:33:37.443 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-09-19 12:33:37.452 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='1316e42b-d585-4550-baca-6b5b254f0c5a', @p1='20ec59ed-cc9e-48f5-8122-55f7a158a2ae', @p2='369f3888-c5f3-408c-9c56-192ddc8b8f7e', @p3='392d4e33-dcd0-4497-abae-3e81332b6d6b', @p4='48d9f7d2-df52-4a07-8481-feffca822881', @p5='4cd52e01-b3b0-410b-b6ed-9d5e1cd65fc1', @p6='4f6a3ce6-785d-47b2-9de5-48abaccf9493', @p7='56082fc6-cb74-431c-bfa1-86e78467c4fa', @p8='5a16cd5c-0fcb-48f4-bf30-6109228fa248', @p9='626d8574-d239-4508-b5aa-805df917c334', @p10='bb5ef6c3-8141-4d08-8da0-6c222385a222', @p11='be2dc9d0-6ccf-4b14-be75-3979b88f1cf2', @p12='d2235028-0a8d-420d-8348-c9e5e93e2ba7', @p13='dd58d6cd-0939-496c-968f-3c41a644c255', @p14='ddf322ac-537e-4179-b3c4-3e7913fcf180', @p15='e5e2772a-5c27-4004-8096-0c3c674ee4f9', @p16='f35532f8-81cb-489e-a7a3-140fe02dc676', @p17='fb6f0336-ef29-4e1d-83d3-f7b192e23356', @p18='fbaa661a-01e3-4abe-b304-ce3286862de9', @p19='ffe80a8e-225b-4e8e-9b9f-881929d7d437', @p20='0a5a1ffc-4f9f-4277-a24f-f4a55bc0d52c', @p21='2025-09-19T07:03:37.4473337Z' (DbType = DateTime), @p22='system', @p23='True', @p24='ad36cdb7-5221-448b-a6a6-c35c9f88d021', @p25='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p26='1d571659-568c-4c36-8db5-8750a8354337', @p27='2025-09-19T07:03:37.4474139Z' (DbType = DateTime), @p28='system', @p29='True', @p30='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p31='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p32='267dd29d-97b8-468e-aaf3-d6d2868f38c1', @p33='2025-09-19T07:03:37.4473521Z' (DbType = DateTime), @p34='system', @p35='True', @p36='29461562-ef9c-48c0-a606-482ff57b8f95', @p37='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p38='2f976993-9e75-4faa-8ebc-24ddd5831d1b', @p39='2025-09-19T07:03:37.4474323Z' (DbType = DateTime), @p40='system', @p41='True', @p42='30000000-0000-0000-0000-000000000003', @p43='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p44='3b28ff1d-c707-4aab-913c-3f24754541a2', @p45='2025-09-19T07:03:37.4474014Z' (DbType = DateTime), @p46='system', @p47='True', @p48='0485154c-dde5-4732-a7aa-a379c77a5b27', @p49='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p50='3b90c2d6-2bf9-4587-bdc4-927bebb5425b', @p51='2025-09-19T07:03:37.4472837Z' (DbType = DateTime), @p52='system', @p53='True', @p54='821480c6-1464-415e-bba8-066fcb4e7e63', @p55='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p56='44f58084-0c77-42ee-8a5b-0ef545c580a1', @p57='2025-09-19T07:03:37.4472926Z' (DbType = DateTime), @p58='system', @p59='True', @p60='7d7cbceb-4ce7-4835-85cd-59562487298d', @p61='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p62='544b8c52-c8c7-4d1e-a2cf-7cc14d66149a', @p63='2025-09-19T07:03:37.4472750Z' (DbType = DateTime), @p64='system', @p65='True', @p66='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p67='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p68='5a8af18e-5c95-46b4-ab69-dcfb58f2263f', @p69='2025-09-19T07:03:37.4474551Z' (DbType = DateTime), @p70='system', @p71='True', @p72='30000000-0000-0000-0000-000000000002', @p73='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p74='696e0f11-1896-4fc2-8e20-b97c43ef5b25', @p75='2025-09-19T07:03:37.4470861Z' (DbType = DateTime), @p76='system', @p77='True', @p78='adfa8490-9705-4a36-a86e-d5bff7ddc220', @p79='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p80='7a3cbf3d-95eb-4227-85b3-b5f45ee2da62', @p81='2025-09-19T07:03:37.4473926Z' (DbType = DateTime), @p82='system', @p83='True', @p84='c819f1bd-422d-4609-916c-cc185fe44ab0', @p85='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p86='7eb4611d-63cc-4c1a-8a33-5a3f502d01f5', @p87='2025-09-19T07:03:37.4473004Z' (DbType = DateTime), @p88='system', @p89='True', @p90='636b17f2-1c54-4e26-a8cd-dbf561dcb522', @p91='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p92='80e71b3f-2ff3-4fae-a970-eca405f31c88', @p93='2025-09-19T07:03:37.4473834Z' (DbType = DateTime), @p94='system', @p95='True', @p96='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p97='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p98='99a34464-6a44-454f-92a2-29c31e1be67c', @p99='2025-09-19T07:03:37.4474459Z' (DbType = DateTime), @p100='system', @p101='True', @p102='30000000-0000-0000-0000-000000000000', @p103='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p104='a222703b-4035-4c9a-a783-e955d73cc80b', @p105='2025-09-19T07:03:37.4474654Z' (DbType = DateTime), @p106='system', @p107='True', @p108='30000000-0000-0000-0000-000000000001', @p109='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p110='b1e6571e-a75b-4012-b236-5bdd502c6ab8', @p111='2025-09-19T07:03:37.4469156Z' (DbType = DateTime), @p112='system', @p113='True', @p114='205b87c7-b008-4e51-9fea-798c2dc4f9c2', @p115='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p116='b6b7b2dc-7d70-41a8-9227-5f0ed220f5a9', @p117='2025-09-19T07:03:37.4472518Z' (DbType = DateTime), @p118='system', @p119='True', @p120='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p121='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p122='d56d8306-d09d-46ad-8747-544b1fdfc83b', @p123='2025-09-19T07:03:37.4474231Z' (DbType = DateTime), @p124='system', @p125='True', @p126='98572fe7-d142-475a-b990-f248641809e2', @p127='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p128='d9064fb1-fa09-486d-9ff1-4df4c315229b', @p129='2025-09-19T07:03:37.4473613Z' (DbType = DateTime), @p130='system', @p131='True', @p132='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p133='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p134='db87e137-9e29-4eaa-80bc-04627fd2e296', @p135='2025-09-19T07:03:37.4473105Z' (DbType = DateTime), @p136='system', @p137='True', @p138='0dedac5b-81c8-44c3-8cfe-76c58e29c6db', @p139='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p140='df1758cf-a485-4993-80f8-6ad67fd330cc', @p141='2025-09-19T07:03:37.4473199Z' (DbType = DateTime), @p142='system', @p143='True', @p144='74828fc0-e358-4cfc-b924-13719a0d9f50', @p145='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p146='e0595eb8-82c0-4032-8756-9921a84060f7', @p147='2025-09-19T07:03:37.4471453Z' (DbType = DateTime), @p148='system', @p149='True', @p150='9ae90cfe-3fea-4307-b024-3083c2728148', @p151='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p152='fe5bb636-4bf5-4eb3-97ab-2fedae0e0be2', @p153='2025-09-19T07:03:37.4473431Z' (DbType = DateTime), @p154='system', @p155='True', @p156='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p157='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p158='ffe495e4-54c7-40d0-bd1f-4e6147693d26', @p159='2025-09-19T07:03:37.4473723Z' (DbType = DateTime), @p160='system', @p161='True', @p162='974af1f9-3caa-4857-a1a7-48462c389332', @p163='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "PlanPermissions"
WHERE "Id" = @p0;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p1;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p2;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p3;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p4;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p5;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p6;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p7;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p8;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p9;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p10;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p11;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p12;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p13;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p14;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p15;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p16;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p17;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p18;
DELETE FROM "PlanPermissions"
WHERE "Id" = @p19;
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p20, @p21, @p22, @p23, @p24, @p25);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p26, @p27, @p28, @p29, @p30, @p31);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p32, @p33, @p34, @p35, @p36, @p37);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p38, @p39, @p40, @p41, @p42, @p43);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p44, @p45, @p46, @p47, @p48, @p49);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p50, @p51, @p52, @p53, @p54, @p55);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p56, @p57, @p58, @p59, @p60, @p61);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p62, @p63, @p64, @p65, @p66, @p67);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p68, @p69, @p70, @p71, @p72, @p73);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p74, @p75, @p76, @p77, @p78, @p79);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p80, @p81, @p82, @p83, @p84, @p85);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p86, @p87, @p88, @p89, @p90, @p91);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p92, @p93, @p94, @p95, @p96, @p97);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p98, @p99, @p100, @p101, @p102, @p103);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p104, @p105, @p106, @p107, @p108, @p109);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p110, @p111, @p112, @p113, @p114, @p115);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p116, @p117, @p118, @p119, @p120, @p121);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p122, @p123, @p124, @p125, @p126, @p127);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p128, @p129, @p130, @p131, @p132, @p133);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p134, @p135, @p136, @p137, @p138, @p139);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p140, @p141, @p142, @p143, @p144, @p145);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p146, @p147, @p148, @p149, @p150, @p151);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p152, @p153, @p154, @p155, @p156, @p157);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p158, @p159, @p160, @p161, @p162, @p163);
2025-09-19 12:33:37.473 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 12:33:37.475 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 33.5837ms
2025-09-19 12:33:37.476 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-09-19 12:33:37.477 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/5f9f5de1-a0b2-48ba-b03d-77b27345613f/permissions - 200 null application/json; charset=utf-8 41.362ms
2025-09-19 12:33:37.480 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/5f9f5de1-a0b2-48ba-b03d-77b27345613f/permissions - null null
2025-09-19 12:33:37.482 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:33:37.482 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-09-19 12:33:37.483 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 12:33:37.486 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-19 12:33:37.489 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 12:33:37.490 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.9624ms
2025-09-19 12:33:37.491 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-09-19 12:33:37.492 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/5f9f5de1-a0b2-48ba-b03d-77b27345613f/permissions - 200 null application/json; charset=utf-8 12.6186ms
2025-09-19 12:33:46.318 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-19 12:33:46.320 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:33:46.321 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.2698ms
2025-09-19 12:33:46.324 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 49
2025-09-19 12:33:46.327 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:33:46.328 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 12:33:46.329 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-19 12:33:46.332 +05:30 [INF] 🔑 Login attempt for email: tesla@gmail.com
2025-09-19 12:33:46.335 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='tesla@gmail.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-19 12:33:46.348 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-19 12:33:46.404 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='24c1a1d5-9f49-4555-8663-497a30b5ea8c'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-19 12:33:46.407 +05:30 [INF] ✅ Token generated for: tesla@gmail.com
2025-09-19 12:33:46.408 +05:30 [INF] 🔎 JWT includes plan_id: 5f9f5de1-a0b2-48ba-b03d-77b27345613f
2025-09-19 12:33:46.409 +05:30 [INF] ✅ Login successful for tesla@gmail.com, Role: business, PlanId: "5f9f5de1-a0b2-48ba-b03d-77b27345613f"
2025-09-19 12:33:46.410 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 12:33:46.411 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 80.5838ms
2025-09-19 12:33:46.412 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 12:33:46.413 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 88.2431ms
2025-09-19 12:33:46.415 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 12:33:46.417 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:33:46.418 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.7158ms
2025-09-19 12:33:46.420 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 12:33:46.422 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:33:46.423 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 12:33:46.424 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 12:33:46.427 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 12:33:46.430 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 12:33:46.431 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.564ms
2025-09-19 12:33:46.432 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 12:33:46.433 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.5847ms
2025-09-19 12:33:46.445 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 12:33:46.448 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:33:46.449 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.5764ms
2025-09-19 12:33:46.455 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 12:33:46.458 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:33:46.459 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 12:33:46.460 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 12:33:46.463 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 12:33:46.466 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 12:33:46.468 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.5591ms
2025-09-19 12:33:46.469 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 12:33:46.470 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.0616ms
2025-09-19 12:33:46.506 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 12:33:46.509 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:33:46.509 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 12:33:46.510 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 12:33:46.513 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 12:33:46.516 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 12:33:46.517 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.9023ms
2025-09-19 12:33:46.519 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 12:33:46.519 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.9699ms
2025-09-19 12:53:02.313 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 12:53:02.323 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:53:02.324 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 10.6009ms
2025-09-19 12:53:02.336 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 12:53:02.340 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:53:02.341 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 12:53:02.343 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 12:53:02.473 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 12:53:02.477 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 12:53:02.479 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 133.4376ms
2025-09-19 12:53:02.481 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 12:53:02.483 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 147.0864ms
2025-09-19 12:53:02.492 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 12:53:02.496 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:53:02.497 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.0591ms
2025-09-19 12:53:02.502 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 12:53:02.505 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:53:02.508 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 12:53:02.510 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 12:53:02.516 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 12:53:02.521 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 12:53:02.524 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.6748ms
2025-09-19 12:53:02.527 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 12:53:02.528 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.9207ms
2025-09-19 12:53:02.593 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 12:53:02.599 +05:30 [INF] CORS policy execution successful.
2025-09-19 12:53:02.601 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 12:53:02.603 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 12:53:02.610 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 12:53:02.615 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 12:53:02.618 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.4823ms
2025-09-19 12:53:02.621 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 12:53:02.623 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 29.8502ms
2025-09-19 13:09:09.337 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 13:09:09.344 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:09:09.345 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.6982ms
2025-09-19 13:09:09.367 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 13:09:09.369 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:09:09.370 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 13:09:09.371 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 13:09:09.436 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 13:09:09.439 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 13:09:09.440 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 67.6302ms
2025-09-19 13:09:09.441 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 13:09:09.442 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 75.3916ms
2025-09-19 13:09:09.473 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 13:09:09.476 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:09:09.477 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.9747ms
2025-09-19 13:09:09.480 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 13:09:09.482 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:09:09.484 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 13:09:09.485 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 13:09:09.488 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 13:09:09.492 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 13:09:09.494 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.0705ms
2025-09-19 13:09:09.495 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 13:09:09.496 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.2999ms
2025-09-19 13:09:09.536 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 13:09:09.539 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:09:09.540 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 13:09:09.541 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 13:09:09.545 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 13:09:09.548 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 13:09:09.550 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.8271ms
2025-09-19 13:09:09.551 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 13:09:09.552 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.5502ms
2025-09-19 13:09:19.212 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-19 13:09:19.215 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:09:19.215 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 2.9742ms
2025-09-19 13:09:19.218 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-09-19 13:09:19.221 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:09:19.222 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 13:09:19.223 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-19 13:09:19.232 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-09-19 13:09:19.237 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-19 13:09:19.241 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-09-19 13:09:19.243 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-09-19 13:09:19.244 +05:30 [INF] 🔎 JWT includes plan_id: 
2025-09-19 13:09:19.245 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: admin, PlanId: null
2025-09-19 13:09:19.247 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 13:09:19.248 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 22.9022ms
2025-09-19 13:09:19.249 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 13:09:19.250 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 32.0398ms
2025-09-19 13:09:19.254 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 13:09:19.257 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:09:19.257 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.5542ms
2025-09-19 13:09:19.261 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 13:09:19.263 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:09:19.264 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 13:09:19.265 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 13:09:19.267 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 13:09:19.269 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.8702ms
2025-09-19 13:09:19.270 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 13:09:19.271 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 10.508ms
2025-09-19 13:09:19.286 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 13:09:19.289 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:09:19.290 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.3622ms
2025-09-19 13:09:19.295 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 13:09:19.298 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:09:19.300 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 13:09:19.302 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 13:09:19.305 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 13:09:19.307 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 1.9849ms
2025-09-19 13:09:19.308 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 13:09:19.310 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.1608ms
2025-09-19 13:09:19.379 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 13:09:19.382 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:09:19.384 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 13:09:19.385 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 13:09:19.388 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 13:09:19.389 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 2.2234ms
2025-09-19 13:09:19.391 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 13:09:19.392 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.3823ms
2025-09-19 13:09:23.710 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - null null
2025-09-19 13:09:23.712 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:09:23.715 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - null null
2025-09-19 13:09:23.718 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan - 204 null null 7.6693ms
2025-09-19 13:09:23.721 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:09:23.723 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan - null null
2025-09-19 13:09:23.724 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Permission/grouped - 204 null null 10.977ms
2025-09-19 13:09:23.726 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:09:23.729 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - null null
2025-09-19 13:09:23.730 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-09-19 13:09:23.732 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:09:23.733 +05:30 [INF] Route matched with {action = "GetPlans", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlans() on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 13:09:23.734 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-09-19 13:09:23.736 +05:30 [INF] Route matched with {action = "GetGroupedPermissions", controller = "Permission"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetGroupedPermissions() on controller xbytechat.api.Features.AccessControl.Controllers.PermissionController (xbytechat.api).
2025-09-19 13:09:23.737 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."IsActive"
2025-09-19 13:09:23.742 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 13:09:23.748 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api) in 12.2937ms
2025-09-19 13:09:23.752 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlans (xbytechat.api)'
2025-09-19 13:09:23.753 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan - 200 null application/json; charset=utf-8 29.8403ms
2025-09-19 13:09:23.756 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/5f9f5de1-a0b2-48ba-b03d-77b27345613f/permissions - null null
2025-09-19 13:09:23.758 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:09:23.759 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/5f9f5de1-a0b2-48ba-b03d-77b27345613f/permissions - 204 null null 2.9123ms
2025-09-19 13:09:23.762 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/5f9f5de1-a0b2-48ba-b03d-77b27345613f/permissions - null null
2025-09-19 13:09:23.764 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:09:23.766 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-09-19 13:09:23.767 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 13:09:23.769 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 13:09:23.771 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 1.7957ms
2025-09-19 13:09:23.772 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-09-19 13:09:23.773 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/5f9f5de1-a0b2-48ba-b03d-77b27345613f/permissions - 200 null application/json; charset=utf-8 11.5745ms
2025-09-19 13:09:23.806 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Key", t1."Id", t1."Code", t1."CreatedAt", t1."Description", t1."Group", t1."IsActive", t1."Name"
FROM (
    SELECT t."Key"
    FROM (
        SELECT COALESCE(p."Group", 'Ungrouped') AS "Key"
        FROM "Permissions" AS p
        WHERE p."IsActive"
    ) AS t
    GROUP BY t."Key"
) AS t0
LEFT JOIN (
    SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name", COALESCE(p0."Group", 'Ungrouped') AS "Key"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t1 ON t0."Key" = t1."Key"
ORDER BY t0."Key"
2025-09-19 13:09:23.808 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 13:09:23.809 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api) in 69.6439ms
2025-09-19 13:09:23.810 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PermissionController.GetGroupedPermissions (xbytechat.api)'
2025-09-19 13:09:23.811 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Permission/grouped - 200 null application/json; charset=utf-8 82.2699ms
2025-09-19 13:09:26.962 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/5f9f5de1-a0b2-48ba-b03d-77b27345613f/permissions - null null
2025-09-19 13:09:26.964 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:09:26.965 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Plan/5f9f5de1-a0b2-48ba-b03d-77b27345613f/permissions - 204 null null 3.0355ms
2025-09-19 13:09:26.967 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/Plan/5f9f5de1-a0b2-48ba-b03d-77b27345613f/permissions - application/json 937
2025-09-19 13:09:26.969 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:09:26.970 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-09-19 13:09:26.971 +05:30 [INF] Route matched with {action = "UpdatePlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePlanPermissions(System.Guid, System.Guid[]) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 13:09:26.975 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."AssignedAt", p."AssignedBy", p."IsActive", p."PermissionId", p."PlanId"
FROM "PlanPermissions" AS p
WHERE p."PlanId" = @__planId_0
2025-09-19 13:09:26.983 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='02daabc4-be88-4a3f-bbae-bb1feb3a202e', @p1='2025-09-19T07:39:26.9792784Z' (DbType = DateTime), @p2='system', @p3='True', @p4='bbc5202a-eac9-40bb-aa78-176c677dbf5b', @p5='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p6='052ca5cd-4e99-47d1-9326-bb46b7c9570d', @p7='2025-09-19T07:39:26.9791718Z' (DbType = DateTime), @p8='system', @p9='True', @p10='636b17f2-1c54-4e26-a8cd-dbf561dcb522', @p11='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p12='2dbd2638-b6fd-4e28-aa51-565a2312be12', @p13='2025-09-19T07:39:26.9792372Z' (DbType = DateTime), @p14='system', @p15='True', @p16='0485154c-dde5-4732-a7aa-a379c77a5b27', @p17='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p18='2de1d93c-39ae-4f87-b0a8-7e19a381fd26', @p19='2025-09-19T07:39:26.9793140Z' (DbType = DateTime), @p20='system', @p21='True', @p22='98572fe7-d142-475a-b990-f248641809e2', @p23='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p24='36d8be82-72d9-4cbd-93e8-6608b074364f', @p25='2025-09-19T07:39:26.9791939Z' (DbType = DateTime), @p26='system', @p27='True', @p28='30000000-0000-0000-0000-000000000002', @p29='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p30='3a6dfcf3-be11-48f8-be99-793b00f2dfd9', @p31='2025-09-19T07:39:26.9792871Z' (DbType = DateTime), @p32='system', @p33='True', @p34='c819f1bd-422d-4609-916c-cc185fe44ab0', @p35='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p36='52cc3750-457f-477a-ab9a-4d02e6e647a0', @p37='2025-09-19T07:39:26.9793040Z' (DbType = DateTime), @p38='system', @p39='True', @p40='6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', @p41='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p42='5598cbf8-d154-4475-9d37-5f18b6a011f5', @p43='2025-09-19T07:39:26.9791832Z' (DbType = DateTime), @p44='system', @p45='True', @p46='30000000-0000-0000-0000-000000000001', @p47='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p48='67cb9964-2544-4d7b-93e0-90a6ed7746ed', @p49='2025-09-19T07:39:26.9792677Z' (DbType = DateTime), @p50='system', @p51='True', @p52='974af1f9-3caa-4857-a1a7-48462c389332', @p53='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p54='6f13f0fb-3682-49bd-bcc0-d33a7e70a638', @p55='2025-09-19T07:39:26.9791352Z' (DbType = DateTime), @p56='system', @p57='True', @p58='adfa8490-9705-4a36-a86e-d5bff7ddc220', @p59='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p60='74cbde1e-5342-4b96-bf65-5b4ba6e721e8', @p61='2025-09-19T07:39:26.9791556Z' (DbType = DateTime), @p62='system', @p63='True', @p64='9ae90cfe-3fea-4307-b024-3083c2728148', @p65='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p66='7fb61cf9-27a4-4c60-a389-4f4f1f698bf4', @p67='2025-09-19T07:39:26.9790143Z' (DbType = DateTime), @p68='system', @p69='True', @p70='7d7cbceb-4ce7-4835-85cd-59562487298d', @p71='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p72='8e916b5f-3ad2-421c-8432-56e260026cbf', @p73='2025-09-19T07:39:26.9786765Z' (DbType = DateTime), @p74='system', @p75='True', @p76='205b87c7-b008-4e51-9fea-798c2dc4f9c2', @p77='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p78='9289274b-10ef-41a8-88f3-c4c59f782f53', @p79='2025-09-19T07:39:26.9792957Z' (DbType = DateTime), @p80='system', @p81='True', @p82='eecd0fac-223c-4dba-9fa1-2a6e973d61d1', @p83='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p84='a1021f04-02c3-4b66-adc7-5629e047c702', @p85='2025-09-19T07:39:26.9792586Z' (DbType = DateTime), @p86='system', @p87='True', @p88='74c8034f-d9cb-4a17-8578-a9f765bd845c', @p89='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p90='a24bec33-4518-48fc-8103-eb3f98c3e639', @p91='2025-09-19T07:39:26.9790255Z' (DbType = DateTime), @p92='system', @p93='True', @p94='0dedac5b-81c8-44c3-8cfe-76c58e29c6db', @p95='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p96='c0640d31-3336-4d18-bd09-4f7231f28d1a', @p97='2025-09-19T07:39:26.9789596Z' (DbType = DateTime), @p98='system', @p99='True', @p100='918a61d0-5ab6-46af-a3d3-41e37b7710f9', @p101='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p102='c1d6fdcd-02ab-4774-a54a-1b750228ea29', @p103='2025-09-19T07:39:26.9789921Z' (DbType = DateTime), @p104='system', @p105='True', @p106='821480c6-1464-415e-bba8-066fcb4e7e63', @p107='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p108='c855960b-e6fc-4941-a1fe-d5c3f1260c4c', @p109='2025-09-19T07:39:26.9792263Z' (DbType = DateTime), @p110='system', @p111='True', @p112='ad36cdb7-5221-448b-a6a6-c35c9f88d021', @p113='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p114='d0e8cd91-0ba2-4398-be03-04184fe4d026', @p115='2025-09-19T07:39:26.9792154Z' (DbType = DateTime), @p116='system', @p117='True', @p118='74828fc0-e358-4cfc-b924-13719a0d9f50', @p119='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p120='d7357c9c-ef36-4710-a795-acc20eeeb3b9', @p121='2025-09-19T07:39:26.9788819Z' (DbType = DateTime), @p122='system', @p123='True', @p124='93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', @p125='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p126='db5b78e3-eb43-4225-8e95-4c74f0e27647', @p127='2025-09-19T07:39:26.9793226Z' (DbType = DateTime), @p128='system', @p129='True', @p130='30000000-0000-0000-0000-000000000000', @p131='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p132='dc516730-7d7c-49f5-9859-f77f3c247b0a', @p133='2025-09-19T07:39:26.9792040Z' (DbType = DateTime), @p134='system', @p135='True', @p136='30000000-0000-0000-0000-000000000003', @p137='5f9f5de1-a0b2-48ba-b03d-77b27345613f', @p138='e944c56a-b295-4012-8a23-cacc92ef2896', @p139='2025-09-19T07:39:26.9792481Z' (DbType = DateTime), @p140='system', @p141='True', @p142='29461562-ef9c-48c0-a606-482ff57b8f95', @p143='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p6, @p7, @p8, @p9, @p10, @p11);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p12, @p13, @p14, @p15, @p16, @p17);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p18, @p19, @p20, @p21, @p22, @p23);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p24, @p25, @p26, @p27, @p28, @p29);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p42, @p43, @p44, @p45, @p46, @p47);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p48, @p49, @p50, @p51, @p52, @p53);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p54, @p55, @p56, @p57, @p58, @p59);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p60, @p61, @p62, @p63, @p64, @p65);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p66, @p67, @p68, @p69, @p70, @p71);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p72, @p73, @p74, @p75, @p76, @p77);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p78, @p79, @p80, @p81, @p82, @p83);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p84, @p85, @p86, @p87, @p88, @p89);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p90, @p91, @p92, @p93, @p94, @p95);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p96, @p97, @p98, @p99, @p100, @p101);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p102, @p103, @p104, @p105, @p106, @p107);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p108, @p109, @p110, @p111, @p112, @p113);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p114, @p115, @p116, @p117, @p118, @p119);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p120, @p121, @p122, @p123, @p124, @p125);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p126, @p127, @p128, @p129, @p130, @p131);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p132, @p133, @p134, @p135, @p136, @p137);
INSERT INTO "PlanPermissions" ("Id", "AssignedAt", "AssignedBy", "IsActive", "PermissionId", "PlanId")
VALUES (@p138, @p139, @p140, @p141, @p142, @p143);
2025-09-19 13:09:26.987 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 13:09:26.988 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api) in 14.4075ms
2025-09-19 13:09:26.989 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.UpdatePlanPermissions (xbytechat.api)'
2025-09-19 13:09:26.990 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/Plan/5f9f5de1-a0b2-48ba-b03d-77b27345613f/permissions - 200 null application/json; charset=utf-8 22.5887ms
2025-09-19 13:09:26.993 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Plan/5f9f5de1-a0b2-48ba-b03d-77b27345613f/permissions - null null
2025-09-19 13:09:26.995 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:09:26.996 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-09-19 13:09:26.996 +05:30 [INF] Route matched with {action = "GetPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPlanPermissions(System.Guid) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 13:09:26.999 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-19 13:09:27.002 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.AccessControl.Models.Permission, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 13:09:27.003 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api) in 5.5982ms
2025-09-19 13:09:27.005 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetPlanPermissions (xbytechat.api)'
2025-09-19 13:09:27.005 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Plan/5f9f5de1-a0b2-48ba-b03d-77b27345613f/permissions - 200 null application/json; charset=utf-8 12.6357ms
2025-09-19 13:09:49.332 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-19 13:09:49.334 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:09:49.335 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.1225ms
2025-09-19 13:09:49.338 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 49
2025-09-19 13:09:49.340 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:09:49.341 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 13:09:49.342 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-19 13:09:49.344 +05:30 [INF] 🔑 Login attempt for email: tesla@gmail.com
2025-09-19 13:09:49.348 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='tesla@gmail.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-19 13:09:49.352 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-19 13:09:49.376 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[@__userId_0='24c1a1d5-9f49-4555-8663-497a30b5ea8c'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-19 13:09:49.380 +05:30 [INF] ✅ Token generated for: tesla@gmail.com
2025-09-19 13:09:49.381 +05:30 [INF] 🔎 JWT includes plan_id: 5f9f5de1-a0b2-48ba-b03d-77b27345613f
2025-09-19 13:09:49.382 +05:30 [INF] ✅ Login successful for tesla@gmail.com, Role: business, PlanId: "5f9f5de1-a0b2-48ba-b03d-77b27345613f"
2025-09-19 13:09:49.384 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 13:09:49.385 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 41.6733ms
2025-09-19 13:09:49.386 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 13:09:49.387 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 49.6919ms
2025-09-19 13:09:49.390 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 13:09:49.392 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:09:49.393 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.9318ms
2025-09-19 13:09:49.396 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 13:09:49.398 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:09:49.398 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 13:09:49.399 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 13:09:49.402 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 13:09:49.405 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 13:09:49.406 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.5107ms
2025-09-19 13:09:49.407 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 13:09:49.408 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 12.0355ms
2025-09-19 13:09:49.420 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 13:09:49.423 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:09:49.423 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.2756ms
2025-09-19 13:09:49.431 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 13:09:49.434 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:09:49.435 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 13:09:49.437 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 13:09:49.441 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 13:09:49.444 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 13:09:49.445 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.6491ms
2025-09-19 13:09:49.446 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 13:09:49.447 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.914ms
2025-09-19 13:09:49.484 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 13:09:49.487 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:09:49.488 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 13:09:49.489 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 13:09:49.492 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 13:09:49.495 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 13:09:49.496 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.7016ms
2025-09-19 13:09:49.497 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 13:09:49.498 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.9935ms
2025-09-19 13:09:57.017 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 13:09:57.019 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:09:57.020 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 204 null null 3.6591ms
2025-09-19 13:09:57.029 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 13:09:57.032 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:09:57.033 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 13:09:57.039 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-19 13:09:57.053 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-19 13:09:57.055 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType107`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType183`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 13:09:57.058 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 17.2288ms
2025-09-19 13:09:57.059 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 13:09:57.060 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 200 null application/json; charset=utf-8 31.5199ms
2025-09-19 13:10:00.382 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 13:10:00.385 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:10:00.386 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 204 null null 3.8907ms
2025-09-19 13:10:00.389 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null 0
2025-09-19 13:10:00.391 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:10:00.392 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-09-19 13:10:00.395 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-19 13:10:00.479 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-19 13:10:00.489 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-09-19 13:10:00.510 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-19 13:10:00.511 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-19 13:10:01.723 +05:30 [INF] Received HTTP response headers after 1211.0758ms - 200
2025-09-19 13:10:01.725 +05:30 [INF] End processing HTTP request after 1214.5328ms - 200
2025-09-19 13:10:02.815 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='support_project_status_v1', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-09-19 13:10:02.857 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='human_takeover_confirmation_v1', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-09-19 13:10:02.860 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='support_main_menu_v1', @__it_Language_3='en'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-09-19 13:10:02.863 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='products_info_v1', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-09-19 13:10:02.866 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='services_menu_v1', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-09-19 13:10:02.868 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='welcome_menu_minds', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-09-19 13:10:02.871 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='demo', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-09-19 13:10:02.874 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='contact_sales_info_v1', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-09-19 13:10:02.877 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='hello_world', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-09-19 13:10:02.879 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='dev_services_submenu_v1', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-09-19 13:10:02.882 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='url_tracking', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-09-19 13:10:02.885 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='build_urltracking', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-09-19 13:10:02.887 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='marketing_services_submenu_v1', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-09-19 13:10:02.890 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='design_services_submenu_v1', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-09-19 13:10:02.893 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='support_gst_submenu_v1', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-09-19 13:10:02.896 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='support_report_issue_v1', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-09-19 13:10:02.898 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='about_us_info_v1', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-09-19 13:10:02.901 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='bot_launch', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-09-19 13:10:02.904 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='call_log', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-09-19 13:10:02.907 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='track_url_after_flow_integ', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-09-19 13:10:02.910 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='template_3', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-09-19 13:10:02.912 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='template_2', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-09-19 13:10:02.916 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='template_1', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-09-19 13:10:02.919 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='offer_aiboat', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-09-19 13:10:02.921 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='shoe_launch_offer', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-09-19 13:10:02.924 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_providerKey_1='meta_cloud', @__it_Name_2='account_creation_confirmation_3', @__it_Language_3='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__8__locals1_businessId_0 AND w."Provider" = @__8__locals1_providerKey_1 AND w."Name" = @__it_Name_2 AND w."Language" = @__it_Language_3
LIMIT 1
2025-09-19 13:10:02.941 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='0eba9709-7e39-4de7-960c-38c20d64673e', @p1='We offer a wide range of services to power your business's growth. Please select a category you are interested in:' (Nullable = false), @p2='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p3='[{"Type":"QUICK_REPLY","Text":"Design Services","SubType":"quick_reply","Index":0,"ParameterValue":""},{"Type":"QUICK_REPLY","Text":"Development Services","SubType":"quick_reply","Index":1,"ParameterValue":""},{"Type":"QUICK_REPLY","Text":"Digital & Tele-Marketing","SubType":"quick_reply","Index":2,"ParameterValue":""}]' (Nullable = false), @p4='MARKETING', @p5='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p6='738253949023987', @p7='False', @p8='True', @p9='en_US' (Nullable = false), @p10='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p11='services_menu_v1' (Nullable = false), @p12='0', @p13='meta_cloud' (Nullable = false), @p14='{"name":"services_menu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We offer a wide range of services to power your business's growth. Please select a category you are interested in:"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Design Services"},{"type":"QUICK_REPLY","text":"Development Services"},{"type":"QUICK_REPLY","text":"Digital & Tele-Marketing"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"738253949023987"}' (Nullable = false), @p15='APPROVED' (Nullable = false), @p16='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p17='16018e0b-a898-45f2-afcb-17e33b390ebc', @p18='Hello! Thank you for contacting MindsMiratus.

If you're a new visitor, we're happy to help you get started. If you're an existing customer, we're here to support you. Please choose from the options below.' (Nullable = false), @p19='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p20='[{"Type":"QUICK_REPLY","Text":"Explore Our Services","SubType":"quick_reply","Index":0,"ParameterValue":""},{"Type":"QUICK_REPLY","Text":"View Our Products","SubType":"quick_reply","Index":1,"ParameterValue":""},{"Type":"QUICK_REPLY","Text":"Customer Support","SubType":"quick_reply","Index":2,"ParameterValue":""},{"Type":"QUICK_REPLY","Text":"Contact Sales","SubType":"quick_reply","Index":3,"ParameterValue":""}]' (Nullable = false), @p21='MARKETING', @p22='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p23='1115530356706526', @p24='False', @p25='True', @p26='en_US' (Nullable = false), @p27='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p28='welcome_menu_minds' (Nullable = false), @p29='0', @p30='meta_cloud' (Nullable = false), @p31='{"name":"welcome_menu_minds","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello! Thank you for contacting MindsMiratus.\n\nIf you're a new visitor, we're happy to help you get started. If you're an existing customer, we're here to support you. Please choose from the options below."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Explore Our Services"},{"type":"QUICK_REPLY","text":"View Our Products"},{"type":"QUICK_REPLY","text":"Customer Support"},{"type":"QUICK_REPLY","text":"Contact Sales"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1115530356706526"}' (Nullable = false), @p32='APPROVED' (Nullable = false), @p33='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p34='3db0af14-b9b4-4c29-914e-ab4f2b19ea11', @p35='Hello 

This is the test message to check wheather redirecting url is working or not.' (Nullable = false), @p36='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p37='[{"Type":"URL","Text":"Shop Now","SubType":"url","Index":0,"ParameterValue":"https://077903ad22d3.ngrok-free.app/r/{{1}}"},{"Type":"URL","Text":"Explore More","SubType":"url","Index":1,"ParameterValue":"https://077903ad22d3.ngrok-free.app/r/{{1}}"},{"Type":"PHONE_NUMBER","Text":"Call us","SubType":"voice_call","Index":2,"ParameterValue":"+917082156227"}]' (Nullable = false), @p38='MARKETING', @p39='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p40='788214393726841', @p41='False', @p42='True', @p43='en_US' (Nullable = false), @p44='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p45='build_urltracking' (Nullable = false), @p46='0', @p47='meta_cloud' (Nullable = false), @p48='{"name":"build_urltracking","parameter_format":"NAMED","components":[{"type":"BODY","text":"Hello \n\nThis is the test message to check wheather redirecting url is working or not."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https://077903ad22d3.ngrok-free.app/r/{{1}}","example":["https://077903ad22d3.ngrok-free.app/r/softwaredev"]},{"type":"URL","text":"Explore More","url":"https://077903ad22d3.ngrok-free.app/r/{{1}}","example":["https://077903ad22d3.ngrok-free.app/r/moreopt"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"788214393726841"}' (Nullable = false), @p49='APPROVED' (Nullable = false), @p50='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p51='418c7177-b607-4761-86a4-b40dcf89ff55', @p52='Hello

This is used to check wheather url redirection is woking or not.' (Nullable = false), @p53='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p54='[{"Type":"URL","Text":"Visit website","SubType":"url","Index":0,"ParameterValue":"https://077903ad22d3.ngrok-free.app/{{1}}"},{"Type":"URL","Text":"View Demo","SubType":"url","Index":1,"ParameterValue":"https://077903ad22d3.ngrok-free.app/{{1}}"}]' (Nullable = false), @p55='MARKETING', @p56='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p57='1322949819198164', @p58='False', @p59='True', @p60='en_US' (Nullable = false), @p61='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p62='url_tracking' (Nullable = false), @p63='0', @p64='meta_cloud' (Nullable = false), @p65='{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https://077903ad22d3.ngrok-free.app/{{1}}","example":["https://077903ad22d3.ngrok-free.app/tutrials"]},{"type":"URL","text":"View Demo","url":"https://077903ad22d3.ngrok-free.app/{{1}}","example":["https://077903ad22d3.ngrok-free.app/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"}' (Nullable = false), @p66='APPROVED' (Nullable = false), @p67='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p68='4918c566-221a-4316-82d6-751640cc0169', @p69='MindsMiratus is a leading IT solutions company dedicated to helping businesses grow through innovative and effective digital services. From design to development and marketing, we provide comprehensive solutions to elevate your brand.

What would you like to do next?' (Nullable = false), @p70='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p71='[{"Type":"QUICK_REPLY","Text":"Back to Main Menu","SubType":"quick_reply","Index":0,"ParameterValue":""},{"Type":"QUICK_REPLY","Text":"Talk to an Expert","SubType":"quick_reply","Index":1,"ParameterValue":""}]' (Nullable = false), @p72='MARKETING', @p73='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p74='1971204310331370', @p75='False', @p76='True', @p77='en_US' (Nullable = false), @p78='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p79='about_us_info_v1' (Nullable = false), @p80='0', @p81='meta_cloud' (Nullable = false), @p82='{"name":"about_us_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"MindsMiratus is a leading IT solutions company dedicated to helping businesses grow through innovative and effective digital services. From design to development and marketing, we provide comprehensive solutions to elevate your brand.\n\nWhat would you like to do next?"},{"type":"FOOTER","text":"sent by Mindsmirtus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"},{"type":"QUICK_REPLY","text":"Talk to an Expert"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1971204310331370"}' (Nullable = false), @p83='APPROVED' (Nullable = false), @p84='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p85='5353eebb-6cf9-4493-ad0e-3b1b72092ea6', @p86='To check the status of your ongoing project, please provide your registered email address or project ID, and one of our project managers will get back to you with a detailed update shortly.' (Nullable = false), @p87='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p88='[{"Type":"QUICK_REPLY","Text":"Talk to a Project Manager","SubType":"quick_reply","Index":0,"ParameterValue":""},{"Type":"QUICK_REPLY","Text":"Back to Support Menu","SubType":"quick_reply","Index":1,"ParameterValue":""}]' (Nullable = false), @p89='MARKETING', @p90='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p91='1599668577490835', @p92='False', @p93='True', @p94='en_US' (Nullable = false), @p95='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p96='support_project_status_v1' (Nullable = false), @p97='0', @p98='meta_cloud' (Nullable = false), @p99='{"name":"support_project_status_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"To check the status of your ongoing project, please provide your registered email address or project ID, and one of our project managers will get back to you with a detailed update shortly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Project Manager"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1599668577490835"}' (Nullable = false), @p100='APPROVED' (Nullable = false), @p101='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p102='547182f3-b4f1-41a9-8a15-20ac1ce63620', @p103='Demo Template Message.' (Nullable = false), @p104='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p105='[{"Type":"URL","Text":"Visit website","SubType":"url","Index":0,"ParameterValue":"https://1c5e318901b7.ngrok-free.app/r/{{1}}"},{"Type":"URL","Text":"Shop Now","SubType":"url","Index":1,"ParameterValue":"https://1c5e318901b7.ngrok-free.app/r/{{1}}"},{"Type":"PHONE_NUMBER","Text":"Call Us","SubType":"voice_call","Index":2,"ParameterValue":"+917082156227"}]' (Nullable = false), @p106='MARKETING', @p107='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p108='757818770430461', @p109='False', @p110='True', @p111='en_US' (Nullable = false), @p112='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p113='demo' (Nullable = false), @p114='0', @p115='meta_cloud' (Nullable = false), @p116='{"name":"demo","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Demo Template"},{"type":"BODY","text":"Demo Template Message."},{"type":"FOOTER","text":"sent by ExploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https://1c5e318901b7.ngrok-free.app/r/{{1}}","example":["https://1c5e318901b7.ngrok-free.app/r/visit"]},{"type":"URL","text":"Shop Now","url":"https://1c5e318901b7.ngrok-free.app/r/{{1}}","example":["https://1c5e318901b7.ngrok-free.app/r/shopnow"]},{"type":"PHONE_NUMBER","text":"Call Us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"757818770430461"}' (Nullable = false), @p117='APPROVED' (Nullable = false), @p118='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p119='58145823-48f0-48f2-be3d-dc104db29e8c', @p120='Hi {{1}},

Your new account has been created successfully. 

Please verify {{2}} to complete your profile.' (Nullable = false), @p121='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p122='[{"Type":"URL","Text":"Verify account","SubType":"url","Index":0,"ParameterValue":"https://www.qwexample.com/"}]' (Nullable = false), @p123='UTILITY', @p124='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p125='817241660991962', @p126='False', @p127='True', @p128='en_US' (Nullable = false), @p129='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p130='account_creation_confirmation_3' (Nullable = false), @p131='2', @p132='meta_cloud' (Nullable = false), @p133='{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https://www.qwexample.com/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"}' (Nullable = false), @p134='APPROVED' (Nullable = false), @p135='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p136='5884ef36-2643-4c05-9921-aea0b133cb47', @p137='Hello

This is the checking for call log event.' (Nullable = false), @p138='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p139='[{"Type":"URL","Text":"Explore","SubType":"url","Index":0,"ParameterValue":"https://077903ad22d3.ngrok-free.app/r/{{1}}"},{"Type":"URL","Text":"Call Us","SubType":"url","Index":1,"ParameterValue":"https://077903ad22d3.ngrok-free.app/r/{{1}}"}]' (Nullable = false), @p140='MARKETING', @p141='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p142='1286058192539680', @p143='False', @p144='True', @p145='en_US' (Nullable = false), @p146='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p147='call_log' (Nullable = false), @p148='0', @p149='meta_cloud' (Nullable = false), @p150='{"name":"call_log","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is the checking for call log event."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore","url":"https://077903ad22d3.ngrok-free.app/r/{{1}}","example":["https://077903ad22d3.ngrok-free.app/r/seeme"]},{"type":"URL","text":"Call Us","url":"https://077903ad22d3.ngrok-free.app/r/{{1}}","example":["https://077903ad22d3.ngrok-free.app/r/callme"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1286058192539680"}' (Nullable = false), @p151='APPROVED' (Nullable = false), @p152='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p153='5ae00e1d-a310-453d-9caa-ef5e8de1b730', @p154='Our expert developers build robust and scalable solutions tailored to your business needs. Which area of development interests you?

💻 Web & Software Dev: Custom applications and software solutions.
📱 Mobile App Dev: Engaging and high-performance apps for iOS and Android.
🛒 E-commerce Dev: Powerful online stores that drive sales and growth.' (Nullable = false), @p155='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p156='[{"Type":"QUICK_REPLY","Text":"Discuss a Project","SubType":"quick_reply","Index":0,"ParameterValue":""},{"Type":"QUICK_REPLY","Text":"Back to Services Menu","SubType":"quick_reply","Index":1,"ParameterValue":""}]' (Nullable = false), @p157='MARKETING', @p158='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p159='3118090155157247', @p160='False', @p161='True', @p162='en_US' (Nullable = false), @p163='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p164='dev_services_submenu_v1' (Nullable = false), @p165='0', @p166='meta_cloud' (Nullable = false), @p167='{"name":"dev_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our expert developers build robust and scalable solutions tailored to your business needs. Which area of development interests you?\n\n💻 Web & Software Dev: Custom applications and software solutions.\n📱 Mobile App Dev: Engaging and high-performance apps for iOS and Android.\n🛒 E-commerce Dev: Powerful online stores that drive sales and growth."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Discuss a Project"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3118090155157247"}' (Nullable = false), @p168='APPROVED' (Nullable = false), @p169='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p170='5b71f795-2a40-4c14-87d0-eca489dd19e4', @p171='We're sorry to hear you're experiencing an issue.

To help us resolve it quickly, please tap the button below to connect with our technical support team. Please be ready to provide a brief description of the problem.' (Nullable = false), @p172='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p173='[{"Type":"QUICK_REPLY","Text":"Connect to Technical Team","SubType":"quick_reply","Index":0,"ParameterValue":""},{"Type":"QUICK_REPLY","Text":"Back to Support Menu","SubType":"quick_reply","Index":1,"ParameterValue":""}]' (Nullable = false), @p174='MARKETING', @p175='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p176='755167220845328', @p177='False', @p178='True', @p179='en_US' (Nullable = false), @p180='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p181='support_report_issue_v1' (Nullable = false), @p182='0', @p183='meta_cloud' (Nullable = false), @p184='{"name":"support_report_issue_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We're sorry to hear you're experiencing an issue.\n\nTo help us resolve it quickly, please tap the button below to connect with our technical support team. Please be ready to provide a brief description of the problem."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Connect to Technical Team"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"755167220845328"}' (Nullable = false), @p185='APPROVED' (Nullable = false), @p186='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p187='82510fe2-b773-4606-9d40-f3a90fe33dc1', @p188='Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us.' (Nullable = false), @p189='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p190='[]' (Nullable = false), @p191='UTILITY', @p192='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p193='617143187619824', @p194='False', @p195='True', @p196='en_US' (Nullable = false), @p197='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p198='hello_world' (Nullable = false), @p199='0', @p200='meta_cloud' (Nullable = false), @p201='{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"}' (Nullable = false), @p202='APPROVED' (Nullable = false), @p203='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p204='83834da2-9386-45d5-a39b-927df46819a8', @p205='Welcome to the MindsMiratus Support Center. We're here to help you with any questions or issues you may have.

Please select an option so we can assist you faster.' (Nullable = false), @p206='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p207='[{"Type":"QUICK_REPLY","Text":"GST Software Support","SubType":"quick_reply","Index":0,"ParameterValue":""},{"Type":"QUICK_REPLY","Text":"Check Project Status","SubType":"quick_reply","Index":1,"ParameterValue":""},{"Type":"QUICK_REPLY","Text":"Report Technical Issues","SubType":"quick_reply","Index":2,"ParameterValue":""},{"Type":"QUICK_REPLY","Text":"Back to Main Menu","SubType":"quick_reply","Index":3,"ParameterValue":""}]' (Nullable = false), @p208='MARKETING', @p209='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p210='679342281096115', @p211='False', @p212='True', @p213='en' (Nullable = false), @p214='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p215='support_main_menu_v1' (Nullable = false), @p216='0', @p217='meta_cloud' (Nullable = false), @p218='{"name":"support_main_menu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Welcome to the MindsMiratus Support Center. We're here to help you with any questions or issues you may have.\n\nPlease select an option so we can assist you faster."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"GST Software Support"},{"type":"QUICK_REPLY","text":"Check Project Status"},{"type":"QUICK_REPLY","text":"Report Technical Issues"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en","status":"APPROVED","category":"MARKETING","id":"679342281096115"}' (Nullable = false), @p219='APPROVED' (Nullable = false), @p220='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p221='86265507-7225-415f-8846-e3bec3f71c02', @p222='This is themplate : 3' (Nullable = false), @p223='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p224='[{"Type":"QUICK_REPLY","Text":"Show Me Template 1","SubType":"quick_reply","Index":0,"ParameterValue":""}]' (Nullable = false), @p225='MARKETING', @p226='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p227='1760623375330098', @p228='False', @p229='True', @p230='en_US' (Nullable = false), @p231='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p232='template_3' (Nullable = false), @p233='0', @p234='meta_cloud' (Nullable = false), @p235='{"name":"template_3","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 3"},{"type":"BODY","text":"This is themplate : 3"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1760623375330098"}' (Nullable = false), @p236='APPROVED' (Nullable = false), @p237='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p238='8c5387a8-9ba5-4881-ac99-4853d0998e3c', @p239='We are proud to offer our powerful and easy-to-use GST Software, designed to simplify your tax compliance, invoicing, and financial management.

What would you like to do?' (Nullable = false), @p240='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p241='[{"Type":"QUICK_REPLY","Text":"Request a GST Demo","SubType":"quick_reply","Index":0,"ParameterValue":""},{"Type":"QUICK_REPLY","Text":"Back to Main Menu","SubType":"quick_reply","Index":1,"ParameterValue":""}]' (Nullable = false), @p242='MARKETING', @p243='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p244='2567632853585898', @p245='False', @p246='True', @p247='en_US' (Nullable = false), @p248='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p249='products_info_v1' (Nullable = false), @p250='0', @p251='meta_cloud' (Nullable = false), @p252='{"name":"products_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We are proud to offer our powerful and easy-to-use GST Software, designed to simplify your tax compliance, invoicing, and financial management.\n\nWhat would you like to do?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a GST Demo"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2567632853585898"}' (Nullable = false), @p253='APPROVED' (Nullable = false), @p254='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p255='91229b16-b5df-45de-9c85-b37ac5a0713f', @p256='You've reached support for our GST Software. How can we help?

🔧 Technical Help: For installation issues, errors, or bugs.
💡 Feature Questions: To understand how to use a specific feature.
📚 View FAQs: Get answers to common questions instantly.' (Nullable = false), @p257='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p258='[{"Type":"QUICK_REPLY","Text":"Talk to a Support Agent","SubType":"quick_reply","Index":0,"ParameterValue":""},{"Type":"QUICK_REPLY","Text":"View FAQs","SubType":"quick_reply","Index":1,"ParameterValue":""},{"Type":"QUICK_REPLY","Text":"Back to Support Menu","SubType":"quick_reply","Index":2,"ParameterValue":""}]' (Nullable = false), @p259='MARKETING', @p260='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p261='1305308197880244', @p262='False', @p263='True', @p264='en_US' (Nullable = false), @p265='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p266='support_gst_submenu_v1' (Nullable = false), @p267='0', @p268='meta_cloud' (Nullable = false), @p269='{"name":"support_gst_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"You've reached support for our GST Software. How can we help?\n\n🔧 Technical Help: For installation issues, errors, or bugs.\n💡 Feature Questions: To understand how to use a specific feature.\n📚 View FAQs: Get answers to common questions instantly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Support Agent"},{"type":"QUICK_REPLY","text":"View FAQs"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1305308197880244"}' (Nullable = false), @p270='APPROVED' (Nullable = false), @p271='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p272='98d3ec85-fa28-4842-a7fd-29b59616259e', @p273='Hello {{}}! The moment has arrived! 🎉

Our new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!

For the next 48 hours, get an **exclusive 15% discount** on your purchase. Don't just follow the trend—set it.

Use code: **LAUNCH15**

This offer won't last long. Step into the future today!' (Nullable = false), @p274='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p275='[{"Type":"URL","Text":"Shop now","SubType":"url","Index":0,"ParameterValue":"https://xplorebytesolutions.com/"},{"Type":"PHONE_NUMBER","Text":"Call us","SubType":"voice_call","Index":1,"ParameterValue":"+917082156227"}]' (Nullable = false), @p276='MARKETING', @p277='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p278='1100798472016654', @p279='True', @p280='True', @p281='en_US' (Nullable = false), @p282='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p283='shoe_launch_offer' (Nullable = false), @p284='1', @p285='meta_cloud' (Nullable = false), @p286='{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=7sw82IMY4uQQ7kNvwH39w34&_nc_oc=Adldk32JLZS90SUe22THKKcbPH-oMtv2wg2ba1GLtFjw2CJ-gLhNhJtaLRCBhrP9_0mYG6Hk2QpkPROBDtpeJPnW&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=ctwJ1D4JZ4nJyImwZziOPg&oh=01_Q5Aa2gHBIi8JXbXmws4EKP3lam9p2p6PMjFsSYoTjNVQEaCm0g&oe=68F4610F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! 🎉\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15% discount** on your purchase. Don't just follow the trend—set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https://xplorebytesolutions.com/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"}' (Nullable = false), @p287='APPROVED' (Nullable = false), @p288='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p289='a0acd421-4325-4a3a-8ca6-9b59401651c3', @p290='⚡️ Feature Annoucement ! ⚡️
Hi,
We rre happy to tell you that our most awaited feature Bot Integartion is live now.' (Nullable = false), @p291='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p292='[{"Type":"URL","Text":"Visit website","SubType":"url","Index":0,"ParameterValue":"https://www.mindsmiratus.com/%7B%7BI%7D%7D{{1}}"},{"Type":"URL","Text":"View Tutorials","SubType":"url","Index":1,"ParameterValue":"https://www.youtube.com/%7B%7Bi%7D%7D{{1}}"}]' (Nullable = false), @p293='MARKETING', @p294='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p295='3255438291278546', @p296='False', @p297='True', @p298='en_US' (Nullable = false), @p299='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p300='bot_launch' (Nullable = false), @p301='0', @p302='meta_cloud' (Nullable = false), @p303='{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"⚡️ Feature Annoucement ! ⚡️\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https://www.mindsmiratus.com/%7B%7BI%7D%7D{{1}}","example":["https://www.mindsmiratus.com/software-development"]},{"type":"URL","text":"View Tutorials","url":"https://www.youtube.com/%7B%7Bi%7D%7D{{1}}","example":["https://www.youtube.com/shorts/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"}' (Nullable = false), @p304='APPROVED' (Nullable = false), @p305='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p306='b1a74e7a-4efb-46c3-9efa-e6c366ca7ed2', @p307='We help you reach your target audience and grow your brand effectively. Explore our marketing services:

📈 Digital Marketing: SEO, Social Media Marketing, and targeted PPC campaigns.
📞 Tele-Marketing: IVR systems, Bulk SMS, Voice Calls, and official WhatsApp API solutions.' (Nullable = false), @p308='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p309='[{"Type":"QUICK_REPLY","Text":"Get a Marketing Plan","SubType":"quick_reply","Index":0,"ParameterValue":""},{"Type":"QUICK_REPLY","Text":"Back to Services Menu","SubType":"quick_reply","Index":1,"ParameterValue":""}]' (Nullable = false), @p310='MARKETING', @p311='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p312='1683803515627636', @p313='False', @p314='True', @p315='en_US' (Nullable = false), @p316='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p317='marketing_services_submenu_v1' (Nullable = false), @p318='0', @p319='meta_cloud' (Nullable = false), @p320='{"name":"marketing_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We help you reach your target audience and grow your brand effectively. Explore our marketing services:\n\n📈 Digital Marketing: SEO, Social Media Marketing, and targeted PPC campaigns.\n📞 Tele-Marketing: IVR systems, Bulk SMS, Voice Calls, and official WhatsApp API solutions."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Get a Marketing Plan"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1683803515627636"}' (Nullable = false), @p321='APPROVED' (Nullable = false), @p322='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p323='b6a6b799-3e3d-4ee7-b623-9e2c4e6c2c41', @p324='We'd love to discuss how we can help your business grow. You can reach our sales team via email at info@mindsmiratus.com or call us at +91-321-123-4321.

Would you like one of our experts to call you back?' (Nullable = false), @p325='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p326='[{"Type":"QUICK_REPLY","Text":"Yes, call me back","SubType":"quick_reply","Index":0,"ParameterValue":""},{"Type":"QUICK_REPLY","Text":"Back to Main Menu","SubType":"quick_reply","Index":1,"ParameterValue":""}]' (Nullable = false), @p327='MARKETING', @p328='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p329='954501560165102', @p330='False', @p331='True', @p332='en_US' (Nullable = false), @p333='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p334='contact_sales_info_v1' (Nullable = false), @p335='0', @p336='meta_cloud' (Nullable = false), @p337='{"name":"contact_sales_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We'd love to discuss how we can help your business grow. You can reach our sales team via email at info@mindsmiratus.com or call us at +91-321-123-4321.\n\nWould you like one of our experts to call you back?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Yes, call me back"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"954501560165102"}' (Nullable = false), @p338='APPROVED' (Nullable = false), @p339='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p340='bb5916ee-84f5-4498-a8c3-fe3c0d3f6d26', @p341='Thank you! We've received your request. One of our experts will get in touch with you shortly.

Is there anything else I can help you with in the meantime?' (Nullable = false), @p342='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p343='[{"Type":"QUICK_REPLY","Text":"Back to Main Menu","SubType":"quick_reply","Index":0,"ParameterValue":""}]' (Nullable = false), @p344='MARKETING', @p345='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p346='1304432401406654', @p347='False', @p348='True', @p349='en_US' (Nullable = false), @p350='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p351='human_takeover_confirmation_v1' (Nullable = false), @p352='0', @p353='meta_cloud' (Nullable = false), @p354='{"name":"human_takeover_confirmation_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Thank you! We've received your request. One of our experts will get in touch with you shortly.\n\nIs there anything else I can help you with in the meantime?"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1304432401406654"}' (Nullable = false), @p355='APPROVED' (Nullable = false), @p356='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p357='c179f183-26e7-416b-8238-92452c9e8879', @p358='Our creative team delivers stunning and effective designs to make your brand stand out. Which design service would you like to know more about?

🎨 Website Designing: We build beautiful, responsive, and user-friendly websites.
🖌️ Graphic Designing: We create compelling visuals, logos, and branding materials.' (Nullable = false), @p359='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p360='[{"Type":"QUICK_REPLY","Text":"Request a Design Quote","SubType":"quick_reply","Index":0,"ParameterValue":""},{"Type":"QUICK_REPLY","Text":"Back to Services Menu","SubType":"quick_reply","Index":1,"ParameterValue":""}]' (Nullable = false), @p361='MARKETING', @p362='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p363='3291988187631744', @p364='False', @p365='True', @p366='en_US' (Nullable = false), @p367='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p368='design_services_submenu_v1' (Nullable = false), @p369='0', @p370='meta_cloud' (Nullable = false), @p371='{"name":"design_services_submenu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our creative team delivers stunning and effective designs to make your brand stand out. Which design service would you like to know more about?\n\n🎨 Website Designing: We build beautiful, responsive, and user-friendly websites.\n🖌️ Graphic Designing: We create compelling visuals, logos, and branding materials."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a Design Quote"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3291988187631744"}' (Nullable = false), @p372='APPROVED' (Nullable = false), @p373='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p374='e509a85e-db74-41f2-9591-f1e5893c4c85', @p375='Hello

Please check our newaly launched Ai Boat.' (Nullable = false), @p376='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p377='[{"Type":"URL","Text":"Visit website","SubType":"url","Index":0,"ParameterValue":"https://www.mindsmiratus.com/{{1}}"},{"Type":"URL","Text":"watch Video","SubType":"url","Index":1,"ParameterValue":"https://www.youtube.com/{{1}}"}]' (Nullable = false), @p378='MARKETING', @p379='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p380='663456696777015', @p381='False', @p382='True', @p383='en_US' (Nullable = false), @p384='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p385='offer_aiboat' (Nullable = false), @p386='0', @p387='meta_cloud' (Nullable = false), @p388='{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https://www.mindsmiratus.com/{{1}}","example":["https://www.mindsmiratus.com/software-development"]},{"type":"URL","text":"watch Video","url":"https://www.youtube.com/{{1}}","example":["https://www.youtube.com/shorts/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"}' (Nullable = false), @p389='APPROVED' (Nullable = false), @p390='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p391='e620a2c2-b079-497c-94c0-2d1e4238b1b2', @p392='This is teh template 2' (Nullable = false), @p393='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p394='[{"Type":"QUICK_REPLY","Text":"Show Me Template 1","SubType":"quick_reply","Index":0,"ParameterValue":""}]' (Nullable = false), @p395='MARKETING', @p396='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p397='1222093123248950', @p398='False', @p399='True', @p400='en_US' (Nullable = false), @p401='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p402='template_2' (Nullable = false), @p403='0', @p404='meta_cloud' (Nullable = false), @p405='{"name":"template_2","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 2"},{"type":"BODY","text":"This is teh template 2"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1222093123248950"}' (Nullable = false), @p406='APPROVED' (Nullable = false), @p407='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p408='e7743dd3-0a4d-42e4-8933-56511ac89b2c', @p409='Tracking Test after FlowIntergartion in Journey' (Nullable = false), @p410='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p411='[{"Type":"URL","Text":"Visit website","SubType":"url","Index":0,"ParameterValue":"https://2a611865c2cd.ngrok-free.app/r/{{1}}"},{"Type":"URL","Text":"Visit Demo","SubType":"url","Index":1,"ParameterValue":"https://2a611865c2cd.ngrok-free.app/r/{{1}}"}]' (Nullable = false), @p412='MARKETING', @p413='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p414='1084981273615848', @p415='False', @p416='True', @p417='en_US' (Nullable = false), @p418='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p419='track_url_after_flow_integ' (Nullable = false), @p420='0', @p421='meta_cloud' (Nullable = false), @p422='{"name":"track_url_after_flow_integ","message_send_ttl_seconds":86400,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BODY","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https://2a611865c2cd.ngrok-free.app/r/{{1}}","example":["https://2a611865c2cd.ngrok-free.app/vosiatstore"]},{"type":"URL","text":"Visit Demo","url":"https://2a611865c2cd.ngrok-free.app/r/{{1}}","example":["https://2a611865c2cd.ngrok-free.app/demo"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1084981273615848"}' (Nullable = false), @p423='APPROVED' (Nullable = false), @p424='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p425='fe26cc9d-4272-4e5d-a303-351e5ec5d786', @p426='This is the Template : 1' (Nullable = false), @p427='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p428='[{"Type":"QUICK_REPLY","Text":"Show Me Template 2","SubType":"quick_reply","Index":0,"ParameterValue":""},{"Type":"QUICK_REPLY","Text":"Show Me Template 3","SubType":"quick_reply","Index":1,"ParameterValue":""}]' (Nullable = false), @p429='MARKETING', @p430='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p431='2381212765606675', @p432='False', @p433='True', @p434='en_US' (Nullable = false), @p435='2025-09-19T07:40:00.4817023Z' (DbType = DateTime), @p436='template_1' (Nullable = false), @p437='0', @p438='meta_cloud' (Nullable = false), @p439='{"name":"template_1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 1"},{"type":"BODY","text":"This is the Template : 1"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 2"},{"type":"QUICK_REPLY","text":"Show Me Template 3"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2381212765606675"}' (Nullable = false), @p440='APPROVED' (Nullable = false), @p441='2025-09-19T07:40:00.4817023Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p85, @p86, @p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, @p99, @p100, @p101);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p102, @p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, @p117, @p118);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p119, @p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127, @p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p136, @p137, @p138, @p139, @p140, @p141, @p142, @p143, @p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151, @p152);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p153, @p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161, @p162, @p163, @p164, @p165, @p166, @p167, @p168, @p169);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p170, @p171, @p172, @p173, @p174, @p175, @p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183, @p184, @p185, @p186);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p187, @p188, @p189, @p190, @p191, @p192, @p193, @p194, @p195, @p196, @p197, @p198, @p199, @p200, @p201, @p202, @p203);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p204, @p205, @p206, @p207, @p208, @p209, @p210, @p211, @p212, @p213, @p214, @p215, @p216, @p217, @p218, @p219, @p220);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p221, @p222, @p223, @p224, @p225, @p226, @p227, @p228, @p229, @p230, @p231, @p232, @p233, @p234, @p235, @p236, @p237);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p238, @p239, @p240, @p241, @p242, @p243, @p244, @p245, @p246, @p247, @p248, @p249, @p250, @p251, @p252, @p253, @p254);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p255, @p256, @p257, @p258, @p259, @p260, @p261, @p262, @p263, @p264, @p265, @p266, @p267, @p268, @p269, @p270, @p271);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p272, @p273, @p274, @p275, @p276, @p277, @p278, @p279, @p280, @p281, @p282, @p283, @p284, @p285, @p286, @p287, @p288);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p289, @p290, @p291, @p292, @p293, @p294, @p295, @p296, @p297, @p298, @p299, @p300, @p301, @p302, @p303, @p304, @p305);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p306, @p307, @p308, @p309, @p310, @p311, @p312, @p313, @p314, @p315, @p316, @p317, @p318, @p319, @p320, @p321, @p322);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p323, @p324, @p325, @p326, @p327, @p328, @p329, @p330, @p331, @p332, @p333, @p334, @p335, @p336, @p337, @p338, @p339);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p340, @p341, @p342, @p343, @p344, @p345, @p346, @p347, @p348, @p349, @p350, @p351, @p352, @p353, @p354, @p355, @p356);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p357, @p358, @p359, @p360, @p361, @p362, @p363, @p364, @p365, @p366, @p367, @p368, @p369, @p370, @p371, @p372, @p373);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p374, @p375, @p376, @p377, @p378, @p379, @p380, @p381, @p382, @p383, @p384, @p385, @p386, @p387, @p388, @p389, @p390);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p391, @p392, @p393, @p394, @p395, @p396, @p397, @p398, @p399, @p400, @p401, @p402, @p403, @p404, @p405, @p406, @p407);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p408, @p409, @p410, @p411, @p412, @p413, @p414, @p415, @p416, @p417, @p418, @p419, @p420, @p421, @p422, @p423, @p424);
INSERT INTO "WhatsAppTemplates" ("Id", "Body", "BusinessId", "ButtonsJson", "Category", "CreatedAt", "ExternalId", "HasImageHeader", "IsActive", "Language", "LastSyncedAt", "Name", "PlaceholderCount", "Provider", "RawJson", "Status", "UpdatedAt")
VALUES (@p425, @p426, @p427, @p428, @p429, @p430, @p431, @p432, @p433, @p434, @p435, @p436, @p437, @p438, @p439, @p440, @p441);
2025-09-19 13:10:02.951 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType182`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 13:10:02.954 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 2557.3728ms
2025-09-19 13:10:02.955 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-09-19 13:10:02.956 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 200 null application/json; charset=utf-8 2567.0792ms
2025-09-19 13:10:02.968 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 13:10:02.970 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:10:02.971 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 204 null null 2.7903ms
2025-09-19 13:10:02.973 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 13:10:02.975 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:10:02.976 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 13:10:02.977 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-19 13:10:02.981 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-19 13:10:02.986 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType107`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType183`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 13:10:02.988 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 10.1786ms
2025-09-19 13:10:02.989 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 13:10:02.990 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 200 null application/json; charset=utf-8 16.8174ms
2025-09-19 13:10:16.787 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/welcome_menu_minds - null null
2025-09-19 13:10:16.790 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:10:16.791 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/welcome_menu_minds - 204 null null 3.7493ms
2025-09-19 13:10:16.794 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/welcome_menu_minds - null null
2025-09-19 13:10:16.796 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:10:16.797 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-19 13:10:16.801 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-19 13:10:16.810 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__name_1='welcome_menu_minds'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-09-19 13:10:16.814 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType184`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 13:10:16.817 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 15.2811ms
2025-09-19 13:10:16.819 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-19 13:10:16.819 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/welcome_menu_minds - 200 null application/json; charset=utf-8 25.5262ms
2025-09-19 13:10:29.959 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/hello_world - null null
2025-09-19 13:10:29.961 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:10:29.962 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/hello_world - 204 null null 3.3265ms
2025-09-19 13:10:29.965 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/hello_world - null null
2025-09-19 13:10:29.967 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:10:29.967 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-19 13:10:29.968 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-19 13:10:29.972 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__name_1='hello_world'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-09-19 13:10:29.975 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType184`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 13:10:29.976 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 6.3019ms
2025-09-19 13:10:29.977 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-19 13:10:29.978 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/hello_world - 200 null application/json; charset=utf-8 13.4165ms
2025-09-19 13:10:37.422 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-09-19 13:10:37.425 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:10:37.426 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 3.5136ms
2025-09-19 13:10:37.428 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 267
2025-09-19 13:10:37.433 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:10:37.434 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-19 13:10:37.437 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 13:10:37.460 +05:30 [INF] ℹ️ No flow attached to campaign 'Tes001'. Proceeding as plain template campaign.
2025-09-19 13:10:37.470 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 13:10:37.473 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 13:10:37.475 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 13:10:39.132 +05:30 [INF] Received HTTP response headers after 1656.0894ms - 200
2025-09-19 13:10:39.133 +05:30 [INF] End processing HTTP request after 1660.6284ms - 200
2025-09-19 13:10:39.233 +05:30 [ERR] Failed executing DbCommand (6ms) [Parameters=[@p0='1401d018-5a8a-486c-81a5-5c6bccb5377e', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='text', @p5='2025-09-19T07:40:39.1809465Z' (DbType = DateTime), @p6='system', @p7=NULL (DbType = Guid), @p8=NULL (DbType = DateTime), @p9=NULL, @p10=NULL, @p11=NULL, @p12=NULL, @p13='False', @p14='Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us.', @p15='hello_world' (Nullable = false), @p16='Tes001' (Nullable = false), @p17=NULL, @p18=NULL, @p19=NULL (DbType = DateTime), @p20=NULL (DbType = Guid), @p21='Draft' (Nullable = false), @p22='hello_world', @p23='[]', @p24='2025-09-19T07:40:39.1809886Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CTAFlowConfigId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "PhoneNumberId", "Provider", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
2025-09-19 13:10:39.258 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'xbytechat.api.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "PhoneNumberId" of relation "Campaigns" does not exist

POSITION: 261
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "PhoneNumberId" of relation "Campaigns" does not exist
    Position: 261
    File: parse_target.c
    Line: 1071
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "PhoneNumberId" of relation "Campaigns" does not exist

POSITION: 261
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "PhoneNumberId" of relation "Campaigns" does not exist
    Position: 261
    File: parse_target.c
    Line: 1071
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-09-19 13:10:40.947 +05:30 [ERR] ❌ Failed to create campaign
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "PhoneNumberId" of relation "Campaigns" does not exist

POSITION: 261
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "PhoneNumberId" of relation "Campaigns" does not exist
    Position: 261
    File: parse_target.c
    Line: 1071
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.CreateTextCampaignAsync(CampaignCreateDto dto, Guid businessId, String createdBy) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 451
2025-09-19 13:10:42.199 +05:30 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 13:10:42.202 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 4762.99ms
2025-09-19 13:10:42.204 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-19 13:10:42.205 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 400 null application/json; charset=utf-8 4776.6145ms
2025-09-19 13:14:14.807 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-09-19 13:14:14.814 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:14:14.815 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 7.7765ms
2025-09-19 13:14:14.823 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 267
2025-09-19 13:14:14.825 +05:30 [INF] CORS policy execution successful.
2025-09-19 13:14:14.826 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-19 13:14:14.827 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 14:23:43.889 +05:30 [INF] ℹ️ No flow attached to campaign 'Tes001'. Proceeding as plain template campaign.
2025-09-19 14:23:44.009 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/demo - null null
2025-09-19 14:23:44.009 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/services_menu_v1 - null null
2025-09-19 14:23:44.071 +05:30 [INF] CORS policy execution successful.
2025-09-19 14:23:44.076 +05:30 [INF] CORS policy execution successful.
2025-09-19 14:23:44.080 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/demo - 204 null null 72.3292ms
2025-09-19 14:23:44.102 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/services_menu_v1 - 204 null null 93.7972ms
2025-09-19 14:23:44.120 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/services_menu_v1 - null null
2025-09-19 14:23:44.014 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/template_2 - null null
2025-09-19 14:23:44.138 +05:30 [INF] CORS policy execution successful.
2025-09-19 14:23:44.046 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 14:23:44.140 +05:30 [INF] CORS policy execution successful.
2025-09-19 14:23:44.076 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsapp/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 14:23:44.145 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/template_2 - 204 null null 131.6313ms
2025-09-19 14:23:44.149 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/template_2 - null null
2025-09-19 14:23:44.145 +05:30 [INF] CORS policy execution successful.
2025-09-19 14:23:44.149 +05:30 [INF] CORS policy execution successful.
2025-09-19 14:23:44.110 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/demo - null null
2025-09-19 14:23:44.158 +05:30 [INF] CORS policy execution successful.
2025-09-19 14:23:44.160 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 204 null null 113.408ms
2025-09-19 14:23:44.161 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsapp/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 204 null null 85.5263ms
2025-09-19 14:23:44.166 +05:30 [INF] CORS policy execution successful.
2025-09-19 14:23:44.172 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 14:23:44.177 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsapp/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 14:23:44.162 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19-09-2025 08:39:49 AM', Current time (UTC): '19-09-2025 08:53:44 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-19 14:23:44.168 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19-09-2025 08:39:49 AM', Current time (UTC): '19-09-2025 08:53:44 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-19 14:23:44.181 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19-09-2025 08:39:49 AM', Current time (UTC): '19-09-2025 08:53:44 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-19 14:23:44.184 +05:30 [INF] CORS policy execution successful.
2025-09-19 14:23:44.187 +05:30 [INF] CORS policy execution successful.
2025-09-19 14:23:44.194 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19-09-2025 08:39:49 AM', Current time (UTC): '19-09-2025 08:53:44 AM'.
2025-09-19 14:23:44.194 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19-09-2025 08:39:49 AM', Current time (UTC): '19-09-2025 08:53:44 AM'.
2025-09-19 14:23:44.194 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19-09-2025 08:39:49 AM', Current time (UTC): '19-09-2025 08:53:44 AM'.
2025-09-19 14:23:44.197 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19-09-2025 08:39:49 AM', Current time (UTC): '19-09-2025 08:53:44 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-19 14:23:44.197 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19-09-2025 08:39:49 AM', Current time (UTC): '19-09-2025 08:53:44 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-19 14:23:44.204 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19-09-2025 08:39:49 AM', Current time (UTC): '19-09-2025 08:53:44 AM'.
2025-09-19 14:23:44.206 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19-09-2025 08:39:49 AM', Current time (UTC): '19-09-2025 08:53:44 AM'.
2025-09-19 14:23:44.212 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-19 14:23:44.212 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-19 14:23:44.212 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-19 14:23:44.213 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsapp/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 404 0 null 36.2903ms
2025-09-19 14:23:44.212 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-19 14:23:44.230 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/whatsapp/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11, Response status code: 404
2025-09-19 14:23:44.232 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-19 14:23:44.232 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-19 14:23:44.232 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-19 14:23:44.232 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-19 14:23:44.235 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/services_menu_v1 - 401 0 null 114.8435ms
2025-09-19 14:23:44.236 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/template_2 - 401 0 null 87.6895ms
2025-09-19 14:23:44.238 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 401 0 null 65.6354ms
2025-09-19 14:23:44.241 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 14:23:44.239 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/demo - 401 0 null 128.7653ms
2025-09-19 14:23:44.270 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 14:23:44.271 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 14:23:44.736 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 14:23:44.741 +05:30 [INF] Received HTTP response headers after 467.5756ms - 401
2025-09-19 14:23:44.749 +05:30 [INF] End processing HTTP request after 480.5307ms - 401
2025-09-19 14:23:44.767 +05:30 [ERR] ❌ Failed to fetch templates (provider=meta_cloud) for BusinessId "10d9469d-4e77-4845-a87f-dbc7e3348b11": HTTP 401 Body: {"error":{"message":"Error validating access token: Session has expired on Friday, 19-Sep-25 01:00:00 PDT. The current time is Friday, 19-Sep-25 01:53:47 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"Ab4aiTW9-aSxesBACZ1a5Nf"}}
2025-09-19 14:23:44.817 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 80.6504ms
2025-09-19 14:23:44.825 +05:30 [ERR] Failed executing DbCommand (10ms) [Parameters=[@p0='0359d83a-d3c5-47c6-b5f3-251a9ad0288f', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='text', @p5='2025-09-19T08:53:44.7841599Z' (DbType = DateTime), @p6='system', @p7=NULL (DbType = Guid), @p8=NULL (DbType = DateTime), @p9=NULL, @p10=NULL, @p11=NULL, @p12=NULL, @p13='False', @p14='hello_world', @p15='hello_world' (Nullable = false), @p16='Tes001' (Nullable = false), @p17=NULL, @p18=NULL, @p19=NULL (DbType = DateTime), @p20=NULL (DbType = Guid), @p21='Draft' (Nullable = false), @p22='hello_world', @p23='[]', @p24='2025-09-19T08:53:44.7841601Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CTAFlowConfigId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "PhoneNumberId", "Provider", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
2025-09-19 14:23:44.982 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 14:23:44.987 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 14:23:44.991 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.5821ms
2025-09-19 14:23:45.032 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 45.2225ms
2025-09-19 14:23:45.625 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 14:23:46.344 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 718.8889ms
2025-09-19 14:23:44.856 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'xbytechat.api.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "PhoneNumberId" of relation "Campaigns" does not exist

POSITION: 261
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "PhoneNumberId" of relation "Campaigns" does not exist
    Position: 261
    File: parse_target.c
    Line: 1071
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "PhoneNumberId" of relation "Campaigns" does not exist

POSITION: 261
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "PhoneNumberId" of relation "Campaigns" does not exist
    Position: 261
    File: parse_target.c
    Line: 1071
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-09-19 14:23:48.321 +05:30 [ERR] ❌ Failed to create campaign
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "PhoneNumberId" of relation "Campaigns" does not exist

POSITION: 261
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "PhoneNumberId" of relation "Campaigns" does not exist
    Position: 261
    File: parse_target.c
    Line: 1071
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.CreateTextCampaignAsync(CampaignCreateDto dto, Guid businessId, String createdBy)
2025-09-19 14:23:49.869 +05:30 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 14:23:49.878 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 4175049.4506ms
2025-09-19 14:23:49.880 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-19 14:23:49.881 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 499 null application/json; charset=utf-8 4175057.748ms
2025-09-19 14:23:52.059 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-19 14:23:52.064 +05:30 [INF] CORS policy execution successful.
2025-09-19 14:23:52.065 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 5.3657ms
2025-09-19 14:23:52.068 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 49
2025-09-19 14:23:52.077 +05:30 [INF] CORS policy execution successful.
2025-09-19 14:23:52.078 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 14:23:52.085 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-19 14:23:52.091 +05:30 [INF] 🔑 Login attempt for email: tesla@gmail.com
2025-09-19 14:23:52.101 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_Email_0='tesla@gmail.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-19 14:23:52.108 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-19 14:23:52.123 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='24c1a1d5-9f49-4555-8663-497a30b5ea8c'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-19 14:23:52.126 +05:30 [INF] ✅ Token generated for: tesla@gmail.com
2025-09-19 14:23:52.128 +05:30 [INF] 🔎 JWT includes plan_id: 5f9f5de1-a0b2-48ba-b03d-77b27345613f
2025-09-19 14:23:52.129 +05:30 [INF] ✅ Login successful for tesla@gmail.com, Role: business, PlanId: "5f9f5de1-a0b2-48ba-b03d-77b27345613f"
2025-09-19 14:23:52.130 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 14:23:52.132 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 46.018ms
2025-09-19 14:23:52.133 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 14:23:52.134 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 66.6483ms
2025-09-19 14:23:52.138 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 14:23:52.141 +05:30 [INF] CORS policy execution successful.
2025-09-19 14:23:52.141 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.05ms
2025-09-19 14:23:52.144 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 14:23:52.147 +05:30 [INF] CORS policy execution successful.
2025-09-19 14:23:52.148 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 14:23:52.151 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 14:23:52.156 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-19 14:23:52.162 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 14:23:52.164 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 14:23:52.167 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.2129ms
2025-09-19 14:23:52.168 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 14:23:52.169 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.5489ms
2025-09-19 14:23:52.182 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 14:23:52.184 +05:30 [INF] CORS policy execution successful.
2025-09-19 14:23:52.185 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.4586ms
2025-09-19 14:23:52.191 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 14:23:52.193 +05:30 [INF] CORS policy execution successful.
2025-09-19 14:23:52.194 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 14:23:52.195 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 14:23:52.199 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 14:23:52.203 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 14:23:52.204 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.1429ms
2025-09-19 14:23:52.205 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 14:23:52.206 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.3268ms
2025-09-19 14:23:52.259 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 14:23:52.261 +05:30 [INF] CORS policy execution successful.
2025-09-19 14:23:52.262 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 14:23:52.263 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 14:23:52.267 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 14:23:52.270 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 14:23:52.271 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.0508ms
2025-09-19 14:23:52.273 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 14:23:52.274 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.9242ms
2025-09-19 14:23:55.662 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 14:23:55.662 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsapp/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 14:23:55.665 +05:30 [INF] CORS policy execution successful.
2025-09-19 14:23:55.667 +05:30 [INF] CORS policy execution successful.
2025-09-19 14:23:55.667 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 204 null null 5.4872ms
2025-09-19 14:23:55.668 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsapp/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 204 null null 6.0153ms
2025-09-19 14:23:55.671 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsapp/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 14:23:55.674 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 14:23:55.676 +05:30 [INF] CORS policy execution successful.
2025-09-19 14:23:55.679 +05:30 [INF] CORS policy execution successful.
2025-09-19 14:23:55.679 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsapp/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 404 0 null 7.8447ms
2025-09-19 14:23:55.680 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 14:23:55.682 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/whatsapp/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11, Response status code: 404
2025-09-19 14:23:55.687 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-19 14:23:55.695 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-19 14:23:55.698 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType107`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType183`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 14:23:55.702 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 13.0033ms
2025-09-19 14:23:55.704 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 14:23:55.705 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 200 null application/json; charset=utf-8 30.3858ms
2025-09-19 15:28:14.912 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 15:28:14.953 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 15:28:14.968 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 15:28:15.770 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 15:28:16.274 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 15:28:16.294 +05:30 [INF] ClickLogWorker started
2025-09-19 15:28:16.539 +05:30 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-19 15:28:16.542 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 15:28:16.544 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 15:28:16.545 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 15:28:16.546 +05:30 [INF] Hosting environment: Development
2025-09-19 15:28:16.547 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 15:28:16.559 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@__cutoff_0='2025-09-12T09:58:15.0815965Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-19 15:28:17.403 +05:30 [INF] ClickLogWorker stopped
2025-09-19 15:28:17.406 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 15:28:17.750 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 398.487ms
2025-09-19 15:28:17.777 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 15:28:17.783 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.7381ms
2025-09-19 15:28:17.829 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 15:28:17.870 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 40.7218ms
2025-09-19 15:28:18.018 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 15:28:18.457 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 439.3049ms
2025-09-19 15:28:53.819 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-19 15:28:53.831 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 15:28:53.906 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:28:53.910 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 91.154ms
2025-09-19 15:28:53.917 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 49
2025-09-19 15:28:53.926 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:28:53.968 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 15:28:53.984 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-19 15:28:54.050 +05:30 [INF] 🔑 Login attempt for email: tesla@gmail.com
2025-09-19 15:28:54.123 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@__dto_Email_0='tesla@gmail.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-19 15:28:54.210 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__user_BusinessId_Value_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-19 15:28:54.320 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='24c1a1d5-9f49-4555-8663-497a30b5ea8c'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-19 15:28:54.328 +05:30 [INF] ✅ Token generated for: tesla@gmail.com
2025-09-19 15:28:54.389 +05:30 [INF] 🔎 JWT includes plan_id: 5f9f5de1-a0b2-48ba-b03d-77b27345613f
2025-09-19 15:28:54.391 +05:30 [INF] ✅ Login successful for tesla@gmail.com, Role: business, PlanId: "5f9f5de1-a0b2-48ba-b03d-77b27345613f"
2025-09-19 15:28:54.399 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 15:28:54.407 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 418.726ms
2025-09-19 15:28:54.409 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 15:28:54.413 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 496.3719ms
2025-09-19 15:28:54.417 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 15:28:54.420 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:28:54.421 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.7672ms
2025-09-19 15:28:54.430 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 15:28:54.433 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:28:54.468 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 15:28:54.475 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 15:28:54.489 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-19 15:28:54.517 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 15:28:54.521 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 15:28:54.532 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 55.5818ms
2025-09-19 15:28:54.534 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 15:28:54.535 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 105.1639ms
2025-09-19 15:28:54.548 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 15:28:54.551 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:28:54.553 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.6711ms
2025-09-19 15:28:54.565 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 15:28:54.569 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:28:54.575 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 15:28:54.577 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 15:28:54.587 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 15:28:54.592 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 15:28:54.594 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.9636ms
2025-09-19 15:28:54.596 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 15:28:54.597 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 32.7374ms
2025-09-19 15:28:54.651 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 15:28:54.655 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:28:54.658 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 15:28:54.660 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 15:28:54.669 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 15:28:54.674 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 15:28:54.675 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.6984ms
2025-09-19 15:28:54.677 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 15:28:54.678 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 27.5991ms
2025-09-19 15:28:59.919 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 15:28:59.923 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsapp/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 15:28:59.924 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:28:59.930 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 204 null null 10.2671ms
2025-09-19 15:28:59.930 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:28:59.938 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsapp/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 204 null null 15.0907ms
2025-09-19 15:28:59.939 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 15:28:59.942 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsapp/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 15:28:59.946 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:28:59.947 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:28:59.949 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsapp/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 404 0 null 7.4975ms
2025-09-19 15:28:59.953 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:7113/api/whatsapp/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11, Response status code: 404
2025-09-19 15:28:59.953 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 15:28:59.961 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-19 15:28:59.985 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-19 15:28:59.988 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType107`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType183`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 15:28:59.995 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 31.9187ms
2025-09-19 15:28:59.996 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 15:28:59.997 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 200 null application/json; charset=utf-8 58.3624ms
2025-09-19 15:38:57.769 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 15:38:57.807 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 15:38:57.820 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 15:38:58.607 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 15:38:59.117 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 15:38:59.135 +05:30 [INF] ClickLogWorker started
2025-09-19 15:38:59.311 +05:30 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-19 15:38:59.311 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 15:38:59.315 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 15:38:59.316 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 15:38:59.317 +05:30 [INF] Hosting environment: Development
2025-09-19 15:38:59.318 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 15:38:59.332 +05:30 [INF] Executed DbCommand (53ms) [Parameters=[@__cutoff_0='2025-09-12T10:08:57.9106502Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-19 15:39:00.186 +05:30 [INF] ClickLogWorker stopped
2025-09-19 15:39:01.402 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 15:39:01.601 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 206.0096ms
2025-09-19 15:39:01.733 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 15:39:01.733 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 15:39:01.742 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 9.4695ms
2025-09-19 15:39:01.775 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 42.245ms
2025-09-19 15:39:01.911 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 15:39:02.156 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 244.6706ms
2025-09-19 15:39:12.347 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 15:39:12.352 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 15:39:12.407 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:39:12.412 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 65.1855ms
2025-09-19 15:39:12.417 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 15:39:12.432 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:39:12.578 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 15:39:12.592 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 15:39:12.702 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-19 15:39:12.763 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 15:39:12.774 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 15:39:12.799 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 201.0397ms
2025-09-19 15:39:12.801 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 15:39:12.806 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 389.4023ms
2025-09-19 15:39:12.811 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 15:39:12.814 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:39:12.816 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.7004ms
2025-09-19 15:39:12.819 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 15:39:12.822 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:39:12.825 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 15:39:12.827 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 15:39:12.836 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 15:39:12.840 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 15:39:12.842 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.2833ms
2025-09-19 15:39:12.843 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 15:39:12.845 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 25.5379ms
2025-09-19 15:39:12.884 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 15:39:12.886 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 15:39:12.886 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 15:39:12.889 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:39:12.893 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:39:12.896 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:39:12.898 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 204 null null 11.9799ms
2025-09-19 15:39:12.899 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 204 null null 12.7462ms
2025-09-19 15:39:12.902 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 15:39:12.903 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 15:39:12.907 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 15:39:12.908 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 15:39:12.912 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:39:12.915 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:39:12.918 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-19 15:39:12.922 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 15:39:12.924 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 15:39:12.928 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 15:39:12.929 +05:30 [INF] Route matched with {action = "GetSenders", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSenders(System.Guid) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 15:39:12.934 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 19.179ms
2025-09-19 15:39:12.939 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 15:39:12.939 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-19 15:39:12.941 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 56.6809ms
2025-09-19 15:39:22.391 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-19 15:39:22.401 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType107`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType183`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 15:39:22.419 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 15:39:24.467 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 11522.1591ms
2025-09-19 15:39:28.661 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 15:39:28.681 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 200 null application/json; charset=utf-8 15777.8105ms
2025-09-19 15:39:46.899 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.WhatsAppSettings.DTOs.WhatsAppSenderDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 15:39:50.802 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api) in 37865.0118ms
2025-09-19 15:39:50.804 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-19 15:39:53.495 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 200 null application/json; charset=utf-8 40588.7677ms
2025-09-19 15:41:47.180 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 15:41:47.182 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 15:41:47.188 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:41:47.189 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:41:47.190 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 204 null null 11.519ms
2025-09-19 15:41:47.190 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 204 null null 7.9053ms
2025-09-19 15:41:47.196 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 15:41:47.198 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 15:41:47.200 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:41:47.202 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:41:47.204 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-19 15:41:47.204 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 15:41:47.205 +05:30 [INF] Route matched with {action = "GetSenders", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSenders(System.Guid) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 15:41:47.205 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-19 15:43:39.257 +05:30 [INF] Executed DbCommand (97,038ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-19 15:43:39.270 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 15:43:39.276 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType107`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType183`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 15:43:39.285 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 15:43:39.273 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 15:43:39.283 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:43:39.286 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 15:43:39.302 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:43:39.303 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 112094.453ms
2025-09-19 15:43:39.304 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.WhatsAppSettings.DTOs.WhatsAppSenderDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 15:43:39.305 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 204 null null 34.7003ms
2025-09-19 15:43:39.311 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 204 null null 26.4988ms
2025-09-19 15:43:39.312 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 15:43:39.314 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api) in 112107.1015ms
2025-09-19 15:43:39.316 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 15:43:39.310 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:43:39.283 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 15:43:39.288 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 15:43:39.292 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 15:43:39.319 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 499 null application/json; charset=utf-8 112121.0451ms
2025-09-19 15:43:39.320 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-19 15:43:39.322 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:43:39.323 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 37.1884ms
2025-09-19 15:43:39.325 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:43:39.331 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 499 null application/json; charset=utf-8 112135.4004ms
2025-09-19 15:43:39.332 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 16.174ms
2025-09-19 15:43:39.326 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:43:39.328 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:43:39.335 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 204 null null 52.9214ms
2025-09-19 15:43:39.340 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 15:43:39.341 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 204 null null 54.0578ms
2025-09-19 15:43:39.342 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 49.1933ms
2025-09-19 15:43:39.346 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:43:39.353 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 15:43:39.354 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 15:43:39.358 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 15:43:39.361 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 15:43:39.362 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.2879ms
2025-09-19 15:43:39.364 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 15:43:39.365 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 24.4032ms
2025-09-19 15:43:39.374 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 15:43:39.376 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:43:39.377 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.8022ms
2025-09-19 15:43:39.379 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 15:43:39.381 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:43:39.383 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 15:43:39.384 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 15:43:39.388 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 15:43:39.391 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 15:43:39.392 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.9983ms
2025-09-19 15:43:39.393 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 15:43:39.394 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 15.0471ms
2025-09-19 15:43:39.439 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 15:43:39.439 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 15:43:39.439 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 15:43:39.442 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:43:39.444 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:43:39.446 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:43:39.447 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 15:43:39.448 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 15:43:39.448 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 15:43:39.449 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 15:43:39.453 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 15:43:39.453 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 15:43:39.455 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 15:43:39.460 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 15:43:39.462 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 10.2837ms
2025-09-19 15:43:39.464 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 15:43:39.465 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.1213ms
2025-09-19 15:43:39.473 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='PINNACLE'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 15:43:39.475 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-19 15:43:39.479 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 15:43:39.488 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 29.7055ms
2025-09-19 15:43:39.490 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 15:43:39.491 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 200 null application/json; charset=utf-8 51.445ms
2025-09-19 15:43:39.518 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-09-19 15:43:39.526 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 68.7564ms
2025-09-19 15:43:39.527 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 15:43:39.528 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 88.9981ms
2025-09-19 15:43:39.532 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 15:43:39.534 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:43:39.535 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 15:43:39.536 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 15:43:39.541 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 15:43:39.545 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 15:43:39.547 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 9.4842ms
2025-09-19 15:43:39.548 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 15:43:39.549 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 17.7278ms
2025-09-19 15:43:39.591 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 15:43:39.593 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:43:39.594 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 15:43:39.595 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 15:43:39.601 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 15:43:39.604 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 15:43:39.605 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 8.6134ms
2025-09-19 15:43:39.606 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 15:43:39.607 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 16.8098ms
2025-09-19 15:43:54.478 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 15:43:54.481 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:43:54.482 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 3.5257ms
2025-09-19 15:43:54.485 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - application/json 173
2025-09-19 15:43:54.487 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:43:54.489 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api)'
2025-09-19 15:43:54.493 +05:30 [INF] Route matched with {action = "Upsert", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Upsert(System.String, UpsertRequest) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 15:43:56.034 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
LIMIT 1
2025-09-19 15:43:56.043 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__providerForChild_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__providerForChild_1 AND w."PhoneNumberId" = @__phoneNumberId_2
LIMIT 1
2025-09-19 15:43:56.179 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@p1='e7abb04c-eaee-4f66-9234-6ef058499674', @p0='2025-09-19T10:13:56.0105929Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 15:43:56.229 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__providerForChild_1='META_CLOUD', @__entity_Id_2='e7abb04c-eaee-4f66-9234-6ef058499674'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" AS w
SET "IsDefault" = FALSE
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__providerForChild_1 AND w."Id" <> @__entity_Id_2
2025-09-19 15:43:56.239 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='c13c2c23-4ed0-4441-b5b2-6b2b581bdca3', @p0='2025-09-19T10:13:56.0105929Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 15:43:56.259 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber'.
2025-09-19 15:43:56.261 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api) in 1767.0452ms
2025-09-19 15:43:56.263 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api)'
2025-09-19 15:43:56.265 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 1779.8563ms
2025-09-19 15:43:58.172 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-09-19 15:43:58.175 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:43:58.176 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 4.5136ms
2025-09-19 15:43:58.180 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 574
2025-09-19 15:43:58.184 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:43:58.186 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 15:43:58.191 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 15:43:58.211 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__dto_Provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0 AND w."Provider" = @__dto_Provider_1
LIMIT 1
2025-09-19 15:43:58.220 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='c13c2c23-4ed0-4441-b5b2-6b2b581bdca3', @p0='EAAUbmP4285YBPTUDfGAlfUKYgeWyZBxYuyZCr9bI9YDwgZAEnEtQavfVDSfwPxVBouxEBtBmXsT6SHl449JAJDihMH8I9HOpyTF2ZBI3GGrtn0uaip3qkwkdQSFvLUqKmZBkveF1AZBT2TXTMMQ7rDOTynP8l9SBxstmVq6cCoDp1kSCO25O6Ys94sZCcKZCI8AKN2W6jhAUYVfXN0NPZBtwZBhyZBEQjwZCzVqAuyxlAcYGhwBEGsHk56VIGZAHwNgSWIQZDZD' (Nullable = false), @p1='2025-09-19T10:13:58.2172983Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "ApiKey" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-09-19 15:43:58.224 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 15:43:58.227 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 33.7577ms
2025-09-19 15:43:58.229 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 15:43:58.230 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 49.7751ms
2025-09-19 15:44:02.895 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 15:44:02.898 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 15:44:02.904 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:44:02.907 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:44:02.908 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 204 null null 13.2027ms
2025-09-19 15:44:02.909 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 204 null null 12.2494ms
2025-09-19 15:44:02.913 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 15:44:02.917 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 15:44:02.919 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:44:02.922 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:44:02.923 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-19 15:44:02.923 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 15:44:02.924 +05:30 [INF] Route matched with {action = "GetSenders", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSenders(System.Guid) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 15:44:02.925 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-19 15:44:04.508 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 15:44:04.512 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.WhatsAppSettings.DTOs.WhatsAppSenderDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 15:44:04.514 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-19 15:44:04.516 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api) in 1588.6142ms
2025-09-19 15:44:04.518 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType107`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType183`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 15:44:04.519 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-19 15:44:04.520 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 14.1659ms
2025-09-19 15:44:04.521 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 200 null application/json; charset=utf-8 1607.6131ms
2025-09-19 15:44:04.522 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 15:44:04.526 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 200 null application/json; charset=utf-8 1609.7643ms
2025-09-19 15:44:13.389 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/hello_world - null null
2025-09-19 15:44:13.391 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:44:13.392 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/hello_world - 204 null null 3.0811ms
2025-09-19 15:44:13.395 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/hello_world - null null
2025-09-19 15:44:13.397 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:44:13.399 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-19 15:44:13.402 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-19 15:44:13.418 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__name_1='hello_world'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-09-19 15:44:13.423 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType184`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 15:44:13.427 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 22.9262ms
2025-09-19 15:44:13.429 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-19 15:44:13.430 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/hello_world - 200 null application/json; charset=utf-8 34.5202ms
2025-09-19 15:44:26.399 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-09-19 15:44:26.402 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:44:26.403 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 4.1459ms
2025-09-19 15:44:26.406 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 328
2025-09-19 15:44:26.411 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:44:26.412 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-19 15:44:26.425 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 15:44:26.527 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__phoneNumberId_1='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."PhoneNumberId" = @__phoneNumberId_1 AND w."IsActive"
LIMIT 1
2025-09-19 15:44:26.553 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 15:44:26.557 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 15:44:26.560 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 15:44:27.958 +05:30 [INF] Received HTTP response headers after 1394.9457ms - 200
2025-09-19 15:44:27.960 +05:30 [INF] End processing HTTP request after 1403.7158ms - 200
2025-09-19 15:44:28.389 +05:30 [ERR] Failed executing DbCommand (11ms) [Parameters=[@p0='0f29ee4f-d15a-4b32-8611-14ec1b389680', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='text', @p5='2025-09-19T10:14:28.3021715Z' (DbType = DateTime), @p6='system', @p7=NULL (DbType = Guid), @p8=NULL (DbType = DateTime), @p9=NULL, @p10=NULL, @p11=NULL, @p12=NULL, @p13='False', @p14='Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us.', @p15='hello_world' (Nullable = false), @p16='hello_123' (Nullable = false), @p17='673199269218077', @p18='META_CLOUD', @p19=NULL (DbType = DateTime), @p20=NULL (DbType = Guid), @p21='Draft' (Nullable = false), @p22='hello_world', @p23='[]', @p24='2025-09-19T10:14:28.3021967Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CTAFlowConfigId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "PhoneNumberId", "Provider", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
2025-09-19 15:44:28.433 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'xbytechat.api.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "PhoneNumberId" of relation "Campaigns" does not exist

POSITION: 261
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "PhoneNumberId" of relation "Campaigns" does not exist
    Position: 261
    File: parse_target.c
    Line: 1071
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "PhoneNumberId" of relation "Campaigns" does not exist

POSITION: 261
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "PhoneNumberId" of relation "Campaigns" does not exist
    Position: 261
    File: parse_target.c
    Line: 1071
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-09-19 15:44:30.361 +05:30 [ERR] ❌ Failed to create campaign
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "PhoneNumberId" of relation "Campaigns" does not exist

POSITION: 261
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "PhoneNumberId" of relation "Campaigns" does not exist
    Position: 261
    File: parse_target.c
    Line: 1071
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at xbytechat.api.Features.CampaignModule.Services.CampaignService.CreateTextCampaignAsync(CampaignCreateDto dto, Guid businessId, String createdBy) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CampaignModule\Services\CampaignService.cs:line 644
2025-09-19 15:44:31.617 +05:30 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType0`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 15:44:31.620 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 5193.1567ms
2025-09-19 15:44:31.621 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-19 15:44:31.622 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 400 null application/json; charset=utf-8 5215.9424ms
2025-09-19 15:46:01.242 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-09-19 15:46:01.245 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:46:01.246 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 3.4548ms
2025-09-19 15:46:01.249 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 328
2025-09-19 15:46:01.251 +05:30 [INF] CORS policy execution successful.
2025-09-19 15:46:01.253 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-19 15:46:01.253 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 15:46:42.531 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__phoneNumberId_1='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."PhoneNumberId" = @__phoneNumberId_1 AND w."IsActive"
LIMIT 1
2025-09-19 15:46:53.586 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 15:46:53.604 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 15:46:53.605 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 15:46:54.692 +05:30 [INF] Received HTTP response headers after 1086.0627ms - 200
2025-09-19 15:46:54.693 +05:30 [INF] End processing HTTP request after 1089.6773ms - 200
2025-09-19 15:47:03.840 +05:30 [ERR] Failed executing DbCommand (37ms) [Parameters=[@p0='c0b403f4-3a6b-4ce8-b4d3-41b47fcc1bb3', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='text', @p5='2025-09-19T10:16:59.3997178Z' (DbType = DateTime), @p6='system', @p7=NULL (DbType = Guid), @p8=NULL (DbType = DateTime), @p9=NULL, @p10=NULL, @p11=NULL, @p12=NULL, @p13='False', @p14='Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us.', @p15='hello_world' (Nullable = false), @p16='hello_123' (Nullable = false), @p17='673199269218077', @p18='META_CLOUD', @p19=NULL (DbType = DateTime), @p20=NULL (DbType = Guid), @p21='Draft' (Nullable = false), @p22='hello_world', @p23='[]', @p24='2025-09-19T10:16:59.4066949Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CTAFlowConfigId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "PhoneNumberId", "Provider", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
2025-09-19 15:47:03.845 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'xbytechat.api.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "PhoneNumberId" of relation "Campaigns" does not exist

POSITION: 261
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "PhoneNumberId" of relation "Campaigns" does not exist
    Position: 261
    File: parse_target.c
    Line: 1071
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 42703: column "PhoneNumberId" of relation "Campaigns" does not exist

POSITION: 261
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 42703
    MessageText: column "PhoneNumberId" of relation "Campaigns" does not exist
    Position: 261
    File: parse_target.c
    Line: 1071
    Routine: checkInsertTargets
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-09-19 16:01:24.127 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 16:01:49.458 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 16:01:49.969 +05:30 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-09-19 16:01:49.986 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-19 16:01:50.051 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-09-19 16:01:50.112 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-09-19 16:01:50.112 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-19 16:01:50.121 +05:30 [INF] Applying migration '20250918115939_addWhatsAppsettingsupdateIndex'.
2025-09-19 16:01:50.248 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Roles" SET "CreatedAt" = TIMESTAMPTZ '2025-09-18T11:59:38.831893Z'
WHERE "Id" = '00000000-0000-0000-0000-000000000001';
2025-09-19 16:01:50.249 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Roles" SET "CreatedAt" = TIMESTAMPTZ '2025-09-18T11:59:38.831894Z'
WHERE "Id" = '00000000-0000-0000-0000-000000000002';
2025-09-19 16:01:50.249 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Roles" SET "CreatedAt" = TIMESTAMPTZ '2025-09-18T11:59:38.831894Z'
WHERE "Id" = '00000000-0000-0000-0000-000000000003';
2025-09-19 16:01:50.250 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Roles" SET "CreatedAt" = TIMESTAMPTZ '2025-09-18T11:59:38.831894Z'
WHERE "Id" = '00000000-0000-0000-0000-000000000004';
2025-09-19 16:01:50.250 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Roles" SET "CreatedAt" = TIMESTAMPTZ '2025-09-18T11:59:38.831894Z'
WHERE "Id" = '00000000-0000-0000-0000-000000000005';
2025-09-19 16:01:50.251 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "CreatedAt" = TIMESTAMPTZ '2025-09-18T11:59:38.831933Z'
WHERE "Id" = '62858aa2-3a54-4fd5-8696-c343d9af7634';
2025-09-19 16:01:50.252 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250918115939_addWhatsAppsettingsupdateIndex', '8.0.18');
2025-09-19 16:01:50.256 +05:30 [INF] Applying migration '20250919103125_addProviderPhoneNumber'.
2025-09-19 16:01:50.361 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "WhatsAppPhoneNumbers" DROP CONSTRAINT "FK_WhatsAppPhoneNumbers_WhatsAppSettings_WhatsAppSettingEntity~";
2025-09-19 16:01:50.363 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX "IX_WhatsAppSettings_BusinessId";
2025-09-19 16:01:50.364 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX "IX_WhatsAppSettings_BusinessId_Provider_ci";
2025-09-19 16:01:50.364 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX "IX_WhatsAppPhoneNumbers_WhatsAppSettingEntityId";
2025-09-19 16:01:50.368 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "WhatsAppSettings" DROP COLUMN "Provider_ci";
2025-09-19 16:01:50.370 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "WhatsAppPhoneNumbers" DROP COLUMN "WhatsAppSettingEntityId";
2025-09-19 16:01:50.371 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER INDEX "IX_WhatsAppSettings_BusinessId_Provider" RENAME TO "UX_WhatsAppSettings_BusinessId_Provider";
2025-09-19 16:01:50.372 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Campaigns" ADD "PhoneNumberId" text;
2025-09-19 16:01:50.373 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Campaigns" ADD "Provider" text;
2025-09-19 16:01:50.373 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Roles" SET "CreatedAt" = TIMESTAMPTZ '2025-09-19T10:31:24.554771Z'
WHERE "Id" = '00000000-0000-0000-0000-000000000001';
2025-09-19 16:01:50.374 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Roles" SET "CreatedAt" = TIMESTAMPTZ '2025-09-19T10:31:24.554772Z'
WHERE "Id" = '00000000-0000-0000-0000-000000000002';
2025-09-19 16:01:50.374 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Roles" SET "CreatedAt" = TIMESTAMPTZ '2025-09-19T10:31:24.554772Z'
WHERE "Id" = '00000000-0000-0000-0000-000000000003';
2025-09-19 16:01:50.374 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Roles" SET "CreatedAt" = TIMESTAMPTZ '2025-09-19T10:31:24.554772Z'
WHERE "Id" = '00000000-0000-0000-0000-000000000004';
2025-09-19 16:01:50.374 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Roles" SET "CreatedAt" = TIMESTAMPTZ '2025-09-19T10:31:24.554772Z'
WHERE "Id" = '00000000-0000-0000-0000-000000000005';
2025-09-19 16:01:50.375 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "CreatedAt" = TIMESTAMPTZ '2025-09-19T10:31:24.554788Z'
WHERE "Id" = '62858aa2-3a54-4fd5-8696-c343d9af7634';
2025-09-19 16:01:50.375 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250919103125_addProviderPhoneNumber', '8.0.18');
2025-09-19 16:02:09.185 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 16:02:09.246 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 16:02:09.268 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 16:02:10.118 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 16:02:10.728 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 16:02:10.750 +05:30 [INF] ClickLogWorker started
2025-09-19 16:02:10.969 +05:30 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-19 16:02:10.969 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 16:02:10.974 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 16:02:10.976 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 16:02:10.977 +05:30 [INF] Hosting environment: Development
2025-09-19 16:02:10.978 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 16:02:10.989 +05:30 [INF] Executed DbCommand (63ms) [Parameters=[@__cutoff_0='2025-09-12T10:32:09.3958805Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-19 16:02:11.783 +05:30 [INF] ClickLogWorker stopped
2025-09-19 16:02:12.838 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 16:02:12.982 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 150.7032ms
2025-09-19 16:02:13.000 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 16:02:13.008 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.7366ms
2025-09-19 16:02:13.075 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 16:02:13.104 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 29.7084ms
2025-09-19 16:02:13.251 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 16:02:13.444 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 193.166ms
2025-09-19 16:02:46.190 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 16:02:46.194 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 16:02:46.243 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:02:46.248 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 57.9869ms
2025-09-19 16:02:46.258 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 16:02:46.274 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:02:46.389 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 16:02:46.403 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 16:02:46.503 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-19 16:02:46.559 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 16:02:46.567 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:02:46.583 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 175.9746ms
2025-09-19 16:02:46.585 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 16:02:46.590 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 331.7309ms
2025-09-19 16:02:46.594 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 16:02:46.597 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:02:46.598 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 4.051ms
2025-09-19 16:02:46.601 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 16:02:46.603 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:02:46.606 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 16:02:46.608 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 16:02:46.616 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 16:02:46.620 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:02:46.621 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.8825ms
2025-09-19 16:02:46.622 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 16:02:46.624 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 22.6132ms
2025-09-19 16:02:46.666 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 16:02:46.668 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 16:02:46.668 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 16:02:46.670 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:02:46.673 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:02:46.675 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:02:46.677 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 204 null null 9.5255ms
2025-09-19 16:02:46.678 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 204 null null 9.7519ms
2025-09-19 16:02:46.680 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 16:02:46.682 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 16:02:46.685 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 16:02:46.686 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 16:02:46.690 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:02:46.691 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:02:46.694 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-19 16:02:46.699 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 16:02:46.702 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 16:02:46.703 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:02:46.704 +05:30 [INF] Route matched with {action = "GetSenders", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSenders(System.Guid) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 16:02:46.707 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.2934ms
2025-09-19 16:02:46.710 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-19 16:02:46.712 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 16:02:46.716 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 50.4166ms
2025-09-19 16:02:56.329 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 16:02:56.331 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:02:56.332 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/sync/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 204 null null 3.561ms
2025-09-19 16:02:56.335 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/templates/sync/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null 0
2025-09-19 16:02:56.339 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:02:56.340 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 16:02:56.344 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-19 16:02:56.343 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-09-19 16:02:56.348 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.WhatsAppSettings.DTOs.WhatsAppSenderDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 16:02:56.351 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType107`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType183`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:02:56.351 +05:30 [INF] Route matched with {action = "Sync", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sync(System.Guid, Boolean) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-19 16:02:56.352 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api) in 9641.4706ms
2025-09-19 16:02:56.355 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-19 16:02:56.356 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 200 null application/json; charset=utf-8 9674.2655ms
2025-09-19 16:02:56.363 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 9648.6967ms
2025-09-19 16:02:56.366 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 16:02:56.367 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 200 null application/json; charset=utf-8 9682.1219ms
2025-09-19 16:02:56.376 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-19 16:02:56.426 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-09-19 16:02:56.431 +05:30 [INF] ⏭️ Skipping sync for "10d9469d-4e77-4845-a87f-dbc7e3348b11"; TTL not expired.
2025-09-19 16:02:56.432 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType182`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[TemplateSyncResult, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 16:02:56.440 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api) in 86.5107ms
2025-09-19 16:02:56.441 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.Sync (xbytechat.api)'
2025-09-19 16:02:56.442 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/templates/sync/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 200 null application/json; charset=utf-8 106.7801ms
2025-09-19 16:02:56.451 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 16:02:56.454 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:02:56.454 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 204 null null 3.0044ms
2025-09-19 16:02:56.457 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 16:02:56.459 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:02:56.460 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 16:02:56.461 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-19 16:02:56.467 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-19 16:02:56.470 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType107`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType183`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:02:56.471 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 8.5945ms
2025-09-19 16:02:56.472 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 16:02:56.473 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 200 null application/json; charset=utf-8 16.0133ms
2025-09-19 16:06:58.111 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-19 16:06:58.120 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:06:58.120 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 9.9519ms
2025-09-19 16:06:58.127 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 49
2025-09-19 16:06:58.131 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:06:58.132 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 16:06:58.136 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-19 16:06:58.153 +05:30 [INF] 🔑 Login attempt for email: tesla@gmail.com
2025-09-19 16:06:58.182 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_Email_0='tesla@gmail.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-19 16:06:58.231 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-19 16:06:58.329 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='24c1a1d5-9f49-4555-8663-497a30b5ea8c'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-19 16:06:58.338 +05:30 [INF] ✅ Token generated for: tesla@gmail.com
2025-09-19 16:06:58.347 +05:30 [INF] 🔎 JWT includes plan_id: 5f9f5de1-a0b2-48ba-b03d-77b27345613f
2025-09-19 16:06:58.349 +05:30 [INF] ✅ Login successful for tesla@gmail.com, Role: business, PlanId: "5f9f5de1-a0b2-48ba-b03d-77b27345613f"
2025-09-19 16:06:58.350 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:06:58.352 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 214.6985ms
2025-09-19 16:06:58.353 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 16:06:58.354 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 227.1265ms
2025-09-19 16:06:58.358 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 16:06:58.360 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:06:58.361 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.0721ms
2025-09-19 16:06:58.364 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 16:06:58.366 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:06:58.367 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 16:06:58.368 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 16:06:58.372 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 16:06:58.375 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:06:58.377 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.017ms
2025-09-19 16:06:58.378 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 16:06:58.379 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 14.9565ms
2025-09-19 16:06:58.391 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 16:06:58.394 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:06:58.395 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.9757ms
2025-09-19 16:06:58.400 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 16:06:58.403 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:06:58.405 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 16:06:58.406 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 16:06:58.411 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 16:06:58.414 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:06:58.415 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.0669ms
2025-09-19 16:06:58.417 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 16:06:58.418 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.541ms
2025-09-19 16:06:58.454 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 16:06:58.457 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:06:58.458 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 16:06:58.459 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 16:06:58.464 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 16:06:58.467 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:06:58.469 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 8.4952ms
2025-09-19 16:06:58.470 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 16:06:58.471 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 17.0164ms
2025-09-19 16:07:01.705 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 16:07:01.706 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 16:07:01.708 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:07:01.711 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:07:01.713 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 204 null null 7.3536ms
2025-09-19 16:07:01.716 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 204 null null 10.6508ms
2025-09-19 16:07:01.719 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 16:07:01.728 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 16:07:01.732 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:07:01.734 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:07:01.736 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 16:07:01.736 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-19 16:07:01.737 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-19 16:07:01.738 +05:30 [INF] Route matched with {action = "GetSenders", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSenders(System.Guid) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 16:07:03.189 +05:30 [INF] Executed DbCommand (1,447ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-19 16:07:03.191 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 16:07:03.193 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType107`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType183`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:07:03.195 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.WhatsAppSettings.DTOs.WhatsAppSenderDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 16:07:03.196 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 1456.2866ms
2025-09-19 16:07:03.197 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api) in 1455.4782ms
2025-09-19 16:07:03.198 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 16:07:03.199 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-19 16:07:03.200 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 200 null application/json; charset=utf-8 1481.1102ms
2025-09-19 16:07:03.200 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 200 null application/json; charset=utf-8 1472.5947ms
2025-09-19 16:07:08.013 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/hello_world - null null
2025-09-19 16:07:08.015 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:07:08.015 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/hello_world - 204 null null 2.8731ms
2025-09-19 16:07:08.018 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/hello_world - null null
2025-09-19 16:07:08.020 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:07:08.021 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-19 16:07:08.045 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-19 16:07:08.053 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__name_1='hello_world'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-09-19 16:07:08.057 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType184`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:07:08.060 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 14.1246ms
2025-09-19 16:07:08.061 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-19 16:07:08.062 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/hello_world - 200 null application/json; charset=utf-8 44.1946ms
2025-09-19 16:07:20.516 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-09-19 16:07:20.519 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:07:20.520 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 3.8992ms
2025-09-19 16:07:20.541 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 324
2025-09-19 16:07:20.544 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:07:20.546 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-19 16:07:20.549 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 16:07:34.546 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__phoneNumberId_1='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."PhoneNumberId" = @__phoneNumberId_1 AND w."IsActive"
LIMIT 1
2025-09-19 16:07:34.565 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:07:34.568 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:07:34.570 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:07:35.669 +05:30 [INF] Received HTTP response headers after 1096.5726ms - 200
2025-09-19 16:07:35.671 +05:30 [INF] End processing HTTP request after 1103.7866ms - 200
2025-09-19 16:07:36.097 +05:30 [INF] Executed DbCommand (27ms) [Parameters=[@p0='e8225990-9dd7-4670-b114-e6c2580f61e8', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='text', @p5='2025-09-19T10:37:35.9620259Z' (DbType = DateTime), @p6='system', @p7=NULL (DbType = Guid), @p8=NULL (DbType = DateTime), @p9=NULL, @p10=NULL, @p11=NULL, @p12=NULL, @p13='False', @p14='Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us.', @p15='hello_world' (Nullable = false), @p16='Hello' (Nullable = false), @p17='673199269218077', @p18='META_CLOUD', @p19=NULL (DbType = DateTime), @p20=NULL (DbType = Guid), @p21='Draft' (Nullable = false), @p22='hello_world', @p23='[]', @p24='2025-09-19T10:37:35.9620564Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CTAFlowConfigId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "PhoneNumberId", "Provider", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
2025-09-19 16:07:36.107 +05:30 [INF] ✅ Campaign 'Hello' created | FlowId: null | EntryTemplate: hello_world | Sender: META_CLOUD/673199269218077 | Recipients: 0
2025-09-19 16:07:40.027 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType50`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:07:40.030 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 19478.7559ms
2025-09-19 16:07:40.031 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-19 16:07:40.032 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 19491.277ms
2025-09-19 16:07:40.125 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-19 16:07:40.125 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-19 16:07:40.127 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-19 16:07:40.125 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/e8225990-9dd7-4670-b114-e6c2580f61e8 - null null
2025-09-19 16:07:40.133 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:07:40.134 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:07:40.136 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:07:40.137 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:07:40.138 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 13.0983ms
2025-09-19 16:07:40.138 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 13.0771ms
2025-09-19 16:07:40.139 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 12.2316ms
2025-09-19 16:07:40.139 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/e8225990-9dd7-4670-b114-e6c2580f61e8 - 204 null null 14.3917ms
2025-09-19 16:07:40.143 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-19 16:07:40.145 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/e8225990-9dd7-4670-b114-e6c2580f61e8 - null null
2025-09-19 16:07:40.148 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-19 16:07:40.149 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:07:40.151 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:07:40.152 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:07:40.153 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-19 16:07:40.154 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-19 16:07:40.154 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 16:07:40.157 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-19 16:07:40.158 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 16:07:40.158 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 16:07:40.163 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=1000
2025-09-19 16:07:40.168 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-19 16:07:40.174 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 16:07:40.181 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 23.4885ms
2025-09-19 16:07:40.182 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-19 16:07:40.183 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-19 16:07:40.185 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:07:40.185 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 41.8956ms
2025-09-19 16:07:40.186 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-19 16:07:40.189 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-19 16:07:40.192 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 16:07:40.214 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='e8225990-9dd7-4670-b114-e6c2580f61e8', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", t."Id1", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value", t."BusinessId1", t."CreatedAt1", t."CreatedBy0", t."FlowName", t."IsActive0", t."IsPublished", t."UpdatedAt1"
FROM (
    SELECT c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0", c1."Id" AS "Id1", c1."BusinessId" AS "BusinessId1", c1."CreatedAt" AS "CreatedAt1", c1."CreatedBy" AS "CreatedBy0", c1."FlowName", c1."IsActive" AS "IsActive0", c1."IsPublished", c1."UpdatedAt" AS "UpdatedAt1"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    LEFT JOIN "CTAFlowConfigs" AS c1 ON c."CTAFlowConfigId" = c1."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t."Id0", t."Id1"
2025-09-19 16:07:40.227 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-09-19 16:07:40.234 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 73.646ms
2025-09-19 16:07:40.236 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-19 16:07:40.238 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/e8225990-9dd7-4670-b114-e6c2580f61e8 - 200 null application/json; charset=utf-8 92.152ms
2025-09-19 16:07:40.259 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-19 16:07:40.261 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 16:07:40.262 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 71.1353ms
2025-09-19 16:07:40.263 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-19 16:07:40.264 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 81.9514ms
2025-09-19 16:07:40.280 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 16:07:40.309 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 16:07:40.315 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 155.3279ms
2025-09-19 16:07:40.316 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 16:07:40.317 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 168.9937ms
2025-09-19 16:07:46.013 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/e8225990-9dd7-4670-b114-e6c2580f61e8/assign-contacts - null null
2025-09-19 16:07:46.015 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:07:46.016 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/e8225990-9dd7-4670-b114-e6c2580f61e8/assign-contacts - 204 null null 3.3159ms
2025-09-19 16:07:46.018 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/e8225990-9dd7-4670-b114-e6c2580f61e8/assign-contacts - application/json 55
2025-09-19 16:07:46.021 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:07:46.022 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-09-19 16:07:46.026 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 16:07:46.070 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='e8225990-9dd7-4670-b114-e6c2580f61e8', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-19 16:07:46.101 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='c54b4f53-aee7-406c-a02b-8ef8f8690392', @p1=NULL, @p2='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p3='e8225990-9dd7-4670-b114-e6c2580f61e8', @p4=NULL, @p5=NULL, @p6='75df7429-287c-406a-83d8-0dfa045b0093', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-09-19T10:37:46.0745816Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-09-19T10:37:46.0746450Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-09-19 16:07:46.104 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:07:46.106 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 78.0142ms
2025-09-19 16:07:46.107 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-09-19 16:07:46.108 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/e8225990-9dd7-4670-b114-e6c2580f61e8/assign-contacts - 200 null application/json; charset=utf-8 89.4952ms
2025-09-19 16:07:52.739 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-19 16:07:52.742 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:07:52.743 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.9145ms
2025-09-19 16:07:52.756 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-19 16:07:52.759 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:07:52.761 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-19 16:07:52.764 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 16:07:52.781 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-09-19 16:07:52.783 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 16:07:52.788 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 21.9829ms
2025-09-19 16:07:52.789 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-19 16:07:52.790 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 34.2024ms
2025-09-19 16:08:00.112 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e8225990-9dd7-4670-b114-e6c2580f61e8 - null null
2025-09-19 16:08:00.114 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:08:00.115 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e8225990-9dd7-4670-b114-e6c2580f61e8 - 204 null null 3.3903ms
2025-09-19 16:08:00.118 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e8225990-9dd7-4670-b114-e6c2580f61e8 - null 0
2025-09-19 16:08:00.120 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:08:00.121 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-19 16:08:00.124 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 16:08:00.142 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-19 16:08:00.151 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e8225990-9dd7-4670-b114-e6c2580f61e8'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-09-19 16:08:00.164 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:08:00.166 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:08:00.167 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:08:00.999 +05:30 [INF] Received HTTP response headers after 831.6343ms - 200
2025-09-19 16:08:01.001 +05:30 [INF] End processing HTTP request after 834.8902ms - 200
2025-09-19 16:08:01.069 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 16:08:01.076 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-19 16:08:01.083 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 16:08:01.084 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 16:08:03.331 +05:30 [INF] Received HTTP response headers after 2245.9392ms - 200
2025-09-19 16:08:03.332 +05:30 [INF] End processing HTTP request after 2249.0547ms - 200
2025-09-19 16:08:03.483 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@p0='f3472a10-ad26-43ea-b99e-b0edc30f634d', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='e8225990-9dd7-4670-b114-e6c2580f61e8' (Nullable = true), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T10:38:03.3373791Z' (DbType = DateTime), @p8=NULL, @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='hello_world' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMUUxOTY0NTcwOEIxOUE5MDdGAA==', @p14='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMUUxOTY0NTcwOEIxOUE5MDdGAA==","message_status":"accepted"}]}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17=NULL, @p18='149fc187-7729-4e17-a723-52f624d464a5' (Nullable = true), @p19='2025-09-19T10:38:03.3374314Z' (Nullable = true) (DbType = DateTime), @p20='campaign', @p21='Sent' (Nullable = false), @p22='5afa61e6-c890-479b-a920-8d7d0603c4fc', @p23='True', @p24=NULL, @p25='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p26=NULL, @p27=NULL (DbType = Guid), @p28=NULL (DbType = Guid), @p29='e8225990-9dd7-4670-b114-e6c2580f61e8', @p30=NULL, @p31=NULL, @p32=NULL (DbType = DateTime), @p33='75df7429-287c-406a-83d8-0dfa045b0093', @p34=NULL, @p35='2025-09-19T10:38:03.3974898Z' (DbType = DateTime), @p36='system', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40=NULL, @p41=NULL, @p42='False', @p43=NULL (DbType = DateTime), @p44=NULL, @p45=NULL, @p46='Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us.' (Nullable = false), @p47='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMUUxOTY0NTcwOEIxOUE5MDdGAA==', @p48='f3472a10-ad26-43ea-b99e-b0edc30f634d' (Nullable = true), @p49=NULL (DbType = DateTime), @p50='c54b4f53-aee7-406c-a02b-8ef8f8690392', @p51='0', @p52='149fc187-7729-4e17-a723-52f624d464a5' (Nullable = true), @p53='Sent', @p54='2025-09-19T10:38:03.3975333Z' (Nullable = true) (DbType = DateTime), @p55=NULL, @p56='hello_world', @p57=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57);
2025-09-19 16:08:03.502 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 16:08:03.503 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 3377.4091ms
2025-09-19 16:08:03.504 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-19 16:08:03.505 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e8225990-9dd7-4670-b114-e6c2580f61e8 - 200 null application/json; charset=utf-8 3387.6258ms
2025-09-19 16:27:19.018 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 16:27:19.030 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 16:27:19.036 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:27:19.039 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:27:19.040 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 204 null null 23.7739ms
2025-09-19 16:27:19.041 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 204 null null 10.8499ms
2025-09-19 16:27:19.045 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 16:27:19.050 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 16:27:19.054 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:27:19.057 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:27:19.059 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 16:27:19.059 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-19 16:27:19.061 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-19 16:27:19.062 +05:30 [INF] Route matched with {action = "GetSenders", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSenders(System.Guid) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 16:27:20.557 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-19 16:27:20.559 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType107`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType183`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:27:20.561 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 1497.3415ms
2025-09-19 16:27:20.563 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 16:27:20.564 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 200 null application/json; charset=utf-8 1518.1907ms
2025-09-19 16:27:20.581 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 16:27:20.583 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.WhatsAppSettings.DTOs.WhatsAppSenderDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 16:27:20.585 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api) in 1519.5432ms
2025-09-19 16:27:20.586 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-19 16:27:20.588 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 200 null application/json; charset=utf-8 1537.514ms
2025-09-19 16:37:32.075 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 16:37:32.083 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:37:32.084 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 9.7394ms
2025-09-19 16:37:32.152 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 16:37:32.155 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:37:32.158 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 16:37:32.159 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 16:37:32.265 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 16:37:32.267 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:37:32.268 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 106.4604ms
2025-09-19 16:37:32.269 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 16:37:32.270 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 118.1983ms
2025-09-19 16:37:32.278 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 16:37:32.281 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:37:32.282 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.9288ms
2025-09-19 16:37:32.287 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 16:37:32.290 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:37:32.291 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 16:37:32.292 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 16:37:32.298 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 16:37:32.300 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:37:32.302 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 7.5786ms
2025-09-19 16:37:32.303 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 16:37:32.304 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 16.6695ms
2025-09-19 16:37:40.828 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-19 16:37:40.830 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:37:40.831 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.1105ms
2025-09-19 16:37:40.834 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 49
2025-09-19 16:37:40.836 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:37:40.837 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 16:37:40.838 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-19 16:37:40.842 +05:30 [INF] 🔑 Login attempt for email: tesla@gmail.com
2025-09-19 16:37:40.848 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_Email_0='tesla@gmail.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-19 16:37:40.853 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__user_BusinessId_Value_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-19 16:37:40.860 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='24c1a1d5-9f49-4555-8663-497a30b5ea8c'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-19 16:37:40.862 +05:30 [INF] ✅ Token generated for: tesla@gmail.com
2025-09-19 16:37:40.863 +05:30 [INF] 🔎 JWT includes plan_id: 5f9f5de1-a0b2-48ba-b03d-77b27345613f
2025-09-19 16:37:40.864 +05:30 [INF] ✅ Login successful for tesla@gmail.com, Role: business, PlanId: "5f9f5de1-a0b2-48ba-b03d-77b27345613f"
2025-09-19 16:37:40.865 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:37:40.866 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 27.0329ms
2025-09-19 16:37:40.867 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 16:37:40.867 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 33.7199ms
2025-09-19 16:37:40.870 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 16:37:40.872 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:37:40.872 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 2.2467ms
2025-09-19 16:37:40.875 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 16:37:40.877 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:37:40.878 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 16:37:40.878 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 16:37:40.881 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 16:37:40.884 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:37:40.885 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.9944ms
2025-09-19 16:37:40.886 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 16:37:40.886 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 11.3726ms
2025-09-19 16:37:40.900 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 16:37:40.903 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:37:40.903 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 3.337ms
2025-09-19 16:37:40.911 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 16:37:40.913 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:37:40.914 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 16:37:40.915 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 16:37:40.919 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 16:37:40.921 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:37:40.922 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 5.5564ms
2025-09-19 16:37:40.923 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 16:37:40.924 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.3465ms
2025-09-19 16:37:40.984 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 16:37:40.986 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:37:40.987 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 16:37:40.988 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 16:37:40.992 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 16:37:40.994 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:37:40.995 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 6.0954ms
2025-09-19 16:37:40.996 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 16:37:40.997 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 13.2013ms
2025-09-19 16:37:46.627 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 16:37:46.628 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 16:37:46.630 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:37:46.633 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:37:46.633 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 204 null null 5.9682ms
2025-09-19 16:37:46.634 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 204 null null 5.8828ms
2025-09-19 16:37:46.638 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 16:37:46.640 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 16:37:46.642 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:37:46.644 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:37:46.644 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-19 16:37:46.645 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 16:37:46.645 +05:30 [INF] Route matched with {action = "GetSenders", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSenders(System.Guid) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 16:37:46.646 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-19 16:37:54.145 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 16:37:54.154 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.WhatsAppSettings.DTOs.WhatsAppSenderDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 16:37:54.155 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api) in 7507.9509ms
2025-09-19 16:37:54.156 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-19 16:37:54.157 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 200 null application/json; charset=utf-8 7519.4326ms
2025-09-19 16:37:54.208 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-19 16:37:54.210 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType107`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType183`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:37:54.211 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 84.9014ms
2025-09-19 16:37:54.212 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 16:37:54.213 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 200 null application/json; charset=utf-8 7572.848ms
2025-09-19 16:38:05.800 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/hello_world - null null
2025-09-19 16:38:05.803 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:38:05.804 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/hello_world - 204 null null 3.7244ms
2025-09-19 16:38:05.808 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/hello_world - null null
2025-09-19 16:38:05.810 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:38:05.811 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-19 16:38:05.812 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-19 16:38:05.816 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__name_1='hello_world'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-09-19 16:38:05.819 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType184`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:38:05.820 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 6.7566ms
2025-09-19 16:38:05.821 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-19 16:38:05.822 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/hello_world - 200 null application/json; charset=utf-8 14.374ms
2025-09-19 16:38:09.234 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-09-19 16:38:09.237 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:38:09.237 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 3.5893ms
2025-09-19 16:38:09.240 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 325
2025-09-19 16:38:09.242 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:38:09.243 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-19 16:38:09.245 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 16:38:10.644 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__phoneNumberId_1='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."PhoneNumberId" = @__phoneNumberId_1 AND w."IsActive"
LIMIT 1
2025-09-19 16:38:10.650 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:38:10.652 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:38:10.653 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:38:12.204 +05:30 [INF] Received HTTP response headers after 1550.0038ms - 200
2025-09-19 16:38:12.206 +05:30 [INF] End processing HTTP request after 1553.5138ms - 200
2025-09-19 16:38:12.400 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p0='124c13f7-b29b-413f-bb93-37b0a5e300e6', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='text', @p5='2025-09-19T11:08:12.3914050Z' (DbType = DateTime), @p6='system', @p7=NULL (DbType = Guid), @p8=NULL (DbType = DateTime), @p9=NULL, @p10=NULL, @p11=NULL, @p12=NULL, @p13='False', @p14='Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us.', @p15='hello_world' (Nullable = false), @p16='tes003' (Nullable = false), @p17='673199269218077', @p18='META_CLOUD', @p19=NULL (DbType = DateTime), @p20=NULL (DbType = Guid), @p21='Draft' (Nullable = false), @p22='hello_world', @p23='[]', @p24='2025-09-19T11:08:12.3914053Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CTAFlowConfigId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "PhoneNumberId", "Provider", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
2025-09-19 16:38:12.403 +05:30 [INF] ✅ Campaign 'tes003' created | FlowId: null | EntryTemplate: hello_world | Sender: META_CLOUD/673199269218077 | Recipients: 0
2025-09-19 16:38:12.405 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType50`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:38:12.406 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 3160.4314ms
2025-09-19 16:38:12.408 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-19 16:38:12.409 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 3168.4767ms
2025-09-19 16:38:12.467 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-19 16:38:12.469 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-19 16:38:12.470 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-19 16:38:12.468 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/124c13f7-b29b-413f-bb93-37b0a5e300e6 - null null
2025-09-19 16:38:12.475 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:38:12.477 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:38:12.479 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:38:12.481 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:38:12.482 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 14.4912ms
2025-09-19 16:38:12.483 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 13.2956ms
2025-09-19 16:38:12.483 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 13.4739ms
2025-09-19 16:38:12.484 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/124c13f7-b29b-413f-bb93-37b0a5e300e6 - 204 null null 16.3503ms
2025-09-19 16:38:12.489 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-19 16:38:12.491 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-19 16:38:12.494 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/124c13f7-b29b-413f-bb93-37b0a5e300e6 - null null
2025-09-19 16:38:12.496 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:38:12.498 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:38:12.500 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:38:12.501 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 16:38:12.501 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-19 16:38:12.502 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-19 16:38:12.503 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 16:38:12.504 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-19 16:38:12.504 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 16:38:12.506 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=1000
2025-09-19 16:38:12.511 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-19 16:38:12.513 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='124c13f7-b29b-413f-bb93-37b0a5e300e6', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", t."Id1", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value", t."BusinessId1", t."CreatedAt1", t."CreatedBy0", t."FlowName", t."IsActive0", t."IsPublished", t."UpdatedAt1"
FROM (
    SELECT c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0", c1."Id" AS "Id1", c1."BusinessId" AS "BusinessId1", c1."CreatedAt" AS "CreatedAt1", c1."CreatedBy" AS "CreatedBy0", c1."FlowName", c1."IsActive" AS "IsActive0", c1."IsPublished", c1."UpdatedAt" AS "UpdatedAt1"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    LEFT JOIN "CTAFlowConfigs" AS c1 ON c."CTAFlowConfigId" = c1."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t."Id0", t."Id1"
2025-09-19 16:38:12.519 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 16:38:12.522 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-09-19 16:38:12.523 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 15.8866ms
2025-09-19 16:38:12.524 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-19 16:38:12.524 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 15.6584ms
2025-09-19 16:38:12.525 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-19 16:38:12.527 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:38:12.528 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-19 16:38:12.529 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 37.2926ms
2025-09-19 16:38:12.530 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-19 16:38:12.530 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/124c13f7-b29b-413f-bb93-37b0a5e300e6 - 200 null application/json; charset=utf-8 36.3362ms
2025-09-19 16:38:12.534 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-19 16:38:12.540 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-19 16:38:12.543 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 16:38:12.544 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 6.5242ms
2025-09-19 16:38:12.546 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-19 16:38:12.547 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 22.9198ms
2025-09-19 16:38:12.580 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 16:38:12.584 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 16:38:12.586 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 16:38:12.588 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 82.0584ms
2025-09-19 16:38:12.589 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 16:38:12.590 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 100.7542ms
2025-09-19 16:38:19.024 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/124c13f7-b29b-413f-bb93-37b0a5e300e6/assign-contacts - null null
2025-09-19 16:38:19.027 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:38:19.027 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/124c13f7-b29b-413f-bb93-37b0a5e300e6/assign-contacts - 204 null null 3.055ms
2025-09-19 16:38:19.030 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/124c13f7-b29b-413f-bb93-37b0a5e300e6/assign-contacts - application/json 55
2025-09-19 16:38:19.032 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:38:19.033 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-09-19 16:38:19.034 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 16:38:19.039 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='124c13f7-b29b-413f-bb93-37b0a5e300e6', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-19 16:38:19.064 +05:30 [INF] Executed DbCommand (22ms) [Parameters=[@p0='d1b8dfbe-dea6-4c1a-ace0-01b16657e534', @p1=NULL, @p2='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p3='124c13f7-b29b-413f-bb93-37b0a5e300e6', @p4=NULL, @p5=NULL, @p6='75df7429-287c-406a-83d8-0dfa045b0093', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-09-19T11:08:19.0412425Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-09-19T11:08:19.0412426Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-09-19 16:38:19.066 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:38:19.067 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 32.298ms
2025-09-19 16:38:19.069 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-09-19 16:38:19.069 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/124c13f7-b29b-413f-bb93-37b0a5e300e6/assign-contacts - 200 null application/json; charset=utf-8 39.6601ms
2025-09-19 16:38:23.491 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-19 16:38:23.498 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:38:23.499 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 7.8639ms
2025-09-19 16:38:23.502 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-19 16:38:23.506 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:38:23.508 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-19 16:38:23.509 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 16:38:23.515 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-09-19 16:38:23.517 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 16:38:23.518 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 7.6533ms
2025-09-19 16:38:23.519 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-19 16:38:23.520 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 18.3329ms
2025-09-19 16:38:26.100 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/124c13f7-b29b-413f-bb93-37b0a5e300e6 - null null
2025-09-19 16:38:26.102 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:38:26.103 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/124c13f7-b29b-413f-bb93-37b0a5e300e6 - 204 null null 3.1499ms
2025-09-19 16:38:26.107 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/124c13f7-b29b-413f-bb93-37b0a5e300e6 - null 0
2025-09-19 16:38:26.108 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:38:26.109 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-19 16:38:26.110 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 16:38:26.115 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='124c13f7-b29b-413f-bb93-37b0a5e300e6'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-09-19 16:38:26.119 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:38:26.121 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:38:26.122 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:38:26.982 +05:30 [INF] Received HTTP response headers after 859.2308ms - 200
2025-09-19 16:38:26.983 +05:30 [INF] End processing HTTP request after 862.4981ms - 200
2025-09-19 16:38:27.067 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 16:38:27.071 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-19 16:38:27.073 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 16:38:27.074 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 16:38:28.725 +05:30 [INF] Received HTTP response headers after 1650.5254ms - 200
2025-09-19 16:38:28.726 +05:30 [INF] End processing HTTP request after 1653.7763ms - 200
2025-09-19 16:38:28.986 +05:30 [INF] Executed DbCommand (257ms) [Parameters=[@p0='2f157061-d3e0-4fa8-8b69-14dc6ad768fb', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='124c13f7-b29b-413f-bb93-37b0a5e300e6' (Nullable = true), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T11:08:28.7281400Z' (DbType = DateTime), @p8=NULL, @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='hello_world' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0I5NjBERDRGMjU4QTVCMDREAA==', @p14='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0I5NjBERDRGMjU4QTVCMDREAA==","message_status":"accepted"}]}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17=NULL, @p18='493ca003-fd6d-4320-b6e2-c9732cea9a64' (Nullable = true), @p19='2025-09-19T11:08:28.7281404Z' (Nullable = true) (DbType = DateTime), @p20='campaign', @p21='Sent' (Nullable = false), @p22='00078051-ae40-4d81-ae4f-3e7a7ad78517', @p23='True', @p24=NULL, @p25='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p26=NULL, @p27=NULL (DbType = Guid), @p28=NULL (DbType = Guid), @p29='124c13f7-b29b-413f-bb93-37b0a5e300e6', @p30=NULL, @p31=NULL, @p32=NULL (DbType = DateTime), @p33='75df7429-287c-406a-83d8-0dfa045b0093', @p34=NULL, @p35='2025-09-19T11:08:28.7285937Z' (DbType = DateTime), @p36='system', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40=NULL, @p41=NULL, @p42='False', @p43=NULL (DbType = DateTime), @p44=NULL, @p45=NULL, @p46='Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us.' (Nullable = false), @p47='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0I5NjBERDRGMjU4QTVCMDREAA==', @p48='2f157061-d3e0-4fa8-8b69-14dc6ad768fb' (Nullable = true), @p49=NULL (DbType = DateTime), @p50='d1b8dfbe-dea6-4c1a-ace0-01b16657e534', @p51='0', @p52='493ca003-fd6d-4320-b6e2-c9732cea9a64' (Nullable = true), @p53='Sent', @p54='2025-09-19T11:08:28.7285938Z' (Nullable = true) (DbType = DateTime), @p55=NULL, @p56='hello_world', @p57=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57);
2025-09-19 16:38:29.030 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 16:38:29.032 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 2920.6244ms
2025-09-19 16:38:29.033 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-19 16:38:29.034 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/124c13f7-b29b-413f-bb93-37b0a5e300e6 - 200 null application/json; charset=utf-8 2927.575ms
2025-09-19 16:38:51.428 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-19 16:38:51.430 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:38:51.431 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 3.2532ms
2025-09-19 16:38:51.434 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-19 16:38:51.436 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:38:51.437 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-19 16:38:51.440 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-09-19 16:38:51.445 +05:30 [INF] 🔎 Fetching templates for BusinessId "10d9469d-4e77-4845-a87f-dbc7e3348b11"
2025-09-19 16:38:51.451 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:38:51.453 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-19 16:38:51.453 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-19 16:38:52.797 +05:30 [INF] Received HTTP response headers after 1342.6485ms - 200
2025-09-19 16:38:52.798 +05:30 [INF] End processing HTTP request after 1345.4664ms - 200
2025-09-19 16:38:52.898 +05:30 [INF] 📦 Meta Template API (Biz "10d9469d-4e77-4845-a87f-dbc7e3348b11") payload:
{"data":[{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"},{"name":"support_project_status_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"To check the status of your ongoing project, please provide your registered email address or project ID, and one of our project managers will get back to you with a detailed update shortly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Project Manager"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1599668577490835"},{"name":"human_takeover_confirmation_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Thank you! We've received your request. One of our experts will get in touch with you shortly.\n\nIs there anything else I can help you with in the meantime?"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1304432401406654"},{"name":"support_main_menu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Welcome to the MindsMiratus Support Center. We're here to help you with any questions or issues you may have.\n\nPlease select an option so we can assist you faster."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"GST Software Support"},{"type":"QUICK_REPLY","text":"Check Project Status"},{"type":"QUICK_REPLY","text":"Report Technical Issues"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en","status":"APPROVED","category":"MARKETING","id":"679342281096115"},{"name":"products_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We are proud to offer our powerful and easy-to-use GST Software, designed to simplify your tax compliance, invoicing, and financial management.\n\nWhat would you like to do?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a GST Demo"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2567632853585898"},{"name":"services_menu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We offer a wide range of services to power your business's growth. Please select a category you are interested in:"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Design Services"},{"type":"QUICK_REPLY","text":"Development Services"},{"type":"QUICK_REPLY","text":"Digital & Tele-Marketing"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"738253949023987"},{"name":"welcome_menu_minds","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello! Thank you for contacting MindsMiratus.\n\nIf you're a new visitor, we're happy to help you get started. If you're an existing customer, we're here to support you. Please choose from the options below."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Explore Our Services"},{"type":"QUICK_REPLY","text":"View Our Products"},{"type":"QUICK_REPLY","text":"Customer Support"},{"type":"QUICK_REPLY","text":"Contact Sales"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1115530356706526"},{"name":"demo","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Demo Template"},{"type":"BODY","text":"Demo Template Message."},{"type":"FOOTER","text":"sent by ExploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/visit"]},{"type":"URL","text":"Shop Now","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/shopnow"]},{"type":"PHONE_NUMBER","text":"Call Us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"757818770430461"},{"name":"contact_sales_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We'd love to discuss how we can help your business grow. You can reach our sales team via email at info\u0040mindsmiratus.com or call us at +91-321-123-4321.\n\nWould you like one of our experts to call you back?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Yes, call me back"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"954501560165102"},{"name":"dev_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our expert developers build robust and scalable solutions tailored to your business needs. Which area of development interests you?\n\n\ud83d\udcbb Web & Software Dev: Custom applications and software solutions.\n\ud83d\udcf1 Mobile App Dev: Engaging and high-performance apps for iOS and Android.\n\ud83d\uded2 E-commerce Dev: Powerful online stores that drive sales and growth."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Discuss a Project"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3118090155157247"},{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/tutrials"]},{"type":"URL","text":"View Demo","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"},{"name":"build_urltracking","parameter_format":"NAMED","components":[{"type":"BODY","text":"Hello \n\nThis is the test message to check wheather redirecting url is working or not."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/softwaredev"]},{"type":"URL","text":"Explore More","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/moreopt"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"788214393726841"},{"name":"marketing_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We help you reach your target audience and grow your brand effectively. Explore our marketing services:\n\n\ud83d\udcc8 Digital Marketing: SEO, Social Media Marketing, and targeted PPC campaigns.\n\ud83d\udcde Tele-Marketing: IVR systems, Bulk SMS, Voice Calls, and official WhatsApp API solutions."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Get a Marketing Plan"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1683803515627636"},{"name":"design_services_submenu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our creative team delivers stunning and effective designs to make your brand stand out. Which design service would you like to know more about?\n\n\ud83c\udfa8 Website Designing: We build beautiful, responsive, and user-friendly websites.\n\ud83d\udd8c\ufe0f Graphic Designing: We create compelling visuals, logos, and branding materials."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a Design Quote"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3291988187631744"},{"name":"support_gst_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"You've reached support for our GST Software. How can we help?\n\n\ud83d\udd27 Technical Help: For installation issues, errors, or bugs.\n\ud83d\udca1 Feature Questions: To understand how to use a specific feature.\n\ud83d\udcda View FAQs: Get answers to common questions instantly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Support Agent"},{"type":"QUICK_REPLY","text":"View FAQs"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1305308197880244"},{"name":"support_report_issue_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We're sorry to hear you're experiencing an issue.\n\nTo help us resolve it quickly, please tap the button below to connect with our technical support team. Please be ready to provide a brief description of the problem."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Connect to Technical Team"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"755167220845328"},{"name":"about_us_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"MindsMiratus is a leading IT solutions company dedicated to helping businesses grow through innovative and effective digital services. From design to development and marketing, we provide comprehensive solutions to elevate your brand.\n\nWhat would you like to do next?"},{"type":"FOOTER","text":"sent by Mindsmirtus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"},{"type":"QUICK_REPLY","text":"Talk to an Expert"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1971204310331370"},{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"\u26a1\ufe0f Feature Annoucement ! \u26a1\ufe0f\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/\u00257B\u00257BI\u00257D\u00257D{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"View Tutorials","url":"https:\/\/www.youtube.com\/\u00257B\u00257Bi\u00257D\u00257D{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"},{"name":"call_log","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is the checking for call log event."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/seeme"]},{"type":"URL","text":"Call Us","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/callme"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1286058192539680"},{"name":"track_url_after_flow_integ","message_send_ttl_seconds":86400,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BODY","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/vosiatstore"]},{"type":"URL","text":"Visit Demo","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/demo"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1084981273615848"},{"name":"template_3","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 3"},{"type":"BODY","text":"This is themplate : 3"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1760623375330098"},{"name":"template_2","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 2"},{"type":"BODY","text":"This is teh template 2"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1222093123248950"},{"name":"template_1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 1"},{"type":"BODY","text":"This is the Template : 1"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 2"},{"type":"QUICK_REPLY","text":"Show Me Template 3"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2381212765606675"},{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"watch Video","url":"https:\/\/www.youtube.com\/{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"},{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=7sw82IMY4uQQ7kNvwGo_356&_nc_oc=AdmfC_35MV8W4KRORGuHw5JAsYOfN8J86REvew1DuaiUgQ_fHx3Im8bnwAWEm0m4yQuT3bjqKMqibQMSN3r0ASV_&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=0I8hk5pi5-JBkniqPTH_yA&oh=01_Q5Aa2gEUxlSyo3M21uzNoHDo6ZEgthK2xrEikkGw_5Doltog0w&oe=68F4994F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! \ud83c\udf89\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15\u0025 discount** on your purchase. Don't just follow the trend\u2014set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https:\/\/xplorebytesolutions.com\/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"},{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https:\/\/www.qwexample.com\/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"}],"paging":{"cursors":{"before":"MAZDZD","after":"OTkZD"}}}
2025-09-19 16:38:52.920 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType107`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:38:52.924 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 1483.0352ms
2025-09-19 16:38:52.925 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-19 16:38:52.926 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 1492.3993ms
2025-09-19 16:39:03.295 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-19 16:39:03.297 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:39:03.299 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 3.9914ms
2025-09-19 16:39:03.302 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-19 16:39:03.304 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:39:03.305 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-19 16:39:03.306 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-09-19 16:39:03.308 +05:30 [INF] 🔎 Fetching templates for BusinessId "10d9469d-4e77-4845-a87f-dbc7e3348b11"
2025-09-19 16:39:03.312 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:39:03.314 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-19 16:39:03.315 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-19 16:39:04.197 +05:30 [INF] Received HTTP response headers after 880.772ms - 200
2025-09-19 16:39:04.198 +05:30 [INF] End processing HTTP request after 883.8793ms - 200
2025-09-19 16:39:04.284 +05:30 [INF] 📦 Meta Template API (Biz "10d9469d-4e77-4845-a87f-dbc7e3348b11") payload:
{"data":[{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"},{"name":"support_project_status_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"To check the status of your ongoing project, please provide your registered email address or project ID, and one of our project managers will get back to you with a detailed update shortly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Project Manager"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1599668577490835"},{"name":"human_takeover_confirmation_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Thank you! We've received your request. One of our experts will get in touch with you shortly.\n\nIs there anything else I can help you with in the meantime?"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1304432401406654"},{"name":"support_main_menu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Welcome to the MindsMiratus Support Center. We're here to help you with any questions or issues you may have.\n\nPlease select an option so we can assist you faster."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"GST Software Support"},{"type":"QUICK_REPLY","text":"Check Project Status"},{"type":"QUICK_REPLY","text":"Report Technical Issues"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en","status":"APPROVED","category":"MARKETING","id":"679342281096115"},{"name":"products_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We are proud to offer our powerful and easy-to-use GST Software, designed to simplify your tax compliance, invoicing, and financial management.\n\nWhat would you like to do?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a GST Demo"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2567632853585898"},{"name":"services_menu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We offer a wide range of services to power your business's growth. Please select a category you are interested in:"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Design Services"},{"type":"QUICK_REPLY","text":"Development Services"},{"type":"QUICK_REPLY","text":"Digital & Tele-Marketing"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"738253949023987"},{"name":"welcome_menu_minds","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello! Thank you for contacting MindsMiratus.\n\nIf you're a new visitor, we're happy to help you get started. If you're an existing customer, we're here to support you. Please choose from the options below."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Explore Our Services"},{"type":"QUICK_REPLY","text":"View Our Products"},{"type":"QUICK_REPLY","text":"Customer Support"},{"type":"QUICK_REPLY","text":"Contact Sales"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1115530356706526"},{"name":"demo","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Demo Template"},{"type":"BODY","text":"Demo Template Message."},{"type":"FOOTER","text":"sent by ExploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/visit"]},{"type":"URL","text":"Shop Now","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/shopnow"]},{"type":"PHONE_NUMBER","text":"Call Us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"757818770430461"},{"name":"contact_sales_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We'd love to discuss how we can help your business grow. You can reach our sales team via email at info\u0040mindsmiratus.com or call us at +91-321-123-4321.\n\nWould you like one of our experts to call you back?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Yes, call me back"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"954501560165102"},{"name":"dev_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our expert developers build robust and scalable solutions tailored to your business needs. Which area of development interests you?\n\n\ud83d\udcbb Web & Software Dev: Custom applications and software solutions.\n\ud83d\udcf1 Mobile App Dev: Engaging and high-performance apps for iOS and Android.\n\ud83d\uded2 E-commerce Dev: Powerful online stores that drive sales and growth."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Discuss a Project"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3118090155157247"},{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/tutrials"]},{"type":"URL","text":"View Demo","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"},{"name":"build_urltracking","parameter_format":"NAMED","components":[{"type":"BODY","text":"Hello \n\nThis is the test message to check wheather redirecting url is working or not."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/softwaredev"]},{"type":"URL","text":"Explore More","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/moreopt"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"788214393726841"},{"name":"marketing_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We help you reach your target audience and grow your brand effectively. Explore our marketing services:\n\n\ud83d\udcc8 Digital Marketing: SEO, Social Media Marketing, and targeted PPC campaigns.\n\ud83d\udcde Tele-Marketing: IVR systems, Bulk SMS, Voice Calls, and official WhatsApp API solutions."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Get a Marketing Plan"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1683803515627636"},{"name":"design_services_submenu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our creative team delivers stunning and effective designs to make your brand stand out. Which design service would you like to know more about?\n\n\ud83c\udfa8 Website Designing: We build beautiful, responsive, and user-friendly websites.\n\ud83d\udd8c\ufe0f Graphic Designing: We create compelling visuals, logos, and branding materials."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a Design Quote"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3291988187631744"},{"name":"support_gst_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"You've reached support for our GST Software. How can we help?\n\n\ud83d\udd27 Technical Help: For installation issues, errors, or bugs.\n\ud83d\udca1 Feature Questions: To understand how to use a specific feature.\n\ud83d\udcda View FAQs: Get answers to common questions instantly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Support Agent"},{"type":"QUICK_REPLY","text":"View FAQs"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1305308197880244"},{"name":"support_report_issue_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We're sorry to hear you're experiencing an issue.\n\nTo help us resolve it quickly, please tap the button below to connect with our technical support team. Please be ready to provide a brief description of the problem."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Connect to Technical Team"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"755167220845328"},{"name":"about_us_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"MindsMiratus is a leading IT solutions company dedicated to helping businesses grow through innovative and effective digital services. From design to development and marketing, we provide comprehensive solutions to elevate your brand.\n\nWhat would you like to do next?"},{"type":"FOOTER","text":"sent by Mindsmirtus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"},{"type":"QUICK_REPLY","text":"Talk to an Expert"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1971204310331370"},{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"\u26a1\ufe0f Feature Annoucement ! \u26a1\ufe0f\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/\u00257B\u00257BI\u00257D\u00257D{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"View Tutorials","url":"https:\/\/www.youtube.com\/\u00257B\u00257Bi\u00257D\u00257D{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"},{"name":"call_log","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is the checking for call log event."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/seeme"]},{"type":"URL","text":"Call Us","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/callme"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1286058192539680"},{"name":"track_url_after_flow_integ","message_send_ttl_seconds":86400,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BODY","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/vosiatstore"]},{"type":"URL","text":"Visit Demo","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/demo"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1084981273615848"},{"name":"template_3","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 3"},{"type":"BODY","text":"This is themplate : 3"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1760623375330098"},{"name":"template_2","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 2"},{"type":"BODY","text":"This is teh template 2"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1222093123248950"},{"name":"template_1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 1"},{"type":"BODY","text":"This is the Template : 1"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 2"},{"type":"QUICK_REPLY","text":"Show Me Template 3"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2381212765606675"},{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"watch Video","url":"https:\/\/www.youtube.com\/{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"},{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=7sw82IMY4uQQ7kNvwGo_356&_nc_oc=AdmfC_35MV8W4KRORGuHw5JAsYOfN8J86REvew1DuaiUgQ_fHx3Im8bnwAWEm0m4yQuT3bjqKMqibQMSN3r0ASV_&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=Al_L8r4sJEHl3911YC74mw&oh=01_Q5Aa2gE8UKMkgpibNgNz_HrYBC-nIduPM1IzNsu9oSHOBwS2kw&oe=68F4994F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! \ud83c\udf89\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15\u0025 discount** on your purchase. Don't just follow the trend\u2014set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https:\/\/xplorebytesolutions.com\/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"},{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https:\/\/www.qwexample.com\/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"}],"paging":{"cursors":{"before":"MAZDZD","after":"OTkZD"}}}
2025-09-19 16:39:04.289 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType107`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:39:04.290 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 982.9769ms
2025-09-19 16:39:04.291 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-19 16:39:04.292 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 990.3963ms
2025-09-19 16:39:15.530 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-19 16:39:15.532 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:39:15.533 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 3.3629ms
2025-09-19 16:39:15.538 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-19 16:39:15.542 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:39:15.543 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-19 16:39:15.543 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-09-19 16:39:15.545 +05:30 [INF] 🔎 Fetching templates for BusinessId "10d9469d-4e77-4845-a87f-dbc7e3348b11"
2025-09-19 16:39:15.549 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:39:15.551 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-19 16:39:15.552 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-19 16:39:16.358 +05:30 [INF] Received HTTP response headers after 805.1508ms - 200
2025-09-19 16:39:16.359 +05:30 [INF] End processing HTTP request after 808.2126ms - 200
2025-09-19 16:39:16.447 +05:30 [INF] 📦 Meta Template API (Biz "10d9469d-4e77-4845-a87f-dbc7e3348b11") payload:
{"data":[{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"},{"name":"support_project_status_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"To check the status of your ongoing project, please provide your registered email address or project ID, and one of our project managers will get back to you with a detailed update shortly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Project Manager"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1599668577490835"},{"name":"human_takeover_confirmation_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Thank you! We've received your request. One of our experts will get in touch with you shortly.\n\nIs there anything else I can help you with in the meantime?"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1304432401406654"},{"name":"support_main_menu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Welcome to the MindsMiratus Support Center. We're here to help you with any questions or issues you may have.\n\nPlease select an option so we can assist you faster."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"GST Software Support"},{"type":"QUICK_REPLY","text":"Check Project Status"},{"type":"QUICK_REPLY","text":"Report Technical Issues"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en","status":"APPROVED","category":"MARKETING","id":"679342281096115"},{"name":"products_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We are proud to offer our powerful and easy-to-use GST Software, designed to simplify your tax compliance, invoicing, and financial management.\n\nWhat would you like to do?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a GST Demo"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2567632853585898"},{"name":"services_menu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We offer a wide range of services to power your business's growth. Please select a category you are interested in:"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Design Services"},{"type":"QUICK_REPLY","text":"Development Services"},{"type":"QUICK_REPLY","text":"Digital & Tele-Marketing"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"738253949023987"},{"name":"welcome_menu_minds","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello! Thank you for contacting MindsMiratus.\n\nIf you're a new visitor, we're happy to help you get started. If you're an existing customer, we're here to support you. Please choose from the options below."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Explore Our Services"},{"type":"QUICK_REPLY","text":"View Our Products"},{"type":"QUICK_REPLY","text":"Customer Support"},{"type":"QUICK_REPLY","text":"Contact Sales"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1115530356706526"},{"name":"demo","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Demo Template"},{"type":"BODY","text":"Demo Template Message."},{"type":"FOOTER","text":"sent by ExploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/visit"]},{"type":"URL","text":"Shop Now","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/shopnow"]},{"type":"PHONE_NUMBER","text":"Call Us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"757818770430461"},{"name":"contact_sales_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We'd love to discuss how we can help your business grow. You can reach our sales team via email at info\u0040mindsmiratus.com or call us at +91-321-123-4321.\n\nWould you like one of our experts to call you back?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Yes, call me back"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"954501560165102"},{"name":"dev_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our expert developers build robust and scalable solutions tailored to your business needs. Which area of development interests you?\n\n\ud83d\udcbb Web & Software Dev: Custom applications and software solutions.\n\ud83d\udcf1 Mobile App Dev: Engaging and high-performance apps for iOS and Android.\n\ud83d\uded2 E-commerce Dev: Powerful online stores that drive sales and growth."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Discuss a Project"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3118090155157247"},{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/tutrials"]},{"type":"URL","text":"View Demo","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"},{"name":"build_urltracking","parameter_format":"NAMED","components":[{"type":"BODY","text":"Hello \n\nThis is the test message to check wheather redirecting url is working or not."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/softwaredev"]},{"type":"URL","text":"Explore More","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/moreopt"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"788214393726841"},{"name":"marketing_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We help you reach your target audience and grow your brand effectively. Explore our marketing services:\n\n\ud83d\udcc8 Digital Marketing: SEO, Social Media Marketing, and targeted PPC campaigns.\n\ud83d\udcde Tele-Marketing: IVR systems, Bulk SMS, Voice Calls, and official WhatsApp API solutions."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Get a Marketing Plan"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1683803515627636"},{"name":"design_services_submenu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our creative team delivers stunning and effective designs to make your brand stand out. Which design service would you like to know more about?\n\n\ud83c\udfa8 Website Designing: We build beautiful, responsive, and user-friendly websites.\n\ud83d\udd8c\ufe0f Graphic Designing: We create compelling visuals, logos, and branding materials."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a Design Quote"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3291988187631744"},{"name":"support_gst_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"You've reached support for our GST Software. How can we help?\n\n\ud83d\udd27 Technical Help: For installation issues, errors, or bugs.\n\ud83d\udca1 Feature Questions: To understand how to use a specific feature.\n\ud83d\udcda View FAQs: Get answers to common questions instantly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Support Agent"},{"type":"QUICK_REPLY","text":"View FAQs"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1305308197880244"},{"name":"support_report_issue_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We're sorry to hear you're experiencing an issue.\n\nTo help us resolve it quickly, please tap the button below to connect with our technical support team. Please be ready to provide a brief description of the problem."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Connect to Technical Team"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"755167220845328"},{"name":"about_us_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"MindsMiratus is a leading IT solutions company dedicated to helping businesses grow through innovative and effective digital services. From design to development and marketing, we provide comprehensive solutions to elevate your brand.\n\nWhat would you like to do next?"},{"type":"FOOTER","text":"sent by Mindsmirtus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"},{"type":"QUICK_REPLY","text":"Talk to an Expert"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1971204310331370"},{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"\u26a1\ufe0f Feature Annoucement ! \u26a1\ufe0f\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/\u00257B\u00257BI\u00257D\u00257D{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"View Tutorials","url":"https:\/\/www.youtube.com\/\u00257B\u00257Bi\u00257D\u00257D{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"},{"name":"call_log","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is the checking for call log event."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/seeme"]},{"type":"URL","text":"Call Us","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/callme"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1286058192539680"},{"name":"track_url_after_flow_integ","message_send_ttl_seconds":86400,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BODY","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/vosiatstore"]},{"type":"URL","text":"Visit Demo","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/demo"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1084981273615848"},{"name":"template_3","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 3"},{"type":"BODY","text":"This is themplate : 3"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1760623375330098"},{"name":"template_2","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 2"},{"type":"BODY","text":"This is teh template 2"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1222093123248950"},{"name":"template_1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 1"},{"type":"BODY","text":"This is the Template : 1"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 2"},{"type":"QUICK_REPLY","text":"Show Me Template 3"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2381212765606675"},{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"watch Video","url":"https:\/\/www.youtube.com\/{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"},{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=7sw82IMY4uQQ7kNvwGo_356&_nc_oc=AdmfC_35MV8W4KRORGuHw5JAsYOfN8J86REvew1DuaiUgQ_fHx3Im8bnwAWEm0m4yQuT3bjqKMqibQMSN3r0ASV_&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=7WPYvJzV3bay-HHhYPUl_g&oh=01_Q5Aa2gGk9tHYIgip1q9VX_0ks9ou2iD3QB4FY7xfGFTDkO-e9w&oe=68F4994F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! \ud83c\udf89\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15\u0025 discount** on your purchase. Don't just follow the trend\u2014set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https:\/\/xplorebytesolutions.com\/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"},{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https:\/\/www.qwexample.com\/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"}],"paging":{"cursors":{"before":"MAZDZD","after":"OTkZD"}}}
2025-09-19 16:39:16.453 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType107`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:39:16.455 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 909.7187ms
2025-09-19 16:39:16.456 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-19 16:39:16.457 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 918.5509ms
2025-09-19 16:39:26.338 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-19 16:39:26.340 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:39:26.341 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 2.9204ms
2025-09-19 16:39:26.343 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-19 16:39:26.345 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:39:26.345 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-19 16:39:26.346 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-09-19 16:39:26.348 +05:30 [INF] 🔎 Fetching templates for BusinessId "10d9469d-4e77-4845-a87f-dbc7e3348b11"
2025-09-19 16:39:26.350 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:39:26.352 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-19 16:39:26.353 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-19 16:39:27.250 +05:30 [INF] Received HTTP response headers after 895.7813ms - 200
2025-09-19 16:39:27.251 +05:30 [INF] End processing HTTP request after 899.0006ms - 200
2025-09-19 16:39:27.327 +05:30 [INF] 📦 Meta Template API (Biz "10d9469d-4e77-4845-a87f-dbc7e3348b11") payload:
{"data":[{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"},{"name":"support_project_status_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"To check the status of your ongoing project, please provide your registered email address or project ID, and one of our project managers will get back to you with a detailed update shortly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Project Manager"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1599668577490835"},{"name":"human_takeover_confirmation_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Thank you! We've received your request. One of our experts will get in touch with you shortly.\n\nIs there anything else I can help you with in the meantime?"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1304432401406654"},{"name":"support_main_menu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Welcome to the MindsMiratus Support Center. We're here to help you with any questions or issues you may have.\n\nPlease select an option so we can assist you faster."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"GST Software Support"},{"type":"QUICK_REPLY","text":"Check Project Status"},{"type":"QUICK_REPLY","text":"Report Technical Issues"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en","status":"APPROVED","category":"MARKETING","id":"679342281096115"},{"name":"products_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We are proud to offer our powerful and easy-to-use GST Software, designed to simplify your tax compliance, invoicing, and financial management.\n\nWhat would you like to do?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a GST Demo"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2567632853585898"},{"name":"services_menu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We offer a wide range of services to power your business's growth. Please select a category you are interested in:"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Design Services"},{"type":"QUICK_REPLY","text":"Development Services"},{"type":"QUICK_REPLY","text":"Digital & Tele-Marketing"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"738253949023987"},{"name":"welcome_menu_minds","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello! Thank you for contacting MindsMiratus.\n\nIf you're a new visitor, we're happy to help you get started. If you're an existing customer, we're here to support you. Please choose from the options below."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Explore Our Services"},{"type":"QUICK_REPLY","text":"View Our Products"},{"type":"QUICK_REPLY","text":"Customer Support"},{"type":"QUICK_REPLY","text":"Contact Sales"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1115530356706526"},{"name":"demo","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Demo Template"},{"type":"BODY","text":"Demo Template Message."},{"type":"FOOTER","text":"sent by ExploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/visit"]},{"type":"URL","text":"Shop Now","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/shopnow"]},{"type":"PHONE_NUMBER","text":"Call Us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"757818770430461"},{"name":"contact_sales_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We'd love to discuss how we can help your business grow. You can reach our sales team via email at info\u0040mindsmiratus.com or call us at +91-321-123-4321.\n\nWould you like one of our experts to call you back?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Yes, call me back"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"954501560165102"},{"name":"dev_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our expert developers build robust and scalable solutions tailored to your business needs. Which area of development interests you?\n\n\ud83d\udcbb Web & Software Dev: Custom applications and software solutions.\n\ud83d\udcf1 Mobile App Dev: Engaging and high-performance apps for iOS and Android.\n\ud83d\uded2 E-commerce Dev: Powerful online stores that drive sales and growth."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Discuss a Project"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3118090155157247"},{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/tutrials"]},{"type":"URL","text":"View Demo","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"},{"name":"build_urltracking","parameter_format":"NAMED","components":[{"type":"BODY","text":"Hello \n\nThis is the test message to check wheather redirecting url is working or not."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/softwaredev"]},{"type":"URL","text":"Explore More","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/moreopt"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"788214393726841"},{"name":"marketing_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We help you reach your target audience and grow your brand effectively. Explore our marketing services:\n\n\ud83d\udcc8 Digital Marketing: SEO, Social Media Marketing, and targeted PPC campaigns.\n\ud83d\udcde Tele-Marketing: IVR systems, Bulk SMS, Voice Calls, and official WhatsApp API solutions."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Get a Marketing Plan"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1683803515627636"},{"name":"design_services_submenu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our creative team delivers stunning and effective designs to make your brand stand out. Which design service would you like to know more about?\n\n\ud83c\udfa8 Website Designing: We build beautiful, responsive, and user-friendly websites.\n\ud83d\udd8c\ufe0f Graphic Designing: We create compelling visuals, logos, and branding materials."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a Design Quote"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3291988187631744"},{"name":"support_gst_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"You've reached support for our GST Software. How can we help?\n\n\ud83d\udd27 Technical Help: For installation issues, errors, or bugs.\n\ud83d\udca1 Feature Questions: To understand how to use a specific feature.\n\ud83d\udcda View FAQs: Get answers to common questions instantly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Support Agent"},{"type":"QUICK_REPLY","text":"View FAQs"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1305308197880244"},{"name":"support_report_issue_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We're sorry to hear you're experiencing an issue.\n\nTo help us resolve it quickly, please tap the button below to connect with our technical support team. Please be ready to provide a brief description of the problem."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Connect to Technical Team"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"755167220845328"},{"name":"about_us_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"MindsMiratus is a leading IT solutions company dedicated to helping businesses grow through innovative and effective digital services. From design to development and marketing, we provide comprehensive solutions to elevate your brand.\n\nWhat would you like to do next?"},{"type":"FOOTER","text":"sent by Mindsmirtus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"},{"type":"QUICK_REPLY","text":"Talk to an Expert"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1971204310331370"},{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"\u26a1\ufe0f Feature Annoucement ! \u26a1\ufe0f\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/\u00257B\u00257BI\u00257D\u00257D{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"View Tutorials","url":"https:\/\/www.youtube.com\/\u00257B\u00257Bi\u00257D\u00257D{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"},{"name":"call_log","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is the checking for call log event."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/seeme"]},{"type":"URL","text":"Call Us","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/callme"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1286058192539680"},{"name":"track_url_after_flow_integ","message_send_ttl_seconds":86400,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BODY","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/vosiatstore"]},{"type":"URL","text":"Visit Demo","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/demo"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1084981273615848"},{"name":"template_3","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 3"},{"type":"BODY","text":"This is themplate : 3"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1760623375330098"},{"name":"template_2","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 2"},{"type":"BODY","text":"This is teh template 2"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1222093123248950"},{"name":"template_1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 1"},{"type":"BODY","text":"This is the Template : 1"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 2"},{"type":"QUICK_REPLY","text":"Show Me Template 3"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2381212765606675"},{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"watch Video","url":"https:\/\/www.youtube.com\/{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"},{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=7sw82IMY4uQQ7kNvwGo_356&_nc_oc=AdmfC_35MV8W4KRORGuHw5JAsYOfN8J86REvew1DuaiUgQ_fHx3Im8bnwAWEm0m4yQuT3bjqKMqibQMSN3r0ASV_&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=clna5YLCfZuDAE0_V_zF7w&oh=01_Q5Aa2gGpxm8DbYm5xkPptEnah9MobuOw1X9gvdkAodcAMBICGQ&oe=68F4994F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! \ud83c\udf89\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15\u0025 discount** on your purchase. Don't just follow the trend\u2014set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https:\/\/xplorebytesolutions.com\/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"},{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https:\/\/www.qwexample.com\/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"}],"paging":{"cursors":{"before":"MAZDZD","after":"OTkZD"}}}
2025-09-19 16:39:27.331 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType107`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:39:27.332 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 984.9074ms
2025-09-19 16:39:27.333 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-19 16:39:27.334 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 991.3306ms
2025-09-19 16:39:42.310 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-19 16:39:42.312 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:39:42.313 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 2.8712ms
2025-09-19 16:39:42.315 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-19 16:39:42.317 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:39:42.318 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-19 16:39:42.319 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-09-19 16:39:42.320 +05:30 [INF] 🔎 Fetching templates for BusinessId "10d9469d-4e77-4845-a87f-dbc7e3348b11"
2025-09-19 16:39:42.323 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:39:42.325 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-19 16:39:42.327 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-19 16:39:43.044 +05:30 [INF] Received HTTP response headers after 715.8732ms - 200
2025-09-19 16:39:43.045 +05:30 [INF] End processing HTTP request after 719.6059ms - 200
2025-09-19 16:39:43.208 +05:30 [INF] 📦 Meta Template API (Biz "10d9469d-4e77-4845-a87f-dbc7e3348b11") payload:
{"data":[{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"},{"name":"support_project_status_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"To check the status of your ongoing project, please provide your registered email address or project ID, and one of our project managers will get back to you with a detailed update shortly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Project Manager"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1599668577490835"},{"name":"human_takeover_confirmation_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Thank you! We've received your request. One of our experts will get in touch with you shortly.\n\nIs there anything else I can help you with in the meantime?"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1304432401406654"},{"name":"support_main_menu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Welcome to the MindsMiratus Support Center. We're here to help you with any questions or issues you may have.\n\nPlease select an option so we can assist you faster."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"GST Software Support"},{"type":"QUICK_REPLY","text":"Check Project Status"},{"type":"QUICK_REPLY","text":"Report Technical Issues"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en","status":"APPROVED","category":"MARKETING","id":"679342281096115"},{"name":"products_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We are proud to offer our powerful and easy-to-use GST Software, designed to simplify your tax compliance, invoicing, and financial management.\n\nWhat would you like to do?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a GST Demo"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2567632853585898"},{"name":"services_menu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We offer a wide range of services to power your business's growth. Please select a category you are interested in:"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Design Services"},{"type":"QUICK_REPLY","text":"Development Services"},{"type":"QUICK_REPLY","text":"Digital & Tele-Marketing"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"738253949023987"},{"name":"welcome_menu_minds","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello! Thank you for contacting MindsMiratus.\n\nIf you're a new visitor, we're happy to help you get started. If you're an existing customer, we're here to support you. Please choose from the options below."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Explore Our Services"},{"type":"QUICK_REPLY","text":"View Our Products"},{"type":"QUICK_REPLY","text":"Customer Support"},{"type":"QUICK_REPLY","text":"Contact Sales"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1115530356706526"},{"name":"demo","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Demo Template"},{"type":"BODY","text":"Demo Template Message."},{"type":"FOOTER","text":"sent by ExploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/visit"]},{"type":"URL","text":"Shop Now","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/shopnow"]},{"type":"PHONE_NUMBER","text":"Call Us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"757818770430461"},{"name":"contact_sales_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We'd love to discuss how we can help your business grow. You can reach our sales team via email at info\u0040mindsmiratus.com or call us at +91-321-123-4321.\n\nWould you like one of our experts to call you back?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Yes, call me back"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"954501560165102"},{"name":"dev_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our expert developers build robust and scalable solutions tailored to your business needs. Which area of development interests you?\n\n\ud83d\udcbb Web & Software Dev: Custom applications and software solutions.\n\ud83d\udcf1 Mobile App Dev: Engaging and high-performance apps for iOS and Android.\n\ud83d\uded2 E-commerce Dev: Powerful online stores that drive sales and growth."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Discuss a Project"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3118090155157247"},{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/tutrials"]},{"type":"URL","text":"View Demo","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"},{"name":"build_urltracking","parameter_format":"NAMED","components":[{"type":"BODY","text":"Hello \n\nThis is the test message to check wheather redirecting url is working or not."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/softwaredev"]},{"type":"URL","text":"Explore More","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/moreopt"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"788214393726841"},{"name":"marketing_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We help you reach your target audience and grow your brand effectively. Explore our marketing services:\n\n\ud83d\udcc8 Digital Marketing: SEO, Social Media Marketing, and targeted PPC campaigns.\n\ud83d\udcde Tele-Marketing: IVR systems, Bulk SMS, Voice Calls, and official WhatsApp API solutions."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Get a Marketing Plan"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1683803515627636"},{"name":"design_services_submenu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our creative team delivers stunning and effective designs to make your brand stand out. Which design service would you like to know more about?\n\n\ud83c\udfa8 Website Designing: We build beautiful, responsive, and user-friendly websites.\n\ud83d\udd8c\ufe0f Graphic Designing: We create compelling visuals, logos, and branding materials."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a Design Quote"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3291988187631744"},{"name":"support_gst_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"You've reached support for our GST Software. How can we help?\n\n\ud83d\udd27 Technical Help: For installation issues, errors, or bugs.\n\ud83d\udca1 Feature Questions: To understand how to use a specific feature.\n\ud83d\udcda View FAQs: Get answers to common questions instantly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Support Agent"},{"type":"QUICK_REPLY","text":"View FAQs"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1305308197880244"},{"name":"support_report_issue_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We're sorry to hear you're experiencing an issue.\n\nTo help us resolve it quickly, please tap the button below to connect with our technical support team. Please be ready to provide a brief description of the problem."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Connect to Technical Team"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"755167220845328"},{"name":"about_us_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"MindsMiratus is a leading IT solutions company dedicated to helping businesses grow through innovative and effective digital services. From design to development and marketing, we provide comprehensive solutions to elevate your brand.\n\nWhat would you like to do next?"},{"type":"FOOTER","text":"sent by Mindsmirtus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"},{"type":"QUICK_REPLY","text":"Talk to an Expert"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1971204310331370"},{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"\u26a1\ufe0f Feature Annoucement ! \u26a1\ufe0f\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/\u00257B\u00257BI\u00257D\u00257D{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"View Tutorials","url":"https:\/\/www.youtube.com\/\u00257B\u00257Bi\u00257D\u00257D{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"},{"name":"call_log","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is the checking for call log event."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/seeme"]},{"type":"URL","text":"Call Us","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/callme"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1286058192539680"},{"name":"track_url_after_flow_integ","message_send_ttl_seconds":86400,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BODY","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/vosiatstore"]},{"type":"URL","text":"Visit Demo","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/demo"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1084981273615848"},{"name":"template_3","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 3"},{"type":"BODY","text":"This is themplate : 3"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1760623375330098"},{"name":"template_2","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 2"},{"type":"BODY","text":"This is teh template 2"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1222093123248950"},{"name":"template_1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 1"},{"type":"BODY","text":"This is the Template : 1"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 2"},{"type":"QUICK_REPLY","text":"Show Me Template 3"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2381212765606675"},{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"watch Video","url":"https:\/\/www.youtube.com\/{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"},{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=7sw82IMY4uQQ7kNvwGo_356&_nc_oc=AdmfC_35MV8W4KRORGuHw5JAsYOfN8J86REvew1DuaiUgQ_fHx3Im8bnwAWEm0m4yQuT3bjqKMqibQMSN3r0ASV_&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=L0-wHHtUB9M2TdQpLyME2g&oh=01_Q5Aa2gGc5GyHfoIyr2r6Dw88GbzZ2QG9oDkvm6y-WCYcjfZR7w&oe=68F4994F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! \ud83c\udf89\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15\u0025 discount** on your purchase. Don't just follow the trend\u2014set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https:\/\/xplorebytesolutions.com\/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"},{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https:\/\/www.qwexample.com\/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"}],"paging":{"cursors":{"before":"MAZDZD","after":"OTkZD"}}}
2025-09-19 16:39:43.212 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType107`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:39:43.214 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 893.5862ms
2025-09-19 16:39:43.215 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-19 16:39:43.215 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 900.1486ms
2025-09-19 16:40:19.233 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/save-visual - null null
2025-09-19 16:40:19.235 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:40:19.236 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/save-visual - 204 null null 3.4143ms
2025-09-19 16:40:19.242 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/cta-flow/save-visual - application/json 4714
2025-09-19 16:40:19.245 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:40:19.246 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.SaveVisualFlow (xbytechat.api)'
2025-09-19 16:40:19.267 +05:30 [INF] Route matched with {action = "SaveVisualFlow", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SaveVisualFlow(xbytechat.api.Features.CTAFlowBuilder.DTOs.SaveVisualFlowDto) on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-09-19 16:40:19.400 +05:30 [INF] 📦 Saving CTA Flow: tes001 by Tesla Inc.
2025-09-19 16:40:19.404 +05:30 [INF] 🧠 SaveVisualFlow started | FlowName: tes001 | BusinessId: "10d9469d-4e77-4845-a87f-dbc7e3348b11"
2025-09-19 16:40:19.412 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_FlowName_0='tes001', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
FROM "CTAFlowConfigs" AS c
WHERE c."FlowName" = @__dto_FlowName_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-19 16:40:19.425 +05:30 [INF] ✅ New FlowConfig created with ID: "2b73877c-3c18-4fbb-af61-1906393bb2d3"
2025-09-19 16:40:19.490 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@p0='2b73877c-3c18-4fbb-af61-1906393bb2d3', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='2025-09-19T11:10:19.4155068Z' (DbType = DateTime), @p3='Tesla Inc.', @p4='tes001' (Nullable = false), @p5='True', @p6='True', @p7='2025-09-19T11:10:19.4155775Z' (Nullable = true) (DbType = DateTime), @p8='07b5c8be-5c1f-4fce-9470-986d877aee04', @p9='2b73877c-3c18-4fbb-af61-1906393bb2d3', @p10='560' (Nullable = true), @p11='96' (Nullable = true), @p12=NULL, @p13=NULL, @p14='3', @p15='contact_sales_info_v1' (Nullable = false), @p16='text_template', @p17='Contact Sales' (Nullable = false), @p18='quick_reply' (Nullable = false), @p19='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @p20='2b73877c-3c18-4fbb-af61-1906393bb2d3', @p21='-416' (Nullable = true), @p22='192' (Nullable = true), @p23=NULL, @p24=NULL, @p25='0', @p26='welcome_menu_minds' (Nullable = false), @p27='text_template', @p28='Back to Main Menu' (Nullable = false), @p29='quick_reply' (Nullable = false), @p30='62ee00c5-2a9a-4077-a25e-f8288347a910', @p31='2b73877c-3c18-4fbb-af61-1906393bb2d3', @p32='-48' (Nullable = true), @p33='384' (Nullable = true), @p34=NULL, @p35=NULL, @p36='2', @p37='products_info_v1' (Nullable = false), @p38='text_template', @p39='View Our Products' (Nullable = false), @p40='quick_reply' (Nullable = false), @p41='806ee374-1a80-4fb2-ba55-c1ec1685c618', @p42='2b73877c-3c18-4fbb-af61-1906393bb2d3', @p43='64' (Nullable = true), @p44='304' (Nullable = true), @p45=NULL, @p46=NULL, @p47='4', @p48='services_menu_v1' (Nullable = false), @p49='text_template', @p50='Explore Our Services' (Nullable = false), @p51='quick_reply' (Nullable = false), @p52='97457a39-996c-4acf-a357-c5038b2dd21c', @p53='2b73877c-3c18-4fbb-af61-1906393bb2d3', @p54='320' (Nullable = true), @p55='320' (Nullable = true), @p56=NULL, @p57=NULL, @p58='1', @p59='support_project_status_v1' (Nullable = false), @p60='text_template', @p61='Customer Support' (Nullable = false), @p62='quick_reply' (Nullable = false), @p63='10367af8-cae7-49d6-8a84-1f05e46a68d7', @p64='0', @p65='quick_reply' (Nullable = false), @p66='Explore Our Services' (Nullable = false), @p67='QUICK_REPLY' (Nullable = false), @p68='' (Nullable = false), @p69='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @p70='806ee374-1a80-4fb2-ba55-c1ec1685c618' (Nullable = true), @p71='1ec93ec4-b142-4e1b-bdcf-4e3c7c35259e', @p72='3', @p73='quick_reply' (Nullable = false), @p74='Contact Sales' (Nullable = false), @p75='QUICK_REPLY' (Nullable = false), @p76='' (Nullable = false), @p77='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @p78='07b5c8be-5c1f-4fce-9470-986d877aee04' (Nullable = true), @p79='331eb556-ee08-4576-996c-605a7b11e45d', @p80='1', @p81='quick_reply' (Nullable = false), @p82='Back to Main Menu' (Nullable = false), @p83='QUICK_REPLY' (Nullable = false), @p84='' (Nullable = false), @p85='62ee00c5-2a9a-4077-a25e-f8288347a910', @p86='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c' (Nullable = true), @p87='70ac8102-2132-4cee-8f3f-1cf80ebfbf6e', @p88='1', @p89='quick_reply' (Nullable = false), @p90='Back to Main Menu' (Nullable = false), @p91='QUICK_REPLY' (Nullable = false), @p92='' (Nullable = false), @p93='07b5c8be-5c1f-4fce-9470-986d877aee04', @p94='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c' (Nullable = true), @p95='ba4de7ce-9cea-4c41-97f8-9960183f051a', @p96='2', @p97='quick_reply' (Nullable = false), @p98='Customer Support' (Nullable = false), @p99='QUICK_REPLY' (Nullable = false), @p100='' (Nullable = false), @p101='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @p102='97457a39-996c-4acf-a357-c5038b2dd21c' (Nullable = true), @p103='e087f2c1-967a-4861-898f-ccd3d95407e2', @p104='1', @p105='quick_reply' (Nullable = false), @p106='View Our Products' (Nullable = false), @p107='QUICK_REPLY' (Nullable = false), @p108='' (Nullable = false), @p109='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @p110='62ee00c5-2a9a-4077-a25e-f8288347a910' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CTAFlowConfigs" ("Id", "BusinessId", "CreatedAt", "CreatedBy", "FlowName", "IsActive", "IsPublished", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO "CTAFlowSteps" ("Id", "CTAFlowConfigId", "PositionX", "PositionY", "RequiredSource", "RequiredTag", "StepOrder", "TemplateToSend", "TemplateType", "TriggerButtonText", "TriggerButtonType")
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "CTAFlowSteps" ("Id", "CTAFlowConfigId", "PositionX", "PositionY", "RequiredSource", "RequiredTag", "StepOrder", "TemplateToSend", "TemplateType", "TriggerButtonText", "TriggerButtonType")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29);
INSERT INTO "CTAFlowSteps" ("Id", "CTAFlowConfigId", "PositionX", "PositionY", "RequiredSource", "RequiredTag", "StepOrder", "TemplateToSend", "TemplateType", "TriggerButtonText", "TriggerButtonType")
VALUES (@p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40);
INSERT INTO "CTAFlowSteps" ("Id", "CTAFlowConfigId", "PositionX", "PositionY", "RequiredSource", "RequiredTag", "StepOrder", "TemplateToSend", "TemplateType", "TriggerButtonText", "TriggerButtonType")
VALUES (@p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51);
INSERT INTO "CTAFlowSteps" ("Id", "CTAFlowConfigId", "PositionX", "PositionY", "RequiredSource", "RequiredTag", "StepOrder", "TemplateToSend", "TemplateType", "TriggerButtonText", "TriggerButtonType")
VALUES (@p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62);
INSERT INTO "FlowButtonLinks" ("Id", "ButtonIndex", "ButtonSubType", "ButtonText", "ButtonType", "ButtonValue", "CTAFlowStepId", "NextStepId")
VALUES (@p63, @p64, @p65, @p66, @p67, @p68, @p69, @p70);
INSERT INTO "FlowButtonLinks" ("Id", "ButtonIndex", "ButtonSubType", "ButtonText", "ButtonType", "ButtonValue", "CTAFlowStepId", "NextStepId")
VALUES (@p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78);
INSERT INTO "FlowButtonLinks" ("Id", "ButtonIndex", "ButtonSubType", "ButtonText", "ButtonType", "ButtonValue", "CTAFlowStepId", "NextStepId")
VALUES (@p79, @p80, @p81, @p82, @p83, @p84, @p85, @p86);
INSERT INTO "FlowButtonLinks" ("Id", "ButtonIndex", "ButtonSubType", "ButtonText", "ButtonType", "ButtonValue", "CTAFlowStepId", "NextStepId")
VALUES (@p87, @p88, @p89, @p90, @p91, @p92, @p93, @p94);
INSERT INTO "FlowButtonLinks" ("Id", "ButtonIndex", "ButtonSubType", "ButtonText", "ButtonType", "ButtonValue", "CTAFlowStepId", "NextStepId")
VALUES (@p95, @p96, @p97, @p98, @p99, @p100, @p101, @p102);
INSERT INTO "FlowButtonLinks" ("Id", "ButtonIndex", "ButtonSubType", "ButtonText", "ButtonType", "ButtonValue", "CTAFlowStepId", "NextStepId")
VALUES (@p103, @p104, @p105, @p106, @p107, @p108, @p109, @p110);
2025-09-19 16:40:19.496 +05:30 [INF] ✅ Flow 'tes001' saved | Steps: 5 | Links: 12
2025-09-19 16:40:19.498 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:40:19.499 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.SaveVisualFlow (xbytechat.api) in 230.1535ms
2025-09-19 16:40:19.500 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.SaveVisualFlow (xbytechat.api)'
2025-09-19 16:40:19.501 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/cta-flow/save-visual - 200 null application/json; charset=utf-8 259.1603ms
2025-09-19 16:40:27.681 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-draft - null null
2025-09-19 16:40:27.684 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:40:27.685 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-draft - 204 null null 4.0416ms
2025-09-19 16:40:27.688 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - null null
2025-09-19 16:40:27.692 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:40:27.693 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-09-19 16:40:27.697 +05:30 [INF] Route matched with {action = "GetAllDraftFlows", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllDraftFlows() on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-09-19 16:40:27.712 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."FlowName", c."CreatedAt", c."IsPublished"
FROM "CTAFlowConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND NOT (c."IsPublished") AND c."IsActive"
ORDER BY c."CreatedAt" DESC
2025-09-19 16:40:27.726 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CTAFlowBuilder.DTOs.VisualFlowSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 16:40:27.729 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api) in 29.4027ms
2025-09-19 16:40:27.731 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-09-19 16:40:27.732 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - 200 null application/json; charset=utf-8 43.7367ms
2025-09-19 16:40:29.264 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-published - null null
2025-09-19 16:40:29.267 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:40:29.267 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-published - 204 null null 2.9044ms
2025-09-19 16:40:29.270 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-published - null null
2025-09-19 16:40:29.272 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:40:29.273 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetPublishedFlows (xbytechat.api)'
2025-09-19 16:40:29.276 +05:30 [INF] Route matched with {action = "GetPublishedFlows", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPublishedFlows() on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-09-19 16:40:29.283 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."FlowName", c."IsPublished", c."CreatedAt"
FROM "CTAFlowConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsPublished"
ORDER BY c."CreatedAt" DESC
2025-09-19 16:40:29.286 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CTAFlowBuilder.DTOs.VisualFlowSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 16:40:29.288 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetPublishedFlows (xbytechat.api) in 10.3657ms
2025-09-19 16:40:29.289 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetPublishedFlows (xbytechat.api)'
2025-09-19 16:40:29.291 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-published - 200 null application/json; charset=utf-8 20.7903ms
2025-09-19 16:40:30.555 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/by-id/2b73877c-3c18-4fbb-af61-1906393bb2d3 - null null
2025-09-19 16:40:30.557 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:40:30.558 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/by-id/2b73877c-3c18-4fbb-af61-1906393bb2d3 - 204 null null 3.0699ms
2025-09-19 16:40:30.560 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/cta-flow/by-id/2b73877c-3c18-4fbb-af61-1906393bb2d3 - null null
2025-09-19 16:40:30.562 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:40:30.563 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetFlowById (xbytechat.api)'
2025-09-19 16:40:30.566 +05:30 [INF] Route matched with {action = "GetFlowById", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetFlowById(System.Guid) on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-09-19 16:40:30.579 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-19 16:40:30.584 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__flowId_0='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", t0."Id", t0."CTAFlowConfigId", t0."PositionX", t0."PositionY", t0."RequiredSource", t0."RequiredTag", t0."StepOrder", t0."TemplateToSend", t0."TemplateType", t0."TriggerButtonText", t0."TriggerButtonType", t0."Id0", t0."ButtonIndex", t0."ButtonSubType", t0."ButtonText", t0."ButtonType", t0."ButtonValue", t0."CTAFlowStepId", t0."NextStepId"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."Id" = @__flowId_0 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."CTAFlowConfigId", c0."PositionX", c0."PositionY", c0."RequiredSource", c0."RequiredTag", c0."StepOrder", c0."TemplateToSend", c0."TemplateType", c0."TriggerButtonText", c0."TriggerButtonType", f."Id" AS "Id0", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
    FROM "CTAFlowSteps" AS c0
    LEFT JOIN "FlowButtonLinks" AS f ON c0."Id" = f."CTAFlowStepId"
) AS t0 ON t."Id" = t0."CTAFlowConfigId"
ORDER BY t."Id", t0."Id"
2025-09-19 16:40:30.590 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:40:30.592 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:40:30.593 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:40:31.880 +05:30 [INF] Received HTTP response headers after 1286.3825ms - 200
2025-09-19 16:40:31.882 +05:30 [INF] End processing HTTP request after 1289.5995ms - 200
2025-09-19 16:40:31.992 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:40:31.994 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:40:31.995 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:40:32.818 +05:30 [INF] Received HTTP response headers after 822.4705ms - 200
2025-09-19 16:40:32.820 +05:30 [INF] End processing HTTP request after 825.7555ms - 200
2025-09-19 16:40:32.906 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:40:32.908 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:40:32.909 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:40:33.697 +05:30 [INF] Received HTTP response headers after 787.123ms - 200
2025-09-19 16:40:33.698 +05:30 [INF] End processing HTTP request after 790.6152ms - 200
2025-09-19 16:40:33.884 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:40:33.887 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:40:33.889 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:40:34.651 +05:30 [INF] Received HTTP response headers after 761.3433ms - 200
2025-09-19 16:40:34.653 +05:30 [INF] End processing HTTP request after 765.2444ms - 200
2025-09-19 16:40:34.727 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:40:34.729 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:40:34.733 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:40:35.652 +05:30 [INF] Received HTTP response headers after 918.0364ms - 200
2025-09-19 16:40:35.654 +05:30 [INF] End processing HTTP request after 924.4639ms - 200
2025-09-19 16:40:35.747 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CTAFlowBuilder.DTOs.SaveVisualFlowDto'.
2025-09-19 16:40:35.773 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetFlowById (xbytechat.api) in 5205.3052ms
2025-09-19 16:40:35.775 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetFlowById (xbytechat.api)'
2025-09-19 16:40:35.776 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/cta-flow/by-id/2b73877c-3c18-4fbb-af61-1906393bb2d3 - 200 null application/json; charset=utf-8 5215.3937ms
2025-09-19 16:41:00.029 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 16:41:00.029 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 16:41:00.035 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:41:00.037 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:41:00.037 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 204 null null 8.5592ms
2025-09-19 16:41:00.039 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 204 null null 9.7851ms
2025-09-19 16:41:00.044 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 16:41:00.047 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 16:41:00.048 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:41:00.050 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:41:00.051 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 16:41:00.051 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-19 16:41:00.052 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-19 16:41:00.053 +05:30 [INF] Route matched with {action = "GetSenders", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSenders(System.Guid) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 16:41:00.056 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-19 16:41:00.059 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 16:41:00.060 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType107`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType183`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:41:00.061 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.WhatsAppSettings.DTOs.WhatsAppSenderDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 16:41:00.062 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 8.559ms
2025-09-19 16:41:00.063 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api) in 7.327ms
2025-09-19 16:41:00.064 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 16:41:00.065 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-19 16:41:00.066 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 200 null application/json; charset=utf-8 21.6458ms
2025-09-19 16:41:00.067 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 200 null application/json; charset=utf-8 20.1056ms
2025-09-19 16:41:12.392 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/welcome_menu_minds - null null
2025-09-19 16:41:12.394 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:41:12.394 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/welcome_menu_minds - 204 null null 2.9509ms
2025-09-19 16:41:12.397 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/welcome_menu_minds - null null
2025-09-19 16:41:12.398 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:41:12.399 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-19 16:41:12.400 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-19 16:41:12.404 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__name_1='welcome_menu_minds'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-09-19 16:41:12.406 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType184`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:41:12.407 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 5.9768ms
2025-09-19 16:41:12.408 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-19 16:41:12.409 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/welcome_menu_minds - 200 null application/json; charset=utf-8 12.1924ms
2025-09-19 16:41:19.304 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/list/10d9469d-4e77-4845-a87f-dbc7e3348b11?onlyPublished=true - null null
2025-09-19 16:41:19.307 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:41:19.307 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/list/10d9469d-4e77-4845-a87f-dbc7e3348b11?onlyPublished=true - 204 null null 3.0667ms
2025-09-19 16:41:19.310 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/list/10d9469d-4e77-4845-a87f-dbc7e3348b11?onlyPublished=true - null null
2025-09-19 16:41:19.312 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:41:19.313 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAvailableFlows (xbytechat.api)'
2025-09-19 16:41:19.316 +05:30 [INF] Route matched with {action = "GetAvailableFlows", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAvailableFlows(System.Guid, Boolean) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 16:41:19.343 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."FlowName", c."IsPublished"
FROM "CTAFlowConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive" AND c."IsPublished"
ORDER BY c."UpdatedAt" DESC
2025-09-19 16:41:19.346 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType52`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.FlowListItemDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:41:19.349 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAvailableFlows (xbytechat.api) in 31.4821ms
2025-09-19 16:41:19.350 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAvailableFlows (xbytechat.api)'
2025-09-19 16:41:19.351 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/list/10d9469d-4e77-4845-a87f-dbc7e3348b11?onlyPublished=true - 200 null application/json; charset=utf-8 41.1851ms
2025-09-19 16:41:28.713 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-09-19 16:41:28.716 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:41:28.716 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 3.0413ms
2025-09-19 16:41:28.719 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 668
2025-09-19 16:41:28.721 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:41:28.722 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-19 16:41:28.723 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 16:41:30.273 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__phoneNumberId_1='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."PhoneNumberId" = @__phoneNumberId_1 AND w."IsActive"
LIMIT 1
2025-09-19 16:41:30.283 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-19 16:41:30.288 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__incomingFlowId_Value_0='2b73877c-3c18-4fbb-af61-1906393bb2d3', @__8__locals1_businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", t0."Id", t0."CTAFlowConfigId", t0."PositionX", t0."PositionY", t0."RequiredSource", t0."RequiredTag", t0."StepOrder", t0."TemplateToSend", t0."TemplateType", t0."TriggerButtonText", t0."TriggerButtonType", t0."Id0", t0."ButtonIndex", t0."ButtonSubType", t0."ButtonText", t0."ButtonType", t0."ButtonValue", t0."CTAFlowStepId", t0."NextStepId"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."Id" = @__incomingFlowId_Value_0 AND c."BusinessId" = @__8__locals1_businessId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."CTAFlowConfigId", c0."PositionX", c0."PositionY", c0."RequiredSource", c0."RequiredTag", c0."StepOrder", c0."TemplateToSend", c0."TemplateType", c0."TriggerButtonText", c0."TriggerButtonType", f."Id" AS "Id0", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
    FROM "CTAFlowSteps" AS c0
    LEFT JOIN "FlowButtonLinks" AS f ON c0."Id" = f."CTAFlowStepId"
) AS t0 ON t."Id" = t0."CTAFlowConfigId"
ORDER BY t."Id", t0."Id"
2025-09-19 16:41:30.295 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:41:30.296 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:41:30.297 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:41:31.092 +05:30 [INF] Received HTTP response headers after 794.4986ms - 200
2025-09-19 16:41:31.093 +05:30 [INF] End processing HTTP request after 797.203ms - 200
2025-09-19 16:41:31.189 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='5d760969-9fb2-481a-9139-be56c85c2f3b', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p3=NULL (DbType = Guid), @p4='text', @p5='2025-09-19T11:11:31.1700987Z' (DbType = DateTime), @p6='system', @p7=NULL (DbType = Guid), @p8=NULL (DbType = DateTime), @p9=NULL, @p10=NULL, @p11=NULL, @p12=NULL, @p13='False', @p14='Hello! Thank you for contacting MindsMiratus.

If you're a new visitor, we're happy to help you get started. If you're an existing customer, we're here to support you. Please choose from the options below.', @p15='welcome_menu_minds' (Nullable = false), @p16='Boattest' (Nullable = false), @p17='673199269218077', @p18='META_CLOUD', @p19=NULL (DbType = DateTime), @p20=NULL (DbType = Guid), @p21='Draft' (Nullable = false), @p22='welcome_menu_minds', @p23='[]', @p24='2025-09-19T11:11:31.1700990Z' (DbType = DateTime), @p25='0d18e94f-e2bd-488d-a26c-a8518a7abf91', @p26='5d760969-9fb2-481a-9139-be56c85c2f3b', @p27='True', @p28='2', @p29='View Our Products' (Nullable = false), @p30='QUICK_REPLY' (Nullable = false), @p31='' (Nullable = false), @p32='2068bf79-b426-4729-82b6-308425b0a565', @p33='5d760969-9fb2-481a-9139-be56c85c2f3b', @p34='True', @p35='1', @p36='Explore Our Services' (Nullable = false), @p37='QUICK_REPLY' (Nullable = false), @p38='' (Nullable = false), @p39='d3adbb97-db22-4c51-8fb0-b10a2581793e', @p40='5d760969-9fb2-481a-9139-be56c85c2f3b', @p41='True', @p42='3', @p43='Customer Support' (Nullable = false), @p44='QUICK_REPLY' (Nullable = false), @p45='' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CTAFlowConfigId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "PhoneNumberId", "Provider", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30, @p31);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p32, @p33, @p34, @p35, @p36, @p37, @p38);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p39, @p40, @p41, @p42, @p43, @p44, @p45);
2025-09-19 16:41:31.207 +05:30 [INF] ✅ Campaign 'Boattest' created | FlowId: "2b73877c-3c18-4fbb-af61-1906393bb2d3" | EntryTemplate: welcome_menu_minds | Sender: META_CLOUD/673199269218077 | Recipients: 0
2025-09-19 16:41:31.209 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType50`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:41:31.210 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 2486.0659ms
2025-09-19 16:41:31.211 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-19 16:41:31.212 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 2493.2729ms
2025-09-19 16:41:31.263 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-19 16:41:31.263 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-19 16:41:31.263 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - null null
2025-09-19 16:41:31.263 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-19 16:41:31.271 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:41:31.273 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:41:31.275 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:41:31.278 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:41:31.278 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 15.6247ms
2025-09-19 16:41:31.279 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 15.9537ms
2025-09-19 16:41:31.280 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - 204 null null 17.2232ms
2025-09-19 16:41:31.281 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 17.854ms
2025-09-19 16:41:31.304 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-19 16:41:31.304 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - null null
2025-09-19 16:41:31.304 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-19 16:41:31.307 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:41:31.309 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:41:31.311 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:41:31.312 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-19 16:41:31.312 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-19 16:41:31.313 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 16:41:31.314 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-19 16:41:31.315 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 16:41:31.319 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-19 16:41:31.316 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 16:41:31.323 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='5d760969-9fb2-481a-9139-be56c85c2f3b', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", t."Id1", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value", t."BusinessId1", t."CreatedAt1", t."CreatedBy0", t."FlowName", t."IsActive0", t."IsPublished", t."UpdatedAt1"
FROM (
    SELECT c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0", c1."Id" AS "Id1", c1."BusinessId" AS "BusinessId1", c1."CreatedAt" AS "CreatedAt1", c1."CreatedBy" AS "CreatedBy0", c1."FlowName", c1."IsActive" AS "IsActive0", c1."IsPublished", c1."UpdatedAt" AS "UpdatedAt1"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    LEFT JOIN "CTAFlowConfigs" AS c1 ON c."CTAFlowConfigId" = c1."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t."Id0", t."Id1"
2025-09-19 16:41:31.324 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 16:41:31.325 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=1000
2025-09-19 16:41:31.328 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 10.4664ms
2025-09-19 16:41:31.329 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-09-19 16:41:31.332 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 16:41:31.331 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-19 16:41:31.340 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 20.1548ms
2025-09-19 16:41:31.328 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-19 16:41:31.343 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 38.617ms
2025-09-19 16:41:31.343 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-19 16:41:31.344 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 16:41:31.346 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:41:31.350 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - 200 null application/json; charset=utf-8 45.8372ms
2025-09-19 16:41:31.353 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 16:41:31.353 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-19 16:41:31.356 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 31.5159ms
2025-09-19 16:41:31.357 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-19 16:41:31.358 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 16:41:31.360 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 55.6807ms
2025-09-19 16:41:31.361 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-19 16:41:31.366 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 16:41:31.367 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 7.8933ms
2025-09-19 16:41:31.368 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-19 16:41:31.370 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 41.1189ms
2025-09-19 16:41:36.330 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b/assign-contacts - null null
2025-09-19 16:41:36.332 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:41:36.332 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b/assign-contacts - 204 null null 2.2649ms
2025-09-19 16:41:36.335 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b/assign-contacts - application/json 55
2025-09-19 16:41:36.337 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:41:36.337 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-09-19 16:41:36.338 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 16:41:36.341 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='5d760969-9fb2-481a-9139-be56c85c2f3b', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-19 16:41:36.363 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p0='17111212-d8a7-4d76-9fc2-9ed370446645', @p1=NULL, @p2='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p3='5d760969-9fb2-481a-9139-be56c85c2f3b', @p4=NULL, @p5=NULL, @p6='75df7429-287c-406a-83d8-0dfa045b0093', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-09-19T11:11:36.3445002Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-09-19T11:11:36.3445004Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-09-19 16:41:36.365 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:41:36.366 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 26.3374ms
2025-09-19 16:41:36.367 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-09-19 16:41:36.367 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b/assign-contacts - 200 null application/json; charset=utf-8 32.7596ms
2025-09-19 16:41:40.467 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-19 16:41:40.469 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:41:40.470 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.2882ms
2025-09-19 16:41:40.472 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-19 16:41:40.474 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:41:40.475 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-19 16:41:40.476 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 16:41:40.479 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-09-19 16:41:40.482 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 16:41:40.483 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 5.9164ms
2025-09-19 16:41:40.484 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-19 16:41:40.485 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 12.9433ms
2025-09-19 16:41:43.933 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - null null
2025-09-19 16:41:43.935 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:41:43.935 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - 204 null null 2.7943ms
2025-09-19 16:41:43.938 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - null 0
2025-09-19 16:41:43.940 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:41:43.941 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-19 16:41:43.941 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 16:41:43.945 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='5d760969-9fb2-481a-9139-be56c85c2f3b'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-09-19 16:41:43.956 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-19 16:41:43.961 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__flowId_Value_0='2b73877c-3c18-4fbb-af61-1906393bb2d3', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", t0."Id", t0."CTAFlowConfigId", t0."PositionX", t0."PositionY", t0."RequiredSource", t0."RequiredTag", t0."StepOrder", t0."TemplateToSend", t0."TemplateType", t0."TriggerButtonText", t0."TriggerButtonType", t0."Id0", t0."ButtonIndex", t0."ButtonSubType", t0."ButtonText", t0."ButtonType", t0."ButtonValue", t0."CTAFlowStepId", t0."NextStepId"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."Id" = @__flowId_Value_0 AND c."BusinessId" = @__businessId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."CTAFlowConfigId", c0."PositionX", c0."PositionY", c0."RequiredSource", c0."RequiredTag", c0."StepOrder", c0."TemplateToSend", c0."TemplateType", c0."TriggerButtonText", c0."TriggerButtonType", f."Id" AS "Id0", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
    FROM "CTAFlowSteps" AS c0
    LEFT JOIN "FlowButtonLinks" AS f ON c0."Id" = f."CTAFlowStepId"
) AS t0 ON t."Id" = t0."CTAFlowConfigId"
ORDER BY t."Id", t0."Id"
2025-09-19 16:41:43.966 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:41:43.968 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:41:43.969 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:41:44.841 +05:30 [INF] Received HTTP response headers after 870.702ms - 200
2025-09-19 16:41:44.842 +05:30 [INF] End processing HTTP request after 873.9722ms - 200
2025-09-19 16:41:44.940 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaign_CTAFlowConfigId_Value_0='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "CTAFlowSteps" AS c
WHERE c."CTAFlowConfigId" = @__campaign_CTAFlowConfigId_Value_0
ORDER BY c."StepOrder"
LIMIT 1
2025-09-19 16:41:44.962 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 16:41:44.965 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-19 16:41:44.966 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 16:41:44.967 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 16:41:46.262 +05:30 [INF] Received HTTP response headers after 1294.0798ms - 200
2025-09-19 16:41:46.263 +05:30 [INF] End processing HTTP request after 1297.003ms - 200
2025-09-19 16:41:46.270 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='b0f53e7e-da5c-4403-b3a9-13bdb7cbaf11', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='[{"i":0,"t":"Explore Our Services","position":1,"text":"Explore Our Services","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"t":"View Our Products","position":2,"text":"View Our Products","type":"QUICK_REPLY","subType":"quick_reply"},{"i":2,"t":"Customer Support","position":3,"text":"Customer Support","type":"QUICK_REPLY","subType":"quick_reply"}]', @p3='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p4='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c' (Nullable = true), @p5='5d760969-9fb2-481a-9139-be56c85c2f3b' (Nullable = true), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T11:11:46.2648998Z' (DbType = DateTime), @p8=NULL, @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='welcome_menu_minds' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA==', @p14='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA==","message_status":"accepted"}]}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17=NULL, @p18='f99016ae-cd07-466e-b802-a4dcfe4dc94f' (Nullable = true), @p19='2025-09-19T11:11:46.2649000Z' (Nullable = true) (DbType = DateTime), @p20='campaign', @p21='Sent' (Nullable = false), @p22='dfc12ac3-4041-4980-93df-feecbda92506', @p23='True', @p24=NULL, @p25='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p26='[{"i":0,"t":"Explore Our Services","position":1,"text":"Explore Our Services","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"t":"View Our Products","position":2,"text":"View Our Products","type":"QUICK_REPLY","subType":"quick_reply"},{"i":2,"t":"Customer Support","position":3,"text":"Customer Support","type":"QUICK_REPLY","subType":"quick_reply"}]', @p27='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p28='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c' (Nullable = true), @p29='5d760969-9fb2-481a-9139-be56c85c2f3b', @p30=NULL, @p31=NULL, @p32=NULL (DbType = DateTime), @p33='75df7429-287c-406a-83d8-0dfa045b0093', @p34=NULL, @p35='2025-09-19T11:11:46.2651172Z' (DbType = DateTime), @p36='system', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40=NULL, @p41=NULL, @p42='False', @p43=NULL (DbType = DateTime), @p44=NULL, @p45=NULL, @p46='Hello! Thank you for contacting MindsMiratus.

If you're a new visitor, we're happy to help you get started. If you're an existing customer, we're here to support you. Please choose from the options below.' (Nullable = false), @p47='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA==', @p48='b0f53e7e-da5c-4403-b3a9-13bdb7cbaf11' (Nullable = true), @p49=NULL (DbType = DateTime), @p50='17111212-d8a7-4d76-9fc2-9ed370446645', @p51='0', @p52='f99016ae-cd07-466e-b802-a4dcfe4dc94f' (Nullable = true), @p53='Sent', @p54='2025-09-19T11:11:46.2651173Z' (Nullable = true) (DbType = DateTime), @p55=NULL, @p56='welcome_menu_minds', @p57=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57);
2025-09-19 16:41:46.275 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 16:41:46.276 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 2333.6976ms
2025-09-19 16:41:46.277 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-19 16:41:46.279 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - 200 null application/json; charset=utf-8 2340.7234ms
2025-09-19 16:44:29.725 +05:30 [INF] Request starting HTTP/1.1 GET http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp?hub.mode=subscribe&hub.challenge=430911184&hub.verify_token=xbytechat-secret-token - null null
2025-09-19 16:44:29.730 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api)'
2025-09-19 16:44:29.733 +05:30 [INF] Route matched with {action = "VerifyWebhook", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult VerifyWebhook(System.String, System.String, System.String) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 16:44:29.736 +05:30 [INF] ✅ WhatsApp webhook verified successfully.
2025-09-19 16:44:29.737 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-09-19 16:44:29.738 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api) in 3.8691ms
2025-09-19 16:44:29.739 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api)'
2025-09-19 16:44:29.740 +05:30 [INF] Request finished HTTP/1.1 GET http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp?hub.mode=subscribe&hub.challenge=430911184&hub.verify_token=xbytechat-secret-token - 200 null text/plain; charset=utf-8 15.7718ms
2025-09-19 16:44:45.799 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b/summary - null null
2025-09-19 16:44:45.815 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:44:45.816 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b/summary - 204 null null 17.1194ms
2025-09-19 16:44:45.819 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b/summary - null null
2025-09-19 16:44:45.823 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:44:45.824 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-09-19 16:44:45.828 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-09-19 16:44:45.851 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 16:44:45.912 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='5d760969-9fb2-481a-9139-be56c85c2f3b'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-09-19 16:44:45.916 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-09-19 16:44:45.918 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 88.7893ms
2025-09-19 16:44:45.920 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-09-19 16:44:45.921 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b/summary - 200 null application/json; charset=utf-8 101.1659ms
2025-09-19 16:44:46.267 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b?page=1&pageSize=10&status=&search= - null null
2025-09-19 16:44:46.269 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:44:46.270 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b?page=1&pageSize=10&status=&search= - 204 null null 3.1874ms
2025-09-19 16:44:46.273 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b?page=1&pageSize=10&status=&search= - null null
2025-09-19 16:44:46.275 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:44:46.276 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-09-19 16:44:46.282 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-09-19 16:44:46.290 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='5d760969-9fb2-481a-9139-be56c85c2f3b'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-09-19 16:44:46.307 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='5d760969-9fb2-481a-9139-be56c85c2f3b', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-09-19 16:44:46.310 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 16:44:46.317 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 33.2387ms
2025-09-19 16:44:46.318 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-09-19 16:44:46.319 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 45.9617ms
2025-09-19 16:44:57.481 +05:30 [INF] Request starting HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - application/json 631
2025-09-19 16:44:57.485 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:44:57.487 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 16:44:57.494 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRjg3M0Q2NDJFMjRGMjQ2MjBBRTYyMTRBRDc4NUEyMkUA","timestamp":"1758280499","type":"button","button":{"payload":"View Our Products","text":"View Our Products"}}]},"field":"messages"}]}]}
2025-09-19 16:44:57.498 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 16:44:57.500 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:44:57.502 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 13.0264ms
2025-09-19 16:44:57.503 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:44:57.504 +05:30 [INF] Request finished HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 22.5281ms
2025-09-19 16:44:57.505 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRjg3M0Q2NDJFMjRGMjQ2MjBBRTYyMTRBRDc4NUEyMkUA","timestamp":"1758280499","type":"button","button":{"payload":"View Our Products","text":"View Our Products"}}]},"field":"messages"}]}]}
2025-09-19 16:44:57.508 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-19 16:44:57.514 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-19 16:44:57.515 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRjg3M0Q2NDJFMjRGMjQ2MjBBRTYyMTRBRDc4NUEyMkUA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA==, Text: View Our Products
2025-09-19 16:44:57.524 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-19 16:44:57.530 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__origin_Id_0='b0f53e7e-da5c-4403-b3a9-13bdb7cbaf11' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-09-19 16:44:57.542 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sourceStepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @__flowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3', @__buttonIndex_2='1'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-09-19 16:44:57.546 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-09-19 16:44:57.585 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='7c7b8f61-3414-46e0-acf5-a9bae05a2fba', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='1' (Nullable = true), @p3='dfc12ac3-4041-4980-93df-feecbda92506' (Nullable = true), @p4='918974005240', @p5=NULL, @p6='2025-09-19T11:14:57.5497256Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='b0f53e7e-da5c-4403-b3a9-13bdb7cbaf11' (Nullable = true), @p9=NULL, @p10='56e87ec3-19da-4b06-beda-a7ee5a17cd90' (Nullable = true), @p11='f99016ae-cd07-466e-b802-a4dcfe4dc94f' (Nullable = true), @p12='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @p13='welcome_menu_minds' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='View Our Products'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-19 16:44:57.601 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__context_TargetStepId_0='62ee00c5-2a9a-4077-a25e-f8288347a910' (Nullable = true), @__context_FlowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__context_TargetStepId_0 AND c."CTAFlowConfigId" = @__context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-09-19 16:44:57.604 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:44:57.606 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:44:57.607 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:44:58.744 +05:30 [INF] Received HTTP response headers after 1136.2315ms - 200
2025-09-19 16:44:58.746 +05:30 [INF] End processing HTTP request after 1140.0458ms - 200
2025-09-19 16:44:58.873 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__context_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__context_BusinessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 16:44:58.885 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='0b629f2a-c2f5-421d-b08e-a6067c3b002b', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='1' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5='Missing PhoneNumberId', @p6='2025-09-19T11:14:58.8821589Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='7b947ee6-7f4d-4cee-a72c-f3cbd7e88324' (Nullable = true), @p9=NULL, @p10='0e7e3824-29cb-41be-9993-d7d8c28c363e' (Nullable = true), @p11=NULL (DbType = Guid), @p12='62ee00c5-2a9a-4077-a25e-f8288347a910', @p13='products_info_v1' (Nullable = false), @p14='False', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='7b947ee6-7f4d-4cee-a72c-f3cbd7e88324', @p20='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p21='[{"i":1,"t":"Back to Main Menu","ty":"QUICK_REPLY","v":"","ns":"3bc5f00f-c6e4-4141-9c71-e26d4c61a20c"}]', @p22='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p23='62ee00c5-2a9a-4077-a25e-f8288347a910' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26='2025-09-19T11:14:58.8817753Z' (DbType = DateTime), @p27='Missing PhoneNumberId', @p28='1' (Nullable = true), @p29='False', @p30=NULL, @p31='products_info_v1' (Nullable = false), @p32=NULL, @p33=NULL, @p34='918974005240' (Nullable = false), @p35='b0f53e7e-da5c-4403-b3a9-13bdb7cbaf11' (Nullable = true), @p36=NULL, @p37=NULL (DbType = Guid), @p38=NULL (DbType = DateTime), @p39='flow', @p40='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40)
RETURNING "MessageTime";
2025-09-19 16:45:12.929 +05:30 [INF] Request starting HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - application/json 629
2025-09-19 16:45:12.932 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:45:12.933 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 16:45:12.936 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggM0EwOUJENjc0NEE3RTM2RTI0RDY5MTcwRENCODdENDMA","timestamp":"1758280514","type":"button","button":{"payload":"Customer Support","text":"Customer Support"}}]},"field":"messages"}]}]}
2025-09-19 16:45:12.938 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 16:45:12.939 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:45:12.940 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.0069ms
2025-09-19 16:45:12.940 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggM0EwOUJENjc0NEE3RTM2RTI0RDY5MTcwRENCODdENDMA","timestamp":"1758280514","type":"button","button":{"payload":"Customer Support","text":"Customer Support"}}]},"field":"messages"}]}]}
2025-09-19 16:45:12.944 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:45:12.945 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-19 16:45:12.946 +05:30 [INF] Request finished HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 16.632ms
2025-09-19 16:45:12.947 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-19 16:45:12.950 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggM0EwOUJENjc0NEE3RTM2RTI0RDY5MTcwRENCODdENDMA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA==, Text: Customer Support
2025-09-19 16:45:12.953 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-19 16:45:12.956 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__origin_Id_0='b0f53e7e-da5c-4403-b3a9-13bdb7cbaf11' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-09-19 16:45:12.959 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sourceStepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @__flowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3', @__buttonIndex_2='2'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-09-19 16:45:12.962 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-09-19 16:45:12.982 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@p0='d4aa2853-e2e8-4bdb-a61a-a2b006e43735', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='2' (Nullable = true), @p3='dfc12ac3-4041-4980-93df-feecbda92506' (Nullable = true), @p4='918974005240', @p5=NULL, @p6='2025-09-19T11:15:12.9637687Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='b0f53e7e-da5c-4403-b3a9-13bdb7cbaf11' (Nullable = true), @p9=NULL, @p10='8a81cbc9-d5bf-4cfb-8252-55b927db040a' (Nullable = true), @p11='f99016ae-cd07-466e-b802-a4dcfe4dc94f' (Nullable = true), @p12='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @p13='welcome_menu_minds' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='Customer Support'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-19 16:45:12.985 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__context_TargetStepId_0='97457a39-996c-4acf-a357-c5038b2dd21c' (Nullable = true), @__context_FlowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__context_TargetStepId_0 AND c."CTAFlowConfigId" = @__context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-09-19 16:45:12.988 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:45:12.990 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:45:12.991 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:45:13.838 +05:30 [INF] Received HTTP response headers after 846.1053ms - 200
2025-09-19 16:45:13.839 +05:30 [INF] End processing HTTP request after 849.2253ms - 200
2025-09-19 16:45:13.926 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__context_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__context_BusinessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 16:45:13.932 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='309320ed-37b5-4513-8955-d69b29673ce1', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='2' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5='Missing PhoneNumberId', @p6='2025-09-19T11:15:13.9284824Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='d319e11b-06b0-408c-856a-017400f93440' (Nullable = true), @p9=NULL, @p10='51706a32-89ff-4bb7-89e6-14a32fb5b5a0' (Nullable = true), @p11=NULL (DbType = Guid), @p12='97457a39-996c-4acf-a357-c5038b2dd21c', @p13='support_project_status_v1' (Nullable = false), @p14='False', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='d319e11b-06b0-408c-856a-017400f93440', @p20='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p21=NULL, @p22='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p23='97457a39-996c-4acf-a357-c5038b2dd21c' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26='2025-09-19T11:15:13.9283004Z' (DbType = DateTime), @p27='Missing PhoneNumberId', @p28='1' (Nullable = true), @p29='False', @p30=NULL, @p31='support_project_status_v1' (Nullable = false), @p32=NULL, @p33=NULL, @p34='918974005240' (Nullable = false), @p35='b0f53e7e-da5c-4403-b3a9-13bdb7cbaf11' (Nullable = true), @p36=NULL, @p37=NULL (DbType = Guid), @p38=NULL (DbType = DateTime), @p39='flow', @p40='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40)
RETURNING "MessageTime";
2025-09-19 16:45:14.265 +05:30 [INF] Request starting HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-09-19 16:45:14.268 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:45:14.269 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 16:45:14.271 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0I5NjBERDRGMjU4QTVCMDREAA==","status":"read","timestamp":"1758280118","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-09-19 16:45:14.272 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 16:45:14.273 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:45:14.275 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.1254ms
2025-09-19 16:45:14.276 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:45:14.277 +05:30 [INF] Request finished HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 12.5159ms
2025-09-19 16:45:14.280 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0I5NjBERDRGMjU4QTVCMDREAA==","status":"read","timestamp":"1758280118","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-09-19 16:45:14.314 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-19 16:45:14.317 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-19 16:45:14.319 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-19 16:45:14.321 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 16:45:14.331 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0I5NjBERDRGMjU4QTVCMDREAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 16:45:14.339 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='00078051-ae40-4d81-ae4f-3e7a7ad78517'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-19 16:45:14.348 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p2='00078051-ae40-4d81-ae4f-3e7a7ad78517', @p0='2025-09-19T11:08:38.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-19 16:45:14.350 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0I5NjBERDRGMjU4QTVCMDREAA== → Read
2025-09-19 16:45:19.389 +05:30 [INF] Request starting HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - application/json 582
2025-09-19 16:45:19.391 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:45:19.392 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 16:45:19.394 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0I5NjBERDRGMjU4QTVCMDREAA==","status":"delivered","timestamp":"1758280113","recipient_id":"918974005240","conversation":{"id":"410391e7b54b045447b99b81f39286e5","origin":{"type":"utility"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"utility","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-19 16:45:19.396 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 16:45:19.396 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0I5NjBERDRGMjU4QTVCMDREAA==","status":"delivered","timestamp":"1758280113","recipient_id":"918974005240","conversation":{"id":"410391e7b54b045447b99b81f39286e5","origin":{"type":"utility"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"utility","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-19 16:45:19.397 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:45:19.399 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 16:45:19.399 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.3076ms
2025-09-19 16:45:19.402 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:45:19.402 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0I5NjBERDRGMjU4QTVCMDREAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 16:45:19.407 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='00078051-ae40-4d81-ae4f-3e7a7ad78517'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-19 16:45:19.421 +05:30 [INF] Request finished HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 32.3646ms
2025-09-19 16:45:19.421 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@p2='00078051-ae40-4d81-ae4f-3e7a7ad78517', @p0='2025-09-19T11:08:33.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-19 16:45:19.427 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0I5NjBERDRGMjU4QTVCMDREAA== → Delivered
2025-09-19 16:45:25.608 +05:30 [INF] Request starting HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - application/json 613
2025-09-19 16:45:25.610 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:45:25.611 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 16:45:25.613 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0I5NjBERDRGMjU4QTVCMDREAA==","status":"sent","timestamp":"1758280112","recipient_id":"918974005240","conversation":{"id":"410391e7b54b045447b99b81f39286e5","expiration_timestamp":"1758280112","origin":{"type":"utility"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"utility","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-19 16:45:25.614 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 16:45:25.615 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0I5NjBERDRGMjU4QTVCMDREAA==","status":"sent","timestamp":"1758280112","recipient_id":"918974005240","conversation":{"id":"410391e7b54b045447b99b81f39286e5","expiration_timestamp":"1758280112","origin":{"type":"utility"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"utility","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-19 16:45:25.615 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:45:25.616 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 16:45:25.617 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.3927ms
2025-09-19 16:45:25.620 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:45:25.620 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0I5NjBERDRGMjU4QTVCMDREAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 16:45:25.621 +05:30 [INF] Request finished HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.2567ms
2025-09-19 16:45:25.625 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='00078051-ae40-4d81-ae4f-3e7a7ad78517'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-19 16:45:25.633 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p1='00078051-ae40-4d81-ae4f-3e7a7ad78517', @p0='Sent'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "SendStatus" = @p0
WHERE "Id" = @p1;
2025-09-19 16:45:25.634 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0I5NjBERDRGMjU4QTVCMDREAA== → Sent
2025-09-19 16:45:31.565 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/dfc12ac3-4041-4980-93df-feecbda92506 - null null
2025-09-19 16:45:31.568 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:45:31.569 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/dfc12ac3-4041-4980-93df-feecbda92506 - 204 null null 3.3768ms
2025-09-19 16:45:31.571 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/dfc12ac3-4041-4980-93df-feecbda92506 - null null
2025-09-19 16:45:31.573 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:45:31.574 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-09-19 16:45:31.577 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-09-19 16:45:31.623 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__initialCampaignSendLogId_0='dfc12ac3-4041-4980-93df-feecbda92506'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId", c0."Id", c0."BusinessId", c0."CTAFlowConfigId", c0."CampaignId", c0."CampaignType", c0."CreatedAt", c0."CreatedBy", c0."CtaId", c0."DeletedAt", c0."DeletedBy", c0."FollowUpTemplateId", c0."ImageCaption", c0."ImageUrl", c0."IsDeleted", c0."MessageBody", c0."MessageTemplate", c0."Name", c0."PhoneNumberId", c0."Provider", c0."ScheduledAt", c0."SourceCampaignId", c0."Status", c0."TemplateId", c0."TemplateParameters", c0."UpdatedAt", c1."Id", c1."AssignedAgentId", c1."BusinessId", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
INNER JOIN "Contacts" AS c1 ON c."ContactId" = c1."Id"
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-09-19 16:45:31.635 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sentLog_ContactId_0='75df7429-287c-406a-83d8-0dfa045b0093', @__sentLog_CampaignId_1='5d760969-9fb2-481a-9139-be56c85c2f3b', @__sessionStart_2='2025-09-19T11:11:46.2651170Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT c."CreatedAt"
FROM "CampaignSendLogs" AS c
WHERE c."ContactId" = @__sentLog_ContactId_0 AND c."CampaignId" = @__sentLog_CampaignId_1 AND c."CreatedAt" > @__sessionStart_2
ORDER BY c."CreatedAt"
LIMIT 1
2025-09-19 16:45:31.642 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sentLog_ContactId_0='75df7429-287c-406a-83d8-0dfa045b0093', @__sentLog_CTAFlowConfigId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @__sessionStart_2='2025-09-19T11:11:46.2651170Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT c."CreatedAt"
FROM "CampaignSendLogs" AS c
WHERE c."ContactId" = @__sentLog_ContactId_0 AND c."CTAFlowConfigId" = @__sentLog_CTAFlowConfigId_1 AND c."CreatedAt" > @__sessionStart_2
ORDER BY c."CreatedAt"
LIMIT 1
2025-09-19 16:45:31.671 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__sentLog_Id_0='dfc12ac3-4041-4980-93df-feecbda92506', @__sessionStart_1='2025-09-19T11:11:46.2651170Z' (DbType = DateTime), @__sessionEnd_2='2025-09-20T11:11:46.2651170Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."RunId", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__sentLog_Id_0 AND c."ClickedAt" >= @__sessionStart_1 AND c."ClickedAt" < @__sessionEnd_2
ORDER BY c."ClickedAt"
2025-09-19 16:45:31.675 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_sentLog_CTAFlowConfigId_Value_0='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT c."FlowName"
FROM "CTAFlowConfigs" AS c
WHERE c."Id" = @__8__locals1_sentLog_CTAFlowConfigId_Value_0
LIMIT 1
2025-09-19 16:45:31.682 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_sentLog_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_sentLog_ContactId_1='75df7429-287c-406a-83d8-0dfa045b0093', @__8__locals1_sentLog_CTAFlowConfigId_2='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @__8__locals1_sessionStart_3='2025-09-19T11:11:46.2651170Z' (DbType = DateTime), @__8__locals1_sessionEnd_4='2025-09-20T11:11:46.2651170Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."MessageLogId", c."SentAt", c."CreatedAt", c."TemplateId", c."CTAFlowStepId", c."DeliveredAt", c."ReadAt"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__8__locals1_sentLog_BusinessId_0 AND c."ContactId" = @__8__locals1_sentLog_ContactId_1 AND c."CTAFlowConfigId" = @__8__locals1_sentLog_CTAFlowConfigId_2 AND c."CreatedAt" >= @__8__locals1_sessionStart_3 AND c."CreatedAt" < @__8__locals1_sessionEnd_4
ORDER BY c."CreatedAt"
2025-09-19 16:45:31.756 +05:30 [INF] Executed DbCommand (50ms) [Parameters=[@__chainCslIds_0={ 'dfc12ac3-4041-4980-93df-feecbda92506' } (DbType = Object), @__8__locals1_sessionStart_1='2025-09-19T11:11:46.2651170Z' (DbType = DateTime), @__8__locals1_sessionEnd_2='2025-09-20T11:11:46.2651170Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."BusinessId", f."ButtonIndex", f."CampaignSendLogId", f."ContactPhone", f."ErrorMessage", f."ExecutedAt", f."FlowId", f."MessageLogId", f."RawResponse", f."RequestId", f."RunId", f."StepId", f."StepName", f."Success", f."TemplateName", f."TemplateType", f."TrackingLogId", f."TriggeredByButton"
FROM "FlowExecutionLogs" AS f
WHERE f."CampaignSendLogId" IS NOT NULL AND f."CampaignSendLogId" = ANY (@__chainCslIds_0) AND f."ExecutedAt" >= @__8__locals1_sessionStart_1 AND f."ExecutedAt" < @__8__locals1_sessionEnd_2
ORDER BY f."ExecutedAt"
2025-09-19 16:45:31.761 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__chainMsgLogIds_0={ 'b0f53e7e-da5c-4403-b3a9-13bdb7cbaf11' } (DbType = Object), @__8__locals1_sessionStart_1='2025-09-19T11:11:46.2651170Z' (DbType = DateTime), @__8__locals1_sessionEnd_2='2025-09-20T11:11:46.2651170Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."BusinessId", f."ButtonIndex", f."CampaignSendLogId", f."ContactPhone", f."ErrorMessage", f."ExecutedAt", f."FlowId", f."MessageLogId", f."RawResponse", f."RequestId", f."RunId", f."StepId", f."StepName", f."Success", f."TemplateName", f."TemplateType", f."TrackingLogId", f."TriggeredByButton"
FROM "FlowExecutionLogs" AS f
WHERE f."MessageLogId" IS NOT NULL AND f."MessageLogId" = ANY (@__chainMsgLogIds_0) AND f."ExecutedAt" >= @__8__locals1_sessionStart_1 AND f."ExecutedAt" < @__8__locals1_sessionEnd_2
ORDER BY f."ExecutedAt"
2025-09-19 16:45:31.767 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_sentLog_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_sentLog_CTAFlowConfigId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @__phoneA_2='+918974005240', @__phoneB_3='918974005240', @__8__locals1_sessionStart_4='2025-09-19T11:11:46.2651170Z' (DbType = DateTime), @__8__locals1_sessionEnd_5='2025-09-20T11:11:46.2651170Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."BusinessId", f."ButtonIndex", f."CampaignSendLogId", f."ContactPhone", f."ErrorMessage", f."ExecutedAt", f."FlowId", f."MessageLogId", f."RawResponse", f."RequestId", f."RunId", f."StepId", f."StepName", f."Success", f."TemplateName", f."TemplateType", f."TrackingLogId", f."TriggeredByButton"
FROM "FlowExecutionLogs" AS f
WHERE f."BusinessId" = @__8__locals1_sentLog_BusinessId_0 AND f."FlowId" = @__8__locals1_sentLog_CTAFlowConfigId_1 AND (f."ContactPhone" = @__phoneA_2 OR f."ContactPhone" = @__phoneB_3) AND f."ExecutedAt" >= @__8__locals1_sessionStart_4 AND f."ExecutedAt" < @__8__locals1_sessionEnd_5
ORDER BY f."ExecutedAt"
2025-09-19 16:45:31.776 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__chainCslIds_0={ 'dfc12ac3-4041-4980-93df-feecbda92506' } (DbType = Object), @__8__locals1_sessionStart_1='2025-09-19T11:11:46.2651170Z' (DbType = DateTime), @__8__locals1_sessionEnd_2='2025-09-20T11:11:46.2651170Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."RunId", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = ANY (@__chainCslIds_0) AND c."ClickedAt" >= @__8__locals1_sessionStart_1 AND c."ClickedAt" < @__8__locals1_sessionEnd_2
ORDER BY c."ClickedAt"
2025-09-19 16:45:31.779 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.Tracking.DTOs.JourneyResponseDto'.
2025-09-19 16:45:31.785 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 206.2776ms
2025-09-19 16:45:31.787 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-09-19 16:45:31.787 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/dfc12ac3-4041-4980-93df-feecbda92506 - 200 null application/json; charset=utf-8 216.4972ms
2025-09-19 16:45:38.770 +05:30 [INF] Request starting HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - application/json 623
2025-09-19 16:45:38.773 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:45:38.774 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 16:45:38.776 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMUU5OTM3OTc0MTFDMTlFRjNGMDExQ0ZEMkFBMjdGMDIA","timestamp":"1758280540","type":"button","button":{"payload":"Contact Sales","text":"Contact Sales"}}]},"field":"messages"}]}]}
2025-09-19 16:45:38.778 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 16:45:38.778 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMUU5OTM3OTc0MTFDMTlFRjNGMDExQ0ZEMkFBMjdGMDIA","timestamp":"1758280540","type":"button","button":{"payload":"Contact Sales","text":"Contact Sales"}}]},"field":"messages"}]}]}
2025-09-19 16:45:38.778 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:45:38.779 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-19 16:45:38.780 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.0719ms
2025-09-19 16:45:38.781 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-19 16:45:38.782 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:45:38.783 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMUU5OTM3OTc0MTFDMTlFRjNGMDExQ0ZEMkFBMjdGMDIA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA==, Text: Contact Sales
2025-09-19 16:45:38.784 +05:30 [INF] Request finished HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.5779ms
2025-09-19 16:45:38.787 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-19 16:45:38.793 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__origin_Id_0='b0f53e7e-da5c-4403-b3a9-13bdb7cbaf11' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-09-19 16:45:38.800 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
WHERE f."CTAFlowStepId" = @__stepId_0
ORDER BY f."ButtonIndex"
2025-09-19 16:45:38.802 +05:30 [INF] ✅ Mapped click by TEXT to index 3 (flow="2b73877c-3c18-4fbb-af61-1906393bb2d3", step="3bc5f00f-c6e4-4141-9c71-e26d4c61a20c")
2025-09-19 16:45:38.804 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sourceStepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @__flowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3', @__buttonIndex_2='3'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-09-19 16:45:38.807 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-09-19 16:45:38.827 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@p0='4be56d2d-3380-4030-8148-586c8a39219c', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='3' (Nullable = true), @p3='dfc12ac3-4041-4980-93df-feecbda92506' (Nullable = true), @p4='918974005240', @p5=NULL, @p6='2025-09-19T11:15:38.8094555Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='b0f53e7e-da5c-4403-b3a9-13bdb7cbaf11' (Nullable = true), @p9=NULL, @p10='f6630ffe-77dc-456e-8b92-c66f54188e3a' (Nullable = true), @p11='f99016ae-cd07-466e-b802-a4dcfe4dc94f' (Nullable = true), @p12='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @p13='welcome_menu_minds' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='Contact Sales'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-19 16:45:38.831 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__context_TargetStepId_0='07b5c8be-5c1f-4fce-9470-986d877aee04' (Nullable = true), @__context_FlowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__context_TargetStepId_0 AND c."CTAFlowConfigId" = @__context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-09-19 16:45:38.835 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:45:38.837 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:45:38.838 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:45:39.719 +05:30 [INF] Received HTTP response headers after 880.3159ms - 200
2025-09-19 16:45:39.721 +05:30 [INF] End processing HTTP request after 884.0184ms - 200
2025-09-19 16:45:39.788 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__context_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__context_BusinessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 16:45:39.793 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='a71f7bb7-e8f1-44e6-a239-109f91d01154', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='3' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5='Missing PhoneNumberId', @p6='2025-09-19T11:15:39.7911712Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='7db879bb-840c-4965-962e-a3bf46226f08' (Nullable = true), @p9=NULL, @p10='6307a322-8055-4fa4-b067-688635c324ba' (Nullable = true), @p11=NULL (DbType = Guid), @p12='07b5c8be-5c1f-4fce-9470-986d877aee04', @p13='contact_sales_info_v1' (Nullable = false), @p14='False', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='7db879bb-840c-4965-962e-a3bf46226f08', @p20='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p21='[{"i":1,"t":"Back to Main Menu","ty":"QUICK_REPLY","v":"","ns":"3bc5f00f-c6e4-4141-9c71-e26d4c61a20c"}]', @p22='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p23='07b5c8be-5c1f-4fce-9470-986d877aee04' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26='2025-09-19T11:15:39.7908789Z' (DbType = DateTime), @p27='Missing PhoneNumberId', @p28='1' (Nullable = true), @p29='False', @p30=NULL, @p31='contact_sales_info_v1' (Nullable = false), @p32=NULL, @p33=NULL, @p34='918974005240' (Nullable = false), @p35='b0f53e7e-da5c-4403-b3a9-13bdb7cbaf11' (Nullable = true), @p36=NULL, @p37=NULL (DbType = Guid), @p38=NULL (DbType = DateTime), @p39='flow', @p40='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40)
RETURNING "MessageTime";
2025-09-19 16:45:48.060 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/dfc12ac3-4041-4980-93df-feecbda92506 - null null
2025-09-19 16:45:48.062 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:45:48.063 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/dfc12ac3-4041-4980-93df-feecbda92506 - 204 null null 3.1312ms
2025-09-19 16:45:48.065 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/dfc12ac3-4041-4980-93df-feecbda92506 - null null
2025-09-19 16:45:48.067 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:45:48.068 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-09-19 16:45:48.069 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-09-19 16:45:48.073 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__initialCampaignSendLogId_0='dfc12ac3-4041-4980-93df-feecbda92506'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId", c0."Id", c0."BusinessId", c0."CTAFlowConfigId", c0."CampaignId", c0."CampaignType", c0."CreatedAt", c0."CreatedBy", c0."CtaId", c0."DeletedAt", c0."DeletedBy", c0."FollowUpTemplateId", c0."ImageCaption", c0."ImageUrl", c0."IsDeleted", c0."MessageBody", c0."MessageTemplate", c0."Name", c0."PhoneNumberId", c0."Provider", c0."ScheduledAt", c0."SourceCampaignId", c0."Status", c0."TemplateId", c0."TemplateParameters", c0."UpdatedAt", c1."Id", c1."AssignedAgentId", c1."BusinessId", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
INNER JOIN "Contacts" AS c1 ON c."ContactId" = c1."Id"
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-09-19 16:45:48.077 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sentLog_ContactId_0='75df7429-287c-406a-83d8-0dfa045b0093', @__sentLog_CampaignId_1='5d760969-9fb2-481a-9139-be56c85c2f3b', @__sessionStart_2='2025-09-19T11:11:46.2651170Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT c."CreatedAt"
FROM "CampaignSendLogs" AS c
WHERE c."ContactId" = @__sentLog_ContactId_0 AND c."CampaignId" = @__sentLog_CampaignId_1 AND c."CreatedAt" > @__sessionStart_2
ORDER BY c."CreatedAt"
LIMIT 1
2025-09-19 16:45:48.080 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sentLog_ContactId_0='75df7429-287c-406a-83d8-0dfa045b0093', @__sentLog_CTAFlowConfigId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @__sessionStart_2='2025-09-19T11:11:46.2651170Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT c."CreatedAt"
FROM "CampaignSendLogs" AS c
WHERE c."ContactId" = @__sentLog_ContactId_0 AND c."CTAFlowConfigId" = @__sentLog_CTAFlowConfigId_1 AND c."CreatedAt" > @__sessionStart_2
ORDER BY c."CreatedAt"
LIMIT 1
2025-09-19 16:45:48.083 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sentLog_Id_0='dfc12ac3-4041-4980-93df-feecbda92506', @__sessionStart_1='2025-09-19T11:11:46.2651170Z' (DbType = DateTime), @__sessionEnd_2='2025-09-20T11:11:46.2651170Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."RunId", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__sentLog_Id_0 AND c."ClickedAt" >= @__sessionStart_1 AND c."ClickedAt" < @__sessionEnd_2
ORDER BY c."ClickedAt"
2025-09-19 16:45:48.086 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_sentLog_CTAFlowConfigId_Value_0='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT c."FlowName"
FROM "CTAFlowConfigs" AS c
WHERE c."Id" = @__8__locals1_sentLog_CTAFlowConfigId_Value_0
LIMIT 1
2025-09-19 16:45:48.089 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_sentLog_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_sentLog_ContactId_1='75df7429-287c-406a-83d8-0dfa045b0093', @__8__locals1_sentLog_CTAFlowConfigId_2='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @__8__locals1_sessionStart_3='2025-09-19T11:11:46.2651170Z' (DbType = DateTime), @__8__locals1_sessionEnd_4='2025-09-20T11:11:46.2651170Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."MessageLogId", c."SentAt", c."CreatedAt", c."TemplateId", c."CTAFlowStepId", c."DeliveredAt", c."ReadAt"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__8__locals1_sentLog_BusinessId_0 AND c."ContactId" = @__8__locals1_sentLog_ContactId_1 AND c."CTAFlowConfigId" = @__8__locals1_sentLog_CTAFlowConfigId_2 AND c."CreatedAt" >= @__8__locals1_sessionStart_3 AND c."CreatedAt" < @__8__locals1_sessionEnd_4
ORDER BY c."CreatedAt"
2025-09-19 16:45:48.092 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__chainCslIds_0={ 'dfc12ac3-4041-4980-93df-feecbda92506' } (DbType = Object), @__8__locals1_sessionStart_1='2025-09-19T11:11:46.2651170Z' (DbType = DateTime), @__8__locals1_sessionEnd_2='2025-09-20T11:11:46.2651170Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."BusinessId", f."ButtonIndex", f."CampaignSendLogId", f."ContactPhone", f."ErrorMessage", f."ExecutedAt", f."FlowId", f."MessageLogId", f."RawResponse", f."RequestId", f."RunId", f."StepId", f."StepName", f."Success", f."TemplateName", f."TemplateType", f."TrackingLogId", f."TriggeredByButton"
FROM "FlowExecutionLogs" AS f
WHERE f."CampaignSendLogId" IS NOT NULL AND f."CampaignSendLogId" = ANY (@__chainCslIds_0) AND f."ExecutedAt" >= @__8__locals1_sessionStart_1 AND f."ExecutedAt" < @__8__locals1_sessionEnd_2
ORDER BY f."ExecutedAt"
2025-09-19 16:45:48.095 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__chainMsgLogIds_0={ 'b0f53e7e-da5c-4403-b3a9-13bdb7cbaf11' } (DbType = Object), @__8__locals1_sessionStart_1='2025-09-19T11:11:46.2651170Z' (DbType = DateTime), @__8__locals1_sessionEnd_2='2025-09-20T11:11:46.2651170Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."BusinessId", f."ButtonIndex", f."CampaignSendLogId", f."ContactPhone", f."ErrorMessage", f."ExecutedAt", f."FlowId", f."MessageLogId", f."RawResponse", f."RequestId", f."RunId", f."StepId", f."StepName", f."Success", f."TemplateName", f."TemplateType", f."TrackingLogId", f."TriggeredByButton"
FROM "FlowExecutionLogs" AS f
WHERE f."MessageLogId" IS NOT NULL AND f."MessageLogId" = ANY (@__chainMsgLogIds_0) AND f."ExecutedAt" >= @__8__locals1_sessionStart_1 AND f."ExecutedAt" < @__8__locals1_sessionEnd_2
ORDER BY f."ExecutedAt"
2025-09-19 16:45:48.098 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_sentLog_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_sentLog_CTAFlowConfigId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @__phoneA_2='+918974005240', @__phoneB_3='918974005240', @__8__locals1_sessionStart_4='2025-09-19T11:11:46.2651170Z' (DbType = DateTime), @__8__locals1_sessionEnd_5='2025-09-20T11:11:46.2651170Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."BusinessId", f."ButtonIndex", f."CampaignSendLogId", f."ContactPhone", f."ErrorMessage", f."ExecutedAt", f."FlowId", f."MessageLogId", f."RawResponse", f."RequestId", f."RunId", f."StepId", f."StepName", f."Success", f."TemplateName", f."TemplateType", f."TrackingLogId", f."TriggeredByButton"
FROM "FlowExecutionLogs" AS f
WHERE f."BusinessId" = @__8__locals1_sentLog_BusinessId_0 AND f."FlowId" = @__8__locals1_sentLog_CTAFlowConfigId_1 AND (f."ContactPhone" = @__phoneA_2 OR f."ContactPhone" = @__phoneB_3) AND f."ExecutedAt" >= @__8__locals1_sessionStart_4 AND f."ExecutedAt" < @__8__locals1_sessionEnd_5
ORDER BY f."ExecutedAt"
2025-09-19 16:45:48.102 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__chainCslIds_0={ 'dfc12ac3-4041-4980-93df-feecbda92506' } (DbType = Object), @__8__locals1_sessionStart_1='2025-09-19T11:11:46.2651170Z' (DbType = DateTime), @__8__locals1_sessionEnd_2='2025-09-20T11:11:46.2651170Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."RunId", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = ANY (@__chainCslIds_0) AND c."ClickedAt" >= @__8__locals1_sessionStart_1 AND c."ClickedAt" < @__8__locals1_sessionEnd_2
ORDER BY c."ClickedAt"
2025-09-19 16:45:48.104 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.Tracking.DTOs.JourneyResponseDto'.
2025-09-19 16:45:48.105 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 34.9809ms
2025-09-19 16:45:48.107 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-09-19 16:45:48.108 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/dfc12ac3-4041-4980-93df-feecbda92506 - 200 null application/json; charset=utf-8 42.4899ms
2025-09-19 16:45:57.745 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-19 16:45:57.747 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:45:57.748 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.055ms
2025-09-19 16:45:57.750 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-19 16:45:57.752 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:45:57.753 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-19 16:45:57.754 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 16:45:57.759 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-09-19 16:45:57.761 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 16:45:57.763 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 7.443ms
2025-09-19 16:45:57.764 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-19 16:45:57.765 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 14.7913ms
2025-09-19 16:46:04.507 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b/summary - null null
2025-09-19 16:46:04.509 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:46:04.510 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b/summary - 204 null null 3.3749ms
2025-09-19 16:46:04.513 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b/summary - null null
2025-09-19 16:46:04.516 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:46:04.517 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-09-19 16:46:04.518 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-09-19 16:46:04.525 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='5d760969-9fb2-481a-9139-be56c85c2f3b'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-09-19 16:46:04.529 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-09-19 16:46:04.530 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 9.9175ms
2025-09-19 16:46:04.531 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-09-19 16:46:04.532 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b/summary - 200 null application/json; charset=utf-8 19.1005ms
2025-09-19 16:46:04.989 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b?page=1&pageSize=10&status=&search= - null null
2025-09-19 16:46:04.991 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:46:04.992 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b?page=1&pageSize=10&status=&search= - 204 null null 3.3655ms
2025-09-19 16:46:04.995 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b?page=1&pageSize=10&status=&search= - null null
2025-09-19 16:46:04.997 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:46:04.998 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-09-19 16:46:04.999 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-09-19 16:46:05.002 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='5d760969-9fb2-481a-9139-be56c85c2f3b'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-09-19 16:46:05.007 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='5d760969-9fb2-481a-9139-be56c85c2f3b', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-09-19 16:46:05.009 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 16:46:05.010 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 9.9956ms
2025-09-19 16:46:05.011 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-09-19 16:46:05.012 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 17.5502ms
2025-09-19 16:46:06.040 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/dfc12ac3-4041-4980-93df-feecbda92506 - null null
2025-09-19 16:46:06.042 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:46:06.043 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/dfc12ac3-4041-4980-93df-feecbda92506 - 204 null null 3.0071ms
2025-09-19 16:46:06.045 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/dfc12ac3-4041-4980-93df-feecbda92506 - null null
2025-09-19 16:46:06.047 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:46:06.048 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-09-19 16:46:06.049 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-09-19 16:46:06.053 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__initialCampaignSendLogId_0='dfc12ac3-4041-4980-93df-feecbda92506'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId", c0."Id", c0."BusinessId", c0."CTAFlowConfigId", c0."CampaignId", c0."CampaignType", c0."CreatedAt", c0."CreatedBy", c0."CtaId", c0."DeletedAt", c0."DeletedBy", c0."FollowUpTemplateId", c0."ImageCaption", c0."ImageUrl", c0."IsDeleted", c0."MessageBody", c0."MessageTemplate", c0."Name", c0."PhoneNumberId", c0."Provider", c0."ScheduledAt", c0."SourceCampaignId", c0."Status", c0."TemplateId", c0."TemplateParameters", c0."UpdatedAt", c1."Id", c1."AssignedAgentId", c1."BusinessId", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
INNER JOIN "Contacts" AS c1 ON c."ContactId" = c1."Id"
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-09-19 16:46:06.057 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sentLog_ContactId_0='75df7429-287c-406a-83d8-0dfa045b0093', @__sentLog_CampaignId_1='5d760969-9fb2-481a-9139-be56c85c2f3b', @__sessionStart_2='2025-09-19T11:11:46.2651170Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT c."CreatedAt"
FROM "CampaignSendLogs" AS c
WHERE c."ContactId" = @__sentLog_ContactId_0 AND c."CampaignId" = @__sentLog_CampaignId_1 AND c."CreatedAt" > @__sessionStart_2
ORDER BY c."CreatedAt"
LIMIT 1
2025-09-19 16:46:06.060 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sentLog_ContactId_0='75df7429-287c-406a-83d8-0dfa045b0093', @__sentLog_CTAFlowConfigId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @__sessionStart_2='2025-09-19T11:11:46.2651170Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT c."CreatedAt"
FROM "CampaignSendLogs" AS c
WHERE c."ContactId" = @__sentLog_ContactId_0 AND c."CTAFlowConfigId" = @__sentLog_CTAFlowConfigId_1 AND c."CreatedAt" > @__sessionStart_2
ORDER BY c."CreatedAt"
LIMIT 1
2025-09-19 16:46:06.063 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sentLog_Id_0='dfc12ac3-4041-4980-93df-feecbda92506', @__sessionStart_1='2025-09-19T11:11:46.2651170Z' (DbType = DateTime), @__sessionEnd_2='2025-09-20T11:11:46.2651170Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."RunId", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__sentLog_Id_0 AND c."ClickedAt" >= @__sessionStart_1 AND c."ClickedAt" < @__sessionEnd_2
ORDER BY c."ClickedAt"
2025-09-19 16:46:06.065 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_sentLog_CTAFlowConfigId_Value_0='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT c."FlowName"
FROM "CTAFlowConfigs" AS c
WHERE c."Id" = @__8__locals1_sentLog_CTAFlowConfigId_Value_0
LIMIT 1
2025-09-19 16:46:06.068 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_sentLog_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_sentLog_ContactId_1='75df7429-287c-406a-83d8-0dfa045b0093', @__8__locals1_sentLog_CTAFlowConfigId_2='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @__8__locals1_sessionStart_3='2025-09-19T11:11:46.2651170Z' (DbType = DateTime), @__8__locals1_sessionEnd_4='2025-09-20T11:11:46.2651170Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."MessageLogId", c."SentAt", c."CreatedAt", c."TemplateId", c."CTAFlowStepId", c."DeliveredAt", c."ReadAt"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__8__locals1_sentLog_BusinessId_0 AND c."ContactId" = @__8__locals1_sentLog_ContactId_1 AND c."CTAFlowConfigId" = @__8__locals1_sentLog_CTAFlowConfigId_2 AND c."CreatedAt" >= @__8__locals1_sessionStart_3 AND c."CreatedAt" < @__8__locals1_sessionEnd_4
ORDER BY c."CreatedAt"
2025-09-19 16:46:06.072 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__chainCslIds_0={ 'dfc12ac3-4041-4980-93df-feecbda92506' } (DbType = Object), @__8__locals1_sessionStart_1='2025-09-19T11:11:46.2651170Z' (DbType = DateTime), @__8__locals1_sessionEnd_2='2025-09-20T11:11:46.2651170Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."BusinessId", f."ButtonIndex", f."CampaignSendLogId", f."ContactPhone", f."ErrorMessage", f."ExecutedAt", f."FlowId", f."MessageLogId", f."RawResponse", f."RequestId", f."RunId", f."StepId", f."StepName", f."Success", f."TemplateName", f."TemplateType", f."TrackingLogId", f."TriggeredByButton"
FROM "FlowExecutionLogs" AS f
WHERE f."CampaignSendLogId" IS NOT NULL AND f."CampaignSendLogId" = ANY (@__chainCslIds_0) AND f."ExecutedAt" >= @__8__locals1_sessionStart_1 AND f."ExecutedAt" < @__8__locals1_sessionEnd_2
ORDER BY f."ExecutedAt"
2025-09-19 16:46:06.075 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__chainMsgLogIds_0={ 'b0f53e7e-da5c-4403-b3a9-13bdb7cbaf11' } (DbType = Object), @__8__locals1_sessionStart_1='2025-09-19T11:11:46.2651170Z' (DbType = DateTime), @__8__locals1_sessionEnd_2='2025-09-20T11:11:46.2651170Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."BusinessId", f."ButtonIndex", f."CampaignSendLogId", f."ContactPhone", f."ErrorMessage", f."ExecutedAt", f."FlowId", f."MessageLogId", f."RawResponse", f."RequestId", f."RunId", f."StepId", f."StepName", f."Success", f."TemplateName", f."TemplateType", f."TrackingLogId", f."TriggeredByButton"
FROM "FlowExecutionLogs" AS f
WHERE f."MessageLogId" IS NOT NULL AND f."MessageLogId" = ANY (@__chainMsgLogIds_0) AND f."ExecutedAt" >= @__8__locals1_sessionStart_1 AND f."ExecutedAt" < @__8__locals1_sessionEnd_2
ORDER BY f."ExecutedAt"
2025-09-19 16:46:06.078 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_sentLog_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_sentLog_CTAFlowConfigId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @__phoneA_2='+918974005240', @__phoneB_3='918974005240', @__8__locals1_sessionStart_4='2025-09-19T11:11:46.2651170Z' (DbType = DateTime), @__8__locals1_sessionEnd_5='2025-09-20T11:11:46.2651170Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."BusinessId", f."ButtonIndex", f."CampaignSendLogId", f."ContactPhone", f."ErrorMessage", f."ExecutedAt", f."FlowId", f."MessageLogId", f."RawResponse", f."RequestId", f."RunId", f."StepId", f."StepName", f."Success", f."TemplateName", f."TemplateType", f."TrackingLogId", f."TriggeredByButton"
FROM "FlowExecutionLogs" AS f
WHERE f."BusinessId" = @__8__locals1_sentLog_BusinessId_0 AND f."FlowId" = @__8__locals1_sentLog_CTAFlowConfigId_1 AND (f."ContactPhone" = @__phoneA_2 OR f."ContactPhone" = @__phoneB_3) AND f."ExecutedAt" >= @__8__locals1_sessionStart_4 AND f."ExecutedAt" < @__8__locals1_sessionEnd_5
ORDER BY f."ExecutedAt"
2025-09-19 16:46:06.081 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__chainCslIds_0={ 'dfc12ac3-4041-4980-93df-feecbda92506' } (DbType = Object), @__8__locals1_sessionStart_1='2025-09-19T11:11:46.2651170Z' (DbType = DateTime), @__8__locals1_sessionEnd_2='2025-09-20T11:11:46.2651170Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."RunId", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = ANY (@__chainCslIds_0) AND c."ClickedAt" >= @__8__locals1_sessionStart_1 AND c."ClickedAt" < @__8__locals1_sessionEnd_2
ORDER BY c."ClickedAt"
2025-09-19 16:46:06.083 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.Tracking.DTOs.JourneyResponseDto'.
2025-09-19 16:46:06.084 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 33.8855ms
2025-09-19 16:46:06.085 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-09-19 16:46:06.086 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/dfc12ac3-4041-4980-93df-feecbda92506 - 200 null application/json; charset=utf-8 40.7626ms
2025-09-19 16:46:51.775 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-19 16:46:51.777 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:46:51.778 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.6365ms
2025-09-19 16:46:51.782 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-19 16:46:51.785 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:46:51.786 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-19 16:46:51.787 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 16:46:51.791 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-09-19 16:46:51.794 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 16:46:51.796 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 7.1977ms
2025-09-19 16:46:51.797 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-19 16:46:51.798 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 15.9034ms
2025-09-19 16:46:53.587 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - null null
2025-09-19 16:46:53.589 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:46:53.590 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - 204 null null 3.4214ms
2025-09-19 16:46:53.593 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - null 0
2025-09-19 16:46:53.595 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:46:53.596 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-19 16:46:53.597 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 16:46:53.602 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='5d760969-9fb2-481a-9139-be56c85c2f3b'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-09-19 16:46:53.607 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__flowId_Value_0='2b73877c-3c18-4fbb-af61-1906393bb2d3', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", t0."Id", t0."CTAFlowConfigId", t0."PositionX", t0."PositionY", t0."RequiredSource", t0."RequiredTag", t0."StepOrder", t0."TemplateToSend", t0."TemplateType", t0."TriggerButtonText", t0."TriggerButtonType", t0."Id0", t0."ButtonIndex", t0."ButtonSubType", t0."ButtonText", t0."ButtonType", t0."ButtonValue", t0."CTAFlowStepId", t0."NextStepId"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."Id" = @__flowId_Value_0 AND c."BusinessId" = @__businessId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."CTAFlowConfigId", c0."PositionX", c0."PositionY", c0."RequiredSource", c0."RequiredTag", c0."StepOrder", c0."TemplateToSend", c0."TemplateType", c0."TriggerButtonText", c0."TriggerButtonType", f."Id" AS "Id0", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
    FROM "CTAFlowSteps" AS c0
    LEFT JOIN "FlowButtonLinks" AS f ON c0."Id" = f."CTAFlowStepId"
) AS t0 ON t."Id" = t0."CTAFlowConfigId"
ORDER BY t."Id", t0."Id"
2025-09-19 16:46:53.610 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:46:53.612 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:46:53.613 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:46:54.648 +05:30 [INF] Received HTTP response headers after 1034.47ms - 200
2025-09-19 16:46:54.650 +05:30 [INF] End processing HTTP request after 1037.7815ms - 200
2025-09-19 16:46:54.790 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaign_CTAFlowConfigId_Value_0='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "CTAFlowSteps" AS c
WHERE c."CTAFlowConfigId" = @__campaign_CTAFlowConfigId_Value_0
ORDER BY c."StepOrder"
LIMIT 1
2025-09-19 16:46:54.794 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 16:46:54.797 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-19 16:46:54.799 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 16:46:54.801 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 16:46:56.186 +05:30 [INF] Received HTTP response headers after 1384.6488ms - 200
2025-09-19 16:46:56.188 +05:30 [INF] End processing HTTP request after 1388.585ms - 200
2025-09-19 16:46:56.194 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='c92edcd4-cb70-434c-ad56-98c681a61a28', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='[{"i":0,"t":"Explore Our Services","position":1,"text":"Explore Our Services","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"t":"View Our Products","position":2,"text":"View Our Products","type":"QUICK_REPLY","subType":"quick_reply"},{"i":2,"t":"Customer Support","position":3,"text":"Customer Support","type":"QUICK_REPLY","subType":"quick_reply"}]', @p3='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p4='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c' (Nullable = true), @p5='5d760969-9fb2-481a-9139-be56c85c2f3b' (Nullable = true), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T11:16:56.1901499Z' (DbType = DateTime), @p8=NULL, @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='welcome_menu_minds' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkRCMzVENDE2RjMzMTc1RjlBAA==', @p14='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkRCMzVENDE2RjMzMTc1RjlBAA==","message_status":"accepted"}]}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17=NULL, @p18='ff937320-31ce-4378-9f3a-2282211a2bd8' (Nullable = true), @p19='2025-09-19T11:16:56.1901503Z' (Nullable = true) (DbType = DateTime), @p20='campaign', @p21='Sent' (Nullable = false), @p22='e7565c26-97a8-48c7-a991-26ac454e0d18', @p23='True', @p24=NULL, @p25='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p26='[{"i":0,"t":"Explore Our Services","position":1,"text":"Explore Our Services","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"t":"View Our Products","position":2,"text":"View Our Products","type":"QUICK_REPLY","subType":"quick_reply"},{"i":2,"t":"Customer Support","position":3,"text":"Customer Support","type":"QUICK_REPLY","subType":"quick_reply"}]', @p27='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p28='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c' (Nullable = true), @p29='5d760969-9fb2-481a-9139-be56c85c2f3b', @p30=NULL, @p31=NULL, @p32=NULL (DbType = DateTime), @p33='75df7429-287c-406a-83d8-0dfa045b0093', @p34=NULL, @p35='2025-09-19T11:16:56.1903583Z' (DbType = DateTime), @p36='system', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40=NULL, @p41=NULL, @p42='False', @p43=NULL (DbType = DateTime), @p44=NULL, @p45=NULL, @p46='Hello! Thank you for contacting MindsMiratus.

If you're a new visitor, we're happy to help you get started. If you're an existing customer, we're here to support you. Please choose from the options below.' (Nullable = false), @p47='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkRCMzVENDE2RjMzMTc1RjlBAA==', @p48='c92edcd4-cb70-434c-ad56-98c681a61a28' (Nullable = true), @p49=NULL (DbType = DateTime), @p50='17111212-d8a7-4d76-9fc2-9ed370446645', @p51='0', @p52='ff937320-31ce-4378-9f3a-2282211a2bd8' (Nullable = true), @p53='Sent', @p54='2025-09-19T11:16:56.1903583Z' (Nullable = true) (DbType = DateTime), @p55=NULL, @p56='welcome_menu_minds', @p57=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57);
2025-09-19 16:46:56.198 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 16:46:56.199 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 2600.9285ms
2025-09-19 16:46:56.200 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-19 16:46:56.201 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - 200 null application/json; charset=utf-8 2608.5941ms
2025-09-19 16:46:57.433 +05:30 [INF] Request starting HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-19 16:46:57.436 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:46:57.437 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 16:46:57.438 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkRCMzVENDE2RjMzMTc1RjlBAA==","status":"sent","timestamp":"1758280619","recipient_id":"918974005240","conversation":{"id":"4bf91fd346f9eb43b75f9780aea12725","expiration_timestamp":"1758280619","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 16:46:57.440 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 16:46:57.440 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkRCMzVENDE2RjMzMTc1RjlBAA==","status":"sent","timestamp":"1758280619","recipient_id":"918974005240","conversation":{"id":"4bf91fd346f9eb43b75f9780aea12725","expiration_timestamp":"1758280619","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 16:46:57.441 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:46:57.441 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 16:46:57.443 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.4562ms
2025-09-19 16:46:57.446 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkRCMzVENDE2RjMzMTc1RjlBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 16:46:57.446 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:46:57.449 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='e7565c26-97a8-48c7-a991-26ac454e0d18'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-19 16:46:57.450 +05:30 [INF] Request finished HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 16.309ms
2025-09-19 16:46:57.451 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkRCMzVENDE2RjMzMTc1RjlBAA== (legacy)
2025-09-19 16:46:57.954 +05:30 [INF] Request starting HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-09-19 16:46:57.957 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:46:57.957 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 16:46:57.959 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkRCMzVENDE2RjMzMTc1RjlBAA==","status":"read","timestamp":"1758280619","recipient_id":"918974005240","conversation":{"id":"4bf91fd346f9eb43b75f9780aea12725","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 16:46:57.961 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 16:46:57.961 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkRCMzVENDE2RjMzMTc1RjlBAA==","status":"read","timestamp":"1758280619","recipient_id":"918974005240","conversation":{"id":"4bf91fd346f9eb43b75f9780aea12725","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 16:46:57.962 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:46:57.963 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 16:46:57.964 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.8099ms
2025-09-19 16:46:57.967 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkRCMzVENDE2RjMzMTc1RjlBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 16:46:57.968 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:46:57.971 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='e7565c26-97a8-48c7-a991-26ac454e0d18'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-19 16:46:57.971 +05:30 [INF] Request finished HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 17.0879ms
2025-09-19 16:46:57.993 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p2='e7565c26-97a8-48c7-a991-26ac454e0d18', @p0='2025-09-19T11:16:59.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-19 16:46:57.996 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkRCMzVENDE2RjMzMTc1RjlBAA== → Read
2025-09-19 16:47:00.609 +05:30 [INF] Request starting HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - application/json 637
2025-09-19 16:47:00.611 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:47:00.613 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 16:47:00.614 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkRCMzVENDE2RjMzMTc1RjlBAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggOEI3Q0MzRUYzQjQ3NzExQUYzRDEyNDNBOUM1OERGMUQA","timestamp":"1758280622","type":"button","button":{"payload":"Explore Our Services","text":"Explore Our Services"}}]},"field":"messages"}]}]}
2025-09-19 16:47:00.616 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 16:47:00.616 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkRCMzVENDE2RjMzMTc1RjlBAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggOEI3Q0MzRUYzQjQ3NzExQUYzRDEyNDNBOUM1OERGMUQA","timestamp":"1758280622","type":"button","button":{"payload":"Explore Our Services","text":"Explore Our Services"}}]},"field":"messages"}]}]}
2025-09-19 16:47:00.617 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:47:00.618 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-19 16:47:00.619 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.8797ms
2025-09-19 16:47:00.620 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-19 16:47:00.621 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:47:00.622 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggOEI3Q0MzRUYzQjQ3NzExQUYzRDEyNDNBOUM1OERGMUQA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkRCMzVENDE2RjMzMTc1RjlBAA==, Text: Explore Our Services
2025-09-19 16:47:00.623 +05:30 [INF] Request finished HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.9635ms
2025-09-19 16:47:00.626 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkRCMzVENDE2RjMzMTc1RjlBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-19 16:47:00.631 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__origin_Id_0='c92edcd4-cb70-434c-ad56-98c681a61a28' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkRCMzVENDE2RjMzMTc1RjlBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-09-19 16:47:00.634 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sourceStepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @__flowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3', @__buttonIndex_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-09-19 16:47:00.636 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-09-19 16:47:00.640 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='4d39bc88-c01f-48c9-a4c0-099d55520a64', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='0' (Nullable = true), @p3='e7565c26-97a8-48c7-a991-26ac454e0d18' (Nullable = true), @p4='918974005240', @p5=NULL, @p6='2025-09-19T11:17:00.6387107Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='c92edcd4-cb70-434c-ad56-98c681a61a28' (Nullable = true), @p9=NULL, @p10='a62ab224-e8cb-4fab-907d-2a0523a84162' (Nullable = true), @p11='ff937320-31ce-4378-9f3a-2282211a2bd8' (Nullable = true), @p12='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @p13='welcome_menu_minds' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='Explore Our Services'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-19 16:47:00.643 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__context_TargetStepId_0='806ee374-1a80-4fb2-ba55-c1ec1685c618' (Nullable = true), @__context_FlowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__context_TargetStepId_0 AND c."CTAFlowConfigId" = @__context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-09-19 16:47:00.646 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:47:00.648 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:47:00.649 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:47:01.986 +05:30 [INF] Received HTTP response headers after 1335.8041ms - 200
2025-09-19 16:47:01.987 +05:30 [INF] End processing HTTP request after 1338.8201ms - 200
2025-09-19 16:47:02.088 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__context_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__context_BusinessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 16:47:02.093 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='3798e6f6-c6cb-470e-b0df-4948863b28ea', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5='Missing PhoneNumberId', @p6='2025-09-19T11:17:02.0909104Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='229f8ef7-dc1e-4b82-99bb-43de4620aa1b' (Nullable = true), @p9=NULL, @p10='ee19af37-cff7-4711-9793-ec4c377f60ff' (Nullable = true), @p11=NULL (DbType = Guid), @p12='806ee374-1a80-4fb2-ba55-c1ec1685c618', @p13='services_menu_v1' (Nullable = false), @p14='False', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='229f8ef7-dc1e-4b82-99bb-43de4620aa1b', @p20='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p21=NULL, @p22='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p23='806ee374-1a80-4fb2-ba55-c1ec1685c618' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26='2025-09-19T11:17:02.0907752Z' (DbType = DateTime), @p27='Missing PhoneNumberId', @p28='1' (Nullable = true), @p29='False', @p30=NULL, @p31='services_menu_v1' (Nullable = false), @p32=NULL, @p33=NULL, @p34='918974005240' (Nullable = false), @p35='c92edcd4-cb70-434c-ad56-98c681a61a28' (Nullable = true), @p36=NULL, @p37=NULL (DbType = Guid), @p38=NULL (DbType = DateTime), @p39='flow', @p40='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40)
RETURNING "MessageTime";
2025-09-19 16:47:30.248 +05:30 [INF] Request starting HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - application/json 631
2025-09-19 16:47:30.254 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:47:30.255 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 16:47:30.257 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkRCMzVENDE2RjMzMTc1RjlBAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQjJDOTkxMDkwNjAyRjk4NjNERkVBQ0Q0ODM2QzA2RDYA","timestamp":"1758280652","type":"button","button":{"payload":"View Our Products","text":"View Our Products"}}]},"field":"messages"}]}]}
2025-09-19 16:47:30.258 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 16:47:30.258 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkRCMzVENDE2RjMzMTc1RjlBAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQjJDOTkxMDkwNjAyRjk4NjNERkVBQ0Q0ODM2QzA2RDYA","timestamp":"1758280652","type":"button","button":{"payload":"View Our Products","text":"View Our Products"}}]},"field":"messages"}]}]}
2025-09-19 16:47:30.259 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:47:30.259 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-19 16:47:30.260 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.6171ms
2025-09-19 16:47:30.261 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-19 16:47:30.262 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:47:30.262 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQjJDOTkxMDkwNjAyRjk4NjNERkVBQ0Q0ODM2QzA2RDYA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkRCMzVENDE2RjMzMTc1RjlBAA==, Text: View Our Products
2025-09-19 16:47:30.263 +05:30 [INF] Request finished HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 15.3269ms
2025-09-19 16:47:30.266 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkRCMzVENDE2RjMzMTc1RjlBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-19 16:47:30.279 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__origin_Id_0='c92edcd4-cb70-434c-ad56-98c681a61a28' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkRCMzVENDE2RjMzMTc1RjlBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-09-19 16:47:30.282 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sourceStepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @__flowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3', @__buttonIndex_2='1'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-09-19 16:47:30.284 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-09-19 16:47:30.305 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p0='be02ffb6-e35d-4d42-8792-edd605d26b15', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='1' (Nullable = true), @p3='e7565c26-97a8-48c7-a991-26ac454e0d18' (Nullable = true), @p4='918974005240', @p5=NULL, @p6='2025-09-19T11:17:30.2860197Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='c92edcd4-cb70-434c-ad56-98c681a61a28' (Nullable = true), @p9=NULL, @p10='89fd49a1-3a93-49ae-96ef-c86a2d21e4f7' (Nullable = true), @p11='ff937320-31ce-4378-9f3a-2282211a2bd8' (Nullable = true), @p12='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @p13='welcome_menu_minds' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='View Our Products'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-19 16:47:30.309 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__context_TargetStepId_0='62ee00c5-2a9a-4077-a25e-f8288347a910' (Nullable = true), @__context_FlowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__context_TargetStepId_0 AND c."CTAFlowConfigId" = @__context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-09-19 16:47:30.312 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:47:30.313 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:47:30.314 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:47:31.247 +05:30 [INF] Received HTTP response headers after 932.1087ms - 200
2025-09-19 16:47:31.248 +05:30 [INF] End processing HTTP request after 934.8906ms - 200
2025-09-19 16:47:31.374 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__context_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__context_BusinessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 16:47:31.378 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='ce629701-34a4-4755-b8df-702d7a95a47b', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='1' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5='Missing PhoneNumberId', @p6='2025-09-19T11:17:31.3764602Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='d224c29a-39e3-42ad-899a-09911dc2a3cf' (Nullable = true), @p9=NULL, @p10='0006cd5c-2225-4bf7-b052-0abe8dc4bc76' (Nullable = true), @p11=NULL (DbType = Guid), @p12='62ee00c5-2a9a-4077-a25e-f8288347a910', @p13='products_info_v1' (Nullable = false), @p14='False', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='d224c29a-39e3-42ad-899a-09911dc2a3cf', @p20='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p21='[{"i":1,"t":"Back to Main Menu","ty":"QUICK_REPLY","v":"","ns":"3bc5f00f-c6e4-4141-9c71-e26d4c61a20c"}]', @p22='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p23='62ee00c5-2a9a-4077-a25e-f8288347a910' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26='2025-09-19T11:17:31.3763194Z' (DbType = DateTime), @p27='Missing PhoneNumberId', @p28='1' (Nullable = true), @p29='False', @p30=NULL, @p31='products_info_v1' (Nullable = false), @p32=NULL, @p33=NULL, @p34='918974005240' (Nullable = false), @p35='c92edcd4-cb70-434c-ad56-98c681a61a28' (Nullable = true), @p36=NULL, @p37=NULL (DbType = Guid), @p38=NULL (DbType = DateTime), @p39='flow', @p40='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40)
RETURNING "MessageTime";
2025-09-19 16:48:04.111 +05:30 [INF] Request starting HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - application/json 629
2025-09-19 16:48:04.114 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:48:04.115 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 16:48:04.117 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkRCMzVENDE2RjMzMTc1RjlBAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMDQ3RkFFQUZBM0JCMkM4MTgyQURDNzYwRUVENzJBM0YA","timestamp":"1758280685","type":"button","button":{"payload":"Customer Support","text":"Customer Support"}}]},"field":"messages"}]}]}
2025-09-19 16:48:04.118 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 16:48:04.119 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkRCMzVENDE2RjMzMTc1RjlBAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMDQ3RkFFQUZBM0JCMkM4MTgyQURDNzYwRUVENzJBM0YA","timestamp":"1758280685","type":"button","button":{"payload":"Customer Support","text":"Customer Support"}}]},"field":"messages"}]}]}
2025-09-19 16:48:04.119 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:48:04.120 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-19 16:48:04.121 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.5688ms
2025-09-19 16:48:04.123 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-19 16:48:04.126 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:48:04.127 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMDQ3RkFFQUZBM0JCMkM4MTgyQURDNzYwRUVENzJBM0YA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkRCMzVENDE2RjMzMTc1RjlBAA==, Text: Customer Support
2025-09-19 16:48:04.128 +05:30 [INF] Request finished HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 16.3548ms
2025-09-19 16:48:04.131 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkRCMzVENDE2RjMzMTc1RjlBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-19 16:48:04.139 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__origin_Id_0='c92edcd4-cb70-434c-ad56-98c681a61a28' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkRCMzVENDE2RjMzMTc1RjlBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-09-19 16:48:04.142 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sourceStepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @__flowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3', @__buttonIndex_2='2'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-09-19 16:48:04.145 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-09-19 16:48:04.167 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p0='7279889c-0d68-4a1c-9f10-f1e9f4377e75', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='2' (Nullable = true), @p3='e7565c26-97a8-48c7-a991-26ac454e0d18' (Nullable = true), @p4='918974005240', @p5=NULL, @p6='2025-09-19T11:18:04.1470944Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='c92edcd4-cb70-434c-ad56-98c681a61a28' (Nullable = true), @p9=NULL, @p10='fad41bea-be49-4e7b-a711-b247fdb5998d' (Nullable = true), @p11='ff937320-31ce-4378-9f3a-2282211a2bd8' (Nullable = true), @p12='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @p13='welcome_menu_minds' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='Customer Support'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-19 16:48:04.170 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__context_TargetStepId_0='97457a39-996c-4acf-a357-c5038b2dd21c' (Nullable = true), @__context_FlowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__context_TargetStepId_0 AND c."CTAFlowConfigId" = @__context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-09-19 16:48:04.173 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:48:04.175 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:48:04.176 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:48:05.067 +05:30 [INF] Received HTTP response headers after 890.2486ms - 200
2025-09-19 16:48:05.068 +05:30 [INF] End processing HTTP request after 893.229ms - 200
2025-09-19 16:48:05.152 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__context_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__context_BusinessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 16:48:05.157 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='40dbd820-1658-4012-9fbe-c9728efb53dd', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='2' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5='Missing PhoneNumberId', @p6='2025-09-19T11:18:05.1548604Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='2148a858-ae3c-4d7b-a9e4-e9df885d3421' (Nullable = true), @p9=NULL, @p10='b3d41965-07dd-42d9-a54a-25941f6d5394' (Nullable = true), @p11=NULL (DbType = Guid), @p12='97457a39-996c-4acf-a357-c5038b2dd21c', @p13='support_project_status_v1' (Nullable = false), @p14='False', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='2148a858-ae3c-4d7b-a9e4-e9df885d3421', @p20='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p21=NULL, @p22='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p23='97457a39-996c-4acf-a357-c5038b2dd21c' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26='2025-09-19T11:18:05.1547394Z' (DbType = DateTime), @p27='Missing PhoneNumberId', @p28='1' (Nullable = true), @p29='False', @p30=NULL, @p31='support_project_status_v1' (Nullable = false), @p32=NULL, @p33=NULL, @p34='918974005240' (Nullable = false), @p35='c92edcd4-cb70-434c-ad56-98c681a61a28' (Nullable = true), @p36=NULL, @p37=NULL (DbType = Guid), @p38=NULL (DbType = DateTime), @p39='flow', @p40='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40)
RETURNING "MessageTime";
2025-09-19 16:48:28.143 +05:30 [INF] Request starting HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-09-19 16:48:28.146 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:48:28.146 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 16:48:28.148 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA==","status":"read","timestamp":"1758280315","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-09-19 16:48:28.149 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 16:48:28.149 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA==","status":"read","timestamp":"1758280315","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-09-19 16:48:28.150 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:48:28.152 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.8824ms
2025-09-19 16:48:28.153 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-19 16:48:28.157 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:48:28.160 +05:30 [INF] Request finished HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 16.7636ms
2025-09-19 16:48:28.160 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-19 16:48:28.165 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-19 16:48:28.166 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 16:48:28.168 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 16:48:28.171 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='dfc12ac3-4041-4980-93df-feecbda92506'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-19 16:48:28.192 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@p2='dfc12ac3-4041-4980-93df-feecbda92506', @p0='2025-09-19T11:11:55.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-19 16:48:28.194 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA== → Read
2025-09-19 16:48:28.843 +05:30 [INF] Request starting HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - application/json 623
2025-09-19 16:48:28.845 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:48:28.846 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 16:48:28.848 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkRCMzVENDE2RjMzMTc1RjlBAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggREYzQ0U4NUU5NDI2M0MzMDVERkRFRjlFRTg4Qzk1MjQA","timestamp":"1758280710","type":"button","button":{"payload":"Contact Sales","text":"Contact Sales"}}]},"field":"messages"}]}]}
2025-09-19 16:48:28.850 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 16:48:28.850 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkRCMzVENDE2RjMzMTc1RjlBAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggREYzQ0U4NUU5NDI2M0MzMDVERkRFRjlFRTg4Qzk1MjQA","timestamp":"1758280710","type":"button","button":{"payload":"Contact Sales","text":"Contact Sales"}}]},"field":"messages"}]}]}
2025-09-19 16:48:28.850 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:48:28.851 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-19 16:48:28.852 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.3029ms
2025-09-19 16:48:28.853 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-19 16:48:28.854 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:48:28.854 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggREYzQ0U4NUU5NDI2M0MzMDVERkRFRjlFRTg4Qzk1MjQA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkRCMzVENDE2RjMzMTc1RjlBAA==, Text: Contact Sales
2025-09-19 16:48:28.855 +05:30 [INF] Request finished HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 12.1156ms
2025-09-19 16:48:28.859 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkRCMzVENDE2RjMzMTc1RjlBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-19 16:48:28.863 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__origin_Id_0='c92edcd4-cb70-434c-ad56-98c681a61a28' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkRCMzVENDE2RjMzMTc1RjlBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-09-19 16:48:28.866 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
WHERE f."CTAFlowStepId" = @__stepId_0
ORDER BY f."ButtonIndex"
2025-09-19 16:48:28.868 +05:30 [INF] ✅ Mapped click by TEXT to index 3 (flow="2b73877c-3c18-4fbb-af61-1906393bb2d3", step="3bc5f00f-c6e4-4141-9c71-e26d4c61a20c")
2025-09-19 16:48:28.870 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sourceStepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @__flowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3', @__buttonIndex_2='3'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-09-19 16:48:28.873 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-09-19 16:48:28.895 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p0='6c01c0d4-4b42-4a19-b5d6-322bb5dde80b', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='3' (Nullable = true), @p3='e7565c26-97a8-48c7-a991-26ac454e0d18' (Nullable = true), @p4='918974005240', @p5=NULL, @p6='2025-09-19T11:18:28.8756769Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='c92edcd4-cb70-434c-ad56-98c681a61a28' (Nullable = true), @p9=NULL, @p10='38e556dd-e262-451b-81c6-19e27df9cae2' (Nullable = true), @p11='ff937320-31ce-4378-9f3a-2282211a2bd8' (Nullable = true), @p12='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @p13='welcome_menu_minds' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='Contact Sales'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-19 16:48:28.898 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__context_TargetStepId_0='07b5c8be-5c1f-4fce-9470-986d877aee04' (Nullable = true), @__context_FlowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__context_TargetStepId_0 AND c."CTAFlowConfigId" = @__context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-09-19 16:48:28.901 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:48:28.903 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:48:28.904 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:48:30.147 +05:30 [INF] Received HTTP response headers after 1241.8498ms - 200
2025-09-19 16:48:30.148 +05:30 [INF] End processing HTTP request after 1245.3494ms - 200
2025-09-19 16:48:30.254 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__context_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__context_BusinessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 16:48:30.259 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='64f6a4fb-57e8-407d-9c5e-86b9dbe6e1d6', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='3' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5='Missing PhoneNumberId', @p6='2025-09-19T11:18:30.2569241Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='15fd4dd9-d37c-45ee-8da3-fd90e3055fa6' (Nullable = true), @p9=NULL, @p10='8ce3706f-7def-48f8-82dd-abcfabe36579' (Nullable = true), @p11=NULL (DbType = Guid), @p12='07b5c8be-5c1f-4fce-9470-986d877aee04', @p13='contact_sales_info_v1' (Nullable = false), @p14='False', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='15fd4dd9-d37c-45ee-8da3-fd90e3055fa6', @p20='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p21='[{"i":1,"t":"Back to Main Menu","ty":"QUICK_REPLY","v":"","ns":"3bc5f00f-c6e4-4141-9c71-e26d4c61a20c"}]', @p22='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p23='07b5c8be-5c1f-4fce-9470-986d877aee04' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26='2025-09-19T11:18:30.2567884Z' (DbType = DateTime), @p27='Missing PhoneNumberId', @p28='1' (Nullable = true), @p29='False', @p30=NULL, @p31='contact_sales_info_v1' (Nullable = false), @p32=NULL, @p33=NULL, @p34='918974005240' (Nullable = false), @p35='c92edcd4-cb70-434c-ad56-98c681a61a28' (Nullable = true), @p36=NULL, @p37=NULL (DbType = Guid), @p38=NULL (DbType = DateTime), @p39='flow', @p40='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40)
RETURNING "MessageTime";
2025-09-19 16:48:33.608 +05:30 [INF] Request starting HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - application/json 637
2025-09-19 16:48:33.611 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:48:33.612 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 16:48:33.614 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQzRCNzFDQ0MwQURGOTQxMTM4OEYzRTUyMUZGMUUwOTEA","timestamp":"1758280316","type":"button","button":{"payload":"Explore Our Services","text":"Explore Our Services"}}]},"field":"messages"}]}]}
2025-09-19 16:48:33.616 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 16:48:33.616 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQzRCNzFDQ0MwQURGOTQxMTM4OEYzRTUyMUZGMUUwOTEA","timestamp":"1758280316","type":"button","button":{"payload":"Explore Our Services","text":"Explore Our Services"}}]},"field":"messages"}]}]}
2025-09-19 16:48:33.616 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:48:33.617 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-19 16:48:33.618 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.8227ms
2025-09-19 16:48:33.619 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-19 16:48:33.620 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:48:33.621 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQzRCNzFDQ0MwQURGOTQxMTM4OEYzRTUyMUZGMUUwOTEA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA==, Text: Explore Our Services
2025-09-19 16:48:33.622 +05:30 [INF] Request finished HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.5731ms
2025-09-19 16:48:33.625 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-19 16:48:33.629 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__origin_Id_0='b0f53e7e-da5c-4403-b3a9-13bdb7cbaf11' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-09-19 16:48:33.633 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sourceStepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @__flowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3', @__buttonIndex_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-09-19 16:48:33.636 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-09-19 16:48:33.647 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@p0='48b97da9-c159-46d4-90d2-b77145734b0d', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='0' (Nullable = true), @p3='dfc12ac3-4041-4980-93df-feecbda92506' (Nullable = true), @p4='918974005240', @p5=NULL, @p6='2025-09-19T11:18:33.6378704Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='b0f53e7e-da5c-4403-b3a9-13bdb7cbaf11' (Nullable = true), @p9=NULL, @p10='db51f5e7-c3be-4c46-9e7a-6781557f6505' (Nullable = true), @p11='f99016ae-cd07-466e-b802-a4dcfe4dc94f' (Nullable = true), @p12='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @p13='welcome_menu_minds' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='Explore Our Services'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-19 16:48:33.651 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__context_TargetStepId_0='806ee374-1a80-4fb2-ba55-c1ec1685c618' (Nullable = true), @__context_FlowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__context_TargetStepId_0 AND c."CTAFlowConfigId" = @__context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-09-19 16:48:33.654 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:48:33.656 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:48:33.657 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:48:34.587 +05:30 [INF] Received HTTP response headers after 928.9658ms - 200
2025-09-19 16:48:34.588 +05:30 [INF] End processing HTTP request after 932.0149ms - 200
2025-09-19 16:48:34.710 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__context_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__context_BusinessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 16:48:34.714 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='0355cc21-31ec-4985-ad07-465d8290ac3c', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5='Missing PhoneNumberId', @p6='2025-09-19T11:18:34.7122179Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='41bf3d54-ebd8-45a5-940d-39a9214e00fd' (Nullable = true), @p9=NULL, @p10='3d8d8870-4c8e-4acb-86ad-fcb6a5c0ad44' (Nullable = true), @p11=NULL (DbType = Guid), @p12='806ee374-1a80-4fb2-ba55-c1ec1685c618', @p13='services_menu_v1' (Nullable = false), @p14='False', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='41bf3d54-ebd8-45a5-940d-39a9214e00fd', @p20='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p21=NULL, @p22='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p23='806ee374-1a80-4fb2-ba55-c1ec1685c618' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26='2025-09-19T11:18:34.7119987Z' (DbType = DateTime), @p27='Missing PhoneNumberId', @p28='1' (Nullable = true), @p29='False', @p30=NULL, @p31='services_menu_v1' (Nullable = false), @p32=NULL, @p33=NULL, @p34='918974005240' (Nullable = false), @p35='b0f53e7e-da5c-4403-b3a9-13bdb7cbaf11' (Nullable = true), @p36=NULL, @p37=NULL (DbType = Guid), @p38=NULL (DbType = DateTime), @p39='flow', @p40='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40)
RETURNING "MessageTime";
2025-09-19 16:48:42.442 +05:30 [INF] Request starting HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-09-19 16:48:42.444 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:48:42.445 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 16:48:42.447 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA==","status":"delivered","timestamp":"1758280311","recipient_id":"918974005240","conversation":{"id":"947a3e571483e59bd25935356812dd68","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 16:48:42.448 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 16:48:42.449 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA==","status":"delivered","timestamp":"1758280311","recipient_id":"918974005240","conversation":{"id":"947a3e571483e59bd25935356812dd68","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 16:48:42.449 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:48:42.450 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 16:48:42.451 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.1473ms
2025-09-19 16:48:42.453 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 16:48:42.454 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:48:42.456 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='dfc12ac3-4041-4980-93df-feecbda92506'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-19 16:48:42.457 +05:30 [INF] Request finished HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 14.9045ms
2025-09-19 16:48:42.460 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='dfc12ac3-4041-4980-93df-feecbda92506', @p0='2025-09-19T11:11:51.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-19 16:48:42.462 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA== → Delivered
2025-09-19 16:48:58.681 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - null null
2025-09-19 16:48:58.683 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:48:58.684 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - 204 null null 3.1969ms
2025-09-19 16:48:58.686 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - null 0
2025-09-19 16:48:58.688 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:48:58.689 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-19 16:48:58.690 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 16:48:58.694 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='5d760969-9fb2-481a-9139-be56c85c2f3b'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-09-19 16:48:58.698 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__flowId_Value_0='2b73877c-3c18-4fbb-af61-1906393bb2d3', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", t0."Id", t0."CTAFlowConfigId", t0."PositionX", t0."PositionY", t0."RequiredSource", t0."RequiredTag", t0."StepOrder", t0."TemplateToSend", t0."TemplateType", t0."TriggerButtonText", t0."TriggerButtonType", t0."Id0", t0."ButtonIndex", t0."ButtonSubType", t0."ButtonText", t0."ButtonType", t0."ButtonValue", t0."CTAFlowStepId", t0."NextStepId"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."Id" = @__flowId_Value_0 AND c."BusinessId" = @__businessId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."CTAFlowConfigId", c0."PositionX", c0."PositionY", c0."RequiredSource", c0."RequiredTag", c0."StepOrder", c0."TemplateToSend", c0."TemplateType", c0."TriggerButtonText", c0."TriggerButtonType", f."Id" AS "Id0", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
    FROM "CTAFlowSteps" AS c0
    LEFT JOIN "FlowButtonLinks" AS f ON c0."Id" = f."CTAFlowStepId"
) AS t0 ON t."Id" = t0."CTAFlowConfigId"
ORDER BY t."Id", t0."Id"
2025-09-19 16:48:58.701 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:48:58.703 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:48:58.704 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:48:59.109 +05:30 [INF] Request starting HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-19 16:48:59.110 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:48:59.111 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 16:48:59.112 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA==","status":"sent","timestamp":"1758280309","recipient_id":"918974005240","conversation":{"id":"947a3e571483e59bd25935356812dd68","expiration_timestamp":"1758280309","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 16:48:59.113 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 16:48:59.113 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA==","status":"sent","timestamp":"1758280309","recipient_id":"918974005240","conversation":{"id":"947a3e571483e59bd25935356812dd68","expiration_timestamp":"1758280309","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 16:48:59.114 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:48:59.115 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 16:48:59.116 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.6496ms
2025-09-19 16:48:59.118 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 16:48:59.118 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:48:59.120 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='dfc12ac3-4041-4980-93df-feecbda92506'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-19 16:48:59.121 +05:30 [INF] Request finished HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 12.3159ms
2025-09-19 16:48:59.127 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='dfc12ac3-4041-4980-93df-feecbda92506', @p0='Sent'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "SendStatus" = @p0
WHERE "Id" = @p1;
2025-09-19 16:48:59.130 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTgwN0MwMTAwM0VGQTg0QTNFAA== → Sent
2025-09-19 16:49:00.028 +05:30 [INF] Received HTTP response headers after 1323.4799ms - 200
2025-09-19 16:49:00.029 +05:30 [INF] End processing HTTP request after 1326.1713ms - 200
2025-09-19 16:49:00.170 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaign_CTAFlowConfigId_Value_0='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "CTAFlowSteps" AS c
WHERE c."CTAFlowConfigId" = @__campaign_CTAFlowConfigId_Value_0
ORDER BY c."StepOrder"
LIMIT 1
2025-09-19 16:49:00.173 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 16:49:00.176 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-19 16:49:00.178 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 16:49:00.179 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 16:49:01.689 +05:30 [INF] Received HTTP response headers after 1508.6369ms - 200
2025-09-19 16:49:01.691 +05:30 [INF] End processing HTTP request after 1512.3143ms - 200
2025-09-19 16:49:01.695 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='172a8f5a-5d4d-48a4-b625-e34af6299674', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='[{"i":0,"t":"Explore Our Services","position":1,"text":"Explore Our Services","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"t":"View Our Products","position":2,"text":"View Our Products","type":"QUICK_REPLY","subType":"quick_reply"},{"i":2,"t":"Customer Support","position":3,"text":"Customer Support","type":"QUICK_REPLY","subType":"quick_reply"}]', @p3='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p4='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c' (Nullable = true), @p5='5d760969-9fb2-481a-9139-be56c85c2f3b' (Nullable = true), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T11:19:01.6921504Z' (DbType = DateTime), @p8=NULL, @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='welcome_menu_minds' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDJFRDk2QThDOUZGMzBGQkIxAA==', @p14='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDJFRDk2QThDOUZGMzBGQkIxAA==","message_status":"accepted"}]}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17=NULL, @p18='615e213f-2208-4d94-acef-c1575cf48fde' (Nullable = true), @p19='2025-09-19T11:19:01.6921506Z' (Nullable = true) (DbType = DateTime), @p20='campaign', @p21='Sent' (Nullable = false), @p22='dcdcf295-63ea-401b-9166-97f7bc369878', @p23='True', @p24=NULL, @p25='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p26='[{"i":0,"t":"Explore Our Services","position":1,"text":"Explore Our Services","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"t":"View Our Products","position":2,"text":"View Our Products","type":"QUICK_REPLY","subType":"quick_reply"},{"i":2,"t":"Customer Support","position":3,"text":"Customer Support","type":"QUICK_REPLY","subType":"quick_reply"}]', @p27='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p28='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c' (Nullable = true), @p29='5d760969-9fb2-481a-9139-be56c85c2f3b', @p30=NULL, @p31=NULL, @p32=NULL (DbType = DateTime), @p33='75df7429-287c-406a-83d8-0dfa045b0093', @p34=NULL, @p35='2025-09-19T11:19:01.6925245Z' (DbType = DateTime), @p36='system', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40=NULL, @p41=NULL, @p42='False', @p43=NULL (DbType = DateTime), @p44=NULL, @p45=NULL, @p46='Hello! Thank you for contacting MindsMiratus.

If you're a new visitor, we're happy to help you get started. If you're an existing customer, we're here to support you. Please choose from the options below.' (Nullable = false), @p47='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDJFRDk2QThDOUZGMzBGQkIxAA==', @p48='172a8f5a-5d4d-48a4-b625-e34af6299674' (Nullable = true), @p49=NULL (DbType = DateTime), @p50='17111212-d8a7-4d76-9fc2-9ed370446645', @p51='0', @p52='615e213f-2208-4d94-acef-c1575cf48fde' (Nullable = true), @p53='Sent', @p54='2025-09-19T11:19:01.6925246Z' (Nullable = true) (DbType = DateTime), @p55=NULL, @p56='welcome_menu_minds', @p57=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57);
2025-09-19 16:49:01.699 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 16:49:01.700 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 3008.41ms
2025-09-19 16:49:01.701 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-19 16:49:01.702 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - 200 null application/json; charset=utf-8 3015.4217ms
2025-09-19 16:49:02.830 +05:30 [INF] Request starting HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-19 16:49:02.832 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:49:02.833 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 16:49:02.835 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDJFRDk2QThDOUZGMzBGQkIxAA==","status":"sent","timestamp":"1758280744","recipient_id":"918974005240","conversation":{"id":"5857eb379ff179164b851958389f0de2","expiration_timestamp":"1758280744","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 16:49:02.836 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 16:49:02.837 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDJFRDk2QThDOUZGMzBGQkIxAA==","status":"sent","timestamp":"1758280744","recipient_id":"918974005240","conversation":{"id":"5857eb379ff179164b851958389f0de2","expiration_timestamp":"1758280744","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 16:49:02.837 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:49:02.838 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 16:49:02.839 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.066ms
2025-09-19 16:49:02.842 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDJFRDk2QThDOUZGMzBGQkIxAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 16:49:02.842 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:49:02.845 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='dcdcf295-63ea-401b-9166-97f7bc369878'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-19 16:49:02.846 +05:30 [INF] Request finished HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 15.7507ms
2025-09-19 16:49:02.848 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDJFRDk2QThDOUZGMzBGQkIxAA== (legacy)
2025-09-19 16:49:03.253 +05:30 [INF] Request starting HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-09-19 16:49:03.255 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:49:03.256 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 16:49:03.258 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDJFRDk2QThDOUZGMzBGQkIxAA==","status":"read","timestamp":"1758280745","recipient_id":"918974005240","conversation":{"id":"5857eb379ff179164b851958389f0de2","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 16:49:03.259 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 16:49:03.259 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDJFRDk2QThDOUZGMzBGQkIxAA==","status":"read","timestamp":"1758280745","recipient_id":"918974005240","conversation":{"id":"5857eb379ff179164b851958389f0de2","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 16:49:03.260 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:49:03.261 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 16:49:03.262 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.2171ms
2025-09-19 16:49:03.265 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDJFRDk2QThDOUZGMzBGQkIxAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 16:49:03.265 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:49:03.268 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='dcdcf295-63ea-401b-9166-97f7bc369878'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-19 16:49:03.268 +05:30 [INF] Request finished HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 15.1847ms
2025-09-19 16:49:03.271 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='dcdcf295-63ea-401b-9166-97f7bc369878', @p0='2025-09-19T11:19:05.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-19 16:49:03.275 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDJFRDk2QThDOUZGMzBGQkIxAA== → Read
2025-09-19 16:49:05.935 +05:30 [INF] Request starting HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - application/json 637
2025-09-19 16:49:05.937 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:49:05.938 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 16:49:05.941 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDJFRDk2QThDOUZGMzBGQkIxAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQkZBNENFQzIzRjU1NzhFQTMwNDcyNTM0OERFMTM3MUUA","timestamp":"1758280747","type":"button","button":{"payload":"Explore Our Services","text":"Explore Our Services"}}]},"field":"messages"}]}]}
2025-09-19 16:49:05.942 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 16:49:05.942 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDJFRDk2QThDOUZGMzBGQkIxAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQkZBNENFQzIzRjU1NzhFQTMwNDcyNTM0OERFMTM3MUUA","timestamp":"1758280747","type":"button","button":{"payload":"Explore Our Services","text":"Explore Our Services"}}]},"field":"messages"}]}]}
2025-09-19 16:49:05.943 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:49:05.944 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-19 16:49:05.945 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.4364ms
2025-09-19 16:49:05.945 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-19 16:49:05.946 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:49:05.947 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQkZBNENFQzIzRjU1NzhFQTMwNDcyNTM0OERFMTM3MUUA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDJFRDk2QThDOUZGMzBGQkIxAA==, Text: Explore Our Services
2025-09-19 16:49:05.948 +05:30 [INF] Request finished HTTP/1.1 POST http://706564038bc0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 12.518ms
2025-09-19 16:49:05.950 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDJFRDk2QThDOUZGMzBGQkIxAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-19 16:49:05.973 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@__origin_Id_0='172a8f5a-5d4d-48a4-b625-e34af6299674' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDJFRDk2QThDOUZGMzBGQkIxAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-09-19 16:49:05.977 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sourceStepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @__flowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3', @__buttonIndex_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-09-19 16:49:05.981 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-09-19 16:49:05.984 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='4f9d8ac5-8b0e-4134-a649-d02464132008', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='0' (Nullable = true), @p3='dcdcf295-63ea-401b-9166-97f7bc369878' (Nullable = true), @p4='918974005240', @p5=NULL, @p6='2025-09-19T11:19:05.9830064Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='172a8f5a-5d4d-48a4-b625-e34af6299674' (Nullable = true), @p9=NULL, @p10='6ec7890a-68de-46e0-8e39-f8c1e9a754d3' (Nullable = true), @p11='615e213f-2208-4d94-acef-c1575cf48fde' (Nullable = true), @p12='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @p13='welcome_menu_minds' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='Explore Our Services'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-19 16:49:05.987 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__context_TargetStepId_0='806ee374-1a80-4fb2-ba55-c1ec1685c618' (Nullable = true), @__context_FlowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__context_TargetStepId_0 AND c."CTAFlowConfigId" = @__context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-09-19 16:49:05.990 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:49:05.992 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:49:05.993 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:49:06.848 +05:30 [INF] Received HTTP response headers after 853.6257ms - 200
2025-09-19 16:49:06.850 +05:30 [INF] End processing HTTP request after 857.2334ms - 200
2025-09-19 16:49:07.010 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__context_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__context_BusinessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 16:49:07.015 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='d8bad80d-18d9-4714-aabb-a0a03b74bfaf', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5='Missing PhoneNumberId', @p6='2025-09-19T11:19:07.0129242Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='c3d622b4-e0ce-4a6a-8bae-6ad544b1722d' (Nullable = true), @p9=NULL, @p10='5fa7351a-505a-40f6-bc59-bb64106360eb' (Nullable = true), @p11=NULL (DbType = Guid), @p12='806ee374-1a80-4fb2-ba55-c1ec1685c618', @p13='services_menu_v1' (Nullable = false), @p14='False', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='c3d622b4-e0ce-4a6a-8bae-6ad544b1722d', @p20='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p21=NULL, @p22='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p23='806ee374-1a80-4fb2-ba55-c1ec1685c618' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26='2025-09-19T11:19:07.0127266Z' (DbType = DateTime), @p27='Missing PhoneNumberId', @p28='1' (Nullable = true), @p29='False', @p30=NULL, @p31='services_menu_v1' (Nullable = false), @p32=NULL, @p33=NULL, @p34='918974005240' (Nullable = false), @p35='172a8f5a-5d4d-48a4-b625-e34af6299674' (Nullable = true), @p36=NULL, @p37=NULL (DbType = Guid), @p38=NULL (DbType = DateTime), @p39='flow', @p40='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40)
RETURNING "MessageTime";
2025-09-19 16:49:54.298 +05:30 [INF] Request starting HTTP/1.1 GET http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp?hub.mode=subscribe&hub.challenge=1311680543&hub.verify_token=xbytechat-secret-token - null null
2025-09-19 16:49:54.300 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api)'
2025-09-19 16:49:54.301 +05:30 [INF] Route matched with {action = "VerifyWebhook", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult VerifyWebhook(System.String, System.String, System.String) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 16:49:54.303 +05:30 [INF] ✅ WhatsApp webhook verified successfully.
2025-09-19 16:49:54.304 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-09-19 16:49:54.305 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api) in 2.8474ms
2025-09-19 16:49:54.306 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api)'
2025-09-19 16:49:54.307 +05:30 [INF] Request finished HTTP/1.1 GET http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp?hub.mode=subscribe&hub.challenge=1311680543&hub.verify_token=xbytechat-secret-token - 200 null text/plain; charset=utf-8 9.2136ms
2025-09-19 16:50:03.638 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 631
2025-09-19 16:50:03.641 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:50:03.642 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 16:50:03.644 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDJFRDk2QThDOUZGMzBGQkIxAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQkZDODhGMzI2NkVCNDhFREU2N0YyNzg4Rjc3RDlBNDEA","timestamp":"1758280805","type":"button","button":{"payload":"View Our Products","text":"View Our Products"}}]},"field":"messages"}]}]}
2025-09-19 16:50:03.645 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 16:50:03.646 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDJFRDk2QThDOUZGMzBGQkIxAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQkZDODhGMzI2NkVCNDhFREU2N0YyNzg4Rjc3RDlBNDEA","timestamp":"1758280805","type":"button","button":{"payload":"View Our Products","text":"View Our Products"}}]},"field":"messages"}]}]}
2025-09-19 16:50:03.646 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:50:03.647 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-19 16:50:03.648 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.5294ms
2025-09-19 16:50:03.648 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-19 16:50:03.650 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:50:03.650 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQkZDODhGMzI2NkVCNDhFREU2N0YyNzg4Rjc3RDlBNDEA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDJFRDk2QThDOUZGMzBGQkIxAA==, Text: View Our Products
2025-09-19 16:50:03.651 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.2508ms
2025-09-19 16:50:03.706 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDJFRDk2QThDOUZGMzBGQkIxAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-19 16:50:03.710 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__origin_Id_0='172a8f5a-5d4d-48a4-b625-e34af6299674' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDJFRDk2QThDOUZGMzBGQkIxAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-09-19 16:50:03.713 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sourceStepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @__flowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3', @__buttonIndex_2='1'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-09-19 16:50:03.715 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-09-19 16:50:03.719 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='89cc7ff3-f794-41f0-a674-a32c1b6682f5', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='1' (Nullable = true), @p3='dcdcf295-63ea-401b-9166-97f7bc369878' (Nullable = true), @p4='918974005240', @p5=NULL, @p6='2025-09-19T11:20:03.7176184Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='172a8f5a-5d4d-48a4-b625-e34af6299674' (Nullable = true), @p9=NULL, @p10='9e31b0e6-c28e-472c-bb4f-69425e6319ae' (Nullable = true), @p11='615e213f-2208-4d94-acef-c1575cf48fde' (Nullable = true), @p12='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @p13='welcome_menu_minds' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='View Our Products'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-19 16:50:03.721 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__context_TargetStepId_0='62ee00c5-2a9a-4077-a25e-f8288347a910' (Nullable = true), @__context_FlowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__context_TargetStepId_0 AND c."CTAFlowConfigId" = @__context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-09-19 16:50:03.725 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:50:03.726 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:50:03.727 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:50:04.513 +05:30 [INF] Received HTTP response headers after 785.6508ms - 200
2025-09-19 16:50:04.515 +05:30 [INF] End processing HTTP request after 788.9156ms - 200
2025-09-19 16:50:04.593 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__context_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__context_BusinessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 16:50:04.598 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='216eb726-636d-4fe1-a74b-36cade454a62', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='1' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5='Missing PhoneNumberId', @p6='2025-09-19T11:20:04.5961148Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='33ef3b2c-c4b6-4fdd-aaa2-261ccb02a185' (Nullable = true), @p9=NULL, @p10='07d08488-17f3-4467-a44e-71858f239fba' (Nullable = true), @p11=NULL (DbType = Guid), @p12='62ee00c5-2a9a-4077-a25e-f8288347a910', @p13='products_info_v1' (Nullable = false), @p14='False', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='33ef3b2c-c4b6-4fdd-aaa2-261ccb02a185', @p20='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p21='[{"i":1,"t":"Back to Main Menu","ty":"QUICK_REPLY","v":"","ns":"3bc5f00f-c6e4-4141-9c71-e26d4c61a20c"}]', @p22='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p23='62ee00c5-2a9a-4077-a25e-f8288347a910' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26='2025-09-19T11:20:04.5959635Z' (DbType = DateTime), @p27='Missing PhoneNumberId', @p28='1' (Nullable = true), @p29='False', @p30=NULL, @p31='products_info_v1' (Nullable = false), @p32=NULL, @p33=NULL, @p34='918974005240' (Nullable = false), @p35='172a8f5a-5d4d-48a4-b625-e34af6299674' (Nullable = true), @p36=NULL, @p37=NULL (DbType = Guid), @p38=NULL (DbType = DateTime), @p39='flow', @p40='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40)
RETURNING "MessageTime";
2025-09-19 16:50:31.146 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 629
2025-09-19 16:50:31.148 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:50:31.148 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 16:50:31.150 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDJFRDk2QThDOUZGMzBGQkIxAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMzQwNjE3QTJDNTgxMkI5OTQ3RjRENkVENDFGOTQ0RkMA","timestamp":"1758280833","type":"button","button":{"payload":"Customer Support","text":"Customer Support"}}]},"field":"messages"}]}]}
2025-09-19 16:50:31.151 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 16:50:31.151 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDJFRDk2QThDOUZGMzBGQkIxAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMzQwNjE3QTJDNTgxMkI5OTQ3RjRENkVENDFGOTQ0RkMA","timestamp":"1758280833","type":"button","button":{"payload":"Customer Support","text":"Customer Support"}}]},"field":"messages"}]}]}
2025-09-19 16:50:31.152 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:50:31.152 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-19 16:50:31.153 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.5485ms
2025-09-19 16:50:31.154 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-19 16:50:31.158 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:50:35.052 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 3906.2326ms
2025-09-19 16:50:47.314 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMzQwNjE3QTJDNTgxMkI5OTQ3RjRENkVENDFGOTQ0RkMA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDJFRDk2QThDOUZGMzBGQkIxAA==, Text: Customer Support
2025-09-19 16:50:48.501 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDJFRDk2QThDOUZGMzBGQkIxAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-19 16:50:56.199 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__origin_Id_0='172a8f5a-5d4d-48a4-b625-e34af6299674' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDJFRDk2QThDOUZGMzBGQkIxAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-09-19 16:51:11.005 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sourceStepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @__flowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3', @__buttonIndex_2='2'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-09-19 16:51:12.802 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-09-19 16:51:16.338 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p0='8f9f9592-d709-47be-8d94-89278558e470', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='2' (Nullable = true), @p3='dcdcf295-63ea-401b-9166-97f7bc369878' (Nullable = true), @p4='918974005240', @p5=NULL, @p6='2025-09-19T11:21:14.9669274Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='172a8f5a-5d4d-48a4-b625-e34af6299674' (Nullable = true), @p9=NULL, @p10='754a7615-ad23-4d5c-9971-e97e60f8a4b3' (Nullable = true), @p11='615e213f-2208-4d94-acef-c1575cf48fde' (Nullable = true), @p12='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @p13='welcome_menu_minds' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='Customer Support'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-19 16:51:21.759 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__context_TargetStepId_0='97457a39-996c-4acf-a357-c5038b2dd21c' (Nullable = true), @__context_FlowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__context_TargetStepId_0 AND c."CTAFlowConfigId" = @__context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-09-19 16:51:21.773 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:51:21.775 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:51:21.775 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:51:22.910 +05:30 [INF] Received HTTP response headers after 1134.0713ms - 200
2025-09-19 16:51:22.912 +05:30 [INF] End processing HTTP request after 1137.3135ms - 200
2025-09-19 16:51:23.054 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__context_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__context_BusinessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 16:51:23.059 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='35a39cbd-231a-42ad-b898-07ee7f4b4478', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='2' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5='Missing PhoneNumberId', @p6='2025-09-19T11:21:23.0568120Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='c342d7cc-80c1-4265-82a8-a0753e281a11' (Nullable = true), @p9=NULL, @p10='19d06050-9ff4-43cf-82b3-e3785afe61f3' (Nullable = true), @p11=NULL (DbType = Guid), @p12='97457a39-996c-4acf-a357-c5038b2dd21c', @p13='support_project_status_v1' (Nullable = false), @p14='False', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='c342d7cc-80c1-4265-82a8-a0753e281a11', @p20='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p21=NULL, @p22='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p23='97457a39-996c-4acf-a357-c5038b2dd21c' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26='2025-09-19T11:21:23.0566292Z' (DbType = DateTime), @p27='Missing PhoneNumberId', @p28='1' (Nullable = true), @p29='False', @p30=NULL, @p31='support_project_status_v1' (Nullable = false), @p32=NULL, @p33=NULL, @p34='918974005240' (Nullable = false), @p35='172a8f5a-5d4d-48a4-b625-e34af6299674' (Nullable = true), @p36=NULL, @p37=NULL (DbType = Guid), @p38=NULL (DbType = DateTime), @p39='flow', @p40='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40)
RETURNING "MessageTime";
2025-09-19 16:52:24.296 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 623
2025-09-19 16:52:24.298 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:52:24.299 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 16:52:24.301 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDJFRDk2QThDOUZGMzBGQkIxAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggNDg4Q0Y1NERFOTRCNUM5RTA3RUM5MkM5OTQxODg1RDgA","timestamp":"1758280946","type":"button","button":{"payload":"Contact Sales","text":"Contact Sales"}}]},"field":"messages"}]}]}
2025-09-19 16:52:24.302 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 16:52:24.303 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDJFRDk2QThDOUZGMzBGQkIxAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggNDg4Q0Y1NERFOTRCNUM5RTA3RUM5MkM5OTQxODg1RDgA","timestamp":"1758280946","type":"button","button":{"payload":"Contact Sales","text":"Contact Sales"}}]},"field":"messages"}]}]}
2025-09-19 16:52:24.303 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:52:24.304 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-19 16:52:24.305 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.1373ms
2025-09-19 16:52:24.305 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-19 16:52:24.306 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:52:27.604 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 3308.1408ms
2025-09-19 16:52:36.869 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggNDg4Q0Y1NERFOTRCNUM5RTA3RUM5MkM5OTQxODg1RDgA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDJFRDk2QThDOUZGMzBGQkIxAA==, Text: Contact Sales
2025-09-19 16:52:39.100 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDJFRDk2QThDOUZGMzBGQkIxAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-19 16:52:44.418 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__origin_Id_0='172a8f5a-5d4d-48a4-b625-e34af6299674' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDJFRDk2QThDOUZGMzBGQkIxAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-09-19 16:52:55.305 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
WHERE f."CTAFlowStepId" = @__stepId_0
ORDER BY f."ButtonIndex"
2025-09-19 16:53:03.112 +05:30 [INF] ✅ Mapped click by TEXT to index 3 (flow="2b73877c-3c18-4fbb-af61-1906393bb2d3", step="3bc5f00f-c6e4-4141-9c71-e26d4c61a20c")
2025-09-19 16:53:07.408 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sourceStepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @__flowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3', @__buttonIndex_2='3'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-09-19 16:53:10.295 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-09-19 16:53:14.100 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p0='5050d0ef-a7bc-415e-ac01-009bf80109a9', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='3' (Nullable = true), @p3='dcdcf295-63ea-401b-9166-97f7bc369878' (Nullable = true), @p4='918974005240', @p5=NULL, @p6='2025-09-19T11:23:11.9070692Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='172a8f5a-5d4d-48a4-b625-e34af6299674' (Nullable = true), @p9=NULL, @p10='eda3e780-b45a-42c5-97b3-c24df9b33a17' (Nullable = true), @p11='615e213f-2208-4d94-acef-c1575cf48fde' (Nullable = true), @p12='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @p13='welcome_menu_minds' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='Contact Sales'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-19 16:53:26.783 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__context_TargetStepId_0='07b5c8be-5c1f-4fce-9470-986d877aee04' (Nullable = true), @__context_FlowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__context_TargetStepId_0 AND c."CTAFlowConfigId" = @__context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-09-19 16:53:33.950 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:53:33.963 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:53:33.963 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:53:35.552 +05:30 [INF] Received HTTP response headers after 1587.3383ms - 200
2025-09-19 16:53:35.553 +05:30 [INF] End processing HTTP request after 1590.3866ms - 200
2025-09-19 16:53:46.020 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__context_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__context_BusinessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 16:54:47.960 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='3e9346cb-a1b2-4ceb-905c-64ad7b25f16d', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='3' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5='Missing PhoneNumberId', @p6='2025-09-19T11:24:46.5570459Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='08834e7c-7d91-414d-acc8-6ed1ed3df27e' (Nullable = true), @p9=NULL, @p10='9bfa8620-fac7-4d76-8acc-787834a382ea' (Nullable = true), @p11=NULL (DbType = Guid), @p12='07b5c8be-5c1f-4fce-9470-986d877aee04', @p13='contact_sales_info_v1' (Nullable = false), @p14='False', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='08834e7c-7d91-414d-acc8-6ed1ed3df27e', @p20='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p21='[{"i":1,"t":"Back to Main Menu","ty":"QUICK_REPLY","v":"","ns":"3bc5f00f-c6e4-4141-9c71-e26d4c61a20c"}]', @p22='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p23='07b5c8be-5c1f-4fce-9470-986d877aee04' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26='2025-09-19T11:24:44.8402710Z' (DbType = DateTime), @p27='Missing PhoneNumberId', @p28='1' (Nullable = true), @p29='False', @p30=NULL, @p31='contact_sales_info_v1' (Nullable = false), @p32=NULL, @p33=NULL, @p34='918974005240' (Nullable = false), @p35='172a8f5a-5d4d-48a4-b625-e34af6299674' (Nullable = true), @p36=NULL, @p37=NULL (DbType = Guid), @p38=NULL (DbType = DateTime), @p39='flow', @p40='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40)
RETURNING "MessageTime";
2025-09-19 16:55:49.618 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - null null
2025-09-19 16:55:49.626 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:55:49.627 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - 204 null null 8.711ms
2025-09-19 16:55:49.630 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - null 0
2025-09-19 16:55:49.631 +05:30 [INF] CORS policy execution successful.
2025-09-19 16:55:49.632 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-19 16:55:49.633 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 16:55:49.639 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='5d760969-9fb2-481a-9139-be56c85c2f3b'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-09-19 16:55:49.643 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__flowId_Value_0='2b73877c-3c18-4fbb-af61-1906393bb2d3', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", t0."Id", t0."CTAFlowConfigId", t0."PositionX", t0."PositionY", t0."RequiredSource", t0."RequiredTag", t0."StepOrder", t0."TemplateToSend", t0."TemplateType", t0."TriggerButtonText", t0."TriggerButtonType", t0."Id0", t0."ButtonIndex", t0."ButtonSubType", t0."ButtonText", t0."ButtonType", t0."ButtonValue", t0."CTAFlowStepId", t0."NextStepId"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."Id" = @__flowId_Value_0 AND c."BusinessId" = @__businessId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."CTAFlowConfigId", c0."PositionX", c0."PositionY", c0."RequiredSource", c0."RequiredTag", c0."StepOrder", c0."TemplateToSend", c0."TemplateType", c0."TriggerButtonText", c0."TriggerButtonType", f."Id" AS "Id0", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
    FROM "CTAFlowSteps" AS c0
    LEFT JOIN "FlowButtonLinks" AS f ON c0."Id" = f."CTAFlowStepId"
) AS t0 ON t."Id" = t0."CTAFlowConfigId"
ORDER BY t."Id", t0."Id"
2025-09-19 16:55:49.646 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:55:49.648 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:55:49.649 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:55:50.921 +05:30 [INF] Received HTTP response headers after 1270.6557ms - 200
2025-09-19 16:55:50.922 +05:30 [INF] End processing HTTP request after 1273.9703ms - 200
2025-09-19 16:55:51.013 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaign_CTAFlowConfigId_Value_0='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "CTAFlowSteps" AS c
WHERE c."CTAFlowConfigId" = @__campaign_CTAFlowConfigId_Value_0
ORDER BY c."StepOrder"
LIMIT 1
2025-09-19 16:55:51.017 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 16:55:51.021 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-19 16:55:51.027 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 16:55:51.028 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 16:55:52.373 +05:30 [INF] Received HTTP response headers after 1344.7028ms - 200
2025-09-19 16:55:52.375 +05:30 [INF] End processing HTTP request after 1348.3802ms - 200
2025-09-19 16:55:52.380 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='8f45c972-f190-4023-8fea-49945712f7a9', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='[{"i":0,"t":"Explore Our Services","position":1,"text":"Explore Our Services","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"t":"View Our Products","position":2,"text":"View Our Products","type":"QUICK_REPLY","subType":"quick_reply"},{"i":2,"t":"Customer Support","position":3,"text":"Customer Support","type":"QUICK_REPLY","subType":"quick_reply"}]', @p3='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p4='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c' (Nullable = true), @p5='5d760969-9fb2-481a-9139-be56c85c2f3b' (Nullable = true), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T11:25:52.3769845Z' (DbType = DateTime), @p8=NULL, @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='welcome_menu_minds' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE5RDYxNDA0MEJBMDVDRjA4AA==', @p14='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE5RDYxNDA0MEJBMDVDRjA4AA==","message_status":"accepted"}]}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17=NULL, @p18='28952482-6af4-400b-936a-0a617482d085' (Nullable = true), @p19='2025-09-19T11:25:52.3769850Z' (Nullable = true) (DbType = DateTime), @p20='campaign', @p21='Sent' (Nullable = false), @p22='1b4f20c0-dd4d-4d19-809f-8f6c913a6441', @p23='True', @p24=NULL, @p25='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p26='[{"i":0,"t":"Explore Our Services","position":1,"text":"Explore Our Services","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"t":"View Our Products","position":2,"text":"View Our Products","type":"QUICK_REPLY","subType":"quick_reply"},{"i":2,"t":"Customer Support","position":3,"text":"Customer Support","type":"QUICK_REPLY","subType":"quick_reply"}]', @p27='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p28='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c' (Nullable = true), @p29='5d760969-9fb2-481a-9139-be56c85c2f3b', @p30=NULL, @p31=NULL, @p32=NULL (DbType = DateTime), @p33='75df7429-287c-406a-83d8-0dfa045b0093', @p34=NULL, @p35='2025-09-19T11:25:52.3771465Z' (DbType = DateTime), @p36='system', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40=NULL, @p41=NULL, @p42='False', @p43=NULL (DbType = DateTime), @p44=NULL, @p45=NULL, @p46='Hello! Thank you for contacting MindsMiratus.

If you're a new visitor, we're happy to help you get started. If you're an existing customer, we're here to support you. Please choose from the options below.' (Nullable = false), @p47='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE5RDYxNDA0MEJBMDVDRjA4AA==', @p48='8f45c972-f190-4023-8fea-49945712f7a9' (Nullable = true), @p49=NULL (DbType = DateTime), @p50='17111212-d8a7-4d76-9fc2-9ed370446645', @p51='0', @p52='28952482-6af4-400b-936a-0a617482d085' (Nullable = true), @p53='Sent', @p54='2025-09-19T11:25:52.3771465Z' (Nullable = true) (DbType = DateTime), @p55=NULL, @p56='welcome_menu_minds', @p57=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57);
2025-09-19 16:55:52.402 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 16:55:52.403 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 2768.8297ms
2025-09-19 16:55:52.404 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-19 16:55:52.405 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - 200 null application/json; charset=utf-8 2775.7037ms
2025-09-19 16:55:53.621 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-19 16:55:53.624 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:55:53.624 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 16:55:53.626 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE5RDYxNDA0MEJBMDVDRjA4AA==","status":"sent","timestamp":"1758281155","recipient_id":"918974005240","conversation":{"id":"5389d675e24cca4b533f3389e6cee893","expiration_timestamp":"1758281155","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 16:55:53.628 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 16:55:53.628 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE5RDYxNDA0MEJBMDVDRjA4AA==","status":"sent","timestamp":"1758281155","recipient_id":"918974005240","conversation":{"id":"5389d675e24cca4b533f3389e6cee893","expiration_timestamp":"1758281155","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 16:55:53.628 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:55:53.632 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-19 16:55:53.632 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.7319ms
2025-09-19 16:55:53.635 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:55:53.637 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-19 16:55:53.637 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 16.4125ms
2025-09-19 16:55:53.639 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-19 16:55:53.643 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 16:55:53.646 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE5RDYxNDA0MEJBMDVDRjA4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 16:55:53.653 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='1b4f20c0-dd4d-4d19-809f-8f6c913a6441'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-19 16:55:53.655 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE5RDYxNDA0MEJBMDVDRjA4AA== (legacy)
2025-09-19 16:55:54.279 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-09-19 16:55:54.282 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:55:54.283 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 16:55:54.285 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE5RDYxNDA0MEJBMDVDRjA4AA==","status":"delivered","timestamp":"1758281156","recipient_id":"918974005240","conversation":{"id":"5389d675e24cca4b533f3389e6cee893","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 16:55:54.287 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 16:55:54.287 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE5RDYxNDA0MEJBMDVDRjA4AA==","status":"delivered","timestamp":"1758281156","recipient_id":"918974005240","conversation":{"id":"5389d675e24cca4b533f3389e6cee893","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 16:55:54.288 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:55:54.289 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 16:55:54.290 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.1168ms
2025-09-19 16:55:54.293 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE5RDYxNDA0MEJBMDVDRjA4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 16:55:54.293 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:55:54.297 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='1b4f20c0-dd4d-4d19-809f-8f6c913a6441'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-19 16:55:54.297 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 17.9158ms
2025-09-19 16:55:54.301 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='1b4f20c0-dd4d-4d19-809f-8f6c913a6441', @p0='2025-09-19T11:25:56.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-19 16:55:54.304 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE5RDYxNDA0MEJBMDVDRjA4AA== → Delivered
2025-09-19 16:55:57.252 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-09-19 16:55:57.254 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:55:57.255 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 16:55:57.257 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE5RDYxNDA0MEJBMDVDRjA4AA==","status":"read","timestamp":"1758281159","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-09-19 16:55:57.258 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 16:55:57.258 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE5RDYxNDA0MEJBMDVDRjA4AA==","status":"read","timestamp":"1758281159","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-09-19 16:55:57.259 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:55:57.260 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 16:55:57.261 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.2769ms
2025-09-19 16:55:57.264 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE5RDYxNDA0MEJBMDVDRjA4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 16:55:57.265 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:55:57.268 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='1b4f20c0-dd4d-4d19-809f-8f6c913a6441'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-19 16:55:57.268 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 16.5878ms
2025-09-19 16:55:57.271 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='1b4f20c0-dd4d-4d19-809f-8f6c913a6441', @p0='2025-09-19T11:25:59.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-19 16:55:57.275 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE5RDYxNDA0MEJBMDVDRjA4AA== → Read
2025-09-19 16:55:58.507 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 637
2025-09-19 16:55:58.510 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:55:58.511 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 16:55:58.514 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE5RDYxNDA0MEJBMDVDRjA4AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggN0E3REE1RDNEMDU4MzE2NTE0MjNCNkYxRkM1RUE5MkIA","timestamp":"1758281160","type":"button","button":{"payload":"Explore Our Services","text":"Explore Our Services"}}]},"field":"messages"}]}]}
2025-09-19 16:55:58.516 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 16:55:58.516 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE5RDYxNDA0MEJBMDVDRjA4AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggN0E3REE1RDNEMDU4MzE2NTE0MjNCNkYxRkM1RUE5MkIA","timestamp":"1758281160","type":"button","button":{"payload":"Explore Our Services","text":"Explore Our Services"}}]},"field":"messages"}]}]}
2025-09-19 16:55:58.517 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 16:55:58.518 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-19 16:55:58.519 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.3288ms
2025-09-19 16:55:58.520 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-19 16:55:58.521 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 16:56:00.213 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggN0E3REE1RDNEMDU4MzE2NTE0MjNCNkYxRkM1RUE5MkIA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE5RDYxNDA0MEJBMDVDRjA4AA==, Text: Explore Our Services
2025-09-19 16:56:00.213 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 1706.2291ms
2025-09-19 16:56:00.217 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE5RDYxNDA0MEJBMDVDRjA4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-19 16:56:00.221 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__origin_Id_0='8f45c972-f190-4023-8fea-49945712f7a9' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE5RDYxNDA0MEJBMDVDRjA4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-09-19 16:56:00.224 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sourceStepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @__flowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3', @__buttonIndex_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-09-19 16:56:00.227 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-09-19 16:56:00.230 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='2f0084ed-d538-4f3a-9bad-874e30d16d27', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='0' (Nullable = true), @p3='1b4f20c0-dd4d-4d19-809f-8f6c913a6441' (Nullable = true), @p4='918974005240', @p5=NULL, @p6='2025-09-19T11:26:00.2291022Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='8f45c972-f190-4023-8fea-49945712f7a9' (Nullable = true), @p9=NULL, @p10='a7390c40-2c05-4fd7-a436-d4fa5914028d' (Nullable = true), @p11='28952482-6af4-400b-936a-0a617482d085' (Nullable = true), @p12='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @p13='welcome_menu_minds' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='Explore Our Services'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-19 16:56:00.951 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__context_TargetStepId_0='806ee374-1a80-4fb2-ba55-c1ec1685c618' (Nullable = true), @__context_FlowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__context_TargetStepId_0 AND c."CTAFlowConfigId" = @__context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-09-19 16:56:00.954 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 16:56:00.956 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:56:00.957 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 16:56:02.052 +05:30 [INF] Received HTTP response headers after 1094.047ms - 200
2025-09-19 16:56:02.053 +05:30 [INF] End processing HTTP request after 1097.0293ms - 200
2025-09-19 16:56:02.185 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__context_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__context_BusinessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 16:56:02.189 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='c1c1b028-78af-4611-9b7d-d6c3354ed426', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5='Missing PhoneNumberId', @p6='2025-09-19T11:26:02.1872050Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='8b754b91-0467-4524-8832-d4e34bd81b5b' (Nullable = true), @p9=NULL, @p10='b5c52fd6-91c9-45ee-bdbb-e06cf84e7789' (Nullable = true), @p11=NULL (DbType = Guid), @p12='806ee374-1a80-4fb2-ba55-c1ec1685c618', @p13='services_menu_v1' (Nullable = false), @p14='False', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='8b754b91-0467-4524-8832-d4e34bd81b5b', @p20='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p21=NULL, @p22='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p23='806ee374-1a80-4fb2-ba55-c1ec1685c618' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26='2025-09-19T11:26:02.1870943Z' (DbType = DateTime), @p27='Missing PhoneNumberId', @p28='1' (Nullable = true), @p29='False', @p30=NULL, @p31='services_menu_v1' (Nullable = false), @p32=NULL, @p33=NULL, @p34='918974005240' (Nullable = false), @p35='8f45c972-f190-4023-8fea-49945712f7a9' (Nullable = true), @p36=NULL, @p37=NULL (DbType = Guid), @p38=NULL (DbType = DateTime), @p39='flow', @p40='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40)
RETURNING "MessageTime";
2025-09-19 17:15:04.004 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 17:15:04.039 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 17:15:04.052 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 17:15:04.765 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 17:15:05.267 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 17:15:05.291 +05:30 [INF] ClickLogWorker started
2025-09-19 17:15:05.487 +05:30 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-19 17:15:05.505 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 17:15:05.506 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 17:15:05.508 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 17:15:05.509 +05:30 [INF] Hosting environment: Development
2025-09-19 17:15:05.511 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 17:15:05.512 +05:30 [INF] Executed DbCommand (71ms) [Parameters=[@__cutoff_0='2025-09-12T11:45:04.1338406Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-19 17:15:06.326 +05:30 [INF] ClickLogWorker stopped
2025-09-19 17:15:07.656 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 17:15:07.838 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 188.2778ms
2025-09-19 17:15:07.870 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 17:15:07.880 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 9.6704ms
2025-09-19 17:15:07.956 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 17:15:08.009 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 52.1865ms
2025-09-19 17:15:08.190 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 17:15:08.442 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 252.8907ms
2025-09-19 17:15:18.351 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 631
2025-09-19 17:15:18.356 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 17:15:18.441 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:15:18.451 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:15:18.465 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE5RDYxNDA0MEJBMDVDRjA4AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMDlGNzg2Mzk3RDc0RURDNTI5QkUwODlEQzYyQzVBOUEA","timestamp":"1758282320","type":"button","button":{"payload":"View Our Products","text":"View Our Products"}}]},"field":"messages"}]}]}
2025-09-19 17:15:18.468 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:15:18.475 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:15:18.484 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 28.8374ms
2025-09-19 17:15:18.486 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:15:18.492 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 141.0681ms
2025-09-19 17:15:18.563 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE5RDYxNDA0MEJBMDVDRjA4AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMDlGNzg2Mzk3RDc0RURDNTI5QkUwODlEQzYyQzVBOUEA","timestamp":"1758282320","type":"button","button":{"payload":"View Our Products","text":"View Our Products"}}]},"field":"messages"}]}]}
2025-09-19 17:15:18.565 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-19 17:15:18.573 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-19 17:15:53.707 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMDlGNzg2Mzk3RDc0RURDNTI5QkUwODlEQzYyQzVBOUEA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE5RDYxNDA0MEJBMDVDRjA4AA==, Text: View Our Products
2025-09-19 17:15:55.669 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE5RDYxNDA0MEJBMDVDRjA4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-19 17:16:05.318 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__origin_Id_0='8f45c972-f190-4023-8fea-49945712f7a9' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE5RDYxNDA0MEJBMDVDRjA4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-09-19 17:16:20.092 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__sourceStepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @__flowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3', @__buttonIndex_2='1'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-09-19 17:16:21.908 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-09-19 17:16:25.622 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='fddce550-d287-4f5c-9465-c67480e48f49', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='1' (Nullable = true), @p3='1b4f20c0-dd4d-4d19-809f-8f6c913a6441' (Nullable = true), @p4='918974005240', @p5=NULL, @p6='2025-09-19T11:46:23.8039235Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='8f45c972-f190-4023-8fea-49945712f7a9' (Nullable = true), @p9=NULL, @p10='7dcf34db-1a72-4328-b5d4-22baf4125eef' (Nullable = true), @p11='28952482-6af4-400b-936a-0a617482d085' (Nullable = true), @p12='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @p13='welcome_menu_minds' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='View Our Products'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-19 17:16:35.247 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__context_TargetStepId_0='62ee00c5-2a9a-4077-a25e-f8288347a910' (Nullable = true), @__context_FlowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__context_TargetStepId_0 AND c."CTAFlowConfigId" = @__context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-09-19 17:16:40.032 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 17:16:40.069 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:16:40.072 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:16:41.329 +05:30 [INF] Received HTTP response headers after 1254.3466ms - 200
2025-09-19 17:16:41.330 +05:30 [INF] End processing HTTP request after 1261.9995ms - 200
2025-09-19 17:16:45.600 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__context_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__context_BusinessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 17:17:16.940 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='9a4d8cd5-b27f-4341-a48e-ecbfd79e2c2e', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='1' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5='Missing PhoneNumberId', @p6='2025-09-19T11:47:15.8468913Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='93d10919-1dc5-4a7b-a578-bd7e46a71c75' (Nullable = true), @p9=NULL, @p10='ed20f7ee-28dc-4f7b-b394-a89037a8e667' (Nullable = true), @p11=NULL (DbType = Guid), @p12='62ee00c5-2a9a-4077-a25e-f8288347a910', @p13='products_info_v1' (Nullable = false), @p14='False', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='93d10919-1dc5-4a7b-a578-bd7e46a71c75', @p20='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p21='[{"i":1,"t":"Back to Main Menu","ty":"QUICK_REPLY","v":"","ns":"3bc5f00f-c6e4-4141-9c71-e26d4c61a20c"}]', @p22='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p23='62ee00c5-2a9a-4077-a25e-f8288347a910' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26='2025-09-19T11:47:13.5818622Z' (DbType = DateTime), @p27='Missing PhoneNumberId', @p28='1' (Nullable = true), @p29='False', @p30=NULL, @p31='products_info_v1' (Nullable = false), @p32=NULL, @p33=NULL, @p34='918974005240' (Nullable = false), @p35='8f45c972-f190-4023-8fea-49945712f7a9' (Nullable = true), @p36=NULL, @p37=NULL (DbType = Guid), @p38=NULL (DbType = DateTime), @p39='flow', @p40='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40)
RETURNING "MessageTime";
2025-09-19 17:17:53.422 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - null null
2025-09-19 17:17:53.431 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:17:53.433 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - 204 null null 11.8795ms
2025-09-19 17:17:53.436 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - null 0
2025-09-19 17:17:53.439 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:17:53.516 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-19 17:17:53.520 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 17:17:53.545 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-19 17:17:53.554 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='5d760969-9fb2-481a-9139-be56c85c2f3b'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-09-19 17:17:53.676 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-19 17:17:53.682 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__flowId_Value_0='2b73877c-3c18-4fbb-af61-1906393bb2d3', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", t0."Id", t0."CTAFlowConfigId", t0."PositionX", t0."PositionY", t0."RequiredSource", t0."RequiredTag", t0."StepOrder", t0."TemplateToSend", t0."TemplateType", t0."TriggerButtonText", t0."TriggerButtonType", t0."Id0", t0."ButtonIndex", t0."ButtonSubType", t0."ButtonText", t0."ButtonType", t0."ButtonValue", t0."CTAFlowStepId", t0."NextStepId"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."Id" = @__flowId_Value_0 AND c."BusinessId" = @__businessId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."CTAFlowConfigId", c0."PositionX", c0."PositionY", c0."RequiredSource", c0."RequiredTag", c0."StepOrder", c0."TemplateToSend", c0."TemplateType", c0."TriggerButtonText", c0."TriggerButtonType", f."Id" AS "Id0", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
    FROM "CTAFlowSteps" AS c0
    LEFT JOIN "FlowButtonLinks" AS f ON c0."Id" = f."CTAFlowStepId"
) AS t0 ON t."Id" = t0."CTAFlowConfigId"
ORDER BY t."Id", t0."Id"
2025-09-19 17:17:53.707 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 17:17:53.709 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:17:53.711 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:17:55.265 +05:30 [INF] Received HTTP response headers after 1553.3624ms - 200
2025-09-19 17:17:55.267 +05:30 [INF] End processing HTTP request after 1557.7832ms - 200
2025-09-19 17:17:55.495 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaign_CTAFlowConfigId_Value_0='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "CTAFlowSteps" AS c
WHERE c."CTAFlowConfigId" = @__campaign_CTAFlowConfigId_Value_0
ORDER BY c."StepOrder"
LIMIT 1
2025-09-19 17:17:55.530 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 17:17:55.538 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-19 17:17:55.545 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 17:17:55.546 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 17:17:57.433 +05:30 [INF] Received HTTP response headers after 1885.5661ms - 200
2025-09-19 17:17:57.435 +05:30 [INF] End processing HTTP request after 1889.1692ms - 200
2025-09-19 17:17:57.538 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='b76cfcc9-d31f-44a5-a60c-b17c2bef5b37', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='[{"i":0,"t":"Explore Our Services","position":1,"text":"Explore Our Services","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"t":"View Our Products","position":2,"text":"View Our Products","type":"QUICK_REPLY","subType":"quick_reply"},{"i":2,"t":"Customer Support","position":3,"text":"Customer Support","type":"QUICK_REPLY","subType":"quick_reply"}]', @p3='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p4='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c' (Nullable = true), @p5='5d760969-9fb2-481a-9139-be56c85c2f3b' (Nullable = true), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T11:47:57.4387719Z' (DbType = DateTime), @p8=NULL, @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='welcome_menu_minds' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE0Rjg1RjZBNzMzNDQ2NEY4AA==', @p14='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE0Rjg1RjZBNzMzNDQ2NEY4AA==","message_status":"accepted"}]}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17=NULL, @p18='186a616a-e0dd-4de9-a3f0-c182422ff393' (Nullable = true), @p19='2025-09-19T11:47:57.4387722Z' (Nullable = true) (DbType = DateTime), @p20='campaign', @p21='Sent' (Nullable = false), @p22='e6c18ee3-d7e2-495a-b2b0-804cab88783a', @p23='True', @p24=NULL, @p25='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p26='[{"i":0,"t":"Explore Our Services","position":1,"text":"Explore Our Services","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"t":"View Our Products","position":2,"text":"View Our Products","type":"QUICK_REPLY","subType":"quick_reply"},{"i":2,"t":"Customer Support","position":3,"text":"Customer Support","type":"QUICK_REPLY","subType":"quick_reply"}]', @p27='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p28='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c' (Nullable = true), @p29='5d760969-9fb2-481a-9139-be56c85c2f3b', @p30=NULL, @p31=NULL, @p32=NULL (DbType = DateTime), @p33='75df7429-287c-406a-83d8-0dfa045b0093', @p34=NULL, @p35='2025-09-19T11:47:57.4436495Z' (DbType = DateTime), @p36='system', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40=NULL, @p41=NULL, @p42='False', @p43=NULL (DbType = DateTime), @p44=NULL, @p45=NULL, @p46='Hello! Thank you for contacting MindsMiratus.

If you're a new visitor, we're happy to help you get started. If you're an existing customer, we're here to support you. Please choose from the options below.' (Nullable = false), @p47='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE0Rjg1RjZBNzMzNDQ2NEY4AA==', @p48='b76cfcc9-d31f-44a5-a60c-b17c2bef5b37' (Nullable = true), @p49=NULL (DbType = DateTime), @p50='17111212-d8a7-4d76-9fc2-9ed370446645', @p51='0', @p52='186a616a-e0dd-4de9-a3f0-c182422ff393' (Nullable = true), @p53='Sent', @p54='2025-09-19T11:47:57.4436925Z' (Nullable = true) (DbType = DateTime), @p55=NULL, @p56='welcome_menu_minds', @p57=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57);
2025-09-19 17:17:57.547 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 17:17:57.552 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 4030.5757ms
2025-09-19 17:17:57.554 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-19 17:17:57.557 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - 200 null application/json; charset=utf-8 4121.5989ms
2025-09-19 17:17:58.779 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-19 17:17:58.786 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:17:58.787 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:17:58.790 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE0Rjg1RjZBNzMzNDQ2NEY4AA==","status":"sent","timestamp":"1758282480","recipient_id":"918974005240","conversation":{"id":"1dd8df2078d335c022993ae944411595","expiration_timestamp":"1758282480","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:17:58.792 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:17:58.793 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:17:58.795 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.0703ms
2025-09-19 17:17:58.795 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE0Rjg1RjZBNzMzNDQ2NEY4AA==","status":"sent","timestamp":"1758282480","recipient_id":"918974005240","conversation":{"id":"1dd8df2078d335c022993ae944411595","expiration_timestamp":"1758282480","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:17:58.799 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:17:58.801 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 22.1748ms
2025-09-19 17:17:58.814 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-19 17:17:58.819 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-19 17:17:58.821 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-19 17:17:58.823 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 17:17:58.834 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE0Rjg1RjZBNzMzNDQ2NEY4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:17:58.842 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='e6c18ee3-d7e2-495a-b2b0-804cab88783a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-19 17:17:58.844 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE0Rjg1RjZBNzMzNDQ2NEY4AA== (legacy)
2025-09-19 17:17:59.411 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-09-19 17:17:59.414 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:17:59.415 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:17:59.418 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE0Rjg1RjZBNzMzNDQ2NEY4AA==","status":"delivered","timestamp":"1758282481","recipient_id":"918974005240","conversation":{"id":"1dd8df2078d335c022993ae944411595","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:17:59.419 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:17:59.420 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:17:59.421 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.9593ms
2025-09-19 17:17:59.422 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:17:59.423 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 11.8549ms
2025-09-19 17:17:59.427 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE0Rjg1RjZBNzMzNDQ2NEY4AA==","status":"delivered","timestamp":"1758282481","recipient_id":"918974005240","conversation":{"id":"1dd8df2078d335c022993ae944411595","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:17:59.429 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 17:17:59.432 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE0Rjg1RjZBNzMzNDQ2NEY4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:17:59.435 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='e6c18ee3-d7e2-495a-b2b0-804cab88783a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-19 17:17:59.442 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='e6c18ee3-d7e2-495a-b2b0-804cab88783a', @p0='2025-09-19T11:48:01.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-19 17:17:59.444 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE0Rjg1RjZBNzMzNDQ2NEY4AA== → Delivered
2025-09-19 17:18:08.023 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-09-19 17:18:08.026 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:18:08.028 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:18:08.031 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE0Rjg1RjZBNzMzNDQ2NEY4AA==","status":"read","timestamp":"1758282489","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-09-19 17:18:08.033 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:18:08.034 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE0Rjg1RjZBNzMzNDQ2NEY4AA==","status":"read","timestamp":"1758282489","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-09-19 17:18:08.035 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:18:08.036 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 17:18:08.037 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.4062ms
2025-09-19 17:18:08.041 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:18:08.044 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE0Rjg1RjZBNzMzNDQ2NEY4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:18:08.050 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 25.9523ms
2025-09-19 17:18:08.055 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='e6c18ee3-d7e2-495a-b2b0-804cab88783a'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-19 17:18:08.064 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='e6c18ee3-d7e2-495a-b2b0-804cab88783a', @p0='2025-09-19T11:48:09.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-19 17:18:08.067 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE0Rjg1RjZBNzMzNDQ2NEY4AA== → Read
2025-09-19 17:18:13.168 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 637
2025-09-19 17:18:13.172 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:18:13.174 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:18:13.182 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE0Rjg1RjZBNzMzNDQ2NEY4AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRENGQUJGNUY2OTg2QkI0OTM1QkNCMTU0NDI5RTJGRDMA","timestamp":"1758282490","type":"button","button":{"payload":"Explore Our Services","text":"Explore Our Services"}}]},"field":"messages"}]}]}
2025-09-19 17:18:13.192 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:18:13.194 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:18:13.196 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE0Rjg1RjZBNzMzNDQ2NEY4AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRENGQUJGNUY2OTg2QkI0OTM1QkNCMTU0NDI5RTJGRDMA","timestamp":"1758282490","type":"button","button":{"payload":"Explore Our Services","text":"Explore Our Services"}}]},"field":"messages"}]}]}
2025-09-19 17:18:13.196 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 14.9832ms
2025-09-19 17:18:13.200 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-19 17:18:13.202 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:18:13.203 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-19 17:18:13.204 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 36.0175ms
2025-09-19 17:18:15.982 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRENGQUJGNUY2OTg2QkI0OTM1QkNCMTU0NDI5RTJGRDMA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE0Rjg1RjZBNzMzNDQ2NEY4AA==, Text: Explore Our Services
2025-09-19 17:18:15.993 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE0Rjg1RjZBNzMzNDQ2NEY4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-19 17:18:16.001 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__origin_Id_0='b76cfcc9-d31f-44a5-a60c-b17c2bef5b37' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE0Rjg1RjZBNzMzNDQ2NEY4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-09-19 17:18:16.006 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sourceStepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @__flowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3', @__buttonIndex_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-09-19 17:18:16.012 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-09-19 17:18:16.018 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='b868c12a-37d9-42da-9461-cd6be2c0c223', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='0' (Nullable = true), @p3='e6c18ee3-d7e2-495a-b2b0-804cab88783a' (Nullable = true), @p4='918974005240', @p5=NULL, @p6='2025-09-19T11:48:16.0155917Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='b76cfcc9-d31f-44a5-a60c-b17c2bef5b37' (Nullable = true), @p9=NULL, @p10='80bac1f2-978e-4171-ad5c-188a0dbecaef' (Nullable = true), @p11='186a616a-e0dd-4de9-a3f0-c182422ff393' (Nullable = true), @p12='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @p13='welcome_menu_minds' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='Explore Our Services'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-19 17:18:17.012 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__context_TargetStepId_0='806ee374-1a80-4fb2-ba55-c1ec1685c618' (Nullable = true), @__context_FlowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__context_TargetStepId_0 AND c."CTAFlowConfigId" = @__context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-09-19 17:18:17.018 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 17:18:17.022 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:18:17.024 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:18:18.177 +05:30 [INF] Received HTTP response headers after 1152.232ms - 200
2025-09-19 17:18:18.180 +05:30 [INF] End processing HTTP request after 1157.7512ms - 200
2025-09-19 17:18:18.490 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__context_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__context_BusinessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 17:18:18.497 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='5c6164d7-fb11-4d55-a891-c6185129e7ee', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5='Missing PhoneNumberId', @p6='2025-09-19T11:48:18.4941051Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='9ed4797d-bbea-48d5-ad56-ccf99824b3d6' (Nullable = true), @p9=NULL, @p10='e1bfc0a9-0a48-44e4-80ba-894eae0f4c48' (Nullable = true), @p11=NULL (DbType = Guid), @p12='806ee374-1a80-4fb2-ba55-c1ec1685c618', @p13='services_menu_v1' (Nullable = false), @p14='False', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='9ed4797d-bbea-48d5-ad56-ccf99824b3d6', @p20='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p21=NULL, @p22='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p23='806ee374-1a80-4fb2-ba55-c1ec1685c618' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26='2025-09-19T11:48:18.4938366Z' (DbType = DateTime), @p27='Missing PhoneNumberId', @p28='1' (Nullable = true), @p29='False', @p30=NULL, @p31='services_menu_v1' (Nullable = false), @p32=NULL, @p33=NULL, @p34='918974005240' (Nullable = false), @p35='b76cfcc9-d31f-44a5-a60c-b17c2bef5b37' (Nullable = true), @p36=NULL, @p37=NULL (DbType = Guid), @p38=NULL (DbType = DateTime), @p39='flow', @p40='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40)
RETURNING "MessageTime";
2025-09-19 17:18:46.859 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 631
2025-09-19 17:18:46.863 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:18:46.865 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:18:46.868 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE0Rjg1RjZBNzMzNDQ2NEY4AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRTlGMTk1NDNCMkVFRDBBREU5NkNGQzEyMkFDQkRBNDgA","timestamp":"1758282528","type":"button","button":{"payload":"View Our Products","text":"View Our Products"}}]},"field":"messages"}]}]}
2025-09-19 17:18:46.871 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:18:46.871 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE0Rjg1RjZBNzMzNDQ2NEY4AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRTlGMTk1NDNCMkVFRDBBREU5NkNGQzEyMkFDQkRBNDgA","timestamp":"1758282528","type":"button","button":{"payload":"View Our Products","text":"View Our Products"}}]},"field":"messages"}]}]}
2025-09-19 17:18:46.872 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:18:46.873 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-19 17:18:46.876 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-19 17:18:46.875 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.8602ms
2025-09-19 17:18:48.567 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRTlGMTk1NDNCMkVFRDBBREU5NkNGQzEyMkFDQkRBNDgA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE0Rjg1RjZBNzMzNDQ2NEY4AA==, Text: View Our Products
2025-09-19 17:18:48.569 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:18:48.575 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE0Rjg1RjZBNzMzNDQ2NEY4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-19 17:18:48.574 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 1715.2651ms
2025-09-19 17:18:48.588 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__origin_Id_0='b76cfcc9-d31f-44a5-a60c-b17c2bef5b37' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE0Rjg1RjZBNzMzNDQ2NEY4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-09-19 17:18:48.596 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sourceStepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @__flowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3', @__buttonIndex_2='1'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-09-19 17:18:48.602 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-09-19 17:18:48.625 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p0='81151cd9-1775-413e-adb4-778c0d99e2e4', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='1' (Nullable = true), @p3='e6c18ee3-d7e2-495a-b2b0-804cab88783a' (Nullable = true), @p4='918974005240', @p5=NULL, @p6='2025-09-19T11:48:48.6051879Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='b76cfcc9-d31f-44a5-a60c-b17c2bef5b37' (Nullable = true), @p9=NULL, @p10='3681ff95-ff70-4895-9b52-b28d6871babf' (Nullable = true), @p11='186a616a-e0dd-4de9-a3f0-c182422ff393' (Nullable = true), @p12='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @p13='welcome_menu_minds' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='View Our Products'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-19 17:18:49.344 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__context_TargetStepId_0='62ee00c5-2a9a-4077-a25e-f8288347a910' (Nullable = true), @__context_FlowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__context_TargetStepId_0 AND c."CTAFlowConfigId" = @__context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-09-19 17:18:49.350 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 17:18:49.355 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:18:49.357 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:18:50.332 +05:30 [INF] Received HTTP response headers after 973.9561ms - 200
2025-09-19 17:18:50.335 +05:30 [INF] End processing HTTP request after 979.715ms - 200
2025-09-19 17:18:50.642 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__context_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__context_BusinessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 17:18:50.651 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='77c6f77c-f7e0-4a50-b628-1f0325025da0', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='1' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5='Missing PhoneNumberId', @p6='2025-09-19T11:48:50.6475512Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='bdf2a3d0-6a93-4174-b486-8e239129fbf7' (Nullable = true), @p9=NULL, @p10='e3a6a4cf-3690-4098-a181-2870720b35b3' (Nullable = true), @p11=NULL (DbType = Guid), @p12='62ee00c5-2a9a-4077-a25e-f8288347a910', @p13='products_info_v1' (Nullable = false), @p14='False', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='bdf2a3d0-6a93-4174-b486-8e239129fbf7', @p20='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p21='[{"i":1,"t":"Back to Main Menu","ty":"QUICK_REPLY","v":"","ns":"3bc5f00f-c6e4-4141-9c71-e26d4c61a20c"}]', @p22='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p23='62ee00c5-2a9a-4077-a25e-f8288347a910' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26='2025-09-19T11:48:50.6471211Z' (DbType = DateTime), @p27='Missing PhoneNumberId', @p28='1' (Nullable = true), @p29='False', @p30=NULL, @p31='products_info_v1' (Nullable = false), @p32=NULL, @p33=NULL, @p34='918974005240' (Nullable = false), @p35='b76cfcc9-d31f-44a5-a60c-b17c2bef5b37' (Nullable = true), @p36=NULL, @p37=NULL (DbType = Guid), @p38=NULL (DbType = DateTime), @p39='flow', @p40='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40)
RETURNING "MessageTime";
2025-09-19 17:24:13.426 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 17:24:13.477 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 17:24:13.500 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 17:24:14.633 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 17:24:15.271 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 17:24:15.290 +05:30 [INF] ClickLogWorker started
2025-09-19 17:24:15.485 +05:30 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-19 17:24:15.498 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 17:24:15.500 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 17:24:15.502 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 17:24:15.503 +05:30 [INF] Hosting environment: Development
2025-09-19 17:24:15.504 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 17:24:15.506 +05:30 [INF] Executed DbCommand (70ms) [Parameters=[@__cutoff_0='2025-09-12T11:54:13.6382203Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-19 17:24:16.364 +05:30 [INF] ClickLogWorker stopped
2025-09-19 17:24:17.296 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 17:24:17.552 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 264.4846ms
2025-09-19 17:24:17.583 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 17:24:17.597 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 14.8874ms
2025-09-19 17:24:17.695 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 17:24:17.741 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 45.865ms
2025-09-19 17:24:18.002 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 17:24:18.319 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 317.3279ms
2025-09-19 17:24:34.924 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 629
2025-09-19 17:24:34.934 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 17:24:35.042 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:24:35.059 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:24:35.086 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE0Rjg1RjZBNzMzNDQ2NEY4AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggODM2Mjk5QzNERjVDQTMyQTlCREUzM0Q0RjlEMENCQTEA","timestamp":"1758282876","type":"button","button":{"payload":"Customer Support","text":"Customer Support"}}]},"field":"messages"}]}]}
2025-09-19 17:24:35.091 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:24:35.100 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:24:35.119 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 51.6602ms
2025-09-19 17:24:35.121 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:24:35.126 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 202.1238ms
2025-09-19 17:24:35.269 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE0Rjg1RjZBNzMzNDQ2NEY4AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggODM2Mjk5QzNERjVDQTMyQTlCREUzM0Q0RjlEMENCQTEA","timestamp":"1758282876","type":"button","button":{"payload":"Customer Support","text":"Customer Support"}}]},"field":"messages"}]}]}
2025-09-19 17:24:35.273 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-19 17:24:35.283 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-19 17:24:38.468 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggODM2Mjk5QzNERjVDQTMyQTlCREUzM0Q0RjlEMENCQTEA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE0Rjg1RjZBNzMzNDQ2NEY4AA==, Text: Customer Support
2025-09-19 17:24:38.594 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE0Rjg1RjZBNzMzNDQ2NEY4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-19 17:24:38.637 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__origin_Id_0='b76cfcc9-d31f-44a5-a60c-b17c2bef5b37' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNkE0Rjg1RjZBNzMzNDQ2NEY4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-09-19 17:24:38.742 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__sourceStepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @__flowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3', @__buttonIndex_2='2'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-09-19 17:24:38.809 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__stepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-09-19 17:24:39.047 +05:30 [INF] Executed DbCommand (22ms) [Parameters=[@p0='4ad9bb1b-8998-40de-a85c-3b7dcfd27675', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='2' (Nullable = true), @p3='e6c18ee3-d7e2-495a-b2b0-804cab88783a' (Nullable = true), @p4='918974005240', @p5=NULL, @p6='2025-09-19T11:54:38.8148295Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='b76cfcc9-d31f-44a5-a60c-b17c2bef5b37' (Nullable = true), @p9=NULL, @p10='76adfe6d-80b6-4396-a14b-b45be511917d' (Nullable = true), @p11='186a616a-e0dd-4de9-a3f0-c182422ff393' (Nullable = true), @p12='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @p13='welcome_menu_minds' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='Customer Support'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-19 17:24:39.141 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_context_TargetStepId_0='97457a39-996c-4acf-a357-c5038b2dd21c' (Nullable = true), @__8__locals1_context_FlowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__8__locals1_context_TargetStepId_0 AND c."CTAFlowConfigId" = @__8__locals1_context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-09-19 17:24:39.230 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 17:24:39.295 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:24:39.299 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:24:40.869 +05:30 [INF] Received HTTP response headers after 1564.1213ms - 200
2025-09-19 17:24:40.872 +05:30 [INF] End processing HTTP request after 1579.6232ms - 200
2025-09-19 17:24:52.949 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - null null
2025-09-19 17:24:52.966 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:24:52.970 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - 204 null null 21.7223ms
2025-09-19 17:24:52.975 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - null 0
2025-09-19 17:24:52.982 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:24:53.079 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-19 17:24:53.087 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 17:24:53.137 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-19 17:24:53.156 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__campaignId_0='5d760969-9fb2-481a-9139-be56c85c2f3b'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-09-19 17:24:53.356 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-19 17:24:53.369 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__flowId_Value_0='2b73877c-3c18-4fbb-af61-1906393bb2d3', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", t0."Id", t0."CTAFlowConfigId", t0."PositionX", t0."PositionY", t0."RequiredSource", t0."RequiredTag", t0."StepOrder", t0."TemplateToSend", t0."TemplateType", t0."TriggerButtonText", t0."TriggerButtonType", t0."Id0", t0."ButtonIndex", t0."ButtonSubType", t0."ButtonText", t0."ButtonType", t0."ButtonValue", t0."CTAFlowStepId", t0."NextStepId"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."Id" = @__flowId_Value_0 AND c."BusinessId" = @__businessId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."CTAFlowConfigId", c0."PositionX", c0."PositionY", c0."RequiredSource", c0."RequiredTag", c0."StepOrder", c0."TemplateToSend", c0."TemplateType", c0."TriggerButtonText", c0."TriggerButtonType", f."Id" AS "Id0", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
    FROM "CTAFlowSteps" AS c0
    LEFT JOIN "FlowButtonLinks" AS f ON c0."Id" = f."CTAFlowStepId"
) AS t0 ON t."Id" = t0."CTAFlowConfigId"
ORDER BY t."Id", t0."Id"
2025-09-19 17:24:53.414 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 17:24:53.419 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:24:53.420 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:24:54.324 +05:30 [INF] Received HTTP response headers after 901.6644ms - 200
2025-09-19 17:24:54.327 +05:30 [INF] End processing HTTP request after 908.1181ms - 200
2025-09-19 17:24:55.724 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaign_CTAFlowConfigId_Value_0='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "CTAFlowSteps" AS c
WHERE c."CTAFlowConfigId" = @__campaign_CTAFlowConfigId_Value_0
ORDER BY c."StepOrder"
LIMIT 1
2025-09-19 17:24:55.799 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 17:24:55.813 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-19 17:24:55.828 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 17:24:55.830 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 17:25:14.965 +05:30 [INF] Received HTTP response headers after 19132.8986ms - 200
2025-09-19 17:25:14.967 +05:30 [INF] End processing HTTP request after 19139.0217ms - 200
2025-09-19 17:25:15.259 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p0='538220e5-4c90-4584-9063-d8d776233133', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='[{"i":0,"t":"Explore Our Services","position":1,"text":"Explore Our Services","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"t":"View Our Products","position":2,"text":"View Our Products","type":"QUICK_REPLY","subType":"quick_reply"},{"i":2,"t":"Customer Support","position":3,"text":"Customer Support","type":"QUICK_REPLY","subType":"quick_reply"}]', @p3='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p4='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c' (Nullable = true), @p5='5d760969-9fb2-481a-9139-be56c85c2f3b' (Nullable = true), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T11:55:14.9747222Z' (DbType = DateTime), @p8=NULL, @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='welcome_menu_minds' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkJBMkY3OUIxNjFGRTE0MzQzAA==', @p14='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkJBMkY3OUIxNjFGRTE0MzQzAA==","message_status":"accepted"}]}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17=NULL, @p18='62108402-5512-4b45-8845-ab287cd03bf7' (Nullable = true), @p19='2025-09-19T11:55:14.9747841Z' (Nullable = true) (DbType = DateTime), @p20='campaign', @p21='Sent' (Nullable = false), @p22='0dda8a16-a078-42a4-a3ed-a4dca1c49391', @p23='True', @p24=NULL, @p25='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p26='[{"i":0,"t":"Explore Our Services","position":1,"text":"Explore Our Services","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"t":"View Our Products","position":2,"text":"View Our Products","type":"QUICK_REPLY","subType":"quick_reply"},{"i":2,"t":"Customer Support","position":3,"text":"Customer Support","type":"QUICK_REPLY","subType":"quick_reply"}]', @p27='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p28='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c' (Nullable = true), @p29='5d760969-9fb2-481a-9139-be56c85c2f3b', @p30=NULL, @p31=NULL, @p32=NULL (DbType = DateTime), @p33='75df7429-287c-406a-83d8-0dfa045b0093', @p34=NULL, @p35='2025-09-19T11:55:15.0395758Z' (DbType = DateTime), @p36='system', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40=NULL, @p41=NULL, @p42='False', @p43=NULL (DbType = DateTime), @p44=NULL, @p45=NULL, @p46='Hello! Thank you for contacting MindsMiratus.

If you're a new visitor, we're happy to help you get started. If you're an existing customer, we're here to support you. Please choose from the options below.' (Nullable = false), @p47='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkJBMkY3OUIxNjFGRTE0MzQzAA==', @p48='538220e5-4c90-4584-9063-d8d776233133' (Nullable = true), @p49=NULL (DbType = DateTime), @p50='17111212-d8a7-4d76-9fc2-9ed370446645', @p51='0', @p52='62108402-5512-4b45-8845-ab287cd03bf7' (Nullable = true), @p53='Sent', @p54='2025-09-19T11:55:15.0396443Z' (Nullable = true) (DbType = DateTime), @p55=NULL, @p56='welcome_menu_minds', @p57=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57);
2025-09-19 17:25:15.297 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 17:25:15.306 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 22216.2581ms
2025-09-19 17:25:15.309 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-19 17:25:15.316 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - 200 null application/json; charset=utf-8 22341.2964ms
2025-09-19 17:25:16.498 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-19 17:25:16.505 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:25:16.507 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:25:16.512 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkJBMkY3OUIxNjFGRTE0MzQzAA==","status":"sent","timestamp":"1758282918","recipient_id":"918974005240","conversation":{"id":"4677f3edf7a311e65cf3c71cae002482","expiration_timestamp":"1758282918","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:25:16.514 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:25:16.515 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:25:16.517 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.204ms
2025-09-19 17:25:16.517 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkJBMkY3OUIxNjFGRTE0MzQzAA==","status":"sent","timestamp":"1758282918","recipient_id":"918974005240","conversation":{"id":"4677f3edf7a311e65cf3c71cae002482","expiration_timestamp":"1758282918","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:25:16.519 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:25:16.521 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 23.7583ms
2025-09-19 17:25:16.546 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-19 17:25:16.552 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-19 17:25:16.556 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-19 17:25:16.559 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 17:25:16.579 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkJBMkY3OUIxNjFGRTE0MzQzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:25:16.592 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='0dda8a16-a078-42a4-a3ed-a4dca1c49391'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-19 17:25:16.596 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkJBMkY3OUIxNjFGRTE0MzQzAA== (legacy)
2025-09-19 17:25:18.000 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-09-19 17:25:18.005 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:25:18.007 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:25:18.012 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkJBMkY3OUIxNjFGRTE0MzQzAA==","status":"read","timestamp":"1758282919","recipient_id":"918974005240","conversation":{"id":"4677f3edf7a311e65cf3c71cae002482","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:25:18.015 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:25:18.017 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:25:18.020 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 10.0699ms
2025-09-19 17:25:18.022 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:25:18.024 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 23.7414ms
2025-09-19 17:25:18.028 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkJBMkY3OUIxNjFGRTE0MzQzAA==","status":"read","timestamp":"1758282919","recipient_id":"918974005240","conversation":{"id":"4677f3edf7a311e65cf3c71cae002482","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:25:18.031 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 17:25:18.037 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkJBMkY3OUIxNjFGRTE0MzQzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:25:18.044 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__sid_0='0dda8a16-a078-42a4-a3ed-a4dca1c49391'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-19 17:25:18.061 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p2='0dda8a16-a078-42a4-a3ed-a4dca1c49391', @p0='2025-09-19T11:55:19.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-19 17:25:18.065 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkJBMkY3OUIxNjFGRTE0MzQzAA== → Read
2025-09-19 17:25:21.305 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 637
2025-09-19 17:25:21.309 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:25:21.310 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:25:21.312 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkJBMkY3OUIxNjFGRTE0MzQzAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRURFQjMxNDYwRkI2NUQzN0FGMDNGN0M0QkNFM0NGMTIA","timestamp":"1758282922","type":"button","button":{"payload":"Explore Our Services","text":"Explore Our Services"}}]},"field":"messages"}]}]}
2025-09-19 17:25:21.315 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:25:21.315 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkJBMkY3OUIxNjFGRTE0MzQzAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRURFQjMxNDYwRkI2NUQzN0FGMDNGN0M0QkNFM0NGMTIA","timestamp":"1758282922","type":"button","button":{"payload":"Explore Our Services","text":"Explore Our Services"}}]},"field":"messages"}]}]}
2025-09-19 17:25:21.316 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:25:21.317 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-19 17:25:21.319 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.7763ms
2025-09-19 17:25:21.320 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-19 17:25:21.322 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:25:39.125 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 17820.4736ms
2025-09-19 17:25:51.484 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRURFQjMxNDYwRkI2NUQzN0FGMDNGN0M0QkNFM0NGMTIA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkJBMkY3OUIxNjFGRTE0MzQzAA==, Text: Explore Our Services
2025-09-19 17:25:53.912 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkJBMkY3OUIxNjFGRTE0MzQzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-19 17:26:00.402 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__origin_Id_0='538220e5-4c90-4584-9063-d8d776233133' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkJBMkY3OUIxNjFGRTE0MzQzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-09-19 17:26:17.032 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sourceStepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @__flowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3', @__buttonIndex_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-09-19 17:26:21.786 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-09-19 17:26:32.811 +05:30 [INF] Executed DbCommand (22ms) [Parameters=[@p0='4ea180a5-2a4c-4135-aeaf-838b17a83f60', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='0' (Nullable = true), @p3='0dda8a16-a078-42a4-a3ed-a4dca1c49391' (Nullable = true), @p4='918974005240', @p5=NULL, @p6='2025-09-19T11:56:24.1841980Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='538220e5-4c90-4584-9063-d8d776233133' (Nullable = true), @p9=NULL, @p10='9570153e-e880-4076-8387-c82ddde12626' (Nullable = true), @p11='62108402-5512-4b45-8845-ab287cd03bf7' (Nullable = true), @p12='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @p13='welcome_menu_minds' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='Explore Our Services'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-19 17:26:50.413 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_TargetStepId_0='806ee374-1a80-4fb2-ba55-c1ec1685c618' (Nullable = true), @__8__locals1_context_FlowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__8__locals1_context_TargetStepId_0 AND c."CTAFlowConfigId" = @__8__locals1_context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-09-19 17:27:02.247 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 17:27:02.270 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:27:02.272 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:27:04.813 +05:30 [INF] Received HTTP response headers after 2539.0484ms - 200
2025-09-19 17:27:04.815 +05:30 [INF] End processing HTTP request after 2544.0497ms - 200
2025-09-19 17:33:55.880 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 17:33:55.941 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 17:33:55.963 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 17:33:57.163 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 17:33:57.954 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 17:33:57.980 +05:30 [INF] ClickLogWorker started
2025-09-19 17:33:58.251 +05:30 [INF] Executed DbCommand (59ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-19 17:33:58.274 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 17:33:58.276 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 17:33:58.277 +05:30 [INF] Executed DbCommand (125ms) [Parameters=[@__cutoff_0='2025-09-12T12:03:56.1040463Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-19 17:33:58.278 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 17:33:58.283 +05:30 [INF] Hosting environment: Development
2025-09-19 17:33:58.284 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 17:33:59.062 +05:30 [INF] ClickLogWorker stopped
2025-09-19 17:33:59.746 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 17:34:00.002 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 267.0021ms
2025-09-19 17:34:00.040 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 17:34:00.049 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.9814ms
2025-09-19 17:34:00.152 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 17:34:00.206 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 53.6911ms
2025-09-19 17:34:00.443 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 17:34:00.753 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 309.2359ms
2025-09-19 17:34:08.846 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 631
2025-09-19 17:34:08.853 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 17:34:08.968 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:34:08.989 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:34:09.016 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkJBMkY3OUIxNjFGRTE0MzQzAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRDgxODE0MzdCRjgyNjBFNzU3RUQ1QzkwN0YyMDIwN0EA","timestamp":"1758283450","type":"button","button":{"payload":"View Our Products","text":"View Our Products"}}]},"field":"messages"}]}]}
2025-09-19 17:34:09.021 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:34:09.030 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:34:09.050 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 50.8072ms
2025-09-19 17:34:09.052 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:34:09.057 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 210.6221ms
2025-09-19 17:34:09.204 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkJBMkY3OUIxNjFGRTE0MzQzAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRDgxODE0MzdCRjgyNjBFNzU3RUQ1QzkwN0YyMDIwN0EA","timestamp":"1758283450","type":"button","button":{"payload":"View Our Products","text":"View Our Products"}}]},"field":"messages"}]}]}
2025-09-19 17:34:09.208 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-19 17:34:09.225 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-19 17:34:11.460 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggRDgxODE0MzdCRjgyNjBFNzU3RUQ1QzkwN0YyMDIwN0EA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkJBMkY3OUIxNjFGRTE0MzQzAA==, Text: View Our Products
2025-09-19 17:34:11.580 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkJBMkY3OUIxNjFGRTE0MzQzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-19 17:34:11.624 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__origin_Id_0='538220e5-4c90-4584-9063-d8d776233133' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkJBMkY3OUIxNjFGRTE0MzQzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-09-19 17:34:11.714 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__sourceStepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @__flowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3', @__buttonIndex_2='1'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-09-19 17:34:11.774 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__stepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-09-19 17:34:11.959 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='95ea307b-945a-4441-ab2a-bc8a170d8440', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='1' (Nullable = true), @p3='0dda8a16-a078-42a4-a3ed-a4dca1c49391' (Nullable = true), @p4='918974005240', @p5=NULL, @p6='2025-09-19T12:04:11.7792161Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='538220e5-4c90-4584-9063-d8d776233133' (Nullable = true), @p9=NULL, @p10='c98b117f-7ce3-4af2-b32f-f2a6b035f4e7' (Nullable = true), @p11='62108402-5512-4b45-8845-ab287cd03bf7' (Nullable = true), @p12='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @p13='welcome_menu_minds' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='View Our Products'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-19 17:34:11.994 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignSendLogId_Value_0='0dda8a16-a078-42a4-a3ed-a4dca1c49391'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Provider", c0."PhoneNumberId"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
WHERE c."Id" = @__campaignSendLogId_Value_0
LIMIT 1
2025-09-19 17:34:12.052 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_TargetStepId_0='62ee00c5-2a9a-4077-a25e-f8288347a910' (Nullable = true), @__8__locals1_context_FlowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__8__locals1_context_TargetStepId_0 AND c."CTAFlowConfigId" = @__8__locals1_context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-09-19 17:34:12.142 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 17:34:12.191 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:34:12.196 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:34:13.406 +05:30 [INF] Received HTTP response headers after 1205.7454ms - 401
2025-09-19 17:34:13.409 +05:30 [INF] End processing HTTP request after 1219.8462ms - 401
2025-09-19 17:34:13.413 +05:30 [ERR] ❌ Failed to fetch templates (provider=meta_cloud) for BusinessId "10d9469d-4e77-4845-a87f-dbc7e3348b11": HTTP 401 Body: {"error":{"message":"Error validating access token: Session has expired on Friday, 19-Sep-25 05:00:00 PDT. The current time is Friday, 19-Sep-25 05:04:16 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"AriCl4q-cnaZtxTlGjjaKfB"}}
2025-09-19 17:34:13.468 +05:30 [INF] Executed DbCommand (22ms) [Parameters=[@p0='b628c0a2-f309-4795-9d2b-c2ad2c6243b4', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='1' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5='Template 'products_info_v1' not found for this WABA.', @p6='2025-09-19T12:04:13.4164186Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8=NULL (DbType = Guid), @p9=NULL, @p10='e6deed88-3715-4998-b595-52b9399f343b' (Nullable = true), @p11=NULL (DbType = Guid), @p12='62ee00c5-2a9a-4077-a25e-f8288347a910', @p13='products_info_v1' (Nullable = false), @p14='False', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-19 17:35:13.705 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - null null
2025-09-19 17:35:13.715 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 17:35:13.737 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:35:13.737 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:35:13.742 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - 204 null null 38.1731ms
2025-09-19 17:35:13.742 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 27.4973ms
2025-09-19 17:35:13.747 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 17:35:13.751 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/ - null null
2025-09-19 17:35:13.758 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:35:13.758 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:35:13.881 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 17:35:13.888 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 17:35:13.892 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 17:35:13.894 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-19 17:35:13.904 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=25
2025-09-19 17:35:13.924 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-19 17:35:13.935 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType89`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:35:13.964 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 67.6182ms
2025-09-19 17:35:13.969 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 17:35:13.969 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 17:35:13.982 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 234.9012ms
2025-09-19 17:35:14.023 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 17:35:14.086 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 17:35:14.103 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 208.1653ms
2025-09-19 17:35:14.106 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 17:35:14.107 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/ - 200 null application/json; charset=utf-8 356.0492ms
2025-09-19 17:35:18.538 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 17:35:18.543 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:35:18.545 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 7.0119ms
2025-09-19 17:35:18.550 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 82
2025-09-19 17:35:18.555 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:35:18.561 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 17:35:18.569 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 17:35:19.971 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 17:35:19.986 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_dto_RecipientNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-19 17:35:20.037 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[@p1='75df7429-287c-406a-83d8-0dfa045b0093', @p0='2025-09-19T12:05:19.9897993Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Contacts" SET "LastContactedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 17:35:20.065 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 17:35:20.079 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-19 17:35:20.090 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 17:35:20.093 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 17:35:21.026 +05:30 [INF] Received HTTP response headers after 930.7457ms - 401
2025-09-19 17:35:21.027 +05:30 [INF] End processing HTTP request after 936.9985ms - 401
2025-09-19 17:35:21.031 +05:30 [WRN] MetaCloud send failed (HTTP 401): {"error":{"message":"Error validating access token: Session has expired on Friday, 19-Sep-25 05:00:00 PDT. The current time is Friday, 19-Sep-25 05:05:23 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"Ax1LK2zaTC3DbyWHdHli0UH"}}
2025-09-19 17:35:21.173 +05:30 [INF] Executed DbCommand (22ms) [Parameters=[@p0='b1495eda-db89-4a57-8f8b-e02017ddbbcf', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T12:05:21.0368153Z' (DbType = DateTime), @p8='❌ WhatsApp API returned an error.', @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='sfsdfdsf' (Nullable = false), @p13=NULL, @p14='{"error":{"message":"Error validating access token: Session has expired on Friday, 19-Sep-25 05:00:00 PDT. The current time is Friday, 19-Sep-25 05:05:23 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"Ax1LK2zaTC3DbyWHdHli0UH"}}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17='sfsdfdsf', @p18=NULL (DbType = Guid), @p19='2025-09-19T12:05:21.0369131Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
2025-09-19 17:35:21.196 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 17:35:21.203 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 2631.4202ms
2025-09-19 17:35:21.206 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 17:35:21.209 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/json; charset=utf-8 2659.0708ms
2025-09-19 17:35:27.829 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 17:35:27.834 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:35:27.835 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 5.4943ms
2025-09-19 17:35:27.841 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 82
2025-09-19 17:35:27.844 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:35:27.847 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 17:35:27.849 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 17:35:30.404 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 17:35:30.410 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_dto_RecipientNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-19 17:35:30.438 +05:30 [INF] Executed DbCommand (25ms) [Parameters=[@p1='75df7429-287c-406a-83d8-0dfa045b0093', @p0='2025-09-19T12:05:30.4126591Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Contacts" SET "LastContactedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 17:35:30.444 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 17:35:30.449 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-19 17:35:30.454 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 17:35:30.456 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 17:35:30.916 +05:30 [INF] Received HTTP response headers after 458.5087ms - 401
2025-09-19 17:35:30.919 +05:30 [INF] End processing HTTP request after 464.6538ms - 401
2025-09-19 17:35:30.921 +05:30 [WRN] MetaCloud send failed (HTTP 401): {"error":{"message":"Error validating access token: Session has expired on Friday, 19-Sep-25 05:00:00 PDT. The current time is Friday, 19-Sep-25 05:05:33 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"Ab6UPezXFAm1yghCMlvNWRv"}}
2025-09-19 17:35:30.927 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='71453091-6938-43c1-8658-eacf794ed45d', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T12:05:30.9230796Z' (DbType = DateTime), @p8='❌ WhatsApp API returned an error.', @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='sfsdfdsf' (Nullable = false), @p13=NULL, @p14='{"error":{"message":"Error validating access token: Session has expired on Friday, 19-Sep-25 05:00:00 PDT. The current time is Friday, 19-Sep-25 05:05:33 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"Ab6UPezXFAm1yghCMlvNWRv"}}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17='sfsdfdsf', @p18=NULL (DbType = Guid), @p19='2025-09-19T12:05:30.9230798Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
2025-09-19 17:35:30.931 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 17:35:30.933 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 3082.0408ms
2025-09-19 17:35:30.935 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 17:35:30.937 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 400 null application/json; charset=utf-8 3096.0245ms
2025-09-19 17:35:34.465 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 17:35:34.471 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:35:34.472 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 7.7236ms
2025-09-19 17:35:34.479 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 17:35:34.482 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 17:35:34.486 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:35:34.487 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:35:34.489 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 204 null null 10.339ms
2025-09-19 17:35:34.491 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 17:35:34.496 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 17:35:34.500 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:35:34.501 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 17:35:34.502 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:35:34.510 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:35:34.532 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-19 17:35:34.537 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-09-19 17:35:34.545 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 40.8496ms
2025-09-19 17:35:34.547 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 17:35:34.549 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='PINNACLE'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 17:35:34.552 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 70.5358ms
2025-09-19 17:35:34.555 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 17:35:34.558 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 17:35:34.560 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 27.8927ms
2025-09-19 17:35:34.562 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:35:34.564 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:35:34.565 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 7.4038ms
2025-09-19 17:35:34.567 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 200 null application/json; charset=utf-8 70.7108ms
2025-09-19 17:35:34.574 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 17:35:34.576 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:35:34.578 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:35:34.579 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:35:34.587 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 17:35:34.591 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 17:35:34.596 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 13.845ms
2025-09-19 17:35:34.598 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 17:35:34.598 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:35:34.602 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:35:34.603 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 29.4265ms
2025-09-19 17:35:34.604 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:35:34.609 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:35:34.616 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 17:35:34.621 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 17:35:34.624 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 12.5033ms
2025-09-19 17:35:34.626 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:35:34.628 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 30.3623ms
2025-09-19 17:36:04.419 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 17:36:04.422 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:36:04.423 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 3.7067ms
2025-09-19 17:36:04.427 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - application/json 173
2025-09-19 17:36:04.429 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:36:04.430 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api)'
2025-09-19 17:36:04.436 +05:30 [INF] Route matched with {action = "Upsert", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Upsert(System.String, UpsertRequest) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:36:05.839 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
LIMIT 1
2025-09-19 17:36:05.850 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__providerForChild_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__providerForChild_1 AND w."PhoneNumberId" = @__phoneNumberId_2
LIMIT 1
2025-09-19 17:36:05.896 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='e7abb04c-eaee-4f66-9234-6ef058499674', @p0='2025-09-19T12:06:05.8027415Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 17:36:05.931 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__providerForChild_1='META_CLOUD', @__entity_Id_2='e7abb04c-eaee-4f66-9234-6ef058499674'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" AS w
SET "IsDefault" = FALSE
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__providerForChild_1 AND w."Id" <> @__entity_Id_2
2025-09-19 17:36:05.939 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='c13c2c23-4ed0-4441-b5b2-6b2b581bdca3', @p0='2025-09-19T12:06:05.8027415Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 17:36:05.956 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber'.
2025-09-19 17:36:05.958 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api) in 1520.125ms
2025-09-19 17:36:05.960 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api)'
2025-09-19 17:36:05.961 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 1534.5016ms
2025-09-19 17:36:08.227 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-09-19 17:36:08.230 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:36:08.230 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 3.6286ms
2025-09-19 17:36:08.234 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 572
2025-09-19 17:36:08.237 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:36:08.238 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 17:36:08.242 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 17:36:08.259 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__dto_Provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0 AND w."Provider" = @__dto_Provider_1
LIMIT 1
2025-09-19 17:36:08.282 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p2='c13c2c23-4ed0-4441-b5b2-6b2b581bdca3', @p0='EAAUbmP4285YBPeVhZCDZBIGFSxpHTslN9GZCsUbhWbUBJwj4ZAWL0wzrhvinDCfon1N2WzQ09fnZADX4lhruXQKLTolcrkPlGdNwRhdNq3Sq9rG4depKLYaiPN9Q6wdZBv9Wzdv3CQxcltzjA3PlR93L05mP4IRjw5gZAcBsxDuooYMZCoemFBy6ZB30hF4mHb7iN9W0ehWGmZASgTEWHQaWjnzHNjN7YfMui8F9ENaVgLydy9VdF20OaXcQFZA7LICewZDZD' (Nullable = false), @p1='2025-09-19T12:06:08.2633640Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "ApiKey" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-09-19 17:36:08.286 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:36:08.288 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 44.047ms
2025-09-19 17:36:08.290 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 17:36:08.291 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 57.0558ms
2025-09-19 17:36:12.535 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - null null
2025-09-19 17:36:12.541 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 17:36:12.545 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:36:12.547 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:36:12.548 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - 204 null null 12.76ms
2025-09-19 17:36:12.549 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 8.4084ms
2025-09-19 17:36:12.555 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 17:36:12.560 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/ - null null
2025-09-19 17:36:12.564 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:36:12.566 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:36:12.567 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 17:36:12.567 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 17:36:12.569 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-19 17:36:12.570 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 17:36:12.575 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=25
2025-09-19 17:36:12.577 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-19 17:36:12.581 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 17:36:12.588 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType89`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:36:12.591 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 17:36:12.591 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 19.2125ms
2025-09-19 17:36:12.593 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 17:36:12.594 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 17:36:12.596 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 21.0874ms
2025-09-19 17:36:12.597 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 41.0709ms
2025-09-19 17:36:12.598 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 17:36:12.603 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/ - 200 null application/json; charset=utf-8 42.8271ms
2025-09-19 17:36:15.524 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 17:36:15.526 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:36:15.527 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 3.4789ms
2025-09-19 17:36:15.530 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 78
2025-09-19 17:36:15.533 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:36:15.534 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 17:36:15.535 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 17:36:16.661 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 17:36:16.666 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_dto_RecipientNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-19 17:36:16.671 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='75df7429-287c-406a-83d8-0dfa045b0093', @p0='2025-09-19T12:06:16.6685570Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Contacts" SET "LastContactedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 17:36:16.674 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 17:36:16.678 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-19 17:36:16.681 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 17:36:16.683 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 17:36:17.799 +05:30 [INF] Received HTTP response headers after 1113.926ms - 200
2025-09-19 17:36:17.801 +05:30 [INF] End processing HTTP request after 1119.4405ms - 200
2025-09-19 17:36:17.806 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='64a97813-77c7-440e-a1c3-68687e8a0824', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T12:06:17.8039193Z' (DbType = DateTime), @p8=NULL, @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='fdsf' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUZFQjdBMzU4ODczRTcyM0E0AA==', @p14='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUZFQjdBMzU4ODczRTcyM0E0AA=="}]}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17='fdsf', @p18=NULL (DbType = Guid), @p19='2025-09-19T12:06:17.8039194Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
2025-09-19 17:36:17.808 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 17:36:17.809 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 2273.0082ms
2025-09-19 17:36:17.811 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 17:36:17.812 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 200 null application/json; charset=utf-8 2281.6855ms
2025-09-19 17:36:19.139 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 613
2025-09-19 17:36:19.144 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:36:19.145 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:36:19.147 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUZFQjdBMzU4ODczRTcyM0E0AA==","status":"sent","timestamp":"1758283581","recipient_id":"918974005240","conversation":{"id":"3611f86aab1c8fe2d3df6bd02a2eb646","expiration_timestamp":"1758283581","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-19 17:36:19.149 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:36:19.150 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:36:19.152 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.2105ms
2025-09-19 17:36:19.152 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUZFQjdBMzU4ODczRTcyM0E0AA==","status":"sent","timestamp":"1758283581","recipient_id":"918974005240","conversation":{"id":"3611f86aab1c8fe2d3df6bd02a2eb646","expiration_timestamp":"1758283581","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-19 17:36:19.153 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:36:19.155 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 15.7623ms
2025-09-19 17:36:19.171 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-19 17:36:19.177 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-19 17:36:19.180 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-19 17:36:19.183 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 17:36:19.198 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUZFQjdBMzU4ODczRTcyM0E0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:36:19.200 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUZFQjdBMzU4ODczRTcyM0E0AA==
2025-09-19 17:36:19.207 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUZFQjdBMzU4ODczRTcyM0E0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:36:19.212 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUZFQjdBMzU4ODczRTcyM0E0AA== (legacy)
2025-09-19 17:36:19.754 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 582
2025-09-19 17:36:19.757 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:36:19.758 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:36:19.762 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUZFQjdBMzU4ODczRTcyM0E0AA==","status":"delivered","timestamp":"1758283581","recipient_id":"918974005240","conversation":{"id":"3611f86aab1c8fe2d3df6bd02a2eb646","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-19 17:36:19.764 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:36:19.764 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:36:19.766 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.5267ms
2025-09-19 17:36:19.767 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:36:19.768 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.8364ms
2025-09-19 17:36:19.773 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUZFQjdBMzU4ODczRTcyM0E0AA==","status":"delivered","timestamp":"1758283581","recipient_id":"918974005240","conversation":{"id":"3611f86aab1c8fe2d3df6bd02a2eb646","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-19 17:36:19.775 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 17:36:19.779 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUZFQjdBMzU4ODczRTcyM0E0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:36:19.781 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUZFQjdBMzU4ODczRTcyM0E0AA==
2025-09-19 17:36:19.783 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUZFQjdBMzU4ODczRTcyM0E0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:36:19.788 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='64a97813-77c7-440e-a1c3-68687e8a0824', @p0='Delivered' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-09-19 17:36:19.790 +05:30 [INF] ℹ️ MessageLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUZFQjdBMzU4ODczRTcyM0E0AA== → Delivered
2025-09-19 17:36:23.424 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-09-19 17:36:23.427 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:36:23.428 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:36:23.430 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUZFQjdBMzU4ODczRTcyM0E0AA==","status":"read","timestamp":"1758283585","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-09-19 17:36:23.431 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:36:23.431 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUZFQjdBMzU4ODczRTcyM0E0AA==","status":"read","timestamp":"1758283585","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-09-19 17:36:23.432 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:36:23.433 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 17:36:23.434 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.3828ms
2025-09-19 17:36:23.437 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUZFQjdBMzU4ODczRTcyM0E0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:36:23.438 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:36:23.440 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUZFQjdBMzU4ODczRTcyM0E0AA==
2025-09-19 17:36:23.441 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 16.5979ms
2025-09-19 17:36:23.443 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUZFQjdBMzU4ODczRTcyM0E0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:36:23.467 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p1='64a97813-77c7-440e-a1c3-68687e8a0824', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-09-19 17:36:23.469 +05:30 [INF] ℹ️ MessageLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUZFQjdBMzU4ODczRTcyM0E0AA== → Read
2025-09-19 17:36:26.317 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 629
2025-09-19 17:36:26.319 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:36:26.320 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:36:26.322 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkJBMkY3OUIxNjFGRTE0MzQzAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggM0E5MEE1NEE2QjE5Qjc5QzQ1QTYzQUEyRDA0OUEzMUIA","timestamp":"1758283588","type":"button","button":{"payload":"Customer Support","text":"Customer Support"}}]},"field":"messages"}]}]}
2025-09-19 17:36:26.324 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:36:26.324 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkJBMkY3OUIxNjFGRTE0MzQzAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggM0E5MEE1NEE2QjE5Qjc5QzQ1QTYzQUEyRDA0OUEzMUIA","timestamp":"1758283588","type":"button","button":{"payload":"Customer Support","text":"Customer Support"}}]},"field":"messages"}]}]}
2025-09-19 17:36:26.325 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:36:26.326 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-19 17:36:26.327 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.319ms
2025-09-19 17:36:26.328 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-19 17:36:26.329 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:36:27.845 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 1528.7503ms
2025-09-19 17:36:27.843 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggM0E5MEE1NEE2QjE5Qjc5QzQ1QTYzQUEyRDA0OUEzMUIA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkJBMkY3OUIxNjFGRTE0MzQzAA==, Text: Customer Support
2025-09-19 17:36:27.858 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkJBMkY3OUIxNjFGRTE0MzQzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-19 17:36:27.861 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__origin_Id_0='538220e5-4c90-4584-9063-d8d776233133' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkJBMkY3OUIxNjFGRTE0MzQzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-09-19 17:36:27.884 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sourceStepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @__flowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3', @__buttonIndex_2='2'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-09-19 17:36:27.888 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-09-19 17:36:27.893 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='3ef104b5-3861-4326-90d3-13480213523b', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='2' (Nullable = true), @p3='0dda8a16-a078-42a4-a3ed-a4dca1c49391' (Nullable = true), @p4='918974005240', @p5=NULL, @p6='2025-09-19T12:06:27.8912182Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='538220e5-4c90-4584-9063-d8d776233133' (Nullable = true), @p9=NULL, @p10='d74ad5aa-ee0c-4bd8-b74f-a5652a89fe09' (Nullable = true), @p11='62108402-5512-4b45-8845-ab287cd03bf7' (Nullable = true), @p12='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @p13='welcome_menu_minds' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='Customer Support'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-19 17:36:27.896 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignSendLogId_Value_0='0dda8a16-a078-42a4-a3ed-a4dca1c49391'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Provider", c0."PhoneNumberId"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
WHERE c."Id" = @__campaignSendLogId_Value_0
LIMIT 1
2025-09-19 17:36:27.900 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_context_TargetStepId_0='97457a39-996c-4acf-a357-c5038b2dd21c' (Nullable = true), @__8__locals1_context_FlowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__8__locals1_context_TargetStepId_0 AND c."CTAFlowConfigId" = @__8__locals1_context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-09-19 17:36:27.904 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 17:36:27.907 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:36:27.908 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:36:28.860 +05:30 [INF] Received HTTP response headers after 950.5514ms - 200
2025-09-19 17:36:28.861 +05:30 [INF] End processing HTTP request after 954.8915ms - 200
2025-09-19 17:36:29.737 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 17:36:29.741 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-19 17:36:29.747 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 17:36:29.748 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 17:36:32.522 +05:30 [INF] Received HTTP response headers after 2772.6428ms - 200
2025-09-19 17:36:32.523 +05:30 [INF] End processing HTTP request after 2776.9104ms - 200
2025-09-19 17:36:32.536 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='b336f874-1e4b-4d16-9227-2e4916ab0cf2', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='2' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-09-19T12:06:32.5279881Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='29834d05-bdee-4ae5-b361-463ae33117f7' (Nullable = true), @p9='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRURGQzg4NzRBNDlCM0UzNDEwAA==","message_status":"accepted"}]}', @p10='a1bb36d3-2d1a-4f10-bae8-78940733d9e9' (Nullable = true), @p11=NULL (DbType = Guid), @p12='97457a39-996c-4acf-a357-c5038b2dd21c', @p13='support_project_status_v1' (Nullable = false), @p14='True', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='29834d05-bdee-4ae5-b361-463ae33117f7', @p20='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p21=NULL, @p22='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p23='97457a39-996c-4acf-a357-c5038b2dd21c' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26='2025-09-19T12:06:32.5270066Z' (DbType = DateTime), @p27=NULL, @p28='1' (Nullable = true), @p29='False', @p30=NULL, @p31='support_project_status_v1' (Nullable = false), @p32='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRURGQzg4NzRBNDlCM0UzNDEwAA==', @p33='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRURGQzg4NzRBNDlCM0UzNDEwAA==","message_status":"accepted"}]}', @p34='918974005240' (Nullable = false), @p35='538220e5-4c90-4584-9063-d8d776233133' (Nullable = true), @p36=NULL, @p37=NULL (DbType = Guid), @p38='2025-09-19T12:06:32.5271355Z' (Nullable = true) (DbType = DateTime), @p39='flow', @p40='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40)
RETURNING "MessageTime";
2025-09-19 17:36:32.963 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-19 17:36:32.967 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:36:32.968 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:36:32.971 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRURGQzg4NzRBNDlCM0UzNDEwAA==","status":"sent","timestamp":"1758283594","recipient_id":"918974005240","conversation":{"id":"f2df123bcca189d6448ce68e5b71a67a","expiration_timestamp":"1758283594","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:36:32.973 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:36:32.973 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRURGQzg4NzRBNDlCM0UzNDEwAA==","status":"sent","timestamp":"1758283594","recipient_id":"918974005240","conversation":{"id":"f2df123bcca189d6448ce68e5b71a67a","expiration_timestamp":"1758283594","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:36:32.974 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:36:32.975 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 17:36:32.976 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.9935ms
2025-09-19 17:36:32.980 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRURGQzg4NzRBNDlCM0UzNDEwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:36:32.982 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:36:32.984 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRURGQzg4NzRBNDlCM0UzNDEwAA==
2025-09-19 17:36:32.986 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 22.8866ms
2025-09-19 17:36:32.990 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRURGQzg4NzRBNDlCM0UzNDEwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:36:32.996 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRURGQzg4NzRBNDlCM0UzNDEwAA== (legacy)
2025-09-19 17:36:33.368 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-09-19 17:36:33.372 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:36:33.374 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:36:33.376 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRURGQzg4NzRBNDlCM0UzNDEwAA==","status":"read","timestamp":"1758283595","recipient_id":"918974005240","conversation":{"id":"f2df123bcca189d6448ce68e5b71a67a","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:36:33.378 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:36:33.379 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRURGQzg4NzRBNDlCM0UzNDEwAA==","status":"read","timestamp":"1758283595","recipient_id":"918974005240","conversation":{"id":"f2df123bcca189d6448ce68e5b71a67a","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:36:33.380 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:36:33.381 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 17:36:33.382 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.7574ms
2025-09-19 17:36:33.387 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRURGQzg4NzRBNDlCM0UzNDEwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:36:33.388 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:36:33.391 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRURGQzg4NzRBNDlCM0UzNDEwAA==
2025-09-19 17:36:33.392 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 24.2288ms
2025-09-19 17:36:33.395 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRURGQzg4NzRBNDlCM0UzNDEwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:36:33.403 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='29834d05-bdee-4ae5-b361-463ae33117f7', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-09-19 17:36:33.406 +05:30 [INF] ℹ️ MessageLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRURGQzg4NzRBNDlCM0UzNDEwAA== → Read
2025-09-19 17:36:37.222 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 637
2025-09-19 17:36:37.225 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:36:37.227 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:36:37.230 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRURGQzg4NzRBNDlCM0UzNDEwAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggOUJENjc0NjU0QkNFNTU2QkE1NTFBNUJEOTBCODVGMTYA","timestamp":"1758283598","type":"button","button":{"payload":"Back to Support Menu","text":"Back to Support Menu"}}]},"field":"messages"}]}]}
2025-09-19 17:36:37.233 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:36:37.233 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRURGQzg4NzRBNDlCM0UzNDEwAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggOUJENjc0NjU0QkNFNTU2QkE1NTFBNUJEOTBCODVGMTYA","timestamp":"1758283598","type":"button","button":{"payload":"Back to Support Menu","text":"Back to Support Menu"}}]},"field":"messages"}]}]}
2025-09-19 17:36:37.234 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:36:37.235 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-19 17:36:37.237 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.4672ms
2025-09-19 17:36:37.238 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-19 17:36:37.240 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:36:38.814 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggOUJENjc0NjU0QkNFNTU2QkE1NTFBNUJEOTBCODVGMTYA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRURGQzg4NzRBNDlCM0UzNDEwAA==, Text: Back to Support Menu
2025-09-19 17:36:38.822 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 1599.9002ms
2025-09-19 17:36:38.827 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRURGQzg4NzRBNDlCM0UzNDEwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-19 17:36:38.837 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__origin_Id_0='29834d05-bdee-4ae5-b361-463ae33117f7' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRURGQzg4NzRBNDlCM0UzNDEwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-09-19 17:36:38.845 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='97457a39-996c-4acf-a357-c5038b2dd21c'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
WHERE f."CTAFlowStepId" = @__stepId_0
ORDER BY f."ButtonIndex"
2025-09-19 17:36:38.848 +05:30 [INF] 🟡 Button text not found in bundle or flow links. Ref=wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRURGQzg4NzRBNDlCM0UzNDEwAA==, Text='Back to Support Menu'
2025-09-19 17:36:45.966 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 647
2025-09-19 17:36:45.969 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:36:45.970 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:36:45.972 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRURGQzg4NzRBNDlCM0UzNDEwAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggNTVERjg5M0NFMjc2N0E0Qjc1MURBMzlGRkI5NUNBMzUA","timestamp":"1758283607","type":"button","button":{"payload":"Talk to a Project Manager","text":"Talk to a Project Manager"}}]},"field":"messages"}]}]}
2025-09-19 17:36:45.973 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:36:45.974 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRURGQzg4NzRBNDlCM0UzNDEwAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggNTVERjg5M0NFMjc2N0E0Qjc1MURBMzlGRkI5NUNBMzUA","timestamp":"1758283607","type":"button","button":{"payload":"Talk to a Project Manager","text":"Talk to a Project Manager"}}]},"field":"messages"}]}]}
2025-09-19 17:36:45.974 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:36:45.975 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-19 17:36:45.976 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.7615ms
2025-09-19 17:36:45.978 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-19 17:36:45.979 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:36:46.644 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggNTVERjg5M0NFMjc2N0E0Qjc1MURBMzlGRkI5NUNBMzUA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRURGQzg4NzRBNDlCM0UzNDEwAA==, Text: Talk to a Project Manager
2025-09-19 17:36:46.646 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 679.9485ms
2025-09-19 17:36:46.652 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRURGQzg4NzRBNDlCM0UzNDEwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-19 17:36:46.659 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__origin_Id_0='29834d05-bdee-4ae5-b361-463ae33117f7' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRURGQzg4NzRBNDlCM0UzNDEwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-09-19 17:36:46.662 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='97457a39-996c-4acf-a357-c5038b2dd21c'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
WHERE f."CTAFlowStepId" = @__stepId_0
ORDER BY f."ButtonIndex"
2025-09-19 17:36:46.664 +05:30 [INF] 🟡 Button text not found in bundle or flow links. Ref=wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRURGQzg4NzRBNDlCM0UzNDEwAA==, Text='Talk to a Project Manager'
2025-09-19 17:36:53.015 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-19 17:36:53.022 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:36:53.022 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 7.7213ms
2025-09-19 17:36:53.025 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-19 17:36:53.029 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:36:53.031 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-19 17:36:53.036 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 17:36:53.061 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-09-19 17:36:53.065 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 17:36:53.070 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 31.3624ms
2025-09-19 17:36:53.071 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-19 17:36:53.072 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 47.3867ms
2025-09-19 17:36:54.231 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - null null
2025-09-19 17:36:54.234 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:36:54.235 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - 204 null null 4.5758ms
2025-09-19 17:36:54.238 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - null 0
2025-09-19 17:36:54.241 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:36:54.242 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-19 17:36:54.245 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 17:36:54.267 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-19 17:36:54.277 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='5d760969-9fb2-481a-9139-be56c85c2f3b'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-09-19 17:36:54.367 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-19 17:36:54.373 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__flowId_Value_0='2b73877c-3c18-4fbb-af61-1906393bb2d3', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", t0."Id", t0."CTAFlowConfigId", t0."PositionX", t0."PositionY", t0."RequiredSource", t0."RequiredTag", t0."StepOrder", t0."TemplateToSend", t0."TemplateType", t0."TriggerButtonText", t0."TriggerButtonType", t0."Id0", t0."ButtonIndex", t0."ButtonSubType", t0."ButtonText", t0."ButtonType", t0."ButtonValue", t0."CTAFlowStepId", t0."NextStepId"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."Id" = @__flowId_Value_0 AND c."BusinessId" = @__businessId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."CTAFlowConfigId", c0."PositionX", c0."PositionY", c0."RequiredSource", c0."RequiredTag", c0."StepOrder", c0."TemplateToSend", c0."TemplateType", c0."TriggerButtonText", c0."TriggerButtonType", f."Id" AS "Id0", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
    FROM "CTAFlowSteps" AS c0
    LEFT JOIN "FlowButtonLinks" AS f ON c0."Id" = f."CTAFlowStepId"
) AS t0 ON t."Id" = t0."CTAFlowConfigId"
ORDER BY t."Id", t0."Id"
2025-09-19 17:36:54.393 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 17:36:54.396 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:36:54.397 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:36:55.999 +05:30 [INF] Received HTTP response headers after 1601.0538ms - 200
2025-09-19 17:36:56.001 +05:30 [INF] End processing HTTP request after 1604.9335ms - 200
2025-09-19 17:36:56.631 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaign_CTAFlowConfigId_Value_0='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "CTAFlowSteps" AS c
WHERE c."CTAFlowConfigId" = @__campaign_CTAFlowConfigId_Value_0
ORDER BY c."StepOrder"
LIMIT 1
2025-09-19 17:36:56.670 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 17:36:56.674 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-19 17:36:56.676 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 17:36:56.678 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 17:36:57.854 +05:30 [INF] Received HTTP response headers after 1174.2661ms - 200
2025-09-19 17:36:57.855 +05:30 [INF] End processing HTTP request after 1178.693ms - 200
2025-09-19 17:36:58.006 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p0='cd6749e8-9a99-465d-b245-9abd804789a9', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='[{"i":0,"t":"Explore Our Services","position":1,"text":"Explore Our Services","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"t":"View Our Products","position":2,"text":"View Our Products","type":"QUICK_REPLY","subType":"quick_reply"},{"i":2,"t":"Customer Support","position":3,"text":"Customer Support","type":"QUICK_REPLY","subType":"quick_reply"}]', @p3='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p4='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c' (Nullable = true), @p5='5d760969-9fb2-481a-9139-be56c85c2f3b' (Nullable = true), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T12:06:57.8747447Z' (DbType = DateTime), @p8=NULL, @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='welcome_menu_minds' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDhCQUM0RUVBQjU0OTdEMTlCAA==', @p14='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDhCQUM0RUVBQjU0OTdEMTlCAA==","message_status":"accepted"}]}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17=NULL, @p18='37c3a209-2243-4416-8750-69201d5e0185' (Nullable = true), @p19='2025-09-19T12:06:57.8747448Z' (Nullable = true) (DbType = DateTime), @p20='campaign', @p21='Sent' (Nullable = false), @p22='e6fb3d7a-e97e-4d1e-a52f-7944e97ea60b', @p23='True', @p24=NULL, @p25='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p26='[{"i":0,"t":"Explore Our Services","position":1,"text":"Explore Our Services","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"t":"View Our Products","position":2,"text":"View Our Products","type":"QUICK_REPLY","subType":"quick_reply"},{"i":2,"t":"Customer Support","position":3,"text":"Customer Support","type":"QUICK_REPLY","subType":"quick_reply"}]', @p27='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p28='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c' (Nullable = true), @p29='5d760969-9fb2-481a-9139-be56c85c2f3b', @p30=NULL, @p31=NULL, @p32=NULL (DbType = DateTime), @p33='75df7429-287c-406a-83d8-0dfa045b0093', @p34=NULL, @p35='2025-09-19T12:06:57.8780060Z' (DbType = DateTime), @p36='system', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40=NULL, @p41=NULL, @p42='False', @p43=NULL (DbType = DateTime), @p44=NULL, @p45=NULL, @p46='Hello! Thank you for contacting MindsMiratus.

If you're a new visitor, we're happy to help you get started. If you're an existing customer, we're here to support you. Please choose from the options below.' (Nullable = false), @p47='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDhCQUM0RUVBQjU0OTdEMTlCAA==', @p48='cd6749e8-9a99-465d-b245-9abd804789a9' (Nullable = true), @p49=NULL (DbType = DateTime), @p50='17111212-d8a7-4d76-9fc2-9ed370446645', @p51='0', @p52='37c3a209-2243-4416-8750-69201d5e0185' (Nullable = true), @p53='Sent', @p54='2025-09-19T12:06:57.8780576Z' (Nullable = true) (DbType = DateTime), @p55=NULL, @p56='welcome_menu_minds', @p57=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57);
2025-09-19 17:36:58.013 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 17:36:58.015 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 3766.9068ms
2025-09-19 17:36:58.017 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-19 17:36:58.018 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - 200 null application/json; charset=utf-8 3780.0971ms
2025-09-19 17:36:59.381 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-19 17:36:59.385 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:36:59.386 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:36:59.389 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDhCQUM0RUVBQjU0OTdEMTlCAA==","status":"sent","timestamp":"1758283621","recipient_id":"918974005240","conversation":{"id":"a539855e8ca0b405b5a0e1f080dbc034","expiration_timestamp":"1758283621","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:36:59.391 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:36:59.391 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDhCQUM0RUVBQjU0OTdEMTlCAA==","status":"sent","timestamp":"1758283621","recipient_id":"918974005240","conversation":{"id":"a539855e8ca0b405b5a0e1f080dbc034","expiration_timestamp":"1758283621","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:36:59.392 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:36:59.393 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 17:36:59.394 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.151ms
2025-09-19 17:36:59.399 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDhCQUM0RUVBQjU0OTdEMTlCAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:36:59.400 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:36:59.403 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 21.8642ms
2025-09-19 17:36:59.414 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='e6fb3d7a-e97e-4d1e-a52f-7944e97ea60b'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-19 17:36:59.418 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDhCQUM0RUVBQjU0OTdEMTlCAA== (legacy)
2025-09-19 17:36:59.766 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-09-19 17:36:59.770 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:36:59.771 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:36:59.774 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDhCQUM0RUVBQjU0OTdEMTlCAA==","status":"read","timestamp":"1758283621","recipient_id":"918974005240","conversation":{"id":"a539855e8ca0b405b5a0e1f080dbc034","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:36:59.776 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:36:59.776 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDhCQUM0RUVBQjU0OTdEMTlCAA==","status":"read","timestamp":"1758283621","recipient_id":"918974005240","conversation":{"id":"a539855e8ca0b405b5a0e1f080dbc034","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:36:59.777 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:36:59.778 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 17:36:59.779 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.019ms
2025-09-19 17:36:59.783 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDhCQUM0RUVBQjU0OTdEMTlCAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:36:59.784 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:36:59.789 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='e6fb3d7a-e97e-4d1e-a52f-7944e97ea60b'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-19 17:36:59.789 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 23.1084ms
2025-09-19 17:36:59.812 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p2='e6fb3d7a-e97e-4d1e-a52f-7944e97ea60b', @p0='2025-09-19T12:07:01.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-19 17:36:59.816 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDhCQUM0RUVBQjU0OTdEMTlCAA== → Read
2025-09-19 17:37:02.655 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 637
2025-09-19 17:37:02.658 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:37:02.659 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:37:02.664 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDhCQUM0RUVBQjU0OTdEMTlCAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMzY4MUUzQkYzNjk4ODBFNDNBNDU0NkVBNENDOUExOTIA","timestamp":"1758283624","type":"button","button":{"payload":"Explore Our Services","text":"Explore Our Services"}}]},"field":"messages"}]}]}
2025-09-19 17:37:02.666 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:37:02.667 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDhCQUM0RUVBQjU0OTdEMTlCAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMzY4MUUzQkYzNjk4ODBFNDNBNDU0NkVBNENDOUExOTIA","timestamp":"1758283624","type":"button","button":{"payload":"Explore Our Services","text":"Explore Our Services"}}]},"field":"messages"}]}]}
2025-09-19 17:37:02.668 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:37:02.669 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-19 17:37:02.671 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.4472ms
2025-09-19 17:37:02.672 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-19 17:37:02.673 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:37:04.040 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMzY4MUUzQkYzNjk4ODBFNDNBNDU0NkVBNENDOUExOTIA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDhCQUM0RUVBQjU0OTdEMTlCAA==, Text: Explore Our Services
2025-09-19 17:37:04.047 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 1392.718ms
2025-09-19 17:37:04.054 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDhCQUM0RUVBQjU0OTdEMTlCAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-19 17:37:04.062 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__origin_Id_0='cd6749e8-9a99-465d-b245-9abd804789a9' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDhCQUM0RUVBQjU0OTdEMTlCAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-09-19 17:37:04.068 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sourceStepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @__flowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3', @__buttonIndex_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-09-19 17:37:04.072 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-09-19 17:37:04.096 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p0='e0704456-1517-448d-b7bc-6a371a6ac8da', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='0' (Nullable = true), @p3='e6fb3d7a-e97e-4d1e-a52f-7944e97ea60b' (Nullable = true), @p4='918974005240', @p5=NULL, @p6='2025-09-19T12:07:04.0761629Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='cd6749e8-9a99-465d-b245-9abd804789a9' (Nullable = true), @p9=NULL, @p10='475a1bc2-96b3-4db9-a4e3-f93aaf352a45' (Nullable = true), @p11='37c3a209-2243-4416-8750-69201d5e0185' (Nullable = true), @p12='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @p13='welcome_menu_minds' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='Explore Our Services'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-19 17:37:04.102 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignSendLogId_Value_0='e6fb3d7a-e97e-4d1e-a52f-7944e97ea60b'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Provider", c0."PhoneNumberId"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
WHERE c."Id" = @__campaignSendLogId_Value_0
LIMIT 1
2025-09-19 17:37:04.108 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_TargetStepId_0='806ee374-1a80-4fb2-ba55-c1ec1685c618' (Nullable = true), @__8__locals1_context_FlowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__8__locals1_context_TargetStepId_0 AND c."CTAFlowConfigId" = @__8__locals1_context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-09-19 17:37:04.113 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 17:37:04.115 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:37:04.117 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:37:05.118 +05:30 [INF] Received HTTP response headers after 1000.0683ms - 200
2025-09-19 17:37:05.121 +05:30 [INF] End processing HTTP request after 1005.418ms - 200
2025-09-19 17:37:05.345 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 17:37:05.351 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-19 17:37:05.354 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 17:37:05.355 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 17:37:06.974 +05:30 [INF] Received HTTP response headers after 1617.0061ms - 200
2025-09-19 17:37:06.975 +05:30 [INF] End processing HTTP request after 1621.39ms - 200
2025-09-19 17:37:06.981 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='57d1240a-4686-4569-9668-a88665c6224a', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-09-19T12:07:06.9779795Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='e1033f14-b949-4167-98e9-52c58910663f' (Nullable = true), @p9='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDMzODMwRjBDQTgwRDRFMTEyAA==","message_status":"accepted"}]}', @p10='8098fe43-e816-4538-a80e-86740cb48fed' (Nullable = true), @p11=NULL (DbType = Guid), @p12='806ee374-1a80-4fb2-ba55-c1ec1685c618', @p13='services_menu_v1' (Nullable = false), @p14='True', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='e1033f14-b949-4167-98e9-52c58910663f', @p20='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p21=NULL, @p22='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p23='806ee374-1a80-4fb2-ba55-c1ec1685c618' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26='2025-09-19T12:07:06.9777029Z' (DbType = DateTime), @p27=NULL, @p28='1' (Nullable = true), @p29='False', @p30=NULL, @p31='services_menu_v1' (Nullable = false), @p32='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDMzODMwRjBDQTgwRDRFMTEyAA==', @p33='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDMzODMwRjBDQTgwRDRFMTEyAA==","message_status":"accepted"}]}', @p34='918974005240' (Nullable = false), @p35='cd6749e8-9a99-465d-b245-9abd804789a9' (Nullable = true), @p36=NULL, @p37=NULL (DbType = Guid), @p38='2025-09-19T12:07:06.9777051Z' (Nullable = true) (DbType = DateTime), @p39='flow', @p40='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40)
RETURNING "MessageTime";
2025-09-19 17:37:08.672 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-19 17:37:08.676 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:37:08.678 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:37:08.682 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDMzODMwRjBDQTgwRDRFMTEyAA==","status":"sent","timestamp":"1758283630","recipient_id":"918974005240","conversation":{"id":"592b2fa2e3d0f873cdaa87fb9025e529","expiration_timestamp":"1758283630","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:37:08.684 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:37:08.685 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDMzODMwRjBDQTgwRDRFMTEyAA==","status":"sent","timestamp":"1758283630","recipient_id":"918974005240","conversation":{"id":"592b2fa2e3d0f873cdaa87fb9025e529","expiration_timestamp":"1758283630","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:37:08.685 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:37:08.687 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 17:37:08.688 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.2375ms
2025-09-19 17:37:08.694 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDMzODMwRjBDQTgwRDRFMTEyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:37:08.695 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:37:08.698 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDMzODMwRjBDQTgwRDRFMTEyAA==
2025-09-19 17:37:08.699 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 27.7826ms
2025-09-19 17:37:08.702 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDMzODMwRjBDQTgwRDRFMTEyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:37:08.712 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDMzODMwRjBDQTgwRDRFMTEyAA== (legacy)
2025-09-19 17:37:08.736 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-09-19 17:37:08.739 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:37:08.741 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:37:08.743 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDMzODMwRjBDQTgwRDRFMTEyAA==","status":"read","timestamp":"1758283630","recipient_id":"918974005240","conversation":{"id":"592b2fa2e3d0f873cdaa87fb9025e529","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:37:08.745 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:37:08.746 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:37:08.746 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDMzODMwRjBDQTgwRDRFMTEyAA==","status":"read","timestamp":"1758283630","recipient_id":"918974005240","conversation":{"id":"592b2fa2e3d0f873cdaa87fb9025e529","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:37:08.748 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.932ms
2025-09-19 17:37:08.750 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 17:37:08.751 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:37:08.756 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 20.5747ms
2025-09-19 17:37:08.786 +05:30 [INF] Executed DbCommand (26ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDMzODMwRjBDQTgwRDRFMTEyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:37:08.791 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDMzODMwRjBDQTgwRDRFMTEyAA==
2025-09-19 17:37:08.795 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDMzODMwRjBDQTgwRDRFMTEyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:37:08.800 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='e1033f14-b949-4167-98e9-52c58910663f', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-09-19 17:37:08.803 +05:30 [INF] ℹ️ MessageLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDMzODMwRjBDQTgwRDRFMTEyAA== → Read
2025-09-19 17:37:15.050 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 631
2025-09-19 17:37:15.054 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:37:15.055 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:37:15.058 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDhCQUM0RUVBQjU0OTdEMTlCAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMEFGMzVGMkNGRjQ3NTQzNjgyQjgxRjA5QTJEQjc2QkMA","timestamp":"1758283636","type":"button","button":{"payload":"View Our Products","text":"View Our Products"}}]},"field":"messages"}]}]}
2025-09-19 17:37:15.060 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:37:15.060 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDhCQUM0RUVBQjU0OTdEMTlCAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMEFGMzVGMkNGRjQ3NTQzNjgyQjgxRjA5QTJEQjc2QkMA","timestamp":"1758283636","type":"button","button":{"payload":"View Our Products","text":"View Our Products"}}]},"field":"messages"}]}]}
2025-09-19 17:37:15.061 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:37:15.062 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-19 17:37:15.064 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.8541ms
2025-09-19 17:37:15.066 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-19 17:37:15.068 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:37:15.796 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMEFGMzVGMkNGRjQ3NTQzNjgyQjgxRjA5QTJEQjc2QkMA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDhCQUM0RUVBQjU0OTdEMTlCAA==, Text: View Our Products
2025-09-19 17:37:15.796 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 745.746ms
2025-09-19 17:37:15.801 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDhCQUM0RUVBQjU0OTdEMTlCAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-19 17:37:15.809 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__origin_Id_0='cd6749e8-9a99-465d-b245-9abd804789a9' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDhCQUM0RUVBQjU0OTdEMTlCAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-09-19 17:37:15.814 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sourceStepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @__flowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3', @__buttonIndex_2='1'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-09-19 17:37:15.819 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-09-19 17:37:15.825 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='4e05e306-3c2a-4d16-ac50-0237f04e34fc', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='1' (Nullable = true), @p3='e6fb3d7a-e97e-4d1e-a52f-7944e97ea60b' (Nullable = true), @p4='918974005240', @p5=NULL, @p6='2025-09-19T12:07:15.8226870Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='cd6749e8-9a99-465d-b245-9abd804789a9' (Nullable = true), @p9=NULL, @p10='60ff17a0-343b-4113-b193-91cb3c8b1557' (Nullable = true), @p11='37c3a209-2243-4416-8750-69201d5e0185' (Nullable = true), @p12='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c', @p13='welcome_menu_minds' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='View Our Products'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-19 17:37:15.830 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignSendLogId_Value_0='e6fb3d7a-e97e-4d1e-a52f-7944e97ea60b'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Provider", c0."PhoneNumberId"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
WHERE c."Id" = @__campaignSendLogId_Value_0
LIMIT 1
2025-09-19 17:37:15.834 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_TargetStepId_0='62ee00c5-2a9a-4077-a25e-f8288347a910' (Nullable = true), @__8__locals1_context_FlowId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__8__locals1_context_TargetStepId_0 AND c."CTAFlowConfigId" = @__8__locals1_context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-09-19 17:37:15.839 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 17:37:15.842 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:37:15.844 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:37:16.692 +05:30 [INF] Received HTTP response headers after 847.3208ms - 200
2025-09-19 17:37:16.695 +05:30 [INF] End processing HTTP request after 852.165ms - 200
2025-09-19 17:37:16.991 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 17:37:16.996 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-19 17:37:17.000 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 17:37:17.002 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 17:37:18.011 +05:30 [INF] Received HTTP response headers after 1008.0277ms - 200
2025-09-19 17:37:18.013 +05:30 [INF] End processing HTTP request after 1013.2315ms - 200
2025-09-19 17:37:18.027 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='c7a4a25c-99ca-4789-839e-3f2e3c013237', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='1' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-09-19T12:07:18.0246216Z' (DbType = DateTime), @p7='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p8='20359727-8256-4570-b9ac-8cf0935e2050' (Nullable = true), @p9='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzI3MTZFQTk4RkMxRUFFODg3AA==","message_status":"accepted"}]}', @p10='2c752adb-7dec-416f-ae37-688ad4460bd0' (Nullable = true), @p11=NULL (DbType = Guid), @p12='62ee00c5-2a9a-4077-a25e-f8288347a910', @p13='products_info_v1' (Nullable = false), @p14='True', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='20359727-8256-4570-b9ac-8cf0935e2050', @p20='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p21='[{"i":1,"t":"Back to Main Menu","ty":"QUICK_REPLY","v":"","ns":"3bc5f00f-c6e4-4141-9c71-e26d4c61a20c"}]', @p22='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p23='62ee00c5-2a9a-4077-a25e-f8288347a910' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26='2025-09-19T12:07:18.0244384Z' (DbType = DateTime), @p27=NULL, @p28='1' (Nullable = true), @p29='False', @p30=NULL, @p31='products_info_v1' (Nullable = false), @p32='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzI3MTZFQTk4RkMxRUFFODg3AA==', @p33='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzI3MTZFQTk4RkMxRUFFODg3AA==","message_status":"accepted"}]}', @p34='918974005240' (Nullable = false), @p35='cd6749e8-9a99-465d-b245-9abd804789a9' (Nullable = true), @p36=NULL, @p37=NULL (DbType = Guid), @p38='2025-09-19T12:07:18.0244404Z' (Nullable = true) (DbType = DateTime), @p39='flow', @p40='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40)
RETURNING "MessageTime";
2025-09-19 17:37:19.551 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-19 17:37:19.556 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:37:19.558 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:37:19.561 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzI3MTZFQTk4RkMxRUFFODg3AA==","status":"sent","timestamp":"1758283641","recipient_id":"918974005240","conversation":{"id":"6dabed26df48688a280a89b800956106","expiration_timestamp":"1758283641","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:37:19.563 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:37:19.564 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzI3MTZFQTk4RkMxRUFFODg3AA==","status":"sent","timestamp":"1758283641","recipient_id":"918974005240","conversation":{"id":"6dabed26df48688a280a89b800956106","expiration_timestamp":"1758283641","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:37:19.566 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:37:19.568 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 17:37:19.570 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 8.8633ms
2025-09-19 17:37:19.573 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzI3MTZFQTk4RkMxRUFFODg3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:37:19.575 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:37:19.578 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzI3MTZFQTk4RkMxRUFFODg3AA==
2025-09-19 17:37:19.580 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 29.0294ms
2025-09-19 17:37:19.584 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzI3MTZFQTk4RkMxRUFFODg3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:37:19.591 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzI3MTZFQTk4RkMxRUFFODg3AA== (legacy)
2025-09-19 17:37:20.068 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-09-19 17:37:20.073 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:37:20.074 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:37:20.078 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzI3MTZFQTk4RkMxRUFFODg3AA==","status":"read","timestamp":"1758283641","recipient_id":"918974005240","conversation":{"id":"6dabed26df48688a280a89b800956106","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:37:20.080 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:37:20.080 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzI3MTZFQTk4RkMxRUFFODg3AA==","status":"read","timestamp":"1758283641","recipient_id":"918974005240","conversation":{"id":"6dabed26df48688a280a89b800956106","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:37:20.082 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:37:20.083 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 17:37:20.085 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.7974ms
2025-09-19 17:37:20.089 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzI3MTZFQTk4RkMxRUFFODg3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:37:20.090 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:37:20.092 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzI3MTZFQTk4RkMxRUFFODg3AA==
2025-09-19 17:37:20.094 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 25.4975ms
2025-09-19 17:37:20.097 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzI3MTZFQTk4RkMxRUFFODg3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:37:20.122 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p1='20359727-8256-4570-b9ac-8cf0935e2050', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-09-19 17:37:20.126 +05:30 [INF] ℹ️ MessageLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzI3MTZFQTk4RkMxRUFFODg3AA== → Read
2025-09-19 17:37:21.621 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b/summary - null null
2025-09-19 17:37:21.627 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:37:21.629 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b/summary - 204 null null 7.7518ms
2025-09-19 17:37:21.643 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b/summary - null null
2025-09-19 17:37:21.649 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:37:21.651 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-09-19 17:37:21.656 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-09-19 17:37:21.691 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 17:37:21.701 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='5d760969-9fb2-481a-9139-be56c85c2f3b'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-09-19 17:37:21.708 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-09-19 17:37:21.712 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 53.0159ms
2025-09-19 17:37:21.714 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-09-19 17:37:21.716 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b/summary - 200 null application/json; charset=utf-8 72.8095ms
2025-09-19 17:37:22.084 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b?page=1&pageSize=10&status=&search= - null null
2025-09-19 17:37:22.088 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:37:22.089 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b?page=1&pageSize=10&status=&search= - 204 null null 5.4536ms
2025-09-19 17:37:22.094 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b?page=1&pageSize=10&status=&search= - null null
2025-09-19 17:37:22.098 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:37:22.101 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-09-19 17:37:22.109 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-09-19 17:37:22.123 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='5d760969-9fb2-481a-9139-be56c85c2f3b'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
WHERE c."CampaignId" = @__campaignId_0
2025-09-19 17:37:22.151 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='5d760969-9fb2-481a-9139-be56c85c2f3b', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", c0."Name" AS "ContactName", c0."PhoneNumber" AS "ContactPhone", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
INNER JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-09-19 17:37:22.157 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 17:37:22.170 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 58.1852ms
2025-09-19 17:37:22.173 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-09-19 17:37:22.174 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/5d760969-9fb2-481a-9139-be56c85c2f3b?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 80.322ms
2025-09-19 17:37:27.096 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/e6fb3d7a-e97e-4d1e-a52f-7944e97ea60b - null null
2025-09-19 17:37:27.100 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:37:27.102 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/e6fb3d7a-e97e-4d1e-a52f-7944e97ea60b - 204 null null 6.2555ms
2025-09-19 17:37:27.106 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/e6fb3d7a-e97e-4d1e-a52f-7944e97ea60b - null null
2025-09-19 17:37:27.113 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:37:27.115 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-09-19 17:37:27.120 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-09-19 17:37:27.166 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__initialCampaignSendLogId_0='e6fb3d7a-e97e-4d1e-a52f-7944e97ea60b'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId", c0."Id", c0."BusinessId", c0."CTAFlowConfigId", c0."CampaignId", c0."CampaignType", c0."CreatedAt", c0."CreatedBy", c0."CtaId", c0."DeletedAt", c0."DeletedBy", c0."FollowUpTemplateId", c0."ImageCaption", c0."ImageUrl", c0."IsDeleted", c0."MessageBody", c0."MessageTemplate", c0."Name", c0."PhoneNumberId", c0."Provider", c0."ScheduledAt", c0."SourceCampaignId", c0."Status", c0."TemplateId", c0."TemplateParameters", c0."UpdatedAt", c1."Id", c1."AssignedAgentId", c1."BusinessId", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
INNER JOIN "Contacts" AS c1 ON c."ContactId" = c1."Id"
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-09-19 17:37:27.187 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sentLog_ContactId_0='75df7429-287c-406a-83d8-0dfa045b0093', @__sentLog_CampaignId_1='5d760969-9fb2-481a-9139-be56c85c2f3b', @__sessionStart_2='2025-09-19T12:06:57.8780570Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT c."CreatedAt"
FROM "CampaignSendLogs" AS c
WHERE c."ContactId" = @__sentLog_ContactId_0 AND c."CampaignId" = @__sentLog_CampaignId_1 AND c."CreatedAt" > @__sessionStart_2
ORDER BY c."CreatedAt"
LIMIT 1
2025-09-19 17:37:27.198 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sentLog_ContactId_0='75df7429-287c-406a-83d8-0dfa045b0093', @__sentLog_CTAFlowConfigId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @__sessionStart_2='2025-09-19T12:06:57.8780570Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT c."CreatedAt"
FROM "CampaignSendLogs" AS c
WHERE c."ContactId" = @__sentLog_ContactId_0 AND c."CTAFlowConfigId" = @__sentLog_CTAFlowConfigId_1 AND c."CreatedAt" > @__sessionStart_2
ORDER BY c."CreatedAt"
LIMIT 1
2025-09-19 17:37:27.216 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sentLog_Id_0='e6fb3d7a-e97e-4d1e-a52f-7944e97ea60b', @__sessionStart_1='2025-09-19T12:06:57.8780570Z' (DbType = DateTime), @__sessionEnd_2='2025-09-20T12:06:57.8780570Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."RunId", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__sentLog_Id_0 AND c."ClickedAt" >= @__sessionStart_1 AND c."ClickedAt" < @__sessionEnd_2
ORDER BY c."ClickedAt"
2025-09-19 17:37:27.223 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_sentLog_CTAFlowConfigId_Value_0='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT c."FlowName"
FROM "CTAFlowConfigs" AS c
WHERE c."Id" = @__8__locals1_sentLog_CTAFlowConfigId_Value_0
LIMIT 1
2025-09-19 17:37:27.233 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_sentLog_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_sentLog_ContactId_1='75df7429-287c-406a-83d8-0dfa045b0093', @__8__locals1_sentLog_CTAFlowConfigId_2='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @__8__locals1_sessionStart_3='2025-09-19T12:06:57.8780570Z' (DbType = DateTime), @__8__locals1_sessionEnd_4='2025-09-20T12:06:57.8780570Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."MessageLogId", c."SentAt", c."CreatedAt", c."TemplateId", c."CTAFlowStepId", c."DeliveredAt", c."ReadAt"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__8__locals1_sentLog_BusinessId_0 AND c."ContactId" = @__8__locals1_sentLog_ContactId_1 AND c."CTAFlowConfigId" = @__8__locals1_sentLog_CTAFlowConfigId_2 AND c."CreatedAt" >= @__8__locals1_sessionStart_3 AND c."CreatedAt" < @__8__locals1_sessionEnd_4
ORDER BY c."CreatedAt"
2025-09-19 17:37:27.329 +05:30 [INF] Executed DbCommand (65ms) [Parameters=[@__chainCslIds_0={  } (DbType = Object), @__8__locals1_sessionStart_1='2025-09-19T12:06:57.8780570Z' (DbType = DateTime), @__8__locals1_sessionEnd_2='2025-09-20T12:06:57.8780570Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."BusinessId", f."ButtonIndex", f."CampaignSendLogId", f."ContactPhone", f."ErrorMessage", f."ExecutedAt", f."FlowId", f."MessageLogId", f."RawResponse", f."RequestId", f."RunId", f."StepId", f."StepName", f."Success", f."TemplateName", f."TemplateType", f."TrackingLogId", f."TriggeredByButton"
FROM "FlowExecutionLogs" AS f
WHERE f."CampaignSendLogId" IS NOT NULL AND f."CampaignSendLogId" = ANY (@__chainCslIds_0) AND f."ExecutedAt" >= @__8__locals1_sessionStart_1 AND f."ExecutedAt" < @__8__locals1_sessionEnd_2
ORDER BY f."ExecutedAt"
2025-09-19 17:37:27.338 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_sentLog_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_sentLog_CTAFlowConfigId_1='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @__phoneA_2='+918974005240', @__phoneB_3='918974005240', @__8__locals1_sessionStart_4='2025-09-19T12:06:57.8780570Z' (DbType = DateTime), @__8__locals1_sessionEnd_5='2025-09-20T12:06:57.8780570Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."BusinessId", f."ButtonIndex", f."CampaignSendLogId", f."ContactPhone", f."ErrorMessage", f."ExecutedAt", f."FlowId", f."MessageLogId", f."RawResponse", f."RequestId", f."RunId", f."StepId", f."StepName", f."Success", f."TemplateName", f."TemplateType", f."TrackingLogId", f."TriggeredByButton"
FROM "FlowExecutionLogs" AS f
WHERE f."BusinessId" = @__8__locals1_sentLog_BusinessId_0 AND f."FlowId" = @__8__locals1_sentLog_CTAFlowConfigId_1 AND (f."ContactPhone" = @__phoneA_2 OR f."ContactPhone" = @__phoneB_3) AND f."ExecutedAt" >= @__8__locals1_sessionStart_4 AND f."ExecutedAt" < @__8__locals1_sessionEnd_5
ORDER BY f."ExecutedAt"
2025-09-19 17:37:27.353 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.Tracking.DTOs.JourneyResponseDto'.
2025-09-19 17:37:27.364 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 240.8063ms
2025-09-19 17:37:27.367 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-09-19 17:37:27.369 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/e6fb3d7a-e97e-4d1e-a52f-7944e97ea60b - 200 null application/json; charset=utf-8 262.3078ms
2025-09-19 17:44:04.210 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 17:44:04.282 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 17:44:04.301 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 17:44:05.498 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 17:44:06.261 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 17:44:06.288 +05:30 [INF] ClickLogWorker started
2025-09-19 17:44:06.525 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 17:44:06.526 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 17:44:06.527 +05:30 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-19 17:44:06.528 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 17:44:06.534 +05:30 [INF] Hosting environment: Development
2025-09-19 17:44:06.535 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 17:44:06.551 +05:30 [INF] Executed DbCommand (72ms) [Parameters=[@__cutoff_0='2025-09-12T12:14:04.4504625Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-19 17:44:07.452 +05:30 [INF] ClickLogWorker stopped
2025-09-19 17:44:08.321 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 17:44:08.523 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 209.7546ms
2025-09-19 17:44:08.551 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 17:44:08.559 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.4652ms
2025-09-19 17:44:08.641 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 17:44:08.685 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.026ms
2025-09-19 17:44:08.890 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 17:44:09.195 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 304.5075ms
2025-09-19 17:44:17.291 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-19 17:44:17.300 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 17:44:17.361 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:44:17.369 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 78.6931ms
2025-09-19 17:44:17.376 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 49
2025-09-19 17:44:17.393 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:44:17.542 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19-09-2025 12:07:40 PM', Current time (UTC): '19-09-2025 12:14:17 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-19 17:44:17.627 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19-09-2025 12:07:40 PM', Current time (UTC): '19-09-2025 12:14:17 PM'.
2025-09-19 17:44:17.634 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 17:44:17.662 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-19 17:44:17.787 +05:30 [INF] 🔑 Login attempt for email: tesla@gmail.com
2025-09-19 17:44:17.897 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_Email_0='tesla@gmail.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-19 17:44:18.033 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__user_BusinessId_Value_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-19 17:44:18.227 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='24c1a1d5-9f49-4555-8663-497a30b5ea8c'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-19 17:44:18.245 +05:30 [INF] ✅ Token generated for: tesla@gmail.com
2025-09-19 17:44:18.260 +05:30 [INF] 🔎 JWT includes plan_id: 5f9f5de1-a0b2-48ba-b03d-77b27345613f
2025-09-19 17:44:18.264 +05:30 [INF] ✅ Login successful for tesla@gmail.com, Role: business, PlanId: "5f9f5de1-a0b2-48ba-b03d-77b27345613f"
2025-09-19 17:44:18.275 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:44:18.290 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 619.0136ms
2025-09-19 17:44:18.292 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-19 17:44:18.301 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 924.8ms
2025-09-19 17:44:18.325 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 17:44:18.333 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:44:18.334 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 9.8528ms
2025-09-19 17:44:18.340 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 17:44:18.345 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:44:18.368 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 17:44:18.377 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 17:44:18.400 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-19 17:44:18.453 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 17:44:18.458 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:44:18.476 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 95.6848ms
2025-09-19 17:44:18.479 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 17:44:18.482 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 141.7243ms
2025-09-19 17:44:18.504 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 17:44:18.509 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:44:18.511 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.0047ms
2025-09-19 17:44:18.520 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 17:44:18.524 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:44:18.532 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 17:44:18.534 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 17:44:18.549 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 17:44:18.554 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:44:18.558 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 20.8853ms
2025-09-19 17:44:18.562 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 17:44:18.565 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 44.6216ms
2025-09-19 17:44:18.622 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 17:44:18.627 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:44:18.631 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 17:44:18.634 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 17:44:18.643 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 17:44:18.649 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:44:18.652 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 14.7573ms
2025-09-19 17:44:18.655 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 17:44:18.657 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 34.8696ms
2025-09-19 17:44:34.822 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 17:44:34.829 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:44:34.831 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 9.2118ms
2025-09-19 17:44:34.838 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 17:44:34.841 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:44:34.844 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 17:44:34.845 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 17:44:34.856 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 17:44:34.862 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:44:34.865 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 17.0921ms
2025-09-19 17:44:34.867 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 17:44:34.869 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 31.7928ms
2025-09-19 17:44:40.212 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 17:44:40.217 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:44:40.219 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.3054ms
2025-09-19 17:44:40.226 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 17:44:40.231 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:44:40.233 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 17:44:40.235 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 17:44:40.242 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 17:44:40.248 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:44:40.250 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.5666ms
2025-09-19 17:44:40.252 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 17:44:40.254 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 28.1876ms
2025-09-19 17:44:57.298 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - null null
2025-09-19 17:44:57.303 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:44:57.304 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 17:44:57.305 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - 204 null null 7.0749ms
2025-09-19 17:44:57.314 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:44:57.320 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/ - null null
2025-09-19 17:44:57.321 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 17.2504ms
2025-09-19 17:44:57.325 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:44:57.332 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 17:44:57.334 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 17:44:57.339 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:44:57.345 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 17:44:57.346 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 17:44:57.355 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-19 17:44:57.356 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=25
2025-09-19 17:44:57.382 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-19 17:44:57.389 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType89`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:44:57.397 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 17:44:57.422 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 63.3427ms
2025-09-19 17:44:57.425 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 17:44:57.426 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 94.7036ms
2025-09-19 17:44:57.469 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 17:44:57.533 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 17:44:57.548 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 199.1318ms
2025-09-19 17:44:57.551 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 17:44:57.554 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/ - 200 null application/json; charset=utf-8 233.8171ms
2025-09-19 17:45:02.562 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 17:45:02.563 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 17:45:02.569 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:45:02.574 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 12.2569ms
2025-09-19 17:45:02.574 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:45:02.580 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 17:45:02.581 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 204 null null 17.6321ms
2025-09-19 17:45:02.585 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:45:02.590 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 17:45:02.591 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 17:45:02.595 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:45:02.597 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:45:02.601 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 17:45:02.603 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:45:02.622 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='PINNACLE'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 17:45:02.625 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-19 17:45:02.637 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 17:45:02.642 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 36.2813ms
2025-09-19 17:45:02.645 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:45:02.647 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 200 null application/json; charset=utf-8 56.9611ms
2025-09-19 17:45:02.680 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-09-19 17:45:02.688 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 85.3677ms
2025-09-19 17:45:02.691 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 17:45:02.693 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 113.2519ms
2025-09-19 17:45:02.702 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 17:45:02.706 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:45:02.707 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 5.173ms
2025-09-19 17:45:02.715 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 17:45:02.719 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:45:02.720 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:45:02.722 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:45:02.731 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 17:45:02.737 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 17:45:02.742 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 16.8517ms
2025-09-19 17:45:02.744 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 17:45:02.744 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:45:02.748 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:45:02.749 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 34.8828ms
2025-09-19 17:45:02.751 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:45:02.757 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:45:02.771 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 17:45:02.780 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 17:45:02.783 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 22.9828ms
2025-09-19 17:45:02.785 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:45:02.787 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 43.173ms
2025-09-19 17:45:33.319 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 17:45:33.323 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:45:33.324 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 5.0722ms
2025-09-19 17:45:33.329 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - application/json 173
2025-09-19 17:45:33.332 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:45:33.334 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api)'
2025-09-19 17:45:33.341 +05:30 [INF] Route matched with {action = "Upsert", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Upsert(System.String, UpsertRequest) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:45:36.467 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
LIMIT 1
2025-09-19 17:45:36.478 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__providerForChild_1='META_CLOUD', @__phoneNumberId_2='673199269218078'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__providerForChild_1 AND w."PhoneNumberId" = @__phoneNumberId_2
LIMIT 1
2025-09-19 17:45:36.704 +05:30 [INF] Executed DbCommand (26ms) [Parameters=[@p0='77684bff-5729-4f76-9db4-913040ab71a9', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='2025-09-19T12:15:36.4442033Z' (DbType = DateTime), @p3='True', @p4='True', @p5='673199269218078' (Nullable = false), @p6='META_CLOUD' (Nullable = false), @p7='', @p8=NULL (DbType = DateTime), @p9='5551622078' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WhatsAppPhoneNumbers" ("Id", "BusinessId", "CreatedAt", "IsActive", "IsDefault", "PhoneNumberId", "Provider", "SenderDisplayName", "UpdatedAt", "WhatsAppBusinessNumber")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-19 17:45:36.756 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__providerForChild_1='META_CLOUD', @__entity_Id_2='77684bff-5729-4f76-9db4-913040ab71a9'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" AS w
SET "IsDefault" = FALSE
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__providerForChild_1 AND w."Id" <> @__entity_Id_2
2025-09-19 17:45:36.775 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p3='c13c2c23-4ed0-4441-b5b2-6b2b581bdca3', @p0='673199269218078', @p1='2025-09-19T12:15:36.4442033Z' (Nullable = true) (DbType = DateTime), @p2='5551622078'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "PhoneNumberId" = @p0, "UpdatedAt" = @p1, "WhatsAppBusinessNumber" = @p2
WHERE "Id" = @p3;
2025-09-19 17:45:36.798 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber'.
2025-09-19 17:45:36.801 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api) in 3457.1944ms
2025-09-19 17:45:36.803 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api)'
2025-09-19 17:45:36.805 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 3475.7966ms
2025-09-19 17:45:38.505 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 17:45:38.510 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:45:38.511 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 6.3351ms
2025-09-19 17:45:38.522 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - application/json 130
2025-09-19 17:45:38.527 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:45:38.529 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api)'
2025-09-19 17:45:38.531 +05:30 [INF] Route matched with {action = "Upsert", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Upsert(System.String, UpsertRequest) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:45:38.543 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
LIMIT 1
2025-09-19 17:45:38.553 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__providerForChild_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__providerForChild_1 AND w."PhoneNumberId" = @__phoneNumberId_2
LIMIT 1
2025-09-19 17:45:38.567 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='e7abb04c-eaee-4f66-9234-6ef058499674', @p0='2025-09-19T12:15:38.5364290Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 17:45:38.593 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber'.
2025-09-19 17:45:38.596 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api) in 60.739ms
2025-09-19 17:45:38.599 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api)'
2025-09-19 17:45:38.601 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 78.7328ms
2025-09-19 17:45:41.960 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-09-19 17:45:41.965 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:45:41.966 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 6.7516ms
2025-09-19 17:45:41.971 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 572
2025-09-19 17:45:41.975 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:45:41.977 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 17:45:41.984 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 17:45:42.010 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__dto_Provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0 AND w."Provider" = @__dto_Provider_1
LIMIT 1
2025-09-19 17:45:42.038 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p3='c13c2c23-4ed0-4441-b5b2-6b2b581bdca3', @p0='673199269218077', @p1='2025-09-19T12:15:42.0173369Z' (Nullable = true) (DbType = DateTime), @p2='5551622077'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "PhoneNumberId" = @p0, "UpdatedAt" = @p1, "WhatsAppBusinessNumber" = @p2
WHERE "Id" = @p3;
2025-09-19 17:45:42.043 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:45:42.047 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 60.1081ms
2025-09-19 17:45:42.049 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 17:45:42.051 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 80.0294ms
2025-09-19 17:45:45.090 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 17:45:45.090 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 17:45:45.094 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:45:45.097 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:45:45.099 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 9.3207ms
2025-09-19 17:45:45.100 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 204 null null 10.13ms
2025-09-19 17:45:45.113 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 17:45:45.117 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 17:45:45.121 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:45:45.125 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:45:45.127 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:45:45.128 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 17:45:45.129 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:45:45.131 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 17:45:45.137 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='PINNACLE'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 17:45:45.143 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 17:45:45.146 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-19 17:45:45.149 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 16.1726ms
2025-09-19 17:45:45.152 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-09-19 17:45:45.153 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:45:45.155 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 19.0002ms
2025-09-19 17:45:45.157 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 200 null application/json; charset=utf-8 43.6529ms
2025-09-19 17:45:45.159 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 17:45:45.165 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 47.9956ms
2025-09-19 17:45:45.170 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 17:45:45.173 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:45:45.175 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 5.0814ms
2025-09-19 17:45:45.181 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 17:45:45.185 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:45:45.186 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:45:45.188 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:45:45.194 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 17:45:45.201 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 17:45:45.203 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 13.0321ms
2025-09-19 17:45:45.205 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:45:45.207 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 25.5809ms
2025-09-19 17:45:45.212 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 17:45:45.216 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:45:45.218 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:45:45.219 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:45:45.228 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 17:45:45.233 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 17:45:45.235 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 12.3848ms
2025-09-19 17:45:45.237 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:45:45.238 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 26.4196ms
2025-09-19 17:45:49.110 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/e7abb04c-eaee-4f66-9234-6ef058499674/default - null null
2025-09-19 17:45:49.114 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:45:49.115 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/e7abb04c-eaee-4f66-9234-6ef058499674/default - 204 null null 5.3089ms
2025-09-19 17:45:49.119 +05:30 [INF] Request starting HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/e7abb04c-eaee-4f66-9234-6ef058499674/default - application/json 4
2025-09-19 17:45:49.123 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:45:49.125 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:45:49.131 +05:30 [INF] Route matched with {action = "SetDefault", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetDefault(System.String, System.Guid) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:45:49.161 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='e7abb04c-eaee-4f66-9234-6ef058499674', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."Id" = @__id_0 AND w."BusinessId" = @__businessId_1 AND lower(w."Provider") = @__ToLower_2
LIMIT 1
2025-09-19 17:45:49.169 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" AS w
SET "IsDefault" = FALSE
WHERE w."BusinessId" = @__businessId_0 AND lower(w."Provider") = @__ToLower_1
2025-09-19 17:45:49.178 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='e7abb04c-eaee-4f66-9234-6ef058499674', @p0='True', @p1='2025-09-19T12:15:49.1739126Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" SET "IsDefault" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-09-19 17:45:49.188 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-19 17:45:49.190 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api) in 54.6038ms
2025-09-19 17:45:49.192 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:45:49.193 +05:30 [INF] Request finished HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/e7abb04c-eaee-4f66-9234-6ef058499674/default - 204 null null 74.0276ms
2025-09-19 17:45:55.655 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/e7abb04c-eaee-4f66-9234-6ef058499674/default - null null
2025-09-19 17:45:55.659 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:45:55.660 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/e7abb04c-eaee-4f66-9234-6ef058499674/default - 204 null null 5.4602ms
2025-09-19 17:45:55.666 +05:30 [INF] Request starting HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/e7abb04c-eaee-4f66-9234-6ef058499674/default - application/json 4
2025-09-19 17:45:55.671 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:45:55.673 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:45:55.675 +05:30 [INF] Route matched with {action = "SetDefault", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetDefault(System.String, System.Guid) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:45:55.682 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='e7abb04c-eaee-4f66-9234-6ef058499674', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."Id" = @__id_0 AND w."BusinessId" = @__businessId_1 AND lower(w."Provider") = @__ToLower_2
LIMIT 1
2025-09-19 17:45:55.691 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" AS w
SET "IsDefault" = FALSE
WHERE w."BusinessId" = @__businessId_0 AND lower(w."Provider") = @__ToLower_1
2025-09-19 17:45:55.698 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='e7abb04c-eaee-4f66-9234-6ef058499674', @p0='2025-09-19T12:15:55.6944333Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 17:45:55.721 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-19 17:45:55.723 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api) in 44.5218ms
2025-09-19 17:45:55.724 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:45:55.726 +05:30 [INF] Request finished HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/e7abb04c-eaee-4f66-9234-6ef058499674/default - 204 null null 59.9146ms
2025-09-19 17:45:58.177 +05:30 [INF] Request starting HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/e7abb04c-eaee-4f66-9234-6ef058499674/default - application/json 4
2025-09-19 17:45:58.184 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:45:58.186 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:45:58.188 +05:30 [INF] Route matched with {action = "SetDefault", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetDefault(System.String, System.Guid) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:45:58.194 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='e7abb04c-eaee-4f66-9234-6ef058499674', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."Id" = @__id_0 AND w."BusinessId" = @__businessId_1 AND lower(w."Provider") = @__ToLower_2
LIMIT 1
2025-09-19 17:45:58.203 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" AS w
SET "IsDefault" = FALSE
WHERE w."BusinessId" = @__businessId_0 AND lower(w."Provider") = @__ToLower_1
2025-09-19 17:45:58.212 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='e7abb04c-eaee-4f66-9234-6ef058499674', @p0='True', @p1='2025-09-19T12:15:58.2078819Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" SET "IsDefault" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-09-19 17:45:58.218 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-19 17:45:58.219 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api) in 28.759ms
2025-09-19 17:45:58.221 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:45:58.222 +05:30 [INF] Request finished HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/e7abb04c-eaee-4f66-9234-6ef058499674/default - 204 null null 44.6857ms
2025-09-19 17:46:33.788 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - null null
2025-09-19 17:46:33.791 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 17:46:33.804 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:46:33.809 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:46:33.809 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/ - 204 null null 21.3393ms
2025-09-19 17:46:33.818 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/reporting/messages/recent?limit=10 - 204 null null 28.3357ms
2025-09-19 17:46:33.831 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/ - null null
2025-09-19 17:46:33.835 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - null null
2025-09-19 17:46:33.841 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:46:33.844 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:46:33.845 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 17:46:33.846 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 17:46:33.847 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 17:46:33.849 +05:30 [INF] Route matched with {action = "GetRecentLogs", controller = "MessageAnalytics"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRecentLogs(Int32) on controller xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController (xbytechat.api).
2025-09-19 17:46:33.853 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=25
2025-09-19 17:46:33.859 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_1='10'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."RecipientNumber", m."MessageContent", m."CreatedAt", m."CampaignId", m."Status", m."SentAt"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0
ORDER BY m."CreatedAt" DESC
LIMIT @__p_1
2025-09-19 17:46:33.862 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 17:46:33.875 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType89`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.ReportingModule.DTOs.RecentMessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:46:33.881 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 17:46:33.881 +05:30 [INF] Executed action xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api) in 26.4791ms
2025-09-19 17:46:33.885 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 17:46:33.886 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.ReportingModule.Controllers.MessageAnalyticsController.GetRecentLogs (xbytechat.api)'
2025-09-19 17:46:33.888 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 36.5253ms
2025-09-19 17:46:33.890 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/reporting/messages/recent?limit=10 - 200 null application/json; charset=utf-8 54.1122ms
2025-09-19 17:46:33.891 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 17:46:33.898 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/ - 200 null application/json; charset=utf-8 66.2244ms
2025-09-19 17:46:36.714 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - null null
2025-09-19 17:46:36.719 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:46:36.720 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/messageengine/send-contentfree-text - 204 null null 6.4459ms
2025-09-19 17:46:36.727 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - application/json 81
2025-09-19 17:46:36.733 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:46:36.736 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 17:46:36.742 +05:30 [INF] Route matched with {action = "SendTextMessage", controller = "MessageEngine"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTextMessage(xbytechat.api.Features.MessagesEngine.DTOs.TextMessageSendDto) on controller xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController (xbytechat.api).
2025-09-19 17:46:38.379 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 17:46:38.394 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_dto_RecipientNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-19 17:46:38.436 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p1='75df7429-287c-406a-83d8-0dfa045b0093', @p0='2025-09-19T12:16:38.3989704Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Contacts" SET "LastContactedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 17:46:38.456 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 17:46:38.471 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-19 17:46:38.489 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 17:46:38.493 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 17:46:40.360 +05:30 [INF] Received HTTP response headers after 1862.3177ms - 200
2025-09-19 17:46:40.363 +05:30 [INF] End processing HTTP request after 1875.3999ms - 200
2025-09-19 17:46:40.494 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p0='161c2028-4998-468d-b353-5723c0e30bcc', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T12:16:40.3700481Z' (DbType = DateTime), @p8=NULL, @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='dsfsfds' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMUNBNjc4NzFCQTlBRTc5OEI0AA==', @p14='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMUNBNjc4NzFCQTlBRTc5OEI0AA=="}]}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17='dsfsfds', @p18=NULL (DbType = Guid), @p19='2025-09-19T12:16:40.3701505Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
2025-09-19 17:46:40.516 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 17:46:40.522 +05:30 [INF] Executed action xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api) in 3776.9511ms
2025-09-19 17:46:40.524 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.MessagesEngine.Controllers.MessageEngineController.SendTextMessage (xbytechat.api)'
2025-09-19 17:46:40.526 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/messageengine/send-contentfree-text - 200 null application/json; charset=utf-8 3798.8142ms
2025-09-19 17:46:42.301 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 613
2025-09-19 17:46:42.305 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:46:42.308 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:46:42.319 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMUNBNjc4NzFCQTlBRTc5OEI0AA==","status":"sent","timestamp":"1758284200","recipient_id":"918974005240","conversation":{"id":"ca6f1bedeb2a703e77ea669bf11c0343","expiration_timestamp":"1758284200","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-19 17:46:42.323 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:46:42.327 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:46:42.330 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 18.7777ms
2025-09-19 17:46:42.332 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:46:42.333 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 32.2843ms
2025-09-19 17:46:42.518 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMUNBNjc4NzFCQTlBRTc5OEI0AA==","status":"sent","timestamp":"1758284200","recipient_id":"918974005240","conversation":{"id":"ca6f1bedeb2a703e77ea669bf11c0343","expiration_timestamp":"1758284200","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-19 17:46:42.536 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-19 17:46:42.544 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-19 17:46:42.548 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-19 17:46:42.551 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 17:46:42.572 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMUNBNjc4NzFCQTlBRTc5OEI0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:46:42.575 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMUNBNjc4NzFCQTlBRTc5OEI0AA==
2025-09-19 17:46:42.586 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMUNBNjc4NzFCQTlBRTc5OEI0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:46:42.593 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMUNBNjc4NzFCQTlBRTc5OEI0AA== (legacy)
2025-09-19 17:46:42.803 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 582
2025-09-19 17:46:42.809 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:46:42.811 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:46:42.817 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMUNBNjc4NzFCQTlBRTc5OEI0AA==","status":"delivered","timestamp":"1758284201","recipient_id":"918974005240","conversation":{"id":"ca6f1bedeb2a703e77ea669bf11c0343","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-19 17:46:42.818 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:46:42.820 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:46:42.822 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.2204ms
2025-09-19 17:46:42.823 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMUNBNjc4NzFCQTlBRTc5OEI0AA==","status":"delivered","timestamp":"1758284201","recipient_id":"918974005240","conversation":{"id":"ca6f1bedeb2a703e77ea669bf11c0343","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-19 17:46:42.825 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:46:42.826 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 17:46:42.827 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 23.8721ms
2025-09-19 17:46:42.832 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMUNBNjc4NzFCQTlBRTc5OEI0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:46:42.838 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMUNBNjc4NzFCQTlBRTc5OEI0AA==
2025-09-19 17:46:42.841 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMUNBNjc4NzFCQTlBRTc5OEI0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:46:42.868 +05:30 [INF] Executed DbCommand (23ms) [Parameters=[@p1='161c2028-4998-468d-b353-5723c0e30bcc', @p0='Delivered' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-09-19 17:46:42.872 +05:30 [INF] ℹ️ MessageLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMUNBNjc4NzFCQTlBRTc5OEI0AA== → Delivered
2025-09-19 17:46:47.533 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-09-19 17:46:47.537 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:46:47.539 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:46:47.544 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMUNBNjc4NzFCQTlBRTc5OEI0AA==","status":"read","timestamp":"1758284206","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-09-19 17:46:47.546 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:46:47.547 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:46:47.549 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 8.2174ms
2025-09-19 17:46:47.551 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:46:47.552 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 18.6942ms
2025-09-19 17:46:47.559 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMUNBNjc4NzFCQTlBRTc5OEI0AA==","status":"read","timestamp":"1758284206","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-09-19 17:46:47.560 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 17:46:47.565 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMUNBNjc4NzFCQTlBRTc5OEI0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:46:47.568 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMUNBNjc4NzFCQTlBRTc5OEI0AA==
2025-09-19 17:46:47.570 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMUNBNjc4NzFCQTlBRTc5OEI0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:46:47.593 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p1='161c2028-4998-468d-b353-5723c0e30bcc', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-09-19 17:46:47.598 +05:30 [INF] ℹ️ MessageLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMUNBNjc4NzFCQTlBRTc5OEI0AA== → Read
2025-09-19 17:46:52.304 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 17:46:52.309 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:46:52.311 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 204 null null 6.6076ms
2025-09-19 17:46:52.315 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 17:46:52.318 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 17:46:52.322 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:46:52.327 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 204 null null 12.6053ms
2025-09-19 17:46:52.327 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:46:52.332 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 17:46:52.334 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 17:46:52.336 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:46:52.339 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-19 17:46:52.342 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-19 17:46:52.345 +05:30 [INF] Route matched with {action = "GetSenders", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSenders(System.Guid) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 17:46:52.356 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 17:46:52.361 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-19 17:46:52.366 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.WhatsAppSettings.DTOs.WhatsAppSenderDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 17:46:52.368 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType107`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType183`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:46:52.370 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api) in 22.9885ms
2025-09-19 17:46:52.372 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-19 17:46:52.374 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 200 null application/json; charset=utf-8 42.0225ms
2025-09-19 17:46:52.375 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 29.904ms
2025-09-19 17:46:52.380 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 17:46:52.382 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 200 null application/json; charset=utf-8 63.4695ms
2025-09-19 17:47:06.568 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 577
2025-09-19 17:47:06.571 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:47:06.573 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:47:06.575 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTlDQkJEOEI0MzQ0QjE4NTFDAA==","status":"read","timestamp":"1758253221","recipient_id":"918974005240","conversation":{"id":"d70f1373a659586579413e2fd6a29224","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-19 17:47:06.579 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:47:06.579 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTlDQkJEOEI0MzQ0QjE4NTFDAA==","status":"read","timestamp":"1758253221","recipient_id":"918974005240","conversation":{"id":"d70f1373a659586579413e2fd6a29224","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-19 17:47:06.580 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:47:06.581 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 17:47:06.582 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.6476ms
2025-09-19 17:47:06.587 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:47:06.588 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTlDQkJEOEI0MzQ0QjE4NTFDAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:47:06.589 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 20.7385ms
2025-09-19 17:47:06.591 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTlDQkJEOEI0MzQ0QjE4NTFDAA==
2025-09-19 17:47:06.600 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTlDQkJEOEI0MzQ0QjE4NTFDAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:47:06.626 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p1='26c84fed-5fcd-4c86-b0e2-c4df46e19210', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-09-19 17:47:06.629 +05:30 [INF] ℹ️ MessageLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTlDQkJEOEI0MzQ0QjE4NTFDAA== → Read
2025-09-19 17:47:08.740 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/marketing_services_submenu_v1 - null null
2025-09-19 17:47:08.749 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:47:08.753 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/marketing_services_submenu_v1 - 204 null null 12.5335ms
2025-09-19 17:47:08.761 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/marketing_services_submenu_v1 - null null
2025-09-19 17:47:08.766 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:47:08.768 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-19 17:47:08.774 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-19 17:47:08.787 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__name_1='marketing_services_submenu_v1'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-09-19 17:47:08.794 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType184`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:47:08.799 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 22.6958ms
2025-09-19 17:47:08.802 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-19 17:47:08.804 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/marketing_services_submenu_v1 - 200 null application/json; charset=utf-8 42.4031ms
2025-09-19 17:47:16.064 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-09-19 17:47:16.068 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:47:16.070 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 5.9571ms
2025-09-19 17:47:16.073 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 516
2025-09-19 17:47:16.080 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:47:16.081 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-19 17:47:16.088 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 17:47:17.571 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__phoneNumberId_1='673199269218078'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."PhoneNumberId" = @__phoneNumberId_1 AND w."IsActive"
LIMIT 1
2025-09-19 17:47:17.601 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 17:47:17.607 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:47:17.609 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:47:19.171 +05:30 [INF] Received HTTP response headers after 1560.3341ms - 200
2025-09-19 17:47:19.173 +05:30 [INF] End processing HTTP request after 1565.497ms - 200
2025-09-19 17:47:19.567 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='ef688737-0c5a-41e0-9ee6-1873ede25665', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='text', @p5='2025-09-19T12:17:19.4456767Z' (DbType = DateTime), @p6='system', @p7=NULL (DbType = Guid), @p8=NULL (DbType = DateTime), @p9=NULL, @p10=NULL, @p11=NULL, @p12=NULL, @p13='False', @p14='We help you reach your target audience and grow your brand effectively. Explore our marketing services:

📈 Digital Marketing: SEO, Social Media Marketing, and targeted PPC campaigns.
📞 Tele-Marketing: IVR systems, Bulk SMS, Voice Calls, and official WhatsApp API solutions.', @p15='marketing_services_submenu_v1' (Nullable = false), @p16='Test012' (Nullable = false), @p17='673199269218078', @p18='META_CLOUD', @p19=NULL (DbType = DateTime), @p20=NULL (DbType = Guid), @p21='Draft' (Nullable = false), @p22='marketing_services_submenu_v1', @p23='[]', @p24='2025-09-19T12:17:19.4457442Z' (DbType = DateTime), @p25='8584e8d3-c7bc-47ff-9cbd-d1a0f62400c2', @p26='ef688737-0c5a-41e0-9ee6-1873ede25665', @p27='True', @p28='1', @p29='Get a Marketing Plan' (Nullable = false), @p30='QUICK_REPLY' (Nullable = false), @p31='' (Nullable = false), @p32='a265d9ea-a7f6-4fc2-90a4-9367247d2b70', @p33='ef688737-0c5a-41e0-9ee6-1873ede25665', @p34='True', @p35='2', @p36='Back to Services Menu' (Nullable = false), @p37='QUICK_REPLY' (Nullable = false), @p38='' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CTAFlowConfigId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "PhoneNumberId", "Provider", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30, @p31);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p32, @p33, @p34, @p35, @p36, @p37, @p38);
2025-09-19 17:47:19.574 +05:30 [INF] ✅ Campaign 'Test012' created | FlowId: null | EntryTemplate: marketing_services_submenu_v1 | Sender: META_CLOUD/673199269218078 | Recipients: 0
2025-09-19 17:47:19.580 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType50`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:47:19.585 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 3494.7312ms
2025-09-19 17:47:19.587 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-19 17:47:19.588 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 3515.1794ms
2025-09-19 17:47:19.672 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-19 17:47:19.675 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-19 17:47:19.676 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-19 17:47:19.673 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/ef688737-0c5a-41e0-9ee6-1873ede25665 - null null
2025-09-19 17:47:19.685 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:47:19.688 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:47:19.691 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:47:19.699 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 23.1785ms
2025-09-19 17:47:19.696 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 24.6331ms
2025-09-19 17:47:19.698 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 22.5092ms
2025-09-19 17:47:19.695 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:47:19.704 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-19 17:47:19.712 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-19 17:47:19.713 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/ef688737-0c5a-41e0-9ee6-1873ede25665 - 204 null null 40.5224ms
2025-09-19 17:47:19.716 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:47:19.720 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:47:19.724 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/ef688737-0c5a-41e0-9ee6-1873ede25665 - null null
2025-09-19 17:47:19.725 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 17:47:19.726 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-19 17:47:19.729 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:47:19.731 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 17:47:19.734 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-19 17:47:19.736 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=1000
2025-09-19 17:47:19.741 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 17:47:19.741 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-19 17:47:19.743 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 17:47:19.756 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 17:47:19.760 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 17:47:19.761 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-19 17:47:19.766 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 30.1426ms
2025-09-19 17:47:19.770 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 17:47:19.771 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 17:47:19.774 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 70.2113ms
2025-09-19 17:47:19.776 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 27.4102ms
2025-09-19 17:47:19.780 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-19 17:47:19.784 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 72.0898ms
2025-09-19 17:47:19.792 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='ef688737-0c5a-41e0-9ee6-1873ede25665', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", t."Id1", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value", t."BusinessId1", t."CreatedAt1", t."CreatedBy0", t."FlowName", t."IsActive0", t."IsPublished", t."UpdatedAt1"
FROM (
    SELECT c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0", c1."Id" AS "Id1", c1."BusinessId" AS "BusinessId1", c1."CreatedAt" AS "CreatedAt1", c1."CreatedBy" AS "CreatedBy0", c1."FlowName", c1."IsActive" AS "IsActive0", c1."IsPublished", c1."UpdatedAt" AS "UpdatedAt1"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    LEFT JOIN "CTAFlowConfigs" AS c1 ON c."CTAFlowConfigId" = c1."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t."Id0", t."Id1"
2025-09-19 17:47:19.796 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-19 17:47:19.802 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:47:19.803 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-19 17:47:19.805 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-19 17:47:19.811 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-19 17:47:19.817 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 17:47:19.817 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-09-19 17:47:19.819 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 12.201ms
2025-09-19 17:47:19.823 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-19 17:47:19.825 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 29.2447ms
2025-09-19 17:47:19.828 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 81.759ms
2025-09-19 17:47:19.831 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-19 17:47:19.832 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/ef688737-0c5a-41e0-9ee6-1873ede25665 - 200 null application/json; charset=utf-8 108.8839ms
2025-09-19 17:47:22.779 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/ef688737-0c5a-41e0-9ee6-1873ede25665/assign-contacts - null null
2025-09-19 17:47:22.785 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:47:22.786 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/ef688737-0c5a-41e0-9ee6-1873ede25665/assign-contacts - 204 null null 6.465ms
2025-09-19 17:47:22.788 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/ef688737-0c5a-41e0-9ee6-1873ede25665/assign-contacts - application/json 55
2025-09-19 17:47:22.792 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:47:22.794 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-09-19 17:47:22.801 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 17:47:22.842 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='ef688737-0c5a-41e0-9ee6-1873ede25665', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-19 17:47:22.912 +05:30 [INF] Executed DbCommand (22ms) [Parameters=[@p0='1ef9c89c-ebf8-4b4b-82ac-4a41e6e666db', @p1=NULL, @p2='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p3='ef688737-0c5a-41e0-9ee6-1873ede25665', @p4=NULL, @p5=NULL, @p6='75df7429-287c-406a-83d8-0dfa045b0093', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-09-19T12:17:22.8514378Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-09-19T12:17:22.8515194Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-09-19 17:47:22.918 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:47:22.920 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 116.2649ms
2025-09-19 17:47:22.922 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-09-19 17:47:22.924 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/ef688737-0c5a-41e0-9ee6-1873ede25665/assign-contacts - 200 null application/json; charset=utf-8 136.023ms
2025-09-19 17:47:27.987 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-19 17:47:27.993 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:47:27.995 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 8.7796ms
2025-09-19 17:47:28.008 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-19 17:47:28.013 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:47:28.015 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-19 17:47:28.020 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 17:47:28.044 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-09-19 17:47:28.051 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 17:47:28.056 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 33.1916ms
2025-09-19 17:47:28.058 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-19 17:47:28.060 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 51.9322ms
2025-09-19 17:47:29.752 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/ef688737-0c5a-41e0-9ee6-1873ede25665 - null null
2025-09-19 17:47:29.756 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:47:29.759 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/ef688737-0c5a-41e0-9ee6-1873ede25665 - 204 null null 7.041ms
2025-09-19 17:47:29.763 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/ef688737-0c5a-41e0-9ee6-1873ede25665 - null 0
2025-09-19 17:47:29.768 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:47:29.769 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-19 17:47:29.774 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 17:47:29.798 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-19 17:47:29.810 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='ef688737-0c5a-41e0-9ee6-1873ede25665'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-09-19 17:47:29.825 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 17:47:29.829 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:47:29.831 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:47:31.135 +05:30 [INF] Received HTTP response headers after 1302.673ms - 200
2025-09-19 17:47:31.137 +05:30 [INF] End processing HTTP request after 1308.2433ms - 200
2025-09-19 17:47:31.376 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218078'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 17:47:31.381 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-19 17:47:31.387 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218078/messages
2025-09-19 17:47:31.389 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218078/messages
2025-09-19 17:47:31.954 +05:30 [INF] Received HTTP response headers after 564.2105ms - 400
2025-09-19 17:47:31.956 +05:30 [INF] End processing HTTP request after 569.2632ms - 400
2025-09-19 17:47:31.958 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"Unsupported post request. Object with ID '673199269218078' does not exist, cannot be loaded due to missing permissions, or does not support this operation. Please read the Graph API documentation at https:\/\/developers.facebook.com\/docs\/graph-api","type":"GraphMethodException","code":100,"error_subcode":33,"fbtrace_id":"AQusUmvcyZaA7ASNrYwZD9Z"}}
2025-09-19 17:47:32.077 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='87f98af8-0c21-4a40-ad64-ec73b9269250', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='[{"i":0,"t":"Get a Marketing Plan","position":1,"text":"Get a Marketing Plan","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"t":"Back to Services Menu","position":2,"text":"Back to Services Menu","type":"QUICK_REPLY","subType":"quick_reply"}]', @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='ef688737-0c5a-41e0-9ee6-1873ede25665' (Nullable = true), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T12:17:31.9612755Z' (DbType = DateTime), @p8='Bad Request', @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='marketing_services_submenu_v1' (Nullable = false), @p13=NULL, @p14='{"error":{"message":"Unsupported post request. Object with ID '673199269218078' does not exist, cannot be loaded due to missing permissions, or does not support this operation. Please read the Graph API documentation at https:\/\/developers.facebook.com\/docs\/graph-api","type":"GraphMethodException","code":100,"error_subcode":33,"fbtrace_id":"AQusUmvcyZaA7ASNrYwZD9Z"}}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17=NULL, @p18='80a8d8a6-a93d-4c4f-a4a4-993f1448b896' (Nullable = true), @p19=NULL (DbType = DateTime), @p20='campaign', @p21='Failed' (Nullable = false), @p23='c13c2c23-4ed0-4441-b5b2-6b2b581bdca3', @p22='673199269218078', @p24='8dc08996-c1a1-454f-a94b-9f9794359e8d', @p25='True', @p26=NULL, @p27='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p28='[{"i":0,"t":"Get a Marketing Plan","position":1,"text":"Get a Marketing Plan","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"t":"Back to Services Menu","position":2,"text":"Back to Services Menu","type":"QUICK_REPLY","subType":"quick_reply"}]', @p29=NULL (DbType = Guid), @p30=NULL (DbType = Guid), @p31='ef688737-0c5a-41e0-9ee6-1873ede25665', @p32=NULL, @p33=NULL, @p34=NULL (DbType = DateTime), @p35='75df7429-287c-406a-83d8-0dfa045b0093', @p36=NULL, @p37='2025-09-19T12:17:31.9645881Z' (DbType = DateTime), @p38='system', @p39=NULL (DbType = DateTime), @p40=NULL, @p41=NULL, @p42='Bad Request', @p43=NULL, @p44='False', @p45=NULL (DbType = DateTime), @p46=NULL, @p47=NULL, @p48='We help you reach your target audience and grow your brand effectively. Explore our marketing services:

📈 Digital Marketing: SEO, Social Media Marketing, and targeted PPC campaigns.
📞 Tele-Marketing: IVR systems, Bulk SMS, Voice Calls, and official WhatsApp API solutions.' (Nullable = false), @p49=NULL, @p50='87f98af8-0c21-4a40-ad64-ec73b9269250' (Nullable = true), @p51=NULL (DbType = DateTime), @p52='1ef9c89c-ebf8-4b4b-82ac-4a41e6e666db', @p53='0', @p54='80a8d8a6-a93d-4c4f-a4a4-993f1448b896' (Nullable = true), @p55='Failed', @p56=NULL (DbType = DateTime), @p57=NULL, @p58='marketing_services_submenu_v1', @p59=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
UPDATE "WhatsAppSettings" SET "PhoneNumberId" = @p22
WHERE "Id" = @p23;
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59);
2025-09-19 17:47:32.089 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 17:47:32.091 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 2314.9515ms
2025-09-19 17:47:32.093 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-19 17:47:32.095 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/ef688737-0c5a-41e0-9ee6-1873ede25665 - 200 null application/json; charset=utf-8 2331.5171ms
2025-09-19 17:47:39.699 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/ef688737-0c5a-41e0-9ee6-1873ede25665 - null null
2025-09-19 17:47:39.702 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:47:39.703 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/ef688737-0c5a-41e0-9ee6-1873ede25665 - 204 null null 3.4705ms
2025-09-19 17:47:39.709 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/ef688737-0c5a-41e0-9ee6-1873ede25665 - null 0
2025-09-19 17:47:39.712 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:47:39.713 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-19 17:47:39.714 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 17:47:39.723 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='ef688737-0c5a-41e0-9ee6-1873ede25665'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-09-19 17:47:39.730 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 17:47:39.734 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:47:39.735 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:47:40.763 +05:30 [INF] Received HTTP response headers after 1025.6175ms - 200
2025-09-19 17:47:40.766 +05:30 [INF] End processing HTTP request after 1032.1285ms - 200
2025-09-19 17:47:40.973 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218078'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 17:47:40.979 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-19 17:47:40.983 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218078/messages
2025-09-19 17:47:40.984 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218078/messages
2025-09-19 17:47:41.500 +05:30 [INF] Received HTTP response headers after 514.3287ms - 400
2025-09-19 17:47:41.503 +05:30 [INF] End processing HTTP request after 520.5342ms - 400
2025-09-19 17:47:41.505 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"Unsupported post request. Object with ID '673199269218078' does not exist, cannot be loaded due to missing permissions, or does not support this operation. Please read the Graph API documentation at https:\/\/developers.facebook.com\/docs\/graph-api","type":"GraphMethodException","code":100,"error_subcode":33,"fbtrace_id":"Ajj9Ljiisvw2_htXM2exhLh"}}
2025-09-19 17:47:41.512 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='00ed4389-e65c-4aa4-a820-11637ae924db', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='[{"i":0,"t":"Get a Marketing Plan","position":1,"text":"Get a Marketing Plan","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"t":"Back to Services Menu","position":2,"text":"Back to Services Menu","type":"QUICK_REPLY","subType":"quick_reply"}]', @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='ef688737-0c5a-41e0-9ee6-1873ede25665' (Nullable = true), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T12:17:41.5069806Z' (DbType = DateTime), @p8='Bad Request', @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='marketing_services_submenu_v1' (Nullable = false), @p13=NULL, @p14='{"error":{"message":"Unsupported post request. Object with ID '673199269218078' does not exist, cannot be loaded due to missing permissions, or does not support this operation. Please read the Graph API documentation at https:\/\/developers.facebook.com\/docs\/graph-api","type":"GraphMethodException","code":100,"error_subcode":33,"fbtrace_id":"Ajj9Ljiisvw2_htXM2exhLh"}}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17=NULL, @p18='ec0abbfa-9eda-4173-b567-b570c0127a61' (Nullable = true), @p19=NULL (DbType = DateTime), @p20='campaign', @p21='Failed' (Nullable = false), @p22='f8902d25-7ae9-45f6-9ef3-7b3fba725c85', @p23='True', @p24=NULL, @p25='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p26='[{"i":0,"t":"Get a Marketing Plan","position":1,"text":"Get a Marketing Plan","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"t":"Back to Services Menu","position":2,"text":"Back to Services Menu","type":"QUICK_REPLY","subType":"quick_reply"}]', @p27=NULL (DbType = Guid), @p28=NULL (DbType = Guid), @p29='ef688737-0c5a-41e0-9ee6-1873ede25665', @p30=NULL, @p31=NULL, @p32=NULL (DbType = DateTime), @p33='75df7429-287c-406a-83d8-0dfa045b0093', @p34=NULL, @p35='2025-09-19T12:17:41.5075137Z' (DbType = DateTime), @p36='system', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40='Bad Request', @p41=NULL, @p42='False', @p43=NULL (DbType = DateTime), @p44=NULL, @p45=NULL, @p46='We help you reach your target audience and grow your brand effectively. Explore our marketing services:

📈 Digital Marketing: SEO, Social Media Marketing, and targeted PPC campaigns.
📞 Tele-Marketing: IVR systems, Bulk SMS, Voice Calls, and official WhatsApp API solutions.' (Nullable = false), @p47=NULL, @p48='00ed4389-e65c-4aa4-a820-11637ae924db' (Nullable = true), @p49=NULL (DbType = DateTime), @p50='1ef9c89c-ebf8-4b4b-82ac-4a41e6e666db', @p51='0', @p52='ec0abbfa-9eda-4173-b567-b570c0127a61' (Nullable = true), @p53='Failed', @p54=NULL (DbType = DateTime), @p55=NULL, @p56='marketing_services_submenu_v1', @p57=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57);
2025-09-19 17:47:41.534 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 17:47:41.536 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 1818.6425ms
2025-09-19 17:47:41.538 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-19 17:47:41.539 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/ef688737-0c5a-41e0-9ee6-1873ede25665 - 200 null application/json; charset=utf-8 1830.6549ms
2025-09-19 17:47:42.855 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - null null
2025-09-19 17:47:42.859 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:47:42.860 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - 204 null null 4.8789ms
2025-09-19 17:47:42.864 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - null 0
2025-09-19 17:47:42.867 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:47:42.868 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-19 17:47:42.870 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 17:47:42.877 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='5d760969-9fb2-481a-9139-be56c85c2f3b'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-09-19 17:47:42.902 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-19 17:47:42.912 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__flowId_Value_0='2b73877c-3c18-4fbb-af61-1906393bb2d3', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", t0."Id", t0."CTAFlowConfigId", t0."PositionX", t0."PositionY", t0."RequiredSource", t0."RequiredTag", t0."StepOrder", t0."TemplateToSend", t0."TemplateType", t0."TriggerButtonText", t0."TriggerButtonType", t0."Id0", t0."ButtonIndex", t0."ButtonSubType", t0."ButtonText", t0."ButtonType", t0."ButtonValue", t0."CTAFlowStepId", t0."NextStepId"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."Id" = @__flowId_Value_0 AND c."BusinessId" = @__businessId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."CTAFlowConfigId", c0."PositionX", c0."PositionY", c0."RequiredSource", c0."RequiredTag", c0."StepOrder", c0."TemplateToSend", c0."TemplateType", c0."TriggerButtonText", c0."TriggerButtonType", f."Id" AS "Id0", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
    FROM "CTAFlowSteps" AS c0
    LEFT JOIN "FlowButtonLinks" AS f ON c0."Id" = f."CTAFlowStepId"
) AS t0 ON t."Id" = t0."CTAFlowConfigId"
ORDER BY t."Id", t0."Id"
2025-09-19 17:47:42.987 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 17:47:42.991 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:47:42.992 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:47:44.041 +05:30 [INF] Received HTTP response headers after 1047.0374ms - 200
2025-09-19 17:47:44.042 +05:30 [INF] End processing HTTP request after 1051.8084ms - 200
2025-09-19 17:47:44.157 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaign_CTAFlowConfigId_Value_0='2b73877c-3c18-4fbb-af61-1906393bb2d3'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "CTAFlowSteps" AS c
WHERE c."CTAFlowConfigId" = @__campaign_CTAFlowConfigId_Value_0
ORDER BY c."StepOrder"
LIMIT 1
2025-09-19 17:47:44.171 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 17:47:44.176 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-19 17:47:44.179 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 17:47:44.183 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 17:47:45.369 +05:30 [INF] Received HTTP response headers after 1184.2781ms - 200
2025-09-19 17:47:45.371 +05:30 [INF] End processing HTTP request after 1191.9689ms - 200
2025-09-19 17:47:45.405 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='642d5e2e-e836-4fe8-bd6f-5358000fd3ec', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='[{"i":0,"t":"Explore Our Services","position":1,"text":"Explore Our Services","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"t":"View Our Products","position":2,"text":"View Our Products","type":"QUICK_REPLY","subType":"quick_reply"},{"i":2,"t":"Customer Support","position":3,"text":"Customer Support","type":"QUICK_REPLY","subType":"quick_reply"}]', @p3='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p4='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c' (Nullable = true), @p5='5d760969-9fb2-481a-9139-be56c85c2f3b' (Nullable = true), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T12:17:45.3735158Z' (DbType = DateTime), @p8=NULL, @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='welcome_menu_minds' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjQ4MTQxRTk5NjQ4MDFCMUU5AA==', @p14='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjQ4MTQxRTk5NjQ4MDFCMUU5AA==","message_status":"accepted"}]}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17=NULL, @p18='90074a56-3aa6-4355-906f-0f8de5fb0112' (Nullable = true), @p19='2025-09-19T12:17:45.3735159Z' (Nullable = true) (DbType = DateTime), @p20='campaign', @p21='Sent' (Nullable = false), @p23='c13c2c23-4ed0-4441-b5b2-6b2b581bdca3', @p22='673199269218077', @p24='d92ae5e8-1c1b-4374-b753-ae29ff1be767', @p25='True', @p26=NULL, @p27='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p28='[{"i":0,"t":"Explore Our Services","position":1,"text":"Explore Our Services","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"t":"View Our Products","position":2,"text":"View Our Products","type":"QUICK_REPLY","subType":"quick_reply"},{"i":2,"t":"Customer Support","position":3,"text":"Customer Support","type":"QUICK_REPLY","subType":"quick_reply"}]', @p29='2b73877c-3c18-4fbb-af61-1906393bb2d3' (Nullable = true), @p30='3bc5f00f-c6e4-4141-9c71-e26d4c61a20c' (Nullable = true), @p31='5d760969-9fb2-481a-9139-be56c85c2f3b', @p32=NULL, @p33=NULL, @p34=NULL (DbType = DateTime), @p35='75df7429-287c-406a-83d8-0dfa045b0093', @p36=NULL, @p37='2025-09-19T12:17:45.3740209Z' (DbType = DateTime), @p38='system', @p39=NULL (DbType = DateTime), @p40=NULL, @p41=NULL, @p42=NULL, @p43=NULL, @p44='False', @p45=NULL (DbType = DateTime), @p46=NULL, @p47=NULL, @p48='Hello! Thank you for contacting MindsMiratus.

If you're a new visitor, we're happy to help you get started. If you're an existing customer, we're here to support you. Please choose from the options below.' (Nullable = false), @p49='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjQ4MTQxRTk5NjQ4MDFCMUU5AA==', @p50='642d5e2e-e836-4fe8-bd6f-5358000fd3ec' (Nullable = true), @p51=NULL (DbType = DateTime), @p52='17111212-d8a7-4d76-9fc2-9ed370446645', @p53='0', @p54='90074a56-3aa6-4355-906f-0f8de5fb0112' (Nullable = true), @p55='Sent', @p56='2025-09-19T12:17:45.3740212Z' (Nullable = true) (DbType = DateTime), @p57=NULL, @p58='welcome_menu_minds', @p59=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
UPDATE "WhatsAppSettings" SET "PhoneNumberId" = @p22
WHERE "Id" = @p23;
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59);
2025-09-19 17:47:45.430 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 17:47:45.432 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 2559.7759ms
2025-09-19 17:47:45.434 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-19 17:47:45.435 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/5d760969-9fb2-481a-9139-be56c85c2f3b - 200 null application/json; charset=utf-8 2571.1063ms
2025-09-19 17:47:46.802 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-19 17:47:46.806 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:47:46.807 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:47:46.810 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjQ4MTQxRTk5NjQ4MDFCMUU5AA==","status":"sent","timestamp":"1758284265","recipient_id":"918974005240","conversation":{"id":"9eb9fd61d15b8e7006dff53b1efccde3","expiration_timestamp":"1758284265","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:47:46.812 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:47:46.812 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjQ4MTQxRTk5NjQ4MDFCMUU5AA==","status":"sent","timestamp":"1758284265","recipient_id":"918974005240","conversation":{"id":"9eb9fd61d15b8e7006dff53b1efccde3","expiration_timestamp":"1758284265","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:47:46.813 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:47:46.814 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 17:47:46.816 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.9227ms
2025-09-19 17:47:46.821 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjQ4MTQxRTk5NjQ4MDFCMUU5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:47:46.822 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:47:46.825 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 22.8336ms
2025-09-19 17:47:46.836 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__sid_0='d92ae5e8-1c1b-4374-b753-ae29ff1be767'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-19 17:47:46.839 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjQ4MTQxRTk5NjQ4MDFCMUU5AA== (legacy)
2025-09-19 17:47:47.215 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-09-19 17:47:47.219 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:47:47.220 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:47:47.223 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjQ4MTQxRTk5NjQ4MDFCMUU5AA==","status":"read","timestamp":"1758284265","recipient_id":"918974005240","conversation":{"id":"9eb9fd61d15b8e7006dff53b1efccde3","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:47:47.224 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:47:47.225 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjQ4MTQxRTk5NjQ4MDFCMUU5AA==","status":"read","timestamp":"1758284265","recipient_id":"918974005240","conversation":{"id":"9eb9fd61d15b8e7006dff53b1efccde3","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:47:47.225 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:47:47.227 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 17:47:47.228 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.0933ms
2025-09-19 17:47:47.232 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjQ4MTQxRTk5NjQ4MDFCMUU5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:47:47.233 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:47:47.238 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='d92ae5e8-1c1b-4374-b753-ae29ff1be767'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-19 17:47:47.238 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 23.0049ms
2025-09-19 17:47:47.245 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p2='d92ae5e8-1c1b-4374-b753-ae29ff1be767', @p0='2025-09-19T12:17:45.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-19 17:47:47.250 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjQ4MTQxRTk5NjQ4MDFCMUU5AA== → Read
2025-09-19 17:48:05.456 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 17:48:05.456 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 17:48:05.463 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:48:05.467 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:48:05.468 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 204 null null 11.9147ms
2025-09-19 17:48:05.469 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 204 null null 12.9396ms
2025-09-19 17:48:05.473 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 17:48:05.478 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 17:48:05.482 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:48:05.485 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:48:05.486 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-19 17:48:05.487 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 17:48:05.488 +05:30 [INF] Route matched with {action = "GetSenders", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSenders(System.Guid) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 17:48:05.489 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-19 17:48:05.495 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 17:48:05.502 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.WhatsAppSettings.DTOs.WhatsAppSenderDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 17:48:05.505 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api) in 13.0662ms
2025-09-19 17:48:05.507 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-19 17:48:05.510 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-19 17:48:05.515 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType107`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType183`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:48:05.515 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 200 null application/json; charset=utf-8 41.9886ms
2025-09-19 17:48:05.518 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 23.0699ms
2025-09-19 17:48:05.523 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 17:48:05.525 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 200 null application/json; charset=utf-8 46.7376ms
2025-09-19 17:48:10.129 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/human_takeover_confirmation_v1 - null null
2025-09-19 17:48:10.133 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:48:10.134 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/human_takeover_confirmation_v1 - 204 null null 5.277ms
2025-09-19 17:48:10.138 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/human_takeover_confirmation_v1 - null null
2025-09-19 17:48:10.143 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:48:10.144 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-19 17:48:10.146 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-19 17:48:10.152 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__name_1='human_takeover_confirmation_v1'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-09-19 17:48:10.158 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType184`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:48:10.166 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 17.6019ms
2025-09-19 17:48:10.169 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-19 17:48:10.170 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/human_takeover_confirmation_v1 - 200 null application/json; charset=utf-8 31.7716ms
2025-09-19 17:48:25.174 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-09-19 17:48:25.178 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:48:25.179 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 4.8024ms
2025-09-19 17:48:25.185 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 435
2025-09-19 17:48:25.188 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:48:25.190 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-19 17:48:25.191 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 17:48:26.820 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__phoneNumberId_1='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."PhoneNumberId" = @__phoneNumberId_1 AND w."IsActive"
LIMIT 1
2025-09-19 17:48:26.827 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 17:48:26.831 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:48:26.833 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:48:28.173 +05:30 [INF] Received HTTP response headers after 1338.8647ms - 200
2025-09-19 17:48:28.175 +05:30 [INF] End processing HTTP request after 1344.5288ms - 200
2025-09-19 17:48:28.280 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='74f6aa36-ac6e-416b-8e48-4ba565ab3c5b', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='text', @p5='2025-09-19T12:18:28.2766766Z' (DbType = DateTime), @p6='system', @p7=NULL (DbType = Guid), @p8=NULL (DbType = DateTime), @p9=NULL, @p10=NULL, @p11=NULL, @p12=NULL, @p13='False', @p14='Thank you! We've received your request. One of our experts will get in touch with you shortly.

Is there anything else I can help you with in the meantime?', @p15='human_takeover_confirmation_v1' (Nullable = false), @p16='human' (Nullable = false), @p17='673199269218077', @p18='META_CLOUD', @p19=NULL (DbType = DateTime), @p20=NULL (DbType = Guid), @p21='Draft' (Nullable = false), @p22='human_takeover_confirmation_v1', @p23='[]', @p24='2025-09-19T12:18:28.2766767Z' (DbType = DateTime), @p25='f6b0e27f-2257-478c-9dc8-532c00cdba68', @p26='74f6aa36-ac6e-416b-8e48-4ba565ab3c5b', @p27='True', @p28='1', @p29='Back to Main Menu' (Nullable = false), @p30='QUICK_REPLY' (Nullable = false), @p31='' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CTAFlowConfigId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "PhoneNumberId", "Provider", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30, @p31);
2025-09-19 17:48:28.284 +05:30 [INF] ✅ Campaign 'human' created | FlowId: null | EntryTemplate: human_takeover_confirmation_v1 | Sender: META_CLOUD/673199269218077 | Recipients: 0
2025-09-19 17:48:28.286 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType50`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:48:28.288 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 3094.793ms
2025-09-19 17:48:28.290 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-19 17:48:28.292 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 3107.9268ms
2025-09-19 17:48:28.361 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-19 17:48:28.363 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/74f6aa36-ac6e-416b-8e48-4ba565ab3c5b - null null
2025-09-19 17:48:28.363 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-19 17:48:28.363 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-19 17:48:28.365 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:48:28.370 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:48:28.377 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:48:28.380 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/74f6aa36-ac6e-416b-8e48-4ba565ab3c5b - 204 null null 17.8651ms
2025-09-19 17:48:28.387 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 24.1923ms
2025-09-19 17:48:28.378 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 16.5082ms
2025-09-19 17:48:28.374 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:48:28.400 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/74f6aa36-ac6e-416b-8e48-4ba565ab3c5b - null null
2025-09-19 17:48:28.404 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-19 17:48:28.408 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-19 17:48:28.409 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 45.8304ms
2025-09-19 17:48:28.412 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:48:28.415 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:48:28.418 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:48:28.423 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-19 17:48:28.423 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 17:48:28.424 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-19 17:48:28.425 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 17:48:28.426 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 17:48:28.428 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-19 17:48:28.436 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='74f6aa36-ac6e-416b-8e48-4ba565ab3c5b', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", t."Id1", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value", t."BusinessId1", t."CreatedAt1", t."CreatedBy0", t."FlowName", t."IsActive0", t."IsPublished", t."UpdatedAt1"
FROM (
    SELECT c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0", c1."Id" AS "Id1", c1."BusinessId" AS "BusinessId1", c1."CreatedAt" AS "CreatedAt1", c1."CreatedBy" AS "CreatedBy0", c1."FlowName", c1."IsActive" AS "IsActive0", c1."IsPublished", c1."UpdatedAt" AS "UpdatedAt1"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    LEFT JOIN "CTAFlowConfigs" AS c1 ON c."CTAFlowConfigId" = c1."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t."Id0", t."Id1"
2025-09-19 17:48:28.436 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=1000
2025-09-19 17:48:28.443 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-19 17:48:28.446 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-09-19 17:48:28.450 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 17:48:28.452 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 17:48:28.454 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 22.7415ms
2025-09-19 17:48:28.460 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 21.3471ms
2025-09-19 17:48:28.460 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 17:48:28.461 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-19 17:48:28.462 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-19 17:48:28.463 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-19 17:48:28.466 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 17:48:28.469 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:48:28.470 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/74f6aa36-ac6e-416b-8e48-4ba565ab3c5b - 200 null application/json; charset=utf-8 70.1095ms
2025-09-19 17:48:28.472 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 63.913ms
2025-09-19 17:48:28.473 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 38.9661ms
2025-09-19 17:48:28.475 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-19 17:48:28.484 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 17:48:28.486 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-19 17:48:28.487 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 83.0854ms
2025-09-19 17:48:28.492 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-19 17:48:28.501 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 17:48:28.503 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 13.1773ms
2025-09-19 17:48:28.505 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-19 17:48:28.506 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 44.903ms
2025-09-19 17:48:31.256 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/74f6aa36-ac6e-416b-8e48-4ba565ab3c5b/assign-contacts - null null
2025-09-19 17:48:31.260 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:48:31.261 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/74f6aa36-ac6e-416b-8e48-4ba565ab3c5b/assign-contacts - 204 null null 4.9368ms
2025-09-19 17:48:31.265 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/74f6aa36-ac6e-416b-8e48-4ba565ab3c5b/assign-contacts - application/json 55
2025-09-19 17:48:31.268 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:48:31.269 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-09-19 17:48:31.270 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 17:48:31.277 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='74f6aa36-ac6e-416b-8e48-4ba565ab3c5b', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-19 17:48:31.305 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p0='a9d20a8f-19a6-482e-9595-3afa678f1539', @p1=NULL, @p2='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p3='74f6aa36-ac6e-416b-8e48-4ba565ab3c5b', @p4=NULL, @p5=NULL, @p6='75df7429-287c-406a-83d8-0dfa045b0093', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-09-19T12:18:31.2839313Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-09-19T12:18:31.2839319Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-09-19 17:48:31.308 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:48:31.310 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 38.1488ms
2025-09-19 17:48:31.312 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-09-19 17:48:31.314 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/74f6aa36-ac6e-416b-8e48-4ba565ab3c5b/assign-contacts - 200 null application/json; charset=utf-8 48.8024ms
2025-09-19 17:48:33.867 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-19 17:48:33.871 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:48:33.872 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 5.5435ms
2025-09-19 17:48:33.876 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-19 17:48:33.880 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:48:33.882 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-19 17:48:33.884 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 17:48:33.891 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-09-19 17:48:33.897 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 17:48:33.899 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 12.7386ms
2025-09-19 17:48:33.902 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-19 17:48:33.903 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 26.7138ms
2025-09-19 17:48:35.200 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/74f6aa36-ac6e-416b-8e48-4ba565ab3c5b - null null
2025-09-19 17:48:35.208 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:48:35.211 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/74f6aa36-ac6e-416b-8e48-4ba565ab3c5b - 204 null null 11.4404ms
2025-09-19 17:48:35.216 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/74f6aa36-ac6e-416b-8e48-4ba565ab3c5b - null 0
2025-09-19 17:48:35.219 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:48:35.221 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-19 17:48:35.223 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 17:48:35.230 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='74f6aa36-ac6e-416b-8e48-4ba565ab3c5b'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-09-19 17:48:35.238 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 17:48:35.242 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:48:35.243 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:48:36.215 +05:30 [INF] Received HTTP response headers after 970.9857ms - 200
2025-09-19 17:48:36.218 +05:30 [INF] End processing HTTP request after 976.1778ms - 200
2025-09-19 17:48:36.454 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 17:48:36.460 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-19 17:48:36.462 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 17:48:36.465 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 17:48:37.616 +05:30 [INF] Received HTTP response headers after 1149.0731ms - 200
2025-09-19 17:48:37.618 +05:30 [INF] End processing HTTP request after 1155.5838ms - 200
2025-09-19 17:48:37.624 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='b764015d-735c-4ed1-8886-5e5f12e5d01b', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='[{"i":0,"t":"Back to Main Menu","position":1,"text":"Back to Main Menu","type":"QUICK_REPLY","subType":"quick_reply"}]', @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='74f6aa36-ac6e-416b-8e48-4ba565ab3c5b' (Nullable = true), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T12:18:37.6200018Z' (DbType = DateTime), @p8=NULL, @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='human_takeover_confirmation_v1' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQURENDBBRkM4NTgwMEM3RENBAA==', @p14='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQURENDBBRkM4NTgwMEM3RENBAA==","message_status":"accepted"}]}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17=NULL, @p18='f989d2c9-4ef0-49d2-a3e8-ec43a2bb5eac' (Nullable = true), @p19='2025-09-19T12:18:37.6200019Z' (Nullable = true) (DbType = DateTime), @p20='campaign', @p21='Sent' (Nullable = false), @p22='c4f27116-fd0a-4b23-875a-746291184b98', @p23='True', @p24=NULL, @p25='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p26='[{"i":0,"t":"Back to Main Menu","position":1,"text":"Back to Main Menu","type":"QUICK_REPLY","subType":"quick_reply"}]', @p27=NULL (DbType = Guid), @p28=NULL (DbType = Guid), @p29='74f6aa36-ac6e-416b-8e48-4ba565ab3c5b', @p30=NULL, @p31=NULL, @p32=NULL (DbType = DateTime), @p33='75df7429-287c-406a-83d8-0dfa045b0093', @p34=NULL, @p35='2025-09-19T12:18:37.6202545Z' (DbType = DateTime), @p36='system', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40=NULL, @p41=NULL, @p42='False', @p43=NULL (DbType = DateTime), @p44=NULL, @p45=NULL, @p46='Thank you! We've received your request. One of our experts will get in touch with you shortly.

Is there anything else I can help you with in the meantime?' (Nullable = false), @p47='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQURENDBBRkM4NTgwMEM3RENBAA==', @p48='b764015d-735c-4ed1-8886-5e5f12e5d01b' (Nullable = true), @p49=NULL (DbType = DateTime), @p50='a9d20a8f-19a6-482e-9595-3afa678f1539', @p51='0', @p52='f989d2c9-4ef0-49d2-a3e8-ec43a2bb5eac' (Nullable = true), @p53='Sent', @p54='2025-09-19T12:18:37.6202546Z' (Nullable = true) (DbType = DateTime), @p55=NULL, @p56='human_takeover_confirmation_v1', @p57=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57);
2025-09-19 17:48:37.628 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 17:48:37.630 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 2404.2271ms
2025-09-19 17:48:37.631 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-19 17:48:37.633 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/74f6aa36-ac6e-416b-8e48-4ba565ab3c5b - 200 null application/json; charset=utf-8 2417.5641ms
2025-09-19 17:48:38.714 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-19 17:48:38.717 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:48:38.719 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:48:38.723 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQURENDBBRkM4NTgwMEM3RENBAA==","status":"sent","timestamp":"1758284317","recipient_id":"918974005240","conversation":{"id":"7ccb9ddbbdba13a6cc6a6c4d62d88582","expiration_timestamp":"1758284317","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:48:38.725 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:48:38.726 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQURENDBBRkM4NTgwMEM3RENBAA==","status":"sent","timestamp":"1758284317","recipient_id":"918974005240","conversation":{"id":"7ccb9ddbbdba13a6cc6a6c4d62d88582","expiration_timestamp":"1758284317","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:48:38.726 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:48:38.727 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 17:48:38.729 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.5175ms
2025-09-19 17:48:38.733 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQURENDBBRkM4NTgwMEM3RENBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:48:38.734 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:48:38.739 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='c4f27116-fd0a-4b23-875a-746291184b98'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-19 17:48:38.740 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 26.0994ms
2025-09-19 17:48:38.742 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQURENDBBRkM4NTgwMEM3RENBAA== (legacy)
2025-09-19 17:48:39.288 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-09-19 17:48:39.292 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:48:39.293 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:48:39.296 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQURENDBBRkM4NTgwMEM3RENBAA==","status":"read","timestamp":"1758284318","recipient_id":"918974005240","conversation":{"id":"7ccb9ddbbdba13a6cc6a6c4d62d88582","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:48:39.298 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:48:39.298 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQURENDBBRkM4NTgwMEM3RENBAA==","status":"read","timestamp":"1758284318","recipient_id":"918974005240","conversation":{"id":"7ccb9ddbbdba13a6cc6a6c4d62d88582","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:48:39.300 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:48:39.301 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 17:48:39.303 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.1531ms
2025-09-19 17:48:39.308 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:48:39.308 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQURENDBBRkM4NTgwMEM3RENBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:48:39.310 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 21.5699ms
2025-09-19 17:48:39.315 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='c4f27116-fd0a-4b23-875a-746291184b98'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-19 17:48:39.341 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p2='c4f27116-fd0a-4b23-875a-746291184b98', @p0='2025-09-19T12:18:38.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-19 17:48:39.344 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQURENDBBRkM4NTgwMEM3RENBAA== → Read
2025-09-19 17:48:48.176 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 17:48:48.177 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 17:48:48.186 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:48:48.189 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:48:48.190 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 14.3816ms
2025-09-19 17:48:48.192 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 204 null null 15.0339ms
2025-09-19 17:48:48.206 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 17:48:48.211 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:48:48.212 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 17:48:48.215 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 17:48:48.218 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:48:48.219 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 17:48:48.221 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:48:48.224 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:48:48.227 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-19 17:48:48.234 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='PINNACLE'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 17:48:48.237 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-09-19 17:48:48.239 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 17:48:48.241 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 17.6616ms
2025-09-19 17:48:48.242 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 11.8486ms
2025-09-19 17:48:48.244 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 17:48:48.246 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:48:48.247 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 41.3567ms
2025-09-19 17:48:48.249 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 200 null application/json; charset=utf-8 36.791ms
2025-09-19 17:48:48.257 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 17:48:48.259 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:48:48.260 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 3.2747ms
2025-09-19 17:48:48.265 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 17:48:48.268 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:48:48.270 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:48:48.272 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:48:48.277 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 17:48:48.283 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 17:48:48.285 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 10.6867ms
2025-09-19 17:48:48.286 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:48:48.288 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 23.5155ms
2025-09-19 17:48:48.293 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 17:48:48.297 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:48:48.299 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:48:48.301 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:48:48.308 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 17:48:48.313 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 17:48:48.315 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 11.0604ms
2025-09-19 17:48:48.317 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:48:48.318 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 25.0961ms
2025-09-19 17:48:51.530 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/77684bff-5729-4f76-9db4-913040ab71a9/default - null null
2025-09-19 17:48:51.533 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:48:51.534 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/77684bff-5729-4f76-9db4-913040ab71a9/default - 204 null null 4.56ms
2025-09-19 17:48:51.540 +05:30 [INF] Request starting HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/77684bff-5729-4f76-9db4-913040ab71a9/default - application/json 4
2025-09-19 17:48:51.544 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:48:51.546 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:48:51.547 +05:30 [INF] Route matched with {action = "SetDefault", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetDefault(System.String, System.Guid) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:48:51.553 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='77684bff-5729-4f76-9db4-913040ab71a9', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."Id" = @__id_0 AND w."BusinessId" = @__businessId_1 AND lower(w."Provider") = @__ToLower_2
LIMIT 1
2025-09-19 17:48:51.561 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" AS w
SET "IsDefault" = FALSE
WHERE w."BusinessId" = @__businessId_0 AND lower(w."Provider") = @__ToLower_1
2025-09-19 17:48:51.568 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='77684bff-5729-4f76-9db4-913040ab71a9', @p0='True', @p1='2025-09-19T12:18:51.5648059Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" SET "IsDefault" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-09-19 17:48:51.591 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-19 17:48:51.593 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api) in 43.0067ms
2025-09-19 17:48:51.595 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:48:51.596 +05:30 [INF] Request finished HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/77684bff-5729-4f76-9db4-913040ab71a9/default - 204 null null 56.0421ms
2025-09-19 17:49:01.965 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-09-19 17:49:01.970 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:49:01.971 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 5.985ms
2025-09-19 17:49:01.975 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 572
2025-09-19 17:49:01.978 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:49:01.979 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 17:49:01.981 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 17:49:01.990 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__dto_Provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0 AND w."Provider" = @__dto_Provider_1
LIMIT 1
2025-09-19 17:49:02.018 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p1='c13c2c23-4ed0-4441-b5b2-6b2b581bdca3', @p0='2025-09-19T12:19:01.9984340Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 17:49:02.022 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:49:02.024 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 40.6084ms
2025-09-19 17:49:02.026 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 17:49:02.027 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 52.23ms
2025-09-19 17:49:16.628 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/77684bff-5729-4f76-9db4-913040ab71a9/default - null null
2025-09-19 17:49:16.631 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:49:16.632 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/77684bff-5729-4f76-9db4-913040ab71a9/default - 204 null null 4.0401ms
2025-09-19 17:49:16.636 +05:30 [INF] Request starting HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/77684bff-5729-4f76-9db4-913040ab71a9/default - application/json 4
2025-09-19 17:49:16.642 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:49:16.644 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:49:16.646 +05:30 [INF] Route matched with {action = "SetDefault", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetDefault(System.String, System.Guid) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:49:16.752 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='77684bff-5729-4f76-9db4-913040ab71a9', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."Id" = @__id_0 AND w."BusinessId" = @__businessId_1 AND lower(w."Provider") = @__ToLower_2
LIMIT 1
2025-09-19 17:49:16.757 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" AS w
SET "IsDefault" = FALSE
WHERE w."BusinessId" = @__businessId_0 AND lower(w."Provider") = @__ToLower_1
2025-09-19 17:49:16.764 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='77684bff-5729-4f76-9db4-913040ab71a9', @p0='2025-09-19T12:19:16.7600302Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 17:49:16.769 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-19 17:49:16.770 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api) in 122.395ms
2025-09-19 17:49:16.771 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:49:16.773 +05:30 [INF] Request finished HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/77684bff-5729-4f76-9db4-913040ab71a9/default - 204 null null 137.1722ms
2025-09-19 17:49:19.609 +05:30 [INF] Request starting HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/77684bff-5729-4f76-9db4-913040ab71a9/default - application/json 4
2025-09-19 17:49:19.612 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:49:19.613 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:49:19.615 +05:30 [INF] Route matched with {action = "SetDefault", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetDefault(System.String, System.Guid) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:49:19.625 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='77684bff-5729-4f76-9db4-913040ab71a9', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."Id" = @__id_0 AND w."BusinessId" = @__businessId_1 AND lower(w."Provider") = @__ToLower_2
LIMIT 1
2025-09-19 17:49:19.632 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" AS w
SET "IsDefault" = FALSE
WHERE w."BusinessId" = @__businessId_0 AND lower(w."Provider") = @__ToLower_1
2025-09-19 17:49:19.641 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='77684bff-5729-4f76-9db4-913040ab71a9', @p0='True', @p1='2025-09-19T12:19:19.6372575Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" SET "IsDefault" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-09-19 17:49:19.646 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-19 17:49:19.647 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api) in 29.9412ms
2025-09-19 17:49:19.649 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:49:19.650 +05:30 [INF] Request finished HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/77684bff-5729-4f76-9db4-913040ab71a9/default - 204 null null 41.8958ms
2025-09-19 17:49:32.167 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/e7abb04c-eaee-4f66-9234-6ef058499674/default - null null
2025-09-19 17:49:32.171 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:49:32.172 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/e7abb04c-eaee-4f66-9234-6ef058499674/default - 204 null null 4.9639ms
2025-09-19 17:49:32.176 +05:30 [INF] Request starting HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/e7abb04c-eaee-4f66-9234-6ef058499674/default - application/json 4
2025-09-19 17:49:32.181 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:49:32.182 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:49:32.184 +05:30 [INF] Route matched with {action = "SetDefault", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetDefault(System.String, System.Guid) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:49:32.190 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='e7abb04c-eaee-4f66-9234-6ef058499674', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."Id" = @__id_0 AND w."BusinessId" = @__businessId_1 AND lower(w."Provider") = @__ToLower_2
LIMIT 1
2025-09-19 17:49:32.198 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" AS w
SET "IsDefault" = FALSE
WHERE w."BusinessId" = @__businessId_0 AND lower(w."Provider") = @__ToLower_1
2025-09-19 17:49:32.204 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='e7abb04c-eaee-4f66-9234-6ef058499674', @p0='True', @p1='2025-09-19T12:19:32.2013402Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" SET "IsDefault" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-09-19 17:49:32.209 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-19 17:49:32.212 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api) in 25.1169ms
2025-09-19 17:49:32.214 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:49:32.215 +05:30 [INF] Request finished HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/e7abb04c-eaee-4f66-9234-6ef058499674/default - 204 null null 38.9631ms
2025-09-19 17:49:43.554 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/77684bff-5729-4f76-9db4-913040ab71a9/default - null null
2025-09-19 17:49:43.561 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:49:43.563 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/77684bff-5729-4f76-9db4-913040ab71a9/default - 204 null null 9.4443ms
2025-09-19 17:49:43.569 +05:30 [INF] Request starting HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/77684bff-5729-4f76-9db4-913040ab71a9/default - application/json 4
2025-09-19 17:49:43.573 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:49:43.575 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:49:43.576 +05:30 [INF] Route matched with {action = "SetDefault", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetDefault(System.String, System.Guid) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:49:43.582 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='77684bff-5729-4f76-9db4-913040ab71a9', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."Id" = @__id_0 AND w."BusinessId" = @__businessId_1 AND lower(w."Provider") = @__ToLower_2
LIMIT 1
2025-09-19 17:49:43.590 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" AS w
SET "IsDefault" = FALSE
WHERE w."BusinessId" = @__businessId_0 AND lower(w."Provider") = @__ToLower_1
2025-09-19 17:49:43.597 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='77684bff-5729-4f76-9db4-913040ab71a9', @p0='True', @p1='2025-09-19T12:19:43.5937634Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" SET "IsDefault" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-09-19 17:49:43.620 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-19 17:49:43.621 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api) in 42.0247ms
2025-09-19 17:49:43.623 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:49:43.625 +05:30 [INF] Request finished HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/77684bff-5729-4f76-9db4-913040ab71a9/default - 204 null null 55.2778ms
2025-09-19 17:49:47.114 +05:30 [INF] Request starting HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/77684bff-5729-4f76-9db4-913040ab71a9/default - application/json 4
2025-09-19 17:49:47.119 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:49:47.120 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:49:47.122 +05:30 [INF] Route matched with {action = "SetDefault", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetDefault(System.String, System.Guid) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:49:47.127 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='77684bff-5729-4f76-9db4-913040ab71a9', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."Id" = @__id_0 AND w."BusinessId" = @__businessId_1 AND lower(w."Provider") = @__ToLower_2
LIMIT 1
2025-09-19 17:49:47.139 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" AS w
SET "IsDefault" = FALSE
WHERE w."BusinessId" = @__businessId_0 AND lower(w."Provider") = @__ToLower_1
2025-09-19 17:49:47.145 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='77684bff-5729-4f76-9db4-913040ab71a9', @p0='2025-09-19T12:19:47.1416774Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 17:49:47.149 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-19 17:49:47.151 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api) in 26.7038ms
2025-09-19 17:49:47.152 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:49:47.154 +05:30 [INF] Request finished HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/77684bff-5729-4f76-9db4-913040ab71a9/default - 204 null null 39.7577ms
2025-09-19 17:49:58.568 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/77684bff-5729-4f76-9db4-913040ab71a9/default - null null
2025-09-19 17:49:58.572 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:49:58.573 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/77684bff-5729-4f76-9db4-913040ab71a9/default - 204 null null 4.9775ms
2025-09-19 17:49:58.578 +05:30 [INF] Request starting HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/77684bff-5729-4f76-9db4-913040ab71a9/default - application/json 4
2025-09-19 17:49:58.582 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:49:58.583 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:49:58.584 +05:30 [INF] Route matched with {action = "SetDefault", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetDefault(System.String, System.Guid) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:49:58.591 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='77684bff-5729-4f76-9db4-913040ab71a9', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."Id" = @__id_0 AND w."BusinessId" = @__businessId_1 AND lower(w."Provider") = @__ToLower_2
LIMIT 1
2025-09-19 17:49:58.599 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" AS w
SET "IsDefault" = FALSE
WHERE w."BusinessId" = @__businessId_0 AND lower(w."Provider") = @__ToLower_1
2025-09-19 17:49:58.606 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='77684bff-5729-4f76-9db4-913040ab71a9', @p0='True', @p1='2025-09-19T12:19:58.6026426Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" SET "IsDefault" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-09-19 17:49:58.612 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-19 17:49:58.613 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api) in 26.3479ms
2025-09-19 17:49:58.615 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:49:58.617 +05:30 [INF] Request finished HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/77684bff-5729-4f76-9db4-913040ab71a9/default - 204 null null 39.5081ms
2025-09-19 17:50:00.103 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-09-19 17:50:00.109 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:00.110 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 7.0061ms
2025-09-19 17:50:00.115 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 572
2025-09-19 17:50:00.118 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:00.120 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 17:50:00.124 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 17:50:00.131 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__dto_Provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0 AND w."Provider" = @__dto_Provider_1
LIMIT 1
2025-09-19 17:50:00.157 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[@p1='c13c2c23-4ed0-4441-b5b2-6b2b581bdca3', @p0='2025-09-19T12:20:00.1364085Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 17:50:00.161 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:50:00.162 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 35.8188ms
2025-09-19 17:50:00.165 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 17:50:00.166 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 51.2851ms
2025-09-19 17:50:09.013 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/77684bff-5729-4f76-9db4-913040ab71a9/default - null null
2025-09-19 17:50:09.016 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:09.017 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/77684bff-5729-4f76-9db4-913040ab71a9/default - 204 null null 4.7736ms
2025-09-19 17:50:09.022 +05:30 [INF] Request starting HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/77684bff-5729-4f76-9db4-913040ab71a9/default - application/json 4
2025-09-19 17:50:09.025 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:09.026 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:50:09.028 +05:30 [INF] Route matched with {action = "SetDefault", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetDefault(System.String, System.Guid) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:50:09.034 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='77684bff-5729-4f76-9db4-913040ab71a9', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."Id" = @__id_0 AND w."BusinessId" = @__businessId_1 AND lower(w."Provider") = @__ToLower_2
LIMIT 1
2025-09-19 17:50:09.042 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" AS w
SET "IsDefault" = FALSE
WHERE w."BusinessId" = @__businessId_0 AND lower(w."Provider") = @__ToLower_1
2025-09-19 17:50:09.049 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='77684bff-5729-4f76-9db4-913040ab71a9', @p0='2025-09-19T12:20:09.0455330Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 17:50:09.074 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-19 17:50:09.076 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api) in 45.553ms
2025-09-19 17:50:09.077 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:50:09.080 +05:30 [INF] Request finished HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/77684bff-5729-4f76-9db4-913040ab71a9/default - 204 null null 58.5078ms
2025-09-19 17:50:10.233 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/e7abb04c-eaee-4f66-9234-6ef058499674/default - null null
2025-09-19 17:50:10.237 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:10.238 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/e7abb04c-eaee-4f66-9234-6ef058499674/default - 204 null null 4.5368ms
2025-09-19 17:50:10.242 +05:30 [INF] Request starting HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/e7abb04c-eaee-4f66-9234-6ef058499674/default - application/json 4
2025-09-19 17:50:10.245 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:10.247 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:50:10.249 +05:30 [INF] Route matched with {action = "SetDefault", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetDefault(System.String, System.Guid) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:50:10.255 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='e7abb04c-eaee-4f66-9234-6ef058499674', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."Id" = @__id_0 AND w."BusinessId" = @__businessId_1 AND lower(w."Provider") = @__ToLower_2
LIMIT 1
2025-09-19 17:50:10.263 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" AS w
SET "IsDefault" = FALSE
WHERE w."BusinessId" = @__businessId_0 AND lower(w."Provider") = @__ToLower_1
2025-09-19 17:50:10.270 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='e7abb04c-eaee-4f66-9234-6ef058499674', @p0='True', @p1='2025-09-19T12:20:10.2672070Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" SET "IsDefault" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-09-19 17:50:10.292 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-19 17:50:10.294 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api) in 42.616ms
2025-09-19 17:50:10.297 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:50:10.299 +05:30 [INF] Request finished HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/e7abb04c-eaee-4f66-9234-6ef058499674/default - 204 null null 56.499ms
2025-09-19 17:50:11.442 +05:30 [INF] Request starting HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/77684bff-5729-4f76-9db4-913040ab71a9/default - application/json 4
2025-09-19 17:50:11.445 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:11.447 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:50:11.449 +05:30 [INF] Route matched with {action = "SetDefault", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetDefault(System.String, System.Guid) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:50:11.454 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='77684bff-5729-4f76-9db4-913040ab71a9', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."Id" = @__id_0 AND w."BusinessId" = @__businessId_1 AND lower(w."Provider") = @__ToLower_2
LIMIT 1
2025-09-19 17:50:11.461 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" AS w
SET "IsDefault" = FALSE
WHERE w."BusinessId" = @__businessId_0 AND lower(w."Provider") = @__ToLower_1
2025-09-19 17:50:11.468 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='77684bff-5729-4f76-9db4-913040ab71a9', @p0='True', @p1='2025-09-19T12:20:11.4642134Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" SET "IsDefault" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-09-19 17:50:11.473 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-19 17:50:11.474 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api) in 23.0132ms
2025-09-19 17:50:11.476 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:50:11.478 +05:30 [INF] Request finished HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/77684bff-5729-4f76-9db4-913040ab71a9/default - 204 null null 35.9221ms
2025-09-19 17:50:12.576 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-09-19 17:50:12.580 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:12.581 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 5.3271ms
2025-09-19 17:50:12.586 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 572
2025-09-19 17:50:12.589 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:12.590 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 17:50:12.592 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 17:50:12.598 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__dto_Provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0 AND w."Provider" = @__dto_Provider_1
LIMIT 1
2025-09-19 17:50:12.623 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p1='c13c2c23-4ed0-4441-b5b2-6b2b581bdca3', @p0='2025-09-19T12:20:12.6044560Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 17:50:12.628 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:50:12.630 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 35.7642ms
2025-09-19 17:50:12.632 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 17:50:12.634 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 48.4972ms
2025-09-19 17:50:26.246 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-09-19 17:50:26.251 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:26.252 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 5.6488ms
2025-09-19 17:50:26.256 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 572
2025-09-19 17:50:26.259 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:26.261 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 17:50:26.262 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 17:50:26.268 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__dto_Provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0 AND w."Provider" = @__dto_Provider_1
LIMIT 1
2025-09-19 17:50:26.294 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p1='c13c2c23-4ed0-4441-b5b2-6b2b581bdca3', @p0='2025-09-19T12:20:26.2745685Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 17:50:26.297 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:50:26.299 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 34.6611ms
2025-09-19 17:50:26.302 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 17:50:26.303 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 47.0545ms
2025-09-19 17:50:36.629 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - null null
2025-09-19 17:50:36.632 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsapptemplatefetcher/get-template-all - null null
2025-09-19 17:50:36.634 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:36.634 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 17:50:36.639 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:36.641 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts - 204 null null 11.7015ms
2025-09-19 17:50:36.645 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:36.646 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsapptemplatefetcher/get-template-all - 204 null null 13.5799ms
2025-09-19 17:50:36.650 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts - null null
2025-09-19 17:50:36.652 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 204 null null 17.519ms
2025-09-19 17:50:36.657 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsapptemplatefetcher/get-template-all - null null
2025-09-19 17:50:36.661 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:36.665 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 17:50:36.670 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 17:50:36.671 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:36.674 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:36.676 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 17:50:36.677 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-19 17:50:36.678 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:50:36.681 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=25
2025-09-19 17:50:36.685 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:50:36.690 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 17:50:36.687 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-09-19 17:50:36.706 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='25', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 17:50:36.711 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 17:50:36.712 +05:30 [INF] 🔎 Fetching templates for BusinessId "10d9469d-4e77-4845-a87f-dbc7e3348b11"
2025-09-19 17:50:36.713 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 31.9514ms
2025-09-19 17:50:36.716 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 17:50:36.717 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts - 200 null application/json; charset=utf-8 67.0651ms
2025-09-19 17:50:36.721 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 17:50:36.730 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-19 17:50:36.732 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-19 17:50:36.815 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='PINNACLE'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 17:50:36.819 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 17:50:36.822 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 128.9199ms
2025-09-19 17:50:36.825 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:50:36.827 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 200 null application/json; charset=utf-8 162.3459ms
2025-09-19 17:50:38.125 +05:30 [INF] Received HTTP response headers after 1392.1597ms - 200
2025-09-19 17:50:38.127 +05:30 [INF] End processing HTTP request after 1397.512ms - 200
2025-09-19 17:50:38.224 +05:30 [INF] 📦 Meta Template API (Biz "10d9469d-4e77-4845-a87f-dbc7e3348b11") payload:
{"data":[{"name":"human_takeover_confirmation_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Thank you! We've received your request. One of our experts will get in touch with you shortly.\n\nIs there anything else I can help you with in the meantime?"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1304432401406654"},{"name":"welcome_menu_minds","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello! Thank you for contacting MindsMiratus.\n\nIf you're a new visitor, we're happy to help you get started. If you're an existing customer, we're here to support you. Please choose from the options below."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Explore Our Services"},{"type":"QUICK_REPLY","text":"View Our Products"},{"type":"QUICK_REPLY","text":"Customer Support"},{"type":"QUICK_REPLY","text":"Contact Sales"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1115530356706526"},{"name":"products_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We are proud to offer our powerful and easy-to-use GST Software, designed to simplify your tax compliance, invoicing, and financial management.\n\nWhat would you like to do?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a GST Demo"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2567632853585898"},{"name":"services_menu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We offer a wide range of services to power your business's growth. Please select a category you are interested in:"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Design Services"},{"type":"QUICK_REPLY","text":"Development Services"},{"type":"QUICK_REPLY","text":"Digital & Tele-Marketing"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"738253949023987"},{"name":"support_project_status_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"To check the status of your ongoing project, please provide your registered email address or project ID, and one of our project managers will get back to you with a detailed update shortly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Project Manager"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1599668577490835"},{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"},{"name":"support_main_menu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Welcome to the MindsMiratus Support Center. We're here to help you with any questions or issues you may have.\n\nPlease select an option so we can assist you faster."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"GST Software Support"},{"type":"QUICK_REPLY","text":"Check Project Status"},{"type":"QUICK_REPLY","text":"Report Technical Issues"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en","status":"APPROVED","category":"MARKETING","id":"679342281096115"},{"name":"demo","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Demo Template"},{"type":"BODY","text":"Demo Template Message."},{"type":"FOOTER","text":"sent by ExploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/visit"]},{"type":"URL","text":"Shop Now","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/shopnow"]},{"type":"PHONE_NUMBER","text":"Call Us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"757818770430461"},{"name":"contact_sales_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We'd love to discuss how we can help your business grow. You can reach our sales team via email at info\u0040mindsmiratus.com or call us at +91-321-123-4321.\n\nWould you like one of our experts to call you back?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Yes, call me back"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"954501560165102"},{"name":"dev_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our expert developers build robust and scalable solutions tailored to your business needs. Which area of development interests you?\n\n\ud83d\udcbb Web & Software Dev: Custom applications and software solutions.\n\ud83d\udcf1 Mobile App Dev: Engaging and high-performance apps for iOS and Android.\n\ud83d\uded2 E-commerce Dev: Powerful online stores that drive sales and growth."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Discuss a Project"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3118090155157247"},{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/tutrials"]},{"type":"URL","text":"View Demo","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"},{"name":"build_urltracking","parameter_format":"NAMED","components":[{"type":"BODY","text":"Hello \n\nThis is the test message to check wheather redirecting url is working or not."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/softwaredev"]},{"type":"URL","text":"Explore More","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/moreopt"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"788214393726841"},{"name":"marketing_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We help you reach your target audience and grow your brand effectively. Explore our marketing services:\n\n\ud83d\udcc8 Digital Marketing: SEO, Social Media Marketing, and targeted PPC campaigns.\n\ud83d\udcde Tele-Marketing: IVR systems, Bulk SMS, Voice Calls, and official WhatsApp API solutions."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Get a Marketing Plan"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1683803515627636"},{"name":"design_services_submenu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our creative team delivers stunning and effective designs to make your brand stand out. Which design service would you like to know more about?\n\n\ud83c\udfa8 Website Designing: We build beautiful, responsive, and user-friendly websites.\n\ud83d\udd8c\ufe0f Graphic Designing: We create compelling visuals, logos, and branding materials."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a Design Quote"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3291988187631744"},{"name":"support_gst_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"You've reached support for our GST Software. How can we help?\n\n\ud83d\udd27 Technical Help: For installation issues, errors, or bugs.\n\ud83d\udca1 Feature Questions: To understand how to use a specific feature.\n\ud83d\udcda View FAQs: Get answers to common questions instantly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Support Agent"},{"type":"QUICK_REPLY","text":"View FAQs"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1305308197880244"},{"name":"support_report_issue_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We're sorry to hear you're experiencing an issue.\n\nTo help us resolve it quickly, please tap the button below to connect with our technical support team. Please be ready to provide a brief description of the problem."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Connect to Technical Team"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"755167220845328"},{"name":"about_us_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"MindsMiratus is a leading IT solutions company dedicated to helping businesses grow through innovative and effective digital services. From design to development and marketing, we provide comprehensive solutions to elevate your brand.\n\nWhat would you like to do next?"},{"type":"FOOTER","text":"sent by Mindsmirtus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"},{"type":"QUICK_REPLY","text":"Talk to an Expert"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1971204310331370"},{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"\u26a1\ufe0f Feature Annoucement ! \u26a1\ufe0f\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/\u00257B\u00257BI\u00257D\u00257D{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"View Tutorials","url":"https:\/\/www.youtube.com\/\u00257B\u00257Bi\u00257D\u00257D{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"},{"name":"call_log","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is the checking for call log event."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/seeme"]},{"type":"URL","text":"Call Us","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/callme"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1286058192539680"},{"name":"track_url_after_flow_integ","message_send_ttl_seconds":86400,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BODY","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/vosiatstore"]},{"type":"URL","text":"Visit Demo","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/demo"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1084981273615848"},{"name":"template_3","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 3"},{"type":"BODY","text":"This is themplate : 3"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1760623375330098"},{"name":"template_2","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 2"},{"type":"BODY","text":"This is teh template 2"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1222093123248950"},{"name":"template_1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 1"},{"type":"BODY","text":"This is the Template : 1"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 2"},{"type":"QUICK_REPLY","text":"Show Me Template 3"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2381212765606675"},{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"watch Video","url":"https:\/\/www.youtube.com\/{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"},{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=7sw82IMY4uQQ7kNvwGo_356&_nc_oc=AdmfC_35MV8W4KRORGuHw5JAsYOfN8J86REvew1DuaiUgQ_fHx3Im8bnwAWEm0m4yQuT3bjqKMqibQMSN3r0ASV_&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=58AG5GdM51uSHonT_w0vVA&oh=01_Q5Aa2gExo9pfyhcip4qGInSrY3cSFza6PeWLfy8XIgDRKVXcRA&oe=68F4D18F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! \ud83c\udf89\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15\u0025 discount** on your purchase. Don't just follow the trend\u2014set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https:\/\/xplorebytesolutions.com\/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"},{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https:\/\/www.qwexample.com\/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"}],"paging":{"cursors":{"before":"MAZDZD","after":"OTkZD"}}}
2025-09-19 17:50:38.255 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType107`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:50:38.262 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 1557.1688ms
2025-09-19 17:50:38.265 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-19 17:50:38.266 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsapptemplatefetcher/get-template-all - 200 null application/json; charset=utf-8 1609.7993ms
2025-09-19 17:50:40.807 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 17:50:40.810 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 17:50:40.811 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:40.814 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:40.816 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 204 null null 8.9439ms
2025-09-19 17:50:40.817 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 204 null null 6.7062ms
2025-09-19 17:50:40.840 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 17:50:40.840 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 17:50:40.846 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:40.851 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:40.853 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 17:50:40.854 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-19 17:50:40.855 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-19 17:50:40.857 +05:30 [INF] Route matched with {action = "GetSenders", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSenders(System.Guid) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 17:50:40.865 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-19 17:50:40.870 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 17:50:40.874 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType107`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType183`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:50:40.876 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.WhatsAppSettings.DTOs.WhatsAppSenderDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 17:50:40.880 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 20.0819ms
2025-09-19 17:50:40.882 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api) in 15.9352ms
2025-09-19 17:50:40.884 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 17:50:40.886 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-19 17:50:40.888 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 200 null application/json; charset=utf-8 47.8021ms
2025-09-19 17:50:40.890 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 200 null application/json; charset=utf-8 49.3195ms
2025-09-19 17:50:51.062 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/human_takeover_confirmation_v1 - null null
2025-09-19 17:50:51.066 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:51.067 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/human_takeover_confirmation_v1 - 204 null null 5.0204ms
2025-09-19 17:50:51.070 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/human_takeover_confirmation_v1 - null null
2025-09-19 17:50:51.074 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:51.076 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-19 17:50:51.077 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-19 17:50:51.084 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__name_1='human_takeover_confirmation_v1'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-09-19 17:50:51.090 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType184`8[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:50:51.092 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 12.6986ms
2025-09-19 17:50:51.094 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-19 17:50:51.096 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11/human_takeover_confirmation_v1 - 200 null application/json; charset=utf-8 26.049ms
2025-09-19 17:50:56.173 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-09-19 17:50:56.177 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:56.178 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 5.1928ms
2025-09-19 17:50:56.182 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 436
2025-09-19 17:50:56.185 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:56.187 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-19 17:50:56.188 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 17:50:57.640 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__phoneNumberId_1='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."PhoneNumberId" = @__phoneNumberId_1 AND w."IsActive"
LIMIT 1
2025-09-19 17:50:57.649 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 17:50:57.653 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:50:57.655 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:50:58.603 +05:30 [INF] Received HTTP response headers after 946.0765ms - 200
2025-09-19 17:50:58.605 +05:30 [INF] End processing HTTP request after 951.5841ms - 200
2025-09-19 17:50:58.732 +05:30 [INF] Executed DbCommand (16ms) [Parameters=[@p0='22b2888a-20cf-42d7-8589-cd3a832fc359', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2=NULL (DbType = Guid), @p3=NULL (DbType = Guid), @p4='text', @p5='2025-09-19T12:20:58.7053365Z' (DbType = DateTime), @p6='system', @p7=NULL (DbType = Guid), @p8=NULL (DbType = DateTime), @p9=NULL, @p10=NULL, @p11=NULL, @p12=NULL, @p13='False', @p14='Thank you! We've received your request. One of our experts will get in touch with you shortly.

Is there anything else I can help you with in the meantime?', @p15='human_takeover_confirmation_v1' (Nullable = false), @p16='human2' (Nullable = false), @p17='673199269218077', @p18='META_CLOUD', @p19=NULL (DbType = DateTime), @p20=NULL (DbType = Guid), @p21='Draft' (Nullable = false), @p22='human_takeover_confirmation_v1', @p23='[]', @p24='2025-09-19T12:20:58.7053368Z' (DbType = DateTime), @p25='ac355f43-1a5a-4c72-b3cb-10c77ba37808', @p26='22b2888a-20cf-42d7-8589-cd3a832fc359', @p27='True', @p28='1', @p29='Back to Main Menu' (Nullable = false), @p30='QUICK_REPLY' (Nullable = false), @p31='' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "BusinessId", "CTAFlowConfigId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "PhoneNumberId", "Provider", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30, @p31);
2025-09-19 17:50:58.756 +05:30 [INF] ✅ Campaign 'human2' created | FlowId: null | EntryTemplate: human_takeover_confirmation_v1 | Sender: META_CLOUD/673199269218077 | Recipients: 0
2025-09-19 17:50:58.759 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType50`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:50:58.761 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 2570.0142ms
2025-09-19 17:50:58.763 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-19 17:50:58.764 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 2581.7623ms
2025-09-19 17:50:58.835 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-19 17:50:58.836 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/22b2888a-20cf-42d7-8589-cd3a832fc359 - null null
2025-09-19 17:50:58.837 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-19 17:50:58.837 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-19 17:50:58.840 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:58.842 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:58.848 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:58.852 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:58.853 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 17.2413ms
2025-09-19 17:50:58.854 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/22b2888a-20cf-42d7-8589-cd3a832fc359 - 204 null null 17.6652ms
2025-09-19 17:50:58.855 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 18.1814ms
2025-09-19 17:50:58.857 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 19.2068ms
2025-09-19 17:50:58.868 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-19 17:50:58.873 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/22b2888a-20cf-42d7-8589-cd3a832fc359 - null null
2025-09-19 17:50:58.877 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-19 17:50:58.881 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:58.884 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:58.889 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:58.890 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 17:50:58.891 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-19 17:50:58.893 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-19 17:50:58.894 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 17:50:58.895 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 17:50:58.897 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-19 17:50:58.900 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=1000
2025-09-19 17:50:58.909 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__campaignId_0='22b2888a-20cf-42d7-8589-cd3a832fc359', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", t."Id1", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value", t."BusinessId1", t."CreatedAt1", t."CreatedBy0", t."FlowName", t."IsActive0", t."IsPublished", t."UpdatedAt1"
FROM (
    SELECT c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0", c1."Id" AS "Id1", c1."BusinessId" AS "BusinessId1", c1."CreatedAt" AS "CreatedAt1", c1."CreatedBy" AS "CreatedBy0", c1."FlowName", c1."IsActive" AS "IsActive0", c1."IsPublished", c1."UpdatedAt" AS "UpdatedAt1"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    LEFT JOIN "CTAFlowConfigs" AS c1 ON c."CTAFlowConfigId" = c1."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t."Id0", t."Id1"
2025-09-19 17:50:58.913 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-19 17:50:58.924 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-09-19 17:50:58.927 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 17:50:58.928 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 26.6376ms
2025-09-19 17:50:58.930 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 21.4721ms
2025-09-19 17:50:58.931 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-19 17:50:58.932 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-19 17:50:58.934 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-19 17:50:58.938 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:50:58.939 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/22b2888a-20cf-42d7-8589-cd3a832fc359 - 200 null application/json; charset=utf-8 66.3564ms
2025-09-19 17:50:58.941 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 64.1401ms
2025-09-19 17:50:58.943 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-19 17:50:58.953 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-19 17:50:58.958 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-19 17:50:58.964 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 17:50:58.966 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 11.4373ms
2025-09-19 17:50:58.969 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-19 17:50:58.970 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 38.9607ms
2025-09-19 17:50:59.028 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 17:50:59.036 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 17:50:59.040 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 17:50:59.042 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 143.1892ms
2025-09-19 17:50:59.045 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 17:50:59.046 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 178.8369ms
2025-09-19 17:51:01.430 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/22b2888a-20cf-42d7-8589-cd3a832fc359/assign-contacts - null null
2025-09-19 17:51:01.433 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:51:01.434 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/22b2888a-20cf-42d7-8589-cd3a832fc359/assign-contacts - 204 null null 4.075ms
2025-09-19 17:51:01.438 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/22b2888a-20cf-42d7-8589-cd3a832fc359/assign-contacts - application/json 55
2025-09-19 17:51:01.443 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:51:01.444 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-09-19 17:51:01.445 +05:30 [INF] Route matched with {action = "AssignContactsToCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AssignContactsToCampaign(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.AssignContactsDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 17:51:01.452 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='22b2888a-20cf-42d7-8589-cd3a832fc359', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt"
FROM (
    SELECT c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignRecipients" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-19 17:51:01.465 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='1b2c2600-6855-48ea-a329-c6064eed0a6b', @p1=NULL, @p2='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p3='22b2888a-20cf-42d7-8589-cd3a832fc359', @p4=NULL, @p5=NULL, @p6='75df7429-287c-406a-83d8-0dfa045b0093', @p7='False', @p8=NULL, @p9=NULL, @p10='2025-09-19T12:21:01.4591359Z' (Nullable = true) (DbType = DateTime), @p11='Pending' (Nullable = false), @p12='2025-09-19T12:21:01.4591366Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignRecipients" ("Id", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IsAutoTagged", "MessagePreview", "ProductBrowsed", "SentAt", "Status", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-09-19 17:51:01.469 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:51:01.471 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api) in 23.8195ms
2025-09-19 17:51:01.473 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.AssignContactsToCampaign (xbytechat.api)'
2025-09-19 17:51:01.475 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/22b2888a-20cf-42d7-8589-cd3a832fc359/assign-contacts - 200 null application/json; charset=utf-8 37.7031ms
2025-09-19 17:51:04.510 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-19 17:51:04.516 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:51:04.517 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 6.9681ms
2025-09-19 17:51:04.532 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-19 17:51:04.538 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:51:04.540 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-19 17:51:04.541 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 17:51:04.549 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-09-19 17:51:04.552 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 17:51:04.555 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 11.6391ms
2025-09-19 17:51:04.557 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-19 17:51:04.558 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 26.8575ms
2025-09-19 17:51:05.599 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/22b2888a-20cf-42d7-8589-cd3a832fc359 - null null
2025-09-19 17:51:05.602 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:51:05.605 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/22b2888a-20cf-42d7-8589-cd3a832fc359 - 204 null null 6.7792ms
2025-09-19 17:51:05.613 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/22b2888a-20cf-42d7-8589-cd3a832fc359 - null 0
2025-09-19 17:51:05.616 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:51:05.617 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-19 17:51:05.619 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 17:51:05.626 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='22b2888a-20cf-42d7-8589-cd3a832fc359'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-09-19 17:51:05.633 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 17:51:05.636 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:51:05.638 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:51:06.691 +05:30 [INF] Received HTTP response headers after 1051.6522ms - 200
2025-09-19 17:51:06.693 +05:30 [INF] End processing HTTP request after 1056.6374ms - 200
2025-09-19 17:51:06.999 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 17:51:07.004 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-19 17:51:07.008 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 17:51:07.010 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 17:51:08.877 +05:30 [INF] Received HTTP response headers after 1864.8446ms - 200
2025-09-19 17:51:08.879 +05:30 [INF] End processing HTTP request after 1870.724ms - 200
2025-09-19 17:51:08.889 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p0='f1b17fbc-a04a-4576-9397-67c7fc340ec6', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='[{"i":0,"t":"Back to Main Menu","position":1,"text":"Back to Main Menu","type":"QUICK_REPLY","subType":"quick_reply"}]', @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='22b2888a-20cf-42d7-8589-cd3a832fc359' (Nullable = true), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T12:21:08.8816529Z' (DbType = DateTime), @p8=NULL, @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='human_takeover_confirmation_v1' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTNFQzZCNzc2QjA2NDE0NDgzAA==', @p14='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTNFQzZCNzc2QjA2NDE0NDgzAA==","message_status":"accepted"}]}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17=NULL, @p18='a0014983-c334-4892-bd59-21c5d2e77178' (Nullable = true), @p19='2025-09-19T12:21:08.8816530Z' (Nullable = true) (DbType = DateTime), @p20='campaign', @p21='Sent' (Nullable = false), @p22='f1d67325-5b47-4489-b992-9e1a39e970ba', @p23='True', @p24=NULL, @p25='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p26='[{"i":0,"t":"Back to Main Menu","position":1,"text":"Back to Main Menu","type":"QUICK_REPLY","subType":"quick_reply"}]', @p27=NULL (DbType = Guid), @p28=NULL (DbType = Guid), @p29='22b2888a-20cf-42d7-8589-cd3a832fc359', @p30=NULL, @p31=NULL, @p32=NULL (DbType = DateTime), @p33='75df7429-287c-406a-83d8-0dfa045b0093', @p34=NULL, @p35='2025-09-19T12:21:08.8818886Z' (DbType = DateTime), @p36='system', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40=NULL, @p41=NULL, @p42='False', @p43=NULL (DbType = DateTime), @p44=NULL, @p45=NULL, @p46='Thank you! We've received your request. One of our experts will get in touch with you shortly.

Is there anything else I can help you with in the meantime?' (Nullable = false), @p47='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTNFQzZCNzc2QjA2NDE0NDgzAA==', @p48='f1b17fbc-a04a-4576-9397-67c7fc340ec6' (Nullable = true), @p49=NULL (DbType = DateTime), @p50='1b2c2600-6855-48ea-a329-c6064eed0a6b', @p51='0', @p52='a0014983-c334-4892-bd59-21c5d2e77178' (Nullable = true), @p53='Sent', @p54='2025-09-19T12:21:08.8818888Z' (Nullable = true) (DbType = DateTime), @p55=NULL, @p56='human_takeover_confirmation_v1', @p57=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57);
2025-09-19 17:51:08.894 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 17:51:08.895 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 3273.6575ms
2025-09-19 17:51:08.897 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-19 17:51:08.898 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/22b2888a-20cf-42d7-8589-cd3a832fc359 - 200 null application/json; charset=utf-8 3285.8927ms
2025-09-19 17:51:10.209 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-19 17:51:10.214 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:51:10.217 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:51:10.220 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTNFQzZCNzc2QjA2NDE0NDgzAA==","status":"sent","timestamp":"1758284469","recipient_id":"918974005240","conversation":{"id":"875f7b50d71b1efb4f9e4a0611eb4483","expiration_timestamp":"1758284469","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:51:10.222 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:51:10.222 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTNFQzZCNzc2QjA2NDE0NDgzAA==","status":"sent","timestamp":"1758284469","recipient_id":"918974005240","conversation":{"id":"875f7b50d71b1efb4f9e4a0611eb4483","expiration_timestamp":"1758284469","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:51:10.223 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:51:10.226 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.1575ms
2025-09-19 17:51:10.229 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-19 17:51:10.230 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:51:10.238 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-19 17:51:10.239 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 30.3076ms
2025-09-19 17:51:10.242 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-19 17:51:10.250 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 17:51:10.254 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTNFQzZCNzc2QjA2NDE0NDgzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:51:10.259 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='f1d67325-5b47-4489-b992-9e1a39e970ba'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-19 17:51:10.262 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTNFQzZCNzc2QjA2NDE0NDgzAA== (legacy)
2025-09-19 17:51:10.994 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-09-19 17:51:10.997 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:51:10.999 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:51:11.002 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTNFQzZCNzc2QjA2NDE0NDgzAA==","status":"read","timestamp":"1758284469","recipient_id":"918974005240","conversation":{"id":"875f7b50d71b1efb4f9e4a0611eb4483","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:51:11.003 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:51:11.004 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTNFQzZCNzc2QjA2NDE0NDgzAA==","status":"read","timestamp":"1758284469","recipient_id":"918974005240","conversation":{"id":"875f7b50d71b1efb4f9e4a0611eb4483","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:51:11.005 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:51:11.006 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 17:51:11.008 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.5713ms
2025-09-19 17:51:11.012 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTNFQzZCNzc2QjA2NDE0NDgzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:51:11.012 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:51:11.019 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='f1d67325-5b47-4489-b992-9e1a39e970ba'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-19 17:51:11.020 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 25.3167ms
2025-09-19 17:51:11.043 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p2='f1d67325-5b47-4489-b992-9e1a39e970ba', @p0='2025-09-19T12:21:09.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-19 17:51:11.047 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTNFQzZCNzc2QjA2NDE0NDgzAA== → Read
2025-09-19 17:51:19.281 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 17:51:19.284 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 17:51:19.285 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:51:19.288 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:51:19.289 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 8.5283ms
2025-09-19 17:51:19.290 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 204 null null 6.5045ms
2025-09-19 17:51:19.304 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-19 17:51:19.305 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-19 17:51:19.309 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:51:19.312 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:51:19.313 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 17:51:19.314 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:51:19.315 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 17:51:19.317 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:51:19.322 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-19 17:51:19.329 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='PINNACLE'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 17:51:19.332 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-09-19 17:51:19.334 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 17:51:19.336 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 16.3587ms
2025-09-19 17:51:19.338 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 12.3536ms
2025-09-19 17:51:19.340 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-19 17:51:19.341 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:51:19.343 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 38.4049ms
2025-09-19 17:51:19.344 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 200 null application/json; charset=utf-8 39.1663ms
2025-09-19 17:51:19.352 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 17:51:19.354 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:51:19.355 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 3.7288ms
2025-09-19 17:51:19.359 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 17:51:19.362 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:51:19.363 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:51:19.365 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:51:19.369 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 17:51:19.374 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 17:51:19.376 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 9.554ms
2025-09-19 17:51:19.378 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-19 17:51:19.379 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:51:19.382 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:51:19.384 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 24.2674ms
2025-09-19 17:51:19.385 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:51:19.390 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:51:19.395 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 17:51:19.400 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 17:51:19.402 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 9.3736ms
2025-09-19 17:51:19.404 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-19 17:51:19.405 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 27.5608ms
2025-09-19 17:51:29.075 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/e7abb04c-eaee-4f66-9234-6ef058499674/default - null null
2025-09-19 17:51:29.078 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:51:29.079 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/e7abb04c-eaee-4f66-9234-6ef058499674/default - 204 null null 4.0159ms
2025-09-19 17:51:29.085 +05:30 [INF] Request starting HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/e7abb04c-eaee-4f66-9234-6ef058499674/default - application/json 4
2025-09-19 17:51:29.089 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:51:29.090 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:51:29.092 +05:30 [INF] Route matched with {action = "SetDefault", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetDefault(System.String, System.Guid) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:51:29.097 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='e7abb04c-eaee-4f66-9234-6ef058499674', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."Id" = @__id_0 AND w."BusinessId" = @__businessId_1 AND lower(w."Provider") = @__ToLower_2
LIMIT 1
2025-09-19 17:51:29.105 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" AS w
SET "IsDefault" = FALSE
WHERE w."BusinessId" = @__businessId_0 AND lower(w."Provider") = @__ToLower_1
2025-09-19 17:51:29.113 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='e7abb04c-eaee-4f66-9234-6ef058499674', @p0='True', @p1='2025-09-19T12:21:29.1093844Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" SET "IsDefault" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-09-19 17:51:29.136 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-19 17:51:29.138 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api) in 44.1333ms
2025-09-19 17:51:29.139 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:51:29.141 +05:30 [INF] Request finished HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/e7abb04c-eaee-4f66-9234-6ef058499674/default - 204 null null 55.2587ms
2025-09-19 17:51:33.545 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-09-19 17:51:33.549 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:51:33.550 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 5.4263ms
2025-09-19 17:51:33.554 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 572
2025-09-19 17:51:33.557 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:51:33.558 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 17:51:33.559 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 17:51:33.564 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__dto_Provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0 AND w."Provider" = @__dto_Provider_1
LIMIT 1
2025-09-19 17:51:33.590 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p1='c13c2c23-4ed0-4441-b5b2-6b2b581bdca3', @p0='2025-09-19T12:21:33.5698494Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 17:51:33.594 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:51:33.596 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 34.5999ms
2025-09-19 17:51:33.598 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 17:51:33.600 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 46.2259ms
2025-09-19 17:51:47.107 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/77684bff-5729-4f76-9db4-913040ab71a9/default - null null
2025-09-19 17:51:47.110 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:51:47.111 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/77684bff-5729-4f76-9db4-913040ab71a9/default - 204 null null 4.4371ms
2025-09-19 17:51:47.116 +05:30 [INF] Request starting HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/77684bff-5729-4f76-9db4-913040ab71a9/default - application/json 4
2025-09-19 17:51:47.122 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:51:47.124 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:51:47.125 +05:30 [INF] Route matched with {action = "SetDefault", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetDefault(System.String, System.Guid) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:51:47.130 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='77684bff-5729-4f76-9db4-913040ab71a9', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."Id" = @__id_0 AND w."BusinessId" = @__businessId_1 AND lower(w."Provider") = @__ToLower_2
LIMIT 1
2025-09-19 17:51:47.137 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" AS w
SET "IsDefault" = FALSE
WHERE w."BusinessId" = @__businessId_0 AND lower(w."Provider") = @__ToLower_1
2025-09-19 17:51:47.143 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='77684bff-5729-4f76-9db4-913040ab71a9', @p0='True', @p1='2025-09-19T12:21:47.1404513Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" SET "IsDefault" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-09-19 17:51:47.164 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-19 17:51:47.166 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api) in 38.4893ms
2025-09-19 17:51:47.167 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:51:47.168 +05:30 [INF] Request finished HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/77684bff-5729-4f76-9db4-913040ab71a9/default - 204 null null 52.3246ms
2025-09-19 17:52:02.734 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/e7abb04c-eaee-4f66-9234-6ef058499674/default - null null
2025-09-19 17:52:02.738 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:52:02.739 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/e7abb04c-eaee-4f66-9234-6ef058499674/default - 204 null null 5.0711ms
2025-09-19 17:52:02.744 +05:30 [INF] Request starting HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/e7abb04c-eaee-4f66-9234-6ef058499674/default - application/json 4
2025-09-19 17:52:02.747 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:52:02.748 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:52:02.750 +05:30 [INF] Route matched with {action = "SetDefault", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SetDefault(System.String, System.Guid) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-19 17:52:02.755 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='e7abb04c-eaee-4f66-9234-6ef058499674', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."Id" = @__id_0 AND w."BusinessId" = @__businessId_1 AND lower(w."Provider") = @__ToLower_2
LIMIT 1
2025-09-19 17:52:02.762 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__ToLower_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" AS w
SET "IsDefault" = FALSE
WHERE w."BusinessId" = @__businessId_0 AND lower(w."Provider") = @__ToLower_1
2025-09-19 17:52:02.768 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='e7abb04c-eaee-4f66-9234-6ef058499674', @p0='True', @p1='2025-09-19T12:22:02.7655260Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppPhoneNumbers" SET "IsDefault" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-09-19 17:52:02.792 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-19 17:52:02.795 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api) in 42.5044ms
2025-09-19 17:52:02.797 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.SetDefault (xbytechat.api)'
2025-09-19 17:52:02.798 +05:30 [INF] Request finished HTTP/1.1 PATCH http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers/e7abb04c-eaee-4f66-9234-6ef058499674/default - 204 null null 54.0948ms
2025-09-19 17:52:26.156 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-09-19 17:52:26.161 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:52:26.162 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 5.336ms
2025-09-19 17:52:26.173 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 551
2025-09-19 17:52:26.177 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:52:26.178 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 17:52:26.180 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 17:52:26.185 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_BusinessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__dto_Provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0 AND w."Provider" = @__dto_Provider_1
LIMIT 1
2025-09-19 17:52:26.212 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p1='c13c2c23-4ed0-4441-b5b2-6b2b581bdca3', @p0='2025-09-19T12:22:26.1919691Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 17:52:26.216 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:52:26.218 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 35.886ms
2025-09-19 17:52:26.220 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-19 17:52:26.222 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 49.3815ms
2025-09-19 17:52:31.427 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/get-image-campaign?type=image - null null
2025-09-19 17:52:31.434 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:52:31.438 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/Campaign/get-image-campaign?type=image - 204 null null 10.8245ms
2025-09-19 17:52:31.445 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/Campaign/get-image-campaign?type=image - null null
2025-09-19 17:52:31.449 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:52:31.452 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-19 17:52:31.453 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 17:52:31.463 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__type_1='image'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0 AND c."CampaignType" = @__type_1
ORDER BY c."CreatedAt" DESC
2025-09-19 17:52:31.471 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 17:52:31.472 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 16.7488ms
2025-09-19 17:52:31.474 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-19 17:52:31.476 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/Campaign/get-image-campaign?type=image - 200 null application/json; charset=utf-8 31.4453ms
2025-09-19 17:52:33.860 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-19 17:52:33.865 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:52:33.866 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 5.9836ms
2025-09-19 17:52:33.878 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-19 17:52:33.883 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:52:33.885 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-19 17:52:33.886 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 17:52:33.892 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-09-19 17:52:33.897 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 17:52:33.899 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 10.4514ms
2025-09-19 17:52:33.901 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-19 17:52:33.903 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 25.0147ms
2025-09-19 17:52:34.974 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/22b2888a-20cf-42d7-8589-cd3a832fc359 - null null
2025-09-19 17:52:34.978 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:52:34.979 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/22b2888a-20cf-42d7-8589-cd3a832fc359 - 204 null null 5.4261ms
2025-09-19 17:52:34.984 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/22b2888a-20cf-42d7-8589-cd3a832fc359 - null 0
2025-09-19 17:52:34.987 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:52:34.988 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-19 17:52:34.990 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 17:52:34.997 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='22b2888a-20cf-42d7-8589-cd3a832fc359'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t0."Id", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IsAutoTagged", t0."MessagePreview", t0."ProductBrowsed", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."Tags", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value"
FROM (
    SELECT c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IsAutoTagged", c0."MessagePreview", c0."ProductBrowsed", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."Tags"
    FROM "CampaignRecipients" AS c0
    INNER JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
) AS t0 ON t."Id" = t0."CampaignId"
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t0."Id", t0."Id0"
2025-09-19 17:52:35.003 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-19 17:52:35.007 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:52:35.008 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-19 17:52:39.879 +05:30 [INF] Received HTTP response headers after 4867.5125ms - 200
2025-09-19 17:52:39.881 +05:30 [INF] End processing HTTP request after 4873.8385ms - 200
2025-09-19 17:52:40.089 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 17:52:40.094 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-19 17:52:40.097 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 17:52:40.099 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 17:52:41.721 +05:30 [INF] Received HTTP response headers after 1620.4608ms - 200
2025-09-19 17:52:41.723 +05:30 [INF] End processing HTTP request after 1625.5542ms - 200
2025-09-19 17:52:41.731 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='7ada3b36-eb27-4522-ad47-94cbcb25da00', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='[{"i":0,"t":"Back to Main Menu","position":1,"text":"Back to Main Menu","type":"QUICK_REPLY","subType":"quick_reply"}]', @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='22b2888a-20cf-42d7-8589-cd3a832fc359' (Nullable = true), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T12:22:41.7252419Z' (DbType = DateTime), @p8=NULL, @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='human_takeover_confirmation_v1' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUU1QzcxRDBGMzlBREExNjA2AA==', @p14='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUU1QzcxRDBGMzlBREExNjA2AA==","message_status":"accepted"}]}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17=NULL, @p18='e4cdfab6-0940-4bfc-a0d9-c96be83a4f8c' (Nullable = true), @p19='2025-09-19T12:22:41.7252421Z' (Nullable = true) (DbType = DateTime), @p20='campaign', @p21='Sent' (Nullable = false), @p22='6693ca5d-88a2-443a-82af-1247e5bcab36', @p23='True', @p24=NULL, @p25='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p26='[{"i":0,"t":"Back to Main Menu","position":1,"text":"Back to Main Menu","type":"QUICK_REPLY","subType":"quick_reply"}]', @p27=NULL (DbType = Guid), @p28=NULL (DbType = Guid), @p29='22b2888a-20cf-42d7-8589-cd3a832fc359', @p30=NULL, @p31=NULL, @p32=NULL (DbType = DateTime), @p33='75df7429-287c-406a-83d8-0dfa045b0093', @p34=NULL, @p35='2025-09-19T12:22:41.7255690Z' (DbType = DateTime), @p36='system', @p37=NULL (DbType = DateTime), @p38=NULL, @p39=NULL, @p40=NULL, @p41=NULL, @p42='False', @p43=NULL (DbType = DateTime), @p44=NULL, @p45=NULL, @p46='Thank you! We've received your request. One of our experts will get in touch with you shortly.

Is there anything else I can help you with in the meantime?' (Nullable = false), @p47='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUU1QzcxRDBGMzlBREExNjA2AA==', @p48='7ada3b36-eb27-4522-ad47-94cbcb25da00' (Nullable = true), @p49=NULL (DbType = DateTime), @p50='1b2c2600-6855-48ea-a329-c6064eed0a6b', @p51='0', @p52='e4cdfab6-0940-4bfc-a0d9-c96be83a4f8c' (Nullable = true), @p53='Sent', @p54='2025-09-19T12:22:41.7255691Z' (Nullable = true) (DbType = DateTime), @p55=NULL, @p56='human_takeover_confirmation_v1', @p57=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57);
2025-09-19 17:52:41.754 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 17:52:41.758 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 6765.7802ms
2025-09-19 17:52:41.760 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-19 17:52:41.761 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/22b2888a-20cf-42d7-8589-cd3a832fc359 - 200 null application/json; charset=utf-8 6777.5327ms
2025-09-19 17:52:44.719 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-19 17:52:44.727 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:52:44.730 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:52:44.732 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUU1QzcxRDBGMzlBREExNjA2AA==","status":"sent","timestamp":"1758284561","recipient_id":"918974005240","conversation":{"id":"e71315bda6c8a100a0898ae81487c32d","expiration_timestamp":"1758284561","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:52:44.734 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:52:44.735 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUU1QzcxRDBGMzlBREExNjA2AA==","status":"sent","timestamp":"1758284561","recipient_id":"918974005240","conversation":{"id":"e71315bda6c8a100a0898ae81487c32d","expiration_timestamp":"1758284561","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:52:44.736 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:52:44.737 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 17:52:44.738 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.5221ms
2025-09-19 17:52:44.744 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUU1QzcxRDBGMzlBREExNjA2AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:52:44.745 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:52:44.750 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='6693ca5d-88a2-443a-82af-1247e5bcab36'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-19 17:52:44.750 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 31.924ms
2025-09-19 17:52:44.760 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUU1QzcxRDBGMzlBREExNjA2AA== (legacy)
2025-09-19 17:52:45.000 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-09-19 17:52:45.004 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:52:45.006 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:52:45.009 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUU1QzcxRDBGMzlBREExNjA2AA==","status":"read","timestamp":"1758284562","recipient_id":"918974005240","conversation":{"id":"e71315bda6c8a100a0898ae81487c32d","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:52:45.011 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:52:45.011 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUU1QzcxRDBGMzlBREExNjA2AA==","status":"read","timestamp":"1758284562","recipient_id":"918974005240","conversation":{"id":"e71315bda6c8a100a0898ae81487c32d","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-19 17:52:45.013 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:52:45.015 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 17:52:45.016 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.798ms
2025-09-19 17:52:45.021 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUU1QzcxRDBGMzlBREExNjA2AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:52:45.022 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:52:45.028 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='6693ca5d-88a2-443a-82af-1247e5bcab36'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-19 17:52:45.028 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 28.2347ms
2025-09-19 17:52:45.052 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p2='6693ca5d-88a2-443a-82af-1247e5bcab36', @p0='2025-09-19T12:22:42.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-19 17:52:45.055 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUU1QzcxRDBGMzlBREExNjA2AA== → Read
2025-09-19 17:53:12.832 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - null null
2025-09-19 17:53:12.840 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - null null
2025-09-19 17:53:12.833 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyNGMxYTFkNS05ZjQ5LTQ1NTUtODY2My00OTdhMzBiNWVhOGMiLCJpZCI6IjI0YzFhMWQ1LTlmNDktNDU1NS04NjYzLTQ5N2EzMGI1ZWE4YyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjRjMWExZDUtOWY0OS00NTU1LTg2NjMtNDk3YTMwYjVlYThjIiwiZW1haWwiOiJ0ZXNsYUBnbWFpbC5jb20iLCJuYW1lIjoiVGVzbGEgSW5jLiIsInN0YXR1cyI6IlByb2ZpbGVQZW5kaW5nIiwiQnVzaW5lc3NJZCI6IjEwZDk0NjlkLTRlNzctNDg0NS1hODdmLWRiYzdlMzM0OGIxMSIsImJ1c2luZXNzSWQiOiIxMGQ5NDY5ZC00ZTc3LTQ4NDUtYTg3Zi1kYmM3ZTMzNDhiMTEiLCJjb21wYW55TmFtZSI6IlRlc2xhIEluYy4iLCJyb2xlIjoiYnVzaW5lc3MiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJidXNpbmVzcyIsInBsYW5faWQiOiI1ZjlmNWRlMS1hMGIyLTQ4YmEtYjAzZC03N2IyNzM0NTYxM2YiLCJwZXJtaXNzaW9ucyI6ImNhbXBhaWduLnZpZXcsZGFzaGJvYXJkLnZpZXcsbWVzc2FnaW5nLmluYm94LnZpZXcsbWVzc2FnaW5nLnJlcG9ydC52aWV3LG1lc3NhZ2luZy5zZW5kLG1lc3NhZ2luZy5zZW5kLnRlbXBsYXRlLG1lc3NhZ2luZy5zZW5kLnRleHQsbWVzc2FnaW5nLnN0YXR1cy52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsTWVzc2FnaW5nIiwiaGFzQWxsQWNjZXNzIjoiZmFsc2UiLCJleHAiOjE3NTgyODc2NTgsImlzcyI6InhieXRlY2hhdC1hcGkiLCJhdWQiOiJ4Ynl0ZWNoYXQtY2xpZW50In0.NX4Ql38dscNndju6ecODZCI_NzjGDlx2MVaZDipoE3g&negotiateVersion=1 - null null
2025-09-19 17:53:12.873 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:53:12.832 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyNGMxYTFkNS05ZjQ5LTQ1NTUtODY2My00OTdhMzBiNWVhOGMiLCJpZCI6IjI0YzFhMWQ1LTlmNDktNDU1NS04NjYzLTQ5N2EzMGI1ZWE4YyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjRjMWExZDUtOWY0OS00NTU1LTg2NjMtNDk3YTMwYjVlYThjIiwiZW1haWwiOiJ0ZXNsYUBnbWFpbC5jb20iLCJuYW1lIjoiVGVzbGEgSW5jLiIsInN0YXR1cyI6IlByb2ZpbGVQZW5kaW5nIiwiQnVzaW5lc3NJZCI6IjEwZDk0NjlkLTRlNzctNDg0NS1hODdmLWRiYzdlMzM0OGIxMSIsImJ1c2luZXNzSWQiOiIxMGQ5NDY5ZC00ZTc3LTQ4NDUtYTg3Zi1kYmM3ZTMzNDhiMTEiLCJjb21wYW55TmFtZSI6IlRlc2xhIEluYy4iLCJyb2xlIjoiYnVzaW5lc3MiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJidXNpbmVzcyIsInBsYW5faWQiOiI1ZjlmNWRlMS1hMGIyLTQ4YmEtYjAzZC03N2IyNzM0NTYxM2YiLCJwZXJtaXNzaW9ucyI6ImNhbXBhaWduLnZpZXcsZGFzaGJvYXJkLnZpZXcsbWVzc2FnaW5nLmluYm94LnZpZXcsbWVzc2FnaW5nLnJlcG9ydC52aWV3LG1lc3NhZ2luZy5zZW5kLG1lc3NhZ2luZy5zZW5kLnRlbXBsYXRlLG1lc3NhZ2luZy5zZW5kLnRleHQsbWVzc2FnaW5nLnN0YXR1cy52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsTWVzc2FnaW5nIiwiaGFzQWxsQWNjZXNzIjoiZmFsc2UiLCJleHAiOjE3NTgyODc2NTgsImlzcyI6InhieXRlY2hhdC1hcGkiLCJhdWQiOiJ4Ynl0ZWNoYXQtY2xpZW50In0.NX4Ql38dscNndju6ecODZCI_NzjGDlx2MVaZDipoE3g&negotiateVersion=1 - null null
2025-09-19 17:53:12.861 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:53:12.883 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:53:12.884 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/unread-counts - 204 null null 43.9881ms
2025-09-19 17:53:12.890 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyNGMxYTFkNS05ZjQ5LTQ1NTUtODY2My00OTdhMzBiNWVhOGMiLCJpZCI6IjI0YzFhMWQ1LTlmNDktNDU1NS04NjYzLTQ5N2EzMGI1ZWE4YyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjRjMWExZDUtOWY0OS00NTU1LTg2NjMtNDk3YTMwYjVlYThjIiwiZW1haWwiOiJ0ZXNsYUBnbWFpbC5jb20iLCJuYW1lIjoiVGVzbGEgSW5jLiIsInN0YXR1cyI6IlByb2ZpbGVQZW5kaW5nIiwiQnVzaW5lc3NJZCI6IjEwZDk0NjlkLTRlNzctNDg0NS1hODdmLWRiYzdlMzM0OGIxMSIsImJ1c2luZXNzSWQiOiIxMGQ5NDY5ZC00ZTc3LTQ4NDUtYTg3Zi1kYmM3ZTMzNDhiMTEiLCJjb21wYW55TmFtZSI6IlRlc2xhIEluYy4iLCJyb2xlIjoiYnVzaW5lc3MiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJidXNpbmVzcyIsInBsYW5faWQiOiI1ZjlmNWRlMS1hMGIyLTQ4YmEtYjAzZC03N2IyNzM0NTYxM2YiLCJwZXJtaXNzaW9ucyI6ImNhbXBhaWduLnZpZXcsZGFzaGJvYXJkLnZpZXcsbWVzc2FnaW5nLmluYm94LnZpZXcsbWVzc2FnaW5nLnJlcG9ydC52aWV3LG1lc3NhZ2luZy5zZW5kLG1lc3NhZ2luZy5zZW5kLnRlbXBsYXRlLG1lc3NhZ2luZy5zZW5kLnRleHQsbWVzc2FnaW5nLnN0YXR1cy52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsTWVzc2FnaW5nIiwiaGFzQWxsQWNjZXNzIjoiZmFsc2UiLCJleHAiOjE3NTgyODc2NTgsImlzcyI6InhieXRlY2hhdC1hcGkiLCJhdWQiOiJ4Ynl0ZWNoYXQtY2xpZW50In0.NX4Ql38dscNndju6ecODZCI_NzjGDlx2MVaZDipoE3g&negotiateVersion=1 - 204 null null 57.2593ms
2025-09-19 17:53:12.888 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:53:12.889 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/all - 204 null null 56.3024ms
2025-09-19 17:53:12.895 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-19 17:53:12.900 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyNGMxYTFkNS05ZjQ5LTQ1NTUtODY2My00OTdhMzBiNWVhOGMiLCJpZCI6IjI0YzFhMWQ1LTlmNDktNDU1NS04NjYzLTQ5N2EzMGI1ZWE4YyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjRjMWExZDUtOWY0OS00NTU1LTg2NjMtNDk3YTMwYjVlYThjIiwiZW1haWwiOiJ0ZXNsYUBnbWFpbC5jb20iLCJuYW1lIjoiVGVzbGEgSW5jLiIsInN0YXR1cyI6IlByb2ZpbGVQZW5kaW5nIiwiQnVzaW5lc3NJZCI6IjEwZDk0NjlkLTRlNzctNDg0NS1hODdmLWRiYzdlMzM0OGIxMSIsImJ1c2luZXNzSWQiOiIxMGQ5NDY5ZC00ZTc3LTQ4NDUtYTg3Zi1kYmM3ZTMzNDhiMTEiLCJjb21wYW55TmFtZSI6IlRlc2xhIEluYy4iLCJyb2xlIjoiYnVzaW5lc3MiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJidXNpbmVzcyIsInBsYW5faWQiOiI1ZjlmNWRlMS1hMGIyLTQ4YmEtYjAzZC03N2IyNzM0NTYxM2YiLCJwZXJtaXNzaW9ucyI6ImNhbXBhaWduLnZpZXcsZGFzaGJvYXJkLnZpZXcsbWVzc2FnaW5nLmluYm94LnZpZXcsbWVzc2FnaW5nLnJlcG9ydC52aWV3LG1lc3NhZ2luZy5zZW5kLG1lc3NhZ2luZy5zZW5kLnRlbXBsYXRlLG1lc3NhZ2luZy5zZW5kLnRleHQsbWVzc2FnaW5nLnN0YXR1cy52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsTWVzc2FnaW5nIiwiaGFzQWxsQWNjZXNzIjoiZmFsc2UiLCJleHAiOjE3NTgyODc2NTgsImlzcyI6InhieXRlY2hhdC1hcGkiLCJhdWQiOiJ4Ynl0ZWNoYXQtY2xpZW50In0.NX4Ql38dscNndju6ecODZCI_NzjGDlx2MVaZDipoE3g&negotiateVersion=1 - 204 null null 67.6325ms
2025-09-19 17:53:12.893 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyNGMxYTFkNS05ZjQ5LTQ1NTUtODY2My00OTdhMzBiNWVhOGMiLCJpZCI6IjI0YzFhMWQ1LTlmNDktNDU1NS04NjYzLTQ5N2EzMGI1ZWE4YyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjRjMWExZDUtOWY0OS00NTU1LTg2NjMtNDk3YTMwYjVlYThjIiwiZW1haWwiOiJ0ZXNsYUBnbWFpbC5jb20iLCJuYW1lIjoiVGVzbGEgSW5jLiIsInN0YXR1cyI6IlByb2ZpbGVQZW5kaW5nIiwiQnVzaW5lc3NJZCI6IjEwZDk0NjlkLTRlNzctNDg0NS1hODdmLWRiYzdlMzM0OGIxMSIsImJ1c2luZXNzSWQiOiIxMGQ5NDY5ZC00ZTc3LTQ4NDUtYTg3Zi1kYmM3ZTMzNDhiMTEiLCJjb21wYW55TmFtZSI6IlRlc2xhIEluYy4iLCJyb2xlIjoiYnVzaW5lc3MiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJidXNpbmVzcyIsInBsYW5faWQiOiI1ZjlmNWRlMS1hMGIyLTQ4YmEtYjAzZC03N2IyNzM0NTYxM2YiLCJwZXJtaXNzaW9ucyI6ImNhbXBhaWduLnZpZXcsZGFzaGJvYXJkLnZpZXcsbWVzc2FnaW5nLmluYm94LnZpZXcsbWVzc2FnaW5nLnJlcG9ydC52aWV3LG1lc3NhZ2luZy5zZW5kLG1lc3NhZ2luZy5zZW5kLnRlbXBsYXRlLG1lc3NhZ2luZy5zZW5kLnRleHQsbWVzc2FnaW5nLnN0YXR1cy52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsTWVzc2FnaW5nIiwiaGFzQWxsQWNjZXNzIjoiZmFsc2UiLCJleHAiOjE3NTgyODc2NTgsImlzcyI6InhieXRlY2hhdC1hcGkiLCJhdWQiOiJ4Ynl0ZWNoYXQtY2xpZW50In0.NX4Ql38dscNndju6ecODZCI_NzjGDlx2MVaZDipoE3g&negotiateVersion=1 - null 0
2025-09-19 17:53:12.905 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyNGMxYTFkNS05ZjQ5LTQ1NTUtODY2My00OTdhMzBiNWVhOGMiLCJpZCI6IjI0YzFhMWQ1LTlmNDktNDU1NS04NjYzLTQ5N2EzMGI1ZWE4YyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjRjMWExZDUtOWY0OS00NTU1LTg2NjMtNDk3YTMwYjVlYThjIiwiZW1haWwiOiJ0ZXNsYUBnbWFpbC5jb20iLCJuYW1lIjoiVGVzbGEgSW5jLiIsInN0YXR1cyI6IlByb2ZpbGVQZW5kaW5nIiwiQnVzaW5lc3NJZCI6IjEwZDk0NjlkLTRlNzctNDg0NS1hODdmLWRiYzdlMzM0OGIxMSIsImJ1c2luZXNzSWQiOiIxMGQ5NDY5ZC00ZTc3LTQ4NDUtYTg3Zi1kYmM3ZTMzNDhiMTEiLCJjb21wYW55TmFtZSI6IlRlc2xhIEluYy4iLCJyb2xlIjoiYnVzaW5lc3MiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJidXNpbmVzcyIsInBsYW5faWQiOiI1ZjlmNWRlMS1hMGIyLTQ4YmEtYjAzZC03N2IyNzM0NTYxM2YiLCJwZXJtaXNzaW9ucyI6ImNhbXBhaWduLnZpZXcsZGFzaGJvYXJkLnZpZXcsbWVzc2FnaW5nLmluYm94LnZpZXcsbWVzc2FnaW5nLnJlcG9ydC52aWV3LG1lc3NhZ2luZy5zZW5kLG1lc3NhZ2luZy5zZW5kLnRlbXBsYXRlLG1lc3NhZ2luZy5zZW5kLnRleHQsbWVzc2FnaW5nLnN0YXR1cy52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsTWVzc2FnaW5nIiwiaGFzQWxsQWNjZXNzIjoiZmFsc2UiLCJleHAiOjE3NTgyODc2NTgsImlzcyI6InhieXRlY2hhdC1hcGkiLCJhdWQiOiJ4Ynl0ZWNoYXQtY2xpZW50In0.NX4Ql38dscNndju6ecODZCI_NzjGDlx2MVaZDipoE3g&negotiateVersion=1 - null 0
2025-09-19 17:53:12.906 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/all - null null
2025-09-19 17:53:12.911 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:53:12.918 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:53:12.922 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:53:12.928 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-19 17:53:12.929 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:53:12.931 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-19 17:53:12.931 +05:30 [INF] Executing endpoint '/hubs/inbox/negotiate'
2025-09-19 17:53:12.933 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-19 17:53:12.936 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-19 17:53:12.941 +05:30 [INF] Route matched with {action = "GetAllContactsFlat", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContactsFlat() on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 17:53:12.948 +05:30 [INF] GetAllContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all
2025-09-19 17:53:12.954 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-19 17:53:12.954 +05:30 [INF] Executed endpoint '/hubs/inbox/negotiate'
2025-09-19 17:53:12.956 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyNGMxYTFkNS05ZjQ5LTQ1NTUtODY2My00OTdhMzBiNWVhOGMiLCJpZCI6IjI0YzFhMWQ1LTlmNDktNDU1NS04NjYzLTQ5N2EzMGI1ZWE4YyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjRjMWExZDUtOWY0OS00NTU1LTg2NjMtNDk3YTMwYjVlYThjIiwiZW1haWwiOiJ0ZXNsYUBnbWFpbC5jb20iLCJuYW1lIjoiVGVzbGEgSW5jLiIsInN0YXR1cyI6IlByb2ZpbGVQZW5kaW5nIiwiQnVzaW5lc3NJZCI6IjEwZDk0NjlkLTRlNzctNDg0NS1hODdmLWRiYzdlMzM0OGIxMSIsImJ1c2luZXNzSWQiOiIxMGQ5NDY5ZC00ZTc3LTQ4NDUtYTg3Zi1kYmM3ZTMzNDhiMTEiLCJjb21wYW55TmFtZSI6IlRlc2xhIEluYy4iLCJyb2xlIjoiYnVzaW5lc3MiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJidXNpbmVzcyIsInBsYW5faWQiOiI1ZjlmNWRlMS1hMGIyLTQ4YmEtYjAzZC03N2IyNzM0NTYxM2YiLCJwZXJtaXNzaW9ucyI6ImNhbXBhaWduLnZpZXcsZGFzaGJvYXJkLnZpZXcsbWVzc2FnaW5nLmluYm94LnZpZXcsbWVzc2FnaW5nLnJlcG9ydC52aWV3LG1lc3NhZ2luZy5zZW5kLG1lc3NhZ2luZy5zZW5kLnRlbXBsYXRlLG1lc3NhZ2luZy5zZW5kLnRleHQsbWVzc2FnaW5nLnN0YXR1cy52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsTWVzc2FnaW5nIiwiaGFzQWxsQWNjZXNzIjoiZmFsc2UiLCJleHAiOjE3NTgyODc2NTgsImlzcyI6InhieXRlY2hhdC1hcGkiLCJhdWQiOiJ4Ynl0ZWNoYXQtY2xpZW50In0.NX4Ql38dscNndju6ecODZCI_NzjGDlx2MVaZDipoE3g&negotiateVersion=1 - 200 316 application/json 50.6832ms
2025-09-19 17:53:12.960 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyNGMxYTFkNS05ZjQ5LTQ1NTUtODY2My00OTdhMzBiNWVhOGMiLCJpZCI6IjI0YzFhMWQ1LTlmNDktNDU1NS04NjYzLTQ5N2EzMGI1ZWE4YyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjRjMWExZDUtOWY0OS00NTU1LTg2NjMtNDk3YTMwYjVlYThjIiwiZW1haWwiOiJ0ZXNsYUBnbWFpbC5jb20iLCJuYW1lIjoiVGVzbGEgSW5jLiIsInN0YXR1cyI6IlByb2ZpbGVQZW5kaW5nIiwiQnVzaW5lc3NJZCI6IjEwZDk0NjlkLTRlNzctNDg0NS1hODdmLWRiYzdlMzM0OGIxMSIsImJ1c2luZXNzSWQiOiIxMGQ5NDY5ZC00ZTc3LTQ4NDUtYTg3Zi1kYmM3ZTMzNDhiMTEiLCJjb21wYW55TmFtZSI6IlRlc2xhIEluYy4iLCJyb2xlIjoiYnVzaW5lc3MiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJidXNpbmVzcyIsInBsYW5faWQiOiI1ZjlmNWRlMS1hMGIyLTQ4YmEtYjAzZC03N2IyNzM0NTYxM2YiLCJwZXJtaXNzaW9ucyI6ImNhbXBhaWduLnZpZXcsZGFzaGJvYXJkLnZpZXcsbWVzc2FnaW5nLmluYm94LnZpZXcsbWVzc2FnaW5nLnJlcG9ydC52aWV3LG1lc3NhZ2luZy5zZW5kLG1lc3NhZ2luZy5zZW5kLnRlbXBsYXRlLG1lc3NhZ2luZy5zZW5kLnRleHQsbWVzc2FnaW5nLnN0YXR1cy52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsTWVzc2FnaW5nIiwiaGFzQWxsQWNjZXNzIjoiZmFsc2UiLCJleHAiOjE3NTgyODc2NTgsImlzcyI6InhieXRlY2hhdC1hcGkiLCJhdWQiOiJ4Ynl0ZWNoYXQtY2xpZW50In0.NX4Ql38dscNndju6ecODZCI_NzjGDlx2MVaZDipoE3g&id=KB6cv9TZm_UGHAnQkN23ow - null null
2025-09-19 17:53:12.957 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/hubs/inbox/negotiate?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyNGMxYTFkNS05ZjQ5LTQ1NTUtODY2My00OTdhMzBiNWVhOGMiLCJpZCI6IjI0YzFhMWQ1LTlmNDktNDU1NS04NjYzLTQ5N2EzMGI1ZWE4YyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjRjMWExZDUtOWY0OS00NTU1LTg2NjMtNDk3YTMwYjVlYThjIiwiZW1haWwiOiJ0ZXNsYUBnbWFpbC5jb20iLCJuYW1lIjoiVGVzbGEgSW5jLiIsInN0YXR1cyI6IlByb2ZpbGVQZW5kaW5nIiwiQnVzaW5lc3NJZCI6IjEwZDk0NjlkLTRlNzctNDg0NS1hODdmLWRiYzdlMzM0OGIxMSIsImJ1c2luZXNzSWQiOiIxMGQ5NDY5ZC00ZTc3LTQ4NDUtYTg3Zi1kYmM3ZTMzNDhiMTEiLCJjb21wYW55TmFtZSI6IlRlc2xhIEluYy4iLCJyb2xlIjoiYnVzaW5lc3MiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJidXNpbmVzcyIsInBsYW5faWQiOiI1ZjlmNWRlMS1hMGIyLTQ4YmEtYjAzZC03N2IyNzM0NTYxM2YiLCJwZXJtaXNzaW9ucyI6ImNhbXBhaWduLnZpZXcsZGFzaGJvYXJkLnZpZXcsbWVzc2FnaW5nLmluYm94LnZpZXcsbWVzc2FnaW5nLnJlcG9ydC52aWV3LG1lc3NhZ2luZy5zZW5kLG1lc3NhZ2luZy5zZW5kLnRlbXBsYXRlLG1lc3NhZ2luZy5zZW5kLnRleHQsbWVzc2FnaW5nLnN0YXR1cy52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsTWVzc2FnaW5nIiwiaGFzQWxsQWNjZXNzIjoiZmFsc2UiLCJleHAiOjE3NTgyODc2NTgsImlzcyI6InhieXRlY2hhdC1hcGkiLCJhdWQiOiJ4Ynl0ZWNoYXQtY2xpZW50In0.NX4Ql38dscNndju6ecODZCI_NzjGDlx2MVaZDipoE3g&negotiateVersion=1 - 200 316 application/json 64.5101ms
2025-09-19 17:53:12.978 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM "Contacts" AS c
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t."Id" AS "Id0", t."BusinessId" AS "BusinessId0", t."Category", t."ColorHex", t."CreatedAt", t."IsActive", t."IsSystemTag", t."LastUsedAt", t."Name", t."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t ON c0."TagId" = t."Id"
) AS t0 ON c."Id" = t0."ContactId"
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY c."Id", t0."Id"
2025-09-19 17:53:12.975 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:53:12.987 +05:30 [INF] GetAllContactsAsync returned 1 contacts
2025-09-19 17:53:12.989 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-19 17:53:12.990 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[xbytechat.api.CRM.Models.Contact, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[xbytechat.api.CRM.Dtos.ContactDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 17:53:12.995 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api) in 50.8504ms
2025-09-19 17:53:12.998 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContactsFlat (xbytechat.api)'
2025-09-19 17:53:12.999 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/all - 200 null application/json; charset=utf-8 93.2457ms
2025-09-19 17:53:13.027 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__userId_1='24c1a1d5-9f49-4555-8663-497a30b5ea8c'], CommandType='"Text"', CommandTimeout='30']
SELECT m."ContactId", count(*)::int AS "Count"
FROM "MessageLogs" AS m
LEFT JOIN (
    SELECT c."Id", c."ContactId", c."LastReadAt"
    FROM "ContactReads" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."UserId" = @__userId_1
) AS t ON m."ContactId" = t."ContactId"
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL AND (t."Id" IS NULL OR COALESCE(m."SentAt", m."CreatedAt") > t."LastReadAt")
GROUP BY m."ContactId"
2025-09-19 17:53:13.029 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyNGMxYTFkNS05ZjQ5LTQ1NTUtODY2My00OTdhMzBiNWVhOGMiLCJpZCI6IjI0YzFhMWQ1LTlmNDktNDU1NS04NjYzLTQ5N2EzMGI1ZWE4YyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjRjMWExZDUtOWY0OS00NTU1LTg2NjMtNDk3YTMwYjVlYThjIiwiZW1haWwiOiJ0ZXNsYUBnbWFpbC5jb20iLCJuYW1lIjoiVGVzbGEgSW5jLiIsInN0YXR1cyI6IlByb2ZpbGVQZW5kaW5nIiwiQnVzaW5lc3NJZCI6IjEwZDk0NjlkLTRlNzctNDg0NS1hODdmLWRiYzdlMzM0OGIxMSIsImJ1c2luZXNzSWQiOiIxMGQ5NDY5ZC00ZTc3LTQ4NDUtYTg3Zi1kYmM3ZTMzNDhiMTEiLCJjb21wYW55TmFtZSI6IlRlc2xhIEluYy4iLCJyb2xlIjoiYnVzaW5lc3MiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJidXNpbmVzcyIsInBsYW5faWQiOiI1ZjlmNWRlMS1hMGIyLTQ4YmEtYjAzZC03N2IyNzM0NTYxM2YiLCJwZXJtaXNzaW9ucyI6ImNhbXBhaWduLnZpZXcsZGFzaGJvYXJkLnZpZXcsbWVzc2FnaW5nLmluYm94LnZpZXcsbWVzc2FnaW5nLnJlcG9ydC52aWV3LG1lc3NhZ2luZy5zZW5kLG1lc3NhZ2luZy5zZW5kLnRlbXBsYXRlLG1lc3NhZ2luZy5zZW5kLnRleHQsbWVzc2FnaW5nLnN0YXR1cy52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsTWVzc2FnaW5nIiwiaGFzQWxsQWNjZXNzIjoiZmFsc2UiLCJleHAiOjE3NTgyODc2NTgsImlzcyI6InhieXRlY2hhdC1hcGkiLCJhdWQiOiJ4Ynl0ZWNoYXQtY2xpZW50In0.NX4Ql38dscNndju6ecODZCI_NzjGDlx2MVaZDipoE3g&id=_dMnNTRShs0vd8VGiFEIoA - null null
2025-09-19 17:53:13.033 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:53:13.037 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:53:13.041 +05:30 [INF] Executing endpoint '/hubs/inbox'
2025-09-19 17:53:13.044 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 103.1148ms
2025-09-19 17:53:13.047 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-19 17:53:13.049 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 154.7974ms
2025-09-19 17:53:14.125 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/75df7429-287c-406a-83d8-0dfa045b0093 - null null
2025-09-19 17:53:14.125 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__contactId_0='75df7429-287c-406a-83d8-0dfa045b0093', @__userId_1='24c1a1d5-9f49-4555-8663-497a30b5ea8c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userId_1
LIMIT 1
2025-09-19 17:53:14.127 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=75df7429-287c-406a-83d8-0dfa045b0093 - null null
2025-09-19 17:53:14.127 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/75df7429-287c-406a-83d8-0dfa045b0093 - null null
2025-09-19 17:53:14.126 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/75df7429-287c-406a-83d8-0dfa045b0093 - null null
2025-09-19 17:53:14.129 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:53:14.139 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:53:14.143 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:53:14.146 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:53:14.148 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/75df7429-287c-406a-83d8-0dfa045b0093 - 204 null null 22.189ms
2025-09-19 17:53:14.149 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/inbox/messages?contactId=75df7429-287c-406a-83d8-0dfa045b0093 - 204 null null 21.9714ms
2025-09-19 17:53:14.151 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/75df7429-287c-406a-83d8-0dfa045b0093 - 204 null null 23.9582ms
2025-09-19 17:53:14.152 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts/75df7429-287c-406a-83d8-0dfa045b0093 - 204 null null 26.222ms
2025-09-19 17:53:14.159 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=75df7429-287c-406a-83d8-0dfa045b0093 - null null
2025-09-19 17:53:14.159 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='c5073fd6-895d-4195-b4f0-72b3c08dfdf4', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2='75df7429-287c-406a-83d8-0dfa045b0093', @p3='2025-09-19T12:23:14.1170864Z' (DbType = DateTime), @p4='24c1a1d5-9f49-4555-8663-497a30b5ea8c'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ContactReads" ("Id", "BusinessId", "ContactId", "LastReadAt", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-09-19 17:53:14.163 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/75df7429-287c-406a-83d8-0dfa045b0093 - null null
2025-09-19 17:53:14.182 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__userId_1='24c1a1d5-9f49-4555-8663-497a30b5ea8c'], CommandType='"Text"', CommandTimeout='30']
SELECT m."ContactId", count(*)::int AS "Count"
FROM "MessageLogs" AS m
LEFT JOIN (
    SELECT c."Id", c."ContactId", c."LastReadAt"
    FROM "ContactReads" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."UserId" = @__userId_1
) AS t ON m."ContactId" = t."ContactId"
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL AND (t."Id" IS NULL OR COALESCE(m."SentAt", m."CreatedAt") > t."LastReadAt")
GROUP BY m."ContactId"
2025-09-19 17:53:14.175 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:53:14.184 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:53:14.189 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-19 17:53:14.190 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-19 17:53:14.195 +05:30 [INF] Route matched with {action = "GetMessagesByContact", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMessagesByContact(System.Guid) on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-19 17:53:14.196 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 17:53:14.206 +05:30 [INF] GetContactByIdAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", contactId="75df7429-287c-406a-83d8-0dfa045b0093"
2025-09-19 17:53:14.226 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__contactId_1='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status", c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt"
FROM "MessageLogs" AS m
LEFT JOIN "Campaigns" AS c ON m."CampaignId" = c."Id"
WHERE m."BusinessId" = @__businessId_0 AND m."ContactId" = @__contactId_1
ORDER BY m."CreatedAt"
2025-09-19 17:53:14.235 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__contactId_1='75df7429-287c-406a-83d8-0dfa045b0093'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-19 17:53:14.241 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 17:53:14.242 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.MessageManagement.DTOs.MessageLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 17:53:14.243 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 41.5989ms
2025-09-19 17:53:14.244 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/75df7429-287c-406a-83d8-0dfa045b0093 - null null
2025-09-19 17:53:14.247 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-19 17:53:14.250 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:53:14.250 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api) in 51.2632ms
2025-09-19 17:53:14.252 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/75df7429-287c-406a-83d8-0dfa045b0093 - 200 null application/json; charset=utf-8 89.0501ms
2025-09-19 17:53:14.253 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-19 17:53:14.255 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetMessagesByContact (xbytechat.api)'
2025-09-19 17:53:14.261 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 17:53:14.262 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/messages?contactId=75df7429-287c-406a-83d8-0dfa045b0093 - 200 null application/json; charset=utf-8 103.6198ms
2025-09-19 17:53:14.265 +05:30 [INF] GetContactByIdAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", contactId="75df7429-287c-406a-83d8-0dfa045b0093"
2025-09-19 17:53:14.274 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__contactId_1='75df7429-287c-406a-83d8-0dfa045b0093'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-19 17:53:14.279 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 17:53:14.281 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 16.5539ms
2025-09-19 17:53:14.283 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts/75df7429-287c-406a-83d8-0dfa045b0093 - null null
2025-09-19 17:53:14.283 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-19 17:53:14.287 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:53:14.289 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/75df7429-287c-406a-83d8-0dfa045b0093 - 200 null application/json; charset=utf-8 44.4505ms
2025-09-19 17:53:14.290 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-19 17:53:14.297 +05:30 [INF] Route matched with {action = "GetContactById", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetContactById(System.Guid) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 17:53:14.300 +05:30 [INF] GetContactByIdAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", contactId="75df7429-287c-406a-83d8-0dfa045b0093"
2025-09-19 17:53:14.308 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__contactId_1='75df7429-287c-406a-83d8-0dfa045b0093'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__contactId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Id", t0."Id"
2025-09-19 17:53:14.312 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 17:53:14.314 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api) in 14.773ms
2025-09-19 17:53:14.316 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetContactById (xbytechat.api)'
2025-09-19 17:53:14.318 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts/75df7429-287c-406a-83d8-0dfa045b0093 - 200 null application/json; charset=utf-8 35.2091ms
2025-09-19 17:53:14.905 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__contactId_0='75df7429-287c-406a-83d8-0dfa045b0093', @__userId_1='24c1a1d5-9f49-4555-8663-497a30b5ea8c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastReadAt", c."UserId"
FROM "ContactReads" AS c
WHERE c."ContactId" = @__contactId_0 AND c."UserId" = @__userId_1
LIMIT 1
2025-09-19 17:53:14.929 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p1='c5073fd6-895d-4195-b4f0-72b3c08dfdf4', @p0='2025-09-19T12:23:14.9021087Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "ContactReads" SET "LastReadAt" = @p0
WHERE "Id" = @p1;
2025-09-19 17:53:14.936 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__userId_1='24c1a1d5-9f49-4555-8663-497a30b5ea8c'], CommandType='"Text"', CommandTimeout='30']
SELECT m."ContactId", count(*)::int AS "Count"
FROM "MessageLogs" AS m
LEFT JOIN (
    SELECT c."Id", c."ContactId", c."LastReadAt"
    FROM "ContactReads" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."UserId" = @__userId_1
) AS t ON m."ContactId" = t."ContactId"
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL AND (t."Id" IS NULL OR COALESCE(m."SentAt", m."CreatedAt") > t."LastReadAt")
GROUP BY m."ContactId"
2025-09-19 17:53:14.951 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - null null
2025-09-19 17:53:14.955 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:53:14.956 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-19 17:53:14.958 +05:30 [INF] Route matched with {action = "GetUnreadCounts", controller = "Inbox"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUnreadCounts() on controller xbytechat.api.Features.Inbox.Controllers.InboxController (xbytechat.api).
2025-09-19 17:53:14.964 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__userId_1='24c1a1d5-9f49-4555-8663-497a30b5ea8c'], CommandType='"Text"', CommandTimeout='30']
SELECT m."ContactId", count(*)::int AS "Count"
FROM "MessageLogs" AS m
LEFT JOIN (
    SELECT c."Id", c."ContactId", c."LastReadAt"
    FROM "ContactReads" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."UserId" = @__userId_1
) AS t ON m."ContactId" = t."ContactId"
WHERE m."BusinessId" = @__businessId_0 AND m."IsIncoming" AND m."ContactId" IS NOT NULL AND (t."Id" IS NULL OR COALESCE(m."SentAt", m."CreatedAt") > t."LastReadAt")
GROUP BY m."ContactId"
2025-09-19 17:53:14.970 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:53:14.972 +05:30 [INF] Executed action xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api) in 12.0103ms
2025-09-19 17:53:14.974 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Inbox.Controllers.InboxController.GetUnreadCounts (xbytechat.api)'
2025-09-19 17:53:14.976 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/inbox/unread-counts - 200 null application/json; charset=utf-8 25.5098ms
2025-09-19 17:53:19.126 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__dto_ContactId_1='75df7429-287c-406a-83d8-0dfa045b0093'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."Id" = @__dto_ContactId_1
LIMIT 1
2025-09-19 17:53:19.133 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."PhoneNumberId" IS NOT NULL DESC, COALESCE(w."UpdatedAt", w."CreatedAt") DESC
2025-09-19 17:53:19.139 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__8__locals1_dto_RecipientNumber_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__8__locals1_dto_RecipientNumber_1
LIMIT 1
2025-09-19 17:53:19.163 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p1='75df7429-287c-406a-83d8-0dfa045b0093', @p0='2025-09-19T12:23:19.1429580Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Contacts" SET "LastContactedAt" = @p0
WHERE "Id" = @p1;
2025-09-19 17:53:19.169 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-19 17:53:19.175 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-19 17:53:19.181 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 17:53:19.183 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-19 17:53:20.735 +05:30 [INF] Received HTTP response headers after 1550.5664ms - 200
2025-09-19 17:53:20.737 +05:30 [INF] End processing HTTP request after 1556.2057ms - 200
2025-09-19 17:53:20.762 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[@p0='319f6294-a748-47a9-a7ca-5f6eb93a8008', @p1='10d9469d-4e77-4845-a87f-dbc7e3348b11', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='75df7429-287c-406a-83d8-0dfa045b0093' (Nullable = true), @p7='2025-09-19T12:23:20.7399855Z' (DbType = DateTime), @p8=NULL, @p9=NULL (DbType = Int32), @p10='False', @p11=NULL, @p12='hi' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzUyREVENDRBNDA0QzZCNjg3AA==', @p14='{"messaging_product":"whatsapp","contacts":[{"input":"+918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzUyREVENDRBNDA0QzZCNjg3AA=="}]}', @p15='+918974005240' (Nullable = false), @p16=NULL (DbType = Guid), @p17='hi', @p18=NULL (DbType = Guid), @p19='2025-09-19T12:23:20.7399856Z' (Nullable = true) (DbType = DateTime), @p20=NULL, @p21='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "CreatedAt", "ErrorMessage", "FlowVersion", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21)
RETURNING "MessageTime";
2025-09-19 17:53:22.079 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 613
2025-09-19 17:53:22.084 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:53:22.085 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:53:22.088 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzUyREVENDRBNDA0QzZCNjg3AA==","status":"sent","timestamp":"1758284600","recipient_id":"918974005240","conversation":{"id":"41bc8c740bcd4cc8ef98ff52008f49ea","expiration_timestamp":"1758284600","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-19 17:53:22.092 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:53:22.093 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzUyREVENDRBNDA0QzZCNjg3AA==","status":"sent","timestamp":"1758284600","recipient_id":"918974005240","conversation":{"id":"41bc8c740bcd4cc8ef98ff52008f49ea","expiration_timestamp":"1758284600","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-19 17:53:22.096 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:53:22.101 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-19 17:53:22.102 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 14.5185ms
2025-09-19 17:53:22.108 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-19 17:53:22.109 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:53:22.112 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-19 17:53:22.113 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 34.491ms
2025-09-19 17:53:22.116 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 17:53:22.125 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzUyREVENDRBNDA0QzZCNjg3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:53:22.130 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzUyREVENDRBNDA0QzZCNjg3AA==
2025-09-19 17:53:22.133 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzUyREVENDRBNDA0QzZCNjg3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:53:22.136 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzUyREVENDRBNDA0QzZCNjg3AA== (legacy)
2025-09-19 17:53:23.602 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 582
2025-09-19 17:53:23.606 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:53:23.607 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:53:23.610 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzUyREVENDRBNDA0QzZCNjg3AA==","status":"delivered","timestamp":"1758284601","recipient_id":"918974005240","conversation":{"id":"41bc8c740bcd4cc8ef98ff52008f49ea","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-19 17:53:23.613 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:53:23.613 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzUyREVENDRBNDA0QzZCNjg3AA==","status":"delivered","timestamp":"1758284601","recipient_id":"918974005240","conversation":{"id":"41bc8c740bcd4cc8ef98ff52008f49ea","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-19 17:53:23.614 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:53:23.615 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 17:53:23.617 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.5929ms
2025-09-19 17:53:23.622 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzUyREVENDRBNDA0QzZCNjg3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:53:23.623 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:53:23.626 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzUyREVENDRBNDA0QzZCNjg3AA==
2025-09-19 17:53:23.627 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 25.1011ms
2025-09-19 17:53:23.631 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzUyREVENDRBNDA0QzZCNjg3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:53:23.641 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='319f6294-a748-47a9-a7ca-5f6eb93a8008', @p0='Delivered' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-09-19 17:53:23.644 +05:30 [INF] ℹ️ MessageLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzUyREVENDRBNDA0QzZCNjg3AA== → Delivered
2025-09-19 17:53:24.227 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-09-19 17:53:24.231 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:53:24.233 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 17:53:24.235 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzUyREVENDRBNDA0QzZCNjg3AA==","status":"read","timestamp":"1758284602","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-09-19 17:53:24.237 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 17:53:24.237 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzUyREVENDRBNDA0QzZCNjg3AA==","status":"read","timestamp":"1758284602","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-09-19 17:53:24.238 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:53:24.240 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 17:53:24.242 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.7657ms
2025-09-19 17:53:24.247 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzUyREVENDRBNDA0QzZCNjg3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:53:24.248 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 17:53:24.251 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzUyREVENDRBNDA0QzZCNjg3AA==
2025-09-19 17:53:24.252 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 24.7996ms
2025-09-19 17:53:24.256 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzUyREVENDRBNDA0QzZCNjg3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 17:53:24.282 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@p1='319f6294-a748-47a9-a7ca-5f6eb93a8008', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-09-19 17:53:24.285 +05:30 [INF] ℹ️ MessageLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNzUyREVENDRBNDA0QzZCNjg3AA== → Read
2025-09-19 17:53:30.988 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-19 17:53:30.988 +05:30 [INF] Executed endpoint '/hubs/inbox'
2025-09-19 17:53:30.990 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyNGMxYTFkNS05ZjQ5LTQ1NTUtODY2My00OTdhMzBiNWVhOGMiLCJpZCI6IjI0YzFhMWQ1LTlmNDktNDU1NS04NjYzLTQ5N2EzMGI1ZWE4YyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjRjMWExZDUtOWY0OS00NTU1LTg2NjMtNDk3YTMwYjVlYThjIiwiZW1haWwiOiJ0ZXNsYUBnbWFpbC5jb20iLCJuYW1lIjoiVGVzbGEgSW5jLiIsInN0YXR1cyI6IlByb2ZpbGVQZW5kaW5nIiwiQnVzaW5lc3NJZCI6IjEwZDk0NjlkLTRlNzctNDg0NS1hODdmLWRiYzdlMzM0OGIxMSIsImJ1c2luZXNzSWQiOiIxMGQ5NDY5ZC00ZTc3LTQ4NDUtYTg3Zi1kYmM3ZTMzNDhiMTEiLCJjb21wYW55TmFtZSI6IlRlc2xhIEluYy4iLCJyb2xlIjoiYnVzaW5lc3MiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJidXNpbmVzcyIsInBsYW5faWQiOiI1ZjlmNWRlMS1hMGIyLTQ4YmEtYjAzZC03N2IyNzM0NTYxM2YiLCJwZXJtaXNzaW9ucyI6ImNhbXBhaWduLnZpZXcsZGFzaGJvYXJkLnZpZXcsbWVzc2FnaW5nLmluYm94LnZpZXcsbWVzc2FnaW5nLnJlcG9ydC52aWV3LG1lc3NhZ2luZy5zZW5kLG1lc3NhZ2luZy5zZW5kLnRlbXBsYXRlLG1lc3NhZ2luZy5zZW5kLnRleHQsbWVzc2FnaW5nLnN0YXR1cy52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsTWVzc2FnaW5nIiwiaGFzQWxsQWNjZXNzIjoiZmFsc2UiLCJleHAiOjE3NTgyODc2NTgsImlzcyI6InhieXRlY2hhdC1hcGkiLCJhdWQiOiJ4Ynl0ZWNoYXQtY2xpZW50In0.NX4Ql38dscNndju6ecODZCI_NzjGDlx2MVaZDipoE3g&id=_dMnNTRShs0vd8VGiFEIoA - 101 null null 17961.445ms
2025-09-19 17:53:30.991 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/hubs/inbox?access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyNGMxYTFkNS05ZjQ5LTQ1NTUtODY2My00OTdhMzBiNWVhOGMiLCJpZCI6IjI0YzFhMWQ1LTlmNDktNDU1NS04NjYzLTQ5N2EzMGI1ZWE4YyIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL25hbWVpZGVudGlmaWVyIjoiMjRjMWExZDUtOWY0OS00NTU1LTg2NjMtNDk3YTMwYjVlYThjIiwiZW1haWwiOiJ0ZXNsYUBnbWFpbC5jb20iLCJuYW1lIjoiVGVzbGEgSW5jLiIsInN0YXR1cyI6IlByb2ZpbGVQZW5kaW5nIiwiQnVzaW5lc3NJZCI6IjEwZDk0NjlkLTRlNzctNDg0NS1hODdmLWRiYzdlMzM0OGIxMSIsImJ1c2luZXNzSWQiOiIxMGQ5NDY5ZC00ZTc3LTQ4NDUtYTg3Zi1kYmM3ZTMzNDhiMTEiLCJjb21wYW55TmFtZSI6IlRlc2xhIEluYy4iLCJyb2xlIjoiYnVzaW5lc3MiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJidXNpbmVzcyIsInBsYW5faWQiOiI1ZjlmNWRlMS1hMGIyLTQ4YmEtYjAzZC03N2IyNzM0NTYxM2YiLCJwZXJtaXNzaW9ucyI6ImNhbXBhaWduLnZpZXcsZGFzaGJvYXJkLnZpZXcsbWVzc2FnaW5nLmluYm94LnZpZXcsbWVzc2FnaW5nLnJlcG9ydC52aWV3LG1lc3NhZ2luZy5zZW5kLG1lc3NhZ2luZy5zZW5kLnRlbXBsYXRlLG1lc3NhZ2luZy5zZW5kLnRleHQsbWVzc2FnaW5nLnN0YXR1cy52aWV3IiwiZmVhdHVyZXMiOiJDYW1wYWlnbnMsTWVzc2FnaW5nIiwiaGFzQWxsQWNjZXNzIjoiZmFsc2UiLCJleHAiOjE3NTgyODc2NTgsImlzcyI6InhieXRlY2hhdC1hcGkiLCJhdWQiOiJ4Ynl0ZWNoYXQtY2xpZW50In0.NX4Ql38dscNndju6ecODZCI_NzjGDlx2MVaZDipoE3g&id=KB6cv9TZm_UGHAnQkN23ow - 101 null null 18031.4479ms
2025-09-19 17:53:36.494 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 17:53:36.496 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 17:53:36.500 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:53:36.503 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:53:36.504 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 204 null null 10.3638ms
2025-09-19 17:53:36.506 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 204 null null 9.8271ms
2025-09-19 17:53:36.510 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - null null
2025-09-19 17:53:36.515 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - null null
2025-09-19 17:53:36.519 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:53:36.523 +05:30 [INF] CORS policy execution successful.
2025-09-19 17:53:36.525 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-19 17:53:36.525 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 17:53:36.527 +05:30 [INF] Route matched with {action = "GetSenders", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSenders(System.Guid) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-19 17:53:36.528 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-19 17:53:36.534 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-19 17:53:36.542 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-19 17:53:36.546 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.WhatsAppSettings.DTOs.WhatsAppSenderDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 17:53:36.549 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType107`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType183`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 17:53:36.550 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api) in 19.6595ms
2025-09-19 17:53:36.553 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 14.6449ms
2025-09-19 17:53:36.555 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-19 17:53:36.557 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-19 17:53:36.559 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/10d9469d-4e77-4845-a87f-dbc7e3348b11 - 200 null application/json; charset=utf-8 48.597ms
2025-09-19 17:53:36.561 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/10d9469d-4e77-4845-a87f-dbc7e3348b11?status=APPROVED - 200 null application/json; charset=utf-8 45.4465ms
2025-09-19 18:00:18.800 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 18:00:18.871 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 18:00:18.891 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 18:00:20.107 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 18:00:20.873 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 18:00:20.896 +05:30 [INF] ClickLogWorker started
2025-09-19 18:00:21.114 +05:30 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-19 18:00:21.118 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 18:00:21.121 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 18:00:21.122 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 18:00:21.123 +05:30 [INF] Hosting environment: Development
2025-09-19 18:00:21.125 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 18:00:21.139 +05:30 [INF] Executed DbCommand (67ms) [Parameters=[@__cutoff_0='2025-09-12T12:30:19.0255322Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-19 18:00:21.944 +05:30 [INF] ClickLogWorker stopped
2025-09-19 18:00:22.623 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 18:00:22.861 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 249.4802ms
2025-09-19 18:00:22.899 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 18:00:22.917 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 18.0364ms
2025-09-19 18:00:22.986 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 18:00:23.031 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.6916ms
2025-09-19 18:00:23.252 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 18:00:23.552 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 299.9759ms
2025-09-19 18:00:29.728 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 18:00:29.737 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 18:00:29.798 +05:30 [INF] CORS policy execution successful.
2025-09-19 18:00:29.804 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 75.8289ms
2025-09-19 18:00:29.814 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 18:00:29.832 +05:30 [INF] CORS policy execution successful.
2025-09-19 18:00:30.048 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 18:00:30.070 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 18:00:30.256 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-19 18:00:30.354 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 18:00:30.365 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 18:00:30.392 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 314.5834ms
2025-09-19 18:00:30.396 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 18:00:30.405 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 590.3097ms
2025-09-19 18:00:30.411 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 18:00:30.416 +05:30 [INF] CORS policy execution successful.
2025-09-19 18:00:30.417 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.4698ms
2025-09-19 18:00:30.422 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 18:00:30.426 +05:30 [INF] CORS policy execution successful.
2025-09-19 18:00:30.430 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 18:00:30.433 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 18:00:30.451 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 18:00:30.457 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 18:00:30.460 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 24.4201ms
2025-09-19 18:00:30.463 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 18:00:30.465 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 42.7462ms
2025-09-19 18:00:30.517 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-19 18:00:30.517 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-19 18:00:30.522 +05:30 [INF] CORS policy execution successful.
2025-09-19 18:00:30.526 +05:30 [INF] CORS policy execution successful.
2025-09-19 18:00:30.527 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 9.8173ms
2025-09-19 18:00:30.532 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 18:00:30.533 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-19 18:00:30.534 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-19 18:00:30.540 +05:30 [INF] CORS policy execution successful.
2025-09-19 18:00:30.542 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-19 18:00:30.548 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-19 18:00:30.557 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType44`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 18:00:30.558 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 18:00:30.560 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 19.9966ms
2025-09-19 18:00:30.565 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-19 18:00:30.567 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 50.166ms
2025-09-19 18:00:30.651 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-09-19 18:00:30.658 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 18:00:30.675 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 111.6003ms
2025-09-19 18:00:30.678 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-19 18:00:30.679 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 146.6193ms
2025-09-19 18:00:38.311 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-19 18:00:38.315 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-19 18:00:38.311 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/22b2888a-20cf-42d7-8589-cd3a832fc359 - null null
2025-09-19 18:00:38.315 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-19 18:00:38.330 +05:30 [INF] CORS policy execution successful.
2025-09-19 18:00:38.332 +05:30 [INF] CORS policy execution successful.
2025-09-19 18:00:38.336 +05:30 [INF] CORS policy execution successful.
2025-09-19 18:00:38.340 +05:30 [INF] CORS policy execution successful.
2025-09-19 18:00:38.342 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 31.2993ms
2025-09-19 18:00:38.344 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 29.3643ms
2025-09-19 18:00:38.345 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/22b2888a-20cf-42d7-8589-cd3a832fc359 - 204 null null 34.2656ms
2025-09-19 18:00:38.346 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 31.9453ms
2025-09-19 18:00:38.351 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-19 18:00:38.355 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/22b2888a-20cf-42d7-8589-cd3a832fc359 - null null
2025-09-19 18:00:38.359 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-19 18:00:38.368 +05:30 [INF] CORS policy execution successful.
2025-09-19 18:00:38.372 +05:30 [INF] CORS policy execution successful.
2025-09-19 18:00:38.375 +05:30 [INF] CORS policy execution successful.
2025-09-19 18:00:38.377 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-19 18:00:38.378 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-19 18:00:38.385 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 18:00:38.387 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-19 18:00:38.387 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 18:00:38.392 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-19 18:00:38.408 +05:30 [INF] GetPagedContactsAsync: businessId="10d9469d-4e77-4845-a87f-dbc7e3348b11", tab=all, page=1, pageSize=1000
2025-09-19 18:00:38.414 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-19 18:00:38.421 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 18:00:38.437 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-19 18:00:38.445 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 54.1019ms
2025-09-19 18:00:38.447 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-19 18:00:38.448 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-19 18:00:38.453 +05:30 [INF] CORS policy execution successful.
2025-09-19 18:00:38.455 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 104.1215ms
2025-09-19 18:00:38.456 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-19 18:00:38.462 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-19 18:00:38.472 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-19 18:00:38.479 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 18:00:38.481 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 15.8394ms
2025-09-19 18:00:38.484 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-19 18:00:38.486 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 39.1268ms
2025-09-19 18:00:38.517 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-19 18:00:38.523 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__campaignId_0='22b2888a-20cf-42d7-8589-cd3a832fc359', @__businessId_1='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."UpdatedAt", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", t."Id1", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value", t."BusinessId1", t."CreatedAt1", t."CreatedBy0", t."FlowName", t."IsActive0", t."IsPublished", t."UpdatedAt1"
FROM (
    SELECT c."Id", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."UpdatedAt", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0", c1."Id" AS "Id1", c1."BusinessId" AS "BusinessId1", c1."CreatedAt" AS "CreatedAt1", c1."CreatedBy" AS "CreatedBy0", c1."FlowName", c1."IsActive" AS "IsActive0", c1."IsPublished", c1."UpdatedAt" AS "UpdatedAt1"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    LEFT JOIN "CTAFlowConfigs" AS c1 ON c."CTAFlowConfigId" = c1."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t."Id0", t."Id1"
2025-09-19 18:00:38.612 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-19 18:00:38.628 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 231.6419ms
2025-09-19 18:00:38.631 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-19 18:00:38.634 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 274.6569ms
2025-09-19 18:00:38.674 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-09-19 18:00:38.684 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 290.5574ms
2025-09-19 18:00:38.688 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-19 18:00:38.690 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/22b2888a-20cf-42d7-8589-cd3a832fc359 - 200 null application/json; charset=utf-8 335.221ms
2025-09-19 18:01:58.394 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-19 18:01:58.402 +05:30 [INF] CORS policy execution successful.
2025-09-19 18:01:58.409 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 15.4542ms
2025-09-19 18:01:58.439 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-19 18:01:58.443 +05:30 [INF] CORS policy execution successful.
2025-09-19 18:01:58.445 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-19 18:01:58.446 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-19 18:01:58.473 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='10d9469d-4e77-4845-a87f-dbc7e3348b11'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-09-19 18:01:58.477 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-19 18:01:58.479 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 28.4613ms
2025-09-19 18:01:58.481 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-19 18:01:58.484 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 45.1002ms
2025-09-19 18:08:20.154 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 582
2025-09-19 18:08:20.161 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 18:08:20.165 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 18:08:20.186 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMUUxOTY0NTcwOEIxOUE5MDdGAA==","status":"delivered","timestamp":"1758278287","recipient_id":"918974005240","conversation":{"id":"1749e42f3f830e7def7f66e3117af7a9","origin":{"type":"utility"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"utility","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-19 18:08:20.191 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 18:08:20.194 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 18:08:20.200 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 32.5864ms
2025-09-19 18:08:20.211 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 18:08:20.212 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 58.1311ms
2025-09-19 18:08:20.397 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMUUxOTY0NTcwOEIxOUE5MDdGAA==","status":"delivered","timestamp":"1758278287","recipient_id":"918974005240","conversation":{"id":"1749e42f3f830e7def7f66e3117af7a9","origin":{"type":"utility"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"utility","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-19 18:08:20.521 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-19 18:08:20.530 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-19 18:08:20.535 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-19 18:08:20.538 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 18:08:20.565 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMUUxOTY0NTcwOEIxOUE5MDdGAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-19 18:08:20.653 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='5afa61e6-c890-479b-a920-8d7d0603c4fc'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-19 18:08:20.897 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p2='5afa61e6-c890-479b-a920-8d7d0603c4fc', @p0='2025-09-19T10:38:07.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-19 18:08:20.916 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMUUxOTY0NTcwOEIxOUE5MDdGAA== → Delivered
2025-09-19 18:10:50.466 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 18:10:50.515 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 18:10:50.529 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 18:10:51.449 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 18:10:52.072 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 18:10:52.086 +05:30 [INF] ClickLogWorker started
2025-09-19 18:10:52.291 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 18:10:52.292 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 18:10:52.293 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 18:10:52.294 +05:30 [INF] Hosting environment: Development
2025-09-19 18:10:52.295 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 18:10:52.624 +05:30 [ERR] An error occurred using the connection to database 'CIOdigital_Testing' on server 'tcp://118.139.177.45:3306'.
2025-09-19 18:10:52.662 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
Npgsql.NpgsqlException (0x80004005): Received unknown response a for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlException (0x80004005): Received unknown response a for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 18:10:52.795 +05:30 [ERR] BackgroundService failed
Npgsql.NpgsqlException (0x80004005): Received unknown response a for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.MaintenanceService.IsAutoCleanupEnabledAsync() in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\MaintenanceService.cs:line 17
   at xbytechat.api.Features.Webhooks.BackgroundWorkers.WebhookAutoCleanupWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\BackgroundWorkers\WebhookAutoCleanupWorker.cs:line 23
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2025-09-19 18:10:53.143 +05:30 [INF] ClickLogWorker stopped
2025-09-19 18:10:53.773 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 18:10:53.932 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 164.5455ms
2025-09-19 18:10:53.963 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 18:10:53.985 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 21.7836ms
2025-09-19 18:10:54.028 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 18:10:54.060 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 31.5695ms
2025-09-19 18:10:54.238 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 18:10:54.491 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 252.6565ms
2025-09-19 18:11:07.042 +05:30 [ERR] An error occurred using the connection to database 'CIOdigital_Testing' on server 'tcp://118.139.177.45:3306'.
2025-09-19 18:11:07.048 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Exception while reading from stream
 ---> System.TimeoutException: Timeout during reading attempt
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Exception while reading from stream
 ---> System.TimeoutException: Timeout during reading attempt
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 18:11:07.130 +05:30 [ERR] ❌ Failed to clean up old webhook logs.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Exception while reading from stream
 ---> System.TimeoutException: Timeout during reading attempt
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.FailedWebhookLogCleanupService.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\FailedWebhookLogCleanupService.cs:line 34
2025-09-19 18:11:10.587 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/debug/conn - null null
2025-09-19 18:11:10.595 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 18:11:10.746 +05:30 [INF] Executing endpoint 'HTTP: GET /api/debug/conn'
2025-09-19 18:11:10.772 +05:30 [INF] Setting HTTP status code 200.
2025-09-19 18:11:10.785 +05:30 [INF] Writing value of type '<>f__AnonymousType180`6' as Json.
2025-09-19 18:11:10.800 +05:30 [INF] Executed endpoint 'HTTP: GET /api/debug/conn'
2025-09-19 18:11:10.802 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/debug/conn - 200 null application/json; charset=utf-8 215.0239ms
2025-09-19 18:11:18.410 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/debug/db - null null
2025-09-19 18:11:18.426 +05:30 [INF] Executing endpoint 'HTTP: GET /api/debug/db'
2025-09-19 18:11:19.133 +05:30 [ERR] An error occurred using the connection to database 'CIOdigital_Testing' on server 'tcp://118.139.177.45:3306'.
2025-09-19 18:11:19.192 +05:30 [INF] Setting HTTP status code 500.
2025-09-19 18:11:19.207 +05:30 [INF] Writing value of type 'ProblemDetails' as Json.
2025-09-19 18:11:19.212 +05:30 [INF] Executed endpoint 'HTTP: GET /api/debug/db'
2025-09-19 18:11:19.223 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/debug/db - 500 null application/problem+json 812.3909ms
2025-09-19 18:11:41.688 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/debug/dns - null null
2025-09-19 18:11:41.695 +05:30 [INF] Executing endpoint 'HTTP: GET /api/debug/dns'
2025-09-19 18:11:41.700 +05:30 [INF] Setting HTTP status code 200.
2025-09-19 18:11:41.737 +05:30 [INF] Writing value of type '<>f__AnonymousType181`2' as Json.
2025-09-19 18:11:41.745 +05:30 [INF] Executed endpoint 'HTTP: GET /api/debug/dns'
2025-09-19 18:11:41.748 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/debug/dns - 200 null application/json; charset=utf-8 60.5298ms
2025-09-19 18:12:36.448 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/debug/db - null null
2025-09-19 18:12:36.451 +05:30 [INF] Executing endpoint 'HTTP: GET /api/debug/db'
2025-09-19 18:12:36.854 +05:30 [ERR] An error occurred using the connection to database 'CIOdigital_Testing' on server 'tcp://118.139.177.45:3306'.
2025-09-19 18:12:36.886 +05:30 [INF] Setting HTTP status code 500.
2025-09-19 18:12:36.888 +05:30 [INF] Writing value of type 'ProblemDetails' as Json.
2025-09-19 18:12:36.889 +05:30 [INF] Executed endpoint 'HTTP: GET /api/debug/db'
2025-09-19 18:12:36.891 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/debug/db - 500 null application/problem+json 443.089ms
2025-09-19 18:13:42.044 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 18:14:03.237 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 18:17:00.107 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 18:17:00.168 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 18:17:00.194 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 18:17:01.319 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 18:17:02.002 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 18:17:02.019 +05:30 [INF] ClickLogWorker started
2025-09-19 18:17:02.277 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 18:17:02.278 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 18:17:02.279 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 18:17:02.280 +05:30 [INF] Hosting environment: Development
2025-09-19 18:17:02.281 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 18:17:02.397 +05:30 [ERR] An error occurred using the connection to database 'CIOdigital_Testing' on server 'tcp://118.139.177.45:3306'.
2025-09-19 18:17:02.397 +05:30 [ERR] An error occurred using the connection to database 'CIOdigital_Testing' on server 'tcp://118.139.177.45:3306'.
2025-09-19 18:17:02.440 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
Npgsql.NpgsqlException (0x80004005): Received unknown response a for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlException (0x80004005): Received unknown response a for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 18:17:02.440 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
Npgsql.NpgsqlException (0x80004005): Received unknown response a for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlException (0x80004005): Received unknown response a for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 18:17:02.576 +05:30 [ERR] BackgroundService failed
Npgsql.NpgsqlException (0x80004005): Received unknown response a for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.MaintenanceService.IsAutoCleanupEnabledAsync() in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\MaintenanceService.cs:line 17
   at xbytechat.api.Features.Webhooks.BackgroundWorkers.WebhookAutoCleanupWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\BackgroundWorkers\WebhookAutoCleanupWorker.cs:line 23
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2025-09-19 18:17:02.621 +05:30 [ERR] ❌ Failed to clean up old webhook logs.
Npgsql.NpgsqlException (0x80004005): Received unknown response a for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.FailedWebhookLogCleanupService.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\FailedWebhookLogCleanupService.cs:line 34
2025-09-19 18:17:03.056 +05:30 [INF] ClickLogWorker stopped
2025-09-19 18:17:03.369 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 18:17:03.559 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 200.0762ms
2025-09-19 18:17:03.698 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 18:17:03.698 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 18:17:03.709 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 10.8412ms
2025-09-19 18:17:03.739 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 41.4863ms
2025-09-19 18:17:03.867 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 18:17:04.130 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 262.9431ms
2025-09-19 18:17:17.337 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/debug/db - null null
2025-09-19 18:17:17.370 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 18:17:17.523 +05:30 [INF] Executing endpoint 'HTTP: GET /api/debug/db'
2025-09-19 18:17:17.914 +05:30 [ERR] An error occurred using the connection to database 'CIOdigital_Testing' on server 'tcp://118.139.177.45:3306'.
2025-09-19 18:17:17.992 +05:30 [INF] Setting HTTP status code 500.
2025-09-19 18:17:18.006 +05:30 [INF] Writing value of type 'ProblemDetails' as Json.
2025-09-19 18:17:18.016 +05:30 [INF] Executed endpoint 'HTTP: GET /api/debug/db'
2025-09-19 18:17:18.025 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/debug/db - 500 null application/problem+json 688.6434ms
2025-09-19 18:20:30.416 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 18:20:30.491 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 18:20:30.523 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 18:20:31.788 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 18:20:32.693 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 18:20:32.711 +05:30 [INF] ClickLogWorker started
2025-09-19 18:20:32.890 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 18:20:32.892 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 18:20:32.893 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 18:20:32.894 +05:30 [INF] Hosting environment: Development
2025-09-19 18:20:32.895 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 18:20:33.755 +05:30 [INF] ClickLogWorker stopped
2025-09-19 18:20:34.060 +05:30 [ERR] An error occurred using the connection to database 'ph14663762951_WhatAppTest' on server 'tcp://p3nlmysql89plsk.secureserver.net:3306'.
2025-09-19 18:20:34.128 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 18:20:34.326 +05:30 [ERR] BackgroundService failed
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.MaintenanceService.IsAutoCleanupEnabledAsync() in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\MaintenanceService.cs:line 17
   at xbytechat.api.Features.Webhooks.BackgroundWorkers.WebhookAutoCleanupWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\BackgroundWorkers\WebhookAutoCleanupWorker.cs:line 23
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2025-09-19 18:20:34.354 +05:30 [ERR] An error occurred using the connection to database 'ph14663762951_WhatAppTest' on server 'tcp://p3nlmysql89plsk.secureserver.net:3306'.
2025-09-19 18:20:34.362 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 18:20:34.450 +05:30 [ERR] ❌ Failed to clean up old webhook logs.
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.FailedWebhookLogCleanupService.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\FailedWebhookLogCleanupService.cs:line 34
2025-09-19 18:20:34.536 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 18:20:34.781 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 258.1629ms
2025-09-19 18:20:34.814 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 18:20:34.830 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 15.9838ms
2025-09-19 18:20:34.907 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 18:20:34.959 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 52.8255ms
2025-09-19 18:20:35.216 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 18:20:35.547 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 331.4665ms
2025-09-19 18:20:48.134 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/debug/db - null null
2025-09-19 18:20:48.142 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 18:20:48.363 +05:30 [INF] Executing endpoint 'HTTP: GET /api/debug/db'
2025-09-19 18:21:03.484 +05:30 [ERR] An error occurred using the connection to database 'ph14663762951_WhatAppTest' on server 'tcp://p3nlmysql89plsk.secureserver.net:3306'.
2025-09-19 18:21:03.569 +05:30 [INF] Setting HTTP status code 500.
2025-09-19 18:21:03.588 +05:30 [INF] Writing value of type 'ProblemDetails' as Json.
2025-09-19 18:21:03.601 +05:30 [INF] Executed endpoint 'HTTP: GET /api/debug/db'
2025-09-19 18:21:03.610 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/debug/db - 500 null application/problem+json 15475.8953ms
2025-09-19 18:24:32.307 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 18:24:32.398 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 18:24:32.515 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 18:24:33.532 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 18:24:34.102 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
System.ArgumentException: Couldn't set sslmode (Parameter 'sslmode')
 ---> System.ArgumentException: Requested value 'Required' was not found.
   at System.Enum.TryParseByName[TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TStorage& result)
   at System.Enum.TryParseByValueOrName[TUnderlying,TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TUnderlying& result)
   at System.Enum.TryParse(Type enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, Object& result)
   at System.Enum.Parse(Type enumType, String value, Boolean ignoreCase)
   at Npgsql.NpgsqlConnectionStringBuilder.<GeneratedActions>g__GetValue|10_0(Type type, Object value)
   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedActions(GeneratedAction action, String keyword, Object& value)
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   --- End of inner exception stack trace ---
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)
   at Npgsql.NpgsqlConnection.SetupDataSource()
   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnection..ctor(String connectionString)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.ArgumentException: Couldn't set sslmode (Parameter 'sslmode')
 ---> System.ArgumentException: Requested value 'Required' was not found.
   at System.Enum.TryParseByName[TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TStorage& result)
   at System.Enum.TryParseByValueOrName[TUnderlying,TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TUnderlying& result)
   at System.Enum.TryParse(Type enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, Object& result)
   at System.Enum.Parse(Type enumType, String value, Boolean ignoreCase)
   at Npgsql.NpgsqlConnectionStringBuilder.<GeneratedActions>g__GetValue|10_0(Type type, Object value)
   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedActions(GeneratedAction action, String keyword, Object& value)
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   --- End of inner exception stack trace ---
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)
   at Npgsql.NpgsqlConnection.SetupDataSource()
   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnection..ctor(String connectionString)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 18:24:34.143 +05:30 [ERR] ❌ Failed to clean up old webhook logs.
System.ArgumentException: Couldn't set sslmode (Parameter 'sslmode')
 ---> System.ArgumentException: Requested value 'Required' was not found.
   at System.Enum.TryParseByName[TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TStorage& result)
   at System.Enum.TryParseByValueOrName[TUnderlying,TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TUnderlying& result)
   at System.Enum.TryParse(Type enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, Object& result)
   at System.Enum.Parse(Type enumType, String value, Boolean ignoreCase)
   at Npgsql.NpgsqlConnectionStringBuilder.<GeneratedActions>g__GetValue|10_0(Type type, Object value)
   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedActions(GeneratedAction action, String keyword, Object& value)
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   --- End of inner exception stack trace ---
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)
   at Npgsql.NpgsqlConnection.SetupDataSource()
   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnection..ctor(String connectionString)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.FailedWebhookLogCleanupService.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\FailedWebhookLogCleanupService.cs:line 34
2025-09-19 18:24:34.181 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 18:24:34.192 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
System.ArgumentException: Couldn't set sslmode (Parameter 'sslmode')
 ---> System.ArgumentException: Requested value 'Required' was not found.
   at System.Enum.TryParseByName[TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TStorage& result)
   at System.Enum.TryParseByValueOrName[TUnderlying,TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TUnderlying& result)
   at System.Enum.TryParse(Type enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, Object& result)
   at System.Enum.Parse(Type enumType, String value, Boolean ignoreCase)
   at Npgsql.NpgsqlConnectionStringBuilder.<GeneratedActions>g__GetValue|10_0(Type type, Object value)
   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedActions(GeneratedAction action, String keyword, Object& value)
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   --- End of inner exception stack trace ---
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)
   at Npgsql.NpgsqlConnection.SetupDataSource()
   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnection..ctor(String connectionString)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.ArgumentException: Couldn't set sslmode (Parameter 'sslmode')
 ---> System.ArgumentException: Requested value 'Required' was not found.
   at System.Enum.TryParseByName[TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TStorage& result)
   at System.Enum.TryParseByValueOrName[TUnderlying,TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TUnderlying& result)
   at System.Enum.TryParse(Type enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, Object& result)
   at System.Enum.Parse(Type enumType, String value, Boolean ignoreCase)
   at Npgsql.NpgsqlConnectionStringBuilder.<GeneratedActions>g__GetValue|10_0(Type type, Object value)
   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedActions(GeneratedAction action, String keyword, Object& value)
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   --- End of inner exception stack trace ---
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)
   at Npgsql.NpgsqlConnection.SetupDataSource()
   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnection..ctor(String connectionString)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 18:24:34.225 +05:30 [ERR] Hosting failed to start
System.ArgumentException: Couldn't set sslmode (Parameter 'sslmode')
 ---> System.ArgumentException: Requested value 'Required' was not found.
   at System.Enum.TryParseByName[TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TStorage& result)
   at System.Enum.TryParseByValueOrName[TUnderlying,TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TUnderlying& result)
   at System.Enum.TryParse(Type enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, Object& result)
   at System.Enum.Parse(Type enumType, String value, Boolean ignoreCase)
   at Npgsql.NpgsqlConnectionStringBuilder.<GeneratedActions>g__GetValue|10_0(Type type, Object value)
   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedActions(GeneratedAction action, String keyword, Object& value)
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   --- End of inner exception stack trace ---
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)
   at Npgsql.NpgsqlConnection.SetupDataSource()
   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnection..ctor(String connectionString)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.MaintenanceService.IsAutoCleanupEnabledAsync() in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\MaintenanceService.cs:line 17
   at xbytechat.api.Features.Webhooks.BackgroundWorkers.WebhookAutoCleanupWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\BackgroundWorkers\WebhookAutoCleanupWorker.cs:line 23
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-09-19 18:24:34.277 +05:30 [INF] 🛑 Graceful shutdown requested.
2025-09-19 18:24:34.249 +05:30 [ERR] BackgroundService failed
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at xbytechat.api.Features.Webhooks.Services.FailedWebhookLogCleanupService.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\FailedWebhookLogCleanupService.cs:line 50
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2025-09-19 18:24:34.279 +05:30 [INF] 🛑 Webhook Queue Worker stopped.
2025-09-19 18:24:34.291 +05:30 [ERR] Unhandled exception (AppDomain)
System.ArgumentException: Couldn't set sslmode (Parameter 'sslmode')
 ---> System.ArgumentException: Requested value 'Required' was not found.
   at System.Enum.TryParseByName[TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TStorage& result)
   at System.Enum.TryParseByValueOrName[TUnderlying,TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TUnderlying& result)
   at System.Enum.TryParse(Type enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, Object& result)
   at System.Enum.Parse(Type enumType, String value, Boolean ignoreCase)
   at Npgsql.NpgsqlConnectionStringBuilder.<GeneratedActions>g__GetValue|10_0(Type type, Object value)
   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedActions(GeneratedAction action, String keyword, Object& value)
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   --- End of inner exception stack trace ---
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)
   at Npgsql.NpgsqlConnection.SetupDataSource()
   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnection..ctor(String connectionString)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.MaintenanceService.IsAutoCleanupEnabledAsync() in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\MaintenanceService.cs:line 17
   at xbytechat.api.Features.Webhooks.BackgroundWorkers.WebhookAutoCleanupWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\BackgroundWorkers\WebhookAutoCleanupWorker.cs:line 23
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at Program.<Main>$(String[] args) in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 463
2025-09-19 18:24:51.122 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 18:24:51.191 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 18:24:51.211 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 18:24:52.390 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 18:24:52.947 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
System.ArgumentException: Couldn't set sslmode (Parameter 'sslmode')
 ---> System.ArgumentException: Requested value 'Required' was not found.
   at System.Enum.TryParseByName[TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TStorage& result)
   at System.Enum.TryParseByValueOrName[TUnderlying,TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TUnderlying& result)
   at System.Enum.TryParse(Type enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, Object& result)
   at System.Enum.Parse(Type enumType, String value, Boolean ignoreCase)
   at Npgsql.NpgsqlConnectionStringBuilder.<GeneratedActions>g__GetValue|10_0(Type type, Object value)
   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedActions(GeneratedAction action, String keyword, Object& value)
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   --- End of inner exception stack trace ---
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)
   at Npgsql.NpgsqlConnection.SetupDataSource()
   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnection..ctor(String connectionString)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.ArgumentException: Couldn't set sslmode (Parameter 'sslmode')
 ---> System.ArgumentException: Requested value 'Required' was not found.
   at System.Enum.TryParseByName[TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TStorage& result)
   at System.Enum.TryParseByValueOrName[TUnderlying,TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TUnderlying& result)
   at System.Enum.TryParse(Type enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, Object& result)
   at System.Enum.Parse(Type enumType, String value, Boolean ignoreCase)
   at Npgsql.NpgsqlConnectionStringBuilder.<GeneratedActions>g__GetValue|10_0(Type type, Object value)
   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedActions(GeneratedAction action, String keyword, Object& value)
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   --- End of inner exception stack trace ---
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)
   at Npgsql.NpgsqlConnection.SetupDataSource()
   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnection..ctor(String connectionString)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 18:24:52.983 +05:30 [ERR] ❌ Failed to clean up old webhook logs.
System.ArgumentException: Couldn't set sslmode (Parameter 'sslmode')
 ---> System.ArgumentException: Requested value 'Required' was not found.
   at System.Enum.TryParseByName[TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TStorage& result)
   at System.Enum.TryParseByValueOrName[TUnderlying,TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TUnderlying& result)
   at System.Enum.TryParse(Type enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, Object& result)
   at System.Enum.Parse(Type enumType, String value, Boolean ignoreCase)
   at Npgsql.NpgsqlConnectionStringBuilder.<GeneratedActions>g__GetValue|10_0(Type type, Object value)
   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedActions(GeneratedAction action, String keyword, Object& value)
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   --- End of inner exception stack trace ---
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)
   at Npgsql.NpgsqlConnection.SetupDataSource()
   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnection..ctor(String connectionString)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.FailedWebhookLogCleanupService.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\FailedWebhookLogCleanupService.cs:line 34
2025-09-19 18:24:53.022 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 18:24:53.031 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
System.ArgumentException: Couldn't set sslmode (Parameter 'sslmode')
 ---> System.ArgumentException: Requested value 'Required' was not found.
   at System.Enum.TryParseByName[TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TStorage& result)
   at System.Enum.TryParseByValueOrName[TUnderlying,TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TUnderlying& result)
   at System.Enum.TryParse(Type enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, Object& result)
   at System.Enum.Parse(Type enumType, String value, Boolean ignoreCase)
   at Npgsql.NpgsqlConnectionStringBuilder.<GeneratedActions>g__GetValue|10_0(Type type, Object value)
   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedActions(GeneratedAction action, String keyword, Object& value)
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   --- End of inner exception stack trace ---
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)
   at Npgsql.NpgsqlConnection.SetupDataSource()
   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnection..ctor(String connectionString)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.ArgumentException: Couldn't set sslmode (Parameter 'sslmode')
 ---> System.ArgumentException: Requested value 'Required' was not found.
   at System.Enum.TryParseByName[TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TStorage& result)
   at System.Enum.TryParseByValueOrName[TUnderlying,TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TUnderlying& result)
   at System.Enum.TryParse(Type enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, Object& result)
   at System.Enum.Parse(Type enumType, String value, Boolean ignoreCase)
   at Npgsql.NpgsqlConnectionStringBuilder.<GeneratedActions>g__GetValue|10_0(Type type, Object value)
   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedActions(GeneratedAction action, String keyword, Object& value)
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   --- End of inner exception stack trace ---
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)
   at Npgsql.NpgsqlConnection.SetupDataSource()
   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnection..ctor(String connectionString)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 18:24:53.066 +05:30 [ERR] Hosting failed to start
System.ArgumentException: Couldn't set sslmode (Parameter 'sslmode')
 ---> System.ArgumentException: Requested value 'Required' was not found.
   at System.Enum.TryParseByName[TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TStorage& result)
   at System.Enum.TryParseByValueOrName[TUnderlying,TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TUnderlying& result)
   at System.Enum.TryParse(Type enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, Object& result)
   at System.Enum.Parse(Type enumType, String value, Boolean ignoreCase)
   at Npgsql.NpgsqlConnectionStringBuilder.<GeneratedActions>g__GetValue|10_0(Type type, Object value)
   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedActions(GeneratedAction action, String keyword, Object& value)
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   --- End of inner exception stack trace ---
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)
   at Npgsql.NpgsqlConnection.SetupDataSource()
   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnection..ctor(String connectionString)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.MaintenanceService.IsAutoCleanupEnabledAsync() in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\MaintenanceService.cs:line 17
   at xbytechat.api.Features.Webhooks.BackgroundWorkers.WebhookAutoCleanupWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\BackgroundWorkers\WebhookAutoCleanupWorker.cs:line 23
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-09-19 18:24:53.124 +05:30 [INF] 🛑 Graceful shutdown requested.
2025-09-19 18:24:53.094 +05:30 [ERR] BackgroundService failed
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at xbytechat.api.Features.Webhooks.Services.FailedWebhookLogCleanupService.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\FailedWebhookLogCleanupService.cs:line 50
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2025-09-19 18:24:53.125 +05:30 [INF] 🛑 Webhook Queue Worker stopped.
2025-09-19 18:24:53.134 +05:30 [ERR] Unhandled exception (AppDomain)
System.ArgumentException: Couldn't set sslmode (Parameter 'sslmode')
 ---> System.ArgumentException: Requested value 'Required' was not found.
   at System.Enum.TryParseByName[TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TStorage& result)
   at System.Enum.TryParseByValueOrName[TUnderlying,TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TUnderlying& result)
   at System.Enum.TryParse(Type enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, Object& result)
   at System.Enum.Parse(Type enumType, String value, Boolean ignoreCase)
   at Npgsql.NpgsqlConnectionStringBuilder.<GeneratedActions>g__GetValue|10_0(Type type, Object value)
   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedActions(GeneratedAction action, String keyword, Object& value)
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   --- End of inner exception stack trace ---
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)
   at Npgsql.NpgsqlConnection.SetupDataSource()
   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnection..ctor(String connectionString)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.MaintenanceService.IsAutoCleanupEnabledAsync() in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\MaintenanceService.cs:line 17
   at xbytechat.api.Features.Webhooks.BackgroundWorkers.WebhookAutoCleanupWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\BackgroundWorkers\WebhookAutoCleanupWorker.cs:line 23
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at Program.<Main>$(String[] args) in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 463
2025-09-19 18:25:58.787 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 18:25:58.860 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 18:25:58.911 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 18:25:59.988 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 18:26:00.603 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 18:26:00.616 +05:30 [INF] ClickLogWorker started
2025-09-19 18:26:00.778 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 18:26:00.779 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 18:26:00.780 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 18:26:00.781 +05:30 [INF] Hosting environment: Development
2025-09-19 18:26:00.782 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 18:26:01.653 +05:30 [INF] ClickLogWorker stopped
2025-09-19 18:26:01.846 +05:30 [ERR] An error occurred using the connection to database 'ph14663762951_WhatAppTest' on server 'tcp://p3nlmysql89plsk.secureserver.net:3306'.
2025-09-19 18:26:01.896 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 18:26:02.043 +05:30 [ERR] An error occurred using the connection to database 'ph14663762951_WhatAppTest' on server 'tcp://p3nlmysql89plsk.secureserver.net:3306'.
2025-09-19 18:26:02.051 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 18:26:02.050 +05:30 [ERR] BackgroundService failed
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.MaintenanceService.IsAutoCleanupEnabledAsync() in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\MaintenanceService.cs:line 17
   at xbytechat.api.Features.Webhooks.BackgroundWorkers.WebhookAutoCleanupWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\BackgroundWorkers\WebhookAutoCleanupWorker.cs:line 23
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2025-09-19 18:26:02.114 +05:30 [ERR] ❌ Failed to clean up old webhook logs.
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.FailedWebhookLogCleanupService.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\FailedWebhookLogCleanupService.cs:line 34
2025-09-19 18:26:02.982 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 18:26:03.197 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 223.0637ms
2025-09-19 18:26:03.235 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 18:26:03.244 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 9.5942ms
2025-09-19 18:26:03.314 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 18:26:03.363 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 48.4369ms
2025-09-19 18:26:03.547 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 18:26:03.873 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 325.9646ms
2025-09-19 18:26:13.062 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/debug/db - null null
2025-09-19 18:26:13.070 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 18:26:13.201 +05:30 [INF] Executing endpoint 'HTTP: GET /api/debug/db'
2025-09-19 18:26:14.431 +05:30 [ERR] An error occurred using the connection to database 'ph14663762951_WhatAppTest' on server 'tcp://p3nlmysql89plsk.secureserver.net:3306'.
2025-09-19 18:26:14.509 +05:30 [INF] Setting HTTP status code 500.
2025-09-19 18:26:14.524 +05:30 [INF] Writing value of type 'ProblemDetails' as Json.
2025-09-19 18:26:14.536 +05:30 [INF] Executed endpoint 'HTTP: GET /api/debug/db'
2025-09-19 18:26:14.549 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/debug/db - 500 null application/problem+json 1487.3358ms
2025-09-19 18:26:34.696 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/debug/db - null null
2025-09-19 18:26:34.716 +05:30 [INF] Executing endpoint 'HTTP: GET /api/debug/db'
2025-09-19 18:26:35.628 +05:30 [ERR] An error occurred using the connection to database 'ph14663762951_WhatAppTest' on server 'tcp://p3nlmysql89plsk.secureserver.net:3306'.
2025-09-19 18:26:35.671 +05:30 [INF] Setting HTTP status code 500.
2025-09-19 18:26:35.674 +05:30 [INF] Writing value of type 'ProblemDetails' as Json.
2025-09-19 18:26:35.677 +05:30 [INF] Executed endpoint 'HTTP: GET /api/debug/db'
2025-09-19 18:26:35.680 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/debug/db - 500 null application/problem+json 983.4034ms
2025-09-19 18:26:53.262 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 18:26:53.329 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 18:26:53.365 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 18:26:54.258 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 18:26:54.823 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 18:26:54.838 +05:30 [INF] ClickLogWorker started
2025-09-19 18:26:54.982 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 18:26:54.984 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 18:26:54.985 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 18:26:54.985 +05:30 [INF] Hosting environment: Development
2025-09-19 18:26:54.986 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 18:26:55.889 +05:30 [INF] ClickLogWorker stopped
2025-09-19 18:26:56.118 +05:30 [ERR] An error occurred using the connection to database 'ph14663762951_WhatAppTest' on server 'tcp://p3nlmysql89plsk.secureserver.net:3306'.
2025-09-19 18:26:56.118 +05:30 [ERR] An error occurred using the connection to database 'ph14663762951_WhatAppTest' on server 'tcp://p3nlmysql89plsk.secureserver.net:3306'.
2025-09-19 18:26:56.161 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 18:26:56.161 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 18:26:56.314 +05:30 [ERR] BackgroundService failed
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.MaintenanceService.IsAutoCleanupEnabledAsync() in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\MaintenanceService.cs:line 17
   at xbytechat.api.Features.Webhooks.BackgroundWorkers.WebhookAutoCleanupWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\BackgroundWorkers\WebhookAutoCleanupWorker.cs:line 23
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2025-09-19 18:26:56.365 +05:30 [ERR] ❌ Failed to clean up old webhook logs.
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.FailedWebhookLogCleanupService.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\FailedWebhookLogCleanupService.cs:line 34
2025-09-19 18:26:57.195 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 18:26:57.417 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 233.6796ms
2025-09-19 18:26:57.452 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 18:26:57.463 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 10.9888ms
2025-09-19 18:26:57.519 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 18:26:57.565 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 45.3919ms
2025-09-19 18:26:57.738 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 18:26:58.063 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 325.6482ms
2025-09-19 18:27:11.683 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/debug/db - null null
2025-09-19 18:27:11.691 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 18:27:11.836 +05:30 [INF] Executing endpoint 'HTTP: GET /api/debug/db'
2025-09-19 18:27:13.006 +05:30 [ERR] An error occurred using the connection to database 'ph14663762951_WhatAppTest' on server 'tcp://p3nlmysql89plsk.secureserver.net:3306'.
2025-09-19 18:27:13.080 +05:30 [INF] Setting HTTP status code 500.
2025-09-19 18:27:13.095 +05:30 [INF] Writing value of type 'ProblemDetails' as Json.
2025-09-19 18:27:13.106 +05:30 [INF] Executed endpoint 'HTTP: GET /api/debug/db'
2025-09-19 18:27:13.115 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/debug/db - 500 null application/problem+json 1432.539ms
2025-09-19 18:27:54.888 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 18:27:54.942 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 18:27:54.964 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 18:27:55.976 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 18:27:56.631 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 18:27:56.646 +05:30 [INF] ClickLogWorker started
2025-09-19 18:27:56.801 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 18:27:56.802 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 18:27:56.804 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 18:27:56.804 +05:30 [INF] Hosting environment: Development
2025-09-19 18:27:56.805 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 18:27:57.045 +05:30 [ERR] An error occurred using the connection to database 'CIOdigital_Testing' on server 'tcp://118.139.177.45:3306'.
2025-09-19 18:27:57.045 +05:30 [ERR] An error occurred using the connection to database 'CIOdigital_Testing' on server 'tcp://118.139.177.45:3306'.
2025-09-19 18:27:57.083 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
Npgsql.NpgsqlException (0x80004005): Received unknown response a for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlException (0x80004005): Received unknown response a for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 18:27:57.083 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
Npgsql.NpgsqlException (0x80004005): Received unknown response a for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlException (0x80004005): Received unknown response a for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 18:27:57.249 +05:30 [ERR] BackgroundService failed
Npgsql.NpgsqlException (0x80004005): Received unknown response a for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.MaintenanceService.IsAutoCleanupEnabledAsync() in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\MaintenanceService.cs:line 17
   at xbytechat.api.Features.Webhooks.BackgroundWorkers.WebhookAutoCleanupWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\BackgroundWorkers\WebhookAutoCleanupWorker.cs:line 23
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2025-09-19 18:27:57.172 +05:30 [ERR] ❌ Failed to clean up old webhook logs.
Npgsql.NpgsqlException (0x80004005): Received unknown response a for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.FailedWebhookLogCleanupService.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\FailedWebhookLogCleanupService.cs:line 34
2025-09-19 18:27:57.696 +05:30 [INF] ClickLogWorker stopped
2025-09-19 18:27:58.831 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 18:27:59.063 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 240.8645ms
2025-09-19 18:27:59.088 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 18:27:59.096 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.8481ms
2025-09-19 18:27:59.178 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 18:27:59.222 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.3745ms
2025-09-19 18:27:59.427 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 18:27:59.721 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 294.1666ms
2025-09-19 18:28:12.009 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/debug/db - null null
2025-09-19 18:28:12.016 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 18:28:12.155 +05:30 [INF] Executing endpoint 'HTTP: GET /api/debug/db'
2025-09-19 18:28:12.705 +05:30 [ERR] An error occurred using the connection to database 'CIOdigital_Testing' on server 'tcp://118.139.177.45:3306'.
2025-09-19 18:28:12.787 +05:30 [INF] Setting HTTP status code 500.
2025-09-19 18:28:12.805 +05:30 [INF] Writing value of type 'ProblemDetails' as Json.
2025-09-19 18:28:12.815 +05:30 [INF] Executed endpoint 'HTTP: GET /api/debug/db'
2025-09-19 18:28:12.827 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/debug/db - 500 null application/problem+json 817.3125ms
2025-09-19 18:31:01.149 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 18:31:01.258 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 18:31:01.279 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 18:31:02.225 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 18:31:02.678 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
System.ArgumentException: Couldn't set sslmode (Parameter 'sslmode')
 ---> System.ArgumentException: Requested value 'Required' was not found.
   at System.Enum.TryParseByName[TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TStorage& result)
   at System.Enum.TryParseByValueOrName[TUnderlying,TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TUnderlying& result)
   at System.Enum.TryParse(Type enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, Object& result)
   at System.Enum.Parse(Type enumType, String value, Boolean ignoreCase)
   at Npgsql.NpgsqlConnectionStringBuilder.<GeneratedActions>g__GetValue|10_0(Type type, Object value)
   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedActions(GeneratedAction action, String keyword, Object& value)
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   --- End of inner exception stack trace ---
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)
   at Npgsql.NpgsqlConnection.SetupDataSource()
   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnection..ctor(String connectionString)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.ArgumentException: Couldn't set sslmode (Parameter 'sslmode')
 ---> System.ArgumentException: Requested value 'Required' was not found.
   at System.Enum.TryParseByName[TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TStorage& result)
   at System.Enum.TryParseByValueOrName[TUnderlying,TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TUnderlying& result)
   at System.Enum.TryParse(Type enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, Object& result)
   at System.Enum.Parse(Type enumType, String value, Boolean ignoreCase)
   at Npgsql.NpgsqlConnectionStringBuilder.<GeneratedActions>g__GetValue|10_0(Type type, Object value)
   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedActions(GeneratedAction action, String keyword, Object& value)
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   --- End of inner exception stack trace ---
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)
   at Npgsql.NpgsqlConnection.SetupDataSource()
   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnection..ctor(String connectionString)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 18:31:02.708 +05:30 [ERR] ❌ Failed to clean up old webhook logs.
System.ArgumentException: Couldn't set sslmode (Parameter 'sslmode')
 ---> System.ArgumentException: Requested value 'Required' was not found.
   at System.Enum.TryParseByName[TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TStorage& result)
   at System.Enum.TryParseByValueOrName[TUnderlying,TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TUnderlying& result)
   at System.Enum.TryParse(Type enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, Object& result)
   at System.Enum.Parse(Type enumType, String value, Boolean ignoreCase)
   at Npgsql.NpgsqlConnectionStringBuilder.<GeneratedActions>g__GetValue|10_0(Type type, Object value)
   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedActions(GeneratedAction action, String keyword, Object& value)
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   --- End of inner exception stack trace ---
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)
   at Npgsql.NpgsqlConnection.SetupDataSource()
   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnection..ctor(String connectionString)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.FailedWebhookLogCleanupService.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\FailedWebhookLogCleanupService.cs:line 34
2025-09-19 18:31:02.739 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 18:31:02.746 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
System.ArgumentException: Couldn't set sslmode (Parameter 'sslmode')
 ---> System.ArgumentException: Requested value 'Required' was not found.
   at System.Enum.TryParseByName[TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TStorage& result)
   at System.Enum.TryParseByValueOrName[TUnderlying,TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TUnderlying& result)
   at System.Enum.TryParse(Type enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, Object& result)
   at System.Enum.Parse(Type enumType, String value, Boolean ignoreCase)
   at Npgsql.NpgsqlConnectionStringBuilder.<GeneratedActions>g__GetValue|10_0(Type type, Object value)
   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedActions(GeneratedAction action, String keyword, Object& value)
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   --- End of inner exception stack trace ---
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)
   at Npgsql.NpgsqlConnection.SetupDataSource()
   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnection..ctor(String connectionString)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.ArgumentException: Couldn't set sslmode (Parameter 'sslmode')
 ---> System.ArgumentException: Requested value 'Required' was not found.
   at System.Enum.TryParseByName[TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TStorage& result)
   at System.Enum.TryParseByValueOrName[TUnderlying,TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TUnderlying& result)
   at System.Enum.TryParse(Type enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, Object& result)
   at System.Enum.Parse(Type enumType, String value, Boolean ignoreCase)
   at Npgsql.NpgsqlConnectionStringBuilder.<GeneratedActions>g__GetValue|10_0(Type type, Object value)
   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedActions(GeneratedAction action, String keyword, Object& value)
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   --- End of inner exception stack trace ---
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)
   at Npgsql.NpgsqlConnection.SetupDataSource()
   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnection..ctor(String connectionString)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 18:31:02.773 +05:30 [ERR] Hosting failed to start
System.ArgumentException: Couldn't set sslmode (Parameter 'sslmode')
 ---> System.ArgumentException: Requested value 'Required' was not found.
   at System.Enum.TryParseByName[TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TStorage& result)
   at System.Enum.TryParseByValueOrName[TUnderlying,TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TUnderlying& result)
   at System.Enum.TryParse(Type enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, Object& result)
   at System.Enum.Parse(Type enumType, String value, Boolean ignoreCase)
   at Npgsql.NpgsqlConnectionStringBuilder.<GeneratedActions>g__GetValue|10_0(Type type, Object value)
   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedActions(GeneratedAction action, String keyword, Object& value)
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   --- End of inner exception stack trace ---
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)
   at Npgsql.NpgsqlConnection.SetupDataSource()
   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnection..ctor(String connectionString)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.MaintenanceService.IsAutoCleanupEnabledAsync() in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\MaintenanceService.cs:line 17
   at xbytechat.api.Features.Webhooks.BackgroundWorkers.WebhookAutoCleanupWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\BackgroundWorkers\WebhookAutoCleanupWorker.cs:line 23
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-09-19 18:31:02.792 +05:30 [ERR] BackgroundService failed
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at xbytechat.api.Features.Webhooks.Services.FailedWebhookLogCleanupService.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\FailedWebhookLogCleanupService.cs:line 50
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2025-09-19 18:31:02.815 +05:30 [INF] 🛑 Graceful shutdown requested.
2025-09-19 18:31:02.821 +05:30 [INF] 🛑 Webhook Queue Worker stopped.
2025-09-19 18:31:02.826 +05:30 [ERR] Unhandled exception (AppDomain)
System.ArgumentException: Couldn't set sslmode (Parameter 'sslmode')
 ---> System.ArgumentException: Requested value 'Required' was not found.
   at System.Enum.TryParseByName[TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TStorage& result)
   at System.Enum.TryParseByValueOrName[TUnderlying,TStorage](RuntimeType enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, TUnderlying& result)
   at System.Enum.TryParse(Type enumType, ReadOnlySpan`1 value, Boolean ignoreCase, Boolean throwOnFailure, Object& result)
   at System.Enum.Parse(Type enumType, String value, Boolean ignoreCase)
   at Npgsql.NpgsqlConnectionStringBuilder.<GeneratedActions>g__GetValue|10_0(Type type, Object value)
   at Npgsql.NpgsqlConnectionStringBuilder.GeneratedActions(GeneratedAction action, String keyword, Object& value)
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   --- End of inner exception stack trace ---
   at Npgsql.NpgsqlConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnectionStringBuilder..ctor(String connectionString)
   at Npgsql.NpgsqlConnection.SetupDataSource()
   at Npgsql.NpgsqlConnection.set_ConnectionString(String value)
   at Npgsql.NpgsqlConnection..ctor(String connectionString)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlRelationalConnection.CreateDbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.get_DbConnection()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.MaintenanceService.IsAutoCleanupEnabledAsync() in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\MaintenanceService.cs:line 17
   at xbytechat.api.Features.Webhooks.BackgroundWorkers.WebhookAutoCleanupWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\BackgroundWorkers\WebhookAutoCleanupWorker.cs:line 23
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at Program.<Main>$(String[] args) in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 463
2025-09-19 18:31:53.656 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 18:31:53.712 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 18:31:53.730 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 18:31:54.599 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 18:31:55.077 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 18:31:55.088 +05:30 [INF] ClickLogWorker started
2025-09-19 18:31:55.213 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 18:31:55.214 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 18:31:55.215 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 18:31:55.216 +05:30 [INF] Hosting environment: Development
2025-09-19 18:31:55.216 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 18:31:56.122 +05:30 [INF] ClickLogWorker stopped
2025-09-19 18:31:56.910 +05:30 [ERR] An error occurred using the connection to database 'ph14663762951_WhatAppTest' on server 'tcp://p3nlmysql89plsk.secureserver.net:3306'.
2025-09-19 18:31:56.910 +05:30 [ERR] An error occurred using the connection to database 'ph14663762951_WhatAppTest' on server 'tcp://p3nlmysql89plsk.secureserver.net:3306'.
2025-09-19 18:31:56.936 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 18:31:56.936 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 18:31:57.051 +05:30 [ERR] BackgroundService failed
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.MaintenanceService.IsAutoCleanupEnabledAsync() in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\MaintenanceService.cs:line 17
   at xbytechat.api.Features.Webhooks.BackgroundWorkers.WebhookAutoCleanupWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\BackgroundWorkers\WebhookAutoCleanupWorker.cs:line 23
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2025-09-19 18:31:56.995 +05:30 [ERR] ❌ Failed to clean up old webhook logs.
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.FailedWebhookLogCleanupService.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\FailedWebhookLogCleanupService.cs:line 34
2025-09-19 18:31:57.596 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 18:31:57.756 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 166.194ms
2025-09-19 18:31:57.784 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 18:31:57.791 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.899ms
2025-09-19 18:31:57.838 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 18:31:57.878 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 39.2637ms
2025-09-19 18:31:58.006 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 18:31:58.261 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 254.935ms
2025-09-19 18:32:08.527 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/debug/db - null null
2025-09-19 18:32:08.531 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 18:32:08.631 +05:30 [INF] Executing endpoint 'HTTP: GET /api/debug/db'
2025-09-19 18:32:09.735 +05:30 [ERR] An error occurred using the connection to database 'ph14663762951_WhatAppTest' on server 'tcp://p3nlmysql89plsk.secureserver.net:3306'.
2025-09-19 18:32:09.774 +05:30 [INF] Setting HTTP status code 500.
2025-09-19 18:32:09.782 +05:30 [INF] Writing value of type 'ProblemDetails' as Json.
2025-09-19 18:32:09.787 +05:30 [INF] Executed endpoint 'HTTP: GET /api/debug/db'
2025-09-19 18:32:09.794 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/debug/db - 500 null application/problem+json 1267.3434ms
2025-09-19 18:32:46.102 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/debug/db - null null
2025-09-19 18:32:46.120 +05:30 [INF] Executing endpoint 'HTTP: GET /api/debug/db'
2025-09-19 18:32:47.460 +05:30 [ERR] An error occurred using the connection to database 'ph14663762951_WhatAppTest' on server 'tcp://p3nlmysql89plsk.secureserver.net:3306'.
2025-09-19 18:32:47.495 +05:30 [INF] Setting HTTP status code 500.
2025-09-19 18:32:47.497 +05:30 [INF] Writing value of type 'ProblemDetails' as Json.
2025-09-19 18:32:47.499 +05:30 [INF] Executed endpoint 'HTTP: GET /api/debug/db'
2025-09-19 18:32:47.500 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/debug/db - 500 null application/problem+json 1398.805ms
2025-09-19 18:37:18.043 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 613
2025-09-19 18:37:18.048 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 18:37:18.062 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 18:37:18.084 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTlDQkJEOEI0MzQ0QjE4NTFDAA==","status":"sent","timestamp":"1758253220","recipient_id":"918974005240","conversation":{"id":"d70f1373a659586579413e2fd6a29224","expiration_timestamp":"1758253220","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-19 18:37:18.086 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 18:37:18.091 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 18:37:18.104 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 33.2977ms
2025-09-19 18:37:18.106 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 18:37:18.107 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 64.2706ms
2025-09-19 18:37:18.207 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTlDQkJEOEI0MzQ0QjE4NTFDAA==","status":"sent","timestamp":"1758253220","recipient_id":"918974005240","conversation":{"id":"d70f1373a659586579413e2fd6a29224","expiration_timestamp":"1758253220","origin":{"type":"service"}},"pricing":{"billable":false,"pricing_model":"PMP","category":"service","type":"free_customer_service"}}]},"field":"messages"}]}]}
2025-09-19 18:37:19.507 +05:30 [ERR] An error occurred using the connection to database 'ph14663762951_WhatAppTest' on server 'tcp://p3nlmysql89plsk.secureserver.net:3306'.
2025-09-19 18:37:19.511 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 18:37:19.578 +05:30 [ERR] ProviderDirectory lookup failed.
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Directory.ProviderDirectory.QueryByAsync(String provider, String phoneNumberId, String displayPhoneNumber, String wabaId, CancellationToken ct) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Directory\ProviderDirectory.cs:line 99
   at xbytechat.api.Features.Webhooks.Directory.ProviderDirectory.ResolveBusinessIdAsync(String provider, String phoneNumberId, String displayPhoneNumber, String wabaId, String waId, CancellationToken ct) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Directory\ProviderDirectory.cs:line 50
2025-09-19 18:37:19.585 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 18:37:20.651 +05:30 [ERR] An error occurred using the connection to database 'ph14663762951_WhatAppTest' on server 'tcp://p3nlmysql89plsk.secureserver.net:3306'.
2025-09-19 18:37:20.656 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 18:37:20.716 +05:30 [WRN] MessageId resolver failed for wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTlDQkJEOEI0MzQ0QjE4NTFDAA==
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.Resolvers.MessageIdResolver.ResolveCampaignSendLogIdAsync(String messageId) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\Resolvers\MessageIdResolver.cs:line 22
   at xbytechat.api.Features.Webhooks.Services.Processors.StatusWebhookProcessor.ProcessAsync(JsonElement value) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\Processors\StatusWebhookProcessor.cs:line 113
2025-09-19 18:37:21.706 +05:30 [ERR] An error occurred using the connection to database 'ph14663762951_WhatAppTest' on server 'tcp://p3nlmysql89plsk.secureserver.net:3306'.
2025-09-19 18:37:21.710 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 18:37:21.795 +05:30 [ERR] ❌ Dispatcher failed to process WhatsApp webhook.
Npgsql.NpgsqlException (0x80004005): Received unknown response M for SSLRequest (expecting S or N)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.Processors.StatusWebhookProcessor.ProcessAsync(JsonElement value) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\Processors\StatusWebhookProcessor.cs:line 168
   at xbytechat.api.Features.Webhooks.Services.Processors.StatusWebhookProcessor.ProcessStatusUpdateAsync(JsonElement payload) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\Processors\StatusWebhookProcessor.cs:line 50
   at xbytechat.api.Features.Webhooks.Services.WhatsAppWebhookDispatcher.DispatchAsync(JsonElement payload) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\WhatsAppWebhookDispatcher.cs:line 99
2025-09-19 18:42:57.151 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 18:42:57.193 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 18:42:57.260 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 18:42:58.187 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 18:42:58.698 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 18:42:58.709 +05:30 [INF] ClickLogWorker started
2025-09-19 18:42:58.822 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 18:42:58.822 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 18:42:58.823 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 18:42:58.824 +05:30 [INF] Hosting environment: Development
2025-09-19 18:42:58.824 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 18:42:59.754 +05:30 [INF] ClickLogWorker stopped
2025-09-19 18:43:00.998 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 18:43:01.184 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 194.6717ms
2025-09-19 18:43:01.233 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 18:43:01.240 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.1713ms
2025-09-19 18:43:01.274 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 18:43:01.306 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 32.5774ms
2025-09-19 18:43:01.443 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 18:43:01.657 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 213.9105ms
2025-09-19 18:43:02.315 +05:30 [INF] Executed DbCommand (394ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-19 18:43:02.343 +05:30 [INF] Executed DbCommand (423ms) [Parameters=[@__cutoff_0='2025-09-12T13:12:57.3837680Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-19 18:43:13.892 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/debug/db - null null
2025-09-19 18:43:13.896 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 18:43:13.965 +05:30 [INF] Executing endpoint 'HTTP: GET /api/debug/db'
2025-09-19 18:43:14.036 +05:30 [INF] Setting HTTP status code 200.
2025-09-19 18:43:14.040 +05:30 [INF] Writing value of type 'String' as Json.
2025-09-19 18:43:14.043 +05:30 [INF] Executed endpoint 'HTTP: GET /api/debug/db'
2025-09-19 18:43:14.047 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/debug/db - 200 null application/json; charset=utf-8 155.8239ms
2025-09-19 18:44:13.682 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 18:44:30.728 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 18:44:38.134 +05:30 [INF] Executed DbCommand (444ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-09-19 18:44:38.549 +05:30 [INF] Executed DbCommand (404ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-19 18:44:42.109 +05:30 [INF] Executed DbCommand (543ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-09-19 18:44:45.045 +05:30 [INF] Executed DbCommand (377ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-09-19 18:44:45.588 +05:30 [INF] Executed DbCommand (543ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-09-19 18:44:45.597 +05:30 [INF] Applying migration '20250918092503_NewDatbase'.
2025-09-19 18:44:46.233 +05:30 [ERR] Failed executing DbCommand (463ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AuditLogs" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "PerformedByUserId" uuid NOT NULL,
    "PerformedByUserName" text,
    "RoleAtTime" text,
    "ActionType" text NOT NULL,
    "Description" text,
    "IPAddress" text,
    "UserAgent" text,
    "Location" text,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AuditLogs" PRIMARY KEY ("Id")
);
2025-09-19 21:04:43.106 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 21:04:43.158 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 21:04:43.174 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 21:04:43.960 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 21:04:44.563 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 21:04:44.580 +05:30 [INF] ClickLogWorker started
2025-09-19 21:04:44.618 +05:30 [ERR] An error occurred using the connection to database 'xbyte' on server 'tcp://127.0.0.1:5432'.
2025-09-19 21:04:44.673 +05:30 [ERR] An error occurred using the connection to database 'xbyte' on server 'tcp://127.0.0.1:5432'.
2025-09-19 21:04:44.734 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
Npgsql.PostgresException (0x80004005): 28P01: password authentication failed for user "xbyte"
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.AuthenticateSASL(List`1 mechanisms, String username, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: FATAL
    SqlState: 28P01
    MessageText: password authentication failed for user "xbyte"
    File: auth.c
    Line: 326
    Routine: auth_failed
Npgsql.PostgresException (0x80004005): 28P01: password authentication failed for user "xbyte"
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.AuthenticateSASL(List`1 mechanisms, String username, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: FATAL
    SqlState: 28P01
    MessageText: password authentication failed for user "xbyte"
    File: auth.c
    Line: 326
    Routine: auth_failed
2025-09-19 21:04:44.734 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
Npgsql.PostgresException (0x80004005): 28P01: password authentication failed for user "xbyte"
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.AuthenticateSASL(List`1 mechanisms, String username, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: FATAL
    SqlState: 28P01
    MessageText: password authentication failed for user "xbyte"
    File: auth.c
    Line: 326
    Routine: auth_failed
Npgsql.PostgresException (0x80004005): 28P01: password authentication failed for user "xbyte"
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.AuthenticateSASL(List`1 mechanisms, String username, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: FATAL
    SqlState: 28P01
    MessageText: password authentication failed for user "xbyte"
    File: auth.c
    Line: 326
    Routine: auth_failed
2025-09-19 21:04:44.914 +05:30 [ERR] ❌ Failed to clean up old webhook logs.
Npgsql.PostgresException (0x80004005): 28P01: password authentication failed for user "xbyte"
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.AuthenticateSASL(List`1 mechanisms, String username, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.FailedWebhookLogCleanupService.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\FailedWebhookLogCleanupService.cs:line 34
  Exception data:
    Severity: FATAL
    SqlState: 28P01
    MessageText: password authentication failed for user "xbyte"
    File: auth.c
    Line: 326
    Routine: auth_failed
2025-09-19 21:04:44.878 +05:30 [ERR] BackgroundService failed
Npgsql.PostgresException (0x80004005): 28P01: password authentication failed for user "xbyte"
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.AuthenticateSASL(List`1 mechanisms, String username, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.MaintenanceService.IsAutoCleanupEnabledAsync() in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\MaintenanceService.cs:line 17
   at xbytechat.api.Features.Webhooks.BackgroundWorkers.WebhookAutoCleanupWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\BackgroundWorkers\WebhookAutoCleanupWorker.cs:line 23
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
  Exception data:
    Severity: FATAL
    SqlState: 28P01
    MessageText: password authentication failed for user "xbyte"
    File: auth.c
    Line: 326
    Routine: auth_failed
2025-09-19 21:04:45.005 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 21:04:45.006 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 21:04:45.007 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 21:04:45.007 +05:30 [INF] Hosting environment: Development
2025-09-19 21:04:45.008 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 21:04:45.610 +05:30 [INF] ClickLogWorker stopped
2025-09-19 21:04:46.797 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 21:04:46.982 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 195.4004ms
2025-09-19 21:04:47.082 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 21:04:47.082 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 21:04:47.088 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.1706ms
2025-09-19 21:04:47.118 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.8678ms
2025-09-19 21:04:47.316 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 21:04:47.527 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 210.8166ms
2025-09-19 21:05:01.801 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/debug/db - null null
2025-09-19 21:05:01.805 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 21:05:01.896 +05:30 [INF] Executing endpoint 'HTTP: GET /api/debug/db'
2025-09-19 21:05:02.005 +05:30 [ERR] An error occurred using the connection to database 'xbyte' on server 'tcp://127.0.0.1:5432'.
2025-09-19 21:05:02.044 +05:30 [INF] Setting HTTP status code 500.
2025-09-19 21:05:02.054 +05:30 [INF] Writing value of type 'ProblemDetails' as Json.
2025-09-19 21:05:02.061 +05:30 [INF] Executed endpoint 'HTTP: GET /api/debug/db'
2025-09-19 21:05:02.066 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/debug/db - 500 null application/problem+json 265.521ms
2025-09-19 21:12:06.276 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 21:12:06.322 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 21:12:06.335 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 21:12:07.212 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 21:12:07.678 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 21:12:07.695 +05:30 [INF] ClickLogWorker started
2025-09-19 21:12:07.711 +05:30 [ERR] An error occurred using the connection to database 'xbyte' on server 'tcp://127.0.0.1:5432'.
2025-09-19 21:12:07.756 +05:30 [ERR] An error occurred using the connection to database 'xbyte' on server 'tcp://127.0.0.1:5432'.
2025-09-19 21:12:07.775 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
Npgsql.NpgsqlException (0x80004005): SSL connection requested. No SSL enabled connection from this host is configured.
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlException (0x80004005): SSL connection requested. No SSL enabled connection from this host is configured.
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 21:12:07.775 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
Npgsql.NpgsqlException (0x80004005): SSL connection requested. No SSL enabled connection from this host is configured.
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Npgsql.NpgsqlException (0x80004005): SSL connection requested. No SSL enabled connection from this host is configured.
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 21:12:07.908 +05:30 [ERR] ❌ Failed to clean up old webhook logs.
Npgsql.NpgsqlException (0x80004005): SSL connection requested. No SSL enabled connection from this host is configured.
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.FailedWebhookLogCleanupService.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\FailedWebhookLogCleanupService.cs:line 34
2025-09-19 21:12:07.876 +05:30 [ERR] BackgroundService failed
Npgsql.NpgsqlException (0x80004005): SSL connection requested. No SSL enabled connection from this host is configured.
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.MaintenanceService.IsAutoCleanupEnabledAsync() in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\MaintenanceService.cs:line 17
   at xbytechat.api.Features.Webhooks.BackgroundWorkers.WebhookAutoCleanupWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\BackgroundWorkers\WebhookAutoCleanupWorker.cs:line 23
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2025-09-19 21:12:07.972 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 21:12:07.973 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 21:12:07.974 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 21:12:07.974 +05:30 [INF] Hosting environment: Development
2025-09-19 21:12:07.975 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 21:12:08.752 +05:30 [INF] ClickLogWorker stopped
2025-09-19 21:12:10.107 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 21:12:10.305 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 210.93ms
2025-09-19 21:12:10.333 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 21:12:10.343 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 9.8295ms
2025-09-19 21:12:10.404 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 21:12:10.457 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 52.7421ms
2025-09-19 21:12:10.672 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 21:12:10.873 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 201.7838ms
2025-09-19 21:12:40.365 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/debug/db - null null
2025-09-19 21:12:40.369 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 21:12:40.459 +05:30 [INF] Executing endpoint 'HTTP: GET /api/debug/db'
2025-09-19 21:12:40.563 +05:30 [ERR] An error occurred using the connection to database 'xbyte' on server 'tcp://127.0.0.1:5432'.
2025-09-19 21:12:40.596 +05:30 [INF] Setting HTTP status code 500.
2025-09-19 21:12:40.603 +05:30 [INF] Writing value of type 'ProblemDetails' as Json.
2025-09-19 21:12:40.608 +05:30 [INF] Executed endpoint 'HTTP: GET /api/debug/db'
2025-09-19 21:12:40.612 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/debug/db - 500 null application/problem+json 247.7681ms
2025-09-19 21:15:33.349 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/debug/db - null null
2025-09-19 21:15:33.366 +05:30 [INF] Executing endpoint 'HTTP: GET /api/debug/db'
2025-09-19 21:15:33.428 +05:30 [ERR] An error occurred using the connection to database 'xbyte' on server 'tcp://127.0.0.1:5432'.
2025-09-19 21:15:33.449 +05:30 [INF] Setting HTTP status code 500.
2025-09-19 21:15:33.452 +05:30 [INF] Writing value of type 'ProblemDetails' as Json.
2025-09-19 21:15:33.453 +05:30 [INF] Executed endpoint 'HTTP: GET /api/debug/db'
2025-09-19 21:15:33.454 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/debug/db - 500 null application/problem+json 105.6794ms
2025-09-19 21:15:44.470 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 21:15:44.510 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 21:15:44.524 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 21:15:45.285 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 21:15:45.741 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 21:15:45.756 +05:30 [INF] ClickLogWorker started
2025-09-19 21:15:45.803 +05:30 [ERR] An error occurred using the connection to database 'xbyte' on server 'tcp://127.0.0.1:5432'.
2025-09-19 21:15:45.865 +05:30 [ERR] An error occurred using the connection to database 'xbyte' on server 'tcp://127.0.0.1:5432'.
2025-09-19 21:15:45.880 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
Npgsql.PostgresException (0x80004005): 28P01: password authentication failed for user "xbyte"
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.AuthenticateSASL(List`1 mechanisms, String username, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: FATAL
    SqlState: 28P01
    MessageText: password authentication failed for user "xbyte"
    File: auth.c
    Line: 326
    Routine: auth_failed
Npgsql.PostgresException (0x80004005): 28P01: password authentication failed for user "xbyte"
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.AuthenticateSASL(List`1 mechanisms, String username, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: FATAL
    SqlState: 28P01
    MessageText: password authentication failed for user "xbyte"
    File: auth.c
    Line: 326
    Routine: auth_failed
2025-09-19 21:15:45.880 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
Npgsql.PostgresException (0x80004005): 28P01: password authentication failed for user "xbyte"
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.AuthenticateSASL(List`1 mechanisms, String username, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: FATAL
    SqlState: 28P01
    MessageText: password authentication failed for user "xbyte"
    File: auth.c
    Line: 326
    Routine: auth_failed
Npgsql.PostgresException (0x80004005): 28P01: password authentication failed for user "xbyte"
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.AuthenticateSASL(List`1 mechanisms, String username, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: FATAL
    SqlState: 28P01
    MessageText: password authentication failed for user "xbyte"
    File: auth.c
    Line: 326
    Routine: auth_failed
2025-09-19 21:15:46.016 +05:30 [ERR] BackgroundService failed
Npgsql.PostgresException (0x80004005): 28P01: password authentication failed for user "xbyte"
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.AuthenticateSASL(List`1 mechanisms, String username, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.MaintenanceService.IsAutoCleanupEnabledAsync() in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\MaintenanceService.cs:line 17
   at xbytechat.api.Features.Webhooks.BackgroundWorkers.WebhookAutoCleanupWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\BackgroundWorkers\WebhookAutoCleanupWorker.cs:line 23
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
  Exception data:
    Severity: FATAL
    SqlState: 28P01
    MessageText: password authentication failed for user "xbyte"
    File: auth.c
    Line: 326
    Routine: auth_failed
2025-09-19 21:15:46.054 +05:30 [ERR] ❌ Failed to clean up old webhook logs.
Npgsql.PostgresException (0x80004005): 28P01: password authentication failed for user "xbyte"
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.AuthenticateSASL(List`1 mechanisms, String username, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.FailedWebhookLogCleanupService.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\FailedWebhookLogCleanupService.cs:line 34
  Exception data:
    Severity: FATAL
    SqlState: 28P01
    MessageText: password authentication failed for user "xbyte"
    File: auth.c
    Line: 326
    Routine: auth_failed
2025-09-19 21:15:46.116 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 21:15:46.117 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 21:15:46.118 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 21:15:46.119 +05:30 [INF] Hosting environment: Development
2025-09-19 21:15:46.119 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 21:15:46.796 +05:30 [INF] ClickLogWorker stopped
2025-09-19 21:15:48.138 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 21:15:48.269 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 137.8223ms
2025-09-19 21:15:48.289 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 21:15:48.296 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.4561ms
2025-09-19 21:15:48.353 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 21:15:48.383 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 29.3669ms
2025-09-19 21:15:48.517 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 21:15:48.699 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 182.4365ms
2025-09-19 21:15:59.267 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/debug/db - null null
2025-09-19 21:15:59.271 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 21:15:59.362 +05:30 [INF] Executing endpoint 'HTTP: GET /api/debug/db'
2025-09-19 21:15:59.465 +05:30 [ERR] An error occurred using the connection to database 'xbyte' on server 'tcp://127.0.0.1:5432'.
2025-09-19 21:15:59.500 +05:30 [INF] Setting HTTP status code 500.
2025-09-19 21:15:59.508 +05:30 [INF] Writing value of type 'ProblemDetails' as Json.
2025-09-19 21:15:59.514 +05:30 [INF] Executed endpoint 'HTTP: GET /api/debug/db'
2025-09-19 21:15:59.519 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/debug/db - 500 null application/problem+json 252.0948ms
2025-09-19 21:22:03.032 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 21:22:03.136 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 21:22:03.156 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 21:22:04.061 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 21:22:04.524 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 21:22:04.542 +05:30 [INF] ClickLogWorker started
2025-09-19 21:22:04.597 +05:30 [ERR] An error occurred using the connection to database 'xbyte' on server 'tcp://127.0.0.1:5432'.
2025-09-19 21:22:04.604 +05:30 [ERR] An error occurred using the connection to database 'xbyte' on server 'tcp://127.0.0.1:5432'.
2025-09-19 21:22:04.629 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
Npgsql.PostgresException (0x80004005): 28P01: password authentication failed for user "xbyte"
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.AuthenticateSASL(List`1 mechanisms, String username, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: FATAL
    SqlState: 28P01
    MessageText: password authentication failed for user "xbyte"
    File: auth.c
    Line: 326
    Routine: auth_failed
Npgsql.PostgresException (0x80004005): 28P01: password authentication failed for user "xbyte"
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.AuthenticateSASL(List`1 mechanisms, String username, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: FATAL
    SqlState: 28P01
    MessageText: password authentication failed for user "xbyte"
    File: auth.c
    Line: 326
    Routine: auth_failed
2025-09-19 21:22:04.629 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
Npgsql.PostgresException (0x80004005): 28P01: password authentication failed for user "xbyte"
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.AuthenticateSASL(List`1 mechanisms, String username, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: FATAL
    SqlState: 28P01
    MessageText: password authentication failed for user "xbyte"
    File: auth.c
    Line: 326
    Routine: auth_failed
Npgsql.PostgresException (0x80004005): 28P01: password authentication failed for user "xbyte"
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.AuthenticateSASL(List`1 mechanisms, String username, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: FATAL
    SqlState: 28P01
    MessageText: password authentication failed for user "xbyte"
    File: auth.c
    Line: 326
    Routine: auth_failed
2025-09-19 21:22:04.746 +05:30 [ERR] ❌ Failed to clean up old webhook logs.
Npgsql.PostgresException (0x80004005): 28P01: password authentication failed for user "xbyte"
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.AuthenticateSASL(List`1 mechanisms, String username, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.FailedWebhookLogCleanupService.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\FailedWebhookLogCleanupService.cs:line 34
  Exception data:
    Severity: FATAL
    SqlState: 28P01
    MessageText: password authentication failed for user "xbyte"
    File: auth.c
    Line: 326
    Routine: auth_failed
2025-09-19 21:22:04.826 +05:30 [ERR] BackgroundService failed
Npgsql.PostgresException (0x80004005): 28P01: password authentication failed for user "xbyte"
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.AuthenticateSASL(List`1 mechanisms, String username, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.MaintenanceService.IsAutoCleanupEnabledAsync() in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\MaintenanceService.cs:line 17
   at xbytechat.api.Features.Webhooks.BackgroundWorkers.WebhookAutoCleanupWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\BackgroundWorkers\WebhookAutoCleanupWorker.cs:line 23
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
  Exception data:
    Severity: FATAL
    SqlState: 28P01
    MessageText: password authentication failed for user "xbyte"
    File: auth.c
    Line: 326
    Routine: auth_failed
2025-09-19 21:22:04.835 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 21:22:04.842 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 21:22:04.843 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 21:22:04.843 +05:30 [INF] Hosting environment: Development
2025-09-19 21:22:04.844 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 21:22:05.575 +05:30 [INF] ClickLogWorker stopped
2025-09-19 21:22:06.902 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 21:22:07.035 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 138.9675ms
2025-09-19 21:22:07.056 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 21:22:07.063 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 6.4806ms
2025-09-19 21:22:07.112 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 21:22:07.141 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.5209ms
2025-09-19 21:22:07.283 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 21:22:07.468 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 184.9808ms
2025-09-19 21:22:20.576 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/debug/db - null null
2025-09-19 21:22:20.580 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 21:22:20.659 +05:30 [INF] Executing endpoint 'HTTP: GET /api/debug/db'
2025-09-19 21:22:20.790 +05:30 [ERR] An error occurred using the connection to database 'xbyte' on server 'tcp://127.0.0.1:5432'.
2025-09-19 21:22:20.835 +05:30 [INF] Setting HTTP status code 500.
2025-09-19 21:22:20.844 +05:30 [INF] Writing value of type 'ProblemDetails' as Json.
2025-09-19 21:22:20.849 +05:30 [INF] Executed endpoint 'HTTP: GET /api/debug/db'
2025-09-19 21:22:20.854 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/debug/db - 500 null application/problem+json 278.7826ms
2025-09-19 21:33:06.632 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-19 21:33:06.713 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-19 21:33:06.733 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-19 21:33:07.728 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-19 21:33:08.285 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-19 21:33:08.297 +05:30 [INF] ClickLogWorker started
2025-09-19 21:33:08.465 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-19 21:33:08.466 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-19 21:33:08.467 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-19 21:33:08.467 +05:30 [INF] Hosting environment: Development
2025-09-19 21:33:08.468 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-19 21:33:09.343 +05:30 [INF] ClickLogWorker stopped
2025-09-19 21:33:10.580 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-19 21:33:10.738 +05:30 [ERR] An error occurred using the connection to database 'xbyte' on server 'tcp://31.97.205.131:5432'.
2025-09-19 21:33:10.748 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 174.5098ms
2025-09-19 21:33:10.774 +05:30 [ERR] An error occurred using the connection to database 'xbyte' on server 'tcp://31.97.205.131:5432'.
2025-09-19 21:33:10.792 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-19 21:33:10.800 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.0195ms
2025-09-19 21:33:10.793 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 31.97.205.131:5432
 ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 31.97.205.131:5432
 ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 21:33:10.793 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 31.97.205.131:5432
 ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 31.97.205.131:5432
 ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 21:33:10.895 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-19 21:33:10.977 +05:30 [ERR] BackgroundService failed
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 31.97.205.131:5432
 ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.MaintenanceService.IsAutoCleanupEnabledAsync() in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\MaintenanceService.cs:line 17
   at xbytechat.api.Features.Webhooks.BackgroundWorkers.WebhookAutoCleanupWorker.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\BackgroundWorkers\WebhookAutoCleanupWorker.cs:line 23
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2025-09-19 21:33:11.018 +05:30 [ERR] ❌ Failed to clean up old webhook logs.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 31.97.205.131:5432
 ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.FailedWebhookLogCleanupService.ExecuteAsync(CancellationToken stoppingToken) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\FailedWebhookLogCleanupService.cs:line 34
2025-09-19 21:33:11.049 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 153.597ms
2025-09-19 21:33:11.156 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-19 21:33:11.508 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 351.5998ms
2025-09-19 21:33:22.158 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/debug/db - null null
2025-09-19 21:33:22.163 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-19 21:33:22.241 +05:30 [INF] Executing endpoint 'HTTP: GET /api/debug/db'
2025-09-19 21:33:24.851 +05:30 [ERR] An error occurred using the connection to database 'xbyte' on server 'tcp://31.97.205.131:5432'.
2025-09-19 21:33:24.892 +05:30 [INF] Setting HTTP status code 500.
2025-09-19 21:33:24.901 +05:30 [INF] Writing value of type 'ProblemDetails' as Json.
2025-09-19 21:33:24.906 +05:30 [INF] Executed endpoint 'HTTP: GET /api/debug/db'
2025-09-19 21:33:24.911 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/debug/db - 500 null application/problem+json 2752.7596ms
2025-09-19 22:04:24.785 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 715
2025-09-19 22:04:24.795 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 22:04:24.810 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 22:04:24.831 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSNTRBRTlGMEQzNkFGMzI5QzFGAA==","status":"failed","timestamp":"1758004239","recipient_id":"917082156227","errors":[{"code":131047,"title":"Re-engagement message","message":"Re-engagement message","error_data":{"details":"Message failed to send because more than 24 hours have passed since the customer last replied to this number."},"href":"https:\/\/developers.facebook.com\/docs\/whatsapp\/cloud-api\/support\/error-codes\/"}]}]},"field":"messages"}]}]}
2025-09-19 22:04:24.833 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 22:04:24.837 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 22:04:24.912 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 32.5932ms
2025-09-19 22:04:24.914 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 22:04:24.915 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 129.8995ms
2025-09-19 22:04:25.024 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSNTRBRTlGMEQzNkFGMzI5QzFGAA==","status":"failed","timestamp":"1758004239","recipient_id":"917082156227","errors":[{"code":131047,"title":"Re-engagement message","message":"Re-engagement message","error_data":{"details":"Message failed to send because more than 24 hours have passed since the customer last replied to this number."},"href":"https:\/\/developers.facebook.com\/docs\/whatsapp\/cloud-api\/support\/error-codes\/"}]}]},"field":"messages"}]}]}
2025-09-19 22:04:25.981 +05:30 [INF] Request starting HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-09-19 22:04:25.986 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 22:04:25.988 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-19 22:04:25.990 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMUUxOTY0NTcwOEIxOUE5MDdGAA==","status":"read","timestamp":"1758279453","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-09-19 22:04:25.992 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-19 22:04:25.993 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType113`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-19 22:04:25.994 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.7185ms
2025-09-19 22:04:25.995 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-19 22:04:25.997 +05:30 [INF] Request finished HTTP/1.1 POST http://bac3a0a109b0.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 16.0814ms
2025-09-19 22:04:28.154 +05:30 [ERR] An error occurred using the connection to database 'xbyte' on server 'tcp://31.97.205.131:5432'.
2025-09-19 22:04:28.160 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 31.97.205.131:5432
 ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 31.97.205.131:5432
 ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 22:04:28.253 +05:30 [ERR] ProviderDirectory lookup failed.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 31.97.205.131:5432
 ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Directory.ProviderDirectory.QueryByAsync(String provider, String phoneNumberId, String displayPhoneNumber, String wabaId, CancellationToken ct) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Directory\ProviderDirectory.cs:line 99
   at xbytechat.api.Features.Webhooks.Directory.ProviderDirectory.ResolveBusinessIdAsync(String provider, String phoneNumberId, String displayPhoneNumber, String wabaId, String waId, CancellationToken ct) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Directory\ProviderDirectory.cs:line 50
2025-09-19 22:04:28.262 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 22:04:36.722 +05:30 [ERR] An error occurred using the connection to database 'xbyte' on server 'tcp://31.97.205.131:5432'.
2025-09-19 22:04:36.728 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 31.97.205.131:5432
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 31.97.205.131:5432
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 22:04:36.801 +05:30 [WRN] MessageId resolver failed for wamid.HBgMOTE3MDgyMTU2MjI3FQIAERgSNTRBRTlGMEQzNkFGMzI5QzFGAA==
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 31.97.205.131:5432
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.Resolvers.MessageIdResolver.ResolveCampaignSendLogIdAsync(String messageId) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\Resolvers\MessageIdResolver.cs:line 22
   at xbytechat.api.Features.Webhooks.Services.Processors.StatusWebhookProcessor.ProcessAsync(JsonElement value) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\Processors\StatusWebhookProcessor.cs:line 113
2025-09-19 22:04:40.254 +05:30 [ERR] An error occurred using the connection to database 'xbyte' on server 'tcp://31.97.205.131:5432'.
2025-09-19 22:04:40.259 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 31.97.205.131:5432
 ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 31.97.205.131:5432
 ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 22:04:40.358 +05:30 [ERR] ❌ Dispatcher failed to process WhatsApp webhook.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 31.97.205.131:5432
 ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.Processors.StatusWebhookProcessor.ProcessAsync(JsonElement value) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\Processors\StatusWebhookProcessor.cs:line 168
   at xbytechat.api.Features.Webhooks.Services.Processors.StatusWebhookProcessor.ProcessStatusUpdateAsync(JsonElement payload) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\Processors\StatusWebhookProcessor.cs:line 50
   at xbytechat.api.Features.Webhooks.Services.WhatsAppWebhookDispatcher.DispatchAsync(JsonElement payload) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\WhatsAppWebhookDispatcher.cs:line 99
2025-09-19 22:04:40.369 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMUUxOTY0NTcwOEIxOUE5MDdGAA==","status":"read","timestamp":"1758279453","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-09-19 22:04:42.846 +05:30 [ERR] An error occurred using the connection to database 'xbyte' on server 'tcp://31.97.205.131:5432'.
2025-09-19 22:04:42.851 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 31.97.205.131:5432
 ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 31.97.205.131:5432
 ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 22:04:42.957 +05:30 [ERR] ProviderDirectory lookup failed.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 31.97.205.131:5432
 ---> System.Net.Sockets.SocketException (10061): No connection could be made because the target machine actively refused it.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Directory.ProviderDirectory.QueryByAsync(String provider, String phoneNumberId, String displayPhoneNumber, String wabaId, CancellationToken ct) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Directory\ProviderDirectory.cs:line 99
   at xbytechat.api.Features.Webhooks.Directory.ProviderDirectory.ResolveBusinessIdAsync(String provider, String phoneNumberId, String displayPhoneNumber, String wabaId, String waId, CancellationToken ct) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Directory\ProviderDirectory.cs:line 50
2025-09-19 22:04:42.966 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-19 22:04:51.505 +05:30 [ERR] An error occurred using the connection to database 'xbyte' on server 'tcp://31.97.205.131:5432'.
2025-09-19 22:04:51.510 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 31.97.205.131:5432
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 31.97.205.131:5432
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 22:04:51.597 +05:30 [WRN] MessageId resolver failed for wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMUUxOTY0NTcwOEIxOUE5MDdGAA==
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 31.97.205.131:5432
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.Resolvers.MessageIdResolver.ResolveCampaignSendLogIdAsync(String messageId) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\Resolvers\MessageIdResolver.cs:line 22
   at xbytechat.api.Features.Webhooks.Services.Processors.StatusWebhookProcessor.ProcessAsync(JsonElement value) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\Processors\StatusWebhookProcessor.cs:line 113
2025-09-19 22:05:00.140 +05:30 [ERR] An error occurred using the connection to database 'xbyte' on server 'tcp://31.97.205.131:5432'.
2025-09-19 22:05:00.144 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'xbytechat.api.AppDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 31.97.205.131:5432
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 31.97.205.131:5432
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-09-19 22:05:00.242 +05:30 [ERR] ❌ Dispatcher failed to process WhatsApp webhook.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Failed to connect to 31.97.205.131:5432
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at Npgsql.TaskTimeoutAndCancellation.ExecuteAsync(Func`2 getTaskFunc, NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.ConnectAsync(NpgsqlTimeout timeout, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.RawOpen(SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|213_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken, Boolean isFirstAttempt)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.OpenNewConnector(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.PoolingDataSource.<Get>g__RentAsync|33_0(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at xbytechat.api.Features.Webhooks.Services.Processors.StatusWebhookProcessor.ProcessAsync(JsonElement value) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\Processors\StatusWebhookProcessor.cs:line 168
   at xbytechat.api.Features.Webhooks.Services.Processors.StatusWebhookProcessor.ProcessStatusUpdateAsync(JsonElement payload) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\Processors\StatusWebhookProcessor.cs:line 50
   at xbytechat.api.Features.Webhooks.Services.WhatsAppWebhookDispatcher.DispatchAsync(JsonElement payload) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\Webhooks\Services\WhatsAppWebhookDispatcher.cs:line 99
