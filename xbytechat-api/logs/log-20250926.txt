2025-09-26 00:00:05.150 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T18:30:05.1454590+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:00:15.170 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__now_0='2025-09-25T18:30:15.1633367+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:00:25.197 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T18:30:25.1938325+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:00:35.208 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T18:30:35.2038057+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:00:45.233 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T18:30:45.2302685+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:00:55.247 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T18:30:55.2438017+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:01:05.269 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T18:31:05.2654782+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:01:15.275 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T18:31:15.2716677+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:01:25.286 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T18:31:25.2830250+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:01:35.296 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T18:31:35.2930310+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:01:45.320 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T18:31:45.3154650+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:01:55.380 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T18:31:55.3768209+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:02:05.398 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T18:32:05.3948914+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:02:15.420 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T18:32:15.4168667+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:02:25.438 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T18:32:25.4353022+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:02:35.455 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T18:32:35.4520384+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:02:45.600 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T18:32:45.4696009+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:02:55.622 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T18:32:55.6186292+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:03:05.634 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T18:33:05.6305624+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:03:15.649 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T18:33:15.6457860+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:03:25.663 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T18:33:25.6592277+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:03:35.674 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T18:33:35.6698948+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:03:45.687 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T18:33:45.6839179+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:03:55.725 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:33:55.7234624+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:04:05.730 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:34:05.7286329+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:04:15.742 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:34:15.7408523+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:04:25.757 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:34:25.7549469+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:04:35.764 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:34:35.7630665+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:04:45.775 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:34:45.7734128+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:04:55.790 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:34:55.7887837+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:05:05.800 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:35:05.7988005+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:05:15.804 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:35:15.7998330+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:05:19.645 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 00:05:19.649 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 00:05:19.650 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:05:19.653 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:05:19.653 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 204 null null 8.1163ms
2025-09-26 00:05:19.654 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 204 null null 4.5845ms
2025-09-26 00:05:19.663 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 00:05:19.663 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 00:05:19.667 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:05:19.670 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:05:19.677 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 00:05:19.677 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 00:05:19.683 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 00:05:19.683 +05:30 [INF] Route matched with {action = "GetSenders", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSenders(System.Guid) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-26 00:05:19.697 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-26 00:05:19.708 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType155`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType241`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:05:19.713 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 28.0952ms
2025-09-26 00:05:19.715 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 00:05:19.716 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 200 null application/json; charset=utf-8 52.9689ms
2025-09-26 00:05:19.755 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-26 00:05:19.760 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.WhatsAppSettings.DTOs.WhatsAppSenderDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:05:19.762 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api) in 76.0499ms
2025-09-26 00:05:19.764 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 00:05:19.765 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 200 null application/json; charset=utf-8 101.5587ms
2025-09-26 00:05:25.826 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:35:25.8240674+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:05:35.836 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T18:35:35.8326533+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:05:40.321 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 601
2025-09-26 00:05:40.323 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:05:40.325 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 00:05:40.327 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkUxMENGQzAwRDY4MjU5RTk5AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggNjk3RUZCOTJEMTIwQjRGNUREQjEyRjRFODNBNkQ3MzYA","timestamp":"1758825339","type":"button","button":{"payload":"No","text":"No"}}]},"field":"messages"}]}]}
2025-09-26 00:05:40.328 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 00:05:40.328 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkUxMENGQzAwRDY4MjU5RTk5AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggNjk3RUZCOTJEMTIwQjRGNUREQjEyRjRFODNBNkQ3MzYA","timestamp":"1758825339","type":"button","button":{"payload":"No","text":"No"}}]},"field":"messages"}]}]}
2025-09-26 00:05:40.329 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:05:40.330 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-26 00:05:40.331 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.0406ms
2025-09-26 00:05:40.332 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-26 00:05:40.333 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:05:40.334 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggNjk3RUZCOTJEMTIwQjRGNUREQjEyRjRFODNBNkQ3MzYA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkUxMENGQzAwRDY4MjU5RTk5AA==, Text: No
2025-09-26 00:05:40.335 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 14.1576ms
2025-09-26 00:05:40.339 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkUxMENGQzAwRDY4MjU5RTk5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-26 00:05:40.344 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__origin_Id_0='658d0a9f-ef8d-48d6-918c-95f545b29b70' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkUxMENGQzAwRDY4MjU5RTk5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-09-26 00:05:40.347 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__fromDigits_1='918974005240', @__fromRaw_2='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND (c."PhoneNumber" = @__fromDigits_1 OR c."PhoneNumber" = @__fromRaw_2)
LIMIT 1
2025-09-26 00:05:40.351 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='d9d6e925-b959-48c4-9ad4-a7a8a72804b3'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
WHERE f."CTAFlowStepId" = @__stepId_0
ORDER BY f."ButtonIndex"
2025-09-26 00:05:40.353 +05:30 [INF] 🟨 Falling back to single available link for step "d9d6e925-b959-48c4-9ad4-a7a8a72804b3"
2025-09-26 00:05:40.354 +05:30 [INF] ✅ Mapped click by TEXT to index 0 (flow="1bd9d06d-5f69-428b-9250-41b6c91854b0", step="d9d6e925-b959-48c4-9ad4-a7a8a72804b3")
2025-09-26 00:05:40.358 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sourceStepId_0='d9d6e925-b959-48c4-9ad4-a7a8a72804b3', @__flowId_1='1bd9d06d-5f69-428b-9250-41b6c91854b0', @__buttonIndex_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-09-26 00:05:40.360 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='d9d6e925-b959-48c4-9ad4-a7a8a72804b3'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-09-26 00:05:40.367 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='32148e31-a411-4094-99f4-80cc9e2ca90b', @p1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p2='0' (Nullable = true), @p3='641c1ee2-97bf-4b41-b7fb-0667b9f07120' (Nullable = true), @p4='918974005240', @p5=NULL, @p6='2025-09-25T18:35:40.3627099Z' (DbType = DateTime), @p7='1bd9d06d-5f69-428b-9250-41b6c91854b0' (Nullable = true), @p8='658d0a9f-ef8d-48d6-918c-95f545b29b70' (Nullable = true), @p9=NULL, @p10='3d5239f8-a8ac-41dd-8e7b-c9e0fe448560' (Nullable = true), @p11='781bb670-5794-4103-8905-c8dea0a9d0f4' (Nullable = true), @p12='d9d6e925-b959-48c4-9ad4-a7a8a72804b3', @p13='welcome_video' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='No'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-26 00:05:40.371 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignSendLogId_Value_0='641c1ee2-97bf-4b41-b7fb-0667b9f07120'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Provider", c0."PhoneNumberId"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
WHERE c."Id" = @__campaignSendLogId_Value_0
LIMIT 1
2025-09-26 00:05:40.374 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_TargetStepId_0='a33c9210-842b-4ecd-ac1b-893ab28aa4b7' (Nullable = true), @__8__locals1_context_FlowId_1='1bd9d06d-5f69-428b-9250-41b6c91854b0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."ProfileNameSlot", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", t."UseProfileName", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."ProfileNameSlot", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c."UseProfileName"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__8__locals1_context_TargetStepId_0 AND c."CTAFlowConfigId" = @__8__locals1_context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-09-26 00:05:40.377 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:05:40.379 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:05:40.380 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:05:42.584 +05:30 [INF] Received HTTP response headers after 2202.996ms - 200
2025-09-26 00:05:42.586 +05:30 [INF] End processing HTTP request after 2206.7583ms - 200
2025-09-26 00:05:42.637 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_context_BusinessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__8__locals1_context_ContactPhone_1='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__8__locals1_context_BusinessId_0 AND c."PhoneNumber" = @__8__locals1_context_ContactPhone_1
LIMIT 1
2025-09-26 00:05:42.641 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 00:05:42.645 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 00:05:48.647 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:05:48.648 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:05:48.648 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:35:48.6471307+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:05:49.558 +05:30 [INF] Received HTTP response headers after 909.0923ms - 400
2025-09-26 00:05:49.560 +05:30 [INF] End processing HTTP request after 913.2639ms - 400
2025-09-26 00:05:49.561 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#132012) Parameter format does not match format in the created template","type":"OAuthException","code":132012,"error_data":{"messaging_product":"whatsapp","details":"header: Format mismatch, expected DOCUMENT, received UNKNOWN"},"fbtrace_id":"AzXpD0RxtLzGr6rcUFhoI3N"}}
2025-09-26 00:06:53.462 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:36:53.4585583+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:06:53.466 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 00:06:53.466 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 00:06:53.472 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-26 00:06:53.471 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@p0='857a9ab7-852c-4b22-b1d6-c62e07f73d5d', @p1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5='Bad Request', @p6='2025-09-25T18:36:53.4557608Z' (DbType = DateTime), @p7='1bd9d06d-5f69-428b-9250-41b6c91854b0' (Nullable = true), @p8='28c00676-14b7-4b27-9b4d-a5d9e5e1ade6' (Nullable = true), @p9='{"error":{"message":"(#132012) Parameter format does not match format in the created template","type":"OAuthException","code":132012,"error_data":{"messaging_product":"whatsapp","details":"header: Format mismatch, expected DOCUMENT, received UNKNOWN"},"fbtrace_id":"AzXpD0RxtLzGr6rcUFhoI3N"}}', @p10='73be40f2-db8b-48af-ace8-765235114ac8' (Nullable = true), @p11=NULL (DbType = Guid), @p12='a33c9210-842b-4ecd-ac1b-893ab28aa4b7', @p13='pdf_template' (Nullable = false), @p14='False', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='28c00676-14b7-4b27-9b4d-a5d9e5e1ade6', @p20='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p21=NULL, @p22='1bd9d06d-5f69-428b-9250-41b6c91854b0' (Nullable = true), @p23='a33c9210-842b-4ecd-ac1b-893ab28aa4b7' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26=NULL, @p27=NULL, @p28=NULL (DbType = DateTime), @p29='2025-09-25T18:36:53.4534237Z' (DbType = DateTime), @p30='Bad Request', @p31='1' (Nullable = true), @p32=NULL (DbType = Boolean), @p33='False', @p34=NULL, @p35='pdf_template' (Nullable = false), @p36=NULL, @p37=NULL (DbType = Decimal), @p38=NULL, @p39=NULL, @p40=NULL, @p41='{"error":{"message":"(#132012) Parameter format does not match format in the created template","type":"OAuthException","code":132012,"error_data":{"messaging_product":"whatsapp","details":"header: Format mismatch, expected DOCUMENT, received UNKNOWN"},"fbtrace_id":"AzXpD0RxtLzGr6rcUFhoI3N"}}', @p42='918974005240' (Nullable = false), @p43='658d0a9f-ef8d-48d6-918c-95f545b29b70' (Nullable = true), @p44=NULL, @p45=NULL (DbType = Guid), @p46=NULL (DbType = DateTime), @p47='flow', @p48='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48)
RETURNING "MessageTime";
2025-09-26 00:06:53.477 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:06:53.478 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:06:53.480 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:06:53.472 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-26 00:06:53.487 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 204 null null 21.1528ms
2025-09-26 00:06:53.487 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 204 null null 21.7726ms
2025-09-26 00:06:53.488 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 15.9715ms
2025-09-26 00:06:53.492 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:06:53.493 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-26 00:06:53.495 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 00:06:53.497 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 00:06:53.498 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 25.4271ms
2025-09-26 00:06:53.500 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:06:53.501 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:06:53.503 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:06:53.507 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-26 00:06:53.509 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 00:06:53.509 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 00:06:53.510 +05:30 [INF] Route matched with {action = "GetSenders", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSenders(System.Guid) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-26 00:06:53.511 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 00:06:53.511 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-09-26 00:06:53.514 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-26 00:06:53.518 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-26 00:06:53.521 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.WhatsAppSettings.DTOs.WhatsAppSenderDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:06:53.523 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType155`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType241`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:06:53.523 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api) in 11.2899ms
2025-09-26 00:06:53.524 +05:30 [INF] 🔎 Fetching templates for BusinessId "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56"
2025-09-26 00:06:53.525 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 11.1753ms
2025-09-26 00:06:53.526 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 00:06:53.527 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 00:06:53.528 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 200 null application/json; charset=utf-8 31.3604ms
2025-09-26 00:06:53.530 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:06:53.529 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 200 null application/json; charset=utf-8 34.474ms
2025-09-26 00:06:53.535 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 00:06:53.538 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 00:06:54.469 +05:30 [INF] Received HTTP response headers after 930.0469ms - 200
2025-09-26 00:06:54.471 +05:30 [INF] End processing HTTP request after 935.2558ms - 200
2025-09-26 00:06:54.535 +05:30 [INF] 📦 Meta Template API (Biz "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56") payload:
{"data":[{"name":"pdf_template","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"DOCUMENT","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534415257_508230149051927_6330429317144744326_n.pdf?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=b2YWNnPv7YoQ7kNvwGBOF9H&_nc_oc=AdnM42tWm_8qqw_k0xD7FhroXxYvcubATQXPHvhhIZLPw_Ca_0jiGdHeXUtBTpHKHS7PCjdC4iXn5IvJmc1Yrz_l&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=-1sY-9c8fAACh4Hs__k3Gw&oh=01_Q5Aa2gHgM8L6-fBSLDszB0dtY2-Y9FR2hTxy2A6w2W9BGdDBWQ&oe=68FD04F5"]}},{"type":"BODY","text":"Hello {{1}},\n\nPlease find your Invoice.","example":{"body_text":[["Usernmok"]]}},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Recieved"},{"type":"QUICK_REPLY","text":"No Received"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"508230145718594"},{"name":"welcome_video","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"VIDEO","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534417141_1284099973020036_5812680847202991712_n.mp4?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=zsyoQsHKvQoQ7kNvwHIJtvF&_nc_oc=AdlV0sbKmrKDFtfOqartFnb3DwICFJYiPMP2fzM_-1mz1pI4Ds5bRLhMXp-s4G1wiMKoGlAbweW1acnIp3V6u6FF&_nc_zt=28&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=-1sY-9c8fAACh4Hs__k3Gw&oh=01_Q5Aa2gHptgasQlm-29pa-0UG5stqjceR3SXBKU1zwXa_ccY6xw&oe=68FCFAC3"]}},{"type":"BODY","text":"Hello {{1}} \ud83d\udc4b\nAapka order successfully deliver ho chuka hai. \ud83d\ude9a\u2728\nKya aapne Nirvasa ka Vaji Amrit Vati lena start kar diya hai? \ud83d\udc8a\nNeeche diye gaye options me se select karke bataye \ud83d\udc47","example":{"body_text":[["Nicolus"]]}},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Yes"},{"type":"QUICK_REPLY","text":"No"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1284099969686703"},{"name":"single_variable_body","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\nWe are sedning {{1}} items.","example":{"body_text":[["five"]]}},{"type":"FOOTER","text":"Sent by xplorebyte"}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1209106791238164"},{"name":"template_1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 1"},{"type":"BODY","text":"This is the Template : 1"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 2"},{"type":"QUICK_REPLY","text":"Show Me Template 3"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2381212765606675"},{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"},{"name":"variable_csv_demo","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Dear  {{1}},\n\nWe are happy to announce that we are going to launch our new product on {{2}}.\n\nRegards,\nLeadsCone","example":{"body_text":[["Nicolaus","Monaday"]]}}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1463763351520294"},{"name":"template_3","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 3"},{"type":"BODY","text":"This is themplate : 3"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1760623375330098"},{"name":"template_2","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 2"},{"type":"BODY","text":"This is teh template 2"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1222093123248950"},{"name":"welcome_menu_minds","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello! Thank you for contacting MindsMiratus.\n\nIf you're a new visitor, we're happy to help you get started. If you're an existing customer, we're here to support you. Please choose from the options below."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Explore Our Services"},{"type":"QUICK_REPLY","text":"View Our Products"},{"type":"QUICK_REPLY","text":"Customer Support"},{"type":"QUICK_REPLY","text":"Contact Sales"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1115530356706526"},{"name":"contact_sales_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We'd love to discuss how we can help your business grow. You can reach our sales team via email at info\u0040mindsmiratus.com or call us at +91-321-123-4321.\n\nWould you like one of our experts to call you back?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Yes, call me back"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"954501560165102"},{"name":"human_takeover_confirmation_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Thank you! We've received your request. One of our experts will get in touch with you shortly.\n\nIs there anything else I can help you with in the meantime?"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1304432401406654"},{"name":"products_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We are proud to offer our powerful and easy-to-use GST Software, designed to simplify your tax compliance, invoicing, and financial management.\n\nWhat would you like to do?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a GST Demo"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2567632853585898"},{"name":"services_menu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We offer a wide range of services to power your business's growth. Please select a category you are interested in:"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Design Services"},{"type":"QUICK_REPLY","text":"Development Services"},{"type":"QUICK_REPLY","text":"Digital & Tele-Marketing"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"738253949023987"},{"name":"support_project_status_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"To check the status of your ongoing project, please provide your registered email address or project ID, and one of our project managers will get back to you with a detailed update shortly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Project Manager"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1599668577490835"},{"name":"support_main_menu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Welcome to the MindsMiratus Support Center. We're here to help you with any questions or issues you may have.\n\nPlease select an option so we can assist you faster."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"GST Software Support"},{"type":"QUICK_REPLY","text":"Check Project Status"},{"type":"QUICK_REPLY","text":"Report Technical Issues"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en","status":"APPROVED","category":"MARKETING","id":"679342281096115"},{"name":"demo","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Demo Template"},{"type":"BODY","text":"Demo Template Message."},{"type":"FOOTER","text":"sent by ExploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/visit"]},{"type":"URL","text":"Shop Now","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/shopnow"]},{"type":"PHONE_NUMBER","text":"Call Us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"757818770430461"},{"name":"dev_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our expert developers build robust and scalable solutions tailored to your business needs. Which area of development interests you?\n\n\ud83d\udcbb Web & Software Dev: Custom applications and software solutions.\n\ud83d\udcf1 Mobile App Dev: Engaging and high-performance apps for iOS and Android.\n\ud83d\uded2 E-commerce Dev: Powerful online stores that drive sales and growth."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Discuss a Project"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3118090155157247"},{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/tutrials"]},{"type":"URL","text":"View Demo","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"},{"name":"build_urltracking","parameter_format":"NAMED","components":[{"type":"BODY","text":"Hello \n\nThis is the test message to check wheather redirecting url is working or not."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/softwaredev"]},{"type":"URL","text":"Explore More","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/moreopt"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"788214393726841"},{"name":"marketing_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We help you reach your target audience and grow your brand effectively. Explore our marketing services:\n\n\ud83d\udcc8 Digital Marketing: SEO, Social Media Marketing, and targeted PPC campaigns.\n\ud83d\udcde Tele-Marketing: IVR systems, Bulk SMS, Voice Calls, and official WhatsApp API solutions."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Get a Marketing Plan"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1683803515627636"},{"name":"design_services_submenu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our creative team delivers stunning and effective designs to make your brand stand out. Which design service would you like to know more about?\n\n\ud83c\udfa8 Website Designing: We build beautiful, responsive, and user-friendly websites.\n\ud83d\udd8c\ufe0f Graphic Designing: We create compelling visuals, logos, and branding materials."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a Design Quote"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3291988187631744"},{"name":"support_gst_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"You've reached support for our GST Software. How can we help?\n\n\ud83d\udd27 Technical Help: For installation issues, errors, or bugs.\n\ud83d\udca1 Feature Questions: To understand how to use a specific feature.\n\ud83d\udcda View FAQs: Get answers to common questions instantly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Support Agent"},{"type":"QUICK_REPLY","text":"View FAQs"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1305308197880244"},{"name":"support_report_issue_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We're sorry to hear you're experiencing an issue.\n\nTo help us resolve it quickly, please tap the button below to connect with our technical support team. Please be ready to provide a brief description of the problem."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Connect to Technical Team"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"755167220845328"},{"name":"about_us_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"MindsMiratus is a leading IT solutions company dedicated to helping businesses grow through innovative and effective digital services. From design to development and marketing, we provide comprehensive solutions to elevate your brand.\n\nWhat would you like to do next?"},{"type":"FOOTER","text":"sent by Mindsmirtus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"},{"type":"QUICK_REPLY","text":"Talk to an Expert"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1971204310331370"},{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"\u26a1\ufe0f Feature Annoucement ! \u26a1\ufe0f\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/\u00257B\u00257BI\u00257D\u00257D{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"View Tutorials","url":"https:\/\/www.youtube.com\/\u00257B\u00257Bi\u00257D\u00257D{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"},{"name":"call_log","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is the checking for call log event."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/seeme"]},{"type":"URL","text":"Call Us","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/callme"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1286058192539680"},{"name":"track_url_after_flow_integ","message_send_ttl_seconds":86400,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BODY","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/vosiatstore"]},{"type":"URL","text":"Visit Demo","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/demo"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1084981273615848"},{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"watch Video","url":"https:\/\/www.youtube.com\/{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"},{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=eJAeQFq4sbYQ7kNvwFpXn8W&_nc_oc=AdlgBuy__gBLfPG4qOcNpzI6X3KF4Tb4oRFGDEgRhrr8VicCxdiD-S5h5XcqMdUYlP-IjhOpU7eelCekwHjyfMWO&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=-1sY-9c8fAACh4Hs__k3Gw&oh=01_Q5Aa2gHEDIGA44ZKnqby1yJD2TBvwDQntj3xwfnwPMScskXo5g&oe=68FCF2CF"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! \ud83c\udf89\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15\u0025 discount** on your purchase. Don't just follow the trend\u2014set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https:\/\/xplorebytesolutions.com\/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"},{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https:\/\/www.qwexample.com\/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"}],"paging":{"cursors":{"before":"QVFIU2ZADb0ZAKeHRXTkFMeUQ2NjZABRVFyWTZABamN6d3doUW5hQTBlQ0RieW42TDBWdnZArNmh4MEJpVFBsWDRiQmZAEajFwNWl1ZAzNZAQlJGbUhmZA0NXOUxIWkR3","after":"QVFIU1hSaTdZATm1tSjZAiNnlaQ1RubTFQZAjlKUUhnU1l2Y3hudWE0NXY0U3d0ZAE8wSV9NeWplbDlCS1FoRHBPN2NDOW1GZA3NLRHk4b3JBVU1TeklYd0JodU93"}}}
2025-09-26 00:06:54.559 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType155`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:06:54.563 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 1045.3564ms
2025-09-26 00:06:54.564 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-26 00:06:54.564 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-26 00:06:54.567 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:06:54.567 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 1074.7698ms
2025-09-26 00:06:54.569 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-26 00:06:54.572 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-09-26 00:06:54.574 +05:30 [INF] 🔎 Fetching templates for BusinessId "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56"
2025-09-26 00:06:54.576 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:06:54.580 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 00:06:54.581 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 00:06:55.271 +05:30 [INF] Received HTTP response headers after 689.3217ms - 200
2025-09-26 00:06:55.273 +05:30 [INF] End processing HTTP request after 693.133ms - 200
2025-09-26 00:06:55.313 +05:30 [INF] 📦 Meta Template API (Biz "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56") payload:
{"data":[{"name":"pdf_template","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"DOCUMENT","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534415257_508230149051927_6330429317144744326_n.pdf?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=b2YWNnPv7YoQ7kNvwGBOF9H&_nc_oc=AdnM42tWm_8qqw_k0xD7FhroXxYvcubATQXPHvhhIZLPw_Ca_0jiGdHeXUtBTpHKHS7PCjdC4iXn5IvJmc1Yrz_l&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=28p8s6k719jQKbgOA-05aQ&oh=01_Q5Aa2gGOimayj6TnLj5vlv9wjPBOn7lHMjv4DDtEDqggaZZScA&oe=68FD04F5"]}},{"type":"BODY","text":"Hello {{1}},\n\nPlease find your Invoice.","example":{"body_text":[["Usernmok"]]}},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Recieved"},{"type":"QUICK_REPLY","text":"No Received"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"508230145718594"},{"name":"welcome_video","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"VIDEO","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534417141_1284099973020036_5812680847202991712_n.mp4?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=zsyoQsHKvQoQ7kNvwHIJtvF&_nc_oc=AdlV0sbKmrKDFtfOqartFnb3DwICFJYiPMP2fzM_-1mz1pI4Ds5bRLhMXp-s4G1wiMKoGlAbweW1acnIp3V6u6FF&_nc_zt=28&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=28p8s6k719jQKbgOA-05aQ&oh=01_Q5Aa2gFtDmmngIklM4q_nPQHNm_yftZTplqBOtMobIVlEooywA&oe=68FCFAC3"]}},{"type":"BODY","text":"Hello {{1}} \ud83d\udc4b\nAapka order successfully deliver ho chuka hai. \ud83d\ude9a\u2728\nKya aapne Nirvasa ka Vaji Amrit Vati lena start kar diya hai? \ud83d\udc8a\nNeeche diye gaye options me se select karke bataye \ud83d\udc47","example":{"body_text":[["Nicolus"]]}},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Yes"},{"type":"QUICK_REPLY","text":"No"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1284099969686703"},{"name":"single_variable_body","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\nWe are sedning {{1}} items.","example":{"body_text":[["five"]]}},{"type":"FOOTER","text":"Sent by xplorebyte"}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1209106791238164"},{"name":"template_1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 1"},{"type":"BODY","text":"This is the Template : 1"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 2"},{"type":"QUICK_REPLY","text":"Show Me Template 3"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2381212765606675"},{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"},{"name":"variable_csv_demo","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Dear  {{1}},\n\nWe are happy to announce that we are going to launch our new product on {{2}}.\n\nRegards,\nLeadsCone","example":{"body_text":[["Nicolaus","Monaday"]]}}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1463763351520294"},{"name":"template_3","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 3"},{"type":"BODY","text":"This is themplate : 3"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1760623375330098"},{"name":"template_2","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 2"},{"type":"BODY","text":"This is teh template 2"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1222093123248950"},{"name":"welcome_menu_minds","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello! Thank you for contacting MindsMiratus.\n\nIf you're a new visitor, we're happy to help you get started. If you're an existing customer, we're here to support you. Please choose from the options below."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Explore Our Services"},{"type":"QUICK_REPLY","text":"View Our Products"},{"type":"QUICK_REPLY","text":"Customer Support"},{"type":"QUICK_REPLY","text":"Contact Sales"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1115530356706526"},{"name":"contact_sales_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We'd love to discuss how we can help your business grow. You can reach our sales team via email at info\u0040mindsmiratus.com or call us at +91-321-123-4321.\n\nWould you like one of our experts to call you back?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Yes, call me back"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"954501560165102"},{"name":"human_takeover_confirmation_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Thank you! We've received your request. One of our experts will get in touch with you shortly.\n\nIs there anything else I can help you with in the meantime?"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1304432401406654"},{"name":"products_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We are proud to offer our powerful and easy-to-use GST Software, designed to simplify your tax compliance, invoicing, and financial management.\n\nWhat would you like to do?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a GST Demo"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2567632853585898"},{"name":"services_menu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We offer a wide range of services to power your business's growth. Please select a category you are interested in:"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Design Services"},{"type":"QUICK_REPLY","text":"Development Services"},{"type":"QUICK_REPLY","text":"Digital & Tele-Marketing"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"738253949023987"},{"name":"support_project_status_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"To check the status of your ongoing project, please provide your registered email address or project ID, and one of our project managers will get back to you with a detailed update shortly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Project Manager"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1599668577490835"},{"name":"support_main_menu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Welcome to the MindsMiratus Support Center. We're here to help you with any questions or issues you may have.\n\nPlease select an option so we can assist you faster."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"GST Software Support"},{"type":"QUICK_REPLY","text":"Check Project Status"},{"type":"QUICK_REPLY","text":"Report Technical Issues"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en","status":"APPROVED","category":"MARKETING","id":"679342281096115"},{"name":"demo","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Demo Template"},{"type":"BODY","text":"Demo Template Message."},{"type":"FOOTER","text":"sent by ExploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/visit"]},{"type":"URL","text":"Shop Now","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/shopnow"]},{"type":"PHONE_NUMBER","text":"Call Us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"757818770430461"},{"name":"dev_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our expert developers build robust and scalable solutions tailored to your business needs. Which area of development interests you?\n\n\ud83d\udcbb Web & Software Dev: Custom applications and software solutions.\n\ud83d\udcf1 Mobile App Dev: Engaging and high-performance apps for iOS and Android.\n\ud83d\uded2 E-commerce Dev: Powerful online stores that drive sales and growth."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Discuss a Project"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3118090155157247"},{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/tutrials"]},{"type":"URL","text":"View Demo","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"},{"name":"build_urltracking","parameter_format":"NAMED","components":[{"type":"BODY","text":"Hello \n\nThis is the test message to check wheather redirecting url is working or not."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/softwaredev"]},{"type":"URL","text":"Explore More","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/moreopt"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"788214393726841"},{"name":"marketing_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We help you reach your target audience and grow your brand effectively. Explore our marketing services:\n\n\ud83d\udcc8 Digital Marketing: SEO, Social Media Marketing, and targeted PPC campaigns.\n\ud83d\udcde Tele-Marketing: IVR systems, Bulk SMS, Voice Calls, and official WhatsApp API solutions."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Get a Marketing Plan"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1683803515627636"},{"name":"design_services_submenu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our creative team delivers stunning and effective designs to make your brand stand out. Which design service would you like to know more about?\n\n\ud83c\udfa8 Website Designing: We build beautiful, responsive, and user-friendly websites.\n\ud83d\udd8c\ufe0f Graphic Designing: We create compelling visuals, logos, and branding materials."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a Design Quote"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3291988187631744"},{"name":"support_gst_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"You've reached support for our GST Software. How can we help?\n\n\ud83d\udd27 Technical Help: For installation issues, errors, or bugs.\n\ud83d\udca1 Feature Questions: To understand how to use a specific feature.\n\ud83d\udcda View FAQs: Get answers to common questions instantly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Support Agent"},{"type":"QUICK_REPLY","text":"View FAQs"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1305308197880244"},{"name":"support_report_issue_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We're sorry to hear you're experiencing an issue.\n\nTo help us resolve it quickly, please tap the button below to connect with our technical support team. Please be ready to provide a brief description of the problem."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Connect to Technical Team"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"755167220845328"},{"name":"about_us_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"MindsMiratus is a leading IT solutions company dedicated to helping businesses grow through innovative and effective digital services. From design to development and marketing, we provide comprehensive solutions to elevate your brand.\n\nWhat would you like to do next?"},{"type":"FOOTER","text":"sent by Mindsmirtus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"},{"type":"QUICK_REPLY","text":"Talk to an Expert"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1971204310331370"},{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"\u26a1\ufe0f Feature Annoucement ! \u26a1\ufe0f\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/\u00257B\u00257BI\u00257D\u00257D{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"View Tutorials","url":"https:\/\/www.youtube.com\/\u00257B\u00257Bi\u00257D\u00257D{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"},{"name":"call_log","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is the checking for call log event."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/seeme"]},{"type":"URL","text":"Call Us","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/callme"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1286058192539680"},{"name":"track_url_after_flow_integ","message_send_ttl_seconds":86400,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BODY","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/vosiatstore"]},{"type":"URL","text":"Visit Demo","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/demo"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1084981273615848"},{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"watch Video","url":"https:\/\/www.youtube.com\/{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"},{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=eJAeQFq4sbYQ7kNvwFpXn8W&_nc_oc=AdlgBuy__gBLfPG4qOcNpzI6X3KF4Tb4oRFGDEgRhrr8VicCxdiD-S5h5XcqMdUYlP-IjhOpU7eelCekwHjyfMWO&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=28p8s6k719jQKbgOA-05aQ&oh=01_Q5Aa2gE-0LdOmcemYFBLw6ZlaB9bjhyEWW0cfpUF0M3Rbsu-Uw&oe=68FCF2CF"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! \ud83c\udf89\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15\u0025 discount** on your purchase. Don't just follow the trend\u2014set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https:\/\/xplorebytesolutions.com\/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"},{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https:\/\/www.qwexample.com\/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"}],"paging":{"cursors":{"before":"QVFIU2ZADb0ZAKeHRXTkFMeUQ2NjZABRVFyWTZABamN6d3doUW5hQTBlQ0RieW42TDBWdnZArNmh4MEJpVFBsWDRiQmZAEajFwNWl1ZAzNZAQlJGbUhmZA0NXOUxIWkR3","after":"QVFIU1hSaTdZATm1tSjZAiNnlaQ1RubTFQZAjlKUUhnU1l2Y3hudWE0NXY0U3d0ZAE8wSV9NeWplbDlCS1FoRHBPN2NDOW1GZA3NLRHk4b3JBVU1TeklYd0JodU93"}}}
2025-09-26 00:06:55.318 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType155`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:06:55.320 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 747.2116ms
2025-09-26 00:06:55.322 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-26 00:06:55.323 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 759.1201ms
2025-09-26 00:07:02.591 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-26 00:07:02.594 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:07:02.595 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 3.6346ms
2025-09-26 00:07:02.598 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-26 00:07:02.601 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:07:02.602 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-26 00:07:02.603 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-09-26 00:07:02.607 +05:30 [INF] 🔎 Fetching templates for BusinessId "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56"
2025-09-26 00:07:02.609 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:07:02.614 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 00:07:02.615 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 00:07:03.353 +05:30 [INF] Received HTTP response headers after 737.2115ms - 200
2025-09-26 00:07:03.355 +05:30 [INF] End processing HTTP request after 741.1813ms - 200
2025-09-26 00:07:03.399 +05:30 [INF] 📦 Meta Template API (Biz "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56") payload:
{"data":[{"name":"pdf_template","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"DOCUMENT","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534415257_508230149051927_6330429317144744326_n.pdf?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=b2YWNnPv7YoQ7kNvwGBOF9H&_nc_oc=AdnM42tWm_8qqw_k0xD7FhroXxYvcubATQXPHvhhIZLPw_Ca_0jiGdHeXUtBTpHKHS7PCjdC4iXn5IvJmc1Yrz_l&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=gILlvxaSHMe3qLFN5FCdPg&oh=01_Q5Aa2gEMymgNqT-sOhXGmccACVGPcMZHzzdEylFV0UvW9OBfsA&oe=68FD04F5"]}},{"type":"BODY","text":"Hello {{1}},\n\nPlease find your Invoice.","example":{"body_text":[["Usernmok"]]}},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Recieved"},{"type":"QUICK_REPLY","text":"No Received"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"508230145718594"},{"name":"welcome_video","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"VIDEO","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534417141_1284099973020036_5812680847202991712_n.mp4?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=zsyoQsHKvQoQ7kNvwHIJtvF&_nc_oc=AdlV0sbKmrKDFtfOqartFnb3DwICFJYiPMP2fzM_-1mz1pI4Ds5bRLhMXp-s4G1wiMKoGlAbweW1acnIp3V6u6FF&_nc_zt=28&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=gILlvxaSHMe3qLFN5FCdPg&oh=01_Q5Aa2gGt_GG_HIxJtnrLTg-SHMDEcjnxFDDYJlKXcyx-hxNUDQ&oe=68FCFAC3"]}},{"type":"BODY","text":"Hello {{1}} \ud83d\udc4b\nAapka order successfully deliver ho chuka hai. \ud83d\ude9a\u2728\nKya aapne Nirvasa ka Vaji Amrit Vati lena start kar diya hai? \ud83d\udc8a\nNeeche diye gaye options me se select karke bataye \ud83d\udc47","example":{"body_text":[["Nicolus"]]}},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Yes"},{"type":"QUICK_REPLY","text":"No"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1284099969686703"},{"name":"single_variable_body","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\nWe are sedning {{1}} items.","example":{"body_text":[["five"]]}},{"type":"FOOTER","text":"Sent by xplorebyte"}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1209106791238164"},{"name":"template_1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 1"},{"type":"BODY","text":"This is the Template : 1"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 2"},{"type":"QUICK_REPLY","text":"Show Me Template 3"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2381212765606675"},{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"},{"name":"variable_csv_demo","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Dear  {{1}},\n\nWe are happy to announce that we are going to launch our new product on {{2}}.\n\nRegards,\nLeadsCone","example":{"body_text":[["Nicolaus","Monaday"]]}}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1463763351520294"},{"name":"template_3","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 3"},{"type":"BODY","text":"This is themplate : 3"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1760623375330098"},{"name":"template_2","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 2"},{"type":"BODY","text":"This is teh template 2"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1222093123248950"},{"name":"welcome_menu_minds","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello! Thank you for contacting MindsMiratus.\n\nIf you're a new visitor, we're happy to help you get started. If you're an existing customer, we're here to support you. Please choose from the options below."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Explore Our Services"},{"type":"QUICK_REPLY","text":"View Our Products"},{"type":"QUICK_REPLY","text":"Customer Support"},{"type":"QUICK_REPLY","text":"Contact Sales"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1115530356706526"},{"name":"contact_sales_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We'd love to discuss how we can help your business grow. You can reach our sales team via email at info\u0040mindsmiratus.com or call us at +91-321-123-4321.\n\nWould you like one of our experts to call you back?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Yes, call me back"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"954501560165102"},{"name":"human_takeover_confirmation_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Thank you! We've received your request. One of our experts will get in touch with you shortly.\n\nIs there anything else I can help you with in the meantime?"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1304432401406654"},{"name":"products_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We are proud to offer our powerful and easy-to-use GST Software, designed to simplify your tax compliance, invoicing, and financial management.\n\nWhat would you like to do?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a GST Demo"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2567632853585898"},{"name":"services_menu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We offer a wide range of services to power your business's growth. Please select a category you are interested in:"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Design Services"},{"type":"QUICK_REPLY","text":"Development Services"},{"type":"QUICK_REPLY","text":"Digital & Tele-Marketing"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"738253949023987"},{"name":"support_project_status_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"To check the status of your ongoing project, please provide your registered email address or project ID, and one of our project managers will get back to you with a detailed update shortly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Project Manager"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1599668577490835"},{"name":"support_main_menu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Welcome to the MindsMiratus Support Center. We're here to help you with any questions or issues you may have.\n\nPlease select an option so we can assist you faster."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"GST Software Support"},{"type":"QUICK_REPLY","text":"Check Project Status"},{"type":"QUICK_REPLY","text":"Report Technical Issues"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en","status":"APPROVED","category":"MARKETING","id":"679342281096115"},{"name":"demo","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Demo Template"},{"type":"BODY","text":"Demo Template Message."},{"type":"FOOTER","text":"sent by ExploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/visit"]},{"type":"URL","text":"Shop Now","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/shopnow"]},{"type":"PHONE_NUMBER","text":"Call Us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"757818770430461"},{"name":"dev_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our expert developers build robust and scalable solutions tailored to your business needs. Which area of development interests you?\n\n\ud83d\udcbb Web & Software Dev: Custom applications and software solutions.\n\ud83d\udcf1 Mobile App Dev: Engaging and high-performance apps for iOS and Android.\n\ud83d\uded2 E-commerce Dev: Powerful online stores that drive sales and growth."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Discuss a Project"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3118090155157247"},{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/tutrials"]},{"type":"URL","text":"View Demo","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"},{"name":"build_urltracking","parameter_format":"NAMED","components":[{"type":"BODY","text":"Hello \n\nThis is the test message to check wheather redirecting url is working or not."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/softwaredev"]},{"type":"URL","text":"Explore More","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/moreopt"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"788214393726841"},{"name":"marketing_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We help you reach your target audience and grow your brand effectively. Explore our marketing services:\n\n\ud83d\udcc8 Digital Marketing: SEO, Social Media Marketing, and targeted PPC campaigns.\n\ud83d\udcde Tele-Marketing: IVR systems, Bulk SMS, Voice Calls, and official WhatsApp API solutions."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Get a Marketing Plan"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1683803515627636"},{"name":"design_services_submenu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our creative team delivers stunning and effective designs to make your brand stand out. Which design service would you like to know more about?\n\n\ud83c\udfa8 Website Designing: We build beautiful, responsive, and user-friendly websites.\n\ud83d\udd8c\ufe0f Graphic Designing: We create compelling visuals, logos, and branding materials."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a Design Quote"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3291988187631744"},{"name":"support_gst_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"You've reached support for our GST Software. How can we help?\n\n\ud83d\udd27 Technical Help: For installation issues, errors, or bugs.\n\ud83d\udca1 Feature Questions: To understand how to use a specific feature.\n\ud83d\udcda View FAQs: Get answers to common questions instantly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Support Agent"},{"type":"QUICK_REPLY","text":"View FAQs"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1305308197880244"},{"name":"support_report_issue_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We're sorry to hear you're experiencing an issue.\n\nTo help us resolve it quickly, please tap the button below to connect with our technical support team. Please be ready to provide a brief description of the problem."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Connect to Technical Team"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"755167220845328"},{"name":"about_us_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"MindsMiratus is a leading IT solutions company dedicated to helping businesses grow through innovative and effective digital services. From design to development and marketing, we provide comprehensive solutions to elevate your brand.\n\nWhat would you like to do next?"},{"type":"FOOTER","text":"sent by Mindsmirtus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"},{"type":"QUICK_REPLY","text":"Talk to an Expert"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1971204310331370"},{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"\u26a1\ufe0f Feature Annoucement ! \u26a1\ufe0f\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/\u00257B\u00257BI\u00257D\u00257D{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"View Tutorials","url":"https:\/\/www.youtube.com\/\u00257B\u00257Bi\u00257D\u00257D{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"},{"name":"call_log","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is the checking for call log event."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/seeme"]},{"type":"URL","text":"Call Us","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/callme"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1286058192539680"},{"name":"track_url_after_flow_integ","message_send_ttl_seconds":86400,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BODY","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/vosiatstore"]},{"type":"URL","text":"Visit Demo","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/demo"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1084981273615848"},{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"watch Video","url":"https:\/\/www.youtube.com\/{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"},{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=eJAeQFq4sbYQ7kNvwFpXn8W&_nc_oc=AdlgBuy__gBLfPG4qOcNpzI6X3KF4Tb4oRFGDEgRhrr8VicCxdiD-S5h5XcqMdUYlP-IjhOpU7eelCekwHjyfMWO&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=gILlvxaSHMe3qLFN5FCdPg&oh=01_Q5Aa2gEHbUsJazCSSTqOdYs6qqEmIxy-ycWtYbO5lKg_UPlw6Q&oe=68FCF2CF"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! \ud83c\udf89\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15\u0025 discount** on your purchase. Don't just follow the trend\u2014set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https:\/\/xplorebytesolutions.com\/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"},{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https:\/\/www.qwexample.com\/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"}],"paging":{"cursors":{"before":"QVFIU2ZADb0ZAKeHRXTkFMeUQ2NjZABRVFyWTZABamN6d3doUW5hQTBlQ0RieW42TDBWdnZArNmh4MEJpVFBsWDRiQmZAEajFwNWl1ZAzNZAQlJGbUhmZA0NXOUxIWkR3","after":"QVFIU1hSaTdZATm1tSjZAiNnlaQ1RubTFQZAjlKUUhnU1l2Y3hudWE0NXY0U3d0ZAE8wSV9NeWplbDlCS1FoRHBPN2NDOW1GZA3NLRHk4b3JBVU1TeklYd0JodU93"}}}
2025-09-26 00:07:03.405 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType155`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:07:03.407 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 800.6501ms
2025-09-26 00:07:03.408 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-26 00:07:03.409 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 811.2698ms
2025-09-26 00:07:03.481 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:37:03.4799885+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:07:13.491 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:37:13.4892741+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:07:23.498 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:37:23.4961929+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:07:33.509 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:37:33.5059329+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:07:43.514 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:37:43.5130022+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:07:53.531 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:37:53.5298578+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:07:59.279 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/save-visual - null null
2025-09-26 00:07:59.282 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:07:59.283 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/save-visual - 204 null null 3.8184ms
2025-09-26 00:07:59.286 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/cta-flow/save-visual - application/json 1427
2025-09-26 00:07:59.290 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:07:59.291 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.SaveVisualFlow (xbytechat.api)'
2025-09-26 00:07:59.294 +05:30 [INF] Route matched with {action = "SaveVisualFlow", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SaveVisualFlow(xbytechat.api.Features.CTAFlowBuilder.DTOs.SaveVisualFlowDto) on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-09-26 00:07:59.322 +05:30 [INF] 📦 Saving CTA Flow: Untitled Flow by Test Company
2025-09-26 00:07:59.330 +05:30 [INF] 🧠 SaveVisualFlow started | FlowName: Untitled Flow | BusinessId: "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56"
2025-09-26 00:07:59.335 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_FlowName_0='Untitled Flow', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
FROM "CTAFlowConfigs" AS c
WHERE c."FlowName" = @__dto_FlowName_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:07:59.339 +05:30 [INF] ✅ New FlowConfig created with ID: "2a6a8a7f-75e2-4568-bcbe-82c07d8a022c"
2025-09-26 00:07:59.355 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='2a6a8a7f-75e2-4568-bcbe-82c07d8a022c', @p1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p2='2025-09-25T18:37:59.3390916Z' (DbType = DateTime), @p3='Test Company', @p4='Untitled Flow' (Nullable = false), @p5='True', @p6='True', @p7='2025-09-25T18:37:59.3391534Z' (Nullable = true) (DbType = DateTime), @p8='872c5b5a-239b-4ba3-91cf-bdf22ddff3a1', @p9='2a6a8a7f-75e2-4568-bcbe-82c07d8a022c', @p10='398' (Nullable = true), @p11='20' (Nullable = true), @p12='1' (Nullable = true), @p13=NULL, @p14=NULL, @p15='1', @p16='variable_csv_demo' (Nullable = false), @p17='text_template', @p18='No' (Nullable = false), @p19='quick_reply' (Nullable = false), @p20='True', @p21='f8dedfb1-13a1-43fb-b2e8-d3104547e6a2', @p22='2a6a8a7f-75e2-4568-bcbe-82c07d8a022c', @p23='20' (Nullable = true), @p24='40.5' (Nullable = true), @p25=NULL (DbType = Int32), @p26=NULL, @p27=NULL, @p28='0', @p29='welcome_video' (Nullable = false), @p30='text_template', @p31='Yes' (Nullable = false), @p32='cta' (Nullable = false), @p33='False', @p34='906a679e-5a5d-4f4a-828e-2b5302fff64f', @p35='0', @p36='quick_reply' (Nullable = false), @p37='Yes' (Nullable = false), @p38='QUICK_REPLY' (Nullable = false), @p39='' (Nullable = false), @p40='f8dedfb1-13a1-43fb-b2e8-d3104547e6a2', @p41='872c5b5a-239b-4ba3-91cf-bdf22ddff3a1' (Nullable = true), @p42='bc13e66d-eaef-485c-aa4f-0d8534fb8c77', @p43='1', @p44='quick_reply' (Nullable = false), @p45='No' (Nullable = false), @p46='QUICK_REPLY' (Nullable = false), @p47='' (Nullable = false), @p48='f8dedfb1-13a1-43fb-b2e8-d3104547e6a2', @p49='872c5b5a-239b-4ba3-91cf-bdf22ddff3a1' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CTAFlowConfigs" ("Id", "BusinessId", "CreatedAt", "CreatedBy", "FlowName", "IsActive", "IsPublished", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO "CTAFlowSteps" ("Id", "CTAFlowConfigId", "PositionX", "PositionY", "ProfileNameSlot", "RequiredSource", "RequiredTag", "StepOrder", "TemplateToSend", "TemplateType", "TriggerButtonText", "TriggerButtonType", "UseProfileName")
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);
INSERT INTO "CTAFlowSteps" ("Id", "CTAFlowConfigId", "PositionX", "PositionY", "ProfileNameSlot", "RequiredSource", "RequiredTag", "StepOrder", "TemplateToSend", "TemplateType", "TriggerButtonText", "TriggerButtonType", "UseProfileName")
VALUES (@p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33);
INSERT INTO "FlowButtonLinks" ("Id", "ButtonIndex", "ButtonSubType", "ButtonText", "ButtonType", "ButtonValue", "CTAFlowStepId", "NextStepId")
VALUES (@p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41);
INSERT INTO "FlowButtonLinks" ("Id", "ButtonIndex", "ButtonSubType", "ButtonText", "ButtonType", "ButtonValue", "CTAFlowStepId", "NextStepId")
VALUES (@p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49);
2025-09-26 00:07:59.360 +05:30 [INF] ✅ Flow 'Untitled Flow' saved | Steps: 2 | Links: 4
2025-09-26 00:07:59.362 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:07:59.364 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.SaveVisualFlow (xbytechat.api) in 68.4514ms
2025-09-26 00:07:59.365 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.SaveVisualFlow (xbytechat.api)'
2025-09-26 00:07:59.366 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/cta-flow/save-visual - 200 null application/json; charset=utf-8 79.4328ms
2025-09-26 00:08:03.547 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:38:03.5460900+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:08:13.559 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:38:13.5574521+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:08:19.587 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/save-visual - null null
2025-09-26 00:08:19.590 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:08:19.591 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/save-visual - 204 null null 3.8049ms
2025-09-26 00:08:19.594 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/cta-flow/save-visual - application/json 1035
2025-09-26 00:08:19.596 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:08:19.597 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.SaveVisualFlow (xbytechat.api)'
2025-09-26 00:08:19.598 +05:30 [INF] Route matched with {action = "SaveVisualFlow", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SaveVisualFlow(xbytechat.api.Features.CTAFlowBuilder.DTOs.SaveVisualFlowDto) on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-09-26 00:08:19.600 +05:30 [INF] 📦 Saving CTA Flow: F2 by Test Company
2025-09-26 00:08:19.601 +05:30 [INF] 🧠 SaveVisualFlow started | FlowName: F2 | BusinessId: "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56"
2025-09-26 00:08:19.604 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_FlowName_0='F2', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
FROM "CTAFlowConfigs" AS c
WHERE c."FlowName" = @__dto_FlowName_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:08:19.607 +05:30 [INF] ✅ New FlowConfig created with ID: "0308d90a-ab0f-47d5-9bf0-c0d9993ad280"
2025-09-26 00:08:19.609 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='0308d90a-ab0f-47d5-9bf0-c0d9993ad280', @p1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p2='2025-09-25T18:38:19.6071476Z' (DbType = DateTime), @p3='Test Company', @p4='F2' (Nullable = false), @p5='True', @p6='True', @p7='2025-09-25T18:38:19.6071477Z' (Nullable = true) (DbType = DateTime), @p8='288c8170-7fc5-4bf2-837d-4ab67f3a3482', @p9='0308d90a-ab0f-47d5-9bf0-c0d9993ad280', @p10='20' (Nullable = true), @p11='40.5' (Nullable = true), @p12=NULL (DbType = Int32), @p13=NULL, @p14=NULL, @p15='0', @p16='welcome_video' (Nullable = false), @p17='text_template', @p18='Yes' (Nullable = false), @p19='cta' (Nullable = false), @p20='False'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CTAFlowConfigs" ("Id", "BusinessId", "CreatedAt", "CreatedBy", "FlowName", "IsActive", "IsPublished", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO "CTAFlowSteps" ("Id", "CTAFlowConfigId", "PositionX", "PositionY", "ProfileNameSlot", "RequiredSource", "RequiredTag", "StepOrder", "TemplateToSend", "TemplateType", "TriggerButtonText", "TriggerButtonType", "UseProfileName")
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);
2025-09-26 00:08:19.614 +05:30 [INF] ✅ Flow 'F2' saved | Steps: 1 | Links: 0
2025-09-26 00:08:19.616 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:08:19.617 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.SaveVisualFlow (xbytechat.api) in 17.1118ms
2025-09-26 00:08:19.618 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.SaveVisualFlow (xbytechat.api)'
2025-09-26 00:08:19.619 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/cta-flow/save-visual - 200 null application/json; charset=utf-8 25.3982ms
2025-09-26 00:08:23.563 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:38:23.5621501+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:08:25.571 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 00:08:25.571 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 00:08:25.574 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:08:25.576 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:08:25.577 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 204 null null 5.5505ms
2025-09-26 00:08:25.577 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 204 null null 5.7504ms
2025-09-26 00:08:25.582 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 00:08:25.583 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 00:08:25.585 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:08:25.587 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:08:25.588 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 00:08:25.589 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 00:08:25.589 +05:30 [INF] Route matched with {action = "GetSenders", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSenders(System.Guid) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-26 00:08:25.590 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 00:08:25.595 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-26 00:08:25.595 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-26 00:08:25.606 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType155`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType241`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:08:25.607 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.WhatsAppSettings.DTOs.WhatsAppSenderDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:08:25.609 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 15.61ms
2025-09-26 00:08:25.610 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api) in 17.8722ms
2025-09-26 00:08:25.610 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 00:08:25.611 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 00:08:25.612 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 200 null application/json; charset=utf-8 29.646ms
2025-09-26 00:08:25.613 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 200 null application/json; charset=utf-8 30.7368ms
2025-09-26 00:08:31.422 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/welcome_video - null null
2025-09-26 00:08:31.425 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:08:31.425 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/welcome_video - 204 null null 3.6351ms
2025-09-26 00:08:31.428 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/welcome_video - null null
2025-09-26 00:08:31.430 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:08:31.431 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-26 00:08:31.434 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 00:08:31.446 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__name_1='welcome_video'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-09-26 00:08:31.453 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='welcome_video', @__language_2='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Language" = @__language_2
ORDER BY w."Language" = @__language_2 DESC
LIMIT 1
2025-09-26 00:08:31.467 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType242`10[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:08:31.470 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 34.6127ms
2025-09-26 00:08:31.472 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-26 00:08:31.472 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/welcome_video - 200 null application/json; charset=utf-8 44.2721ms
2025-09-26 00:08:33.470 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/list/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?onlyPublished=true - null null
2025-09-26 00:08:33.473 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:08:33.474 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/list/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?onlyPublished=true - 204 null null 4.2508ms
2025-09-26 00:08:33.478 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/list/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?onlyPublished=true - null null
2025-09-26 00:08:33.481 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:08:33.482 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAvailableFlows (xbytechat.api)'
2025-09-26 00:08:33.486 +05:30 [INF] Route matched with {action = "GetAvailableFlows", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAvailableFlows(System.Guid, Boolean) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:08:33.501 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."FlowName", c."IsPublished"
FROM "CTAFlowConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive" AND c."IsPublished"
ORDER BY c."UpdatedAt" DESC
2025-09-26 00:08:33.505 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType53`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.FlowListItemDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:08:33.508 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAvailableFlows (xbytechat.api) in 20.3374ms
2025-09-26 00:08:33.509 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAvailableFlows (xbytechat.api)'
2025-09-26 00:08:33.510 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/list/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?onlyPublished=true - 200 null application/json; charset=utf-8 32.5503ms
2025-09-26 00:08:33.574 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:38:33.5729877+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:08:43.581 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:38:43.5796203+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:08:53.592 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:38:53.5908086+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:09:03.602 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:39:03.6002577+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:09:13.617 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:39:13.6148068+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:09:23.621 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:39:23.6196921+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:09:29.216 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-09-26 00:09:29.218 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:09:29.219 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 3.33ms
2025-09-26 00:09:29.222 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 864
2025-09-26 00:09:29.224 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:09:29.225 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-26 00:09:29.228 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:09:29.252 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__phoneNumberId_1='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."PhoneNumberId" = @__phoneNumberId_1 AND w."IsActive"
LIMIT 1
2025-09-26 00:09:29.264 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-26 00:09:29.269 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__incomingFlowId_Value_0='0308d90a-ab0f-47d5-9bf0-c0d9993ad280', @__8__locals1_businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", t0."Id", t0."CTAFlowConfigId", t0."PositionX", t0."PositionY", t0."ProfileNameSlot", t0."RequiredSource", t0."RequiredTag", t0."StepOrder", t0."TemplateToSend", t0."TemplateType", t0."TriggerButtonText", t0."TriggerButtonType", t0."UseProfileName", t0."Id0", t0."ButtonIndex", t0."ButtonSubType", t0."ButtonText", t0."ButtonType", t0."ButtonValue", t0."CTAFlowStepId", t0."NextStepId"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."Id" = @__incomingFlowId_Value_0 AND c."BusinessId" = @__8__locals1_businessId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."CTAFlowConfigId", c0."PositionX", c0."PositionY", c0."ProfileNameSlot", c0."RequiredSource", c0."RequiredTag", c0."StepOrder", c0."TemplateToSend", c0."TemplateType", c0."TriggerButtonText", c0."TriggerButtonType", c0."UseProfileName", f."Id" AS "Id0", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
    FROM "CTAFlowSteps" AS c0
    LEFT JOIN "FlowButtonLinks" AS f ON c0."Id" = f."CTAFlowStepId"
) AS t0 ON t."Id" = t0."CTAFlowConfigId"
ORDER BY t."Id", t0."Id"
2025-09-26 00:09:29.272 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:09:29.274 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:09:29.275 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:09:33.513 +05:30 [INF] Received HTTP response headers after 4236.6997ms - 200
2025-09-26 00:09:33.514 +05:30 [INF] End processing HTTP request after 4239.7071ms - 200
2025-09-26 00:09:33.631 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:39:33.6297298+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:09:33.766 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='welcome_video', @__provider_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:09:33.786 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p0='b0b28efd-8dfc-499b-af90-c7c1a14185f9', @p1=NULL (DbType = Guid), @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3='0308d90a-ab0f-47d5-9bf0-c0d9993ad280' (Nullable = true), @p4=NULL (DbType = Guid), @p5='video', @p6='2025-09-25T18:39:33.7626753Z' (DbType = DateTime), @p7='system', @p8=NULL (DbType = Guid), @p9=NULL (DbType = DateTime), @p10=NULL, @p11=NULL, @p12=NULL, @p13=NULL, @p14=NULL, @p15='False', @p16='Hello {{1}} 👋
Aapka order successfully deliver ho chuka hai. 🚚✨
Kya aapne Nirvasa ka Vaji Amrit Vati lena start kar diya hai? 💊
Neeche diye gaye options me se select karke bataye 👇', @p17='Hello {{1}} 👋
Aapka order successfully deliver ho chuka hai. 🚚✨
Kya aapne Nirvasa ka Vaji Amrit Vati lena start kar diya hai? 💊
Neeche diye gaye options me se select karke bataye 👇' (Nullable = false), @p18='CF1' (Nullable = false), @p19='673199269218077', @p20='META_CLOUD', @p21=NULL (DbType = DateTime), @p22=NULL (DbType = Guid), @p23='Draft' (Nullable = false), @p24='welcome_video', @p25='[]', @p26='{"Provider":"meta_cloud","TemplateId":"1284099969686703","TemplateName":"welcome_video","Language":"en_US","HasHeaderMedia":true,"HeaderType":"VIDEO","BodyPlaceholders":[{"Index":1,"Label":null,"Example":null}],"Buttons":[{"Type":"QUICK_REPLY","Text":"Yes","Value":"","Order":0},{"Type":"QUICK_REPLY","Text":"No","Value":"","Order":1}]}' (DbType = Object), @p27='2025-09-25T18:39:33.7627159Z' (DbType = DateTime), @p28='https://whatsappdata.s3.ap-south-1.amazonaws.com/userMedia/dab49080d80c724aad5ebf158d63df41/vde_templ.mp4', @p29='2525190c-eba5-459d-a026-85294372487b', @p30='b0b28efd-8dfc-499b-af90-c7c1a14185f9', @p31='True', @p32='1', @p33='Yes' (Nullable = false), @p34='QUICK_REPLY' (Nullable = false), @p35='' (Nullable = false), @p36='71e1a6d6-3663-4b28-8f0a-822adf32cfe1', @p37='b0b28efd-8dfc-499b-af90-c7c1a14185f9', @p38='True', @p39='2', @p40='No' (Nullable = false), @p41='QUICK_REPLY' (Nullable = false), @p42='' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "AudienceId", "BusinessId", "CTAFlowConfigId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "DocumentUrl", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "PhoneNumberId", "Provider", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "TemplateSchemaSnapshot", "UpdatedAt", "VideoUrl")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41, @p42);
2025-09-26 00:09:33.791 +05:30 [INF] ✅ Campaign 'CF1' created | Type:video | Header:video | FlowId:"0308d90a-ab0f-47d5-9bf0-c0d9993ad280" | EntryTemplate:welcome_video | Sender:META_CLOUD/673199269218077 | Recipients:0
2025-09-26 00:09:33.794 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType64`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:09:33.796 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 4567.0102ms
2025-09-26 00:09:33.798 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-26 00:09:33.798 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 4576.6449ms
2025-09-26 00:09:33.820 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:09:33.824 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/b0b28efd-8dfc-499b-af90-c7c1a14185f9/csv-sample/schema - null null
2025-09-26 00:09:33.824 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/b0b28efd-8dfc-499b-af90-c7c1a14185f9 - null null
2025-09-26 00:09:33.824 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:09:33.824 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:09:33.825 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-26 00:09:33.835 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:09:33.833 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:09:33.846 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/b0b28efd-8dfc-499b-af90-c7c1a14185f9 - 204 null null 22.1722ms
2025-09-26 00:09:33.837 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:09:33.838 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 18.7264ms
2025-09-26 00:09:33.840 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:09:33.848 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/b0b28efd-8dfc-499b-af90-c7c1a14185f9/csv-sample/schema - 204 null null 24.0611ms
2025-09-26 00:09:33.850 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/b0b28efd-8dfc-499b-af90-c7c1a14185f9 - null null
2025-09-26 00:09:33.851 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 26.6082ms
2025-09-26 00:09:33.853 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:09:33.854 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 29.2707ms
2025-09-26 00:09:33.857 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/b0b28efd-8dfc-499b-af90-c7c1a14185f9/csv-sample/schema - null null
2025-09-26 00:09:33.859 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:09:33.864 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:09:33.866 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-26 00:09:33.869 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-26 00:09:33.869 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:09:33.869 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:09:33.871 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:09:33.874 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:09:33.874 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-26 00:09:33.875 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:09:33.875 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-26 00:09:33.879 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-26 00:09:33.880 +05:30 [INF] Route matched with {action = "GetSchema", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSchema(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 00:09:33.884 +05:30 [INF] GetPagedContactsAsync: businessId="6b5cea67-e8e9-42f7-8bde-51a9dbc02d56", tab=all, page=1, pageSize=1000
2025-09-26 00:09:33.887 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-26 00:09:33.891 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:09:33.894 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 14.8491ms
2025-09-26 00:09:33.896 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:09:33.896 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:09:33.898 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-26 00:09:33.903 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:09:33.898 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 44.1692ms
2025-09-26 00:09:33.913 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:09:33.919 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-26 00:09:33.923 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-26 00:09:33.927 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:09:33.928 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 7.7038ms
2025-09-26 00:09:33.929 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:09:33.930 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 34.477ms
2025-09-26 00:09:33.938 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."ProfileName", t."ProfileNameUpdatedAt", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-26 00:09:33.944 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:09:33.950 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 68.7834ms
2025-09-26 00:09:33.951 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-26 00:09:33.952 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 85.6532ms
2025-09-26 00:09:33.970 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='b0b28efd-8dfc-499b-af90-c7c1a14185f9', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 00:09:33.974 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='welcome_video', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:09:33.990 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='welcome_video'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:09:33.994 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType66`3[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType67`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:09:33.999 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api) in 116.9986ms
2025-09-26 00:09:34.001 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:09:34.002 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/b0b28efd-8dfc-499b-af90-c7c1a14185f9/csv-sample/schema - 200 null application/json; charset=utf-8 145.2926ms
2025-09-26 00:09:34.006 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='b0b28efd-8dfc-499b-af90-c7c1a14185f9', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AudienceId", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."DocumentUrl", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."TemplateSchemaSnapshot", t."UpdatedAt", t."VideoUrl", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", t."Id1", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value", t."BusinessId1", t."CreatedAt1", t."CreatedBy0", t."FlowName", t."IsActive0", t."IsPublished", t."UpdatedAt1"
FROM (
    SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0", c1."Id" AS "Id1", c1."BusinessId" AS "BusinessId1", c1."CreatedAt" AS "CreatedAt1", c1."CreatedBy" AS "CreatedBy0", c1."FlowName", c1."IsActive" AS "IsActive0", c1."IsPublished", c1."UpdatedAt" AS "UpdatedAt1"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    LEFT JOIN "CTAFlowConfigs" AS c1 ON c."CTAFlowConfigId" = c1."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t."Id0", t."Id1"
2025-09-26 00:09:34.016 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-09-26 00:09:34.021 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 143.1807ms
2025-09-26 00:09:34.022 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-26 00:09:34.023 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/b0b28efd-8dfc-499b-af90-c7c1a14185f9 - 200 null application/json; charset=utf-8 172.808ms
2025-09-26 00:09:34.026 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/b0b28efd-8dfc-499b-af90-c7c1a14185f9/csv-sample/schema - null null
2025-09-26 00:09:34.028 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:09:34.029 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:09:34.030 +05:30 [INF] Route matched with {action = "GetSchema", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSchema(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 00:09:34.034 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='b0b28efd-8dfc-499b-af90-c7c1a14185f9', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 00:09:34.038 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='welcome_video', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:09:34.043 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='welcome_video'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:09:34.046 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType66`3[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType67`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:09:34.048 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api) in 15.8721ms
2025-09-26 00:09:34.049 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:09:34.050 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/b0b28efd-8dfc-499b-af90-c7c1a14185f9/csv-sample/schema - 200 null application/json; charset=utf-8 23.7859ms
2025-09-26 00:09:39.578 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch - null null
2025-09-26 00:09:39.580 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:09:39.581 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch - 204 null null 3.1406ms
2025-09-26 00:09:39.585 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/csv/batch - multipart/form-data; boundary=----WebKitFormBoundarycsA3wBNvAbMuPebt 239
2025-09-26 00:09:39.587 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:09:39.589 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api)'
2025-09-26 00:09:39.595 +05:30 [INF] Route matched with {action = "Upload", controller = "CsvBatch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Upload(xbytechat.api.Features.CampaignModule.DTOs.Requests.CsvBatchUploadForm, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController (xbytechat.api).
2025-09-26 00:09:39.641 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='832766fc-a9fc-4be8-aa26-afd894a3ea10', @p1=NULL (DbType = Guid), @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3=NULL, @p4='2025-09-25T18:39:39.6160679Z' (DbType = DateTime), @p5=NULL (DbType = Guid), @p6=NULL, @p7='csv_two_parameter.csv', @p8=NULL (DbType = Object), @p9='0', @p10='0', @p11='ingesting' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CsvBatches" ("Id", "AudienceId", "BusinessId", "Checksum", "CreatedAt", "CreatedByUserId", "ErrorMessage", "FileName", "HeadersJson", "RowCount", "SkippedCount", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-09-26 00:09:39.655 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p1='832766fc-a9fc-4be8-aa26-afd894a3ea10', @p0='["phone","parameter1"]' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CsvBatches" SET "HeadersJson" = @p0
WHERE "Id" = @p1;
2025-09-26 00:09:39.675 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='7aa249fb-4568-4273-a90d-2ad5b34bcfda', @p1='832766fc-a9fc-4be8-aa26-afd894a3ea10', @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3='2025-09-25T18:39:39.6575446Z' (DbType = DateTime), @p4=NULL, @p5=NULL, @p6='0', @p7='{"phone":"89740 05240","parameter1":"Robert Nicosta"}' (Nullable = false) (DbType = Object), @p8=NULL], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CsvRows" ("Id", "BatchId", "BusinessId", "CreatedAt", "PhoneE164", "PhoneRaw", "RowIndex", "RowJson", "ValidationError")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-09-26 00:09:39.678 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='832766fc-a9fc-4be8-aa26-afd894a3ea10', @p0='1', @p1='ready' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CsvBatches" SET "RowCount" = @p0, "Status" = @p1
WHERE "Id" = @p2;
2025-09-26 00:09:39.680 +05:30 [INF] CsvBatch "832766fc-a9fc-4be8-aa26-afd894a3ea10" ingested: 1 rows; headers=2
2025-09-26 00:09:39.682 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType70`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.CampaignModule.DTOs.CsvBatchUploadResultDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:09:39.685 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api) in 88.5444ms
2025-09-26 00:09:39.686 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api)'
2025-09-26 00:09:39.687 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/csv/batch - 200 null application/json; charset=utf-8 102.2518ms
2025-09-26 00:09:39.691 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch/832766fc-a9fc-4be8-aa26-afd894a3ea10/sample?take=10 - null null
2025-09-26 00:09:39.693 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:09:39.693 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch/832766fc-a9fc-4be8-aa26-afd894a3ea10/sample?take=10 - 204 null null 2.8952ms
2025-09-26 00:09:39.696 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/csv/batch/832766fc-a9fc-4be8-aa26-afd894a3ea10/sample?take=10 - null null
2025-09-26 00:09:39.698 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:09:39.699 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api)'
2025-09-26 00:09:39.702 +05:30 [INF] Route matched with {action = "Sample", controller = "CsvBatch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sample(System.Guid, Int32, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController (xbytechat.api).
2025-09-26 00:09:39.711 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__batchId_0='832766fc-a9fc-4be8-aa26-afd894a3ea10', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."HeadersJson", c."RowCount"
FROM "CsvBatches" AS c
WHERE c."Id" = @__batchId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:09:39.724 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__batchId_1='832766fc-a9fc-4be8-aa26-afd894a3ea10', @__p_2='10'], CommandType='"Text"', CommandTimeout='30']
SELECT c."RowIndex", c."Id", c."BatchId", c."BusinessId", c."CreatedAt", c."PhoneE164", c."PhoneRaw", c."RowJson", c."ValidationError"
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__batchId_1
ORDER BY c."RowIndex"
LIMIT @__p_2
2025-09-26 00:09:39.728 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType70`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IReadOnlyList`1[[xbytechat.api.Features.CampaignModule.DTOs.CsvRowSampleDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:09:39.731 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api) in 27.5365ms
2025-09-26 00:09:39.732 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api)'
2025-09-26 00:09:39.733 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/csv/batch/832766fc-a9fc-4be8-aa26-afd894a3ea10/sample?take=10 - 200 null application/json; charset=utf-8 37.173ms
2025-09-26 00:09:39.736 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/b0b28efd-8dfc-499b-af90-c7c1a14185f9/mappings/suggest?batchId=832766fc-a9fc-4be8-aa26-afd894a3ea10 - null null
2025-09-26 00:09:39.737 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:09:39.738 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/b0b28efd-8dfc-499b-af90-c7c1a14185f9/mappings/suggest?batchId=832766fc-a9fc-4be8-aa26-afd894a3ea10 - 204 null null 2.8119ms
2025-09-26 00:09:39.742 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/b0b28efd-8dfc-499b-af90-c7c1a14185f9/mappings/suggest?batchId=832766fc-a9fc-4be8-aa26-afd894a3ea10 - null null
2025-09-26 00:09:39.744 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:09:39.745 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api)'
2025-09-26 00:09:39.749 +05:30 [INF] Route matched with {action = "Suggest", controller = "CampaignMappings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestAsync(System.Guid, System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController (xbytechat.api).
2025-09-26 00:09:39.757 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='b0b28efd-8dfc-499b-af90-c7c1a14185f9', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateParameters"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:09:39.765 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__batchId_0='832766fc-a9fc-4be8-aa26-afd894a3ea10', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."HeadersJson"
FROM "CsvBatches" AS c
WHERE c."Id" = @__batchId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:09:39.770 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:09:39.771 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api) in 21.5141ms
2025-09-26 00:09:39.773 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api)'
2025-09-26 00:09:39.774 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/b0b28efd-8dfc-499b-af90-c7c1a14185f9/mappings/suggest?batchId=832766fc-a9fc-4be8-aa26-afd894a3ea10 - 200 null application/json; charset=utf-8 31.9132ms
2025-09-26 00:09:41.968 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/b0b28efd-8dfc-499b-af90-c7c1a14185f9/mappings - null null
2025-09-26 00:09:41.971 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:09:41.972 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/b0b28efd-8dfc-499b-af90-c7c1a14185f9/mappings - 204 null null 4.0063ms
2025-09-26 00:09:41.975 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaigns/b0b28efd-8dfc-499b-af90-c7c1a14185f9/mappings - application/json 27
2025-09-26 00:09:41.977 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:09:41.978 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api)'
2025-09-26 00:09:41.982 +05:30 [INF] Route matched with {action = "Save", controller = "CampaignMappings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SaveAsync(System.Guid, System.Collections.Generic.Dictionary`2[System.String,System.String], System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController (xbytechat.api).
2025-09-26 00:09:41.990 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-26 00:09:41.991 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api) in 7.0991ms
2025-09-26 00:09:41.992 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api)'
2025-09-26 00:09:41.992 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaigns/b0b28efd-8dfc-499b-af90-c7c1a14185f9/mappings - 204 null null 17.8878ms
2025-09-26 00:09:41.995 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/b0b28efd-8dfc-499b-af90-c7c1a14185f9/materialize - null null
2025-09-26 00:09:41.997 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:09:41.997 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/b0b28efd-8dfc-499b-af90-c7c1a14185f9/materialize - 204 null null 2.4688ms
2025-09-26 00:09:42.000 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaigns/b0b28efd-8dfc-499b-af90-c7c1a14185f9/materialize - application/json 207
2025-09-26 00:09:42.001 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:09:42.002 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api)'
2025-09-26 00:09:42.007 +05:30 [INF] Route matched with {action = "CsvCreate", controller = "CampaignMaterialize"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeResponseDto]] CsvCreate(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeRequestDto, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController (xbytechat.api).
2025-09-26 00:09:42.015 +05:30 [INF] 📦 Materialize request: campaign="b0b28efd-8dfc-499b-af90-c7c1a14185f9" persist=true batch="832766fc-a9fc-4be8-aa26-afd894a3ea10" audience='Audience 2025-09-26'
2025-09-26 00:09:42.041 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='b0b28efd-8dfc-499b-af90-c7c1a14185f9', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1)
2025-09-26 00:09:42.047 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__request_CsvBatchId_1='832766fc-a9fc-4be8-aa26-afd894a3ea10'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__request_CsvBatchId_1
2025-09-26 00:09:42.053 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__request_CsvBatchId_1='832766fc-a9fc-4be8-aa26-afd894a3ea10', @__p_2='200'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BatchId", c."BusinessId", c."CreatedAt", c."PhoneE164", c."PhoneRaw", c."RowIndex", c."RowJson", c."ValidationError"
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__request_CsvBatchId_1
ORDER BY c."RowIndex"
LIMIT @__p_2
2025-09-26 00:09:42.060 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='b0b28efd-8dfc-499b-af90-c7c1a14185f9', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."MessageTemplate", c."TemplateId"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:09:42.066 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='welcome_video'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:09:42.095 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__r_Phone_1='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__8__locals1_businessId_0 AND c."PhoneNumber" = @__r_Phone_1
LIMIT 1
2025-09-26 00:09:42.118 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='8e44cd39-e706-4e00-81d8-cb1dae277911', @p1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p2=NULL (DbType = Guid), @p3='2025-09-25T18:39:42.0793497Z' (DbType = DateTime), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6=NULL, @p7='False', @p8='Audience 2025-09-26' (Nullable = false), @p9='2025-09-25T18:39:42.0793497Z' (Nullable = true) (DbType = DateTime), @p10='d5a68113-ab56-45a6-84e4-ad1dae798ebb', @p11='{"parameter1":"Robert Nicosta"}' (DbType = Object), @p12='8e44cd39-e706-4e00-81d8-cb1dae277911', @p13='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p14='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p15='2025-09-25T18:39:42.0793497Z' (DbType = DateTime), @p16=NULL (DbType = Guid), @p17=NULL, @p18='False', @p19='False', @p20=NULL, @p21='918974005240', @p22=NULL, @p23=NULL (DbType = DateTime), @p24='2025-09-25T18:39:42.0793497Z' (Nullable = true) (DbType = DateTime), @p25='1ad73b77-6c74-4b2a-a034-74cd8247850e', @p26='d5a68113-ab56-45a6-84e4-ad1dae798ebb' (Nullable = true), @p27=NULL, @p28='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p29='b0b28efd-8dfc-499b-af90-c7c1a14185f9', @p30=NULL, @p31=NULL, @p32='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p33='120B97FD34C61EB78B1CA5553DB053FFA8D9C58B1A7B853BFD2D4147DB86ED2B', @p34='False', @p35='2025-09-25T18:39:42.0793497Z' (Nullable = true) (DbType = DateTime), @p36=NULL, @p37=NULL, @p38='{}' (DbType = Object), @p39='["Robert Nicosta"]' (DbType = Object), @p40=NULL (DbType = DateTime), @p41='Pending' (Nullable = false), @p42='2025-09-25T18:39:42.0793497Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Audiences" ("Id", "BusinessId", "CampaignId", "CreatedAt", "CreatedByUserId", "CsvBatchId", "Description", "IsDeleted", "Name", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
INSERT INTO "AudienceMembers" ("Id", "AttributesJson", "AudienceId", "BusinessId", "ContactId", "CreatedAt", "CreatedByUserId", "Email", "IsDeleted", "IsTransientContact", "Name", "PhoneE164", "PhoneRaw", "PromotedAt", "UpdatedAt")
VALUES (@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
INSERT INTO "CampaignRecipients" ("Id", "AudienceMemberId", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IdempotencyKey", "IsAutoTagged", "MaterializedAt", "MessagePreview", "ProductBrowsed", "ResolvedButtonUrlsJson", "ResolvedParametersJson", "SentAt", "Status", "UpdatedAt")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42);
2025-09-26 00:09:42.129 +05:30 [INF] 📦 Materialize result: campaign="b0b28efd-8dfc-499b-af90-c7c1a14185f9" materialized=1 skipped=0 audienceId="8e44cd39-e706-4e00-81d8-cb1dae277911"
2025-09-26 00:09:42.130 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeResponseDto'.
2025-09-26 00:09:42.133 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api) in 124.2141ms
2025-09-26 00:09:42.134 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api)'
2025-09-26 00:09:42.135 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaigns/b0b28efd-8dfc-499b-af90-c7c1a14185f9/materialize - 200 null application/json; charset=utf-8 135.3934ms
2025-09-26 00:09:43.637 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T18:39:43.6350452+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:09:45.939 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 00:09:45.942 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:09:45.943 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.6083ms
2025-09-26 00:09:45.953 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 00:09:45.956 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:09:45.958 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 00:09:45.959 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:09:45.964 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-09-26 00:09:45.967 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:09:45.969 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 8.6169ms
2025-09-26 00:09:45.970 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 00:09:45.971 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 17.5713ms
2025-09-26 00:09:48.118 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/b0b28efd-8dfc-499b-af90-c7c1a14185f9 - null null
2025-09-26 00:09:48.120 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:09:48.121 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/b0b28efd-8dfc-499b-af90-c7c1a14185f9 - 204 null null 3.8466ms
2025-09-26 00:09:48.124 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/b0b28efd-8dfc-499b-af90-c7c1a14185f9 - null 0
2025-09-26 00:09:48.126 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:09:48.127 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 00:09:48.128 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:09:48.132 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='b0b28efd-8dfc-499b-af90-c7c1a14185f9'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
ORDER BY c."Id"
LIMIT 1
2025-09-26 00:09:48.138 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='b0b28efd-8dfc-499b-af90-c7c1a14185f9'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."AudienceMemberId", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IdempotencyKey", t0."IsAutoTagged", t0."MaterializedAt", t0."MessagePreview", t0."ProductBrowsed", t0."ResolvedButtonUrlsJson", t0."ResolvedParametersJson", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."ProfileName", t0."ProfileNameUpdatedAt", t0."Tags", t0."Id1", t0."AttributesJson", t0."AudienceId", t0."BusinessId1", t0."ContactId0", t0."CreatedAt0", t0."CreatedByUserId", t0."Email0", t0."IsDeleted", t0."IsTransientContact", t0."Name0", t0."PhoneE164", t0."PhoneRaw", t0."PromotedAt", t0."UpdatedAt0", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN (
    SELECT c0."Id", c0."AudienceMemberId", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IdempotencyKey", c0."IsAutoTagged", c0."MaterializedAt", c0."MessagePreview", c0."ProductBrowsed", c0."ResolvedButtonUrlsJson", c0."ResolvedParametersJson", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."ProfileName", c1."ProfileNameUpdatedAt", c1."Tags", a."Id" AS "Id1", a."AttributesJson", a."AudienceId", a."BusinessId" AS "BusinessId1", a."ContactId" AS "ContactId0", a."CreatedAt" AS "CreatedAt0", a."CreatedByUserId", a."Email" AS "Email0", a."IsDeleted", a."IsTransientContact", a."Name" AS "Name0", a."PhoneE164", a."PhoneRaw", a."PromotedAt", a."UpdatedAt" AS "UpdatedAt0"
    FROM "CampaignRecipients" AS c0
    LEFT JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
    LEFT JOIN "AudienceMembers" AS a ON c0."AudienceMemberId" = a."Id"
) AS t0 ON t."Id" = t0."CampaignId"
ORDER BY t."Id"
2025-09-26 00:09:48.141 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='b0b28efd-8dfc-499b-af90-c7c1a14185f9'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."CampaignId", c0."IsFromTemplate", c0."Position", c0."Title", c0."Type", c0."Value", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN "CampaignButtons" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-26 00:09:48.145 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__flowId_Value_0='0308d90a-ab0f-47d5-9bf0-c0d9993ad280', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", t0."Id", t0."CTAFlowConfigId", t0."PositionX", t0."PositionY", t0."ProfileNameSlot", t0."RequiredSource", t0."RequiredTag", t0."StepOrder", t0."TemplateToSend", t0."TemplateType", t0."TriggerButtonText", t0."TriggerButtonType", t0."UseProfileName", t0."Id0", t0."ButtonIndex", t0."ButtonSubType", t0."ButtonText", t0."ButtonType", t0."ButtonValue", t0."CTAFlowStepId", t0."NextStepId"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."Id" = @__flowId_Value_0 AND c."BusinessId" = @__businessId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."CTAFlowConfigId", c0."PositionX", c0."PositionY", c0."ProfileNameSlot", c0."RequiredSource", c0."RequiredTag", c0."StepOrder", c0."TemplateToSend", c0."TemplateType", c0."TriggerButtonText", c0."TriggerButtonType", c0."UseProfileName", f."Id" AS "Id0", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
    FROM "CTAFlowSteps" AS c0
    LEFT JOIN "FlowButtonLinks" AS f ON c0."Id" = f."CTAFlowStepId"
) AS t0 ON t."Id" = t0."CTAFlowConfigId"
ORDER BY t."Id", t0."Id"
2025-09-26 00:09:48.148 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:09:48.151 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:09:48.152 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:09:48.900 +05:30 [INF] Received HTTP response headers after 747.303ms - 200
2025-09-26 00:09:48.901 +05:30 [INF] End processing HTTP request after 750.7672ms - 200
2025-09-26 00:09:48.994 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaign_CTAFlowConfigId_Value_0='0308d90a-ab0f-47d5-9bf0-c0d9993ad280'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "CTAFlowSteps" AS c
WHERE c."CTAFlowConfigId" = @__campaign_CTAFlowConfigId_Value_0
ORDER BY c."StepOrder"
LIMIT 1
2025-09-26 00:09:49.000 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 00:09:49.004 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 00:09:52.369 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:09:52.371 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:09:53.068 +05:30 [INF] Received HTTP response headers after 696.3474ms - 200
2025-09-26 00:09:53.070 +05:30 [INF] End processing HTTP request after 700.6867ms - 200
2025-09-26 00:09:53.074 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageLogId_0='dbee0f01-f9e6-4773-9899-6c0d35d61fb5', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:09:53.083 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p2='1ad73b77-6c74-4b2a-a034-74cd8247850e', @p0='e6ef378ed4ce80bf7e76c0fd288604e13c6b21ef4356cbcdadf30f9b6e5f199e', @p1='2025-09-25T18:39:48.9977149Z' (DbType = DateTime), @p3='dbee0f01-f9e6-4773-9899-6c0d35d61fb5', @p4='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p5='[{"i":0,"position":1,"text":"Yes","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"position":2,"text":"No","type":"QUICK_REPLY","subType":"quick_reply"}]', @p6='0308d90a-ab0f-47d5-9bf0-c0d9993ad280' (Nullable = true), @p7='288c8170-7fc5-4bf2-837d-4ab67f3a3482' (Nullable = true), @p8='b0b28efd-8dfc-499b-af90-c7c1a14185f9' (Nullable = true), @p9='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p10=NULL, @p11=NULL, @p12=NULL (DbType = DateTime), @p13='2025-09-25T18:39:48.9977149Z' (DbType = DateTime), @p14=NULL, @p15=NULL (DbType = Int32), @p16=NULL (DbType = Boolean), @p17='False', @p18='https://whatsappdata.s3.ap-south-1.amazonaws.com/userMedia/dab49080d80c724aad5ebf158d63df41/vde_templ.mp4', @p19='welcome_video' (Nullable = false), @p20='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMERGMzA4RTU1NTc5NzU1MDZEAA==', @p21=NULL (DbType = Decimal), @p22=NULL, @p23='META_CLOUD', @p24='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMERGMzA4RTU1NTc5NzU1MDZEAA==', @p25='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMERGMzA4RTU1NTc5NzU1MDZEAA==","message_status":"accepted"}]}', @p26='918974005240' (Nullable = false), @p27=NULL (DbType = Guid), @p28=NULL, @p29='3664bf57-222b-48d5-886e-d6b81eef0226' (Nullable = true), @p30='2025-09-25T18:39:48.9977149Z' (Nullable = true) (DbType = DateTime), @p31='campaign', @p32='Sent' (Nullable = false), @p33='bad3be74-4a81-4960-9a78-2993859e2d2e', @p34='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p35=NULL, @p36=NULL, @p37='2025-09-25T18:39:53.0769862+00:00' (DbType = DateTime), @p38='send_response' (Nullable = false), @p39=NULL (DbType = Boolean), @p40='dbee0f01-f9e6-4773-9899-6c0d35d61fb5' (Nullable = true), @p41='2025-09-25T18:39:53.0769871+00:00' (DbType = DateTime), @p42='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMERGMzA4RTU1NTc5NzU1MDZEAA==","message_status":"accepted"}]}' (Nullable = false), @p43=NULL (DbType = Decimal), @p44=NULL, @p45='META_CLOUD' (Nullable = false), @p46='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMERGMzA4RTU1NTc5NzU1MDZEAA=='], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignRecipients" SET "IdempotencyKey" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32)
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46);
2025-09-26 00:09:53.089 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='4782540e-053e-4a0e-8cc9-44f4995dd7f5', @p1='True', @p2=NULL, @p3='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p4='[{"i":0,"position":1,"text":"Yes","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"position":2,"text":"No","type":"QUICK_REPLY","subType":"quick_reply"}]', @p5='0308d90a-ab0f-47d5-9bf0-c0d9993ad280' (Nullable = true), @p6='288c8170-7fc5-4bf2-837d-4ab67f3a3482' (Nullable = true), @p7='b0b28efd-8dfc-499b-af90-c7c1a14185f9', @p8=NULL, @p9=NULL, @p10=NULL (DbType = DateTime), @p11='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p12=NULL, @p13='2025-09-25T18:39:48.9977149Z' (DbType = DateTime), @p14='system', @p15=NULL (DbType = DateTime), @p16=NULL, @p17=NULL, @p18=NULL, @p19=NULL, @p20='False', @p21=NULL (DbType = DateTime), @p22=NULL, @p23=NULL, @p24='Hello {{1}} 👋
Aapka order successfully deliver ho chuka hai. 🚚✨
Kya aapne Nirvasa ka Vaji Amrit Vati lena start kar diya hai? 💊
Neeche diye gaye options me se select karke bataye 👇' (Nullable = false), @p25='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMERGMzA4RTU1NTc5NzU1MDZEAA==', @p26='dbee0f01-f9e6-4773-9899-6c0d35d61fb5' (Nullable = true), @p27=NULL (DbType = DateTime), @p28='1ad73b77-6c74-4b2a-a034-74cd8247850e', @p29='0', @p30='3664bf57-222b-48d5-886e-d6b81eef0226' (Nullable = true), @p31='Sent', @p32='2025-09-25T18:39:48.9977149Z' (Nullable = true) (DbType = DateTime), @p33='video_template', @p34='welcome_video', @p35=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-09-26 00:09:53.091 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:09:53.092 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 4961.8177ms
2025-09-26 00:09:53.093 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 00:09:53.094 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/b0b28efd-8dfc-499b-af90-c7c1a14185f9 - 200 null application/json; charset=utf-8 4969.5496ms
2025-09-26 00:09:53.646 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:39:53.6445331+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:10:03.664 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:40:03.6625364+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:10:04.510 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-26 00:10:04.512 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:10:04.513 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 00:10:04.515 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMERGMzA4RTU1NTc5NzU1MDZEAA==","status":"sent","timestamp":"1758825603","recipient_id":"918974005240","conversation":{"id":"79432991f0ccf6c01bc3e31d27a3ea34","expiration_timestamp":"1758825603","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:10:04.516 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 00:10:04.516 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMERGMzA4RTU1NTc5NzU1MDZEAA==","status":"sent","timestamp":"1758825603","recipient_id":"918974005240","conversation":{"id":"79432991f0ccf6c01bc3e31d27a3ea34","expiration_timestamp":"1758825603","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:10:04.517 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:10:04.519 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.2989ms
2025-09-26 00:10:04.520 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-26 00:10:04.521 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:10:04.523 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.7586ms
2025-09-26 00:10:04.523 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-26 00:10:04.526 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-26 00:10:04.527 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 00:10:04.530 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMERGMzA4RTU1NTc5NzU1MDZEAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 00:10:04.532 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='4782540e-053e-4a0e-8cc9-44f4995dd7f5'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 00:10:04.533 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMERGMzA4RTU1NTc5NzU1MDZEAA== (legacy)
2025-09-26 00:10:04.719 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-09-26 00:10:04.721 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:10:04.722 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 00:10:04.724 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMERGMzA4RTU1NTc5NzU1MDZEAA==","status":"delivered","timestamp":"1758825603","recipient_id":"918974005240","conversation":{"id":"79432991f0ccf6c01bc3e31d27a3ea34","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:10:04.725 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 00:10:04.725 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMERGMzA4RTU1NTc5NzU1MDZEAA==","status":"delivered","timestamp":"1758825603","recipient_id":"918974005240","conversation":{"id":"79432991f0ccf6c01bc3e31d27a3ea34","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:10:04.726 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:10:04.727 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 00:10:04.728 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.9913ms
2025-09-26 00:10:04.731 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMERGMzA4RTU1NTc5NzU1MDZEAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 00:10:04.731 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:10:04.734 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='4782540e-053e-4a0e-8cc9-44f4995dd7f5'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 00:10:04.734 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 15.4919ms
2025-09-26 00:10:04.738 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='4782540e-053e-4a0e-8cc9-44f4995dd7f5', @p0='2025-09-25T18:40:03.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-26 00:10:04.741 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMERGMzA4RTU1NTc5NzU1MDZEAA== → Delivered
2025-09-26 00:10:04.783 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-09-26 00:10:04.786 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:10:04.787 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 00:10:04.788 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMERGMzA4RTU1NTc5NzU1MDZEAA==","status":"read","timestamp":"1758825603","recipient_id":"918974005240","conversation":{"id":"79432991f0ccf6c01bc3e31d27a3ea34","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:10:04.789 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 00:10:04.789 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMERGMzA4RTU1NTc5NzU1MDZEAA==","status":"read","timestamp":"1758825603","recipient_id":"918974005240","conversation":{"id":"79432991f0ccf6c01bc3e31d27a3ea34","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:10:04.790 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:10:04.791 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 00:10:04.791 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.4009ms
2025-09-26 00:10:04.794 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMERGMzA4RTU1NTc5NzU1MDZEAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 00:10:04.794 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:10:04.796 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='4782540e-053e-4a0e-8cc9-44f4995dd7f5'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 00:10:04.797 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.3836ms
2025-09-26 00:10:04.800 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='4782540e-053e-4a0e-8cc9-44f4995dd7f5', @p0='2025-09-25T18:40:03.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-26 00:10:04.803 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMERGMzA4RTU1NTc5NzU1MDZEAA== → Read
2025-09-26 00:10:13.681 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:40:13.6796869+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:10:20.750 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 603
2025-09-26 00:10:20.753 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:10:20.754 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 00:10:20.755 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMERGMzA4RTU1NTc5NzU1MDZEAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggNjg0NkJFMDJCQTI5NjQ5MDk3MDlCMDBCQ0Q4NDNCMDEA","timestamp":"1758825619","type":"button","button":{"payload":"Yes","text":"Yes"}}]},"field":"messages"}]}]}
2025-09-26 00:10:20.757 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 00:10:20.757 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMERGMzA4RTU1NTc5NzU1MDZEAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggNjg0NkJFMDJCQTI5NjQ5MDk3MDlCMDBCQ0Q4NDNCMDEA","timestamp":"1758825619","type":"button","button":{"payload":"Yes","text":"Yes"}}]},"field":"messages"}]}]}
2025-09-26 00:10:20.758 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:10:20.758 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-26 00:10:20.759 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.1122ms
2025-09-26 00:10:20.760 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-26 00:10:20.761 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:10:20.762 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggNjg0NkJFMDJCQTI5NjQ5MDk3MDlCMDBCQ0Q4NDNCMDEA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMERGMzA4RTU1NTc5NzU1MDZEAA==, Text: Yes
2025-09-26 00:10:20.762 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 11.7867ms
2025-09-26 00:10:20.765 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMERGMzA4RTU1NTc5NzU1MDZEAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-26 00:10:20.769 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__origin_Id_0='dbee0f01-f9e6-4773-9899-6c0d35d61fb5' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMERGMzA4RTU1NTc5NzU1MDZEAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-09-26 00:10:20.772 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__fromDigits_1='918974005240', @__fromRaw_2='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND (c."PhoneNumber" = @__fromDigits_1 OR c."PhoneNumber" = @__fromRaw_2)
LIMIT 1
2025-09-26 00:10:20.774 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='288c8170-7fc5-4bf2-837d-4ab67f3a3482'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
WHERE f."CTAFlowStepId" = @__stepId_0
ORDER BY f."ButtonIndex"
2025-09-26 00:10:20.776 +05:30 [INF] 🟡 Button text not found in bundle or flow links. Ref=wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMERGMzA4RTU1NTc5NzU1MDZEAA==, Text='Yes'
2025-09-26 00:10:23.699 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:40:23.6968843+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:10:33.709 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:40:33.7080326+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:10:38.631 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 601
2025-09-26 00:10:38.633 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:10:38.634 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 00:10:38.636 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMERGMzA4RTU1NTc5NzU1MDZEAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMTRBM0NBMjlEQUVGMjdCMEQ4MDFCQ0VEMkE1NERGRDYA","timestamp":"1758825637","type":"button","button":{"payload":"No","text":"No"}}]},"field":"messages"}]}]}
2025-09-26 00:10:38.637 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 00:10:38.637 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMERGMzA4RTU1NTc5NzU1MDZEAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMTRBM0NBMjlEQUVGMjdCMEQ4MDFCQ0VEMkE1NERGRDYA","timestamp":"1758825637","type":"button","button":{"payload":"No","text":"No"}}]},"field":"messages"}]}]}
2025-09-26 00:10:38.638 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:10:38.638 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-26 00:10:38.639 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.9624ms
2025-09-26 00:10:38.640 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-26 00:10:38.641 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:10:38.641 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMTRBM0NBMjlEQUVGMjdCMEQ4MDFCQ0VEMkE1NERGRDYA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMERGMzA4RTU1NTc5NzU1MDZEAA==, Text: No
2025-09-26 00:10:38.642 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 11.6187ms
2025-09-26 00:10:38.646 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMERGMzA4RTU1NTc5NzU1MDZEAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-26 00:10:38.649 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__origin_Id_0='dbee0f01-f9e6-4773-9899-6c0d35d61fb5' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMERGMzA4RTU1NTc5NzU1MDZEAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-09-26 00:10:38.651 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__fromDigits_1='918974005240', @__fromRaw_2='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND (c."PhoneNumber" = @__fromDigits_1 OR c."PhoneNumber" = @__fromRaw_2)
LIMIT 1
2025-09-26 00:10:38.654 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='288c8170-7fc5-4bf2-837d-4ab67f3a3482'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
WHERE f."CTAFlowStepId" = @__stepId_0
ORDER BY f."ButtonIndex"
2025-09-26 00:10:38.655 +05:30 [INF] 🟡 Button text not found in bundle or flow links. Ref=wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMERGMzA4RTU1NTc5NzU1MDZEAA==, Text='No'
2025-09-26 00:10:43.712 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:40:43.7106699+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:10:53.723 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:40:53.7216174+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:11:03.736 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:41:03.7352628+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:11:13.742 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:41:13.7409377+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:11:23.749 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:41:23.7478435+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:11:33.767 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:41:33.7653629+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:11:43.787 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:41:43.7855913+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:11:53.793 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:41:53.7918464+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:11:56.950 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-26 00:11:56.953 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:11:56.954 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 3.616ms
2025-09-26 00:11:56.957 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-26 00:11:56.959 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:11:56.960 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-26 00:11:56.961 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-09-26 00:11:56.963 +05:30 [INF] 🔎 Fetching templates for BusinessId "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56"
2025-09-26 00:11:56.966 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:11:56.968 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 00:11:56.970 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 00:11:57.757 +05:30 [INF] Received HTTP response headers after 784.0162ms - 200
2025-09-26 00:11:57.759 +05:30 [INF] End processing HTTP request after 790.083ms - 200
2025-09-26 00:11:57.817 +05:30 [INF] 📦 Meta Template API (Biz "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56") payload:
{"data":[{"name":"pdf_template","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"DOCUMENT","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534415257_508230149051927_6330429317144744326_n.pdf?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=b2YWNnPv7YoQ7kNvwGBOF9H&_nc_oc=AdnM42tWm_8qqw_k0xD7FhroXxYvcubATQXPHvhhIZLPw_Ca_0jiGdHeXUtBTpHKHS7PCjdC4iXn5IvJmc1Yrz_l&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=r0p6p4TyJLIMm_Q7wsHyig&oh=01_Q5Aa2gF5kcBz4jy0luss0d-HKuVoWUJERBDeKznFq5ZtQztBug&oe=68FD04F5"]}},{"type":"BODY","text":"Hello {{1}},\n\nPlease find your Invoice.","example":{"body_text":[["Usernmok"]]}},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Recieved"},{"type":"QUICK_REPLY","text":"No Received"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"508230145718594"},{"name":"welcome_video","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"VIDEO","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534417141_1284099973020036_5812680847202991712_n.mp4?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=zsyoQsHKvQoQ7kNvwHIJtvF&_nc_oc=AdlV0sbKmrKDFtfOqartFnb3DwICFJYiPMP2fzM_-1mz1pI4Ds5bRLhMXp-s4G1wiMKoGlAbweW1acnIp3V6u6FF&_nc_zt=28&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=r0p6p4TyJLIMm_Q7wsHyig&oh=01_Q5Aa2gFaHE88KJEqetJFUTdACKnY_AqhBpoHLuZ3v5vPlISKDg&oe=68FCFAC3"]}},{"type":"BODY","text":"Hello {{1}} \ud83d\udc4b\nAapka order successfully deliver ho chuka hai. \ud83d\ude9a\u2728\nKya aapne Nirvasa ka Vaji Amrit Vati lena start kar diya hai? \ud83d\udc8a\nNeeche diye gaye options me se select karke bataye \ud83d\udc47","example":{"body_text":[["Nicolus"]]}},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Yes"},{"type":"QUICK_REPLY","text":"No"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1284099969686703"},{"name":"single_variable_body","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\nWe are sedning {{1}} items.","example":{"body_text":[["five"]]}},{"type":"FOOTER","text":"Sent by xplorebyte"}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1209106791238164"},{"name":"template_1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 1"},{"type":"BODY","text":"This is the Template : 1"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 2"},{"type":"QUICK_REPLY","text":"Show Me Template 3"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2381212765606675"},{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"},{"name":"variable_csv_demo","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Dear  {{1}},\n\nWe are happy to announce that we are going to launch our new product on {{2}}.\n\nRegards,\nLeadsCone","example":{"body_text":[["Nicolaus","Monaday"]]}}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1463763351520294"},{"name":"template_3","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 3"},{"type":"BODY","text":"This is themplate : 3"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1760623375330098"},{"name":"template_2","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 2"},{"type":"BODY","text":"This is teh template 2"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1222093123248950"},{"name":"welcome_menu_minds","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello! Thank you for contacting MindsMiratus.\n\nIf you're a new visitor, we're happy to help you get started. If you're an existing customer, we're here to support you. Please choose from the options below."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Explore Our Services"},{"type":"QUICK_REPLY","text":"View Our Products"},{"type":"QUICK_REPLY","text":"Customer Support"},{"type":"QUICK_REPLY","text":"Contact Sales"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1115530356706526"},{"name":"contact_sales_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We'd love to discuss how we can help your business grow. You can reach our sales team via email at info\u0040mindsmiratus.com or call us at +91-321-123-4321.\n\nWould you like one of our experts to call you back?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Yes, call me back"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"954501560165102"},{"name":"human_takeover_confirmation_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Thank you! We've received your request. One of our experts will get in touch with you shortly.\n\nIs there anything else I can help you with in the meantime?"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1304432401406654"},{"name":"products_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We are proud to offer our powerful and easy-to-use GST Software, designed to simplify your tax compliance, invoicing, and financial management.\n\nWhat would you like to do?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a GST Demo"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2567632853585898"},{"name":"services_menu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We offer a wide range of services to power your business's growth. Please select a category you are interested in:"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Design Services"},{"type":"QUICK_REPLY","text":"Development Services"},{"type":"QUICK_REPLY","text":"Digital & Tele-Marketing"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"738253949023987"},{"name":"support_project_status_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"To check the status of your ongoing project, please provide your registered email address or project ID, and one of our project managers will get back to you with a detailed update shortly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Project Manager"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1599668577490835"},{"name":"support_main_menu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Welcome to the MindsMiratus Support Center. We're here to help you with any questions or issues you may have.\n\nPlease select an option so we can assist you faster."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"GST Software Support"},{"type":"QUICK_REPLY","text":"Check Project Status"},{"type":"QUICK_REPLY","text":"Report Technical Issues"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en","status":"APPROVED","category":"MARKETING","id":"679342281096115"},{"name":"demo","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Demo Template"},{"type":"BODY","text":"Demo Template Message."},{"type":"FOOTER","text":"sent by ExploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/visit"]},{"type":"URL","text":"Shop Now","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/shopnow"]},{"type":"PHONE_NUMBER","text":"Call Us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"757818770430461"},{"name":"dev_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our expert developers build robust and scalable solutions tailored to your business needs. Which area of development interests you?\n\n\ud83d\udcbb Web & Software Dev: Custom applications and software solutions.\n\ud83d\udcf1 Mobile App Dev: Engaging and high-performance apps for iOS and Android.\n\ud83d\uded2 E-commerce Dev: Powerful online stores that drive sales and growth."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Discuss a Project"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3118090155157247"},{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/tutrials"]},{"type":"URL","text":"View Demo","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"},{"name":"build_urltracking","parameter_format":"NAMED","components":[{"type":"BODY","text":"Hello \n\nThis is the test message to check wheather redirecting url is working or not."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/softwaredev"]},{"type":"URL","text":"Explore More","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/moreopt"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"788214393726841"},{"name":"marketing_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We help you reach your target audience and grow your brand effectively. Explore our marketing services:\n\n\ud83d\udcc8 Digital Marketing: SEO, Social Media Marketing, and targeted PPC campaigns.\n\ud83d\udcde Tele-Marketing: IVR systems, Bulk SMS, Voice Calls, and official WhatsApp API solutions."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Get a Marketing Plan"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1683803515627636"},{"name":"design_services_submenu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our creative team delivers stunning and effective designs to make your brand stand out. Which design service would you like to know more about?\n\n\ud83c\udfa8 Website Designing: We build beautiful, responsive, and user-friendly websites.\n\ud83d\udd8c\ufe0f Graphic Designing: We create compelling visuals, logos, and branding materials."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a Design Quote"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3291988187631744"},{"name":"support_gst_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"You've reached support for our GST Software. How can we help?\n\n\ud83d\udd27 Technical Help: For installation issues, errors, or bugs.\n\ud83d\udca1 Feature Questions: To understand how to use a specific feature.\n\ud83d\udcda View FAQs: Get answers to common questions instantly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Support Agent"},{"type":"QUICK_REPLY","text":"View FAQs"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1305308197880244"},{"name":"support_report_issue_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We're sorry to hear you're experiencing an issue.\n\nTo help us resolve it quickly, please tap the button below to connect with our technical support team. Please be ready to provide a brief description of the problem."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Connect to Technical Team"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"755167220845328"},{"name":"about_us_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"MindsMiratus is a leading IT solutions company dedicated to helping businesses grow through innovative and effective digital services. From design to development and marketing, we provide comprehensive solutions to elevate your brand.\n\nWhat would you like to do next?"},{"type":"FOOTER","text":"sent by Mindsmirtus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"},{"type":"QUICK_REPLY","text":"Talk to an Expert"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1971204310331370"},{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"\u26a1\ufe0f Feature Annoucement ! \u26a1\ufe0f\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/\u00257B\u00257BI\u00257D\u00257D{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"View Tutorials","url":"https:\/\/www.youtube.com\/\u00257B\u00257Bi\u00257D\u00257D{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"},{"name":"call_log","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is the checking for call log event."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/seeme"]},{"type":"URL","text":"Call Us","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/callme"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1286058192539680"},{"name":"track_url_after_flow_integ","message_send_ttl_seconds":86400,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BODY","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/vosiatstore"]},{"type":"URL","text":"Visit Demo","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/demo"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1084981273615848"},{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"watch Video","url":"https:\/\/www.youtube.com\/{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"},{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=eJAeQFq4sbYQ7kNvwFpXn8W&_nc_oc=AdlgBuy__gBLfPG4qOcNpzI6X3KF4Tb4oRFGDEgRhrr8VicCxdiD-S5h5XcqMdUYlP-IjhOpU7eelCekwHjyfMWO&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=r0p6p4TyJLIMm_Q7wsHyig&oh=01_Q5Aa2gHK0DGdsat7DfXMk43DESrj7FMWHd6FCTiX94YWGy3hiQ&oe=68FCF2CF"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! \ud83c\udf89\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15\u0025 discount** on your purchase. Don't just follow the trend\u2014set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https:\/\/xplorebytesolutions.com\/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"},{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https:\/\/www.qwexample.com\/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"}],"paging":{"cursors":{"before":"QVFIU2ZADb0ZAKeHRXTkFMeUQ2NjZABRVFyWTZABamN6d3doUW5hQTBlQ0RieW42TDBWdnZArNmh4MEJpVFBsWDRiQmZAEajFwNWl1ZAzNZAQlJGbUhmZA0NXOUxIWkR3","after":"QVFIU1hSaTdZATm1tSjZAiNnlaQ1RubTFQZAjlKUUhnU1l2Y3hudWE0NXY0U3d0ZAE8wSV9NeWplbDlCS1FoRHBPN2NDOW1GZA3NLRHk4b3JBVU1TeklYd0JodU93"}}}
2025-09-26 00:11:57.822 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType155`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:11:57.824 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 860.964ms
2025-09-26 00:11:57.825 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-26 00:11:57.826 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 869.3248ms
2025-09-26 00:12:03.803 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:42:03.8014714+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:12:13.815 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:42:13.8135481+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:12:15.960 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-26 00:12:15.963 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:12:15.966 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 5.9833ms
2025-09-26 00:12:15.970 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-26 00:12:15.975 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:12:15.977 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-26 00:12:15.978 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-09-26 00:12:15.980 +05:30 [INF] 🔎 Fetching templates for BusinessId "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56"
2025-09-26 00:12:15.983 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:12:15.986 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 00:12:15.987 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 00:12:16.759 +05:30 [INF] Received HTTP response headers after 770.8001ms - 200
2025-09-26 00:12:16.761 +05:30 [INF] End processing HTTP request after 774.2871ms - 200
2025-09-26 00:12:16.854 +05:30 [INF] 📦 Meta Template API (Biz "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56") payload:
{"data":[{"name":"pdf_template","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"DOCUMENT","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534415257_508230149051927_6330429317144744326_n.pdf?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=b2YWNnPv7YoQ7kNvwGBOF9H&_nc_oc=AdnM42tWm_8qqw_k0xD7FhroXxYvcubATQXPHvhhIZLPw_Ca_0jiGdHeXUtBTpHKHS7PCjdC4iXn5IvJmc1Yrz_l&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=CDQ-wBKpfCEkglykalbvOw&oh=01_Q5Aa2gFCQZFpDhFeUI2nQ7tsqRa3-Qw-zIki5mU4qNFRLx3NiQ&oe=68FD04F5"]}},{"type":"BODY","text":"Hello {{1}},\n\nPlease find your Invoice.","example":{"body_text":[["Usernmok"]]}},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Recieved"},{"type":"QUICK_REPLY","text":"No Received"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"508230145718594"},{"name":"welcome_video","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"VIDEO","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534417141_1284099973020036_5812680847202991712_n.mp4?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=zsyoQsHKvQoQ7kNvwHIJtvF&_nc_oc=AdlV0sbKmrKDFtfOqartFnb3DwICFJYiPMP2fzM_-1mz1pI4Ds5bRLhMXp-s4G1wiMKoGlAbweW1acnIp3V6u6FF&_nc_zt=28&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=CDQ-wBKpfCEkglykalbvOw&oh=01_Q5Aa2gG_4svzGHc2C-uPlcKGxDe2oUSIhLKJHgaQUEw-O2WCXQ&oe=68FCFAC3"]}},{"type":"BODY","text":"Hello {{1}} \ud83d\udc4b\nAapka order successfully deliver ho chuka hai. \ud83d\ude9a\u2728\nKya aapne Nirvasa ka Vaji Amrit Vati lena start kar diya hai? \ud83d\udc8a\nNeeche diye gaye options me se select karke bataye \ud83d\udc47","example":{"body_text":[["Nicolus"]]}},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Yes"},{"type":"QUICK_REPLY","text":"No"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1284099969686703"},{"name":"single_variable_body","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\nWe are sedning {{1}} items.","example":{"body_text":[["five"]]}},{"type":"FOOTER","text":"Sent by xplorebyte"}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1209106791238164"},{"name":"template_1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 1"},{"type":"BODY","text":"This is the Template : 1"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 2"},{"type":"QUICK_REPLY","text":"Show Me Template 3"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2381212765606675"},{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"},{"name":"variable_csv_demo","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Dear  {{1}},\n\nWe are happy to announce that we are going to launch our new product on {{2}}.\n\nRegards,\nLeadsCone","example":{"body_text":[["Nicolaus","Monaday"]]}}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1463763351520294"},{"name":"template_3","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 3"},{"type":"BODY","text":"This is themplate : 3"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1760623375330098"},{"name":"template_2","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 2"},{"type":"BODY","text":"This is teh template 2"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1222093123248950"},{"name":"welcome_menu_minds","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello! Thank you for contacting MindsMiratus.\n\nIf you're a new visitor, we're happy to help you get started. If you're an existing customer, we're here to support you. Please choose from the options below."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Explore Our Services"},{"type":"QUICK_REPLY","text":"View Our Products"},{"type":"QUICK_REPLY","text":"Customer Support"},{"type":"QUICK_REPLY","text":"Contact Sales"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1115530356706526"},{"name":"contact_sales_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We'd love to discuss how we can help your business grow. You can reach our sales team via email at info\u0040mindsmiratus.com or call us at +91-321-123-4321.\n\nWould you like one of our experts to call you back?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Yes, call me back"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"954501560165102"},{"name":"human_takeover_confirmation_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Thank you! We've received your request. One of our experts will get in touch with you shortly.\n\nIs there anything else I can help you with in the meantime?"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1304432401406654"},{"name":"products_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We are proud to offer our powerful and easy-to-use GST Software, designed to simplify your tax compliance, invoicing, and financial management.\n\nWhat would you like to do?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a GST Demo"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2567632853585898"},{"name":"services_menu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We offer a wide range of services to power your business's growth. Please select a category you are interested in:"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Design Services"},{"type":"QUICK_REPLY","text":"Development Services"},{"type":"QUICK_REPLY","text":"Digital & Tele-Marketing"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"738253949023987"},{"name":"support_project_status_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"To check the status of your ongoing project, please provide your registered email address or project ID, and one of our project managers will get back to you with a detailed update shortly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Project Manager"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1599668577490835"},{"name":"support_main_menu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Welcome to the MindsMiratus Support Center. We're here to help you with any questions or issues you may have.\n\nPlease select an option so we can assist you faster."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"GST Software Support"},{"type":"QUICK_REPLY","text":"Check Project Status"},{"type":"QUICK_REPLY","text":"Report Technical Issues"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en","status":"APPROVED","category":"MARKETING","id":"679342281096115"},{"name":"demo","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Demo Template"},{"type":"BODY","text":"Demo Template Message."},{"type":"FOOTER","text":"sent by ExploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/visit"]},{"type":"URL","text":"Shop Now","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/shopnow"]},{"type":"PHONE_NUMBER","text":"Call Us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"757818770430461"},{"name":"dev_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our expert developers build robust and scalable solutions tailored to your business needs. Which area of development interests you?\n\n\ud83d\udcbb Web & Software Dev: Custom applications and software solutions.\n\ud83d\udcf1 Mobile App Dev: Engaging and high-performance apps for iOS and Android.\n\ud83d\uded2 E-commerce Dev: Powerful online stores that drive sales and growth."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Discuss a Project"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3118090155157247"},{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/tutrials"]},{"type":"URL","text":"View Demo","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"},{"name":"build_urltracking","parameter_format":"NAMED","components":[{"type":"BODY","text":"Hello \n\nThis is the test message to check wheather redirecting url is working or not."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/softwaredev"]},{"type":"URL","text":"Explore More","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/moreopt"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"788214393726841"},{"name":"marketing_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We help you reach your target audience and grow your brand effectively. Explore our marketing services:\n\n\ud83d\udcc8 Digital Marketing: SEO, Social Media Marketing, and targeted PPC campaigns.\n\ud83d\udcde Tele-Marketing: IVR systems, Bulk SMS, Voice Calls, and official WhatsApp API solutions."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Get a Marketing Plan"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1683803515627636"},{"name":"design_services_submenu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our creative team delivers stunning and effective designs to make your brand stand out. Which design service would you like to know more about?\n\n\ud83c\udfa8 Website Designing: We build beautiful, responsive, and user-friendly websites.\n\ud83d\udd8c\ufe0f Graphic Designing: We create compelling visuals, logos, and branding materials."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a Design Quote"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3291988187631744"},{"name":"support_gst_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"You've reached support for our GST Software. How can we help?\n\n\ud83d\udd27 Technical Help: For installation issues, errors, or bugs.\n\ud83d\udca1 Feature Questions: To understand how to use a specific feature.\n\ud83d\udcda View FAQs: Get answers to common questions instantly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Support Agent"},{"type":"QUICK_REPLY","text":"View FAQs"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1305308197880244"},{"name":"support_report_issue_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We're sorry to hear you're experiencing an issue.\n\nTo help us resolve it quickly, please tap the button below to connect with our technical support team. Please be ready to provide a brief description of the problem."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Connect to Technical Team"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"755167220845328"},{"name":"about_us_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"MindsMiratus is a leading IT solutions company dedicated to helping businesses grow through innovative and effective digital services. From design to development and marketing, we provide comprehensive solutions to elevate your brand.\n\nWhat would you like to do next?"},{"type":"FOOTER","text":"sent by Mindsmirtus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"},{"type":"QUICK_REPLY","text":"Talk to an Expert"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1971204310331370"},{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"\u26a1\ufe0f Feature Annoucement ! \u26a1\ufe0f\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/\u00257B\u00257BI\u00257D\u00257D{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"View Tutorials","url":"https:\/\/www.youtube.com\/\u00257B\u00257Bi\u00257D\u00257D{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"},{"name":"call_log","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is the checking for call log event."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/seeme"]},{"type":"URL","text":"Call Us","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/callme"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1286058192539680"},{"name":"track_url_after_flow_integ","message_send_ttl_seconds":86400,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BODY","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/vosiatstore"]},{"type":"URL","text":"Visit Demo","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/demo"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1084981273615848"},{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"watch Video","url":"https:\/\/www.youtube.com\/{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"},{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=eJAeQFq4sbYQ7kNvwFpXn8W&_nc_oc=AdlgBuy__gBLfPG4qOcNpzI6X3KF4Tb4oRFGDEgRhrr8VicCxdiD-S5h5XcqMdUYlP-IjhOpU7eelCekwHjyfMWO&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=CDQ-wBKpfCEkglykalbvOw&oh=01_Q5Aa2gGQLrNa-UdI4vrzOqsZiDb1YxfPHnG2xSYrOJa45uk1xw&oe=68FCF2CF"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! \ud83c\udf89\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15\u0025 discount** on your purchase. Don't just follow the trend\u2014set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https:\/\/xplorebytesolutions.com\/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"},{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https:\/\/www.qwexample.com\/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"}],"paging":{"cursors":{"before":"QVFIU2ZADb0ZAKeHRXTkFMeUQ2NjZABRVFyWTZABamN6d3doUW5hQTBlQ0RieW42TDBWdnZArNmh4MEJpVFBsWDRiQmZAEajFwNWl1ZAzNZAQlJGbUhmZA0NXOUxIWkR3","after":"QVFIU1hSaTdZATm1tSjZAiNnlaQ1RubTFQZAjlKUUhnU1l2Y3hudWE0NXY0U3d0ZAE8wSV9NeWplbDlCS1FoRHBPN2NDOW1GZA3NLRHk4b3JBVU1TeklYd0JodU93"}}}
2025-09-26 00:12:16.859 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType155`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:12:16.861 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 881.5714ms
2025-09-26 00:12:16.862 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-26 00:12:16.863 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 892.784ms
2025-09-26 00:12:23.818 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:42:23.8163202+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:12:33.835 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:42:33.8337619+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:12:36.856 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/save-visual - null null
2025-09-26 00:12:36.859 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:12:36.860 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/save-visual - 204 null null 3.5721ms
2025-09-26 00:12:36.863 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/cta-flow/save-visual - application/json 1179
2025-09-26 00:12:36.865 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:12:36.866 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.SaveVisualFlow (xbytechat.api)'
2025-09-26 00:12:36.867 +05:30 [INF] Route matched with {action = "SaveVisualFlow", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SaveVisualFlow(xbytechat.api.Features.CTAFlowBuilder.DTOs.SaveVisualFlowDto) on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-09-26 00:12:36.869 +05:30 [INF] 📦 Saving CTA Flow: F3 by Test Company
2025-09-26 00:12:36.870 +05:30 [INF] 🧠 SaveVisualFlow started | FlowName: F3 | BusinessId: "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56"
2025-09-26 00:12:36.872 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_FlowName_0='F3', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
FROM "CTAFlowConfigs" AS c
WHERE c."FlowName" = @__dto_FlowName_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:12:36.875 +05:30 [INF] ✅ New FlowConfig created with ID: "2648e864-9190-4484-a53c-8c263daebe4d"
2025-09-26 00:12:36.878 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='2648e864-9190-4484-a53c-8c263daebe4d', @p1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p2='2025-09-25T18:42:36.8758338Z' (DbType = DateTime), @p3='Test Company', @p4='F3' (Nullable = false), @p5='True', @p6='True', @p7='2025-09-25T18:42:36.8758339Z' (Nullable = true) (DbType = DateTime), @p8='6facc21f-73f8-4ff0-878b-47e403d102b5', @p9='2648e864-9190-4484-a53c-8c263daebe4d', @p10='-48' (Nullable = true), @p11='304' (Nullable = true), @p12='1' (Nullable = true), @p13=NULL, @p14=NULL, @p15='0', @p16='welcome_video' (Nullable = false), @p17='text_template', @p18='Yes' (Nullable = false), @p19='cta' (Nullable = false), @p20='True', @p21='b3640e9a-3d2b-4f3a-b691-5af5f92e1620', @p22='2648e864-9190-4484-a53c-8c263daebe4d', @p23='320' (Nullable = true), @p24='432' (Nullable = true), @p25=NULL (DbType = Int32), @p26=NULL, @p27=NULL, @p28='1', @p29='single_variable_body' (Nullable = false), @p30='text_template', @p31='Yes' (Nullable = false), @p32='quick_reply' (Nullable = false), @p33='False', @p34='96a79783-4e08-4177-8f1e-8c9a89c917aa', @p35='0', @p36='quick_reply' (Nullable = false), @p37='Yes' (Nullable = false), @p38='QUICK_REPLY' (Nullable = false), @p39='' (Nullable = false), @p40='6facc21f-73f8-4ff0-878b-47e403d102b5', @p41='b3640e9a-3d2b-4f3a-b691-5af5f92e1620' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CTAFlowConfigs" ("Id", "BusinessId", "CreatedAt", "CreatedBy", "FlowName", "IsActive", "IsPublished", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO "CTAFlowSteps" ("Id", "CTAFlowConfigId", "PositionX", "PositionY", "ProfileNameSlot", "RequiredSource", "RequiredTag", "StepOrder", "TemplateToSend", "TemplateType", "TriggerButtonText", "TriggerButtonType", "UseProfileName")
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);
INSERT INTO "CTAFlowSteps" ("Id", "CTAFlowConfigId", "PositionX", "PositionY", "ProfileNameSlot", "RequiredSource", "RequiredTag", "StepOrder", "TemplateToSend", "TemplateType", "TriggerButtonText", "TriggerButtonType", "UseProfileName")
VALUES (@p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33);
INSERT INTO "FlowButtonLinks" ("Id", "ButtonIndex", "ButtonSubType", "ButtonText", "ButtonType", "ButtonValue", "CTAFlowStepId", "NextStepId")
VALUES (@p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41);
2025-09-26 00:12:36.881 +05:30 [INF] ✅ Flow 'F3' saved | Steps: 2 | Links: 2
2025-09-26 00:12:36.883 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:12:36.884 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.SaveVisualFlow (xbytechat.api) in 15.3373ms
2025-09-26 00:12:36.885 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.SaveVisualFlow (xbytechat.api)'
2025-09-26 00:12:36.886 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/cta-flow/save-visual - 200 null application/json; charset=utf-8 23.3285ms
2025-09-26 00:12:42.902 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 00:12:42.905 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:12:42.905 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 204 null null 2.9516ms
2025-09-26 00:12:42.907 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 00:12:42.911 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:12:42.911 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 00:12:42.911 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 204 null null 4.269ms
2025-09-26 00:12:42.913 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:12:42.916 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 00:12:42.918 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 00:12:42.920 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:12:42.920 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 00:12:42.921 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 00:12:42.924 +05:30 [INF] Route matched with {action = "GetSenders", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSenders(System.Guid) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-26 00:12:42.925 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-26 00:12:42.929 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-26 00:12:42.931 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType155`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType241`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:12:42.933 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.WhatsAppSettings.DTOs.WhatsAppSenderDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:12:42.934 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 11.9079ms
2025-09-26 00:12:42.936 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api) in 8.2535ms
2025-09-26 00:12:42.937 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 00:12:42.938 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 00:12:42.939 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 200 null application/json; charset=utf-8 27.9327ms
2025-09-26 00:12:42.940 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 200 null application/json; charset=utf-8 23.6097ms
2025-09-26 00:12:43.842 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:42:43.8410588+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:12:44.398 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/list/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?onlyPublished=true - null null
2025-09-26 00:12:44.401 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:12:44.402 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/list/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?onlyPublished=true - 204 null null 3.6743ms
2025-09-26 00:12:44.406 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/list/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?onlyPublished=true - null null
2025-09-26 00:12:44.408 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:12:44.409 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAvailableFlows (xbytechat.api)'
2025-09-26 00:12:44.410 +05:30 [INF] Route matched with {action = "GetAvailableFlows", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAvailableFlows(System.Guid, Boolean) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:12:44.414 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."FlowName", c."IsPublished"
FROM "CTAFlowConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive" AND c."IsPublished"
ORDER BY c."UpdatedAt" DESC
2025-09-26 00:12:44.417 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType53`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.FlowListItemDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:12:44.418 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAvailableFlows (xbytechat.api) in 6.8232ms
2025-09-26 00:12:44.419 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAvailableFlows (xbytechat.api)'
2025-09-26 00:12:44.420 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/list/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?onlyPublished=true - 200 null application/json; charset=utf-8 14.8574ms
2025-09-26 00:12:52.848 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/welcome_video - null null
2025-09-26 00:12:52.850 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:12:52.851 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/welcome_video - 204 null null 2.9767ms
2025-09-26 00:12:52.853 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/welcome_video - null null
2025-09-26 00:12:52.855 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:12:52.856 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-26 00:12:52.857 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 00:12:52.860 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__name_1='welcome_video'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-09-26 00:12:52.864 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='welcome_video', @__language_2='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Language" = @__language_2
ORDER BY w."Language" = @__language_2 DESC
LIMIT 1
2025-09-26 00:12:52.867 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType242`10[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:12:52.868 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 9.4168ms
2025-09-26 00:12:52.869 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-26 00:12:52.870 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/welcome_video - 200 null application/json; charset=utf-8 16.7483ms
2025-09-26 00:12:53.852 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:42:53.8498028+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:13:03.857 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:43:03.8553669+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:13:13.867 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:43:13.8648272+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:13:22.241 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-09-26 00:13:22.244 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:13:22.245 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 3.5552ms
2025-09-26 00:13:22.248 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 841
2025-09-26 00:13:22.250 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:13:22.251 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-26 00:13:22.251 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:13:22.255 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__phoneNumberId_1='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."PhoneNumberId" = @__phoneNumberId_1 AND w."IsActive"
LIMIT 1
2025-09-26 00:13:22.260 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__incomingFlowId_Value_0='2648e864-9190-4484-a53c-8c263daebe4d', @__8__locals1_businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", t0."Id", t0."CTAFlowConfigId", t0."PositionX", t0."PositionY", t0."ProfileNameSlot", t0."RequiredSource", t0."RequiredTag", t0."StepOrder", t0."TemplateToSend", t0."TemplateType", t0."TriggerButtonText", t0."TriggerButtonType", t0."UseProfileName", t0."Id0", t0."ButtonIndex", t0."ButtonSubType", t0."ButtonText", t0."ButtonType", t0."ButtonValue", t0."CTAFlowStepId", t0."NextStepId"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."Id" = @__incomingFlowId_Value_0 AND c."BusinessId" = @__8__locals1_businessId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."CTAFlowConfigId", c0."PositionX", c0."PositionY", c0."ProfileNameSlot", c0."RequiredSource", c0."RequiredTag", c0."StepOrder", c0."TemplateToSend", c0."TemplateType", c0."TriggerButtonText", c0."TriggerButtonType", c0."UseProfileName", f."Id" AS "Id0", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
    FROM "CTAFlowSteps" AS c0
    LEFT JOIN "FlowButtonLinks" AS f ON c0."Id" = f."CTAFlowStepId"
) AS t0 ON t."Id" = t0."CTAFlowConfigId"
ORDER BY t."Id", t0."Id"
2025-09-26 00:13:22.264 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:13:22.266 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:13:22.267 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:13:23.213 +05:30 [INF] Received HTTP response headers after 945.4255ms - 200
2025-09-26 00:13:23.215 +05:30 [INF] End processing HTTP request after 948.8977ms - 200
2025-09-26 00:13:23.290 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='welcome_video', @__provider_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:13:23.295 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='8376ccd6-5b89-41e7-b8b4-06bed310eba7', @p1=NULL (DbType = Guid), @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3='2648e864-9190-4484-a53c-8c263daebe4d' (Nullable = true), @p4=NULL (DbType = Guid), @p5='video', @p6='2025-09-25T18:43:23.2891393Z' (DbType = DateTime), @p7='system', @p8=NULL (DbType = Guid), @p9=NULL (DbType = DateTime), @p10=NULL, @p11=NULL, @p12=NULL, @p13=NULL, @p14=NULL, @p15='False', @p16='Hello {{1}} 👋
Aapka order successfully deliver ho chuka hai. 🚚✨
Kya aapne Nirvasa ka Vaji Amrit Vati lena start kar diya hai? 💊
Neeche diye gaye options me se select karke bataye 👇', @p17='Hello {{1}} 👋
Aapka order successfully deliver ho chuka hai. 🚚✨
Kya aapne Nirvasa ka Vaji Amrit Vati lena start kar diya hai? 💊
Neeche diye gaye options me se select karke bataye 👇' (Nullable = false), @p18='FC2' (Nullable = false), @p19='673199269218077', @p20='META_CLOUD', @p21=NULL (DbType = DateTime), @p22=NULL (DbType = Guid), @p23='Draft' (Nullable = false), @p24='welcome_video', @p25='[]', @p26='{"Provider":"meta_cloud","TemplateId":"1284099969686703","TemplateName":"welcome_video","Language":"en_US","HasHeaderMedia":true,"HeaderType":"VIDEO","BodyPlaceholders":[{"Index":1,"Label":null,"Example":null}],"Buttons":[{"Type":"QUICK_REPLY","Text":"Yes","Value":"","Order":0},{"Type":"QUICK_REPLY","Text":"No","Value":"","Order":1}]}' (DbType = Object), @p27='2025-09-25T18:43:23.2891394Z' (DbType = DateTime), @p28='https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4', @p29='b98a8d3d-43b5-4ea9-88c8-be79f4e0962b', @p30='8376ccd6-5b89-41e7-b8b4-06bed310eba7', @p31='True', @p32='2', @p33='No' (Nullable = false), @p34='QUICK_REPLY' (Nullable = false), @p35='' (Nullable = false), @p36='e407ce6c-41ea-411f-b759-a70412637bfd', @p37='8376ccd6-5b89-41e7-b8b4-06bed310eba7', @p38='True', @p39='1', @p40='Yes' (Nullable = false), @p41='QUICK_REPLY' (Nullable = false), @p42='' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "AudienceId", "BusinessId", "CTAFlowConfigId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "DocumentUrl", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "PhoneNumberId", "Provider", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "TemplateSchemaSnapshot", "UpdatedAt", "VideoUrl")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41, @p42);
2025-09-26 00:13:23.298 +05:30 [INF] ✅ Campaign 'FC2' created | Type:video | Header:video | FlowId:"2648e864-9190-4484-a53c-8c263daebe4d" | EntryTemplate:welcome_video | Sender:META_CLOUD/673199269218077 | Recipients:0
2025-09-26 00:13:23.301 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType64`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:13:23.302 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 1049.1809ms
2025-09-26 00:13:23.303 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-26 00:13:23.304 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 1056.4043ms
2025-09-26 00:13:23.325 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:13:23.328 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:13:23.329 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/csv-sample/schema - null null
2025-09-26 00:13:23.330 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:13:23.349 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:13:23.329 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 4.2708ms
2025-09-26 00:13:23.355 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/csv-sample/schema - 204 null null 26.4492ms
2025-09-26 00:13:23.355 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:13:23.330 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-26 00:13:23.329 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/8376ccd6-5b89-41e7-b8b4-06bed310eba7 - null null
2025-09-26 00:13:23.363 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:13:23.365 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/csv-sample/schema - null null
2025-09-26 00:13:23.366 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 36.3042ms
2025-09-26 00:13:23.368 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:13:23.370 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:13:23.371 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:13:23.373 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:13:23.376 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 46.0416ms
2025-09-26 00:13:23.377 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/8376ccd6-5b89-41e7-b8b4-06bed310eba7 - 204 null null 47.6839ms
2025-09-26 00:13:23.378 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:13:23.379 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:13:23.381 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/8376ccd6-5b89-41e7-b8b4-06bed310eba7 - null null
2025-09-26 00:13:23.383 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-26 00:13:23.384 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-26 00:13:23.385 +05:30 [INF] Route matched with {action = "GetSchema", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSchema(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 00:13:23.387 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:13:23.388 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:13:23.394 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-26 00:13:23.396 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8376ccd6-5b89-41e7-b8b4-06bed310eba7', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 00:13:23.397 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:13:23.395 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-26 00:13:23.393 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-26 00:13:23.405 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8376ccd6-5b89-41e7-b8b4-06bed310eba7', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AudienceId", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."DocumentUrl", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."TemplateSchemaSnapshot", t."UpdatedAt", t."VideoUrl", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", t."Id1", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value", t."BusinessId1", t."CreatedAt1", t."CreatedBy0", t."FlowName", t."IsActive0", t."IsPublished", t."UpdatedAt1"
FROM (
    SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0", c1."Id" AS "Id1", c1."BusinessId" AS "BusinessId1", c1."CreatedAt" AS "CreatedAt1", c1."CreatedBy" AS "CreatedBy0", c1."FlowName", c1."IsActive" AS "IsActive0", c1."IsPublished", c1."UpdatedAt" AS "UpdatedAt1"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    LEFT JOIN "CTAFlowConfigs" AS c1 ON c."CTAFlowConfigId" = c1."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t."Id0", t."Id1"
2025-09-26 00:13:23.401 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='welcome_video', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:13:23.403 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-26 00:13:23.409 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-09-26 00:13:23.406 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:13:23.411 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='welcome_video'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:13:23.412 +05:30 [INF] GetPagedContactsAsync: businessId="6b5cea67-e8e9-42f7-8bde-51a9dbc02d56", tab=all, page=1, pageSize=1000
2025-09-26 00:13:23.413 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 11.4489ms
2025-09-26 00:13:23.416 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType66`3[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType67`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:13:23.419 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-26 00:13:23.419 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-26 00:13:23.414 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 24.4695ms
2025-09-26 00:13:23.422 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/8376ccd6-5b89-41e7-b8b4-06bed310eba7 - 200 null application/json; charset=utf-8 41.1815ms
2025-09-26 00:13:23.421 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api) in 30.0127ms
2025-09-26 00:13:23.415 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:13:23.425 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:13:23.426 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."ProfileName", t."ProfileNameUpdatedAt", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-26 00:13:23.428 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/csv-sample/schema - null null
2025-09-26 00:13:23.429 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:13:23.431 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:13:23.432 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 69.1454ms
2025-09-26 00:13:23.434 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:13:23.436 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:13:23.436 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/csv-sample/schema - 200 null application/json; charset=utf-8 71.3616ms
2025-09-26 00:13:23.437 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:13:23.441 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 28.542ms
2025-09-26 00:13:23.441 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:13:23.445 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-26 00:13:23.446 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-26 00:13:23.447 +05:30 [INF] Route matched with {action = "GetSchema", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSchema(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 00:13:23.450 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-26 00:13:23.454 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8376ccd6-5b89-41e7-b8b4-06bed310eba7', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 00:13:23.449 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 66.0251ms
2025-09-26 00:13:23.456 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:13:23.458 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='welcome_video', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:13:23.462 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 13.8582ms
2025-09-26 00:13:23.465 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='welcome_video'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:13:23.465 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:13:23.467 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType66`3[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType67`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:13:23.468 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 53.007ms
2025-09-26 00:13:23.469 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api) in 16.4632ms
2025-09-26 00:13:23.472 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:13:23.473 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/csv-sample/schema - 200 null application/json; charset=utf-8 44.8011ms
2025-09-26 00:13:23.878 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:43:23.8768455+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:13:28.231 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch - null null
2025-09-26 00:13:28.234 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:13:28.234 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch - 204 null null 2.9229ms
2025-09-26 00:13:28.237 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/csv/batch - multipart/form-data; boundary=----WebKitFormBoundaryOzxnAHje8FVum1p5 239
2025-09-26 00:13:28.239 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:13:28.241 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api)'
2025-09-26 00:13:28.242 +05:30 [INF] Route matched with {action = "Upload", controller = "CsvBatch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Upload(xbytechat.api.Features.CampaignModule.DTOs.Requests.CsvBatchUploadForm, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController (xbytechat.api).
2025-09-26 00:13:28.247 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='34be26f8-2d25-4435-bbe2-7a9f24f28272', @p1=NULL (DbType = Guid), @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3=NULL, @p4='2025-09-25T18:43:28.2457448Z' (DbType = DateTime), @p5=NULL (DbType = Guid), @p6=NULL, @p7='csv_two_parameter.csv', @p8=NULL (DbType = Object), @p9='0', @p10='0', @p11='ingesting' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CsvBatches" ("Id", "AudienceId", "BusinessId", "Checksum", "CreatedAt", "CreatedByUserId", "ErrorMessage", "FileName", "HeadersJson", "RowCount", "SkippedCount", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-09-26 00:13:28.252 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='34be26f8-2d25-4435-bbe2-7a9f24f28272', @p0='["phone","parameter1"]' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CsvBatches" SET "HeadersJson" = @p0
WHERE "Id" = @p1;
2025-09-26 00:13:28.255 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='2391f864-ee86-4815-9182-c1650ccb4726', @p1='34be26f8-2d25-4435-bbe2-7a9f24f28272', @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3='2025-09-25T18:43:28.2543938Z' (DbType = DateTime), @p4=NULL, @p5=NULL, @p6='0', @p7='{"phone":"89740 05240","parameter1":"Robert Nicosta"}' (Nullable = false) (DbType = Object), @p8=NULL], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CsvRows" ("Id", "BatchId", "BusinessId", "CreatedAt", "PhoneE164", "PhoneRaw", "RowIndex", "RowJson", "ValidationError")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-09-26 00:13:28.260 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='34be26f8-2d25-4435-bbe2-7a9f24f28272', @p0='1', @p1='ready' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CsvBatches" SET "RowCount" = @p0, "Status" = @p1
WHERE "Id" = @p2;
2025-09-26 00:13:28.261 +05:30 [INF] CsvBatch "34be26f8-2d25-4435-bbe2-7a9f24f28272" ingested: 1 rows; headers=2
2025-09-26 00:13:28.262 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType70`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.CampaignModule.DTOs.CsvBatchUploadResultDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:13:28.263 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api) in 20.2325ms
2025-09-26 00:13:28.264 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api)'
2025-09-26 00:13:28.265 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/csv/batch - 200 null application/json; charset=utf-8 28.0927ms
2025-09-26 00:13:28.268 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch/34be26f8-2d25-4435-bbe2-7a9f24f28272/sample?take=10 - null null
2025-09-26 00:13:28.270 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:13:28.271 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch/34be26f8-2d25-4435-bbe2-7a9f24f28272/sample?take=10 - 204 null null 2.5918ms
2025-09-26 00:13:28.273 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/csv/batch/34be26f8-2d25-4435-bbe2-7a9f24f28272/sample?take=10 - null null
2025-09-26 00:13:28.276 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:13:28.277 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api)'
2025-09-26 00:13:28.278 +05:30 [INF] Route matched with {action = "Sample", controller = "CsvBatch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sample(System.Guid, Int32, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController (xbytechat.api).
2025-09-26 00:13:28.281 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__batchId_0='34be26f8-2d25-4435-bbe2-7a9f24f28272', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."HeadersJson", c."RowCount"
FROM "CsvBatches" AS c
WHERE c."Id" = @__batchId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:13:28.285 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__batchId_1='34be26f8-2d25-4435-bbe2-7a9f24f28272', @__p_2='10'], CommandType='"Text"', CommandTimeout='30']
SELECT c."RowIndex", c."Id", c."BatchId", c."BusinessId", c."CreatedAt", c."PhoneE164", c."PhoneRaw", c."RowJson", c."ValidationError"
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__batchId_1
ORDER BY c."RowIndex"
LIMIT @__p_2
2025-09-26 00:13:28.287 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType70`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IReadOnlyList`1[[xbytechat.api.Features.CampaignModule.DTOs.CsvRowSampleDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:13:28.288 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api) in 9.1333ms
2025-09-26 00:13:28.289 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api)'
2025-09-26 00:13:28.290 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/csv/batch/34be26f8-2d25-4435-bbe2-7a9f24f28272/sample?take=10 - 200 null application/json; charset=utf-8 16.9419ms
2025-09-26 00:13:28.293 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/mappings/suggest?batchId=34be26f8-2d25-4435-bbe2-7a9f24f28272 - null null
2025-09-26 00:13:28.295 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:13:28.296 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/mappings/suggest?batchId=34be26f8-2d25-4435-bbe2-7a9f24f28272 - 204 null null 2.5161ms
2025-09-26 00:13:28.298 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/mappings/suggest?batchId=34be26f8-2d25-4435-bbe2-7a9f24f28272 - null null
2025-09-26 00:13:28.300 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:13:28.301 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api)'
2025-09-26 00:13:28.302 +05:30 [INF] Route matched with {action = "Suggest", controller = "CampaignMappings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestAsync(System.Guid, System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController (xbytechat.api).
2025-09-26 00:13:28.306 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8376ccd6-5b89-41e7-b8b4-06bed310eba7', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateParameters"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:13:28.312 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__batchId_0='34be26f8-2d25-4435-bbe2-7a9f24f28272', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."HeadersJson"
FROM "CsvBatches" AS c
WHERE c."Id" = @__batchId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:13:28.314 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:13:28.315 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api) in 11.9379ms
2025-09-26 00:13:28.316 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api)'
2025-09-26 00:13:28.317 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/mappings/suggest?batchId=34be26f8-2d25-4435-bbe2-7a9f24f28272 - 200 null application/json; charset=utf-8 18.8276ms
2025-09-26 00:13:30.718 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/mappings - null null
2025-09-26 00:13:30.721 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:13:30.722 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/mappings - 204 null null 3.6423ms
2025-09-26 00:13:30.725 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/mappings - application/json 27
2025-09-26 00:13:30.727 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:13:30.728 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api)'
2025-09-26 00:13:30.729 +05:30 [INF] Route matched with {action = "Save", controller = "CampaignMappings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SaveAsync(System.Guid, System.Collections.Generic.Dictionary`2[System.String,System.String], System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController (xbytechat.api).
2025-09-26 00:13:30.731 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-26 00:13:30.732 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api) in 1.5818ms
2025-09-26 00:13:30.733 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api)'
2025-09-26 00:13:30.734 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/mappings - 204 null null 9.6917ms
2025-09-26 00:13:30.741 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/materialize - null null
2025-09-26 00:13:30.743 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:13:30.744 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/materialize - 204 null null 3.1135ms
2025-09-26 00:13:30.747 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/materialize - application/json 207
2025-09-26 00:13:30.749 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:13:30.750 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api)'
2025-09-26 00:13:30.751 +05:30 [INF] Route matched with {action = "CsvCreate", controller = "CampaignMaterialize"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeResponseDto]] CsvCreate(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeRequestDto, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController (xbytechat.api).
2025-09-26 00:13:30.754 +05:30 [INF] 📦 Materialize request: campaign="8376ccd6-5b89-41e7-b8b4-06bed310eba7" persist=true batch="34be26f8-2d25-4435-bbe2-7a9f24f28272" audience='Audience 2025-09-26'
2025-09-26 00:13:30.758 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8376ccd6-5b89-41e7-b8b4-06bed310eba7', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1)
2025-09-26 00:13:30.763 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__request_CsvBatchId_1='34be26f8-2d25-4435-bbe2-7a9f24f28272'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__request_CsvBatchId_1
2025-09-26 00:13:30.767 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__request_CsvBatchId_1='34be26f8-2d25-4435-bbe2-7a9f24f28272', @__p_2='200'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BatchId", c."BusinessId", c."CreatedAt", c."PhoneE164", c."PhoneRaw", c."RowIndex", c."RowJson", c."ValidationError"
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__request_CsvBatchId_1
ORDER BY c."RowIndex"
LIMIT @__p_2
2025-09-26 00:13:30.771 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8376ccd6-5b89-41e7-b8b4-06bed310eba7', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."MessageTemplate", c."TemplateId"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:13:30.775 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='welcome_video'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:13:30.782 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__r_Phone_1='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__8__locals1_businessId_0 AND c."PhoneNumber" = @__r_Phone_1
LIMIT 1
2025-09-26 00:13:30.803 +05:30 [INF] Executed DbCommand (16ms) [Parameters=[@p0='1532787c-35f9-4bf3-afb4-195e45a38b8f', @p1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p2=NULL (DbType = Guid), @p3='2025-09-25T18:43:30.7803771Z' (DbType = DateTime), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6=NULL, @p7='False', @p8='Audience 2025-09-26' (Nullable = false), @p9='2025-09-25T18:43:30.7803771Z' (Nullable = true) (DbType = DateTime), @p10='772579ee-8ab3-4bf2-b97e-9942246e1f0a', @p11='{"parameter1":"Robert Nicosta"}' (DbType = Object), @p12='1532787c-35f9-4bf3-afb4-195e45a38b8f', @p13='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p14='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p15='2025-09-25T18:43:30.7803771Z' (DbType = DateTime), @p16=NULL (DbType = Guid), @p17=NULL, @p18='False', @p19='False', @p20=NULL, @p21='918974005240', @p22=NULL, @p23=NULL (DbType = DateTime), @p24='2025-09-25T18:43:30.7803771Z' (Nullable = true) (DbType = DateTime), @p25='2d9514bd-54b4-411a-978e-01271aff4354', @p26='772579ee-8ab3-4bf2-b97e-9942246e1f0a' (Nullable = true), @p27=NULL, @p28='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p29='8376ccd6-5b89-41e7-b8b4-06bed310eba7', @p30=NULL, @p31=NULL, @p32='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p33='39E939E4FA06F4BA2774EA42456781EF4C04BD350126EA7A5165FDF44943F094', @p34='False', @p35='2025-09-25T18:43:30.7803771Z' (Nullable = true) (DbType = DateTime), @p36=NULL, @p37=NULL, @p38='{}' (DbType = Object), @p39='["Robert Nicosta"]' (DbType = Object), @p40=NULL (DbType = DateTime), @p41='Pending' (Nullable = false), @p42='2025-09-25T18:43:30.7803771Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Audiences" ("Id", "BusinessId", "CampaignId", "CreatedAt", "CreatedByUserId", "CsvBatchId", "Description", "IsDeleted", "Name", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
INSERT INTO "AudienceMembers" ("Id", "AttributesJson", "AudienceId", "BusinessId", "ContactId", "CreatedAt", "CreatedByUserId", "Email", "IsDeleted", "IsTransientContact", "Name", "PhoneE164", "PhoneRaw", "PromotedAt", "UpdatedAt")
VALUES (@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
INSERT INTO "CampaignRecipients" ("Id", "AudienceMemberId", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IdempotencyKey", "IsAutoTagged", "MaterializedAt", "MessagePreview", "ProductBrowsed", "ResolvedButtonUrlsJson", "ResolvedParametersJson", "SentAt", "Status", "UpdatedAt")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42);
2025-09-26 00:13:30.808 +05:30 [INF] 📦 Materialize result: campaign="8376ccd6-5b89-41e7-b8b4-06bed310eba7" materialized=1 skipped=0 audienceId="1532787c-35f9-4bf3-afb4-195e45a38b8f"
2025-09-26 00:13:30.810 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeResponseDto'.
2025-09-26 00:13:30.811 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api) in 57.9453ms
2025-09-26 00:13:30.812 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api)'
2025-09-26 00:13:30.814 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/materialize - 200 null application/json; charset=utf-8 66.7192ms
2025-09-26 00:13:33.885 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:43:33.8837578+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:13:35.670 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 00:13:35.672 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:13:35.673 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.1765ms
2025-09-26 00:13:35.676 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 00:13:35.679 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:13:35.680 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 00:13:35.680 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:13:35.686 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-09-26 00:13:35.688 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:13:35.690 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 7.6995ms
2025-09-26 00:13:35.691 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 00:13:35.691 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 15.0879ms
2025-09-26 00:13:37.234 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8376ccd6-5b89-41e7-b8b4-06bed310eba7 - null null
2025-09-26 00:13:37.237 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:13:37.238 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8376ccd6-5b89-41e7-b8b4-06bed310eba7 - 204 null null 3.6553ms
2025-09-26 00:13:37.240 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8376ccd6-5b89-41e7-b8b4-06bed310eba7 - null 0
2025-09-26 00:13:37.242 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:13:37.243 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 00:13:37.244 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:13:37.247 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8376ccd6-5b89-41e7-b8b4-06bed310eba7'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
ORDER BY c."Id"
LIMIT 1
2025-09-26 00:13:37.253 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8376ccd6-5b89-41e7-b8b4-06bed310eba7'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."AudienceMemberId", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IdempotencyKey", t0."IsAutoTagged", t0."MaterializedAt", t0."MessagePreview", t0."ProductBrowsed", t0."ResolvedButtonUrlsJson", t0."ResolvedParametersJson", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."ProfileName", t0."ProfileNameUpdatedAt", t0."Tags", t0."Id1", t0."AttributesJson", t0."AudienceId", t0."BusinessId1", t0."ContactId0", t0."CreatedAt0", t0."CreatedByUserId", t0."Email0", t0."IsDeleted", t0."IsTransientContact", t0."Name0", t0."PhoneE164", t0."PhoneRaw", t0."PromotedAt", t0."UpdatedAt0", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN (
    SELECT c0."Id", c0."AudienceMemberId", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IdempotencyKey", c0."IsAutoTagged", c0."MaterializedAt", c0."MessagePreview", c0."ProductBrowsed", c0."ResolvedButtonUrlsJson", c0."ResolvedParametersJson", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."ProfileName", c1."ProfileNameUpdatedAt", c1."Tags", a."Id" AS "Id1", a."AttributesJson", a."AudienceId", a."BusinessId" AS "BusinessId1", a."ContactId" AS "ContactId0", a."CreatedAt" AS "CreatedAt0", a."CreatedByUserId", a."Email" AS "Email0", a."IsDeleted", a."IsTransientContact", a."Name" AS "Name0", a."PhoneE164", a."PhoneRaw", a."PromotedAt", a."UpdatedAt" AS "UpdatedAt0"
    FROM "CampaignRecipients" AS c0
    LEFT JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
    LEFT JOIN "AudienceMembers" AS a ON c0."AudienceMemberId" = a."Id"
) AS t0 ON t."Id" = t0."CampaignId"
ORDER BY t."Id"
2025-09-26 00:13:37.256 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8376ccd6-5b89-41e7-b8b4-06bed310eba7'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."CampaignId", c0."IsFromTemplate", c0."Position", c0."Title", c0."Type", c0."Value", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN "CampaignButtons" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-26 00:13:37.260 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__flowId_Value_0='2648e864-9190-4484-a53c-8c263daebe4d', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", t0."Id", t0."CTAFlowConfigId", t0."PositionX", t0."PositionY", t0."ProfileNameSlot", t0."RequiredSource", t0."RequiredTag", t0."StepOrder", t0."TemplateToSend", t0."TemplateType", t0."TriggerButtonText", t0."TriggerButtonType", t0."UseProfileName", t0."Id0", t0."ButtonIndex", t0."ButtonSubType", t0."ButtonText", t0."ButtonType", t0."ButtonValue", t0."CTAFlowStepId", t0."NextStepId"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."Id" = @__flowId_Value_0 AND c."BusinessId" = @__businessId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."CTAFlowConfigId", c0."PositionX", c0."PositionY", c0."ProfileNameSlot", c0."RequiredSource", c0."RequiredTag", c0."StepOrder", c0."TemplateToSend", c0."TemplateType", c0."TriggerButtonText", c0."TriggerButtonType", c0."UseProfileName", f."Id" AS "Id0", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
    FROM "CTAFlowSteps" AS c0
    LEFT JOIN "FlowButtonLinks" AS f ON c0."Id" = f."CTAFlowStepId"
) AS t0 ON t."Id" = t0."CTAFlowConfigId"
ORDER BY t."Id", t0."Id"
2025-09-26 00:13:37.263 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:13:37.265 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:13:37.266 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:13:38.090 +05:30 [INF] Received HTTP response headers after 822.7783ms - 200
2025-09-26 00:13:38.092 +05:30 [INF] End processing HTTP request after 826.5056ms - 200
2025-09-26 00:13:38.153 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaign_CTAFlowConfigId_Value_0='2648e864-9190-4484-a53c-8c263daebe4d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "CTAFlowSteps" AS c
WHERE c."CTAFlowConfigId" = @__campaign_CTAFlowConfigId_Value_0
ORDER BY c."StepOrder"
LIMIT 1
2025-09-26 00:13:38.157 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 00:13:38.161 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 00:13:40.509 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:13:40.510 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:13:42.412 +05:30 [INF] Received HTTP response headers after 1901.3268ms - 200
2025-09-26 00:13:42.414 +05:30 [INF] End processing HTTP request after 1905.2383ms - 200
2025-09-26 00:13:42.417 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageLogId_0='daaa4ad6-4856-47f6-9173-e8ed1326e6ed', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:13:42.423 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p2='2d9514bd-54b4-411a-978e-01271aff4354', @p0='5da6bf853ae5361ee2c96b4de6defb800b5120f840013c5212e112a3f2ddb6dc', @p1='2025-09-25T18:43:38.1560840Z' (DbType = DateTime), @p3='daaa4ad6-4856-47f6-9173-e8ed1326e6ed', @p4='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p5='[{"i":0,"position":1,"text":"Yes","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"position":2,"text":"No","type":"QUICK_REPLY","subType":"quick_reply"}]', @p6='2648e864-9190-4484-a53c-8c263daebe4d' (Nullable = true), @p7='6facc21f-73f8-4ff0-878b-47e403d102b5' (Nullable = true), @p8='8376ccd6-5b89-41e7-b8b4-06bed310eba7' (Nullable = true), @p9='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p10=NULL, @p11=NULL, @p12=NULL (DbType = DateTime), @p13='2025-09-25T18:43:38.1560840Z' (DbType = DateTime), @p14=NULL, @p15=NULL (DbType = Int32), @p16=NULL (DbType = Boolean), @p17='False', @p18='https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4', @p19='welcome_video' (Nullable = false), @p20='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQ5MjRENUNCNUVDNEJENEZDAA==', @p21=NULL (DbType = Decimal), @p22=NULL, @p23='META_CLOUD', @p24='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQ5MjRENUNCNUVDNEJENEZDAA==', @p25='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQ5MjRENUNCNUVDNEJENEZDAA==","message_status":"accepted"}]}', @p26='918974005240' (Nullable = false), @p27=NULL (DbType = Guid), @p28=NULL, @p29='3ad9d5f7-e778-40c1-806b-81fbced901a3' (Nullable = true), @p30='2025-09-25T18:43:38.1560840Z' (Nullable = true) (DbType = DateTime), @p31='campaign', @p32='Sent' (Nullable = false), @p33='40fd981c-4253-4aea-b7a1-5bb16251a8e5', @p34='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p35=NULL, @p36=NULL, @p37='2025-09-25T18:43:42.4197736+00:00' (DbType = DateTime), @p38='send_response' (Nullable = false), @p39=NULL (DbType = Boolean), @p40='daaa4ad6-4856-47f6-9173-e8ed1326e6ed' (Nullable = true), @p41='2025-09-25T18:43:42.4197743+00:00' (DbType = DateTime), @p42='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQ5MjRENUNCNUVDNEJENEZDAA==","message_status":"accepted"}]}' (Nullable = false), @p43=NULL (DbType = Decimal), @p44=NULL, @p45='META_CLOUD' (Nullable = false), @p46='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQ5MjRENUNCNUVDNEJENEZDAA=='], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignRecipients" SET "IdempotencyKey" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32)
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46);
2025-09-26 00:13:42.428 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='bd21215c-cbe3-4c9f-89b3-302e866ef65e', @p1='True', @p2=NULL, @p3='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p4='[{"i":0,"position":1,"text":"Yes","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"position":2,"text":"No","type":"QUICK_REPLY","subType":"quick_reply"}]', @p5='2648e864-9190-4484-a53c-8c263daebe4d' (Nullable = true), @p6='6facc21f-73f8-4ff0-878b-47e403d102b5' (Nullable = true), @p7='8376ccd6-5b89-41e7-b8b4-06bed310eba7', @p8=NULL, @p9=NULL, @p10=NULL (DbType = DateTime), @p11='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p12=NULL, @p13='2025-09-25T18:43:38.1560840Z' (DbType = DateTime), @p14='system', @p15=NULL (DbType = DateTime), @p16=NULL, @p17=NULL, @p18=NULL, @p19=NULL, @p20='False', @p21=NULL (DbType = DateTime), @p22=NULL, @p23=NULL, @p24='Hello {{1}} 👋
Aapka order successfully deliver ho chuka hai. 🚚✨
Kya aapne Nirvasa ka Vaji Amrit Vati lena start kar diya hai? 💊
Neeche diye gaye options me se select karke bataye 👇' (Nullable = false), @p25='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQ5MjRENUNCNUVDNEJENEZDAA==', @p26='daaa4ad6-4856-47f6-9173-e8ed1326e6ed' (Nullable = true), @p27=NULL (DbType = DateTime), @p28='2d9514bd-54b4-411a-978e-01271aff4354', @p29='0', @p30='3ad9d5f7-e778-40c1-806b-81fbced901a3' (Nullable = true), @p31='Sent', @p32='2025-09-25T18:43:38.1560840Z' (Nullable = true) (DbType = DateTime), @p33='video_template', @p34='welcome_video', @p35=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-09-26 00:13:42.430 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:13:42.431 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 5186.2261ms
2025-09-26 00:13:42.432 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 00:13:42.433 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8376ccd6-5b89-41e7-b8b4-06bed310eba7 - 200 null application/json; charset=utf-8 5193.1737ms
2025-09-26 00:13:43.954 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:43:43.8973072+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:13:50.262 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 574
2025-09-26 00:13:50.265 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:13:50.266 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 00:13:50.268 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQ5MjRENUNCNUVDNEJENEZDAA==","status":"failed","timestamp":"1758825829","recipient_id":"918974005240","errors":[{"code":131053,"title":"Media upload error","message":"Media upload error","error_data":{"details":"Media downloaded from the provided url exceeds maximum allowed size."}}]}]},"field":"messages"}]}]}
2025-09-26 00:13:50.269 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 00:13:50.270 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQ5MjRENUNCNUVDNEJENEZDAA==","status":"failed","timestamp":"1758825829","recipient_id":"918974005240","errors":[{"code":131053,"title":"Media upload error","message":"Media upload error","error_data":{"details":"Media downloaded from the provided url exceeds maximum allowed size."}}]}]},"field":"messages"}]}]}
2025-09-26 00:13:50.270 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:13:50.273 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.489ms
2025-09-26 00:13:50.273 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-26 00:13:50.275 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:13:50.277 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-26 00:13:50.278 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 16.0978ms
2025-09-26 00:13:50.280 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-26 00:13:50.283 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 00:13:50.286 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQ5MjRENUNCNUVDNEJENEZDAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 00:13:50.289 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='bd21215c-cbe3-4c9f-89b3-302e866ef65e'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 00:13:50.293 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='bd21215c-cbe3-4c9f-89b3-302e866ef65e', @p0='Failed'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "SendStatus" = @p0
WHERE "Id" = @p1;
2025-09-26 00:13:50.295 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQ5MjRENUNCNUVDNEJENEZDAA== → Failed
2025-09-26 00:13:53.968 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:43:53.9669892+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:14:01.141 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8376ccd6-5b89-41e7-b8b4-06bed310eba7 - null null
2025-09-26 00:14:01.143 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:14:01.144 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8376ccd6-5b89-41e7-b8b4-06bed310eba7 - 204 null null 3.2657ms
2025-09-26 00:14:01.147 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8376ccd6-5b89-41e7-b8b4-06bed310eba7 - null 0
2025-09-26 00:14:01.149 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:14:01.150 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 00:14:01.151 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:14:01.157 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8376ccd6-5b89-41e7-b8b4-06bed310eba7'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
ORDER BY c."Id"
LIMIT 1
2025-09-26 00:14:01.165 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='8376ccd6-5b89-41e7-b8b4-06bed310eba7'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."AudienceMemberId", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IdempotencyKey", t0."IsAutoTagged", t0."MaterializedAt", t0."MessagePreview", t0."ProductBrowsed", t0."ResolvedButtonUrlsJson", t0."ResolvedParametersJson", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."ProfileName", t0."ProfileNameUpdatedAt", t0."Tags", t0."Id1", t0."AttributesJson", t0."AudienceId", t0."BusinessId1", t0."ContactId0", t0."CreatedAt0", t0."CreatedByUserId", t0."Email0", t0."IsDeleted", t0."IsTransientContact", t0."Name0", t0."PhoneE164", t0."PhoneRaw", t0."PromotedAt", t0."UpdatedAt0", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN (
    SELECT c0."Id", c0."AudienceMemberId", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IdempotencyKey", c0."IsAutoTagged", c0."MaterializedAt", c0."MessagePreview", c0."ProductBrowsed", c0."ResolvedButtonUrlsJson", c0."ResolvedParametersJson", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."ProfileName", c1."ProfileNameUpdatedAt", c1."Tags", a."Id" AS "Id1", a."AttributesJson", a."AudienceId", a."BusinessId" AS "BusinessId1", a."ContactId" AS "ContactId0", a."CreatedAt" AS "CreatedAt0", a."CreatedByUserId", a."Email" AS "Email0", a."IsDeleted", a."IsTransientContact", a."Name" AS "Name0", a."PhoneE164", a."PhoneRaw", a."PromotedAt", a."UpdatedAt" AS "UpdatedAt0"
    FROM "CampaignRecipients" AS c0
    LEFT JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
    LEFT JOIN "AudienceMembers" AS a ON c0."AudienceMemberId" = a."Id"
) AS t0 ON t."Id" = t0."CampaignId"
ORDER BY t."Id"
2025-09-26 00:14:01.169 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8376ccd6-5b89-41e7-b8b4-06bed310eba7'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."CampaignId", c0."IsFromTemplate", c0."Position", c0."Title", c0."Type", c0."Value", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN "CampaignButtons" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-26 00:14:01.173 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__flowId_Value_0='2648e864-9190-4484-a53c-8c263daebe4d', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", t0."Id", t0."CTAFlowConfigId", t0."PositionX", t0."PositionY", t0."ProfileNameSlot", t0."RequiredSource", t0."RequiredTag", t0."StepOrder", t0."TemplateToSend", t0."TemplateType", t0."TriggerButtonText", t0."TriggerButtonType", t0."UseProfileName", t0."Id0", t0."ButtonIndex", t0."ButtonSubType", t0."ButtonText", t0."ButtonType", t0."ButtonValue", t0."CTAFlowStepId", t0."NextStepId"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."Id" = @__flowId_Value_0 AND c."BusinessId" = @__businessId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."CTAFlowConfigId", c0."PositionX", c0."PositionY", c0."ProfileNameSlot", c0."RequiredSource", c0."RequiredTag", c0."StepOrder", c0."TemplateToSend", c0."TemplateType", c0."TriggerButtonText", c0."TriggerButtonType", c0."UseProfileName", f."Id" AS "Id0", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
    FROM "CTAFlowSteps" AS c0
    LEFT JOIN "FlowButtonLinks" AS f ON c0."Id" = f."CTAFlowStepId"
) AS t0 ON t."Id" = t0."CTAFlowConfigId"
ORDER BY t."Id", t0."Id"
2025-09-26 00:14:01.176 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:14:01.178 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:14:01.179 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:14:01.989 +05:30 [INF] Received HTTP response headers after 808.3956ms - 200
2025-09-26 00:14:01.990 +05:30 [INF] End processing HTTP request after 811.6274ms - 200
2025-09-26 00:14:02.134 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaign_CTAFlowConfigId_Value_0='2648e864-9190-4484-a53c-8c263daebe4d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "CTAFlowSteps" AS c
WHERE c."CTAFlowConfigId" = @__campaign_CTAFlowConfigId_Value_0
ORDER BY c."StepOrder"
LIMIT 1
2025-09-26 00:14:02.139 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 00:14:02.142 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 00:14:03.773 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:14:03.774 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:14:03.987 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:44:03.9853728+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:14:04.370 +05:30 [INF] Received HTTP response headers after 594.6557ms - 200
2025-09-26 00:14:04.371 +05:30 [INF] End processing HTTP request after 598.4034ms - 200
2025-09-26 00:14:04.375 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageLogId_0='2d988a30-a932-4879-a209-d40f605d9838', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:14:04.380 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='2d9514bd-54b4-411a-978e-01271aff4354', @p0='2025-09-25T18:44:02.1369839Z' (DbType = DateTime), @p2='2d988a30-a932-4879-a209-d40f605d9838', @p3='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p4='[{"i":0,"position":1,"text":"Yes","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"position":2,"text":"No","type":"QUICK_REPLY","subType":"quick_reply"}]', @p5='2648e864-9190-4484-a53c-8c263daebe4d' (Nullable = true), @p6='6facc21f-73f8-4ff0-878b-47e403d102b5' (Nullable = true), @p7='8376ccd6-5b89-41e7-b8b4-06bed310eba7' (Nullable = true), @p8='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p9=NULL, @p10=NULL, @p11=NULL (DbType = DateTime), @p12='2025-09-25T18:44:02.1369839Z' (DbType = DateTime), @p13=NULL, @p14=NULL (DbType = Int32), @p15=NULL (DbType = Boolean), @p16='False', @p17='https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4', @p18='welcome_video' (Nullable = false), @p19='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjI2MENCNUY4QkJDNjREOEE1AA==', @p20=NULL (DbType = Decimal), @p21=NULL, @p22='META_CLOUD', @p23='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjI2MENCNUY4QkJDNjREOEE1AA==', @p24='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjI2MENCNUY4QkJDNjREOEE1AA==","message_status":"accepted"}]}', @p25='918974005240' (Nullable = false), @p26=NULL (DbType = Guid), @p27=NULL, @p28='929a2947-46b1-47d7-9fbd-5b5ab7cb4a8a' (Nullable = true), @p29='2025-09-25T18:44:02.1369839Z' (Nullable = true) (DbType = DateTime), @p30='campaign', @p31='Sent' (Nullable = false), @p32='4591d9a5-22b0-4980-963e-36eb4ed6bed1', @p33='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p34=NULL, @p35=NULL, @p36='2025-09-25T18:44:04.3773867+00:00' (DbType = DateTime), @p37='send_response' (Nullable = false), @p38=NULL (DbType = Boolean), @p39='2d988a30-a932-4879-a209-d40f605d9838' (Nullable = true), @p40='2025-09-25T18:44:04.3773879+00:00' (DbType = DateTime), @p41='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjI2MENCNUY4QkJDNjREOEE1AA==","message_status":"accepted"}]}' (Nullable = false), @p42=NULL (DbType = Decimal), @p43=NULL, @p44='META_CLOUD' (Nullable = false), @p45='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjI2MENCNUY4QkJDNjREOEE1AA=='], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignRecipients" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31)
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45);
2025-09-26 00:14:04.386 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='5633e3af-4961-44fc-a2a3-54b19a2caf21', @p1='True', @p2=NULL, @p3='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p4='[{"i":0,"position":1,"text":"Yes","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"position":2,"text":"No","type":"QUICK_REPLY","subType":"quick_reply"}]', @p5='2648e864-9190-4484-a53c-8c263daebe4d' (Nullable = true), @p6='6facc21f-73f8-4ff0-878b-47e403d102b5' (Nullable = true), @p7='8376ccd6-5b89-41e7-b8b4-06bed310eba7', @p8=NULL, @p9=NULL, @p10=NULL (DbType = DateTime), @p11='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p12=NULL, @p13='2025-09-25T18:44:02.1369839Z' (DbType = DateTime), @p14='system', @p15=NULL (DbType = DateTime), @p16=NULL, @p17=NULL, @p18=NULL, @p19=NULL, @p20='False', @p21=NULL (DbType = DateTime), @p22=NULL, @p23=NULL, @p24='Hello {{1}} 👋
Aapka order successfully deliver ho chuka hai. 🚚✨
Kya aapne Nirvasa ka Vaji Amrit Vati lena start kar diya hai? 💊
Neeche diye gaye options me se select karke bataye 👇' (Nullable = false), @p25='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjI2MENCNUY4QkJDNjREOEE1AA==', @p26='2d988a30-a932-4879-a209-d40f605d9838' (Nullable = true), @p27=NULL (DbType = DateTime), @p28='2d9514bd-54b4-411a-978e-01271aff4354', @p29='0', @p30='929a2947-46b1-47d7-9fbd-5b5ab7cb4a8a' (Nullable = true), @p31='Sent', @p32='2025-09-25T18:44:02.1369839Z' (Nullable = true) (DbType = DateTime), @p33='video_template', @p34='welcome_video', @p35=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-09-26 00:14:04.388 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:14:04.389 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 3235.6553ms
2025-09-26 00:14:04.390 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 00:14:04.391 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8376ccd6-5b89-41e7-b8b4-06bed310eba7 - 200 null application/json; charset=utf-8 3244.2285ms
2025-09-26 00:14:11.372 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 574
2025-09-26 00:14:11.375 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:14:11.376 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 00:14:11.378 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjI2MENCNUY4QkJDNjREOEE1AA==","status":"failed","timestamp":"1758825850","recipient_id":"918974005240","errors":[{"code":131053,"title":"Media upload error","message":"Media upload error","error_data":{"details":"Media downloaded from the provided url exceeds maximum allowed size."}}]}]},"field":"messages"}]}]}
2025-09-26 00:14:11.379 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 00:14:11.379 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjI2MENCNUY4QkJDNjREOEE1AA==","status":"failed","timestamp":"1758825850","recipient_id":"918974005240","errors":[{"code":131053,"title":"Media upload error","message":"Media upload error","error_data":{"details":"Media downloaded from the provided url exceeds maximum allowed size."}}]}]},"field":"messages"}]}]}
2025-09-26 00:14:11.380 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:14:11.381 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 00:14:11.382 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.3357ms
2025-09-26 00:14:11.385 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjI2MENCNUY4QkJDNjREOEE1AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 00:14:11.385 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:14:11.388 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 16.4414ms
2025-09-26 00:14:11.388 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='5633e3af-4961-44fc-a2a3-54b19a2caf21'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 00:14:11.395 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='5633e3af-4961-44fc-a2a3-54b19a2caf21', @p0='Failed'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "SendStatus" = @p0
WHERE "Id" = @p1;
2025-09-26 00:14:11.397 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjI2MENCNUY4QkJDNjREOEE1AA== → Failed
2025-09-26 00:14:13.999 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:44:13.9976016+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:14:24.017 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:44:24.0156417+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:14:33.121 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-26 00:14:33.121 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-26 00:14:33.123 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:14:33.125 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:14:33.126 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 5.3515ms
2025-09-26 00:14:33.127 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 204 null null 5.0865ms
2025-09-26 00:14:33.129 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-26 00:14:33.132 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-26 00:14:33.135 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:14:33.137 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:14:33.138 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-26 00:14:33.138 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-26 00:14:33.142 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-26 00:14:33.142 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-26 00:14:33.151 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-26 00:14:33.156 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-09-26 00:14:33.162 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 18.52ms
2025-09-26 00:14:33.164 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-26 00:14:33.165 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 35.8395ms
2025-09-26 00:14:33.168 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-26 00:14:33.169 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-26 00:14:33.177 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:14:33.181 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:14:33.181 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 13.5242ms
2025-09-26 00:14:33.182 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 13.2374ms
2025-09-26 00:14:33.190 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-26 00:14:33.192 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:14:33.193 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-26 00:14:33.193 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-26 00:14:33.197 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-26 00:14:33.200 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:14:33.202 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 7.3058ms
2025-09-26 00:14:33.203 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-26 00:14:33.204 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-26 00:14:33.204 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 14.6807ms
2025-09-26 00:14:33.207 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:14:33.210 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-26 00:14:33.211 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-26 00:14:33.216 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-26 00:14:33.219 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:14:33.221 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 7.5513ms
2025-09-26 00:14:33.222 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-26 00:14:33.223 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 19.3165ms
2025-09-26 00:14:33.229 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='PINNACLE'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-26 00:14:33.230 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:14:33.231 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 85.985ms
2025-09-26 00:14:33.232 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-26 00:14:33.233 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 200 null application/json; charset=utf-8 101.0142ms
2025-09-26 00:14:34.021 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:44:34.0193718+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:14:34.539 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection/current - null null
2025-09-26 00:14:34.541 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:14:34.542 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection/current - 204 null null 3.4301ms
2025-09-26 00:14:34.544 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection/current - application/json 2
2025-09-26 00:14:34.547 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:14:34.547 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnectionCurrent (xbytechat.api)'
2025-09-26 00:14:34.551 +05:30 [INF] Route matched with {action = "TestConnectionCurrent", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnectionCurrent() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-26 00:14:34.556 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-26 00:14:34.562 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-09-26 00:14:34.563 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-09-26 00:14:35.865 +05:30 [INF] Received HTTP response headers after 1301.6728ms - 200
2025-09-26 00:14:35.867 +05:30 [INF] End processing HTTP request after 1304.9206ms - 200
2025-09-26 00:14:35.872 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:14:35.873 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnectionCurrent (xbytechat.api) in 1321.1951ms
2025-09-26 00:14:35.875 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnectionCurrent (xbytechat.api)'
2025-09-26 00:14:35.876 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection/current - 200 null application/json; charset=utf-8 1331.2056ms
2025-09-26 00:14:43.304 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-09-26 00:14:43.307 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:14:43.308 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 3.4221ms
2025-09-26 00:14:43.311 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 559
2025-09-26 00:14:43.313 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:14:43.314 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-26 00:14:43.317 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-26 00:14:43.327 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_BusinessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__dto_Provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0 AND w."Provider" = @__dto_Provider_1
LIMIT 1
2025-09-26 00:14:43.333 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='fc65f9cd-52a8-4041-a8fb-a074df588451', @p0='EAAUbmP4285YBPoATze76URw2r5KWlgQwN3A6ZAqB4heBLsAZAeu1ZBURIr2PNRXXRDDQrvCiHCystle0K4IOE7big33jb06ZAZAZBaGsc1h5xczhDqs0FFttM7Afi4o7oHtRXTRTrbJM0vWVYxs391zCroawka5NdOdZAaXf5xYlT05Be2Kf0vrA4HUUY9RVwkjHM9e4bWELStctFRyFNycawexWoypWFc4ZC6rzyys7GoI7giKRNkiggBjkVE2atBsZD' (Nullable = false), @p1='2025-09-25T18:44:43.3317320Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "ApiKey" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-09-26 00:14:43.335 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:14:43.337 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 18.0681ms
2025-09-26 00:14:43.338 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-26 00:14:43.338 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 27.8379ms
2025-09-26 00:14:44.031 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:44:44.0292449+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:14:47.759 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 00:14:47.762 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:14:47.762 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.6878ms
2025-09-26 00:14:47.768 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 00:14:47.770 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:14:47.772 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 00:14:47.773 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:14:47.781 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-09-26 00:14:47.783 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:14:47.784 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 9.1005ms
2025-09-26 00:14:47.785 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 00:14:47.786 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 18.2898ms
2025-09-26 00:14:50.992 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:14:50.995 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:14:50.996 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 3.2594ms
2025-09-26 00:14:50.998 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/csv-sample/schema - null null
2025-09-26 00:14:51.001 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/8376ccd6-5b89-41e7-b8b4-06bed310eba7 - null null
2025-09-26 00:14:51.001 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-26 00:14:51.001 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:14:51.003 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:14:51.004 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:14:51.007 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:14:51.009 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:14:51.012 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:14:51.014 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:14:51.014 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/csv-sample/schema - 204 null null 16.0638ms
2025-09-26 00:14:51.015 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/8376ccd6-5b89-41e7-b8b4-06bed310eba7 - 204 null null 14.4816ms
2025-09-26 00:14:51.016 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 14.6576ms
2025-09-26 00:14:51.017 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 15.6972ms
2025-09-26 00:14:51.018 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:14:51.023 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/csv-sample/schema - null null
2025-09-26 00:14:51.026 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/8376ccd6-5b89-41e7-b8b4-06bed310eba7 - null null
2025-09-26 00:14:51.029 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-26 00:14:51.029 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-26 00:14:51.031 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:14:51.033 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:14:51.039 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-26 00:14:51.039 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:14:51.035 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:14:51.041 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-26 00:14:51.043 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:14:51.044 +05:30 [INF] Route matched with {action = "GetSchema", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSchema(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 00:14:51.044 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-26 00:14:51.045 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:14:51.046 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 9.4278ms
2025-09-26 00:14:51.050 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8376ccd6-5b89-41e7-b8b4-06bed310eba7', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 00:14:51.054 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:14:51.056 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8376ccd6-5b89-41e7-b8b4-06bed310eba7', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AudienceId", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."DocumentUrl", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."TemplateSchemaSnapshot", t."UpdatedAt", t."VideoUrl", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", t."Id1", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value", t."BusinessId1", t."CreatedAt1", t."CreatedBy0", t."FlowName", t."IsActive0", t."IsPublished", t."UpdatedAt1"
FROM (
    SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0", c1."Id" AS "Id1", c1."BusinessId" AS "BusinessId1", c1."CreatedAt" AS "CreatedAt1", c1."CreatedBy" AS "CreatedBy0", c1."FlowName", c1."IsActive" AS "IsActive0", c1."IsPublished", c1."UpdatedAt" AS "UpdatedAt1"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    LEFT JOIN "CTAFlowConfigs" AS c1 ON c."CTAFlowConfigId" = c1."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t."Id0", t."Id1"
2025-09-26 00:14:51.047 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:14:51.049 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-26 00:14:51.060 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 56.9872ms
2025-09-26 00:14:51.060 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='welcome_video', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:14:51.062 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-09-26 00:14:51.064 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:14:51.066 +05:30 [INF] GetPagedContactsAsync: businessId="6b5cea67-e8e9-42f7-8bde-51a9dbc02d56", tab=all, page=1, pageSize=1000
2025-09-26 00:14:51.071 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='welcome_video'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:14:51.072 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 19.1375ms
2025-09-26 00:14:51.076 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-26 00:14:51.073 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:14:51.080 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-26 00:14:51.079 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType66`3[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType67`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:14:51.083 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-26 00:14:51.084 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."ProfileName", t."ProfileNameUpdatedAt", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-26 00:14:51.089 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-26 00:14:51.084 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/8376ccd6-5b89-41e7-b8b4-06bed310eba7 - 200 null application/json; charset=utf-8 58.3845ms
2025-09-26 00:14:51.086 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api) in 38.0196ms
2025-09-26 00:14:51.092 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:14:51.094 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:14:51.097 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/csv-sample/schema - null null
2025-09-26 00:14:51.098 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:14:51.099 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 33.6894ms
2025-09-26 00:14:51.100 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 12.5017ms
2025-09-26 00:14:51.102 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:14:51.103 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/csv-sample/schema - 200 null application/json; charset=utf-8 79.7434ms
2025-09-26 00:14:51.104 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-26 00:14:51.106 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:14:51.107 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:14:51.110 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 81.5892ms
2025-09-26 00:14:51.111 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 64.096ms
2025-09-26 00:14:51.112 +05:30 [INF] Route matched with {action = "GetSchema", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSchema(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 00:14:51.122 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8376ccd6-5b89-41e7-b8b4-06bed310eba7', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 00:14:51.127 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='welcome_video', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:14:51.131 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='welcome_video'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:14:51.134 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType66`3[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType67`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:14:51.135 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api) in 15.8539ms
2025-09-26 00:14:51.137 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:14:51.138 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/csv-sample/schema - 200 null application/json; charset=utf-8 41.3636ms
2025-09-26 00:14:54.038 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:44:54.0366352+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:15:00.655 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch - null null
2025-09-26 00:15:00.658 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:15:00.658 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch - 204 null null 3.143ms
2025-09-26 00:15:00.663 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/csv/batch - multipart/form-data; boundary=----WebKitFormBoundary7QEEfOmox22Foop5 239
2025-09-26 00:15:00.665 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:15:00.666 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api)'
2025-09-26 00:15:00.667 +05:30 [INF] Route matched with {action = "Upload", controller = "CsvBatch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Upload(xbytechat.api.Features.CampaignModule.DTOs.Requests.CsvBatchUploadForm, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController (xbytechat.api).
2025-09-26 00:15:00.671 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='2af598fa-8002-488d-9511-92b24dbd4f04', @p1=NULL (DbType = Guid), @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3=NULL, @p4='2025-09-25T18:45:00.6696256Z' (DbType = DateTime), @p5=NULL (DbType = Guid), @p6=NULL, @p7='csv_two_parameter.csv', @p8=NULL (DbType = Object), @p9='0', @p10='0', @p11='ingesting' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CsvBatches" ("Id", "AudienceId", "BusinessId", "Checksum", "CreatedAt", "CreatedByUserId", "ErrorMessage", "FileName", "HeadersJson", "RowCount", "SkippedCount", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-09-26 00:15:00.677 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='2af598fa-8002-488d-9511-92b24dbd4f04', @p0='["phone","parameter1"]' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CsvBatches" SET "HeadersJson" = @p0
WHERE "Id" = @p1;
2025-09-26 00:15:00.680 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='5d5dcb3c-5e06-4c25-9890-32bef6c02c73', @p1='2af598fa-8002-488d-9511-92b24dbd4f04', @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3='2025-09-25T18:45:00.6789227Z' (DbType = DateTime), @p4=NULL, @p5=NULL, @p6='0', @p7='{"phone":"89740 05240","parameter1":"Robert Nicosta"}' (Nullable = false) (DbType = Object), @p8=NULL], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CsvRows" ("Id", "BatchId", "BusinessId", "CreatedAt", "PhoneE164", "PhoneRaw", "RowIndex", "RowJson", "ValidationError")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-09-26 00:15:00.684 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='2af598fa-8002-488d-9511-92b24dbd4f04', @p0='1', @p1='ready' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CsvBatches" SET "RowCount" = @p0, "Status" = @p1
WHERE "Id" = @p2;
2025-09-26 00:15:00.686 +05:30 [INF] CsvBatch "2af598fa-8002-488d-9511-92b24dbd4f04" ingested: 1 rows; headers=2
2025-09-26 00:15:00.688 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType70`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.CampaignModule.DTOs.CsvBatchUploadResultDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:15:00.689 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api) in 20.3643ms
2025-09-26 00:15:00.690 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api)'
2025-09-26 00:15:00.691 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/csv/batch - 200 null application/json; charset=utf-8 28.5757ms
2025-09-26 00:15:00.695 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch/2af598fa-8002-488d-9511-92b24dbd4f04/sample?take=10 - null null
2025-09-26 00:15:00.699 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:15:00.700 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch/2af598fa-8002-488d-9511-92b24dbd4f04/sample?take=10 - 204 null null 4.2866ms
2025-09-26 00:15:00.707 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/csv/batch/2af598fa-8002-488d-9511-92b24dbd4f04/sample?take=10 - null null
2025-09-26 00:15:00.709 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:15:00.710 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api)'
2025-09-26 00:15:00.711 +05:30 [INF] Route matched with {action = "Sample", controller = "CsvBatch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sample(System.Guid, Int32, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController (xbytechat.api).
2025-09-26 00:15:00.714 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__batchId_0='2af598fa-8002-488d-9511-92b24dbd4f04', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."HeadersJson", c."RowCount"
FROM "CsvBatches" AS c
WHERE c."Id" = @__batchId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:15:00.720 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__batchId_1='2af598fa-8002-488d-9511-92b24dbd4f04', @__p_2='10'], CommandType='"Text"', CommandTimeout='30']
SELECT c."RowIndex", c."Id", c."BatchId", c."BusinessId", c."CreatedAt", c."PhoneE164", c."PhoneRaw", c."RowJson", c."ValidationError"
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__batchId_1
ORDER BY c."RowIndex"
LIMIT @__p_2
2025-09-26 00:15:00.722 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType70`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IReadOnlyList`1[[xbytechat.api.Features.CampaignModule.DTOs.CsvRowSampleDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:15:00.723 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api) in 10.3571ms
2025-09-26 00:15:00.724 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api)'
2025-09-26 00:15:00.725 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/csv/batch/2af598fa-8002-488d-9511-92b24dbd4f04/sample?take=10 - 200 null application/json; charset=utf-8 18.268ms
2025-09-26 00:15:00.728 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/mappings/suggest?batchId=2af598fa-8002-488d-9511-92b24dbd4f04 - null null
2025-09-26 00:15:00.730 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:15:00.730 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/mappings/suggest?batchId=2af598fa-8002-488d-9511-92b24dbd4f04 - 204 null null 2.6156ms
2025-09-26 00:15:00.733 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/mappings/suggest?batchId=2af598fa-8002-488d-9511-92b24dbd4f04 - null null
2025-09-26 00:15:00.736 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:15:00.737 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api)'
2025-09-26 00:15:00.738 +05:30 [INF] Route matched with {action = "Suggest", controller = "CampaignMappings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestAsync(System.Guid, System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController (xbytechat.api).
2025-09-26 00:15:00.742 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8376ccd6-5b89-41e7-b8b4-06bed310eba7', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateParameters"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:15:00.747 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__batchId_0='2af598fa-8002-488d-9511-92b24dbd4f04', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."HeadersJson"
FROM "CsvBatches" AS c
WHERE c."Id" = @__batchId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:15:00.751 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:15:00.752 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api) in 12.1753ms
2025-09-26 00:15:00.754 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api)'
2025-09-26 00:15:00.755 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/mappings/suggest?batchId=2af598fa-8002-488d-9511-92b24dbd4f04 - 200 null application/json; charset=utf-8 21.5354ms
2025-09-26 00:15:02.806 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/mappings - null null
2025-09-26 00:15:02.808 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:15:02.809 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/mappings - 204 null null 3.3744ms
2025-09-26 00:15:02.813 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/mappings - application/json 27
2025-09-26 00:15:02.815 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:15:02.817 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api)'
2025-09-26 00:15:02.818 +05:30 [INF] Route matched with {action = "Save", controller = "CampaignMappings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SaveAsync(System.Guid, System.Collections.Generic.Dictionary`2[System.String,System.String], System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController (xbytechat.api).
2025-09-26 00:15:02.819 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-26 00:15:02.820 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api) in 1.0159ms
2025-09-26 00:15:02.821 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api)'
2025-09-26 00:15:02.822 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/mappings - 204 null null 9.248ms
2025-09-26 00:15:02.825 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/materialize - null null
2025-09-26 00:15:02.827 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:15:02.828 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/materialize - 204 null null 2.4236ms
2025-09-26 00:15:02.831 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/materialize - application/json 207
2025-09-26 00:15:02.833 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:15:02.834 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api)'
2025-09-26 00:15:02.835 +05:30 [INF] Route matched with {action = "CsvCreate", controller = "CampaignMaterialize"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeResponseDto]] CsvCreate(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeRequestDto, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController (xbytechat.api).
2025-09-26 00:15:02.838 +05:30 [INF] 📦 Materialize request: campaign="8376ccd6-5b89-41e7-b8b4-06bed310eba7" persist=true batch="2af598fa-8002-488d-9511-92b24dbd4f04" audience='Audience 2025-09-26'
2025-09-26 00:15:02.840 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8376ccd6-5b89-41e7-b8b4-06bed310eba7', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1)
2025-09-26 00:15:02.844 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__request_CsvBatchId_1='2af598fa-8002-488d-9511-92b24dbd4f04'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__request_CsvBatchId_1
2025-09-26 00:15:02.848 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__request_CsvBatchId_1='2af598fa-8002-488d-9511-92b24dbd4f04', @__p_2='200'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BatchId", c."BusinessId", c."CreatedAt", c."PhoneE164", c."PhoneRaw", c."RowIndex", c."RowJson", c."ValidationError"
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__request_CsvBatchId_1
ORDER BY c."RowIndex"
LIMIT @__p_2
2025-09-26 00:15:02.851 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8376ccd6-5b89-41e7-b8b4-06bed310eba7', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."MessageTemplate", c."TemplateId"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:15:02.854 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='welcome_video'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:15:02.862 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__r_Phone_1='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__8__locals1_businessId_0 AND c."PhoneNumber" = @__r_Phone_1
LIMIT 1
2025-09-26 00:15:02.869 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='db912f57-25db-426e-9ba4-06753557f54c', @p1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p2=NULL (DbType = Guid), @p3='2025-09-25T18:45:02.8613231Z' (DbType = DateTime), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6=NULL, @p7='False', @p8='Audience 2025-09-26' (Nullable = false), @p9='2025-09-25T18:45:02.8613231Z' (Nullable = true) (DbType = DateTime), @p10='09f3324e-1716-4c2e-a521-c1cdcc0177f0', @p11='{"parameter1":"Robert Nicosta"}' (DbType = Object), @p12='db912f57-25db-426e-9ba4-06753557f54c', @p13='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p14='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p15='2025-09-25T18:45:02.8613231Z' (DbType = DateTime), @p16=NULL (DbType = Guid), @p17=NULL, @p18='False', @p19='False', @p20=NULL, @p21='918974005240', @p22=NULL, @p23=NULL (DbType = DateTime), @p24='2025-09-25T18:45:02.8613231Z' (Nullable = true) (DbType = DateTime), @p25='333e3174-c979-4eae-ad03-ce1d37f7c6df', @p26='09f3324e-1716-4c2e-a521-c1cdcc0177f0' (Nullable = true), @p27=NULL, @p28='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p29='8376ccd6-5b89-41e7-b8b4-06bed310eba7', @p30=NULL, @p31=NULL, @p32='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p33='39E939E4FA06F4BA2774EA42456781EF4C04BD350126EA7A5165FDF44943F094', @p34='False', @p35='2025-09-25T18:45:02.8613231Z' (Nullable = true) (DbType = DateTime), @p36=NULL, @p37=NULL, @p38='{}' (DbType = Object), @p39='["Robert Nicosta"]' (DbType = Object), @p40=NULL (DbType = DateTime), @p41='Pending' (Nullable = false), @p42='2025-09-25T18:45:02.8613231Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Audiences" ("Id", "BusinessId", "CampaignId", "CreatedAt", "CreatedByUserId", "CsvBatchId", "Description", "IsDeleted", "Name", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
INSERT INTO "AudienceMembers" ("Id", "AttributesJson", "AudienceId", "BusinessId", "ContactId", "CreatedAt", "CreatedByUserId", "Email", "IsDeleted", "IsTransientContact", "Name", "PhoneE164", "PhoneRaw", "PromotedAt", "UpdatedAt")
VALUES (@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
INSERT INTO "CampaignRecipients" ("Id", "AudienceMemberId", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IdempotencyKey", "IsAutoTagged", "MaterializedAt", "MessagePreview", "ProductBrowsed", "ResolvedButtonUrlsJson", "ResolvedParametersJson", "SentAt", "Status", "UpdatedAt")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42);
2025-09-26 00:15:02.872 +05:30 [INF] 📦 Materialize result: campaign="8376ccd6-5b89-41e7-b8b4-06bed310eba7" materialized=1 skipped=0 audienceId="db912f57-25db-426e-9ba4-06753557f54c"
2025-09-26 00:15:02.873 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeResponseDto'.
2025-09-26 00:15:02.874 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api) in 38.2391ms
2025-09-26 00:15:02.875 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api)'
2025-09-26 00:15:02.876 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaigns/8376ccd6-5b89-41e7-b8b4-06bed310eba7/materialize - 200 null application/json; charset=utf-8 45.5514ms
2025-09-26 00:15:04.046 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:45:04.0444097+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:15:07.045 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 00:15:07.048 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:15:07.048 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 3.4608ms
2025-09-26 00:15:07.053 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 00:15:07.056 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:15:07.057 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 00:15:07.058 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:15:07.064 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-09-26 00:15:07.067 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:15:07.068 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 7.6707ms
2025-09-26 00:15:07.069 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 00:15:07.070 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 16.7832ms
2025-09-26 00:15:08.469 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8376ccd6-5b89-41e7-b8b4-06bed310eba7 - null null
2025-09-26 00:15:08.471 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:15:08.472 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8376ccd6-5b89-41e7-b8b4-06bed310eba7 - 204 null null 3.3951ms
2025-09-26 00:15:08.475 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8376ccd6-5b89-41e7-b8b4-06bed310eba7 - null 0
2025-09-26 00:15:08.477 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:15:08.477 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 00:15:08.478 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:15:08.482 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8376ccd6-5b89-41e7-b8b4-06bed310eba7'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
ORDER BY c."Id"
LIMIT 1
2025-09-26 00:15:08.487 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8376ccd6-5b89-41e7-b8b4-06bed310eba7'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."AudienceMemberId", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IdempotencyKey", t0."IsAutoTagged", t0."MaterializedAt", t0."MessagePreview", t0."ProductBrowsed", t0."ResolvedButtonUrlsJson", t0."ResolvedParametersJson", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."ProfileName", t0."ProfileNameUpdatedAt", t0."Tags", t0."Id1", t0."AttributesJson", t0."AudienceId", t0."BusinessId1", t0."ContactId0", t0."CreatedAt0", t0."CreatedByUserId", t0."Email0", t0."IsDeleted", t0."IsTransientContact", t0."Name0", t0."PhoneE164", t0."PhoneRaw", t0."PromotedAt", t0."UpdatedAt0", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN (
    SELECT c0."Id", c0."AudienceMemberId", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IdempotencyKey", c0."IsAutoTagged", c0."MaterializedAt", c0."MessagePreview", c0."ProductBrowsed", c0."ResolvedButtonUrlsJson", c0."ResolvedParametersJson", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."ProfileName", c1."ProfileNameUpdatedAt", c1."Tags", a."Id" AS "Id1", a."AttributesJson", a."AudienceId", a."BusinessId" AS "BusinessId1", a."ContactId" AS "ContactId0", a."CreatedAt" AS "CreatedAt0", a."CreatedByUserId", a."Email" AS "Email0", a."IsDeleted", a."IsTransientContact", a."Name" AS "Name0", a."PhoneE164", a."PhoneRaw", a."PromotedAt", a."UpdatedAt" AS "UpdatedAt0"
    FROM "CampaignRecipients" AS c0
    LEFT JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
    LEFT JOIN "AudienceMembers" AS a ON c0."AudienceMemberId" = a."Id"
) AS t0 ON t."Id" = t0."CampaignId"
ORDER BY t."Id"
2025-09-26 00:15:08.490 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8376ccd6-5b89-41e7-b8b4-06bed310eba7'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."CampaignId", c0."IsFromTemplate", c0."Position", c0."Title", c0."Type", c0."Value", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN "CampaignButtons" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-26 00:15:08.494 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__flowId_Value_0='2648e864-9190-4484-a53c-8c263daebe4d', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", t0."Id", t0."CTAFlowConfigId", t0."PositionX", t0."PositionY", t0."ProfileNameSlot", t0."RequiredSource", t0."RequiredTag", t0."StepOrder", t0."TemplateToSend", t0."TemplateType", t0."TriggerButtonText", t0."TriggerButtonType", t0."UseProfileName", t0."Id0", t0."ButtonIndex", t0."ButtonSubType", t0."ButtonText", t0."ButtonType", t0."ButtonValue", t0."CTAFlowStepId", t0."NextStepId"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."Id" = @__flowId_Value_0 AND c."BusinessId" = @__businessId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."CTAFlowConfigId", c0."PositionX", c0."PositionY", c0."ProfileNameSlot", c0."RequiredSource", c0."RequiredTag", c0."StepOrder", c0."TemplateToSend", c0."TemplateType", c0."TriggerButtonText", c0."TriggerButtonType", c0."UseProfileName", f."Id" AS "Id0", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
    FROM "CTAFlowSteps" AS c0
    LEFT JOIN "FlowButtonLinks" AS f ON c0."Id" = f."CTAFlowStepId"
) AS t0 ON t."Id" = t0."CTAFlowConfigId"
ORDER BY t."Id", t0."Id"
2025-09-26 00:15:08.498 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:15:08.500 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:15:08.501 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:15:09.214 +05:30 [INF] Received HTTP response headers after 712.2076ms - 200
2025-09-26 00:15:09.215 +05:30 [INF] End processing HTTP request after 715.8343ms - 200
2025-09-26 00:15:09.268 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaign_CTAFlowConfigId_Value_0='2648e864-9190-4484-a53c-8c263daebe4d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "CTAFlowSteps" AS c
WHERE c."CTAFlowConfigId" = @__campaign_CTAFlowConfigId_Value_0
ORDER BY c."StepOrder"
LIMIT 1
2025-09-26 00:15:09.273 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 00:15:09.277 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 00:15:15.650 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:15:15.652 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:45:15.6501808+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:15:15.652 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:15:16.590 +05:30 [INF] Received HTTP response headers after 935.3688ms - 200
2025-09-26 00:15:16.592 +05:30 [INF] End processing HTTP request after 941.4419ms - 200
2025-09-26 00:15:19.444 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageLogId_0='0e6d12e7-9323-4f4d-83dd-cb4f8d31618e', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:15:19.448 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='2d9514bd-54b4-411a-978e-01271aff4354', @p0='2025-09-25T18:45:09.2713053Z' (DbType = DateTime), @p2='0e6d12e7-9323-4f4d-83dd-cb4f8d31618e', @p3='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p4='[{"i":0,"position":1,"text":"Yes","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"position":2,"text":"No","type":"QUICK_REPLY","subType":"quick_reply"}]', @p5='2648e864-9190-4484-a53c-8c263daebe4d' (Nullable = true), @p6='6facc21f-73f8-4ff0-878b-47e403d102b5' (Nullable = true), @p7='8376ccd6-5b89-41e7-b8b4-06bed310eba7' (Nullable = true), @p8='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p9=NULL, @p10=NULL, @p11=NULL (DbType = DateTime), @p12='2025-09-25T18:45:09.2713053Z' (DbType = DateTime), @p13=NULL, @p14=NULL (DbType = Int32), @p15=NULL (DbType = Boolean), @p16='False', @p17='https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4', @p18='welcome_video' (Nullable = false), @p19='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTZDNDJFQzUwNzQ0QjRCRUJBAA==', @p20=NULL (DbType = Decimal), @p21=NULL, @p22='META_CLOUD', @p23='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTZDNDJFQzUwNzQ0QjRCRUJBAA==', @p24='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTZDNDJFQzUwNzQ0QjRCRUJBAA==","message_status":"accepted"}]}', @p25='918974005240' (Nullable = false), @p26=NULL (DbType = Guid), @p27=NULL, @p28='de3cfaf5-f74a-4f4c-9621-ea5dc009c312' (Nullable = true), @p29='2025-09-25T18:45:09.2713053Z' (Nullable = true) (DbType = DateTime), @p30='campaign', @p31='Sent' (Nullable = false), @p32='0773a76a-ad41-42f0-b526-9659aeb59194', @p33='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p34=NULL, @p35=NULL, @p36='2025-09-25T18:45:19.4461907+00:00' (DbType = DateTime), @p37='send_response' (Nullable = false), @p38=NULL (DbType = Boolean), @p39='0e6d12e7-9323-4f4d-83dd-cb4f8d31618e' (Nullable = true), @p40='2025-09-25T18:45:19.4461924+00:00' (DbType = DateTime), @p41='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTZDNDJFQzUwNzQ0QjRCRUJBAA==","message_status":"accepted"}]}' (Nullable = false), @p42=NULL (DbType = Decimal), @p43=NULL, @p44='META_CLOUD' (Nullable = false), @p45='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTZDNDJFQzUwNzQ0QjRCRUJBAA=='], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignRecipients" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31)
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45);
2025-09-26 00:15:19.452 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 00:15:19.455 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 00:15:23.118 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:15:23.119 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:15:23.950 +05:30 [INF] Received HTTP response headers after 830.5788ms - 200
2025-09-26 00:15:23.952 +05:30 [INF] End processing HTTP request after 834.0855ms - 200
2025-09-26 00:15:23.955 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageLogId_0='92352119-feb0-47fe-8992-f7f5c9e480a5', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:15:23.960 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='333e3174-c979-4eae-ad03-ce1d37f7c6df', @p0='5da6bf853ae5361ee2c96b4de6defb800b5120f840013c5212e112a3f2ddb6dc', @p1='2025-09-25T18:45:09.2713053Z' (DbType = DateTime), @p3='42926ee9-a110-4e22-80ee-fead48d7aa3d', @p4='True', @p5=NULL, @p6='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p7='[{"i":0,"position":1,"text":"Yes","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"position":2,"text":"No","type":"QUICK_REPLY","subType":"quick_reply"}]', @p8='2648e864-9190-4484-a53c-8c263daebe4d' (Nullable = true), @p9='6facc21f-73f8-4ff0-878b-47e403d102b5' (Nullable = true), @p10='8376ccd6-5b89-41e7-b8b4-06bed310eba7', @p11=NULL, @p12=NULL, @p13=NULL (DbType = DateTime), @p14='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p15=NULL, @p16='2025-09-25T18:45:09.2713053Z' (DbType = DateTime), @p17='system', @p18=NULL (DbType = DateTime), @p19=NULL, @p20=NULL, @p21=NULL, @p22=NULL, @p23='False', @p24=NULL (DbType = DateTime), @p25=NULL, @p26=NULL, @p27='Hello {{1}} 👋
Aapka order successfully deliver ho chuka hai. 🚚✨
Kya aapne Nirvasa ka Vaji Amrit Vati lena start kar diya hai? 💊
Neeche diye gaye options me se select karke bataye 👇' (Nullable = false), @p28='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTZDNDJFQzUwNzQ0QjRCRUJBAA==', @p29='0e6d12e7-9323-4f4d-83dd-cb4f8d31618e' (Nullable = true), @p30=NULL (DbType = DateTime), @p31='2d9514bd-54b4-411a-978e-01271aff4354', @p32='0', @p33='de3cfaf5-f74a-4f4c-9621-ea5dc009c312' (Nullable = true), @p34='Sent', @p35='2025-09-25T18:45:09.2713053Z' (Nullable = true) (DbType = DateTime), @p36='video_template', @p37='welcome_video', @p38=NULL (DbType = Guid), @p39='92352119-feb0-47fe-8992-f7f5c9e480a5', @p40='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p41='[{"i":0,"position":1,"text":"Yes","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"position":2,"text":"No","type":"QUICK_REPLY","subType":"quick_reply"}]', @p42='2648e864-9190-4484-a53c-8c263daebe4d' (Nullable = true), @p43='6facc21f-73f8-4ff0-878b-47e403d102b5' (Nullable = true), @p44='8376ccd6-5b89-41e7-b8b4-06bed310eba7' (Nullable = true), @p45='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p46=NULL, @p47=NULL, @p48=NULL (DbType = DateTime), @p49='2025-09-25T18:45:09.2713053Z' (DbType = DateTime), @p50=NULL, @p51=NULL (DbType = Int32), @p52=NULL (DbType = Boolean), @p53='False', @p54='https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4', @p55='welcome_video' (Nullable = false), @p56='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTY0OTVEOTQyNjhCMDJEMjM2AA==', @p57=NULL (DbType = Decimal), @p58=NULL, @p59='META_CLOUD', @p60='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTY0OTVEOTQyNjhCMDJEMjM2AA==', @p61='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTY0OTVEOTQyNjhCMDJEMjM2AA==","message_status":"accepted"}]}', @p62='918974005240' (Nullable = false), @p63=NULL (DbType = Guid), @p64=NULL, @p65='9f5cbad8-fcf9-4c20-b4ca-ab43f3cd2811' (Nullable = true), @p66='2025-09-25T18:45:09.2713053Z' (Nullable = true) (DbType = DateTime), @p67='campaign', @p68='Sent' (Nullable = false), @p69='a5e7190b-a62f-4458-b7af-6f6b99c14e02', @p70='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p71=NULL, @p72=NULL, @p73='2025-09-25T18:45:23.9573928+00:00' (DbType = DateTime), @p74='send_response' (Nullable = false), @p75=NULL (DbType = Boolean), @p76='92352119-feb0-47fe-8992-f7f5c9e480a5' (Nullable = true), @p77='2025-09-25T18:45:23.9573937+00:00' (DbType = DateTime), @p78='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTY0OTVEOTQyNjhCMDJEMjM2AA==","message_status":"accepted"}]}' (Nullable = false), @p79=NULL (DbType = Decimal), @p80=NULL, @p81='META_CLOUD' (Nullable = false), @p82='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTY0OTVEOTQyNjhCMDJEMjM2AA=='], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignRecipients" SET "IdempotencyKey" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68)
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82);
2025-09-26 00:15:23.965 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='765a1ec6-8f93-47ce-9591-960d9d1ee46c', @p1='True', @p2=NULL, @p3='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p4='[{"i":0,"position":1,"text":"Yes","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"position":2,"text":"No","type":"QUICK_REPLY","subType":"quick_reply"}]', @p5='2648e864-9190-4484-a53c-8c263daebe4d' (Nullable = true), @p6='6facc21f-73f8-4ff0-878b-47e403d102b5' (Nullable = true), @p7='8376ccd6-5b89-41e7-b8b4-06bed310eba7', @p8=NULL, @p9=NULL, @p10=NULL (DbType = DateTime), @p11='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p12=NULL, @p13='2025-09-25T18:45:09.2713053Z' (DbType = DateTime), @p14='system', @p15=NULL (DbType = DateTime), @p16=NULL, @p17=NULL, @p18=NULL, @p19=NULL, @p20='False', @p21=NULL (DbType = DateTime), @p22=NULL, @p23=NULL, @p24='Hello {{1}} 👋
Aapka order successfully deliver ho chuka hai. 🚚✨
Kya aapne Nirvasa ka Vaji Amrit Vati lena start kar diya hai? 💊
Neeche diye gaye options me se select karke bataye 👇' (Nullable = false), @p25='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTY0OTVEOTQyNjhCMDJEMjM2AA==', @p26='92352119-feb0-47fe-8992-f7f5c9e480a5' (Nullable = true), @p27=NULL (DbType = DateTime), @p28='333e3174-c979-4eae-ad03-ce1d37f7c6df', @p29='0', @p30='9f5cbad8-fcf9-4c20-b4ca-ab43f3cd2811' (Nullable = true), @p31='Sent', @p32='2025-09-25T18:45:09.2713053Z' (Nullable = true) (DbType = DateTime), @p33='video_template', @p34='welcome_video', @p35=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-09-26 00:15:23.967 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:15:23.968 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 15488.4019ms
2025-09-26 00:15:23.970 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 00:15:23.971 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8376ccd6-5b89-41e7-b8b4-06bed310eba7 - 200 null application/json; charset=utf-8 15495.9183ms
2025-09-26 00:15:24.021 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 574
2025-09-26 00:15:24.023 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:15:24.024 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 00:15:24.025 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTZDNDJFQzUwNzQ0QjRCRUJBAA==","status":"failed","timestamp":"1758825922","recipient_id":"918974005240","errors":[{"code":131053,"title":"Media upload error","message":"Media upload error","error_data":{"details":"Media downloaded from the provided url exceeds maximum allowed size."}}]}]},"field":"messages"}]}]}
2025-09-26 00:15:24.026 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 00:15:24.026 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTZDNDJFQzUwNzQ0QjRCRUJBAA==","status":"failed","timestamp":"1758825922","recipient_id":"918974005240","errors":[{"code":131053,"title":"Media upload error","message":"Media upload error","error_data":{"details":"Media downloaded from the provided url exceeds maximum allowed size."}}]}]},"field":"messages"}]}]}
2025-09-26 00:15:24.027 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:15:24.027 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 00:15:24.028 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.293ms
2025-09-26 00:15:24.031 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTZDNDJFQzUwNzQ0QjRCRUJBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 00:15:24.031 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:15:24.034 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='42926ee9-a110-4e22-80ee-fead48d7aa3d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 00:15:24.035 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.9662ms
2025-09-26 00:15:24.037 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='42926ee9-a110-4e22-80ee-fead48d7aa3d', @p0='Failed'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "SendStatus" = @p0
WHERE "Id" = @p1;
2025-09-26 00:15:24.040 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQTZDNDJFQzUwNzQ0QjRCRUJBAA== → Failed
2025-09-26 00:15:25.665 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:45:25.6632650+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:15:31.488 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 574
2025-09-26 00:15:31.490 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:15:31.492 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 00:15:31.494 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTY0OTVEOTQyNjhCMDJEMjM2AA==","status":"failed","timestamp":"1758825930","recipient_id":"918974005240","errors":[{"code":131053,"title":"Media upload error","message":"Media upload error","error_data":{"details":"Media downloaded from the provided url exceeds maximum allowed size."}}]}]},"field":"messages"}]}]}
2025-09-26 00:15:31.495 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 00:15:31.495 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTY0OTVEOTQyNjhCMDJEMjM2AA==","status":"failed","timestamp":"1758825930","recipient_id":"918974005240","errors":[{"code":131053,"title":"Media upload error","message":"Media upload error","error_data":{"details":"Media downloaded from the provided url exceeds maximum allowed size."}}]}]},"field":"messages"}]}]}
2025-09-26 00:15:31.496 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:15:31.496 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 00:15:31.498 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.2571ms
2025-09-26 00:15:31.500 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTY0OTVEOTQyNjhCMDJEMjM2AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 00:15:31.501 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:15:31.504 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='765a1ec6-8f93-47ce-9591-960d9d1ee46c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 00:15:31.504 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 16.3055ms
2025-09-26 00:15:31.507 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='765a1ec6-8f93-47ce-9591-960d9d1ee46c', @p0='Failed'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "SendStatus" = @p0
WHERE "Id" = @p1;
2025-09-26 00:15:31.511 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNTY0OTVEOTQyNjhCMDJEMjM2AA== → Failed
2025-09-26 00:15:34.597 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 479
2025-09-26 00:15:34.600 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:15:34.601 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 00:15:34.603 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQUZEMzAxMTY5NDg4RDc1RUZGODQxQ0RDOThGNTc4M0QA","timestamp":"1758825932","text":{"body":"Hi"},"type":"text"}]},"field":"messages"}]}]}
2025-09-26 00:15:34.605 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 00:15:34.605 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQUZEMzAxMTY5NDg4RDc1RUZGODQxQ0RDOThGNTc4M0QA","timestamp":"1758825932","text":{"body":"Hi"},"type":"text"}]},"field":"messages"}]}]}
2025-09-26 00:15:34.606 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:15:34.607 +05:30 [INF] 💬 Routing to InboundMessageProcessor (type: text)
2025-09-26 00:15:34.608 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.042ms
2025-09-26 00:15:34.610 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:15:34.611 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.7192ms
2025-09-26 00:15:38.716 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:45:38.7144754+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:15:38.719 +05:30 [WRN] Collection navigations are only considered null if their parent entity is null. Use 'Any' to check whether collection navigation 'Business.WhatsAppSettings' is empty.
2025-09-26 00:15:38.731 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w0."Id", w0."ApiKey", w0."ApiUrl", w0."BusinessId", w0."CreatedAt", w0."IsActive", w0."PhoneNumberId", w0."Provider", w0."SenderDisplayName", w0."UpdatedAt", w0."WabaId", w0."WebhookCallbackUrl", w0."WebhookSecret", w0."WebhookVerifyToken", w0."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w0 ON b."Id" = w0."BusinessId"
WHERE EXISTS (
    SELECT 1
    FROM "WhatsAppSettings" AS w
    WHERE b."Id" = w."BusinessId" AND w."WhatsAppBusinessNumber" IS NOT NULL)
ORDER BY b."Id"
2025-09-26 00:15:38.767 +05:30 [WRN] ❌ Business not found for WhatsApp number: 15551622077
2025-09-26 00:15:48.725 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:45:48.7234686+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:15:58.739 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:45:58.7353705+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:16:02.340 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/c228097f-bfd5-4730-8f2a-42d8be1077ba - null null
2025-09-26 00:16:02.343 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:16:02.344 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/c228097f-bfd5-4730-8f2a-42d8be1077ba - 204 null null 3.5416ms
2025-09-26 00:16:02.346 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/c228097f-bfd5-4730-8f2a-42d8be1077ba - null 0
2025-09-26 00:16:02.348 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:16:02.349 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 00:16:02.350 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:16:02.354 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='c228097f-bfd5-4730-8f2a-42d8be1077ba'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
ORDER BY c."Id"
LIMIT 1
2025-09-26 00:16:02.359 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='c228097f-bfd5-4730-8f2a-42d8be1077ba'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."AudienceMemberId", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IdempotencyKey", t0."IsAutoTagged", t0."MaterializedAt", t0."MessagePreview", t0."ProductBrowsed", t0."ResolvedButtonUrlsJson", t0."ResolvedParametersJson", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."ProfileName", t0."ProfileNameUpdatedAt", t0."Tags", t0."Id1", t0."AttributesJson", t0."AudienceId", t0."BusinessId1", t0."ContactId0", t0."CreatedAt0", t0."CreatedByUserId", t0."Email0", t0."IsDeleted", t0."IsTransientContact", t0."Name0", t0."PhoneE164", t0."PhoneRaw", t0."PromotedAt", t0."UpdatedAt0", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN (
    SELECT c0."Id", c0."AudienceMemberId", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IdempotencyKey", c0."IsAutoTagged", c0."MaterializedAt", c0."MessagePreview", c0."ProductBrowsed", c0."ResolvedButtonUrlsJson", c0."ResolvedParametersJson", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."ProfileName", c1."ProfileNameUpdatedAt", c1."Tags", a."Id" AS "Id1", a."AttributesJson", a."AudienceId", a."BusinessId" AS "BusinessId1", a."ContactId" AS "ContactId0", a."CreatedAt" AS "CreatedAt0", a."CreatedByUserId", a."Email" AS "Email0", a."IsDeleted", a."IsTransientContact", a."Name" AS "Name0", a."PhoneE164", a."PhoneRaw", a."PromotedAt", a."UpdatedAt" AS "UpdatedAt0"
    FROM "CampaignRecipients" AS c0
    LEFT JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
    LEFT JOIN "AudienceMembers" AS a ON c0."AudienceMemberId" = a."Id"
) AS t0 ON t."Id" = t0."CampaignId"
ORDER BY t."Id"
2025-09-26 00:16:02.362 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='c228097f-bfd5-4730-8f2a-42d8be1077ba'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."CampaignId", c0."IsFromTemplate", c0."Position", c0."Title", c0."Type", c0."Value", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN "CampaignButtons" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-26 00:16:02.366 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__flowId_Value_0='1bd9d06d-5f69-428b-9250-41b6c91854b0', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", t0."Id", t0."CTAFlowConfigId", t0."PositionX", t0."PositionY", t0."ProfileNameSlot", t0."RequiredSource", t0."RequiredTag", t0."StepOrder", t0."TemplateToSend", t0."TemplateType", t0."TriggerButtonText", t0."TriggerButtonType", t0."UseProfileName", t0."Id0", t0."ButtonIndex", t0."ButtonSubType", t0."ButtonText", t0."ButtonType", t0."ButtonValue", t0."CTAFlowStepId", t0."NextStepId"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."Id" = @__flowId_Value_0 AND c."BusinessId" = @__businessId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."CTAFlowConfigId", c0."PositionX", c0."PositionY", c0."ProfileNameSlot", c0."RequiredSource", c0."RequiredTag", c0."StepOrder", c0."TemplateToSend", c0."TemplateType", c0."TriggerButtonText", c0."TriggerButtonType", c0."UseProfileName", f."Id" AS "Id0", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
    FROM "CTAFlowSteps" AS c0
    LEFT JOIN "FlowButtonLinks" AS f ON c0."Id" = f."CTAFlowStepId"
) AS t0 ON t."Id" = t0."CTAFlowConfigId"
ORDER BY t."Id", t0."Id"
2025-09-26 00:16:02.369 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:16:02.371 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:16:02.372 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:16:03.319 +05:30 [INF] Received HTTP response headers after 946.3473ms - 200
2025-09-26 00:16:03.321 +05:30 [INF] End processing HTTP request after 949.8142ms - 200
2025-09-26 00:16:03.405 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaign_CTAFlowConfigId_Value_0='1bd9d06d-5f69-428b-9250-41b6c91854b0'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "CTAFlowSteps" AS c
WHERE c."CTAFlowConfigId" = @__campaign_CTAFlowConfigId_Value_0
ORDER BY c."StepOrder"
LIMIT 1
2025-09-26 00:16:03.409 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 00:16:03.413 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 00:16:06.681 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:16:06.682 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:16:07.484 +05:30 [INF] Received HTTP response headers after 800.7878ms - 200
2025-09-26 00:16:07.486 +05:30 [INF] End processing HTTP request after 804.7373ms - 200
2025-09-26 00:16:07.489 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageLogId_0='dd2b7d7e-2df2-4bc6-80c3-28db0904f798', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:16:07.494 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='3da49fdc-2ea4-483e-a86a-39ceb13776da', @p0='2025-09-25T18:46:03.4082076Z' (DbType = DateTime), @p2='dd2b7d7e-2df2-4bc6-80c3-28db0904f798', @p3='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p4='[{"i":0,"position":1,"text":"Yes","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"position":2,"text":"No","type":"QUICK_REPLY","subType":"quick_reply"}]', @p5='1bd9d06d-5f69-428b-9250-41b6c91854b0' (Nullable = true), @p6='d9d6e925-b959-48c4-9ad4-a7a8a72804b3' (Nullable = true), @p7='c228097f-bfd5-4730-8f2a-42d8be1077ba' (Nullable = true), @p8='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p9=NULL, @p10=NULL, @p11=NULL (DbType = DateTime), @p12='2025-09-25T18:46:03.4082076Z' (DbType = DateTime), @p13=NULL, @p14=NULL (DbType = Int32), @p15=NULL (DbType = Boolean), @p16='False', @p17='https://whatsappdata.s3.ap-south-1.amazonaws.com/userMedia/dab49080d80c724aad5ebf158d63df41/vde_templ.mp4', @p18='welcome_video' (Nullable = false), @p19='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDRFNUY3NjcyQTI3MDEyOTMzAA==', @p20=NULL (DbType = Decimal), @p21=NULL, @p22='META_CLOUD', @p23='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDRFNUY3NjcyQTI3MDEyOTMzAA==', @p24='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDRFNUY3NjcyQTI3MDEyOTMzAA==","message_status":"accepted"}]}', @p25='918974005240' (Nullable = false), @p26=NULL (DbType = Guid), @p27=NULL, @p28='934fcfcc-6032-4628-a67b-df3dd2112724' (Nullable = true), @p29='2025-09-25T18:46:03.4082076Z' (Nullable = true) (DbType = DateTime), @p30='campaign', @p31='Sent' (Nullable = false), @p32='5ed75457-e07d-4a81-89f9-b1139ff05c2c', @p33='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p34=NULL, @p35=NULL, @p36='2025-09-25T18:46:07.4916507+00:00' (DbType = DateTime), @p37='send_response' (Nullable = false), @p38=NULL (DbType = Boolean), @p39='dd2b7d7e-2df2-4bc6-80c3-28db0904f798' (Nullable = true), @p40='2025-09-25T18:46:07.4916515+00:00' (DbType = DateTime), @p41='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDRFNUY3NjcyQTI3MDEyOTMzAA==","message_status":"accepted"}]}' (Nullable = false), @p42=NULL (DbType = Decimal), @p43=NULL, @p44='META_CLOUD' (Nullable = false), @p45='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDRFNUY3NjcyQTI3MDEyOTMzAA=='], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignRecipients" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31)
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45);
2025-09-26 00:16:07.499 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='21b224ff-67cb-453e-9bb3-f6a059a55d64', @p1='True', @p2=NULL, @p3='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p4='[{"i":0,"position":1,"text":"Yes","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"position":2,"text":"No","type":"QUICK_REPLY","subType":"quick_reply"}]', @p5='1bd9d06d-5f69-428b-9250-41b6c91854b0' (Nullable = true), @p6='d9d6e925-b959-48c4-9ad4-a7a8a72804b3' (Nullable = true), @p7='c228097f-bfd5-4730-8f2a-42d8be1077ba', @p8=NULL, @p9=NULL, @p10=NULL (DbType = DateTime), @p11='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p12=NULL, @p13='2025-09-25T18:46:03.4082076Z' (DbType = DateTime), @p14='system', @p15=NULL (DbType = DateTime), @p16=NULL, @p17=NULL, @p18=NULL, @p19=NULL, @p20='False', @p21=NULL (DbType = DateTime), @p22=NULL, @p23=NULL, @p24='Hello {{1}} 👋
Aapka order successfully deliver ho chuka hai. 🚚✨
Kya aapne Nirvasa ka Vaji Amrit Vati lena start kar diya hai? 💊
Neeche diye gaye options me se select karke bataye 👇' (Nullable = false), @p25='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDRFNUY3NjcyQTI3MDEyOTMzAA==', @p26='dd2b7d7e-2df2-4bc6-80c3-28db0904f798' (Nullable = true), @p27=NULL (DbType = DateTime), @p28='3da49fdc-2ea4-483e-a86a-39ceb13776da', @p29='0', @p30='934fcfcc-6032-4628-a67b-df3dd2112724' (Nullable = true), @p31='Sent', @p32='2025-09-25T18:46:03.4082076Z' (Nullable = true) (DbType = DateTime), @p33='video_template', @p34='welcome_video', @p35=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-09-26 00:16:07.501 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:16:07.502 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 5150.6348ms
2025-09-26 00:16:07.503 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 00:16:07.504 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/c228097f-bfd5-4730-8f2a-42d8be1077ba - 200 null application/json; charset=utf-8 5157.8584ms
2025-09-26 00:16:08.749 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:46:08.7479694+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:16:16.218 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-26 00:16:16.220 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:16:16.221 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 00:16:16.223 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDRFNUY3NjcyQTI3MDEyOTMzAA==","status":"sent","timestamp":"1758825974","recipient_id":"918974005240","conversation":{"id":"0b28a55df5370eb31f4ecbacf9ce8d3d","expiration_timestamp":"1758825974","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:16:16.224 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 00:16:16.224 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDRFNUY3NjcyQTI3MDEyOTMzAA==","status":"sent","timestamp":"1758825974","recipient_id":"918974005240","conversation":{"id":"0b28a55df5370eb31f4ecbacf9ce8d3d","expiration_timestamp":"1758825974","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:16:16.224 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:16:16.226 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-26 00:16:16.227 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.8203ms
2025-09-26 00:16:16.230 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-26 00:16:16.230 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:16:16.232 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-26 00:16:16.233 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 14.7757ms
2025-09-26 00:16:16.234 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 00:16:16.238 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDRFNUY3NjcyQTI3MDEyOTMzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 00:16:16.242 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='21b224ff-67cb-453e-9bb3-f6a059a55d64'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 00:16:16.243 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDRFNUY3NjcyQTI3MDEyOTMzAA== (legacy)
2025-09-26 00:16:16.488 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-09-26 00:16:16.490 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:16:16.491 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 00:16:16.493 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDRFNUY3NjcyQTI3MDEyOTMzAA==","status":"read","timestamp":"1758825975","recipient_id":"918974005240","conversation":{"id":"0b28a55df5370eb31f4ecbacf9ce8d3d","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:16:16.494 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 00:16:16.494 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDRFNUY3NjcyQTI3MDEyOTMzAA==","status":"read","timestamp":"1758825975","recipient_id":"918974005240","conversation":{"id":"0b28a55df5370eb31f4ecbacf9ce8d3d","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:16:16.494 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:16:16.495 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 00:16:16.496 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.7574ms
2025-09-26 00:16:16.499 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDRFNUY3NjcyQTI3MDEyOTMzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 00:16:16.499 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:16:16.502 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='21b224ff-67cb-453e-9bb3-f6a059a55d64'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 00:16:16.503 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 15.1035ms
2025-09-26 00:16:16.505 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='21b224ff-67cb-453e-9bb3-f6a059a55d64', @p0='2025-09-25T18:46:15.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-26 00:16:16.509 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDRFNUY3NjcyQTI3MDEyOTMzAA== → Read
2025-09-26 00:16:16.620 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-09-26 00:16:16.622 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:16:16.623 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 00:16:16.624 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDRFNUY3NjcyQTI3MDEyOTMzAA==","status":"delivered","timestamp":"1758825975","recipient_id":"918974005240","conversation":{"id":"0b28a55df5370eb31f4ecbacf9ce8d3d","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:16:16.625 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 00:16:16.626 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDRFNUY3NjcyQTI3MDEyOTMzAA==","status":"delivered","timestamp":"1758825975","recipient_id":"918974005240","conversation":{"id":"0b28a55df5370eb31f4ecbacf9ce8d3d","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:16:16.626 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:16:16.627 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 00:16:16.628 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.9734ms
2025-09-26 00:16:16.631 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDRFNUY3NjcyQTI3MDEyOTMzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 00:16:16.631 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:16:16.635 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='21b224ff-67cb-453e-9bb3-f6a059a55d64'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 00:16:16.635 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 15.8169ms
2025-09-26 00:16:16.640 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='21b224ff-67cb-453e-9bb3-f6a059a55d64', @p0='2025-09-25T18:46:15.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-26 00:16:16.642 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDRFNUY3NjcyQTI3MDEyOTMzAA== → Delivered
2025-09-26 00:16:18.764 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:46:18.7627335+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:16:19.822 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8376ccd6-5b89-41e7-b8b4-06bed310eba7 - null null
2025-09-26 00:16:19.824 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:16:19.825 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/8376ccd6-5b89-41e7-b8b4-06bed310eba7 - 204 null null 3.1134ms
2025-09-26 00:16:19.827 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8376ccd6-5b89-41e7-b8b4-06bed310eba7 - null 0
2025-09-26 00:16:19.829 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:16:19.830 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 00:16:19.830 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:16:19.833 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8376ccd6-5b89-41e7-b8b4-06bed310eba7'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
ORDER BY c."Id"
LIMIT 1
2025-09-26 00:16:19.837 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='8376ccd6-5b89-41e7-b8b4-06bed310eba7'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."AudienceMemberId", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IdempotencyKey", t0."IsAutoTagged", t0."MaterializedAt", t0."MessagePreview", t0."ProductBrowsed", t0."ResolvedButtonUrlsJson", t0."ResolvedParametersJson", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."ProfileName", t0."ProfileNameUpdatedAt", t0."Tags", t0."Id1", t0."AttributesJson", t0."AudienceId", t0."BusinessId1", t0."ContactId0", t0."CreatedAt0", t0."CreatedByUserId", t0."Email0", t0."IsDeleted", t0."IsTransientContact", t0."Name0", t0."PhoneE164", t0."PhoneRaw", t0."PromotedAt", t0."UpdatedAt0", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN (
    SELECT c0."Id", c0."AudienceMemberId", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IdempotencyKey", c0."IsAutoTagged", c0."MaterializedAt", c0."MessagePreview", c0."ProductBrowsed", c0."ResolvedButtonUrlsJson", c0."ResolvedParametersJson", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."ProfileName", c1."ProfileNameUpdatedAt", c1."Tags", a."Id" AS "Id1", a."AttributesJson", a."AudienceId", a."BusinessId" AS "BusinessId1", a."ContactId" AS "ContactId0", a."CreatedAt" AS "CreatedAt0", a."CreatedByUserId", a."Email" AS "Email0", a."IsDeleted", a."IsTransientContact", a."Name" AS "Name0", a."PhoneE164", a."PhoneRaw", a."PromotedAt", a."UpdatedAt" AS "UpdatedAt0"
    FROM "CampaignRecipients" AS c0
    LEFT JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
    LEFT JOIN "AudienceMembers" AS a ON c0."AudienceMemberId" = a."Id"
) AS t0 ON t."Id" = t0."CampaignId"
ORDER BY t."Id"
2025-09-26 00:16:19.840 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='8376ccd6-5b89-41e7-b8b4-06bed310eba7'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."CampaignId", c0."IsFromTemplate", c0."Position", c0."Title", c0."Type", c0."Value", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN "CampaignButtons" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-26 00:16:19.843 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__flowId_Value_0='2648e864-9190-4484-a53c-8c263daebe4d', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", t0."Id", t0."CTAFlowConfigId", t0."PositionX", t0."PositionY", t0."ProfileNameSlot", t0."RequiredSource", t0."RequiredTag", t0."StepOrder", t0."TemplateToSend", t0."TemplateType", t0."TriggerButtonText", t0."TriggerButtonType", t0."UseProfileName", t0."Id0", t0."ButtonIndex", t0."ButtonSubType", t0."ButtonText", t0."ButtonType", t0."ButtonValue", t0."CTAFlowStepId", t0."NextStepId"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."Id" = @__flowId_Value_0 AND c."BusinessId" = @__businessId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."CTAFlowConfigId", c0."PositionX", c0."PositionY", c0."ProfileNameSlot", c0."RequiredSource", c0."RequiredTag", c0."StepOrder", c0."TemplateToSend", c0."TemplateType", c0."TriggerButtonText", c0."TriggerButtonType", c0."UseProfileName", f."Id" AS "Id0", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
    FROM "CTAFlowSteps" AS c0
    LEFT JOIN "FlowButtonLinks" AS f ON c0."Id" = f."CTAFlowStepId"
) AS t0 ON t."Id" = t0."CTAFlowConfigId"
ORDER BY t."Id", t0."Id"
2025-09-26 00:16:19.846 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:16:19.847 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:16:19.848 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:16:20.612 +05:30 [INF] Received HTTP response headers after 762.6488ms - 200
2025-09-26 00:16:20.613 +05:30 [INF] End processing HTTP request after 765.5014ms - 200
2025-09-26 00:16:20.670 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaign_CTAFlowConfigId_Value_0='2648e864-9190-4484-a53c-8c263daebe4d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "CTAFlowSteps" AS c
WHERE c."CTAFlowConfigId" = @__campaign_CTAFlowConfigId_Value_0
ORDER BY c."StepOrder"
LIMIT 1
2025-09-26 00:16:20.675 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 00:16:20.678 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 00:16:23.782 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:16:23.783 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:16:24.421 +05:30 [INF] Received HTTP response headers after 636.4832ms - 200
2025-09-26 00:16:24.422 +05:30 [INF] End processing HTTP request after 640.5287ms - 200
2025-09-26 00:16:24.425 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageLogId_0='6263cd4c-bec4-4432-8a1d-3c4c72bbe37f', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:16:24.430 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='2d9514bd-54b4-411a-978e-01271aff4354', @p0='2025-09-25T18:46:20.6731020Z' (DbType = DateTime), @p2='6263cd4c-bec4-4432-8a1d-3c4c72bbe37f', @p3='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p4='[{"i":0,"position":1,"text":"Yes","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"position":2,"text":"No","type":"QUICK_REPLY","subType":"quick_reply"}]', @p5='2648e864-9190-4484-a53c-8c263daebe4d' (Nullable = true), @p6='6facc21f-73f8-4ff0-878b-47e403d102b5' (Nullable = true), @p7='8376ccd6-5b89-41e7-b8b4-06bed310eba7' (Nullable = true), @p8='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p9=NULL, @p10=NULL, @p11=NULL (DbType = DateTime), @p12='2025-09-25T18:46:20.6731020Z' (DbType = DateTime), @p13=NULL, @p14=NULL (DbType = Int32), @p15=NULL (DbType = Boolean), @p16='False', @p17='https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4', @p18='welcome_video' (Nullable = false), @p19='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U1M0E3QjY1ODMwREY4MTU0AA==', @p20=NULL (DbType = Decimal), @p21=NULL, @p22='META_CLOUD', @p23='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U1M0E3QjY1ODMwREY4MTU0AA==', @p24='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U1M0E3QjY1ODMwREY4MTU0AA==","message_status":"accepted"}]}', @p25='918974005240' (Nullable = false), @p26=NULL (DbType = Guid), @p27=NULL, @p28='91f896a7-8849-43ee-8d70-3554b1023648' (Nullable = true), @p29='2025-09-25T18:46:20.6731020Z' (Nullable = true) (DbType = DateTime), @p30='campaign', @p31='Sent' (Nullable = false), @p32='2320a3fa-543a-4138-bb63-8de9d4a798b2', @p33='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p34=NULL, @p35=NULL, @p36='2025-09-25T18:46:24.4276971+00:00' (DbType = DateTime), @p37='send_response' (Nullable = false), @p38=NULL (DbType = Boolean), @p39='6263cd4c-bec4-4432-8a1d-3c4c72bbe37f' (Nullable = true), @p40='2025-09-25T18:46:24.4276981+00:00' (DbType = DateTime), @p41='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U1M0E3QjY1ODMwREY4MTU0AA==","message_status":"accepted"}]}' (Nullable = false), @p42=NULL (DbType = Decimal), @p43=NULL, @p44='META_CLOUD' (Nullable = false), @p45='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U1M0E3QjY1ODMwREY4MTU0AA=='], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignRecipients" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31)
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45);
2025-09-26 00:16:24.455 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 00:16:24.458 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 00:16:26.599 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:16:26.600 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:16:27.262 +05:30 [INF] Received HTTP response headers after 660.4967ms - 200
2025-09-26 00:16:27.263 +05:30 [INF] End processing HTTP request after 663.912ms - 200
2025-09-26 00:16:27.266 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageLogId_0='bbe867ba-79dc-4a32-aa6b-d404140703b9', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:16:27.270 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='333e3174-c979-4eae-ad03-ce1d37f7c6df', @p0='2025-09-25T18:46:20.6731020Z' (DbType = DateTime), @p2='c78d3e8a-0d1b-45bf-a136-78a90b422046', @p3='True', @p4=NULL, @p5='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p6='[{"i":0,"position":1,"text":"Yes","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"position":2,"text":"No","type":"QUICK_REPLY","subType":"quick_reply"}]', @p7='2648e864-9190-4484-a53c-8c263daebe4d' (Nullable = true), @p8='6facc21f-73f8-4ff0-878b-47e403d102b5' (Nullable = true), @p9='8376ccd6-5b89-41e7-b8b4-06bed310eba7', @p10=NULL, @p11=NULL, @p12=NULL (DbType = DateTime), @p13='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p14=NULL, @p15='2025-09-25T18:46:20.6731020Z' (DbType = DateTime), @p16='system', @p17=NULL (DbType = DateTime), @p18=NULL, @p19=NULL, @p20=NULL, @p21=NULL, @p22='False', @p23=NULL (DbType = DateTime), @p24=NULL, @p25=NULL, @p26='Hello {{1}} 👋
Aapka order successfully deliver ho chuka hai. 🚚✨
Kya aapne Nirvasa ka Vaji Amrit Vati lena start kar diya hai? 💊
Neeche diye gaye options me se select karke bataye 👇' (Nullable = false), @p27='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U1M0E3QjY1ODMwREY4MTU0AA==', @p28='6263cd4c-bec4-4432-8a1d-3c4c72bbe37f' (Nullable = true), @p29=NULL (DbType = DateTime), @p30='2d9514bd-54b4-411a-978e-01271aff4354', @p31='0', @p32='91f896a7-8849-43ee-8d70-3554b1023648' (Nullable = true), @p33='Sent', @p34='2025-09-25T18:46:20.6731020Z' (Nullable = true) (DbType = DateTime), @p35='video_template', @p36='welcome_video', @p37=NULL (DbType = Guid), @p38='bbe867ba-79dc-4a32-aa6b-d404140703b9', @p39='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p40='[{"i":0,"position":1,"text":"Yes","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"position":2,"text":"No","type":"QUICK_REPLY","subType":"quick_reply"}]', @p41='2648e864-9190-4484-a53c-8c263daebe4d' (Nullable = true), @p42='6facc21f-73f8-4ff0-878b-47e403d102b5' (Nullable = true), @p43='8376ccd6-5b89-41e7-b8b4-06bed310eba7' (Nullable = true), @p44='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p45=NULL, @p46=NULL, @p47=NULL (DbType = DateTime), @p48='2025-09-25T18:46:20.6731020Z' (DbType = DateTime), @p49=NULL, @p50=NULL (DbType = Int32), @p51=NULL (DbType = Boolean), @p52='False', @p53='https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4', @p54='welcome_video' (Nullable = false), @p55='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREE0MjdCREZDNDgyNEI5OTg3AA==', @p56=NULL (DbType = Decimal), @p57=NULL, @p58='META_CLOUD', @p59='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREE0MjdCREZDNDgyNEI5OTg3AA==', @p60='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREE0MjdCREZDNDgyNEI5OTg3AA==","message_status":"accepted"}]}', @p61='918974005240' (Nullable = false), @p62=NULL (DbType = Guid), @p63=NULL, @p64='60dcab31-e020-42c8-9073-490e864b0806' (Nullable = true), @p65='2025-09-25T18:46:20.6731020Z' (Nullable = true) (DbType = DateTime), @p66='campaign', @p67='Sent' (Nullable = false), @p68='9147306e-b65c-459a-a913-0cbf1add418c', @p69='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p70=NULL, @p71=NULL, @p72='2025-09-25T18:46:27.2680773+00:00' (DbType = DateTime), @p73='send_response' (Nullable = false), @p74=NULL (DbType = Boolean), @p75='bbe867ba-79dc-4a32-aa6b-d404140703b9' (Nullable = true), @p76='2025-09-25T18:46:27.2680782+00:00' (DbType = DateTime), @p77='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREE0MjdCREZDNDgyNEI5OTg3AA==","message_status":"accepted"}]}' (Nullable = false), @p78=NULL (DbType = Decimal), @p79=NULL, @p80='META_CLOUD' (Nullable = false), @p81='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREE0MjdCREZDNDgyNEI5OTg3AA=='], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignRecipients" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67)
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p68, @p69, @p70, @p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81);
2025-09-26 00:16:27.275 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='1611394f-00a2-4c3d-bd9a-20c0240f75d2', @p1='True', @p2=NULL, @p3='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p4='[{"i":0,"position":1,"text":"Yes","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"position":2,"text":"No","type":"QUICK_REPLY","subType":"quick_reply"}]', @p5='2648e864-9190-4484-a53c-8c263daebe4d' (Nullable = true), @p6='6facc21f-73f8-4ff0-878b-47e403d102b5' (Nullable = true), @p7='8376ccd6-5b89-41e7-b8b4-06bed310eba7', @p8=NULL, @p9=NULL, @p10=NULL (DbType = DateTime), @p11='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p12=NULL, @p13='2025-09-25T18:46:20.6731020Z' (DbType = DateTime), @p14='system', @p15=NULL (DbType = DateTime), @p16=NULL, @p17=NULL, @p18=NULL, @p19=NULL, @p20='False', @p21=NULL (DbType = DateTime), @p22=NULL, @p23=NULL, @p24='Hello {{1}} 👋
Aapka order successfully deliver ho chuka hai. 🚚✨
Kya aapne Nirvasa ka Vaji Amrit Vati lena start kar diya hai? 💊
Neeche diye gaye options me se select karke bataye 👇' (Nullable = false), @p25='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREE0MjdCREZDNDgyNEI5OTg3AA==', @p26='bbe867ba-79dc-4a32-aa6b-d404140703b9' (Nullable = true), @p27=NULL (DbType = DateTime), @p28='333e3174-c979-4eae-ad03-ce1d37f7c6df', @p29='0', @p30='60dcab31-e020-42c8-9073-490e864b0806' (Nullable = true), @p31='Sent', @p32='2025-09-25T18:46:20.6731020Z' (Nullable = true) (DbType = DateTime), @p33='video_template', @p34='welcome_video', @p35=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-09-26 00:16:27.277 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:16:27.278 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 7446.5301ms
2025-09-26 00:16:27.279 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 00:16:27.280 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/8376ccd6-5b89-41e7-b8b4-06bed310eba7 - 200 null application/json; charset=utf-8 7452.8627ms
2025-09-26 00:16:28.775 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:46:28.7739553+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:16:31.866 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 574
2025-09-26 00:16:31.869 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:16:31.870 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 00:16:31.871 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U1M0E3QjY1ODMwREY4MTU0AA==","status":"failed","timestamp":"1758825990","recipient_id":"918974005240","errors":[{"code":131053,"title":"Media upload error","message":"Media upload error","error_data":{"details":"Media downloaded from the provided url exceeds maximum allowed size."}}]}]},"field":"messages"}]}]}
2025-09-26 00:16:31.872 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 00:16:31.872 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U1M0E3QjY1ODMwREY4MTU0AA==","status":"failed","timestamp":"1758825990","recipient_id":"918974005240","errors":[{"code":131053,"title":"Media upload error","message":"Media upload error","error_data":{"details":"Media downloaded from the provided url exceeds maximum allowed size."}}]}]},"field":"messages"}]}]}
2025-09-26 00:16:31.873 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:16:31.874 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 00:16:31.874 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.3222ms
2025-09-26 00:16:31.877 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U1M0E3QjY1ODMwREY4MTU0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 00:16:31.877 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:16:31.880 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='c78d3e8a-0d1b-45bf-a136-78a90b422046'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 00:16:31.880 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.7833ms
2025-09-26 00:16:31.885 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p1='c78d3e8a-0d1b-45bf-a136-78a90b422046', @p0='Failed'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "SendStatus" = @p0
WHERE "Id" = @p1;
2025-09-26 00:16:31.886 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U1M0E3QjY1ODMwREY4MTU0AA== → Failed
2025-09-26 00:16:35.692 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 574
2025-09-26 00:16:35.695 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:16:35.696 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 00:16:35.698 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREE0MjdCREZDNDgyNEI5OTg3AA==","status":"failed","timestamp":"1758825994","recipient_id":"918974005240","errors":[{"code":131053,"title":"Media upload error","message":"Media upload error","error_data":{"details":"Media downloaded from the provided url exceeds maximum allowed size."}}]}]},"field":"messages"}]}]}
2025-09-26 00:16:35.699 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 00:16:35.699 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREE0MjdCREZDNDgyNEI5OTg3AA==","status":"failed","timestamp":"1758825994","recipient_id":"918974005240","errors":[{"code":131053,"title":"Media upload error","message":"Media upload error","error_data":{"details":"Media downloaded from the provided url exceeds maximum allowed size."}}]}]},"field":"messages"}]}]}
2025-09-26 00:16:35.699 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:16:35.700 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 00:16:35.701 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.0695ms
2025-09-26 00:16:35.704 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREE0MjdCREZDNDgyNEI5OTg3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 00:16:35.705 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:16:35.708 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='1611394f-00a2-4c3d-bd9a-20c0240f75d2'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 00:16:35.708 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 16.5881ms
2025-09-26 00:16:35.711 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='1611394f-00a2-4c3d-bd9a-20c0240f75d2', @p0='Failed'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "SendStatus" = @p0
WHERE "Id" = @p1;
2025-09-26 00:16:35.715 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREE0MjdCREZDNDgyNEI5OTg3AA== → Failed
2025-09-26 00:16:38.787 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:46:38.7863370+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:16:41.718 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/c228097f-bfd5-4730-8f2a-42d8be1077ba - null null
2025-09-26 00:16:41.720 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:16:41.721 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/c228097f-bfd5-4730-8f2a-42d8be1077ba - 204 null null 3.2617ms
2025-09-26 00:16:41.723 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/c228097f-bfd5-4730-8f2a-42d8be1077ba - null 0
2025-09-26 00:16:41.725 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:16:41.726 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 00:16:41.727 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:16:41.730 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='c228097f-bfd5-4730-8f2a-42d8be1077ba'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
ORDER BY c."Id"
LIMIT 1
2025-09-26 00:16:41.734 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='c228097f-bfd5-4730-8f2a-42d8be1077ba'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."AudienceMemberId", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IdempotencyKey", t0."IsAutoTagged", t0."MaterializedAt", t0."MessagePreview", t0."ProductBrowsed", t0."ResolvedButtonUrlsJson", t0."ResolvedParametersJson", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."ProfileName", t0."ProfileNameUpdatedAt", t0."Tags", t0."Id1", t0."AttributesJson", t0."AudienceId", t0."BusinessId1", t0."ContactId0", t0."CreatedAt0", t0."CreatedByUserId", t0."Email0", t0."IsDeleted", t0."IsTransientContact", t0."Name0", t0."PhoneE164", t0."PhoneRaw", t0."PromotedAt", t0."UpdatedAt0", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN (
    SELECT c0."Id", c0."AudienceMemberId", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IdempotencyKey", c0."IsAutoTagged", c0."MaterializedAt", c0."MessagePreview", c0."ProductBrowsed", c0."ResolvedButtonUrlsJson", c0."ResolvedParametersJson", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."ProfileName", c1."ProfileNameUpdatedAt", c1."Tags", a."Id" AS "Id1", a."AttributesJson", a."AudienceId", a."BusinessId" AS "BusinessId1", a."ContactId" AS "ContactId0", a."CreatedAt" AS "CreatedAt0", a."CreatedByUserId", a."Email" AS "Email0", a."IsDeleted", a."IsTransientContact", a."Name" AS "Name0", a."PhoneE164", a."PhoneRaw", a."PromotedAt", a."UpdatedAt" AS "UpdatedAt0"
    FROM "CampaignRecipients" AS c0
    LEFT JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
    LEFT JOIN "AudienceMembers" AS a ON c0."AudienceMemberId" = a."Id"
) AS t0 ON t."Id" = t0."CampaignId"
ORDER BY t."Id"
2025-09-26 00:16:41.738 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='c228097f-bfd5-4730-8f2a-42d8be1077ba'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."CampaignId", c0."IsFromTemplate", c0."Position", c0."Title", c0."Type", c0."Value", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN "CampaignButtons" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-26 00:16:41.741 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__flowId_Value_0='1bd9d06d-5f69-428b-9250-41b6c91854b0', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", t0."Id", t0."CTAFlowConfigId", t0."PositionX", t0."PositionY", t0."ProfileNameSlot", t0."RequiredSource", t0."RequiredTag", t0."StepOrder", t0."TemplateToSend", t0."TemplateType", t0."TriggerButtonText", t0."TriggerButtonType", t0."UseProfileName", t0."Id0", t0."ButtonIndex", t0."ButtonSubType", t0."ButtonText", t0."ButtonType", t0."ButtonValue", t0."CTAFlowStepId", t0."NextStepId"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."Id" = @__flowId_Value_0 AND c."BusinessId" = @__businessId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."CTAFlowConfigId", c0."PositionX", c0."PositionY", c0."ProfileNameSlot", c0."RequiredSource", c0."RequiredTag", c0."StepOrder", c0."TemplateToSend", c0."TemplateType", c0."TriggerButtonText", c0."TriggerButtonType", c0."UseProfileName", f."Id" AS "Id0", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
    FROM "CTAFlowSteps" AS c0
    LEFT JOIN "FlowButtonLinks" AS f ON c0."Id" = f."CTAFlowStepId"
) AS t0 ON t."Id" = t0."CTAFlowConfigId"
ORDER BY t."Id", t0."Id"
2025-09-26 00:16:41.744 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:16:41.746 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:16:41.747 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:16:42.656 +05:30 [INF] Received HTTP response headers after 907.8283ms - 200
2025-09-26 00:16:42.658 +05:30 [INF] End processing HTTP request after 911.3259ms - 200
2025-09-26 00:16:42.717 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaign_CTAFlowConfigId_Value_0='1bd9d06d-5f69-428b-9250-41b6c91854b0'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "CTAFlowSteps" AS c
WHERE c."CTAFlowConfigId" = @__campaign_CTAFlowConfigId_Value_0
ORDER BY c."StepOrder"
LIMIT 1
2025-09-26 00:16:42.721 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 00:16:42.724 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 00:16:51.463 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:16:51.465 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:46:51.4636531+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:16:51.465 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:16:52.159 +05:30 [INF] Received HTTP response headers after 691.4158ms - 200
2025-09-26 00:16:52.161 +05:30 [INF] End processing HTTP request after 697.6069ms - 200
2025-09-26 00:16:52.164 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageLogId_0='e65c0818-48a9-4172-ae90-f24de1f3894a', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:16:52.168 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='3da49fdc-2ea4-483e-a86a-39ceb13776da', @p0='2025-09-25T18:46:42.7195213Z' (DbType = DateTime), @p2='e65c0818-48a9-4172-ae90-f24de1f3894a', @p3='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p4='[{"i":0,"position":1,"text":"Yes","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"position":2,"text":"No","type":"QUICK_REPLY","subType":"quick_reply"}]', @p5='1bd9d06d-5f69-428b-9250-41b6c91854b0' (Nullable = true), @p6='d9d6e925-b959-48c4-9ad4-a7a8a72804b3' (Nullable = true), @p7='c228097f-bfd5-4730-8f2a-42d8be1077ba' (Nullable = true), @p8='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p9=NULL, @p10=NULL, @p11=NULL (DbType = DateTime), @p12='2025-09-25T18:46:42.7195213Z' (DbType = DateTime), @p13=NULL, @p14=NULL (DbType = Int32), @p15=NULL (DbType = Boolean), @p16='False', @p17='https://whatsappdata.s3.ap-south-1.amazonaws.com/userMedia/dab49080d80c724aad5ebf158d63df41/vde_templ.mp4', @p18='welcome_video' (Nullable = false), @p19='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODcyMUNDRjdDQzYwQTRCRUE3AA==', @p20=NULL (DbType = Decimal), @p21=NULL, @p22='META_CLOUD', @p23='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODcyMUNDRjdDQzYwQTRCRUE3AA==', @p24='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODcyMUNDRjdDQzYwQTRCRUE3AA==","message_status":"accepted"}]}', @p25='918974005240' (Nullable = false), @p26=NULL (DbType = Guid), @p27=NULL, @p28='46b21381-7ae1-4dd6-a51f-825df9f6c57d' (Nullable = true), @p29='2025-09-25T18:46:42.7195213Z' (Nullable = true) (DbType = DateTime), @p30='campaign', @p31='Sent' (Nullable = false), @p32='83b08679-efb0-4e6c-b961-003f743c3ab0', @p33='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p34=NULL, @p35=NULL, @p36='2025-09-25T18:46:52.1666125+00:00' (DbType = DateTime), @p37='send_response' (Nullable = false), @p38=NULL (DbType = Boolean), @p39='e65c0818-48a9-4172-ae90-f24de1f3894a' (Nullable = true), @p40='2025-09-25T18:46:52.1666132+00:00' (DbType = DateTime), @p41='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODcyMUNDRjdDQzYwQTRCRUE3AA==","message_status":"accepted"}]}' (Nullable = false), @p42=NULL (DbType = Decimal), @p43=NULL, @p44='META_CLOUD' (Nullable = false), @p45='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODcyMUNDRjdDQzYwQTRCRUE3AA=='], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignRecipients" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31)
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45);
2025-09-26 00:16:52.180 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='4d93c584-cc56-4c39-aea2-587a4e4f5581', @p1='True', @p2=NULL, @p3='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p4='[{"i":0,"position":1,"text":"Yes","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"position":2,"text":"No","type":"QUICK_REPLY","subType":"quick_reply"}]', @p5='1bd9d06d-5f69-428b-9250-41b6c91854b0' (Nullable = true), @p6='d9d6e925-b959-48c4-9ad4-a7a8a72804b3' (Nullable = true), @p7='c228097f-bfd5-4730-8f2a-42d8be1077ba', @p8=NULL, @p9=NULL, @p10=NULL (DbType = DateTime), @p11='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p12=NULL, @p13='2025-09-25T18:46:42.7195213Z' (DbType = DateTime), @p14='system', @p15=NULL (DbType = DateTime), @p16=NULL, @p17=NULL, @p18=NULL, @p19=NULL, @p20='False', @p21=NULL (DbType = DateTime), @p22=NULL, @p23=NULL, @p24='Hello {{1}} 👋
Aapka order successfully deliver ho chuka hai. 🚚✨
Kya aapne Nirvasa ka Vaji Amrit Vati lena start kar diya hai? 💊
Neeche diye gaye options me se select karke bataye 👇' (Nullable = false), @p25='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODcyMUNDRjdDQzYwQTRCRUE3AA==', @p26='e65c0818-48a9-4172-ae90-f24de1f3894a' (Nullable = true), @p27=NULL (DbType = DateTime), @p28='3da49fdc-2ea4-483e-a86a-39ceb13776da', @p29='0', @p30='46b21381-7ae1-4dd6-a51f-825df9f6c57d' (Nullable = true), @p31='Sent', @p32='2025-09-25T18:46:42.7195213Z' (Nullable = true) (DbType = DateTime), @p33='video_template', @p34='welcome_video', @p35=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-09-26 00:16:52.182 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:16:52.183 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 10455.3066ms
2025-09-26 00:16:52.184 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 00:16:52.185 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/c228097f-bfd5-4730-8f2a-42d8be1077ba - 200 null application/json; charset=utf-8 10461.9262ms
2025-09-26 00:17:00.082 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-26 00:17:00.083 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:17:00.084 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 00:17:00.086 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODcyMUNDRjdDQzYwQTRCRUE3AA==","status":"sent","timestamp":"1758826018","recipient_id":"918974005240","conversation":{"id":"c83e530c6e4ead48b13203c0e20fb2f3","expiration_timestamp":"1758826019","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:17:00.087 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 00:17:00.088 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODcyMUNDRjdDQzYwQTRCRUE3AA==","status":"sent","timestamp":"1758826018","recipient_id":"918974005240","conversation":{"id":"c83e530c6e4ead48b13203c0e20fb2f3","expiration_timestamp":"1758826019","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:17:00.088 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:17:00.089 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 00:17:00.090 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 4.0875ms
2025-09-26 00:17:00.092 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODcyMUNDRjdDQzYwQTRCRUE3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 00:17:00.092 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:17:00.095 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='4d93c584-cc56-4c39-aea2-587a4e4f5581'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 00:17:00.096 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 13.9939ms
2025-09-26 00:17:00.097 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODcyMUNDRjdDQzYwQTRCRUE3AA== (legacy)
2025-09-26 00:17:00.516 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-09-26 00:17:00.519 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:17:00.519 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 00:17:00.521 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODcyMUNDRjdDQzYwQTRCRUE3AA==","status":"delivered","timestamp":"1758826019","recipient_id":"918974005240","conversation":{"id":"c83e530c6e4ead48b13203c0e20fb2f3","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:17:00.522 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 00:17:00.522 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODcyMUNDRjdDQzYwQTRCRUE3AA==","status":"delivered","timestamp":"1758826019","recipient_id":"918974005240","conversation":{"id":"c83e530c6e4ead48b13203c0e20fb2f3","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:17:00.523 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:17:00.524 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 00:17:00.525 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.7393ms
2025-09-26 00:17:00.527 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODcyMUNDRjdDQzYwQTRCRUE3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 00:17:00.528 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:17:00.531 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='4d93c584-cc56-4c39-aea2-587a4e4f5581'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 00:17:00.531 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 15.0884ms
2025-09-26 00:17:00.548 +05:30 [INF] Executed DbCommand (15ms) [Parameters=[@p2='4d93c584-cc56-4c39-aea2-587a4e4f5581', @p0='2025-09-25T18:46:59.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-26 00:17:00.550 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODcyMUNDRjdDQzYwQTRCRUE3AA== → Delivered
2025-09-26 00:17:00.575 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-09-26 00:17:00.577 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:17:00.577 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 00:17:00.579 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODcyMUNDRjdDQzYwQTRCRUE3AA==","status":"read","timestamp":"1758826019","recipient_id":"918974005240","conversation":{"id":"c83e530c6e4ead48b13203c0e20fb2f3","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:17:00.580 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 00:17:00.580 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODcyMUNDRjdDQzYwQTRCRUE3AA==","status":"read","timestamp":"1758826019","recipient_id":"918974005240","conversation":{"id":"c83e530c6e4ead48b13203c0e20fb2f3","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:17:00.580 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:17:00.581 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 00:17:00.582 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.2362ms
2025-09-26 00:17:00.584 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODcyMUNDRjdDQzYwQTRCRUE3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 00:17:00.585 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:17:00.587 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='4d93c584-cc56-4c39-aea2-587a4e4f5581'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 00:17:00.587 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 12.6753ms
2025-09-26 00:17:00.590 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='4d93c584-cc56-4c39-aea2-587a4e4f5581', @p0='2025-09-25T18:46:59.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-26 00:17:00.593 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODcyMUNDRjdDQzYwQTRCRUE3AA== → Read
2025-09-26 00:17:01.479 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:47:01.4779002+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:17:04.005 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 603
2025-09-26 00:17:04.007 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:17:04.008 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 00:17:04.010 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDRFNUY3NjcyQTI3MDEyOTMzAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggOEU3NkFFMkIwODI5Njc1NjU2MDkyNDU2QUY5RDVFRTYA","timestamp":"1758826022","type":"button","button":{"payload":"Yes","text":"Yes"}}]},"field":"messages"}]}]}
2025-09-26 00:17:04.011 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 00:17:04.011 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDRFNUY3NjcyQTI3MDEyOTMzAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggOEU3NkFFMkIwODI5Njc1NjU2MDkyNDU2QUY5RDVFRTYA","timestamp":"1758826022","type":"button","button":{"payload":"Yes","text":"Yes"}}]},"field":"messages"}]}]}
2025-09-26 00:17:04.012 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:17:04.012 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-26 00:17:04.013 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 3.4621ms
2025-09-26 00:17:04.014 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-26 00:17:04.015 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:17:04.015 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggOEU3NkFFMkIwODI5Njc1NjU2MDkyNDU2QUY5RDVFRTYA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDRFNUY3NjcyQTI3MDEyOTMzAA==, Text: Yes
2025-09-26 00:17:04.016 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 11.2109ms
2025-09-26 00:17:04.019 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDRFNUY3NjcyQTI3MDEyOTMzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-26 00:17:04.038 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__origin_Id_0='dd2b7d7e-2df2-4bc6-80c3-28db0904f798' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDRFNUY3NjcyQTI3MDEyOTMzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-09-26 00:17:04.041 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__fromDigits_1='918974005240', @__fromRaw_2='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND (c."PhoneNumber" = @__fromDigits_1 OR c."PhoneNumber" = @__fromRaw_2)
LIMIT 1
2025-09-26 00:17:04.043 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='d9d6e925-b959-48c4-9ad4-a7a8a72804b3'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
WHERE f."CTAFlowStepId" = @__stepId_0
ORDER BY f."ButtonIndex"
2025-09-26 00:17:04.045 +05:30 [INF] ✅ Mapped click by TEXT to index 0 (flow="1bd9d06d-5f69-428b-9250-41b6c91854b0", step="d9d6e925-b959-48c4-9ad4-a7a8a72804b3")
2025-09-26 00:17:04.047 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sourceStepId_0='d9d6e925-b959-48c4-9ad4-a7a8a72804b3', @__flowId_1='1bd9d06d-5f69-428b-9250-41b6c91854b0', @__buttonIndex_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-09-26 00:17:04.050 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='d9d6e925-b959-48c4-9ad4-a7a8a72804b3'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-09-26 00:17:04.054 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='7b92ee7a-df9a-4182-b866-07760a0abf19', @p1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p2='0' (Nullable = true), @p3='21b224ff-67cb-453e-9bb3-f6a059a55d64' (Nullable = true), @p4='918974005240', @p5=NULL, @p6='2025-09-25T18:47:04.0520998Z' (DbType = DateTime), @p7='1bd9d06d-5f69-428b-9250-41b6c91854b0' (Nullable = true), @p8='dd2b7d7e-2df2-4bc6-80c3-28db0904f798' (Nullable = true), @p9=NULL, @p10='9852065e-ee54-4a39-aecf-83144c89a560' (Nullable = true), @p11='934fcfcc-6032-4628-a67b-df3dd2112724' (Nullable = true), @p12='d9d6e925-b959-48c4-9ad4-a7a8a72804b3', @p13='welcome_video' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='Yes'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-26 00:17:04.056 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignSendLogId_Value_0='21b224ff-67cb-453e-9bb3-f6a059a55d64'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Provider", c0."PhoneNumberId"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
WHERE c."Id" = @__campaignSendLogId_Value_0
LIMIT 1
2025-09-26 00:17:04.059 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_context_TargetStepId_0='a33c9210-842b-4ecd-ac1b-893ab28aa4b7' (Nullable = true), @__8__locals1_context_FlowId_1='1bd9d06d-5f69-428b-9250-41b6c91854b0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."ProfileNameSlot", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", t."UseProfileName", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."ProfileNameSlot", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c."UseProfileName"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__8__locals1_context_TargetStepId_0 AND c."CTAFlowConfigId" = @__8__locals1_context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-09-26 00:17:04.062 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:17:04.063 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:17:04.064 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:17:04.950 +05:30 [INF] Received HTTP response headers after 885.3124ms - 200
2025-09-26 00:17:04.952 +05:30 [INF] End processing HTTP request after 888.2347ms - 200
2025-09-26 00:17:05.007 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_context_BusinessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__8__locals1_context_ContactPhone_1='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__8__locals1_context_BusinessId_0 AND c."PhoneNumber" = @__8__locals1_context_ContactPhone_1
LIMIT 1
2025-09-26 00:17:05.010 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 00:17:05.013 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 00:17:10.694 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:17:10.695 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:17:11.435 +05:30 [INF] Received HTTP response headers after 738.9095ms - 400
2025-09-26 00:17:11.436 +05:30 [INF] End processing HTTP request after 742.2025ms - 400
2025-09-26 00:17:11.437 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#132012) Parameter format does not match format in the created template","type":"OAuthException","code":132012,"error_data":{"messaging_product":"whatsapp","details":"header: Format mismatch, expected DOCUMENT, received UNKNOWN"},"fbtrace_id":"ALC9TFTUOzmIoIj6hI0VdF6"}}
2025-09-26 00:19:14.753 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='97ab42f4-23b2-465c-a8fb-1c75681305f8', @p1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5='Bad Request', @p6='2025-09-25T18:49:14.7453653Z' (DbType = DateTime), @p7='1bd9d06d-5f69-428b-9250-41b6c91854b0' (Nullable = true), @p8='ab6fd545-3554-4299-90dd-e0f1841e0933' (Nullable = true), @p9='{"error":{"message":"(#132012) Parameter format does not match format in the created template","type":"OAuthException","code":132012,"error_data":{"messaging_product":"whatsapp","details":"header: Format mismatch, expected DOCUMENT, received UNKNOWN"},"fbtrace_id":"ALC9TFTUOzmIoIj6hI0VdF6"}}', @p10='22db9f29-27f0-42da-b823-7c57b13e3b30' (Nullable = true), @p11=NULL (DbType = Guid), @p12='a33c9210-842b-4ecd-ac1b-893ab28aa4b7', @p13='pdf_template' (Nullable = false), @p14='False', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='ab6fd545-3554-4299-90dd-e0f1841e0933', @p20='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p21=NULL, @p22='1bd9d06d-5f69-428b-9250-41b6c91854b0' (Nullable = true), @p23='a33c9210-842b-4ecd-ac1b-893ab28aa4b7' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26=NULL, @p27=NULL, @p28=NULL (DbType = DateTime), @p29='2025-09-25T18:49:14.7452218Z' (DbType = DateTime), @p30='Bad Request', @p31='1' (Nullable = true), @p32=NULL (DbType = Boolean), @p33='False', @p34=NULL, @p35='pdf_template' (Nullable = false), @p36=NULL, @p37=NULL (DbType = Decimal), @p38=NULL, @p39=NULL, @p40=NULL, @p41='{"error":{"message":"(#132012) Parameter format does not match format in the created template","type":"OAuthException","code":132012,"error_data":{"messaging_product":"whatsapp","details":"header: Format mismatch, expected DOCUMENT, received UNKNOWN"},"fbtrace_id":"ALC9TFTUOzmIoIj6hI0VdF6"}}', @p42='918974005240' (Nullable = false), @p43='dd2b7d7e-2df2-4bc6-80c3-28db0904f798' (Nullable = true), @p44=NULL, @p45=NULL (DbType = Guid), @p46=NULL (DbType = DateTime), @p47='flow', @p48='Failed' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48)
RETURNING "MessageTime";
2025-09-26 00:19:14.767 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__now_0='2025-09-25T18:49:14.7589244+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:19:14.769 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 00:19:14.770 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 00:19:14.779 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:14.781 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:14.782 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 204 null null 12.1801ms
2025-09-26 00:19:14.782 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 204 null null 11.8659ms
2025-09-26 00:19:14.784 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 00:19:14.787 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 00:19:14.789 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:14.791 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:14.791 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 00:19:14.792 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 00:19:14.792 +05:30 [INF] Route matched with {action = "GetSenders", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSenders(System.Guid) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-26 00:19:14.793 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 00:19:14.796 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-26 00:19:14.800 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-26 00:19:14.801 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.WhatsAppSettings.DTOs.WhatsAppSenderDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:19:14.802 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType155`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType241`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:19:14.803 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api) in 8.5523ms
2025-09-26 00:19:14.804 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 6.5716ms
2025-09-26 00:19:14.805 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 00:19:14.806 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 00:19:14.807 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 200 null application/json; charset=utf-8 22.5031ms
2025-09-26 00:19:14.808 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 200 null application/json; charset=utf-8 21.0611ms
2025-09-26 00:19:24.784 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:49:24.7828678+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:19:25.024 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/single_variable_body - null null
2025-09-26 00:19:25.026 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:25.026 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/single_variable_body - 204 null null 2.373ms
2025-09-26 00:19:25.046 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/single_variable_body - null null
2025-09-26 00:19:25.048 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:25.049 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-26 00:19:25.049 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 00:19:25.052 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__name_1='single_variable_body'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-09-26 00:19:25.056 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body', @__language_2='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Language" = @__language_2
ORDER BY w."Language" = @__language_2 DESC
LIMIT 1
2025-09-26 00:19:25.058 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType242`10[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:19:25.059 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 8.5401ms
2025-09-26 00:19:25.060 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-26 00:19:25.061 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/single_variable_body - 200 null application/json; charset=utf-8 14.6017ms
2025-09-26 00:19:34.793 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:49:34.7925749+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:19:36.585 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-09-26 00:19:36.587 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:36.588 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 3.2994ms
2025-09-26 00:19:36.591 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 452
2025-09-26 00:19:36.593 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:36.594 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-26 00:19:36.595 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:19:36.599 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__phoneNumberId_1='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."PhoneNumberId" = @__phoneNumberId_1 AND w."IsActive"
LIMIT 1
2025-09-26 00:19:36.602 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:19:36.604 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:19:36.605 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:19:37.459 +05:30 [INF] Received HTTP response headers after 853.8962ms - 200
2025-09-26 00:19:37.461 +05:30 [INF] End processing HTTP request after 856.8868ms - 200
2025-09-26 00:19:37.549 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body', @__provider_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:19:37.553 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='7dadc1da-cc76-49b6-b233-619229486aaa', @p1=NULL (DbType = Guid), @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='text', @p6='2025-09-25T18:49:37.5480022Z' (DbType = DateTime), @p7='system', @p8=NULL (DbType = Guid), @p9=NULL (DbType = DateTime), @p10=NULL, @p11=NULL, @p12=NULL, @p13=NULL, @p14=NULL, @p15='False', @p16='Hello
We are sedning {{1}} items.', @p17='Hello
We are sedning {{1}} items.' (Nullable = false), @p18='sv1' (Nullable = false), @p19='673199269218077', @p20='META_CLOUD', @p21=NULL (DbType = DateTime), @p22=NULL (DbType = Guid), @p23='Draft' (Nullable = false), @p24='single_variable_body', @p25='[]', @p26='{"Provider":"meta_cloud","TemplateId":"1209106791238164","TemplateName":"single_variable_body","Language":"en_US","HasHeaderMedia":false,"HeaderType":"","BodyPlaceholders":[{"Index":1,"Label":null,"Example":null}],"Buttons":[]}' (DbType = Object), @p27='2025-09-25T18:49:37.5480023Z' (DbType = DateTime), @p28=NULL], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "AudienceId", "BusinessId", "CTAFlowConfigId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "DocumentUrl", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "PhoneNumberId", "Provider", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "TemplateSchemaSnapshot", "UpdatedAt", "VideoUrl")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2025-09-26 00:19:37.555 +05:30 [INF] ✅ Campaign 'sv1' created | Type:text | Header:none | FlowId:null | EntryTemplate:single_variable_body | Sender:META_CLOUD/673199269218077 | Recipients:0
2025-09-26 00:19:37.557 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType64`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:19:37.558 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 961.2706ms
2025-09-26 00:19:37.559 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-26 00:19:37.560 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 969.2559ms
2025-09-26 00:19:37.585 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:19:37.587 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:37.588 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 3.3401ms
2025-09-26 00:19:37.589 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/7dadc1da-cc76-49b6-b233-619229486aaa/csv-sample/schema - null null
2025-09-26 00:19:37.589 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/7dadc1da-cc76-49b6-b233-619229486aaa - null null
2025-09-26 00:19:37.589 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:19:37.591 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-26 00:19:37.593 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:37.596 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:37.598 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:37.600 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:37.600 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:19:37.603 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 12.1027ms
2025-09-26 00:19:37.602 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/7dadc1da-cc76-49b6-b233-619229486aaa - 204 null null 12.4612ms
2025-09-26 00:19:37.602 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 12.9421ms
2025-09-26 00:19:37.601 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/7dadc1da-cc76-49b6-b233-619229486aaa/csv-sample/schema - 204 null null 12.3191ms
2025-09-26 00:19:37.609 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:37.611 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-26 00:19:37.614 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/7dadc1da-cc76-49b6-b233-619229486aaa/csv-sample/schema - null null
2025-09-26 00:19:37.616 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/7dadc1da-cc76-49b6-b233-619229486aaa - null null
2025-09-26 00:19:37.619 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:19:37.621 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:37.623 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:37.624 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:37.625 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-26 00:19:37.625 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-26 00:19:37.626 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:19:37.629 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-26 00:19:37.629 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-26 00:19:37.627 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-26 00:19:37.631 +05:30 [INF] Route matched with {action = "GetSchema", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSchema(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 00:19:37.632 +05:30 [INF] GetPagedContactsAsync: businessId="6b5cea67-e8e9-42f7-8bde-51a9dbc02d56", tab=all, page=1, pageSize=1000
2025-09-26 00:19:37.634 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:19:37.637 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='7dadc1da-cc76-49b6-b233-619229486aaa', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 00:19:37.640 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 11.7907ms
2025-09-26 00:19:37.642 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:19:37.640 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:19:37.645 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:19:37.643 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:19:37.634 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:19:37.639 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-26 00:19:37.648 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType66`3[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType67`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:19:37.648 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 47.9901ms
2025-09-26 00:19:37.652 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='7dadc1da-cc76-49b6-b233-619229486aaa', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AudienceId", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."DocumentUrl", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."TemplateSchemaSnapshot", t."UpdatedAt", t."VideoUrl", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", t."Id1", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value", t."BusinessId1", t."CreatedAt1", t."CreatedBy0", t."FlowName", t."IsActive0", t."IsPublished", t."UpdatedAt1"
FROM (
    SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0", c1."Id" AS "Id1", c1."BusinessId" AS "BusinessId1", c1."CreatedAt" AS "CreatedAt1", c1."CreatedBy" AS "CreatedBy0", c1."FlowName", c1."IsActive" AS "IsActive0", c1."IsPublished", c1."UpdatedAt" AS "UpdatedAt1"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    LEFT JOIN "CTAFlowConfigs" AS c1 ON c."CTAFlowConfigId" = c1."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t."Id0", t."Id1"
2025-09-26 00:19:37.646 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:37.653 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."ProfileName", t."ProfileNameUpdatedAt", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-26 00:19:37.654 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api) in 18.5177ms
2025-09-26 00:19:37.657 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-09-26 00:19:37.658 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:19:37.659 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:19:37.660 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:19:37.661 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 11.2942ms
2025-09-26 00:19:37.662 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-26 00:19:37.663 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 30.6717ms
2025-09-26 00:19:37.663 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/7dadc1da-cc76-49b6-b233-619229486aaa/csv-sample/schema - 200 null application/json; charset=utf-8 49.8941ms
2025-09-26 00:19:37.664 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-26 00:19:37.667 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-26 00:19:37.667 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-26 00:19:37.671 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/7dadc1da-cc76-49b6-b233-619229486aaa - 200 null application/json; charset=utf-8 55.1536ms
2025-09-26 00:19:37.673 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:19:37.673 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 62.1917ms
2025-09-26 00:19:37.676 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/7dadc1da-cc76-49b6-b233-619229486aaa/csv-sample/schema - null null
2025-09-26 00:19:37.677 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 11.3553ms
2025-09-26 00:19:37.681 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:37.681 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:19:37.682 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:19:37.683 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 42.2609ms
2025-09-26 00:19:37.683 +05:30 [INF] Route matched with {action = "GetSchema", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSchema(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 00:19:37.688 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='7dadc1da-cc76-49b6-b233-619229486aaa', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 00:19:37.691 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:19:37.694 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:19:37.696 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType66`3[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType67`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:19:37.697 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api) in 10.4088ms
2025-09-26 00:19:37.698 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:19:37.698 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/7dadc1da-cc76-49b6-b233-619229486aaa/csv-sample/schema - 200 null application/json; charset=utf-8 22.8439ms
2025-09-26 00:19:38.956 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/7dadc1da-cc76-49b6-b233-619229486aaa/csv-sample - null null
2025-09-26 00:19:38.958 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:38.959 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/7dadc1da-cc76-49b6-b233-619229486aaa/csv-sample - 204 null null 3.1427ms
2025-09-26 00:19:38.961 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/7dadc1da-cc76-49b6-b233-619229486aaa/csv-sample - null null
2025-09-26 00:19:38.963 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:38.964 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.Download (xbytechat.api)'
2025-09-26 00:19:38.968 +05:30 [INF] Route matched with {action = "Download", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Download(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 00:19:38.971 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='7dadc1da-cc76-49b6-b233-619229486aaa', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 00:19:38.976 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:19:38.978 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:19:38.982 +05:30 [INF] Executing FileContentResult, sending file with download name 'campaign-7dadc1dacc7649b6b233619229486aaa-sample.csv' ...
2025-09-26 00:19:38.987 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.Download (xbytechat.api) in 17.657ms
2025-09-26 00:19:38.988 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.Download (xbytechat.api)'
2025-09-26 00:19:38.988 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/7dadc1da-cc76-49b6-b233-619229486aaa/csv-sample - 200 17 text/csv; charset=utf-8 27.0286ms
2025-09-26 00:19:44.807 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:49:44.8048094+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:19:50.841 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch - null null
2025-09-26 00:19:50.843 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:50.843 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch - 204 null null 2.6716ms
2025-09-26 00:19:50.847 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/csv/batch - multipart/form-data; boundary=----WebKitFormBoundarybKbBKjk9HABx4OON 239
2025-09-26 00:19:50.849 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:50.851 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api)'
2025-09-26 00:19:50.852 +05:30 [INF] Route matched with {action = "Upload", controller = "CsvBatch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Upload(xbytechat.api.Features.CampaignModule.DTOs.Requests.CsvBatchUploadForm, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController (xbytechat.api).
2025-09-26 00:19:50.855 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='785d1781-15d8-4694-92ad-24f3c831ec72', @p1=NULL (DbType = Guid), @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3=NULL, @p4='2025-09-25T18:49:50.8540079Z' (DbType = DateTime), @p5=NULL (DbType = Guid), @p6=NULL, @p7='csv_two_parameter.csv', @p8=NULL (DbType = Object), @p9='0', @p10='0', @p11='ingesting' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CsvBatches" ("Id", "AudienceId", "BusinessId", "Checksum", "CreatedAt", "CreatedByUserId", "ErrorMessage", "FileName", "HeadersJson", "RowCount", "SkippedCount", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-09-26 00:19:50.859 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='785d1781-15d8-4694-92ad-24f3c831ec72', @p0='["phone","parameter1"]' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CsvBatches" SET "HeadersJson" = @p0
WHERE "Id" = @p1;
2025-09-26 00:19:50.862 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='a55ed7fd-13d1-4a7c-9c4c-f513adbf6a71', @p1='785d1781-15d8-4694-92ad-24f3c831ec72', @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3='2025-09-25T18:49:50.8611842Z' (DbType = DateTime), @p4=NULL, @p5=NULL, @p6='0', @p7='{"phone":"89740 05240","parameter1":"Robert Nicosta"}' (Nullable = false) (DbType = Object), @p8=NULL], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CsvRows" ("Id", "BatchId", "BusinessId", "CreatedAt", "PhoneE164", "PhoneRaw", "RowIndex", "RowJson", "ValidationError")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-09-26 00:19:50.865 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='785d1781-15d8-4694-92ad-24f3c831ec72', @p0='1', @p1='ready' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CsvBatches" SET "RowCount" = @p0, "Status" = @p1
WHERE "Id" = @p2;
2025-09-26 00:19:50.866 +05:30 [INF] CsvBatch "785d1781-15d8-4694-92ad-24f3c831ec72" ingested: 1 rows; headers=2
2025-09-26 00:19:50.867 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType70`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.CampaignModule.DTOs.CsvBatchUploadResultDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:19:50.868 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api) in 15.4183ms
2025-09-26 00:19:50.869 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api)'
2025-09-26 00:19:50.871 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/csv/batch - 200 null application/json; charset=utf-8 23.0737ms
2025-09-26 00:19:50.874 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch/785d1781-15d8-4694-92ad-24f3c831ec72/sample?take=10 - null null
2025-09-26 00:19:50.876 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:50.876 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch/785d1781-15d8-4694-92ad-24f3c831ec72/sample?take=10 - 204 null null 2.3328ms
2025-09-26 00:19:50.879 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/csv/batch/785d1781-15d8-4694-92ad-24f3c831ec72/sample?take=10 - null null
2025-09-26 00:19:50.880 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:50.881 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api)'
2025-09-26 00:19:50.882 +05:30 [INF] Route matched with {action = "Sample", controller = "CsvBatch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sample(System.Guid, Int32, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController (xbytechat.api).
2025-09-26 00:19:50.885 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__batchId_0='785d1781-15d8-4694-92ad-24f3c831ec72', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."HeadersJson", c."RowCount"
FROM "CsvBatches" AS c
WHERE c."Id" = @__batchId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:19:50.889 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__batchId_1='785d1781-15d8-4694-92ad-24f3c831ec72', @__p_2='10'], CommandType='"Text"', CommandTimeout='30']
SELECT c."RowIndex", c."Id", c."BatchId", c."BusinessId", c."CreatedAt", c."PhoneE164", c."PhoneRaw", c."RowJson", c."ValidationError"
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__batchId_1
ORDER BY c."RowIndex"
LIMIT @__p_2
2025-09-26 00:19:50.891 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType70`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IReadOnlyList`1[[xbytechat.api.Features.CampaignModule.DTOs.CsvRowSampleDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:19:50.892 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api) in 8.4623ms
2025-09-26 00:19:50.893 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api)'
2025-09-26 00:19:50.893 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/csv/batch/785d1781-15d8-4694-92ad-24f3c831ec72/sample?take=10 - 200 null application/json; charset=utf-8 14.872ms
2025-09-26 00:19:50.896 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/7dadc1da-cc76-49b6-b233-619229486aaa/mappings/suggest?batchId=785d1781-15d8-4694-92ad-24f3c831ec72 - null null
2025-09-26 00:19:50.898 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:50.899 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/7dadc1da-cc76-49b6-b233-619229486aaa/mappings/suggest?batchId=785d1781-15d8-4694-92ad-24f3c831ec72 - 204 null null 2.5821ms
2025-09-26 00:19:50.901 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/7dadc1da-cc76-49b6-b233-619229486aaa/mappings/suggest?batchId=785d1781-15d8-4694-92ad-24f3c831ec72 - null null
2025-09-26 00:19:50.903 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:50.903 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api)'
2025-09-26 00:19:50.904 +05:30 [INF] Route matched with {action = "Suggest", controller = "CampaignMappings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestAsync(System.Guid, System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController (xbytechat.api).
2025-09-26 00:19:50.907 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='7dadc1da-cc76-49b6-b233-619229486aaa', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateParameters"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:19:50.910 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__batchId_0='785d1781-15d8-4694-92ad-24f3c831ec72', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."HeadersJson"
FROM "CsvBatches" AS c
WHERE c."Id" = @__batchId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:19:50.912 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:19:50.913 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api) in 7.3317ms
2025-09-26 00:19:50.914 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api)'
2025-09-26 00:19:50.914 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/7dadc1da-cc76-49b6-b233-619229486aaa/mappings/suggest?batchId=785d1781-15d8-4694-92ad-24f3c831ec72 - 200 null application/json; charset=utf-8 13.7822ms
2025-09-26 00:19:53.358 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/7dadc1da-cc76-49b6-b233-619229486aaa/mappings - null null
2025-09-26 00:19:53.360 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:53.361 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/7dadc1da-cc76-49b6-b233-619229486aaa/mappings - 204 null null 3.0137ms
2025-09-26 00:19:53.364 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaigns/7dadc1da-cc76-49b6-b233-619229486aaa/mappings - application/json 27
2025-09-26 00:19:53.366 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:53.367 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api)'
2025-09-26 00:19:53.368 +05:30 [INF] Route matched with {action = "Save", controller = "CampaignMappings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SaveAsync(System.Guid, System.Collections.Generic.Dictionary`2[System.String,System.String], System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController (xbytechat.api).
2025-09-26 00:19:53.370 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-26 00:19:53.370 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api) in 0.9902ms
2025-09-26 00:19:53.371 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api)'
2025-09-26 00:19:53.372 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaigns/7dadc1da-cc76-49b6-b233-619229486aaa/mappings - 204 null null 8.4954ms
2025-09-26 00:19:53.375 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/7dadc1da-cc76-49b6-b233-619229486aaa/materialize - null null
2025-09-26 00:19:53.376 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:53.377 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/7dadc1da-cc76-49b6-b233-619229486aaa/materialize - 204 null null 2.384ms
2025-09-26 00:19:53.379 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaigns/7dadc1da-cc76-49b6-b233-619229486aaa/materialize - application/json 207
2025-09-26 00:19:53.382 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:53.382 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api)'
2025-09-26 00:19:53.383 +05:30 [INF] Route matched with {action = "CsvCreate", controller = "CampaignMaterialize"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeResponseDto]] CsvCreate(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeRequestDto, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController (xbytechat.api).
2025-09-26 00:19:53.385 +05:30 [INF] 📦 Materialize request: campaign="7dadc1da-cc76-49b6-b233-619229486aaa" persist=true batch="785d1781-15d8-4694-92ad-24f3c831ec72" audience='Audience 2025-09-26'
2025-09-26 00:19:53.387 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='7dadc1da-cc76-49b6-b233-619229486aaa', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1)
2025-09-26 00:19:53.391 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__request_CsvBatchId_1='785d1781-15d8-4694-92ad-24f3c831ec72'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__request_CsvBatchId_1
2025-09-26 00:19:53.393 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__request_CsvBatchId_1='785d1781-15d8-4694-92ad-24f3c831ec72', @__p_2='200'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BatchId", c."BusinessId", c."CreatedAt", c."PhoneE164", c."PhoneRaw", c."RowIndex", c."RowJson", c."ValidationError"
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__request_CsvBatchId_1
ORDER BY c."RowIndex"
LIMIT @__p_2
2025-09-26 00:19:53.395 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='7dadc1da-cc76-49b6-b233-619229486aaa', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."MessageTemplate", c."TemplateId"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:19:53.399 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:19:53.402 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__r_Phone_1='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__8__locals1_businessId_0 AND c."PhoneNumber" = @__r_Phone_1
LIMIT 1
2025-09-26 00:19:53.407 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='20b52ac0-24fb-4bb1-9e25-81c05931354d', @p1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p2=NULL (DbType = Guid), @p3='2025-09-25T18:49:53.4016146Z' (DbType = DateTime), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6=NULL, @p7='False', @p8='Audience 2025-09-26' (Nullable = false), @p9='2025-09-25T18:49:53.4016146Z' (Nullable = true) (DbType = DateTime), @p10='19472fcb-8f85-4886-b4aa-dc3ac1656599', @p11='{"parameter1":"Robert Nicosta"}' (DbType = Object), @p12='20b52ac0-24fb-4bb1-9e25-81c05931354d', @p13='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p14='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p15='2025-09-25T18:49:53.4016146Z' (DbType = DateTime), @p16=NULL (DbType = Guid), @p17=NULL, @p18='False', @p19='False', @p20=NULL, @p21='918974005240', @p22=NULL, @p23=NULL (DbType = DateTime), @p24='2025-09-25T18:49:53.4016146Z' (Nullable = true) (DbType = DateTime), @p25='465c4f46-adc2-4d4a-bddd-315279ea9bc8', @p26='19472fcb-8f85-4886-b4aa-dc3ac1656599' (Nullable = true), @p27=NULL, @p28='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p29='7dadc1da-cc76-49b6-b233-619229486aaa', @p30=NULL, @p31=NULL, @p32='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p33='BB895481C1D9CE22D4904A0E6380A275DCC034E3B826618D482BB348F702C826', @p34='False', @p35='2025-09-25T18:49:53.4016146Z' (Nullable = true) (DbType = DateTime), @p36=NULL, @p37=NULL, @p38='{}' (DbType = Object), @p39='["Robert Nicosta"]' (DbType = Object), @p40=NULL (DbType = DateTime), @p41='Pending' (Nullable = false), @p42='2025-09-25T18:49:53.4016146Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Audiences" ("Id", "BusinessId", "CampaignId", "CreatedAt", "CreatedByUserId", "CsvBatchId", "Description", "IsDeleted", "Name", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
INSERT INTO "AudienceMembers" ("Id", "AttributesJson", "AudienceId", "BusinessId", "ContactId", "CreatedAt", "CreatedByUserId", "Email", "IsDeleted", "IsTransientContact", "Name", "PhoneE164", "PhoneRaw", "PromotedAt", "UpdatedAt")
VALUES (@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
INSERT INTO "CampaignRecipients" ("Id", "AudienceMemberId", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IdempotencyKey", "IsAutoTagged", "MaterializedAt", "MessagePreview", "ProductBrowsed", "ResolvedButtonUrlsJson", "ResolvedParametersJson", "SentAt", "Status", "UpdatedAt")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42);
2025-09-26 00:19:53.411 +05:30 [INF] 📦 Materialize result: campaign="7dadc1da-cc76-49b6-b233-619229486aaa" materialized=1 skipped=0 audienceId="20b52ac0-24fb-4bb1-9e25-81c05931354d"
2025-09-26 00:19:53.412 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeResponseDto'.
2025-09-26 00:19:53.413 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api) in 28.6312ms
2025-09-26 00:19:53.414 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api)'
2025-09-26 00:19:53.415 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaigns/7dadc1da-cc76-49b6-b233-619229486aaa/materialize - 200 null application/json; charset=utf-8 35.766ms
2025-09-26 00:19:54.813 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:49:54.8118351+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:19:58.962 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 00:19:58.964 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:58.965 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 2.9677ms
2025-09-26 00:19:58.969 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 00:19:58.972 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:19:58.974 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 00:19:58.975 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:19:58.980 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-09-26 00:19:58.982 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:19:58.983 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 6.8837ms
2025-09-26 00:19:58.984 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 00:19:58.985 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 15.5161ms
2025-09-26 00:20:00.505 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/7dadc1da-cc76-49b6-b233-619229486aaa - null null
2025-09-26 00:20:00.509 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:20:00.509 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/7dadc1da-cc76-49b6-b233-619229486aaa - 204 null null 3.9329ms
2025-09-26 00:20:00.512 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/7dadc1da-cc76-49b6-b233-619229486aaa - null 0
2025-09-26 00:20:00.513 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:20:00.514 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 00:20:00.515 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:20:00.518 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='7dadc1da-cc76-49b6-b233-619229486aaa'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
ORDER BY c."Id"
LIMIT 1
2025-09-26 00:20:00.522 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='7dadc1da-cc76-49b6-b233-619229486aaa'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."AudienceMemberId", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IdempotencyKey", t0."IsAutoTagged", t0."MaterializedAt", t0."MessagePreview", t0."ProductBrowsed", t0."ResolvedButtonUrlsJson", t0."ResolvedParametersJson", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."ProfileName", t0."ProfileNameUpdatedAt", t0."Tags", t0."Id1", t0."AttributesJson", t0."AudienceId", t0."BusinessId1", t0."ContactId0", t0."CreatedAt0", t0."CreatedByUserId", t0."Email0", t0."IsDeleted", t0."IsTransientContact", t0."Name0", t0."PhoneE164", t0."PhoneRaw", t0."PromotedAt", t0."UpdatedAt0", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN (
    SELECT c0."Id", c0."AudienceMemberId", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IdempotencyKey", c0."IsAutoTagged", c0."MaterializedAt", c0."MessagePreview", c0."ProductBrowsed", c0."ResolvedButtonUrlsJson", c0."ResolvedParametersJson", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."ProfileName", c1."ProfileNameUpdatedAt", c1."Tags", a."Id" AS "Id1", a."AttributesJson", a."AudienceId", a."BusinessId" AS "BusinessId1", a."ContactId" AS "ContactId0", a."CreatedAt" AS "CreatedAt0", a."CreatedByUserId", a."Email" AS "Email0", a."IsDeleted", a."IsTransientContact", a."Name" AS "Name0", a."PhoneE164", a."PhoneRaw", a."PromotedAt", a."UpdatedAt" AS "UpdatedAt0"
    FROM "CampaignRecipients" AS c0
    LEFT JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
    LEFT JOIN "AudienceMembers" AS a ON c0."AudienceMemberId" = a."Id"
) AS t0 ON t."Id" = t0."CampaignId"
ORDER BY t."Id"
2025-09-26 00:20:00.524 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[@__campaignId_0='7dadc1da-cc76-49b6-b233-619229486aaa'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."CampaignId", c0."IsFromTemplate", c0."Position", c0."Title", c0."Type", c0."Value", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN "CampaignButtons" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-26 00:20:00.533 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:20:00.534 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:20:00.535 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:20:01.195 +05:30 [INF] Received HTTP response headers after 659.448ms - 200
2025-09-26 00:20:01.197 +05:30 [INF] End processing HTTP request after 662.4252ms - 200
2025-09-26 00:20:01.268 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 00:20:01.271 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 00:20:04.742 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:20:04.743 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:20:04.822 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:50:04.8206658+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:20:05.442 +05:30 [INF] Received HTTP response headers after 698.6915ms - 400
2025-09-26 00:20:05.443 +05:30 [INF] End processing HTTP request after 701.7881ms - 400
2025-09-26 00:20:05.445 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"Parameter of type text is missing text value"},"fbtrace_id":"A1q_WINiwcEgxfp04ty2R3x"}}
2025-09-26 00:20:36.185 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__now_0='2025-09-25T18:50:36.1708125+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:20:36.185 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@__messageLogId_0='b8293795-f465-4cba-bd25-b7808e10b427', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:20:36.194 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p5='465c4f46-adc2-4d4a-bddd-315279ea9bc8', @p0='66da8c57f0cf017df7b8d1b75062ec3ec779b7c857c5ac5240cf85d8566e33db', @p1='2025-09-25T18:50:01.2660796Z' (Nullable = true) (DbType = DateTime), @p2='[]' (DbType = Object), @p3='[""]' (DbType = Object), @p4='2025-09-25T18:50:01.2660796Z' (DbType = DateTime), @p6='b8293795-f465-4cba-bd25-b7808e10b427', @p7='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p8=NULL, @p9=NULL (DbType = Guid), @p10=NULL (DbType = Guid), @p11='7dadc1da-cc76-49b6-b233-619229486aaa' (Nullable = true), @p12='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p13=NULL, @p14=NULL, @p15=NULL (DbType = DateTime), @p16='2025-09-25T18:50:01.2660796Z' (DbType = DateTime), @p17='Bad Request', @p18=NULL (DbType = Int32), @p19=NULL (DbType = Boolean), @p20='False', @p21=NULL, @p22='single_variable_body' (Nullable = false), @p23=NULL, @p24=NULL (DbType = Decimal), @p25=NULL, @p26=NULL, @p27=NULL, @p28='{"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"Parameter of type text is missing text value"},"fbtrace_id":"A1q_WINiwcEgxfp04ty2R3x"}}', @p29='918974005240' (Nullable = false), @p30=NULL (DbType = Guid), @p31=NULL, @p32='58789d1f-006c-4b08-b539-94a6d9a45b34' (Nullable = true), @p33=NULL (DbType = DateTime), @p34='campaign', @p35='Failed' (Nullable = false), @p36='4febc6ce-370a-4137-abe4-82519c94a5d8', @p37='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p38=NULL, @p39=NULL, @p40='2025-09-25T18:50:36.1923095+00:00' (DbType = DateTime), @p41='send_response' (Nullable = false), @p42=NULL (DbType = Boolean), @p43='b8293795-f465-4cba-bd25-b7808e10b427' (Nullable = true), @p44='2025-09-25T18:50:36.1923108+00:00' (DbType = DateTime), @p45='{"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"Parameter of type text is missing text value"},"fbtrace_id":"A1q_WINiwcEgxfp04ty2R3x"}}' (Nullable = false), @p46=NULL (DbType = Decimal), @p47=NULL, @p48='META_CLOUD' (Nullable = false), @p49=NULL], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignRecipients" SET "IdempotencyKey" = @p0, "MaterializedAt" = @p1, "ResolvedButtonUrlsJson" = @p2, "ResolvedParametersJson" = @p3, "UpdatedAt" = @p4
WHERE "Id" = @p5;
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35)
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49);
2025-09-26 00:20:36.199 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='a1755301-6fd9-4acb-a540-17ad9acabd97', @p1='True', @p2=NULL, @p3='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p4=NULL, @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7='7dadc1da-cc76-49b6-b233-619229486aaa', @p8=NULL, @p9=NULL, @p10=NULL (DbType = DateTime), @p11='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p12=NULL, @p13='2025-09-25T18:50:01.2660796Z' (DbType = DateTime), @p14='system', @p15=NULL (DbType = DateTime), @p16=NULL, @p17=NULL, @p18='Bad Request', @p19=NULL, @p20='False', @p21=NULL (DbType = DateTime), @p22=NULL, @p23=NULL, @p24='Hello
We are sedning {{1}} items.' (Nullable = false), @p25=NULL, @p26='b8293795-f465-4cba-bd25-b7808e10b427' (Nullable = true), @p27=NULL (DbType = DateTime), @p28='465c4f46-adc2-4d4a-bddd-315279ea9bc8', @p29='0', @p30='58789d1f-006c-4b08-b539-94a6d9a45b34' (Nullable = true), @p31='Failed', @p32=NULL (DbType = DateTime), @p33=NULL, @p34='single_variable_body', @p35=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-09-26 00:20:36.201 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:20:36.202 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 35686.3041ms
2025-09-26 00:20:36.204 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 00:20:36.204 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/7dadc1da-cc76-49b6-b233-619229486aaa - 200 null application/json; charset=utf-8 35692.7193ms
2025-09-26 00:20:46.196 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:50:46.1952992+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:20:56.207 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:50:56.2058147+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:20:58.659 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/7dadc1da-cc76-49b6-b233-619229486aaa - null null
2025-09-26 00:20:58.662 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:20:58.663 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/7dadc1da-cc76-49b6-b233-619229486aaa - 204 null null 3.8106ms
2025-09-26 00:20:58.665 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/7dadc1da-cc76-49b6-b233-619229486aaa - null 0
2025-09-26 00:20:58.667 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:20:58.668 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 00:20:58.668 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:21:05.375 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='7dadc1da-cc76-49b6-b233-619229486aaa'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
ORDER BY c."Id"
LIMIT 1
2025-09-26 00:21:05.393 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='7dadc1da-cc76-49b6-b233-619229486aaa'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."AudienceMemberId", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IdempotencyKey", t0."IsAutoTagged", t0."MaterializedAt", t0."MessagePreview", t0."ProductBrowsed", t0."ResolvedButtonUrlsJson", t0."ResolvedParametersJson", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."ProfileName", t0."ProfileNameUpdatedAt", t0."Tags", t0."Id1", t0."AttributesJson", t0."AudienceId", t0."BusinessId1", t0."ContactId0", t0."CreatedAt0", t0."CreatedByUserId", t0."Email0", t0."IsDeleted", t0."IsTransientContact", t0."Name0", t0."PhoneE164", t0."PhoneRaw", t0."PromotedAt", t0."UpdatedAt0", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN (
    SELECT c0."Id", c0."AudienceMemberId", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IdempotencyKey", c0."IsAutoTagged", c0."MaterializedAt", c0."MessagePreview", c0."ProductBrowsed", c0."ResolvedButtonUrlsJson", c0."ResolvedParametersJson", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."ProfileName", c1."ProfileNameUpdatedAt", c1."Tags", a."Id" AS "Id1", a."AttributesJson", a."AudienceId", a."BusinessId" AS "BusinessId1", a."ContactId" AS "ContactId0", a."CreatedAt" AS "CreatedAt0", a."CreatedByUserId", a."Email" AS "Email0", a."IsDeleted", a."IsTransientContact", a."Name" AS "Name0", a."PhoneE164", a."PhoneRaw", a."PromotedAt", a."UpdatedAt" AS "UpdatedAt0"
    FROM "CampaignRecipients" AS c0
    LEFT JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
    LEFT JOIN "AudienceMembers" AS a ON c0."AudienceMemberId" = a."Id"
) AS t0 ON t."Id" = t0."CampaignId"
ORDER BY t."Id"
2025-09-26 00:21:05.396 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='7dadc1da-cc76-49b6-b233-619229486aaa'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."CampaignId", c0."IsFromTemplate", c0."Position", c0."Title", c0."Type", c0."Value", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN "CampaignButtons" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-26 00:21:08.148 +05:30 [INF] Executed DbCommand (698ms) [Parameters=[@__now_0='2025-09-25T18:51:06.2381841+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:21:28.701 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T18:51:20.9165081+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:21:28.758 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:21:28.759 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:21:28.760 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:21:30.127 +05:30 [INF] Received HTTP response headers after 1365.7431ms - 200
2025-09-26 00:21:30.128 +05:30 [INF] End processing HTTP request after 1369.0551ms - 200
2025-09-26 00:21:30.205 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 00:21:30.208 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 00:21:36.012 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:21:36.013 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:21:36.915 +05:30 [INF] Received HTTP response headers after 901.0144ms - 400
2025-09-26 00:21:36.917 +05:30 [INF] End processing HTTP request after 904.4904ms - 400
2025-09-26 00:21:36.918 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"Parameter of type text is missing text value"},"fbtrace_id":"A51H3ujZxJP9zR_MoVVUP8z"}}
2025-09-26 00:21:39.997 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T18:51:39.9949972+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:21:39.997 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageLogId_0='8428b7cd-90de-4dd2-b236-572b5f57ffa0', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:21:41.809 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p2='465c4f46-adc2-4d4a-bddd-315279ea9bc8', @p0='2025-09-25T18:51:30.2034808Z' (Nullable = true) (DbType = DateTime), @p1='2025-09-25T18:51:30.2034808Z' (DbType = DateTime), @p3='8428b7cd-90de-4dd2-b236-572b5f57ffa0', @p4='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p5=NULL, @p6=NULL (DbType = Guid), @p7=NULL (DbType = Guid), @p8='7dadc1da-cc76-49b6-b233-619229486aaa' (Nullable = true), @p9='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p10=NULL, @p11=NULL, @p12=NULL (DbType = DateTime), @p13='2025-09-25T18:51:30.2034808Z' (DbType = DateTime), @p14='Bad Request', @p15=NULL (DbType = Int32), @p16=NULL (DbType = Boolean), @p17='False', @p18=NULL, @p19='single_variable_body' (Nullable = false), @p20=NULL, @p21=NULL (DbType = Decimal), @p22=NULL, @p23=NULL, @p24=NULL, @p25='{"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"Parameter of type text is missing text value"},"fbtrace_id":"A51H3ujZxJP9zR_MoVVUP8z"}}', @p26='918974005240' (Nullable = false), @p27=NULL (DbType = Guid), @p28=NULL, @p29='526ef35e-0209-42b0-9897-72f594ea7c3d' (Nullable = true), @p30=NULL (DbType = DateTime), @p31='campaign', @p32='Failed' (Nullable = false), @p33='066b04c0-5474-4d40-af3f-10fdbe8b70d3', @p34='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p35=NULL, @p36=NULL, @p37='2025-09-25T18:51:41.8053625+00:00' (DbType = DateTime), @p38='send_response' (Nullable = false), @p39=NULL (DbType = Boolean), @p40='8428b7cd-90de-4dd2-b236-572b5f57ffa0' (Nullable = true), @p41='2025-09-25T18:51:41.8053639+00:00' (DbType = DateTime), @p42='{"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"Parameter of type text is missing text value"},"fbtrace_id":"A51H3ujZxJP9zR_MoVVUP8z"}}' (Nullable = false), @p43=NULL (DbType = Decimal), @p44=NULL, @p45='META_CLOUD' (Nullable = false), @p46=NULL], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignRecipients" SET "MaterializedAt" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32)
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46);
2025-09-26 00:21:41.816 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='87ddd3fc-09b2-4d97-9ab3-5504bd605aa2', @p1='True', @p2=NULL, @p3='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p4=NULL, @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7='7dadc1da-cc76-49b6-b233-619229486aaa', @p8=NULL, @p9=NULL, @p10=NULL (DbType = DateTime), @p11='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p12=NULL, @p13='2025-09-25T18:51:30.2034808Z' (DbType = DateTime), @p14='system', @p15=NULL (DbType = DateTime), @p16=NULL, @p17=NULL, @p18='Bad Request', @p19=NULL, @p20='False', @p21=NULL (DbType = DateTime), @p22=NULL, @p23=NULL, @p24='Hello
We are sedning {{1}} items.' (Nullable = false), @p25=NULL, @p26='8428b7cd-90de-4dd2-b236-572b5f57ffa0' (Nullable = true), @p27=NULL (DbType = DateTime), @p28='465c4f46-adc2-4d4a-bddd-315279ea9bc8', @p29='0', @p30='526ef35e-0209-42b0-9897-72f594ea7c3d' (Nullable = true), @p31='Failed', @p32=NULL (DbType = DateTime), @p33=NULL, @p34='single_variable_body', @p35=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-09-26 00:21:41.817 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:21:41.819 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 43148.9343ms
2025-09-26 00:21:41.819 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 00:21:41.820 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/7dadc1da-cc76-49b6-b233-619229486aaa - 200 null application/json; charset=utf-8 43155.25ms
2025-09-26 00:21:44.825 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/7dadc1da-cc76-49b6-b233-619229486aaa - null null
2025-09-26 00:21:44.827 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:21:44.828 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/7dadc1da-cc76-49b6-b233-619229486aaa - 204 null null 3.1095ms
2025-09-26 00:21:44.830 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/7dadc1da-cc76-49b6-b233-619229486aaa - null 0
2025-09-26 00:21:44.832 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:21:44.833 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 00:21:44.833 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:21:50.901 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:51:50.8985645+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:21:50.927 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='7dadc1da-cc76-49b6-b233-619229486aaa'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
ORDER BY c."Id"
LIMIT 1
2025-09-26 00:21:50.944 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='7dadc1da-cc76-49b6-b233-619229486aaa'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."AudienceMemberId", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IdempotencyKey", t0."IsAutoTagged", t0."MaterializedAt", t0."MessagePreview", t0."ProductBrowsed", t0."ResolvedButtonUrlsJson", t0."ResolvedParametersJson", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."ProfileName", t0."ProfileNameUpdatedAt", t0."Tags", t0."Id1", t0."AttributesJson", t0."AudienceId", t0."BusinessId1", t0."ContactId0", t0."CreatedAt0", t0."CreatedByUserId", t0."Email0", t0."IsDeleted", t0."IsTransientContact", t0."Name0", t0."PhoneE164", t0."PhoneRaw", t0."PromotedAt", t0."UpdatedAt0", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN (
    SELECT c0."Id", c0."AudienceMemberId", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IdempotencyKey", c0."IsAutoTagged", c0."MaterializedAt", c0."MessagePreview", c0."ProductBrowsed", c0."ResolvedButtonUrlsJson", c0."ResolvedParametersJson", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."ProfileName", c1."ProfileNameUpdatedAt", c1."Tags", a."Id" AS "Id1", a."AttributesJson", a."AudienceId", a."BusinessId" AS "BusinessId1", a."ContactId" AS "ContactId0", a."CreatedAt" AS "CreatedAt0", a."CreatedByUserId", a."Email" AS "Email0", a."IsDeleted", a."IsTransientContact", a."Name" AS "Name0", a."PhoneE164", a."PhoneRaw", a."PromotedAt", a."UpdatedAt" AS "UpdatedAt0"
    FROM "CampaignRecipients" AS c0
    LEFT JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
    LEFT JOIN "AudienceMembers" AS a ON c0."AudienceMemberId" = a."Id"
) AS t0 ON t."Id" = t0."CampaignId"
ORDER BY t."Id"
2025-09-26 00:21:50.947 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='7dadc1da-cc76-49b6-b233-619229486aaa'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."CampaignId", c0."IsFromTemplate", c0."Position", c0."Title", c0."Type", c0."Value", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN "CampaignButtons" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-26 00:22:08.069 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:52:08.0579325+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:22:32.062 +05:30 [INF] Executed DbCommand (1,546ms) [Parameters=[@__now_0='2025-09-25T18:52:30.5073411+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:22:43.053 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:22:43.068 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:22:43.069 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:22:43.766 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:52:43.7643741+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:22:44.106 +05:30 [INF] Received HTTP response headers after 1036.6894ms - 200
2025-09-26 00:22:44.107 +05:30 [INF] End processing HTTP request after 1039.5414ms - 200
2025-09-26 00:23:12.490 +05:30 [INF] Executed DbCommand (25ms) [Parameters=[@__now_0='2025-09-25T18:53:10.8213586+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:23:28.365 +05:30 [INF] Executed DbCommand (589ms) [Parameters=[@__now_0='2025-09-25T18:53:27.7680597+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:23:43.366 +05:30 [INF] Executed DbCommand (560ms) [Parameters=[@__now_0='2025-09-25T18:53:42.1329108+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:24:53.165 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@__now_0='2025-09-25T18:54:53.1506533+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:25:10.348 +05:30 [INF] Executed DbCommand (2,978ms) [Parameters=[@__now_0='2025-09-25T18:55:07.3680830+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:25:10.350 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 00:25:10.357 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 00:25:12.664 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:25:12.667 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:25:13.735 +05:30 [INF] Received HTTP response headers after 1064.8964ms - 400
2025-09-26 00:25:13.739 +05:30 [INF] End processing HTTP request after 1075.2491ms - 400
2025-09-26 00:25:13.757 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"Parameter of type text is missing text value"},"fbtrace_id":"AjoHIRQ_sLb220Z_FDcEBnf"}}
2025-09-26 00:28:53.939 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__messageLogId_0='198a4153-f57e-4bf3-8e91-151ec67a3446', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:28:53.961 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 00:28:53.949 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__now_0='2025-09-25T18:58:53.9454290+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:28:53.961 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 00:28:53.962 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 00:28:53.970 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 00:28:53.985 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:28:53.985 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p2='465c4f46-adc2-4d4a-bddd-315279ea9bc8', @p0='2025-09-25T18:53:43.3582102Z' (Nullable = true) (DbType = DateTime), @p1='2025-09-25T18:53:43.3582102Z' (DbType = DateTime), @p3='198a4153-f57e-4bf3-8e91-151ec67a3446', @p4='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p5=NULL, @p6=NULL (DbType = Guid), @p7=NULL (DbType = Guid), @p8='7dadc1da-cc76-49b6-b233-619229486aaa' (Nullable = true), @p9='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p10=NULL, @p11=NULL, @p12=NULL (DbType = DateTime), @p13='2025-09-25T18:53:43.3582102Z' (DbType = DateTime), @p14='Bad Request', @p15=NULL (DbType = Int32), @p16=NULL (DbType = Boolean), @p17='False', @p18=NULL, @p19='single_variable_body' (Nullable = false), @p20=NULL, @p21=NULL (DbType = Decimal), @p22=NULL, @p23=NULL, @p24=NULL, @p25='{"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"Parameter of type text is missing text value"},"fbtrace_id":"AjoHIRQ_sLb220Z_FDcEBnf"}}', @p26='918974005240' (Nullable = false), @p27=NULL (DbType = Guid), @p28=NULL, @p29='9271a251-1eaf-46dc-af50-1dddd554da4e' (Nullable = true), @p30=NULL (DbType = DateTime), @p31='campaign', @p32='Failed' (Nullable = false), @p33='0195f66f-1eb9-4610-ace3-cf28eafc5cfc', @p34='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p35=NULL, @p36=NULL, @p37='2025-09-25T18:58:53.9760233+00:00' (DbType = DateTime), @p38='send_response' (Nullable = false), @p39=NULL (DbType = Boolean), @p40='198a4153-f57e-4bf3-8e91-151ec67a3446' (Nullable = true), @p41='2025-09-25T18:58:53.9760257+00:00' (DbType = DateTime), @p42='{"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"Parameter of type text is missing text value"},"fbtrace_id":"AjoHIRQ_sLb220Z_FDcEBnf"}}' (Nullable = false), @p43=NULL (DbType = Decimal), @p44=NULL, @p45='META_CLOUD' (Nullable = false), @p46=NULL], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignRecipients" SET "MaterializedAt" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32)
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46);
2025-09-26 00:28:53.992 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:28:54.003 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 204 null null 42.7124ms
2025-09-26 00:28:53.995 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:28:53.999 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 204 null null 37.9064ms
2025-09-26 00:28:54.009 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 00:28:54.008 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 204 null null 46.2217ms
2025-09-26 00:28:53.998 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:28:54.013 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 00:28:54.017 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:28:54.013 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='9fe89fe4-e751-45af-a5ab-a1b531c616a7', @p1='True', @p2=NULL, @p3='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p4=NULL, @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7='7dadc1da-cc76-49b6-b233-619229486aaa', @p8=NULL, @p9=NULL, @p10=NULL (DbType = DateTime), @p11='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p12=NULL, @p13='2025-09-25T18:53:43.3582102Z' (DbType = DateTime), @p14='system', @p15=NULL (DbType = DateTime), @p16=NULL, @p17=NULL, @p18='Bad Request', @p19=NULL, @p20='False', @p21=NULL (DbType = DateTime), @p22=NULL, @p23=NULL, @p24='Hello
We are sedning {{1}} items.' (Nullable = false), @p25=NULL, @p26='198a4153-f57e-4bf3-8e91-151ec67a3446' (Nullable = true), @p27=NULL (DbType = DateTime), @p28='465c4f46-adc2-4d4a-bddd-315279ea9bc8', @p29='0', @p30='9271a251-1eaf-46dc-af50-1dddd554da4e' (Nullable = true), @p31='Failed', @p32=NULL (DbType = DateTime), @p33=NULL, @p34='single_variable_body', @p35=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-09-26 00:28:54.023 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 204 null null 52.8714ms
2025-09-26 00:28:54.027 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:28:54.028 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 00:28:54.031 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:28:54.037 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 00:28:54.038 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 00:28:54.039 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 429204.8116ms
2025-09-26 00:28:54.042 +05:30 [INF] Route matched with {action = "GetSenders", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSenders(System.Guid) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-26 00:28:54.047 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 00:28:54.049 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-26 00:28:54.054 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-26 00:28:54.054 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/7dadc1da-cc76-49b6-b233-619229486aaa - 200 null application/json; charset=utf-8 429223.359ms
2025-09-26 00:28:54.057 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType155`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType241`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:28:54.060 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.WhatsAppSettings.DTOs.WhatsAppSenderDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:28:54.067 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 22.4967ms
2025-09-26 00:28:54.069 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 00:28:54.069 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api) in 18.1647ms
2025-09-26 00:28:54.070 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 00:28:54.071 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 00:28:54.075 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:28:54.076 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 00:28:54.079 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:28:54.081 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 200 null application/json; charset=utf-8 72.2563ms
2025-09-26 00:28:54.082 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 00:28:54.084 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 200 null application/json; charset=utf-8 70.2612ms
2025-09-26 00:28:54.085 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 00:28:54.091 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 00:28:54.097 +05:30 [INF] Route matched with {action = "GetSenders", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSenders(System.Guid) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-26 00:28:54.102 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-26 00:28:54.107 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-26 00:28:54.109 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType155`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType241`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:28:54.112 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.WhatsAppSettings.DTOs.WhatsAppSenderDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:28:54.114 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 14.6538ms
2025-09-26 00:28:54.116 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api) in 11.9546ms
2025-09-26 00:28:54.118 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 00:28:54.120 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 00:28:54.122 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 200 null application/json; charset=utf-8 52.8691ms
2025-09-26 00:28:54.123 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 200 null application/json; charset=utf-8 53.1608ms
2025-09-26 00:29:04.001 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:59:03.9986532+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:29:07.041 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/support_report_issue_v1 - null null
2025-09-26 00:29:07.045 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:29:07.047 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/support_report_issue_v1 - 204 null null 5.6407ms
2025-09-26 00:29:07.051 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/support_report_issue_v1 - null null
2025-09-26 00:29:07.053 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:29:07.055 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-26 00:29:07.057 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 00:29:07.064 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__name_1='support_report_issue_v1'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-09-26 00:29:07.069 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='support_report_issue_v1', @__language_2='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Language" = @__language_2
ORDER BY w."Language" = @__language_2 DESC
LIMIT 1
2025-09-26 00:29:07.079 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType242`10[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:29:07.082 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 22.1657ms
2025-09-26 00:29:07.084 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-26 00:29:07.085 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/support_report_issue_v1 - 200 null application/json; charset=utf-8 34.455ms
2025-09-26 00:29:14.010 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:59:14.0089014+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:29:24.019 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:59:24.0170583+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:29:34.027 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:59:34.0251387+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:29:36.672 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-09-26 00:29:36.679 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:29:36.687 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 15.5642ms
2025-09-26 00:29:36.706 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 797
2025-09-26 00:29:36.709 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:29:36.710 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-26 00:29:36.711 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:29:36.717 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__phoneNumberId_1='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."PhoneNumberId" = @__phoneNumberId_1 AND w."IsActive"
LIMIT 1
2025-09-26 00:29:36.723 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:29:36.725 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:29:36.727 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:29:38.032 +05:30 [INF] Received HTTP response headers after 1304.8084ms - 200
2025-09-26 00:29:38.035 +05:30 [INF] End processing HTTP request after 1309.3402ms - 200
2025-09-26 00:29:38.154 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='support_report_issue_v1', @__provider_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:29:38.166 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='d394708c-f40f-4269-b22b-eac674e5c69c', @p1=NULL (DbType = Guid), @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='text', @p6='2025-09-25T18:59:38.1515342Z' (DbType = DateTime), @p7='system', @p8=NULL (DbType = Guid), @p9=NULL (DbType = DateTime), @p10=NULL, @p11=NULL, @p12=NULL, @p13=NULL, @p14=NULL, @p15='False', @p16='We're sorry to hear you're experiencing an issue.

To help us resolve it quickly, please tap the button below to connect with our technical support team. Please be ready to provide a brief description of the problem.', @p17='We're sorry to hear you're experiencing an issue.

To help us resolve it quickly, please tap the button below to connect with our technical support team. Please be ready to provide a brief description of the problem.' (Nullable = false), @p18='QR1' (Nullable = false), @p19='673199269218077', @p20='META_CLOUD', @p21=NULL (DbType = DateTime), @p22=NULL (DbType = Guid), @p23='Draft' (Nullable = false), @p24='support_report_issue_v1', @p25='[]', @p26='{"Provider":"meta_cloud","TemplateId":"755167220845328","TemplateName":"support_report_issue_v1","Language":"en_US","HasHeaderMedia":false,"HeaderType":"","BodyPlaceholders":[],"Buttons":[{"Type":"QUICK_REPLY","Text":"Connect to Technical Team","Value":"","Order":0},{"Type":"QUICK_REPLY","Text":"Back to Support Menu","Value":"","Order":1}]}' (DbType = Object), @p27='2025-09-25T18:59:38.1515342Z' (DbType = DateTime), @p28=NULL, @p29='aba4bad3-ebb5-40fb-8f72-631c349ff934', @p30='d394708c-f40f-4269-b22b-eac674e5c69c', @p31='True', @p32='1', @p33='Connect to Technical Team' (Nullable = false), @p34='QUICK_REPLY' (Nullable = false), @p35='' (Nullable = false), @p36='c84627fd-53d7-4dc5-992f-29dce6817d19', @p37='d394708c-f40f-4269-b22b-eac674e5c69c', @p38='True', @p39='2', @p40='Back to Support Menu' (Nullable = false), @p41='QUICK_REPLY' (Nullable = false), @p42='' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "AudienceId", "BusinessId", "CTAFlowConfigId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "DocumentUrl", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "PhoneNumberId", "Provider", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "TemplateSchemaSnapshot", "UpdatedAt", "VideoUrl")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41, @p42);
2025-09-26 00:29:38.176 +05:30 [INF] ✅ Campaign 'QR1' created | Type:text | Header:none | FlowId:null | EntryTemplate:support_report_issue_v1 | Sender:META_CLOUD/673199269218077 | Recipients:0
2025-09-26 00:29:38.181 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType64`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:29:38.183 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 1469.9167ms
2025-09-26 00:29:38.186 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-26 00:29:38.187 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 1481.2656ms
2025-09-26 00:29:38.248 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:29:38.249 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/d394708c-f40f-4269-b22b-eac674e5c69c/csv-sample/schema - null null
2025-09-26 00:29:38.249 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/d394708c-f40f-4269-b22b-eac674e5c69c - null null
2025-09-26 00:29:38.249 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:29:38.252 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-26 00:29:38.267 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:29:38.271 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:29:38.276 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:29:38.279 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:29:38.284 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:29:38.285 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 36.7475ms
2025-09-26 00:29:38.286 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/d394708c-f40f-4269-b22b-eac674e5c69c/csv-sample/schema - 204 null null 37.7073ms
2025-09-26 00:29:38.291 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 38.339ms
2025-09-26 00:29:38.289 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 39.5834ms
2025-09-26 00:29:38.288 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/d394708c-f40f-4269-b22b-eac674e5c69c - 204 null null 38.5839ms
2025-09-26 00:29:38.302 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/d394708c-f40f-4269-b22b-eac674e5c69c - null null
2025-09-26 00:29:38.307 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/d394708c-f40f-4269-b22b-eac674e5c69c/csv-sample/schema - null null
2025-09-26 00:29:38.310 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-26 00:29:38.318 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:29:38.321 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:29:38.324 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:29:38.326 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:29:38.329 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:29:38.331 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-26 00:29:38.332 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:29:38.333 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-26 00:29:38.334 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:29:38.335 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:29:38.337 +05:30 [INF] Route matched with {action = "GetSchema", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSchema(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 00:29:38.339 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-26 00:29:38.347 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='d394708c-f40f-4269-b22b-eac674e5c69c', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AudienceId", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."DocumentUrl", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."TemplateSchemaSnapshot", t."UpdatedAt", t."VideoUrl", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", t."Id1", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value", t."BusinessId1", t."CreatedAt1", t."CreatedBy0", t."FlowName", t."IsActive0", t."IsPublished", t."UpdatedAt1"
FROM (
    SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0", c1."Id" AS "Id1", c1."BusinessId" AS "BusinessId1", c1."CreatedAt" AS "CreatedAt1", c1."CreatedBy" AS "CreatedBy0", c1."FlowName", c1."IsActive" AS "IsActive0", c1."IsPublished", c1."UpdatedAt" AS "UpdatedAt1"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    LEFT JOIN "CTAFlowConfigs" AS c1 ON c."CTAFlowConfigId" = c1."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t."Id0", t."Id1"
2025-09-26 00:29:38.349 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='d394708c-f40f-4269-b22b-eac674e5c69c', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 00:29:38.340 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-26 00:29:38.354 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-09-26 00:29:38.358 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='support_report_issue_v1', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:29:38.361 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 19.0307ms
2025-09-26 00:29:38.361 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-26 00:29:38.351 +05:30 [INF] GetPagedContactsAsync: businessId="6b5cea67-e8e9-42f7-8bde-51a9dbc02d56", tab=all, page=1, pageSize=1000
2025-09-26 00:29:38.369 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='support_report_issue_v1'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:29:38.369 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-26 00:29:38.376 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-26 00:29:38.372 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:29:38.379 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/d394708c-f40f-4269-b22b-eac674e5c69c - 200 null application/json; charset=utf-8 77.294ms
2025-09-26 00:29:38.378 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType66`3[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType67`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:29:38.386 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 27.6059ms
2025-09-26 00:29:38.387 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."ProfileName", t."ProfileNameUpdatedAt", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-26 00:29:38.390 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:29:38.392 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api) in 46.3883ms
2025-09-26 00:29:38.393 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:29:38.397 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:29:38.402 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/d394708c-f40f-4269-b22b-eac674e5c69c/csv-sample/schema - null null
2025-09-26 00:29:38.402 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:29:38.405 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:29:38.406 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 88.0968ms
2025-09-26 00:29:38.408 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 57.2582ms
2025-09-26 00:29:38.411 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:29:38.413 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:29:38.414 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/d394708c-f40f-4269-b22b-eac674e5c69c/csv-sample/schema - 200 null application/json; charset=utf-8 107.2083ms
2025-09-26 00:29:38.420 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-26 00:29:38.422 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:29:38.423 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-26 00:29:38.430 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 119.5979ms
2025-09-26 00:29:38.433 +05:30 [INF] Route matched with {action = "GetSchema", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSchema(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 00:29:38.438 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-26 00:29:38.449 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='d394708c-f40f-4269-b22b-eac674e5c69c', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 00:29:38.450 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:29:38.456 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='support_report_issue_v1', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:29:38.457 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 21.5127ms
2025-09-26 00:29:38.462 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='support_report_issue_v1'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:29:38.463 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:29:38.466 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType66`3[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType67`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:29:38.468 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 77.3947ms
2025-09-26 00:29:38.470 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api) in 25.3609ms
2025-09-26 00:29:38.475 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:29:38.477 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/d394708c-f40f-4269-b22b-eac674e5c69c/csv-sample/schema - 200 null application/json; charset=utf-8 75.5342ms
2025-09-26 00:29:44.033 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:59:44.0314890+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:29:49.494 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch - null null
2025-09-26 00:29:49.498 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:29:49.499 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch - 204 null null 4.7169ms
2025-09-26 00:29:49.506 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/csv/batch - multipart/form-data; boundary=----WebKitFormBoundaryYoKEihLT0I9LpCgC 216
2025-09-26 00:29:49.510 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:29:49.512 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api)'
2025-09-26 00:29:49.514 +05:30 [INF] Route matched with {action = "Upload", controller = "CsvBatch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Upload(xbytechat.api.Features.CampaignModule.DTOs.Requests.CsvBatchUploadForm, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController (xbytechat.api).
2025-09-26 00:29:49.522 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='93496379-28d2-47bc-95b1-2d9368c14f75', @p1=NULL (DbType = Guid), @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3=NULL, @p4='2025-09-25T18:59:49.5173966Z' (DbType = DateTime), @p5=NULL (DbType = Guid), @p6=NULL, @p7='csv_single_parameter.csv', @p8=NULL (DbType = Object), @p9='0', @p10='0', @p11='ingesting' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CsvBatches" ("Id", "AudienceId", "BusinessId", "Checksum", "CreatedAt", "CreatedByUserId", "ErrorMessage", "FileName", "HeadersJson", "RowCount", "SkippedCount", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-09-26 00:29:49.530 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p1='93496379-28d2-47bc-95b1-2d9368c14f75', @p0='["phone"]' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CsvBatches" SET "HeadersJson" = @p0
WHERE "Id" = @p1;
2025-09-26 00:29:49.536 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='85762e2b-1db4-4f4d-a197-6ed6789a188d', @p1='93496379-28d2-47bc-95b1-2d9368c14f75', @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3='2025-09-25T18:59:49.5332970Z' (DbType = DateTime), @p4=NULL, @p5=NULL, @p6='0', @p7='{"phone":"89740 05240"}' (Nullable = false) (DbType = Object), @p8=NULL], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CsvRows" ("Id", "BatchId", "BusinessId", "CreatedAt", "PhoneE164", "PhoneRaw", "RowIndex", "RowJson", "ValidationError")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-09-26 00:29:49.542 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='93496379-28d2-47bc-95b1-2d9368c14f75', @p0='1', @p1='ready' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CsvBatches" SET "RowCount" = @p0, "Status" = @p1
WHERE "Id" = @p2;
2025-09-26 00:29:49.545 +05:30 [INF] CsvBatch "93496379-28d2-47bc-95b1-2d9368c14f75" ingested: 1 rows; headers=1
2025-09-26 00:29:49.547 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType70`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.CampaignModule.DTOs.CsvBatchUploadResultDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:29:49.549 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api) in 32.8209ms
2025-09-26 00:29:49.551 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api)'
2025-09-26 00:29:49.553 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/csv/batch - 200 null application/json; charset=utf-8 47.0978ms
2025-09-26 00:29:49.562 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch/93496379-28d2-47bc-95b1-2d9368c14f75/sample?take=10 - null null
2025-09-26 00:29:49.566 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:29:49.567 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch/93496379-28d2-47bc-95b1-2d9368c14f75/sample?take=10 - 204 null null 4.6231ms
2025-09-26 00:29:49.572 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/csv/batch/93496379-28d2-47bc-95b1-2d9368c14f75/sample?take=10 - null null
2025-09-26 00:29:49.575 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:29:49.577 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api)'
2025-09-26 00:29:49.579 +05:30 [INF] Route matched with {action = "Sample", controller = "CsvBatch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sample(System.Guid, Int32, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController (xbytechat.api).
2025-09-26 00:29:49.584 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__batchId_0='93496379-28d2-47bc-95b1-2d9368c14f75', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."HeadersJson", c."RowCount"
FROM "CsvBatches" AS c
WHERE c."Id" = @__batchId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:29:49.591 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__batchId_1='93496379-28d2-47bc-95b1-2d9368c14f75', @__p_2='10'], CommandType='"Text"', CommandTimeout='30']
SELECT c."RowIndex", c."Id", c."BatchId", c."BusinessId", c."CreatedAt", c."PhoneE164", c."PhoneRaw", c."RowJson", c."ValidationError"
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__batchId_1
ORDER BY c."RowIndex"
LIMIT @__p_2
2025-09-26 00:29:49.594 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType70`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IReadOnlyList`1[[xbytechat.api.Features.CampaignModule.DTOs.CsvRowSampleDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:29:49.597 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api) in 15.9148ms
2025-09-26 00:29:49.599 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api)'
2025-09-26 00:29:49.601 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/csv/batch/93496379-28d2-47bc-95b1-2d9368c14f75/sample?take=10 - 200 null application/json; charset=utf-8 29.292ms
2025-09-26 00:29:49.611 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/d394708c-f40f-4269-b22b-eac674e5c69c/mappings/suggest?batchId=93496379-28d2-47bc-95b1-2d9368c14f75 - null null
2025-09-26 00:29:49.615 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:29:49.617 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/d394708c-f40f-4269-b22b-eac674e5c69c/mappings/suggest?batchId=93496379-28d2-47bc-95b1-2d9368c14f75 - 204 null null 5.5487ms
2025-09-26 00:29:49.621 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/d394708c-f40f-4269-b22b-eac674e5c69c/mappings/suggest?batchId=93496379-28d2-47bc-95b1-2d9368c14f75 - null null
2025-09-26 00:29:49.625 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:29:49.626 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api)'
2025-09-26 00:29:49.627 +05:30 [INF] Route matched with {action = "Suggest", controller = "CampaignMappings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestAsync(System.Guid, System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController (xbytechat.api).
2025-09-26 00:29:49.632 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='d394708c-f40f-4269-b22b-eac674e5c69c', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateParameters"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:29:49.639 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__batchId_0='93496379-28d2-47bc-95b1-2d9368c14f75', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."HeadersJson"
FROM "CsvBatches" AS c
WHERE c."Id" = @__batchId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:29:49.643 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:29:49.644 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api) in 14.9347ms
2025-09-26 00:29:49.646 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api)'
2025-09-26 00:29:49.648 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/d394708c-f40f-4269-b22b-eac674e5c69c/mappings/suggest?batchId=93496379-28d2-47bc-95b1-2d9368c14f75 - 200 null application/json; charset=utf-8 26.199ms
2025-09-26 00:29:52.726 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/d394708c-f40f-4269-b22b-eac674e5c69c/mappings - null null
2025-09-26 00:29:52.730 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:29:52.731 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/d394708c-f40f-4269-b22b-eac674e5c69c/mappings - 204 null null 5.428ms
2025-09-26 00:29:52.737 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaigns/d394708c-f40f-4269-b22b-eac674e5c69c/mappings - application/json 2
2025-09-26 00:29:52.740 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:29:52.742 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api)'
2025-09-26 00:29:52.744 +05:30 [INF] Route matched with {action = "Save", controller = "CampaignMappings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SaveAsync(System.Guid, System.Collections.Generic.Dictionary`2[System.String,System.String], System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController (xbytechat.api).
2025-09-26 00:29:52.747 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-26 00:29:52.748 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api) in 1.8609ms
2025-09-26 00:29:52.750 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api)'
2025-09-26 00:29:52.752 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaigns/d394708c-f40f-4269-b22b-eac674e5c69c/mappings - 204 null null 15.0398ms
2025-09-26 00:29:52.758 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/d394708c-f40f-4269-b22b-eac674e5c69c/materialize - null null
2025-09-26 00:29:52.761 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:29:52.763 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/d394708c-f40f-4269-b22b-eac674e5c69c/materialize - 204 null null 4.5321ms
2025-09-26 00:29:52.767 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaigns/d394708c-f40f-4269-b22b-eac674e5c69c/materialize - application/json 182
2025-09-26 00:29:52.771 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:29:52.772 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api)'
2025-09-26 00:29:52.774 +05:30 [INF] Route matched with {action = "CsvCreate", controller = "CampaignMaterialize"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeResponseDto]] CsvCreate(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeRequestDto, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController (xbytechat.api).
2025-09-26 00:29:52.777 +05:30 [INF] 📦 Materialize request: campaign="d394708c-f40f-4269-b22b-eac674e5c69c" persist=true batch="93496379-28d2-47bc-95b1-2d9368c14f75" audience='Audience 2025-09-26'
2025-09-26 00:29:52.781 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='d394708c-f40f-4269-b22b-eac674e5c69c', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1)
2025-09-26 00:29:52.787 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__request_CsvBatchId_1='93496379-28d2-47bc-95b1-2d9368c14f75'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__request_CsvBatchId_1
2025-09-26 00:29:52.792 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__request_CsvBatchId_1='93496379-28d2-47bc-95b1-2d9368c14f75', @__p_2='200'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BatchId", c."BusinessId", c."CreatedAt", c."PhoneE164", c."PhoneRaw", c."RowIndex", c."RowJson", c."ValidationError"
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__request_CsvBatchId_1
ORDER BY c."RowIndex"
LIMIT @__p_2
2025-09-26 00:29:52.796 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='d394708c-f40f-4269-b22b-eac674e5c69c', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."MessageTemplate", c."TemplateId"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:29:52.801 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='support_report_issue_v1'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:29:52.809 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__r_Phone_1='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__8__locals1_businessId_0 AND c."PhoneNumber" = @__r_Phone_1
LIMIT 1
2025-09-26 00:29:52.818 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='bb5111e9-b587-4ee3-8510-4ee2a63aaba4', @p1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p2=NULL (DbType = Guid), @p3='2025-09-25T18:59:52.8075132Z' (DbType = DateTime), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6=NULL, @p7='False', @p8='Audience 2025-09-26' (Nullable = false), @p9='2025-09-25T18:59:52.8075132Z' (Nullable = true) (DbType = DateTime), @p10='26bd3ac6-353d-417b-81b2-ebd9d9c097dd', @p11='{"phone":"89740 05240"}' (DbType = Object), @p12='bb5111e9-b587-4ee3-8510-4ee2a63aaba4', @p13='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p14='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p15='2025-09-25T18:59:52.8075132Z' (DbType = DateTime), @p16=NULL (DbType = Guid), @p17=NULL, @p18='False', @p19='False', @p20=NULL, @p21='918974005240', @p22=NULL, @p23=NULL (DbType = DateTime), @p24='2025-09-25T18:59:52.8075132Z' (Nullable = true) (DbType = DateTime), @p25='e4ac5bad-3c10-4afd-b293-fea396d06513', @p26='26bd3ac6-353d-417b-81b2-ebd9d9c097dd' (Nullable = true), @p27=NULL, @p28='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p29='d394708c-f40f-4269-b22b-eac674e5c69c', @p30=NULL, @p31=NULL, @p32='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p33='E613104DEF026B75F6F0F0E9A8991CB98B5555D3A04C5C47E0C136D4E7D1BE55', @p34='False', @p35='2025-09-25T18:59:52.8075132Z' (Nullable = true) (DbType = DateTime), @p36=NULL, @p37=NULL, @p38='{}' (DbType = Object), @p39='[]' (DbType = Object), @p40=NULL (DbType = DateTime), @p41='Pending' (Nullable = false), @p42='2025-09-25T18:59:52.8075132Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Audiences" ("Id", "BusinessId", "CampaignId", "CreatedAt", "CreatedByUserId", "CsvBatchId", "Description", "IsDeleted", "Name", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
INSERT INTO "AudienceMembers" ("Id", "AttributesJson", "AudienceId", "BusinessId", "ContactId", "CreatedAt", "CreatedByUserId", "Email", "IsDeleted", "IsTransientContact", "Name", "PhoneE164", "PhoneRaw", "PromotedAt", "UpdatedAt")
VALUES (@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
INSERT INTO "CampaignRecipients" ("Id", "AudienceMemberId", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IdempotencyKey", "IsAutoTagged", "MaterializedAt", "MessagePreview", "ProductBrowsed", "ResolvedButtonUrlsJson", "ResolvedParametersJson", "SentAt", "Status", "UpdatedAt")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42);
2025-09-26 00:29:52.841 +05:30 [INF] 📦 Materialize result: campaign="d394708c-f40f-4269-b22b-eac674e5c69c" materialized=1 skipped=0 audienceId="bb5111e9-b587-4ee3-8510-4ee2a63aaba4"
2025-09-26 00:29:52.843 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeResponseDto'.
2025-09-26 00:29:52.845 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api) in 68.8058ms
2025-09-26 00:29:52.847 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api)'
2025-09-26 00:29:52.848 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaigns/d394708c-f40f-4269-b22b-eac674e5c69c/materialize - 200 null application/json; charset=utf-8 81.1476ms
2025-09-26 00:29:54.052 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T18:59:54.0500205+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:30:04.070 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:00:04.0680019+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:30:14.092 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:00:14.0899682+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:30:24.107 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:00:24.1047420+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:30:24.582 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 00:30:24.600 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:30:24.602 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 19.7027ms
2025-09-26 00:30:24.613 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 00:30:24.617 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:30:24.619 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 00:30:24.620 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:30:24.628 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-09-26 00:30:24.632 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:30:24.634 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 11.6732ms
2025-09-26 00:30:24.636 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 00:30:24.637 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 23.7558ms
2025-09-26 00:30:27.027 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/d394708c-f40f-4269-b22b-eac674e5c69c - null null
2025-09-26 00:30:27.031 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:30:27.037 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/d394708c-f40f-4269-b22b-eac674e5c69c - 204 null null 9.8757ms
2025-09-26 00:30:27.041 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/d394708c-f40f-4269-b22b-eac674e5c69c - null 0
2025-09-26 00:30:27.044 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:30:27.046 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 00:30:27.047 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:30:45.199 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T19:00:45.1949589+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:30:45.199 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='d394708c-f40f-4269-b22b-eac674e5c69c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
ORDER BY c."Id"
LIMIT 1
2025-09-26 00:30:45.219 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='d394708c-f40f-4269-b22b-eac674e5c69c'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."AudienceMemberId", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IdempotencyKey", t0."IsAutoTagged", t0."MaterializedAt", t0."MessagePreview", t0."ProductBrowsed", t0."ResolvedButtonUrlsJson", t0."ResolvedParametersJson", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."ProfileName", t0."ProfileNameUpdatedAt", t0."Tags", t0."Id1", t0."AttributesJson", t0."AudienceId", t0."BusinessId1", t0."ContactId0", t0."CreatedAt0", t0."CreatedByUserId", t0."Email0", t0."IsDeleted", t0."IsTransientContact", t0."Name0", t0."PhoneE164", t0."PhoneRaw", t0."PromotedAt", t0."UpdatedAt0", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN (
    SELECT c0."Id", c0."AudienceMemberId", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IdempotencyKey", c0."IsAutoTagged", c0."MaterializedAt", c0."MessagePreview", c0."ProductBrowsed", c0."ResolvedButtonUrlsJson", c0."ResolvedParametersJson", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."ProfileName", c1."ProfileNameUpdatedAt", c1."Tags", a."Id" AS "Id1", a."AttributesJson", a."AudienceId", a."BusinessId" AS "BusinessId1", a."ContactId" AS "ContactId0", a."CreatedAt" AS "CreatedAt0", a."CreatedByUserId", a."Email" AS "Email0", a."IsDeleted", a."IsTransientContact", a."Name" AS "Name0", a."PhoneE164", a."PhoneRaw", a."PromotedAt", a."UpdatedAt" AS "UpdatedAt0"
    FROM "CampaignRecipients" AS c0
    LEFT JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
    LEFT JOIN "AudienceMembers" AS a ON c0."AudienceMemberId" = a."Id"
) AS t0 ON t."Id" = t0."CampaignId"
ORDER BY t."Id"
2025-09-26 00:30:45.223 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='d394708c-f40f-4269-b22b-eac674e5c69c'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."CampaignId", c0."IsFromTemplate", c0."Position", c0."Title", c0."Type", c0."Value", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN "CampaignButtons" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-26 00:30:45.227 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:30:45.230 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:30:45.231 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:30:46.337 +05:30 [INF] Received HTTP response headers after 1104.3483ms - 200
2025-09-26 00:30:46.339 +05:30 [INF] End processing HTTP request after 1109.4945ms - 200
2025-09-26 00:30:46.449 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 00:30:46.454 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 00:30:50.904 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:30:50.907 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:30:52.481 +05:30 [INF] Received HTTP response headers after 1572.8053ms - 200
2025-09-26 00:30:52.483 +05:30 [INF] End processing HTTP request after 1578.3308ms - 200
2025-09-26 00:30:55.736 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageLogId_0='459cb900-bc9b-43a4-b527-22edbb22f86b', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:30:55.739 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-26 00:30:55.739 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-09-26 00:30:55.739 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:00:55.7367772+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:30:55.749 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p4='e4ac5bad-3c10-4afd-b293-fea396d06513', @p0='ea1d936429e41d750631af87e0cbedba9dfdb05c2021d8791e4e25411b087a2a', @p1='2025-09-25T19:00:46.4439075Z' (Nullable = true) (DbType = DateTime), @p2='[]' (DbType = Object), @p3='2025-09-25T19:00:46.4439075Z' (DbType = DateTime), @p5='459cb900-bc9b-43a4-b527-22edbb22f86b', @p6='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p7='[{"i":0,"position":1,"text":"Connect to Technical Team","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"position":2,"text":"Back to Support Menu","type":"QUICK_REPLY","subType":"quick_reply"}]', @p8=NULL (DbType = Guid), @p9=NULL (DbType = Guid), @p10='d394708c-f40f-4269-b22b-eac674e5c69c' (Nullable = true), @p11='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p12=NULL, @p13=NULL, @p14=NULL (DbType = DateTime), @p15='2025-09-25T19:00:46.4439075Z' (DbType = DateTime), @p16=NULL, @p17=NULL (DbType = Int32), @p18=NULL (DbType = Boolean), @p19='False', @p20=NULL, @p21='support_report_issue_v1' (Nullable = false), @p22='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjU2NTkwRjFDMzBCNjg1MjQxAA==', @p23=NULL (DbType = Decimal), @p24=NULL, @p25=NULL, @p26=NULL, @p27='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjU2NTkwRjFDMzBCNjg1MjQxAA==","message_status":"accepted"}]}', @p28='918974005240' (Nullable = false), @p29=NULL (DbType = Guid), @p30=NULL, @p31='2b4aa397-6217-4d05-84d8-2031ae4c8bce' (Nullable = true), @p32='2025-09-25T19:00:46.4439075Z' (Nullable = true) (DbType = DateTime), @p33='campaign', @p34='Sent' (Nullable = false), @p35='12994544-249b-458f-af2c-39862aad839b', @p36='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p37=NULL, @p38=NULL, @p39='2025-09-25T19:00:55.7442537+00:00' (DbType = DateTime), @p40='send_response' (Nullable = false), @p41=NULL (DbType = Boolean), @p42='459cb900-bc9b-43a4-b527-22edbb22f86b' (Nullable = true), @p43='2025-09-25T19:00:55.7442553+00:00' (DbType = DateTime), @p44='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjU2NTkwRjFDMzBCNjg1MjQxAA==","message_status":"accepted"}]}' (Nullable = false), @p45=NULL (DbType = Decimal), @p46=NULL, @p47='META_CLOUD' (Nullable = false), @p48='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjU2NTkwRjFDMzBCNjg1MjQxAA=='], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignRecipients" SET "IdempotencyKey" = @p0, "MaterializedAt" = @p1, "ResolvedButtonUrlsJson" = @p2, "UpdatedAt" = @p3
WHERE "Id" = @p4;
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34)
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48);
2025-09-26 00:30:55.752 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:30:55.755 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:30:55.762 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 00:30:55.765 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='b8e7a268-18df-462d-8082-a66f2e9bbdd6', @p1='True', @p2=NULL, @p3='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p4='[{"i":0,"position":1,"text":"Connect to Technical Team","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"position":2,"text":"Back to Support Menu","type":"QUICK_REPLY","subType":"quick_reply"}]', @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7='d394708c-f40f-4269-b22b-eac674e5c69c', @p8=NULL, @p9=NULL, @p10=NULL (DbType = DateTime), @p11='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p12=NULL, @p13='2025-09-25T19:00:46.4439075Z' (DbType = DateTime), @p14='system', @p15=NULL (DbType = DateTime), @p16=NULL, @p17=NULL, @p18=NULL, @p19=NULL, @p20='False', @p21=NULL (DbType = DateTime), @p22=NULL, @p23=NULL, @p24='We're sorry to hear you're experiencing an issue.

To help us resolve it quickly, please tap the button below to connect with our technical support team. Please be ready to provide a brief description of the problem.' (Nullable = false), @p25='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjU2NTkwRjFDMzBCNjg1MjQxAA==', @p26='459cb900-bc9b-43a4-b527-22edbb22f86b' (Nullable = true), @p27=NULL (DbType = DateTime), @p28='e4ac5bad-3c10-4afd-b293-fea396d06513', @p29='0', @p30='2b4aa397-6217-4d05-84d8-2031ae4c8bce' (Nullable = true), @p31='Sent', @p32='2025-09-25T19:00:46.4439075Z' (Nullable = true) (DbType = DateTime), @p33=NULL, @p34='support_report_issue_v1', @p35=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-09-26 00:30:55.765 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 00:30:55.768 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjU2NTkwRjFDMzBCNjg1MjQxAA==","status":"sent","timestamp":"1758826852","recipient_id":"918974005240","conversation":{"id":"14a5fb9f63de16af10e9e1aeb1afa4af","expiration_timestamp":"1758826852","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:30:55.771 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:30:55.773 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjU2NTkwRjFDMzBCNjg1MjQxAA==","status":"delivered","timestamp":"1758826853","recipient_id":"918974005240","conversation":{"id":"14a5fb9f63de16af10e9e1aeb1afa4af","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:30:55.775 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 00:30:55.775 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjU2NTkwRjFDMzBCNjg1MjQxAA==","status":"sent","timestamp":"1758826852","recipient_id":"918974005240","conversation":{"id":"14a5fb9f63de16af10e9e1aeb1afa4af","expiration_timestamp":"1758826852","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:30:55.776 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 28726.6037ms
2025-09-26 00:30:55.779 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 00:30:55.785 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 00:30:55.779 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:30:55.784 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-26 00:30:55.798 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:30:55.799 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/d394708c-f40f-4269-b22b-eac674e5c69c - 200 null application/json; charset=utf-8 28757.5334ms
2025-09-26 00:30:55.801 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 33.3869ms
2025-09-26 00:30:55.806 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-26 00:30:55.807 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 34.1702ms
2025-09-26 00:30:55.813 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:30:55.817 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-26 00:30:55.818 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:30:55.819 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 80.8418ms
2025-09-26 00:30:55.824 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 00:30:55.825 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 86.433ms
2025-09-26 00:30:55.836 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjU2NTkwRjFDMzBCNjg1MjQxAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 00:30:55.845 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='b8e7a268-18df-462d-8082-a66f2e9bbdd6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 00:30:55.848 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjU2NTkwRjFDMzBCNjg1MjQxAA== (legacy)
2025-09-26 00:30:55.851 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjU2NTkwRjFDMzBCNjg1MjQxAA==","status":"delivered","timestamp":"1758826853","recipient_id":"918974005240","conversation":{"id":"14a5fb9f63de16af10e9e1aeb1afa4af","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:30:55.853 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 00:30:55.857 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjU2NTkwRjFDMzBCNjg1MjQxAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 00:30:55.862 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='b8e7a268-18df-462d-8082-a66f2e9bbdd6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 00:30:55.867 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='b8e7a268-18df-462d-8082-a66f2e9bbdd6', @p0='2025-09-25T19:00:53.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-26 00:30:55.870 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjU2NTkwRjFDMzBCNjg1MjQxAA== → Delivered
2025-09-26 00:31:03.958 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-09-26 00:31:03.962 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:31:03.963 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 00:31:03.966 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjU2NTkwRjFDMzBCNjg1MjQxAA==","status":"read","timestamp":"1758826862","recipient_id":"918974005240","conversation":{"id":"14a5fb9f63de16af10e9e1aeb1afa4af","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:31:03.969 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 00:31:03.969 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjU2NTkwRjFDMzBCNjg1MjQxAA==","status":"read","timestamp":"1758826862","recipient_id":"918974005240","conversation":{"id":"14a5fb9f63de16af10e9e1aeb1afa4af","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:31:03.970 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:31:03.971 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 00:31:03.973 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.74ms
2025-09-26 00:31:03.981 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjU2NTkwRjFDMzBCNjg1MjQxAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 00:31:03.983 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:31:03.988 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='b8e7a268-18df-462d-8082-a66f2e9bbdd6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 00:31:03.988 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 30.0328ms
2025-09-26 00:31:03.993 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='b8e7a268-18df-462d-8082-a66f2e9bbdd6', @p0='2025-09-25T19:01:02.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-26 00:31:04.000 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjU2NTkwRjFDMzBCNjg1MjQxAA== → Read
2025-09-26 00:31:05.764 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:01:05.7624625+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:31:15.780 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:01:15.7780468+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:31:21.052 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 00:31:21.052 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 00:31:21.097 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:31:21.100 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:31:21.101 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 204 null null 49.0404ms
2025-09-26 00:31:21.103 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 204 null null 50.2237ms
2025-09-26 00:31:21.110 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 00:31:21.116 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 00:31:21.120 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:31:21.123 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:31:21.124 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 00:31:21.125 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 00:31:21.126 +05:30 [INF] Route matched with {action = "GetSenders", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSenders(System.Guid) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-26 00:31:21.128 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 00:31:21.134 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-26 00:31:21.140 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-26 00:31:21.142 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.WhatsAppSettings.DTOs.WhatsAppSenderDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:31:21.145 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType155`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType241`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:31:21.146 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api) in 15.677ms
2025-09-26 00:31:21.149 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 12.7446ms
2025-09-26 00:31:21.151 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 00:31:21.153 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 00:31:21.154 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 200 null application/json; charset=utf-8 44.7557ms
2025-09-26 00:31:21.156 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 200 null application/json; charset=utf-8 39.7108ms
2025-09-26 00:31:25.801 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:01:25.7991995+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:31:33.549 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/url_tracking - null null
2025-09-26 00:31:33.553 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:31:33.554 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/url_tracking - 204 null null 4.8405ms
2025-09-26 00:31:33.558 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/url_tracking - null null
2025-09-26 00:31:33.561 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:31:33.563 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-26 00:31:33.564 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 00:31:33.569 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__name_1='url_tracking'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-09-26 00:31:33.575 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='url_tracking', @__language_2='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Language" = @__language_2
ORDER BY w."Language" = @__language_2 DESC
LIMIT 1
2025-09-26 00:31:33.579 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType242`10[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:31:33.581 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 14.5541ms
2025-09-26 00:31:33.583 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-26 00:31:33.584 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/url_tracking - 200 null application/json; charset=utf-8 26.2666ms
2025-09-26 00:31:35.808 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:01:35.8057476+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:31:45.918 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T19:01:45.8116460+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:31:55.920 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:01:55.9174570+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:32:05.935 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:02:05.9307582+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:32:15.947 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:02:15.9450197+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:32:25.955 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:02:25.9532513+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:32:35.958 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:02:35.9558723+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:32:45.962 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:02:45.9603850+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:32:55.984 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:02:55.9823012+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:33:05.992 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:03:05.9893285+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:33:12.141 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-09-26 00:33:12.150 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:33:12.151 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 10.2484ms
2025-09-26 00:33:12.157 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 605
2025-09-26 00:33:12.165 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:33:12.167 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-26 00:33:12.168 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:33:12.178 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__phoneNumberId_1='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."PhoneNumberId" = @__phoneNumberId_1 AND w."IsActive"
LIMIT 1
2025-09-26 00:33:12.186 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:33:12.189 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:33:12.191 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:33:13.391 +05:30 [INF] Received HTTP response headers after 1197.3999ms - 200
2025-09-26 00:33:13.393 +05:30 [INF] End processing HTTP request after 1203.8576ms - 200
2025-09-26 00:33:13.493 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='url_tracking', @__provider_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:33:13.501 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='88191735-dbb2-4659-b7c4-4db435d7afc3', @p1=NULL (DbType = Guid), @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='text', @p6='2025-09-25T19:03:13.4899929Z' (DbType = DateTime), @p7='system', @p8=NULL (DbType = Guid), @p9=NULL (DbType = DateTime), @p10=NULL, @p11=NULL, @p12=NULL, @p13=NULL, @p14=NULL, @p15='False', @p16='Hello

This is used to check wheather url redirection is woking or not.', @p17='Hello

This is used to check wheather url redirection is woking or not.' (Nullable = false), @p18='DBURL2' (Nullable = false), @p19='673199269218077', @p20='META_CLOUD', @p21=NULL (DbType = DateTime), @p22=NULL (DbType = Guid), @p23='Draft' (Nullable = false), @p24='url_tracking', @p25='[]', @p26='{"Provider":"meta_cloud","TemplateId":"1322949819198164","TemplateName":"url_tracking","Language":"en_US","HasHeaderMedia":false,"HeaderType":"","BodyPlaceholders":[],"Buttons":[{"Type":"URL","Text":"Visit website","Value":"https://077903ad22d3.ngrok-free.app/{{1}}","Order":0},{"Type":"URL","Text":"View Demo","Value":"https://077903ad22d3.ngrok-free.app/{{1}}","Order":1}]}' (DbType = Object), @p27='2025-09-25T19:03:13.4899929Z' (DbType = DateTime), @p28=NULL, @p29='5c8bfd33-41ba-461b-9e9e-a53fa0595b69', @p30='88191735-dbb2-4659-b7c4-4db435d7afc3', @p31='True', @p32='2', @p33='View Demo' (Nullable = false), @p34='URL' (Nullable = false), @p35='' (Nullable = false), @p36='8c576329-a3b2-49b9-9db6-5f4193a8bf90', @p37='88191735-dbb2-4659-b7c4-4db435d7afc3', @p38='True', @p39='1', @p40='Visit website' (Nullable = false), @p41='URL' (Nullable = false), @p42='' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "AudienceId", "BusinessId", "CTAFlowConfigId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "DocumentUrl", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "PhoneNumberId", "Provider", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "TemplateSchemaSnapshot", "UpdatedAt", "VideoUrl")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41, @p42);
2025-09-26 00:33:13.523 +05:30 [INF] ✅ Campaign 'DBURL2' created | Type:text | Header:none | FlowId:null | EntryTemplate:url_tracking | Sender:META_CLOUD/673199269218077 | Recipients:0
2025-09-26 00:33:13.528 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType64`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:33:13.529 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 1358.8199ms
2025-09-26 00:33:13.531 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-26 00:33:13.533 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 1375.6201ms
2025-09-26 00:33:13.586 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:33:13.599 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-26 00:33:13.594 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/88191735-dbb2-4659-b7c4-4db435d7afc3 - null null
2025-09-26 00:33:13.588 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/88191735-dbb2-4659-b7c4-4db435d7afc3/csv-sample/schema - null null
2025-09-26 00:33:13.596 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:33:13.621 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:33:13.624 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:33:13.628 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:33:13.638 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 39.6569ms
2025-09-26 00:33:13.652 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-26 00:33:13.647 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/88191735-dbb2-4659-b7c4-4db435d7afc3 - 204 null null 52.8605ms
2025-09-26 00:33:13.631 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:33:13.634 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:33:13.635 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 48.7266ms
2025-09-26 00:33:13.663 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:33:13.668 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/88191735-dbb2-4659-b7c4-4db435d7afc3 - null null
2025-09-26 00:33:13.669 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/88191735-dbb2-4659-b7c4-4db435d7afc3/csv-sample/schema - 204 null null 81.0393ms
2025-09-26 00:33:13.670 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 73.8272ms
2025-09-26 00:33:13.675 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:33:13.676 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-26 00:33:13.680 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:33:13.687 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/88191735-dbb2-4659-b7c4-4db435d7afc3/csv-sample/schema - null null
2025-09-26 00:33:13.690 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:33:13.692 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-26 00:33:13.694 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-26 00:33:13.697 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:33:13.698 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:33:13.700 +05:30 [INF] GetPagedContactsAsync: businessId="6b5cea67-e8e9-42f7-8bde-51a9dbc02d56", tab=all, page=1, pageSize=1000
2025-09-26 00:33:13.701 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:33:13.709 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-26 00:33:13.703 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:33:13.704 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-26 00:33:13.721 +05:30 [INF] Route matched with {action = "GetSchema", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSchema(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 00:33:13.722 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."ProfileName", t."ProfileNameUpdatedAt", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-26 00:33:13.738 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:33:13.743 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 43.2651ms
2025-09-26 00:33:13.745 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-26 00:33:13.747 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 94.5881ms
2025-09-26 00:33:13.833 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__campaignId_0='88191735-dbb2-4659-b7c4-4db435d7afc3', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AudienceId", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."DocumentUrl", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."TemplateSchemaSnapshot", t."UpdatedAt", t."VideoUrl", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", t."Id1", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value", t."BusinessId1", t."CreatedAt1", t."CreatedBy0", t."FlowName", t."IsActive0", t."IsPublished", t."UpdatedAt1"
FROM (
    SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0", c1."Id" AS "Id1", c1."BusinessId" AS "BusinessId1", c1."CreatedAt" AS "CreatedAt1", c1."CreatedBy" AS "CreatedBy0", c1."FlowName", c1."IsActive" AS "IsActive0", c1."IsPublished", c1."UpdatedAt" AS "UpdatedAt1"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    LEFT JOIN "CTAFlowConfigs" AS c1 ON c."CTAFlowConfigId" = c1."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t."Id0", t."Id1"
2025-09-26 00:33:13.837 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-09-26 00:33:13.839 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 127.891ms
2025-09-26 00:33:13.841 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-26 00:33:13.843 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/88191735-dbb2-4659-b7c4-4db435d7afc3 - 200 null application/json; charset=utf-8 175.2798ms
2025-09-26 00:33:13.887 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-26 00:33:13.890 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:33:13.892 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 168.3662ms
2025-09-26 00:33:13.894 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:33:13.895 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:33:13.898 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:33:13.900 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 225.4701ms
2025-09-26 00:33:13.901 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:33:13.907 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-26 00:33:13.913 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-26 00:33:13.918 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:33:13.920 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 10.6232ms
2025-09-26 00:33:13.923 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:33:13.925 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 30.8299ms
2025-09-26 00:33:13.942 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='88191735-dbb2-4659-b7c4-4db435d7afc3', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 00:33:13.949 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='url_tracking', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:33:13.956 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='url_tracking'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:33:13.960 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType66`3[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType67`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:33:13.963 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api) in 234.2035ms
2025-09-26 00:33:13.965 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:33:13.965 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/88191735-dbb2-4659-b7c4-4db435d7afc3/csv-sample/schema - null null
2025-09-26 00:33:13.967 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/88191735-dbb2-4659-b7c4-4db435d7afc3/csv-sample/schema - 200 null application/json; charset=utf-8 279.8453ms
2025-09-26 00:33:13.971 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:33:13.977 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:33:13.979 +05:30 [INF] Route matched with {action = "GetSchema", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSchema(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 00:33:13.985 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='88191735-dbb2-4659-b7c4-4db435d7afc3', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 00:33:13.996 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='url_tracking', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:33:14.002 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='url_tracking'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:33:14.005 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType66`3[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType67`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:33:14.007 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api) in 24.7589ms
2025-09-26 00:33:14.009 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:33:14.011 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/88191735-dbb2-4659-b7c4-4db435d7afc3/csv-sample/schema - 200 null application/json; charset=utf-8 45.9031ms
2025-09-26 00:33:16.007 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:03:16.0038261+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:33:26.011 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:03:26.0089219+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:33:36.026 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:03:36.0231354+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:33:46.046 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:03:46.0432917+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:33:56.057 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:03:56.0551800+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:34:06.068 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:04:06.0663587+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:34:08.902 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 00:34:08.906 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:34:08.907 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 204 null null 4.8197ms
2025-09-26 00:34:08.910 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 00:34:08.917 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:34:08.917 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 204 null null 7.1345ms
2025-09-26 00:34:08.953 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 00:34:08.953 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 00:34:08.957 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:34:08.961 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:34:08.964 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 00:34:08.964 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 00:34:08.965 +05:30 [INF] Route matched with {action = "GetSenders", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSenders(System.Guid) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-26 00:34:08.966 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 00:34:08.973 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-26 00:34:08.977 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-26 00:34:08.983 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.WhatsAppSettings.DTOs.WhatsAppSenderDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:34:08.986 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType155`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType241`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:34:08.987 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api) in 18.6786ms
2025-09-26 00:34:08.989 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 16.4125ms
2025-09-26 00:34:08.990 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 00:34:08.992 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 00:34:08.993 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 200 null application/json; charset=utf-8 39.7253ms
2025-09-26 00:34:08.994 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 200 null application/json; charset=utf-8 40.8888ms
2025-09-26 00:34:16.088 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:04:16.0857953+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:34:26.099 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:04:26.0959919+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:34:29.507 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/url_tracking - null null
2025-09-26 00:34:29.511 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:34:29.512 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/url_tracking - 204 null null 5.2021ms
2025-09-26 00:34:29.517 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/url_tracking - null null
2025-09-26 00:34:29.520 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:34:29.521 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-26 00:34:29.522 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 00:34:29.528 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__name_1='url_tracking'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-09-26 00:34:29.534 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='url_tracking', @__language_2='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Language" = @__language_2
ORDER BY w."Language" = @__language_2 DESC
LIMIT 1
2025-09-26 00:34:29.537 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType242`10[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:34:29.539 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 14.2186ms
2025-09-26 00:34:29.541 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-26 00:34:29.542 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/url_tracking - 200 null application/json; charset=utf-8 25.7275ms
2025-09-26 00:34:34.141 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-09-26 00:34:34.147 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:34:34.148 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 6.975ms
2025-09-26 00:34:34.152 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 605
2025-09-26 00:34:34.155 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:34:34.156 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-26 00:34:34.157 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:34:34.164 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__phoneNumberId_1='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."PhoneNumberId" = @__phoneNumberId_1 AND w."IsActive"
LIMIT 1
2025-09-26 00:34:34.170 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:34:34.174 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:34:34.175 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:34:35.410 +05:30 [INF] Received HTTP response headers after 1233.4924ms - 200
2025-09-26 00:34:35.412 +05:30 [INF] End processing HTTP request after 1238.4243ms - 200
2025-09-26 00:34:35.525 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='url_tracking', @__provider_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:34:35.532 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='80ca6945-bea1-42be-b921-483aeee52728', @p1=NULL (DbType = Guid), @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='text', @p6='2025-09-25T19:04:35.5230790Z' (DbType = DateTime), @p7='system', @p8=NULL (DbType = Guid), @p9=NULL (DbType = DateTime), @p10=NULL, @p11=NULL, @p12=NULL, @p13=NULL, @p14=NULL, @p15='False', @p16='Hello

This is used to check wheather url redirection is woking or not.', @p17='Hello

This is used to check wheather url redirection is woking or not.' (Nullable = false), @p18='DBURL3' (Nullable = false), @p19='673199269218077', @p20='META_CLOUD', @p21=NULL (DbType = DateTime), @p22=NULL (DbType = Guid), @p23='Draft' (Nullable = false), @p24='url_tracking', @p25='[]', @p26='{"Provider":"meta_cloud","TemplateId":"1322949819198164","TemplateName":"url_tracking","Language":"en_US","HasHeaderMedia":false,"HeaderType":"","BodyPlaceholders":[],"Buttons":[{"Type":"URL","Text":"Visit website","Value":"https://077903ad22d3.ngrok-free.app/{{1}}","Order":0},{"Type":"URL","Text":"View Demo","Value":"https://077903ad22d3.ngrok-free.app/{{1}}","Order":1}]}' (DbType = Object), @p27='2025-09-25T19:04:35.5230790Z' (DbType = DateTime), @p28=NULL, @p29='371cf176-d4e9-4446-a1f0-f740f97b4ac6', @p30='80ca6945-bea1-42be-b921-483aeee52728', @p31='True', @p32='2', @p33='View Demo' (Nullable = false), @p34='URL' (Nullable = false), @p35='' (Nullable = false), @p36='a171e38f-0d5a-48b0-9145-b499e1c9caad', @p37='80ca6945-bea1-42be-b921-483aeee52728', @p38='True', @p39='1', @p40='Visit website' (Nullable = false), @p41='URL' (Nullable = false), @p42='' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "AudienceId", "BusinessId", "CTAFlowConfigId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "DocumentUrl", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "PhoneNumberId", "Provider", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "TemplateSchemaSnapshot", "UpdatedAt", "VideoUrl")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41, @p42);
2025-09-26 00:34:35.536 +05:30 [INF] ✅ Campaign 'DBURL3' created | Type:text | Header:none | FlowId:null | EntryTemplate:url_tracking | Sender:META_CLOUD/673199269218077 | Recipients:0
2025-09-26 00:34:35.540 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType64`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:34:35.542 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 1382.8834ms
2025-09-26 00:34:35.544 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-26 00:34:35.546 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 1393.6462ms
2025-09-26 00:34:35.604 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:34:35.607 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:34:35.608 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 4.6587ms
2025-09-26 00:34:35.612 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/80ca6945-bea1-42be-b921-483aeee52728 - null null
2025-09-26 00:34:35.612 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/80ca6945-bea1-42be-b921-483aeee52728/csv-sample/schema - null null
2025-09-26 00:34:35.616 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:34:35.613 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:34:35.632 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/80ca6945-bea1-42be-b921-483aeee52728 - 204 null null 19.4464ms
2025-09-26 00:34:35.631 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:34:35.618 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:34:35.647 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/80ca6945-bea1-42be-b921-483aeee52728 - null null
2025-09-26 00:34:35.648 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/80ca6945-bea1-42be-b921-483aeee52728/csv-sample/schema - 204 null null 35.6945ms
2025-09-26 00:34:35.643 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:34:35.659 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:34:35.613 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-26 00:34:35.663 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:34:35.667 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/80ca6945-bea1-42be-b921-483aeee52728/csv-sample/schema - null null
2025-09-26 00:34:35.668 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 55.075ms
2025-09-26 00:34:35.669 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:34:35.672 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:34:35.673 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-26 00:34:35.676 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:34:35.682 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-26 00:34:35.683 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 70.184ms
2025-09-26 00:34:35.684 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:34:35.685 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:34:35.690 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-26 00:34:35.699 +05:30 [INF] Route matched with {action = "GetSchema", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSchema(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 00:34:35.695 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-26 00:34:35.702 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='80ca6945-bea1-42be-b921-483aeee52728', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AudienceId", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."DocumentUrl", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."TemplateSchemaSnapshot", t."UpdatedAt", t."VideoUrl", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", t."Id1", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value", t."BusinessId1", t."CreatedAt1", t."CreatedBy0", t."FlowName", t."IsActive0", t."IsPublished", t."UpdatedAt1"
FROM (
    SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0", c1."Id" AS "Id1", c1."BusinessId" AS "BusinessId1", c1."CreatedAt" AS "CreatedAt1", c1."CreatedBy" AS "CreatedBy0", c1."FlowName", c1."IsActive" AS "IsActive0", c1."IsPublished", c1."UpdatedAt" AS "UpdatedAt1"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    LEFT JOIN "CTAFlowConfigs" AS c1 ON c."CTAFlowConfigId" = c1."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t."Id0", t."Id1"
2025-09-26 00:34:35.707 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='80ca6945-bea1-42be-b921-483aeee52728', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 00:34:35.703 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:34:35.714 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-09-26 00:34:35.711 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:34:35.719 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='url_tracking', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:34:35.719 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 31.785ms
2025-09-26 00:34:35.721 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 23.4447ms
2025-09-26 00:34:35.720 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:34:35.722 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-26 00:34:35.727 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='url_tracking'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:34:35.729 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:34:35.731 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-26 00:34:35.734 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:34:35.736 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-26 00:34:35.739 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType66`3[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType67`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:34:35.740 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 122.5356ms
2025-09-26 00:34:35.742 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/80ca6945-bea1-42be-b921-483aeee52728 - 200 null application/json; charset=utf-8 95.8188ms
2025-09-26 00:34:35.744 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:34:35.747 +05:30 [INF] GetPagedContactsAsync: businessId="6b5cea67-e8e9-42f7-8bde-51a9dbc02d56", tab=all, page=1, pageSize=1000
2025-09-26 00:34:35.748 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api) in 43.2409ms
2025-09-26 00:34:35.757 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/80ca6945-bea1-42be-b921-483aeee52728/csv-sample/schema - null null
2025-09-26 00:34:35.763 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:34:35.758 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-26 00:34:35.763 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-26 00:34:35.767 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:34:35.769 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/80ca6945-bea1-42be-b921-483aeee52728/csv-sample/schema - 200 null application/json; charset=utf-8 102.135ms
2025-09-26 00:34:35.774 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-26 00:34:35.779 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:34:35.781 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."ProfileName", t."ProfileNameUpdatedAt", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-26 00:34:35.786 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:34:35.788 +05:30 [INF] Route matched with {action = "GetSchema", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSchema(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 00:34:35.792 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:34:35.793 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 21.5243ms
2025-09-26 00:34:35.799 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='80ca6945-bea1-42be-b921-483aeee52728', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 00:34:35.799 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 52.4856ms
2025-09-26 00:34:35.801 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:34:35.806 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='url_tracking', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:34:35.807 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-26 00:34:35.808 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 88.1487ms
2025-09-26 00:34:35.814 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='url_tracking'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:34:35.814 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 118.9408ms
2025-09-26 00:34:35.821 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType66`3[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType67`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:34:35.826 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api) in 30.5847ms
2025-09-26 00:34:35.828 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:34:35.829 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/80ca6945-bea1-42be-b921-483aeee52728/csv-sample/schema - 200 null application/json; charset=utf-8 72.4634ms
2025-09-26 00:34:36.114 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:04:36.1121339+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:34:46.126 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:04:46.1236369+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:34:56.134 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:04:56.1318896+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:35:06.149 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:05:06.1463977+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:35:16.163 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:05:16.1608512+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:35:26.184 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:05:26.1815126+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:35:36.204 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:05:36.2021467+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:35:46.218 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:05:46.2159916+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:35:56.235 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:05:56.2327818+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:36:06.243 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:06:06.2410083+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:36:16.259 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:06:16.2564753+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:36:26.280 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:06:26.2775939+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:36:36.292 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:06:36.2897292+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:36:46.418 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T19:06:46.3135559+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:36:56.437 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:06:56.4353779+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:37:06.458 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:07:06.4564597+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:37:16.467 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:07:16.4654318+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:37:26.482 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:07:26.4804352+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:37:31.887 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 00:37:31.890 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:37:31.892 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 204 null null 5.0516ms
2025-09-26 00:37:31.900 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 00:37:31.904 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:37:31.906 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 00:37:31.906 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 204 null null 6.1338ms
2025-09-26 00:37:31.926 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:37:31.930 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 00:37:31.931 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 00:37:31.934 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:37:31.935 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 00:37:31.936 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 00:37:31.940 +05:30 [INF] Route matched with {action = "GetSenders", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSenders(System.Guid) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-26 00:37:31.944 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-26 00:37:31.954 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType155`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType241`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:37:31.957 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 18.0328ms
2025-09-26 00:37:31.961 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 00:37:31.963 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 200 null application/json; charset=utf-8 56.9992ms
2025-09-26 00:37:32.059 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-26 00:37:32.063 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.WhatsAppSettings.DTOs.WhatsAppSenderDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:37:32.064 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api) in 118.8111ms
2025-09-26 00:37:32.066 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 00:37:32.068 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 200 null application/json; charset=utf-8 137.6626ms
2025-09-26 00:37:36.490 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:07:36.4880182+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:37:46.502 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T19:07:46.4984622+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:37:46.561 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/variable_csv_demo - null null
2025-09-26 00:37:46.566 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:37:46.567 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/variable_csv_demo - 204 null null 7.5715ms
2025-09-26 00:37:46.579 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/variable_csv_demo - null null
2025-09-26 00:37:46.581 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:37:46.583 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-26 00:37:46.584 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 00:37:46.594 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__name_1='variable_csv_demo'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-09-26 00:37:46.599 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='variable_csv_demo', @__language_2='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Language" = @__language_2
ORDER BY w."Language" = @__language_2 DESC
LIMIT 1
2025-09-26 00:37:46.602 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType242`10[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:37:46.603 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 17.4369ms
2025-09-26 00:37:46.606 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-26 00:37:46.608 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/variable_csv_demo - 200 null application/json; charset=utf-8 29.299ms
2025-09-26 00:37:56.509 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:07:56.5065833+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:38:04.714 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-09-26 00:38:04.718 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:38:04.719 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 4.463ms
2025-09-26 00:38:04.723 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 533
2025-09-26 00:38:04.727 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:38:04.728 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-26 00:38:04.729 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:38:04.734 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__phoneNumberId_1='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."PhoneNumberId" = @__phoneNumberId_1 AND w."IsActive"
LIMIT 1
2025-09-26 00:38:04.741 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:38:04.745 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:38:04.746 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:38:06.232 +05:30 [INF] Received HTTP response headers after 1485.1741ms - 200
2025-09-26 00:38:06.234 +05:30 [INF] End processing HTTP request after 1489.8305ms - 200
2025-09-26 00:38:06.326 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='variable_csv_demo', @__provider_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:38:06.333 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='c0154191-efc7-44df-8d40-38d6e726ea2d', @p1=NULL (DbType = Guid), @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='text', @p6='2025-09-25T19:08:06.3235379Z' (DbType = DateTime), @p7='system', @p8=NULL (DbType = Guid), @p9=NULL (DbType = DateTime), @p10=NULL, @p11=NULL, @p12=NULL, @p13=NULL, @p14=NULL, @p15='False', @p16='Dear  {{1}},

We are happy to announce that we are going to launch our new product on {{2}}.

Regards,
LeadsCone', @p17='Dear  {{1}},

We are happy to announce that we are going to launch our new product on {{2}}.

Regards,
LeadsCone' (Nullable = false), @p18='2VAR' (Nullable = false), @p19='673199269218077', @p20='META_CLOUD', @p21=NULL (DbType = DateTime), @p22=NULL (DbType = Guid), @p23='Draft' (Nullable = false), @p24='variable_csv_demo', @p25='[]', @p26='{"Provider":"meta_cloud","TemplateId":"1463763351520294","TemplateName":"variable_csv_demo","Language":"en_US","HasHeaderMedia":false,"HeaderType":"","BodyPlaceholders":[{"Index":1,"Label":null,"Example":null},{"Index":2,"Label":null,"Example":null}],"Buttons":[]}' (DbType = Object), @p27='2025-09-25T19:08:06.3235380Z' (DbType = DateTime), @p28=NULL], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "AudienceId", "BusinessId", "CTAFlowConfigId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "DocumentUrl", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "PhoneNumberId", "Provider", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "TemplateSchemaSnapshot", "UpdatedAt", "VideoUrl")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2025-09-26 00:38:06.337 +05:30 [INF] ✅ Campaign '2VAR' created | Type:text | Header:none | FlowId:null | EntryTemplate:variable_csv_demo | Sender:META_CLOUD/673199269218077 | Recipients:0
2025-09-26 00:38:06.342 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType64`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:38:06.343 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 1612.1677ms
2025-09-26 00:38:06.345 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-26 00:38:06.347 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 1623.4958ms
2025-09-26 00:38:06.406 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/c0154191-efc7-44df-8d40-38d6e726ea2d/csv-sample/schema - null null
2025-09-26 00:38:06.406 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:38:06.407 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-26 00:38:06.406 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:38:06.406 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/c0154191-efc7-44df-8d40-38d6e726ea2d - null null
2025-09-26 00:38:06.420 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:38:06.428 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:38:06.433 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:38:06.438 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:38:06.447 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 41.0656ms
2025-09-26 00:38:06.443 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:38:06.444 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/c0154191-efc7-44df-8d40-38d6e726ea2d/csv-sample/schema - 204 null null 38.4631ms
2025-09-26 00:38:06.464 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/c0154191-efc7-44df-8d40-38d6e726ea2d/csv-sample/schema - null null
2025-09-26 00:38:06.459 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 51.6398ms
2025-09-26 00:38:06.460 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 53.5572ms
2025-09-26 00:38:06.466 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/c0154191-efc7-44df-8d40-38d6e726ea2d - 204 null null 59.58ms
2025-09-26 00:38:06.480 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:38:06.482 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:38:06.490 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-26 00:38:06.494 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/c0154191-efc7-44df-8d40-38d6e726ea2d - null null
2025-09-26 00:38:06.496 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:38:06.498 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:38:06.500 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:38:06.503 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:38:06.504 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:38:06.505 +05:30 [INF] Route matched with {action = "GetSchema", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSchema(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 00:38:06.506 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-26 00:38:06.507 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-26 00:38:06.514 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='c0154191-efc7-44df-8d40-38d6e726ea2d', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 00:38:06.512 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-26 00:38:06.516 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:38:06.508 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-26 00:38:06.522 +05:30 [INF] GetPagedContactsAsync: businessId="6b5cea67-e8e9-42f7-8bde-51a9dbc02d56", tab=all, page=1, pageSize=1000
2025-09-26 00:38:06.520 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='variable_csv_demo', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:38:06.522 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:08:06.5201797+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:38:06.559 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='variable_csv_demo'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:38:06.563 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType66`3[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType67`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:38:06.565 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api) in 54.7ms
2025-09-26 00:38:06.567 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:38:06.568 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/c0154191-efc7-44df-8d40-38d6e726ea2d/csv-sample/schema - 200 null application/json; charset=utf-8 104.0355ms
2025-09-26 00:38:06.650 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__campaignId_0='c0154191-efc7-44df-8d40-38d6e726ea2d', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AudienceId", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."DocumentUrl", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."TemplateSchemaSnapshot", t."UpdatedAt", t."VideoUrl", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", t."Id1", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value", t."BusinessId1", t."CreatedAt1", t."CreatedBy0", t."FlowName", t."IsActive0", t."IsPublished", t."UpdatedAt1"
FROM (
    SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0", c1."Id" AS "Id1", c1."BusinessId" AS "BusinessId1", c1."CreatedAt" AS "CreatedAt1", c1."CreatedBy" AS "CreatedBy0", c1."FlowName", c1."IsActive" AS "IsActive0", c1."IsPublished", c1."UpdatedAt" AS "UpdatedAt1"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    LEFT JOIN "CTAFlowConfigs" AS c1 ON c."CTAFlowConfigId" = c1."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t."Id0", t."Id1"
2025-09-26 00:38:06.654 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-09-26 00:38:06.656 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 131.6059ms
2025-09-26 00:38:06.659 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-26 00:38:06.660 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/c0154191-efc7-44df-8d40-38d6e726ea2d - 200 null application/json; charset=utf-8 166.3664ms
2025-09-26 00:38:06.666 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/c0154191-efc7-44df-8d40-38d6e726ea2d/csv-sample/schema - null null
2025-09-26 00:38:06.670 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:38:06.672 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:38:06.673 +05:30 [INF] Route matched with {action = "GetSchema", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSchema(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 00:38:06.680 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='c0154191-efc7-44df-8d40-38d6e726ea2d', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 00:38:06.687 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='variable_csv_demo', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:38:06.695 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='variable_csv_demo'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:38:06.700 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType66`3[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType67`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:38:06.701 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-26 00:38:06.702 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api) in 25.9163ms
2025-09-26 00:38:06.705 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:38:06.706 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:38:06.708 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 180.3648ms
2025-09-26 00:38:06.710 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:38:06.710 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/c0154191-efc7-44df-8d40-38d6e726ea2d/csv-sample/schema - 200 null application/json; charset=utf-8 43.8617ms
2025-09-26 00:38:06.711 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:38:06.715 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:38:06.719 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 239.6431ms
2025-09-26 00:38:06.721 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:38:06.725 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-26 00:38:06.730 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-26 00:38:06.735 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:38:06.737 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 10.047ms
2025-09-26 00:38:06.739 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:38:06.742 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 31.7768ms
2025-09-26 00:38:06.742 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-26 00:38:06.753 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."ProfileName", t."ProfileNameUpdatedAt", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-26 00:38:06.758 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:38:06.760 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 238.5197ms
2025-09-26 00:38:06.763 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-26 00:38:06.764 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 274.1111ms
2025-09-26 00:38:14.418 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/c0154191-efc7-44df-8d40-38d6e726ea2d/csv-sample - null null
2025-09-26 00:38:14.421 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:38:14.422 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/c0154191-efc7-44df-8d40-38d6e726ea2d/csv-sample - 204 null null 4.8469ms
2025-09-26 00:38:14.428 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/c0154191-efc7-44df-8d40-38d6e726ea2d/csv-sample - null null
2025-09-26 00:38:14.431 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:38:14.432 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.Download (xbytechat.api)'
2025-09-26 00:38:14.434 +05:30 [INF] Route matched with {action = "Download", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Download(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 00:38:14.438 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='c0154191-efc7-44df-8d40-38d6e726ea2d', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 00:38:14.446 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='variable_csv_demo', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:38:14.450 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='variable_csv_demo'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:38:14.453 +05:30 [INF] Executing FileContentResult, sending file with download name 'campaign-c0154191efc744df8d4038d6e726ea2d-sample.csv' ...
2025-09-26 00:38:14.456 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.Download (xbytechat.api) in 20.6457ms
2025-09-26 00:38:14.459 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.Download (xbytechat.api)'
2025-09-26 00:38:14.461 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/c0154191-efc7-44df-8d40-38d6e726ea2d/csv-sample - 200 28 text/csv; charset=utf-8 33.7605ms
2025-09-26 00:38:16.566 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:08:16.5621923+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:38:26.582 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:08:26.5802738+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:38:36.604 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:08:36.6016771+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:38:46.616 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:08:46.6133298+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:38:56.630 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:08:56.6277107+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:39:06.649 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:09:06.6469513+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:39:16.668 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:09:16.6656693+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:39:26.682 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:09:26.6800558+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:39:36.700 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:09:36.6978317+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:39:39.851 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch - null null
2025-09-26 00:39:39.855 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:39:39.856 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch - 204 null null 5.1117ms
2025-09-26 00:39:39.861 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/csv/batch - multipart/form-data; boundary=----WebKitFormBoundaryr703ddO2eYbguFH1 242
2025-09-26 00:39:39.863 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:39:39.864 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api)'
2025-09-26 00:39:39.866 +05:30 [INF] Route matched with {action = "Upload", controller = "CsvBatch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Upload(xbytechat.api.Features.CampaignModule.DTOs.Requests.CsvBatchUploadForm, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController (xbytechat.api).
2025-09-26 00:39:39.874 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='13c5b8b7-c851-45d3-8fdf-75f29c192c12', @p1=NULL (DbType = Guid), @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3=NULL, @p4='2025-09-25T19:09:39.8695015Z' (DbType = DateTime), @p5=NULL (DbType = Guid), @p6=NULL, @p7='3_variable_CSV.csv', @p8=NULL (DbType = Object), @p9='0', @p10='0', @p11='ingesting' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CsvBatches" ("Id", "AudienceId", "BusinessId", "Checksum", "CreatedAt", "CreatedByUserId", "ErrorMessage", "FileName", "HeadersJson", "RowCount", "SkippedCount", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-09-26 00:39:39.881 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p1='13c5b8b7-c851-45d3-8fdf-75f29c192c12', @p0='["phone","parameter1","parameter2"]' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CsvBatches" SET "HeadersJson" = @p0
WHERE "Id" = @p1;
2025-09-26 00:39:39.888 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='8a7f838e-23e3-4039-aeaa-956a9b2c134d', @p1='13c5b8b7-c851-45d3-8fdf-75f29c192c12', @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3='2025-09-25T19:09:39.8846832Z' (DbType = DateTime), @p4=NULL, @p5=NULL, @p6='0', @p7='{"phone":"89740 05240","parameter1":"Trump","parameter2":"13K"}' (Nullable = false) (DbType = Object), @p8=NULL], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CsvRows" ("Id", "BatchId", "BusinessId", "CreatedAt", "PhoneE164", "PhoneRaw", "RowIndex", "RowJson", "ValidationError")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-09-26 00:39:39.894 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='13c5b8b7-c851-45d3-8fdf-75f29c192c12', @p0='1', @p1='ready' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CsvBatches" SET "RowCount" = @p0, "Status" = @p1
WHERE "Id" = @p2;
2025-09-26 00:39:39.896 +05:30 [INF] CsvBatch "13c5b8b7-c851-45d3-8fdf-75f29c192c12" ingested: 1 rows; headers=3
2025-09-26 00:39:39.897 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType70`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.CampaignModule.DTOs.CsvBatchUploadResultDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:39:39.899 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api) in 31.5375ms
2025-09-26 00:39:39.901 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api)'
2025-09-26 00:39:39.903 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/csv/batch - 200 null application/json; charset=utf-8 42.1527ms
2025-09-26 00:39:39.908 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch/13c5b8b7-c851-45d3-8fdf-75f29c192c12/sample?take=10 - null null
2025-09-26 00:39:39.912 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:39:39.913 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch/13c5b8b7-c851-45d3-8fdf-75f29c192c12/sample?take=10 - 204 null null 4.588ms
2025-09-26 00:39:39.923 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/csv/batch/13c5b8b7-c851-45d3-8fdf-75f29c192c12/sample?take=10 - null null
2025-09-26 00:39:39.926 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:39:39.927 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api)'
2025-09-26 00:39:39.929 +05:30 [INF] Route matched with {action = "Sample", controller = "CsvBatch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sample(System.Guid, Int32, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController (xbytechat.api).
2025-09-26 00:39:39.935 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__batchId_0='13c5b8b7-c851-45d3-8fdf-75f29c192c12', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."HeadersJson", c."RowCount"
FROM "CsvBatches" AS c
WHERE c."Id" = @__batchId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:39:39.941 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__batchId_1='13c5b8b7-c851-45d3-8fdf-75f29c192c12', @__p_2='10'], CommandType='"Text"', CommandTimeout='30']
SELECT c."RowIndex", c."Id", c."BatchId", c."BusinessId", c."CreatedAt", c."PhoneE164", c."PhoneRaw", c."RowJson", c."ValidationError"
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__batchId_1
ORDER BY c."RowIndex"
LIMIT @__p_2
2025-09-26 00:39:39.944 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType70`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IReadOnlyList`1[[xbytechat.api.Features.CampaignModule.DTOs.CsvRowSampleDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:39:39.946 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api) in 14.653ms
2025-09-26 00:39:39.948 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api)'
2025-09-26 00:39:39.950 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/csv/batch/13c5b8b7-c851-45d3-8fdf-75f29c192c12/sample?take=10 - 200 null application/json; charset=utf-8 26.498ms
2025-09-26 00:39:39.954 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/c0154191-efc7-44df-8d40-38d6e726ea2d/mappings/suggest?batchId=13c5b8b7-c851-45d3-8fdf-75f29c192c12 - null null
2025-09-26 00:39:39.957 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:39:39.958 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/c0154191-efc7-44df-8d40-38d6e726ea2d/mappings/suggest?batchId=13c5b8b7-c851-45d3-8fdf-75f29c192c12 - 204 null null 3.9886ms
2025-09-26 00:39:39.962 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/c0154191-efc7-44df-8d40-38d6e726ea2d/mappings/suggest?batchId=13c5b8b7-c851-45d3-8fdf-75f29c192c12 - null null
2025-09-26 00:39:39.965 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:39:39.967 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api)'
2025-09-26 00:39:39.968 +05:30 [INF] Route matched with {action = "Suggest", controller = "CampaignMappings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestAsync(System.Guid, System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController (xbytechat.api).
2025-09-26 00:39:39.975 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='c0154191-efc7-44df-8d40-38d6e726ea2d', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateParameters"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:39:39.982 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__batchId_0='13c5b8b7-c851-45d3-8fdf-75f29c192c12', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."HeadersJson"
FROM "CsvBatches" AS c
WHERE c."Id" = @__batchId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:39:39.985 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:39:39.987 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api) in 16.0662ms
2025-09-26 00:39:39.989 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api)'
2025-09-26 00:39:39.990 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/c0154191-efc7-44df-8d40-38d6e726ea2d/mappings/suggest?batchId=13c5b8b7-c851-45d3-8fdf-75f29c192c12 - 200 null application/json; charset=utf-8 27.7247ms
2025-09-26 00:39:43.360 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/c0154191-efc7-44df-8d40-38d6e726ea2d/mappings - null null
2025-09-26 00:39:43.371 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:39:43.372 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/c0154191-efc7-44df-8d40-38d6e726ea2d/mappings - 204 null null 12.001ms
2025-09-26 00:39:43.377 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaigns/c0154191-efc7-44df-8d40-38d6e726ea2d/mappings - application/json 53
2025-09-26 00:39:43.381 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:39:43.384 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api)'
2025-09-26 00:39:43.385 +05:30 [INF] Route matched with {action = "Save", controller = "CampaignMappings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SaveAsync(System.Guid, System.Collections.Generic.Dictionary`2[System.String,System.String], System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController (xbytechat.api).
2025-09-26 00:39:43.387 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-26 00:39:43.389 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api) in 1.7118ms
2025-09-26 00:39:43.390 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api)'
2025-09-26 00:39:43.392 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaigns/c0154191-efc7-44df-8d40-38d6e726ea2d/mappings - 204 null null 15.0466ms
2025-09-26 00:39:43.398 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/c0154191-efc7-44df-8d40-38d6e726ea2d/materialize - null null
2025-09-26 00:39:43.401 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:39:43.402 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/c0154191-efc7-44df-8d40-38d6e726ea2d/materialize - 204 null null 3.7936ms
2025-09-26 00:39:43.406 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaigns/c0154191-efc7-44df-8d40-38d6e726ea2d/materialize - application/json 197
2025-09-26 00:39:43.409 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:39:43.411 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api)'
2025-09-26 00:39:43.413 +05:30 [INF] Route matched with {action = "CsvCreate", controller = "CampaignMaterialize"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeResponseDto]] CsvCreate(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeRequestDto, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController (xbytechat.api).
2025-09-26 00:39:43.416 +05:30 [INF] 📦 Materialize request: campaign="c0154191-efc7-44df-8d40-38d6e726ea2d" persist=false batch="13c5b8b7-c851-45d3-8fdf-75f29c192c12" audience='null'
2025-09-26 00:39:43.420 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='c0154191-efc7-44df-8d40-38d6e726ea2d', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1)
2025-09-26 00:39:43.427 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__request_CsvBatchId_1='13c5b8b7-c851-45d3-8fdf-75f29c192c12'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__request_CsvBatchId_1
2025-09-26 00:39:43.433 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__request_CsvBatchId_1='13c5b8b7-c851-45d3-8fdf-75f29c192c12', @__p_2='200'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BatchId", c."BusinessId", c."CreatedAt", c."PhoneE164", c."PhoneRaw", c."RowIndex", c."RowJson", c."ValidationError"
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__request_CsvBatchId_1
ORDER BY c."RowIndex"
LIMIT @__p_2
2025-09-26 00:39:43.437 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='c0154191-efc7-44df-8d40-38d6e726ea2d', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."MessageTemplate", c."TemplateId"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:39:43.442 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='variable_csv_demo'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:39:43.445 +05:30 [INF] 📦 Materialize result: campaign="c0154191-efc7-44df-8d40-38d6e726ea2d" materialized=1 skipped=0 audienceId=null
2025-09-26 00:39:43.448 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeResponseDto'.
2025-09-26 00:39:43.449 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api) in 33.7409ms
2025-09-26 00:39:43.451 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api)'
2025-09-26 00:39:43.452 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaigns/c0154191-efc7-44df-8d40-38d6e726ea2d/materialize - 200 null application/json; charset=utf-8 46.2303ms
2025-09-26 00:39:46.711 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:09:46.7093929+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:39:50.897 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/c0154191-efc7-44df-8d40-38d6e726ea2d/mappings - null null
2025-09-26 00:39:50.900 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:39:50.902 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/c0154191-efc7-44df-8d40-38d6e726ea2d/mappings - 204 null null 5.0447ms
2025-09-26 00:39:50.906 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaigns/c0154191-efc7-44df-8d40-38d6e726ea2d/mappings - application/json 53
2025-09-26 00:39:50.909 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:39:50.910 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api)'
2025-09-26 00:39:50.911 +05:30 [INF] Route matched with {action = "Save", controller = "CampaignMappings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SaveAsync(System.Guid, System.Collections.Generic.Dictionary`2[System.String,System.String], System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController (xbytechat.api).
2025-09-26 00:39:50.914 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-26 00:39:50.915 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api) in 1.745ms
2025-09-26 00:39:50.916 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api)'
2025-09-26 00:39:50.918 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaigns/c0154191-efc7-44df-8d40-38d6e726ea2d/mappings - 204 null null 12.1243ms
2025-09-26 00:39:50.926 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/c0154191-efc7-44df-8d40-38d6e726ea2d/materialize - null null
2025-09-26 00:39:50.930 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:39:50.931 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/c0154191-efc7-44df-8d40-38d6e726ea2d/materialize - 204 null null 4.4776ms
2025-09-26 00:39:50.935 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaigns/c0154191-efc7-44df-8d40-38d6e726ea2d/materialize - application/json 233
2025-09-26 00:39:50.942 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:39:50.943 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api)'
2025-09-26 00:39:50.944 +05:30 [INF] Route matched with {action = "CsvCreate", controller = "CampaignMaterialize"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeResponseDto]] CsvCreate(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeRequestDto, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController (xbytechat.api).
2025-09-26 00:39:50.947 +05:30 [INF] 📦 Materialize request: campaign="c0154191-efc7-44df-8d40-38d6e726ea2d" persist=true batch="13c5b8b7-c851-45d3-8fdf-75f29c192c12" audience='Audience 2025-09-26'
2025-09-26 00:39:50.952 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='c0154191-efc7-44df-8d40-38d6e726ea2d', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1)
2025-09-26 00:39:50.957 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__request_CsvBatchId_1='13c5b8b7-c851-45d3-8fdf-75f29c192c12'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__request_CsvBatchId_1
2025-09-26 00:39:50.962 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__request_CsvBatchId_1='13c5b8b7-c851-45d3-8fdf-75f29c192c12', @__p_2='200'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BatchId", c."BusinessId", c."CreatedAt", c."PhoneE164", c."PhoneRaw", c."RowIndex", c."RowJson", c."ValidationError"
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__request_CsvBatchId_1
ORDER BY c."RowIndex"
LIMIT @__p_2
2025-09-26 00:39:50.966 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='c0154191-efc7-44df-8d40-38d6e726ea2d', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."MessageTemplate", c."TemplateId"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:39:50.971 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='variable_csv_demo'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:39:50.976 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__r_Phone_1='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__8__locals1_businessId_0 AND c."PhoneNumber" = @__r_Phone_1
LIMIT 1
2025-09-26 00:39:50.987 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p0='173f39d4-7885-4bfd-a10f-7716c7f671ae', @p1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p2=NULL (DbType = Guid), @p3='2025-09-25T19:09:50.9746478Z' (DbType = DateTime), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6=NULL, @p7='False', @p8='Audience 2025-09-26' (Nullable = false), @p9='2025-09-25T19:09:50.9746478Z' (Nullable = true) (DbType = DateTime), @p10='dc53bc63-ad74-4009-9cb5-470ef937059a', @p11='{"parameter1":"Trump","parameter2":"13K"}' (DbType = Object), @p12='173f39d4-7885-4bfd-a10f-7716c7f671ae', @p13='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p14='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p15='2025-09-25T19:09:50.9746478Z' (DbType = DateTime), @p16=NULL (DbType = Guid), @p17=NULL, @p18='False', @p19='False', @p20=NULL, @p21='918974005240', @p22=NULL, @p23=NULL (DbType = DateTime), @p24='2025-09-25T19:09:50.9746478Z' (Nullable = true) (DbType = DateTime), @p25='d430a164-7269-4a13-a27d-8a3965725587', @p26='dc53bc63-ad74-4009-9cb5-470ef937059a' (Nullable = true), @p27=NULL, @p28='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p29='c0154191-efc7-44df-8d40-38d6e726ea2d', @p30=NULL, @p31=NULL, @p32='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p33='A86F456D19C22139324296DB3690C50E8F87647DBE269B2464F4C8818EDE9BFD', @p34='False', @p35='2025-09-25T19:09:50.9746478Z' (Nullable = true) (DbType = DateTime), @p36=NULL, @p37=NULL, @p38='{}' (DbType = Object), @p39='["Trump","13K"]' (DbType = Object), @p40=NULL (DbType = DateTime), @p41='Pending' (Nullable = false), @p42='2025-09-25T19:09:50.9746478Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Audiences" ("Id", "BusinessId", "CampaignId", "CreatedAt", "CreatedByUserId", "CsvBatchId", "Description", "IsDeleted", "Name", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
INSERT INTO "AudienceMembers" ("Id", "AttributesJson", "AudienceId", "BusinessId", "ContactId", "CreatedAt", "CreatedByUserId", "Email", "IsDeleted", "IsTransientContact", "Name", "PhoneE164", "PhoneRaw", "PromotedAt", "UpdatedAt")
VALUES (@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
INSERT INTO "CampaignRecipients" ("Id", "AudienceMemberId", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IdempotencyKey", "IsAutoTagged", "MaterializedAt", "MessagePreview", "ProductBrowsed", "ResolvedButtonUrlsJson", "ResolvedParametersJson", "SentAt", "Status", "UpdatedAt")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42);
2025-09-26 00:39:51.011 +05:30 [INF] 📦 Materialize result: campaign="c0154191-efc7-44df-8d40-38d6e726ea2d" materialized=1 skipped=0 audienceId="173f39d4-7885-4bfd-a10f-7716c7f671ae"
2025-09-26 00:39:51.013 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeResponseDto'.
2025-09-26 00:39:51.015 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api) in 69.0676ms
2025-09-26 00:39:51.017 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api)'
2025-09-26 00:39:51.018 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaigns/c0154191-efc7-44df-8d40-38d6e726ea2d/materialize - 200 null application/json; charset=utf-8 83.4128ms
2025-09-26 00:39:55.684 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 00:39:55.687 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:39:55.688 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 4.571ms
2025-09-26 00:39:55.694 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 00:39:55.698 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:39:55.702 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 00:39:55.703 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:39:55.713 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-09-26 00:39:55.716 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:39:55.719 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 12.9309ms
2025-09-26 00:39:55.722 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 00:39:55.724 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 29.4889ms
2025-09-26 00:39:56.733 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:09:56.7304652+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:40:01.959 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/c0154191-efc7-44df-8d40-38d6e726ea2d - null null
2025-09-26 00:40:01.965 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:40:01.966 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/c0154191-efc7-44df-8d40-38d6e726ea2d - 204 null null 6.6436ms
2025-09-26 00:40:01.972 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/c0154191-efc7-44df-8d40-38d6e726ea2d - null 0
2025-09-26 00:40:01.976 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:40:01.977 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 00:40:01.978 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:40:05.436 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='c0154191-efc7-44df-8d40-38d6e726ea2d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
ORDER BY c."Id"
LIMIT 1
2025-09-26 00:40:05.465 +05:30 [INF] Executed DbCommand (25ms) [Parameters=[@__campaignId_0='c0154191-efc7-44df-8d40-38d6e726ea2d'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."AudienceMemberId", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IdempotencyKey", t0."IsAutoTagged", t0."MaterializedAt", t0."MessagePreview", t0."ProductBrowsed", t0."ResolvedButtonUrlsJson", t0."ResolvedParametersJson", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."ProfileName", t0."ProfileNameUpdatedAt", t0."Tags", t0."Id1", t0."AttributesJson", t0."AudienceId", t0."BusinessId1", t0."ContactId0", t0."CreatedAt0", t0."CreatedByUserId", t0."Email0", t0."IsDeleted", t0."IsTransientContact", t0."Name0", t0."PhoneE164", t0."PhoneRaw", t0."PromotedAt", t0."UpdatedAt0", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN (
    SELECT c0."Id", c0."AudienceMemberId", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IdempotencyKey", c0."IsAutoTagged", c0."MaterializedAt", c0."MessagePreview", c0."ProductBrowsed", c0."ResolvedButtonUrlsJson", c0."ResolvedParametersJson", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."ProfileName", c1."ProfileNameUpdatedAt", c1."Tags", a."Id" AS "Id1", a."AttributesJson", a."AudienceId", a."BusinessId" AS "BusinessId1", a."ContactId" AS "ContactId0", a."CreatedAt" AS "CreatedAt0", a."CreatedByUserId", a."Email" AS "Email0", a."IsDeleted", a."IsTransientContact", a."Name" AS "Name0", a."PhoneE164", a."PhoneRaw", a."PromotedAt", a."UpdatedAt" AS "UpdatedAt0"
    FROM "CampaignRecipients" AS c0
    LEFT JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
    LEFT JOIN "AudienceMembers" AS a ON c0."AudienceMemberId" = a."Id"
) AS t0 ON t."Id" = t0."CampaignId"
ORDER BY t."Id"
2025-09-26 00:40:05.472 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='c0154191-efc7-44df-8d40-38d6e726ea2d'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."CampaignId", c0."IsFromTemplate", c0."Position", c0."Title", c0."Type", c0."Value", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN "CampaignButtons" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-26 00:40:05.477 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:40:05.482 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:40:05.484 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:40:06.742 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:10:06.7406766+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:40:08.626 +05:30 [INF] Received HTTP response headers after 3140.7228ms - 200
2025-09-26 00:40:08.628 +05:30 [INF] End processing HTTP request after 3146.1878ms - 200
2025-09-26 00:40:09.764 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 00:40:09.771 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 00:40:12.064 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:40:12.065 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:40:13.486 +05:30 [INF] Received HTTP response headers after 1418.7995ms - 400
2025-09-26 00:40:13.488 +05:30 [INF] End processing HTTP request after 1424.4938ms - 400
2025-09-26 00:40:13.489 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"Parameter of type text is missing text value"},"fbtrace_id":"AL9bqn5sveSgPvouEc_rL8S"}}
2025-09-26 00:40:20.891 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__messageLogId_0='71cc4264-58d8-4017-8bf3-97fc764838d2', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:40:20.891 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:10:20.8862940+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:40:20.900 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p5='d430a164-7269-4a13-a27d-8a3965725587', @p0='57fedf76539707ea6097680e31f829dc51d5452704726fd0e7d886c93c2ecd13', @p1='2025-09-25T19:10:09.7610961Z' (Nullable = true) (DbType = DateTime), @p2='[]' (DbType = Object), @p3='["",""]' (DbType = Object), @p4='2025-09-25T19:10:09.7610961Z' (DbType = DateTime), @p6='71cc4264-58d8-4017-8bf3-97fc764838d2', @p7='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p8=NULL, @p9=NULL (DbType = Guid), @p10=NULL (DbType = Guid), @p11='c0154191-efc7-44df-8d40-38d6e726ea2d' (Nullable = true), @p12='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p13=NULL, @p14=NULL, @p15=NULL (DbType = DateTime), @p16='2025-09-25T19:10:09.7610961Z' (DbType = DateTime), @p17='Bad Request', @p18=NULL (DbType = Int32), @p19=NULL (DbType = Boolean), @p20='False', @p21=NULL, @p22='variable_csv_demo' (Nullable = false), @p23=NULL, @p24=NULL (DbType = Decimal), @p25=NULL, @p26=NULL, @p27=NULL, @p28='{"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"Parameter of type text is missing text value"},"fbtrace_id":"AL9bqn5sveSgPvouEc_rL8S"}}', @p29='918974005240' (Nullable = false), @p30=NULL (DbType = Guid), @p31=NULL, @p32='01d234a9-adb5-425d-98fb-af22f9bb82d2' (Nullable = true), @p33=NULL (DbType = DateTime), @p34='campaign', @p35='Failed' (Nullable = false), @p36='2a36bebf-48ff-422a-b462-6a3b39cf8ce7', @p37='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p38=NULL, @p39=NULL, @p40='2025-09-25T19:10:20.8941770+00:00' (DbType = DateTime), @p41='send_response' (Nullable = false), @p42=NULL (DbType = Boolean), @p43='71cc4264-58d8-4017-8bf3-97fc764838d2' (Nullable = true), @p44='2025-09-25T19:10:20.8941788+00:00' (DbType = DateTime), @p45='{"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"Parameter of type text is missing text value"},"fbtrace_id":"AL9bqn5sveSgPvouEc_rL8S"}}' (Nullable = false), @p46=NULL (DbType = Decimal), @p47=NULL, @p48='META_CLOUD' (Nullable = false), @p49=NULL], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignRecipients" SET "IdempotencyKey" = @p0, "MaterializedAt" = @p1, "ResolvedButtonUrlsJson" = @p2, "ResolvedParametersJson" = @p3, "UpdatedAt" = @p4
WHERE "Id" = @p5;
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35)
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49);
2025-09-26 00:40:20.910 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='fe354ded-012c-4523-8b91-d96c97e8b19a', @p1='True', @p2=NULL, @p3='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p4=NULL, @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7='c0154191-efc7-44df-8d40-38d6e726ea2d', @p8=NULL, @p9=NULL, @p10=NULL (DbType = DateTime), @p11='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p12=NULL, @p13='2025-09-25T19:10:09.7610961Z' (DbType = DateTime), @p14='system', @p15=NULL (DbType = DateTime), @p16=NULL, @p17=NULL, @p18='Bad Request', @p19=NULL, @p20='False', @p21=NULL (DbType = DateTime), @p22=NULL, @p23=NULL, @p24='Dear  {{1}},

We are happy to announce that we are going to launch our new product on {{2}}.

Regards,
LeadsCone' (Nullable = false), @p25=NULL, @p26='71cc4264-58d8-4017-8bf3-97fc764838d2' (Nullable = true), @p27=NULL (DbType = DateTime), @p28='d430a164-7269-4a13-a27d-8a3965725587', @p29='0', @p30='01d234a9-adb5-425d-98fb-af22f9bb82d2' (Nullable = true), @p31='Failed', @p32=NULL (DbType = DateTime), @p33=NULL, @p34='variable_csv_demo', @p35=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-09-26 00:40:20.913 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:40:20.914 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 18933.9908ms
2025-09-26 00:40:20.916 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 00:40:20.917 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/c0154191-efc7-44df-8d40-38d6e726ea2d - 200 null application/json; charset=utf-8 18945.8702ms
2025-09-26 00:40:30.902 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:10:30.8998508+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:40:40.911 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:10:40.9087679+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:40:50.927 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:10:50.9243607+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:41:00.949 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:11:00.9460170+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:41:10.962 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:11:10.9604410+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:41:20.977 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:11:20.9753852+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:41:30.988 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:11:30.9854216+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:41:41.000 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:11:40.9979268+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:41:51.111 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T19:11:51.0094541+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:42:01.120 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:12:01.1175436+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:42:11.124 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:12:11.1215954+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:42:21.136 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:12:21.1339514+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:42:31.154 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:12:31.1523939+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:42:41.167 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:12:41.1652974+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:42:51.186 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:12:51.1843614+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:43:01.204 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:13:01.2019250+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:43:11.224 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:13:11.2216824+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:43:21.241 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:13:21.2392475+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:43:31.248 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:13:31.2471766+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:43:41.259 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:13:41.2565892+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:43:51.277 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:13:51.2719193+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:44:01.290 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:14:01.2881916+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:44:11.300 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:14:11.2975300+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:44:21.318 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:14:21.3155444+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:44:31.330 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:14:31.3281110+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:44:41.339 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:14:41.3366490+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:44:51.346 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:14:51.3443151+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:44:56.805 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 00:44:56.805 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 00:44:56.823 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:44:56.827 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:44:56.829 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 204 null null 24.454ms
2025-09-26 00:44:56.829 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 204 null null 24.146ms
2025-09-26 00:44:56.834 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 00:44:56.839 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 00:44:56.842 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:44:56.846 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:44:56.847 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 00:44:56.848 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 00:44:56.849 +05:30 [INF] Route matched with {action = "GetSenders", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSenders(System.Guid) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-26 00:44:56.851 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 00:44:56.857 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-26 00:44:56.865 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.WhatsAppSettings.DTOs.WhatsAppSenderDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:44:56.868 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api) in 15.179ms
2025-09-26 00:44:56.871 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 00:44:56.872 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 200 null application/json; charset=utf-8 38.3571ms
2025-09-26 00:44:56.969 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-26 00:44:56.972 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType155`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType241`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:44:56.975 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 116.861ms
2025-09-26 00:44:56.977 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 00:44:56.978 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 200 null application/json; charset=utf-8 139.184ms
2025-09-26 00:45:01.362 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:15:01.3593791+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:45:05.219 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/offer_aiboat - null null
2025-09-26 00:45:05.225 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:45:05.226 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/offer_aiboat - 204 null null 6.8056ms
2025-09-26 00:45:05.232 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/offer_aiboat - null null
2025-09-26 00:45:05.235 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:45:05.242 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25-09-2025 07:15:02 PM', Current time (UTC): '25-09-2025 07:15:05 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-09-26 00:45:05.310 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '25-09-2025 07:15:02 PM', Current time (UTC): '25-09-2025 07:15:05 PM'.
2025-09-26 00:45:05.313 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-09-26 00:45:05.322 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-26 00:45:05.324 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/offer_aiboat - 401 0 null 92.625ms
2025-09-26 00:45:11.368 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T19:15:11.3640575+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:45:21.372 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:15:21.3696525+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:45:31.387 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:15:31.3847560+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:45:41.400 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:15:41.3963073+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:45:51.401 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:15:51.3989115+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:46:01.413 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:16:01.4096433+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:46:11.417 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:16:11.4153891+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:46:21.430 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:16:21.4282791+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:46:31.436 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:16:31.4338988+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:46:41.442 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:16:41.4398296+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:46:51.458 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:16:51.4548441+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:47:01.465 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:17:01.4622650+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:47:11.473 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:17:11.4703553+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:47:21.488 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:17:21.4858236+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:47:31.505 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:17:31.5031393+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:47:41.513 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:17:41.5104361+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:47:51.522 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:17:51.5193786+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:48:01.535 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:18:01.5318082+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:48:11.547 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:18:11.5434261+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:48:21.570 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__now_0='2025-09-25T19:18:21.5619203+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:48:31.576 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:18:31.5741056+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:48:41.586 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:18:41.5843541+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:48:51.594 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:18:51.5911834+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:49:01.601 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:19:01.5994151+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:49:11.606 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:19:11.6044975+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:49:21.628 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T19:19:21.6128598+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:49:31.646 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:19:31.6435078+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:49:41.663 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:19:41.6617408+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:49:51.673 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:19:51.6710438+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:50:01.682 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:20:01.6793669+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:50:11.695 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:20:11.6933577+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:50:21.715 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:20:21.7123000+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:50:31.727 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:20:31.7249299+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:50:41.747 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:20:41.7442425+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:50:51.782 +05:30 [INF] Executed DbCommand (25ms) [Parameters=[@__now_0='2025-09-25T19:20:51.7564434+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:51:01.797 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:21:01.7934606+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:51:11.802 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:21:11.8003696+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:51:20.569 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-26 00:51:20.573 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:51:20.575 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 5.8632ms
2025-09-26 00:51:20.579 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 49
2025-09-26 00:51:20.583 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:51:20.584 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-26 00:51:20.591 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-26 00:51:20.624 +05:30 [INF] 🔑 Login attempt for email: test@gmail.com
2025-09-26 00:51:20.643 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_Email_0='test@gmail.com', @__hashedPassword_1='dnaqr7AnyCW9mrq3iyNAcOcCdS9iW3UuVeVbSOYH41g='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-26 00:51:20.647 +05:30 [WRN] ❌ Login failed: Invalid email or password for test@gmail.com
2025-09-26 00:51:20.650 +05:30 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType0`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:51:20.653 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 59.3703ms
2025-09-26 00:51:20.655 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-26 00:51:20.656 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 401 null application/json; charset=utf-8 77.618ms
2025-09-26 00:51:21.818 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:21:21.8159189+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:51:31.836 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:21:31.8341468+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:51:41.856 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:21:41.8533101+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:51:46.785 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-26 00:51:46.789 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:51:46.790 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 4.524ms
2025-09-26 00:51:46.800 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 48
2025-09-26 00:51:46.803 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:51:46.804 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-26 00:51:46.806 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-26 00:51:46.811 +05:30 [INF] 🔑 Login attempt for email: test@gmail.com
2025-09-26 00:51:46.815 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_Email_0='test@gmail.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-26 00:51:46.886 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__user_BusinessId_Value_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-09-26 00:51:46.954 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='ab19e786-1e16-4ed2-bf83-b8e9adcbb80d'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-09-26 00:51:46.969 +05:30 [INF] ✅ Token generated for: test@gmail.com
2025-09-26 00:51:46.987 +05:30 [INF] 🔎 JWT includes plan_id: 5f9f5de1-a0b2-48ba-b03d-77b27345613f
2025-09-26 00:51:46.990 +05:30 [INF] ✅ Login successful for test@gmail.com, Role: business, PlanId: "5f9f5de1-a0b2-48ba-b03d-77b27345613f"
2025-09-26 00:51:46.992 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:51:46.996 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 188.54ms
2025-09-26 00:51:46.999 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-26 00:51:47.000 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 200.3232ms
2025-09-26 00:51:47.008 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-26 00:51:47.011 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:51:47.013 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 5.5574ms
2025-09-26 00:51:47.021 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-26 00:51:47.025 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:51:47.027 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-26 00:51:47.032 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-26 00:51:47.048 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-26 00:51:47.082 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-26 00:51:47.087 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType51`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:51:47.094 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 59.4472ms
2025-09-26 00:51:47.096 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-26 00:51:47.099 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 78.3847ms
2025-09-26 00:51:47.130 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-26 00:51:47.132 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-26 00:51:47.134 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:51:47.137 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:51:47.138 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 8.5574ms
2025-09-26 00:51:47.140 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.4506ms
2025-09-26 00:51:47.148 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-26 00:51:47.152 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:51:47.153 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-26 00:51:47.155 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-26 00:51:47.162 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-26 00:51:47.167 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType51`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:51:47.169 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 11.6724ms
2025-09-26 00:51:47.170 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-26 00:51:47.171 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-26 00:51:47.174 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:51:47.175 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 27.3071ms
2025-09-26 00:51:47.177 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-26 00:51:47.182 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-26 00:51:47.190 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-26 00:51:47.195 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType51`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:51:47.197 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.2239ms
2025-09-26 00:51:47.199 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-26 00:51:47.202 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 31.507ms
2025-09-26 00:51:47.316 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-26 00:51:47.320 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:51:47.322 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-26 00:51:47.324 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-26 00:51:47.332 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-26 00:51:47.337 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType51`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:51:47.339 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 12.237ms
2025-09-26 00:51:47.341 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-26 00:51:47.343 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 26.6507ms
2025-09-26 00:51:51.995 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T19:21:51.8696304+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:51:53.462 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 00:51:53.462 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 00:51:53.466 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:51:53.469 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:51:53.470 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 204 null null 8.131ms
2025-09-26 00:51:53.471 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 204 null null 9.0183ms
2025-09-26 00:51:53.487 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 00:51:53.487 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 00:51:53.491 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:51:53.493 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:51:53.495 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 00:51:53.496 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 00:51:53.497 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 00:51:53.498 +05:30 [INF] Route matched with {action = "GetSenders", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSenders(System.Guid) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-26 00:51:53.506 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-26 00:51:53.512 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType155`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType241`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:51:53.515 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 14.4778ms
2025-09-26 00:51:53.517 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 00:51:53.519 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 200 null application/json; charset=utf-8 31.2975ms
2025-09-26 00:51:53.609 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-26 00:51:53.612 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.WhatsAppSettings.DTOs.WhatsAppSenderDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:51:53.614 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api) in 108.9416ms
2025-09-26 00:51:53.616 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 00:51:53.617 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 200 null application/json; charset=utf-8 130.0432ms
2025-09-26 00:52:02.004 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:22:02.0014480+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:52:12.021 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T19:22:12.0175234+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:52:14.912 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/single_variable_body - null null
2025-09-26 00:52:14.917 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:52:14.918 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/single_variable_body - 204 null null 6.0559ms
2025-09-26 00:52:14.923 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/single_variable_body - null null
2025-09-26 00:52:14.926 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:52:14.927 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-26 00:52:14.929 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 00:52:14.934 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__name_1='single_variable_body'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-09-26 00:52:14.942 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body', @__language_2='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Language" = @__language_2
ORDER BY w."Language" = @__language_2 DESC
LIMIT 1
2025-09-26 00:52:14.945 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType242`10[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:52:14.947 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 15.4527ms
2025-09-26 00:52:14.948 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-26 00:52:14.950 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/single_variable_body - 200 null application/json; charset=utf-8 26.7749ms
2025-09-26 00:52:22.034 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:22:22.0315904+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:52:32.053 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:22:32.0509450+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:52:38.895 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-09-26 00:52:38.899 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:52:38.900 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 4.8508ms
2025-09-26 00:52:38.904 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 457
2025-09-26 00:52:38.907 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:52:38.909 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-26 00:52:38.910 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:52:38.918 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__phoneNumberId_1='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."PhoneNumberId" = @__phoneNumberId_1 AND w."IsActive"
LIMIT 1
2025-09-26 00:52:38.926 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:52:38.930 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:52:38.931 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:52:40.455 +05:30 [INF] Received HTTP response headers after 1522.9469ms - 200
2025-09-26 00:52:40.457 +05:30 [INF] End processing HTTP request after 1527.6726ms - 200
2025-09-26 00:52:40.564 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body', @__provider_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:52:40.573 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='f72333b2-1a90-4764-8eea-4f9b70fc08a6', @p1=NULL (DbType = Guid), @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='text', @p6='2025-09-25T19:22:40.5623634Z' (DbType = DateTime), @p7='system', @p8=NULL (DbType = Guid), @p9=NULL (DbType = DateTime), @p10=NULL, @p11=NULL, @p12=NULL, @p13=NULL, @p14=NULL, @p15='False', @p16='Hello
We are sedning {{1}} items.', @p17='Hello
We are sedning {{1}} items.' (Nullable = false), @p18='Bodyvar1' (Nullable = false), @p19='673199269218077', @p20='META_CLOUD', @p21=NULL (DbType = DateTime), @p22=NULL (DbType = Guid), @p23='Draft' (Nullable = false), @p24='single_variable_body', @p25='[]', @p26='{"Provider":"meta_cloud","TemplateId":"1209106791238164","TemplateName":"single_variable_body","Language":"en_US","HasHeaderMedia":false,"HeaderType":"","BodyPlaceholders":[{"Index":1,"Label":null,"Example":null}],"Buttons":[]}' (DbType = Object), @p27='2025-09-25T19:22:40.5623635Z' (DbType = DateTime), @p28=NULL], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "AudienceId", "BusinessId", "CTAFlowConfigId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "DocumentUrl", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "PhoneNumberId", "Provider", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "TemplateSchemaSnapshot", "UpdatedAt", "VideoUrl")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2025-09-26 00:52:40.576 +05:30 [INF] ✅ Campaign 'Bodyvar1' created | Type:text | Header:none | FlowId:null | EntryTemplate:single_variable_body | Sender:META_CLOUD/673199269218077 | Recipients:0
2025-09-26 00:52:40.579 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType64`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:52:40.581 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 1668.0991ms
2025-09-26 00:52:40.584 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-26 00:52:40.586 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 1681.6915ms
2025-09-26 00:52:40.707 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:52:40.713 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-26 00:52:40.712 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:52:40.708 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/f72333b2-1a90-4764-8eea-4f9b70fc08a6/csv-sample/schema - null null
2025-09-26 00:52:40.711 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/f72333b2-1a90-4764-8eea-4f9b70fc08a6 - null null
2025-09-26 00:52:40.723 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:52:40.729 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:52:40.732 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:52:40.734 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:52:40.737 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:52:40.740 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 26.3763ms
2025-09-26 00:52:40.741 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 29.0288ms
2025-09-26 00:52:40.742 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/f72333b2-1a90-4764-8eea-4f9b70fc08a6/csv-sample/schema - 204 null null 34.4646ms
2025-09-26 00:52:40.743 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/f72333b2-1a90-4764-8eea-4f9b70fc08a6 - 204 null null 31.9723ms
2025-09-26 00:52:40.739 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 31.7133ms
2025-09-26 00:52:40.754 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/f72333b2-1a90-4764-8eea-4f9b70fc08a6 - null null
2025-09-26 00:52:40.758 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:52:40.762 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-26 00:52:40.765 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/f72333b2-1a90-4764-8eea-4f9b70fc08a6/csv-sample/schema - null null
2025-09-26 00:52:40.771 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:52:40.774 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:52:40.777 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:52:40.780 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:52:40.781 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-26 00:52:40.782 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:52:40.783 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-26 00:52:40.784 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:52:40.785 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:52:40.786 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-26 00:52:40.787 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-26 00:52:40.788 +05:30 [INF] Route matched with {action = "GetSchema", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSchema(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 00:52:40.801 +05:30 [INF] GetPagedContactsAsync: businessId="6b5cea67-e8e9-42f7-8bde-51a9dbc02d56", tab=all, page=1, pageSize=1000
2025-09-26 00:52:40.799 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__campaignId_0='f72333b2-1a90-4764-8eea-4f9b70fc08a6', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AudienceId", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."DocumentUrl", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."TemplateSchemaSnapshot", t."UpdatedAt", t."VideoUrl", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", t."Id1", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value", t."BusinessId1", t."CreatedAt1", t."CreatedBy0", t."FlowName", t."IsActive0", t."IsPublished", t."UpdatedAt1"
FROM (
    SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0", c1."Id" AS "Id1", c1."BusinessId" AS "BusinessId1", c1."CreatedAt" AS "CreatedAt1", c1."CreatedBy" AS "CreatedBy0", c1."FlowName", c1."IsActive" AS "IsActive0", c1."IsPublished", c1."UpdatedAt" AS "UpdatedAt1"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    LEFT JOIN "CTAFlowConfigs" AS c1 ON c."CTAFlowConfigId" = c1."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t."Id0", t."Id1"
2025-09-26 00:52:40.799 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-26 00:52:40.819 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-09-26 00:52:40.821 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:52:40.823 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 32.2129ms
2025-09-26 00:52:40.825 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 32.1562ms
2025-09-26 00:52:40.827 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:52:40.828 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-26 00:52:40.829 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:52:40.832 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:52:40.834 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/f72333b2-1a90-4764-8eea-4f9b70fc08a6 - 200 null application/json; charset=utf-8 79.9463ms
2025-09-26 00:52:40.835 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 77.0414ms
2025-09-26 00:52:40.839 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:52:40.849 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-26 00:52:40.854 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-26 00:52:40.860 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:52:40.862 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 10.375ms
2025-09-26 00:52:40.864 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:52:40.865 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 37.7752ms
2025-09-26 00:52:40.930 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='f72333b2-1a90-4764-8eea-4f9b70fc08a6', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 00:52:40.936 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:52:40.942 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:52:40.945 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType66`3[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType67`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:52:40.947 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api) in 143.5681ms
2025-09-26 00:52:40.948 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/f72333b2-1a90-4764-8eea-4f9b70fc08a6/csv-sample/schema - null null
2025-09-26 00:52:40.949 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:52:40.952 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:52:40.953 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/f72333b2-1a90-4764-8eea-4f9b70fc08a6/csv-sample/schema - 200 null application/json; charset=utf-8 188.3254ms
2025-09-26 00:52:40.955 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:52:40.960 +05:30 [INF] Route matched with {action = "GetSchema", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSchema(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 00:52:40.965 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='f72333b2-1a90-4764-8eea-4f9b70fc08a6', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 00:52:40.971 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:52:40.976 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:52:40.980 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType66`3[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType67`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:52:40.982 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api) in 19.6107ms
2025-09-26 00:52:40.984 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:52:40.984 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-26 00:52:40.985 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/f72333b2-1a90-4764-8eea-4f9b70fc08a6/csv-sample/schema - 200 null application/json; charset=utf-8 37.2244ms
2025-09-26 00:52:40.994 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."ProfileName", t."ProfileNameUpdatedAt", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-26 00:52:40.998 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:52:40.999 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 199.6322ms
2025-09-26 00:52:41.001 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-26 00:52:41.003 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 241.0796ms
2025-09-26 00:52:42.062 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:22:42.0601542+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:52:51.311 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch - null null
2025-09-26 00:52:51.315 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:52:51.317 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch - 204 null null 5.8718ms
2025-09-26 00:52:51.323 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/csv/batch - multipart/form-data; boundary=----WebKitFormBoundaryWPVHhNEhurig6yab 239
2025-09-26 00:52:51.326 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:52:51.328 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api)'
2025-09-26 00:52:51.329 +05:30 [INF] Route matched with {action = "Upload", controller = "CsvBatch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Upload(xbytechat.api.Features.CampaignModule.DTOs.Requests.CsvBatchUploadForm, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController (xbytechat.api).
2025-09-26 00:52:51.340 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='27ef1bf2-7f98-45e7-8c4d-bb876daff745', @p1=NULL (DbType = Guid), @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3=NULL, @p4='2025-09-25T19:22:51.3362328Z' (DbType = DateTime), @p5=NULL (DbType = Guid), @p6=NULL, @p7='csv_two_parameter.csv', @p8=NULL (DbType = Object), @p9='0', @p10='0', @p11='ingesting' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CsvBatches" ("Id", "AudienceId", "BusinessId", "Checksum", "CreatedAt", "CreatedByUserId", "ErrorMessage", "FileName", "HeadersJson", "RowCount", "SkippedCount", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-09-26 00:52:51.347 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p1='27ef1bf2-7f98-45e7-8c4d-bb876daff745', @p0='["phone","parameter1"]' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CsvBatches" SET "HeadersJson" = @p0
WHERE "Id" = @p1;
2025-09-26 00:52:51.355 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='72d4f3fc-7198-4d4e-ad4d-06661263e7a7', @p1='27ef1bf2-7f98-45e7-8c4d-bb876daff745', @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3='2025-09-25T19:22:51.3504431Z' (DbType = DateTime), @p4=NULL, @p5=NULL, @p6='0', @p7='{"phone":"89740 05240","parameter1":"Robert Nicosta"}' (Nullable = false) (DbType = Object), @p8=NULL], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CsvRows" ("Id", "BatchId", "BusinessId", "CreatedAt", "PhoneE164", "PhoneRaw", "RowIndex", "RowJson", "ValidationError")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-09-26 00:52:51.360 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='27ef1bf2-7f98-45e7-8c4d-bb876daff745', @p0='1', @p1='ready' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CsvBatches" SET "RowCount" = @p0, "Status" = @p1
WHERE "Id" = @p2;
2025-09-26 00:52:51.363 +05:30 [INF] CsvBatch "27ef1bf2-7f98-45e7-8c4d-bb876daff745" ingested: 1 rows; headers=2
2025-09-26 00:52:51.365 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType70`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.CampaignModule.DTOs.CsvBatchUploadResultDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:52:51.367 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api) in 32.8599ms
2025-09-26 00:52:51.369 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api)'
2025-09-26 00:52:51.371 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/csv/batch - 200 null application/json; charset=utf-8 47.5836ms
2025-09-26 00:52:51.384 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch/27ef1bf2-7f98-45e7-8c4d-bb876daff745/sample?take=10 - null null
2025-09-26 00:52:51.387 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:52:51.388 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch/27ef1bf2-7f98-45e7-8c4d-bb876daff745/sample?take=10 - 204 null null 4.4523ms
2025-09-26 00:52:51.392 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/csv/batch/27ef1bf2-7f98-45e7-8c4d-bb876daff745/sample?take=10 - null null
2025-09-26 00:52:51.396 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:52:51.397 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api)'
2025-09-26 00:52:51.399 +05:30 [INF] Route matched with {action = "Sample", controller = "CsvBatch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sample(System.Guid, Int32, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController (xbytechat.api).
2025-09-26 00:52:51.405 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__batchId_0='27ef1bf2-7f98-45e7-8c4d-bb876daff745', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."HeadersJson", c."RowCount"
FROM "CsvBatches" AS c
WHERE c."Id" = @__batchId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:52:51.413 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__batchId_1='27ef1bf2-7f98-45e7-8c4d-bb876daff745', @__p_2='10'], CommandType='"Text"', CommandTimeout='30']
SELECT c."RowIndex", c."Id", c."BatchId", c."BusinessId", c."CreatedAt", c."PhoneE164", c."PhoneRaw", c."RowJson", c."ValidationError"
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__batchId_1
ORDER BY c."RowIndex"
LIMIT @__p_2
2025-09-26 00:52:51.416 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType70`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IReadOnlyList`1[[xbytechat.api.Features.CampaignModule.DTOs.CsvRowSampleDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:52:51.418 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api) in 16.1099ms
2025-09-26 00:52:51.420 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api)'
2025-09-26 00:52:51.422 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/csv/batch/27ef1bf2-7f98-45e7-8c4d-bb876daff745/sample?take=10 - 200 null application/json; charset=utf-8 29.2714ms
2025-09-26 00:52:51.439 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/f72333b2-1a90-4764-8eea-4f9b70fc08a6/mappings/suggest?batchId=27ef1bf2-7f98-45e7-8c4d-bb876daff745 - null null
2025-09-26 00:52:51.443 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:52:51.444 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/f72333b2-1a90-4764-8eea-4f9b70fc08a6/mappings/suggest?batchId=27ef1bf2-7f98-45e7-8c4d-bb876daff745 - 204 null null 5.5317ms
2025-09-26 00:52:51.449 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/f72333b2-1a90-4764-8eea-4f9b70fc08a6/mappings/suggest?batchId=27ef1bf2-7f98-45e7-8c4d-bb876daff745 - null null
2025-09-26 00:52:51.453 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:52:51.454 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api)'
2025-09-26 00:52:51.456 +05:30 [INF] Route matched with {action = "Suggest", controller = "CampaignMappings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestAsync(System.Guid, System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController (xbytechat.api).
2025-09-26 00:52:51.461 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='f72333b2-1a90-4764-8eea-4f9b70fc08a6', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateParameters"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:52:51.467 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__batchId_0='27ef1bf2-7f98-45e7-8c4d-bb876daff745', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."HeadersJson"
FROM "CsvBatches" AS c
WHERE c."Id" = @__batchId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:52:51.470 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:52:51.472 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api) in 13.8944ms
2025-09-26 00:52:51.474 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api)'
2025-09-26 00:52:51.475 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/f72333b2-1a90-4764-8eea-4f9b70fc08a6/mappings/suggest?batchId=27ef1bf2-7f98-45e7-8c4d-bb876daff745 - 200 null application/json; charset=utf-8 26.5045ms
2025-09-26 00:52:52.069 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:22:52.0667939+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:52:53.474 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/f72333b2-1a90-4764-8eea-4f9b70fc08a6/mappings - null null
2025-09-26 00:52:53.477 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:52:53.478 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/f72333b2-1a90-4764-8eea-4f9b70fc08a6/mappings - 204 null null 4.659ms
2025-09-26 00:52:53.486 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaigns/f72333b2-1a90-4764-8eea-4f9b70fc08a6/mappings - application/json 27
2025-09-26 00:52:53.490 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:52:53.493 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api)'
2025-09-26 00:52:53.494 +05:30 [INF] Route matched with {action = "Save", controller = "CampaignMappings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SaveAsync(System.Guid, System.Collections.Generic.Dictionary`2[System.String,System.String], System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController (xbytechat.api).
2025-09-26 00:52:53.498 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-26 00:52:53.500 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api) in 2.6562ms
2025-09-26 00:52:53.502 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api)'
2025-09-26 00:52:53.503 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaigns/f72333b2-1a90-4764-8eea-4f9b70fc08a6/mappings - 204 null null 17.3229ms
2025-09-26 00:52:53.508 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/f72333b2-1a90-4764-8eea-4f9b70fc08a6/materialize - null null
2025-09-26 00:52:53.511 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:52:53.512 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/f72333b2-1a90-4764-8eea-4f9b70fc08a6/materialize - 204 null null 3.879ms
2025-09-26 00:52:53.516 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaigns/f72333b2-1a90-4764-8eea-4f9b70fc08a6/materialize - application/json 207
2025-09-26 00:52:53.519 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:52:53.520 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api)'
2025-09-26 00:52:53.521 +05:30 [INF] Route matched with {action = "CsvCreate", controller = "CampaignMaterialize"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeResponseDto]] CsvCreate(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeRequestDto, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController (xbytechat.api).
2025-09-26 00:52:53.524 +05:30 [INF] 📦 Materialize request: campaign="f72333b2-1a90-4764-8eea-4f9b70fc08a6" persist=true batch="27ef1bf2-7f98-45e7-8c4d-bb876daff745" audience='Audience 2025-09-26'
2025-09-26 00:52:53.528 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='f72333b2-1a90-4764-8eea-4f9b70fc08a6', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1)
2025-09-26 00:52:53.534 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__request_CsvBatchId_1='27ef1bf2-7f98-45e7-8c4d-bb876daff745'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__request_CsvBatchId_1
2025-09-26 00:52:53.538 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__request_CsvBatchId_1='27ef1bf2-7f98-45e7-8c4d-bb876daff745', @__p_2='200'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BatchId", c."BusinessId", c."CreatedAt", c."PhoneE164", c."PhoneRaw", c."RowIndex", c."RowJson", c."ValidationError"
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__request_CsvBatchId_1
ORDER BY c."RowIndex"
LIMIT @__p_2
2025-09-26 00:52:53.542 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='f72333b2-1a90-4764-8eea-4f9b70fc08a6', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."MessageTemplate", c."TemplateId"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:52:53.547 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:52:53.552 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__r_Phone_1='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__8__locals1_businessId_0 AND c."PhoneNumber" = @__r_Phone_1
LIMIT 1
2025-09-26 00:52:53.562 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='97cd08e2-e7d7-4d53-aee5-43b88ab20b37', @p1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p2=NULL (DbType = Guid), @p3='2025-09-25T19:22:53.5504191Z' (DbType = DateTime), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6=NULL, @p7='False', @p8='Audience 2025-09-26' (Nullable = false), @p9='2025-09-25T19:22:53.5504191Z' (Nullable = true) (DbType = DateTime), @p10='ac66dad8-cc54-41b3-92ad-9b1fd72c99bb', @p11='{"parameter1":"Robert Nicosta"}' (DbType = Object), @p12='97cd08e2-e7d7-4d53-aee5-43b88ab20b37', @p13='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p14='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p15='2025-09-25T19:22:53.5504191Z' (DbType = DateTime), @p16=NULL (DbType = Guid), @p17=NULL, @p18='False', @p19='False', @p20=NULL, @p21='918974005240', @p22=NULL, @p23=NULL (DbType = DateTime), @p24='2025-09-25T19:22:53.5504191Z' (Nullable = true) (DbType = DateTime), @p25='204cfa58-4671-413c-ba81-c977f1de489c', @p26='ac66dad8-cc54-41b3-92ad-9b1fd72c99bb' (Nullable = true), @p27=NULL, @p28='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p29='f72333b2-1a90-4764-8eea-4f9b70fc08a6', @p30=NULL, @p31=NULL, @p32='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p33='27F0DCF0134E66C50B550355FA70FEEF43017170CC7902BB9FFB673BD55494B9', @p34='False', @p35='2025-09-25T19:22:53.5504191Z' (Nullable = true) (DbType = DateTime), @p36=NULL, @p37=NULL, @p38='{}' (DbType = Object), @p39='["Robert Nicosta"]' (DbType = Object), @p40=NULL (DbType = DateTime), @p41='Pending' (Nullable = false), @p42='2025-09-25T19:22:53.5504191Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Audiences" ("Id", "BusinessId", "CampaignId", "CreatedAt", "CreatedByUserId", "CsvBatchId", "Description", "IsDeleted", "Name", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
INSERT INTO "AudienceMembers" ("Id", "AttributesJson", "AudienceId", "BusinessId", "ContactId", "CreatedAt", "CreatedByUserId", "Email", "IsDeleted", "IsTransientContact", "Name", "PhoneE164", "PhoneRaw", "PromotedAt", "UpdatedAt")
VALUES (@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
INSERT INTO "CampaignRecipients" ("Id", "AudienceMemberId", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IdempotencyKey", "IsAutoTagged", "MaterializedAt", "MessagePreview", "ProductBrowsed", "ResolvedButtonUrlsJson", "ResolvedParametersJson", "SentAt", "Status", "UpdatedAt")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42);
2025-09-26 00:52:53.567 +05:30 [INF] 📦 Materialize result: campaign="f72333b2-1a90-4764-8eea-4f9b70fc08a6" materialized=1 skipped=0 audienceId="97cd08e2-e7d7-4d53-aee5-43b88ab20b37"
2025-09-26 00:52:53.569 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeResponseDto'.
2025-09-26 00:52:53.571 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api) in 47.4482ms
2025-09-26 00:52:53.573 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api)'
2025-09-26 00:52:53.574 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaigns/f72333b2-1a90-4764-8eea-4f9b70fc08a6/materialize - 200 null application/json; charset=utf-8 58.5282ms
2025-09-26 00:53:02.084 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:23:02.0822322+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:53:06.765 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 00:53:06.768 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:53:06.769 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 4.2503ms
2025-09-26 00:53:06.807 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 00:53:06.818 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:53:06.827 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 00:53:06.830 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:53:06.846 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-09-26 00:53:06.850 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:53:06.852 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 13.1566ms
2025-09-26 00:53:06.856 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 00:53:06.858 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 51.9243ms
2025-09-26 00:53:08.635 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f72333b2-1a90-4764-8eea-4f9b70fc08a6 - null null
2025-09-26 00:53:08.639 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:53:08.640 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f72333b2-1a90-4764-8eea-4f9b70fc08a6 - 204 null null 5.607ms
2025-09-26 00:53:08.644 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f72333b2-1a90-4764-8eea-4f9b70fc08a6 - null 0
2025-09-26 00:53:08.647 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:53:08.648 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 00:53:08.650 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:53:11.893 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='f72333b2-1a90-4764-8eea-4f9b70fc08a6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
ORDER BY c."Id"
LIMIT 1
2025-09-26 00:53:11.923 +05:30 [INF] Executed DbCommand (25ms) [Parameters=[@__campaignId_0='f72333b2-1a90-4764-8eea-4f9b70fc08a6'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."AudienceMemberId", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IdempotencyKey", t0."IsAutoTagged", t0."MaterializedAt", t0."MessagePreview", t0."ProductBrowsed", t0."ResolvedButtonUrlsJson", t0."ResolvedParametersJson", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."ProfileName", t0."ProfileNameUpdatedAt", t0."Tags", t0."Id1", t0."AttributesJson", t0."AudienceId", t0."BusinessId1", t0."ContactId0", t0."CreatedAt0", t0."CreatedByUserId", t0."Email0", t0."IsDeleted", t0."IsTransientContact", t0."Name0", t0."PhoneE164", t0."PhoneRaw", t0."PromotedAt", t0."UpdatedAt0", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN (
    SELECT c0."Id", c0."AudienceMemberId", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IdempotencyKey", c0."IsAutoTagged", c0."MaterializedAt", c0."MessagePreview", c0."ProductBrowsed", c0."ResolvedButtonUrlsJson", c0."ResolvedParametersJson", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."ProfileName", c1."ProfileNameUpdatedAt", c1."Tags", a."Id" AS "Id1", a."AttributesJson", a."AudienceId", a."BusinessId" AS "BusinessId1", a."ContactId" AS "ContactId0", a."CreatedAt" AS "CreatedAt0", a."CreatedByUserId", a."Email" AS "Email0", a."IsDeleted", a."IsTransientContact", a."Name" AS "Name0", a."PhoneE164", a."PhoneRaw", a."PromotedAt", a."UpdatedAt" AS "UpdatedAt0"
    FROM "CampaignRecipients" AS c0
    LEFT JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
    LEFT JOIN "AudienceMembers" AS a ON c0."AudienceMemberId" = a."Id"
) AS t0 ON t."Id" = t0."CampaignId"
ORDER BY t."Id"
2025-09-26 00:53:11.929 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='f72333b2-1a90-4764-8eea-4f9b70fc08a6'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."CampaignId", c0."IsFromTemplate", c0."Position", c0."Title", c0."Type", c0."Value", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN "CampaignButtons" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-26 00:53:11.935 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:53:11.939 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:53:11.940 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:53:12.094 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:23:12.0918551+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:53:13.227 +05:30 [INF] Received HTTP response headers after 1285.3991ms - 200
2025-09-26 00:53:13.230 +05:30 [INF] End processing HTTP request after 1291.3541ms - 200
2025-09-26 00:53:13.333 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 00:53:13.339 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 00:53:15.824 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:53:15.826 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:53:17.220 +05:30 [INF] Received HTTP response headers after 1392.9181ms - 400
2025-09-26 00:53:17.222 +05:30 [INF] End processing HTTP request after 1398.317ms - 400
2025-09-26 00:53:17.224 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"Parameter of type text is missing text value"},"fbtrace_id":"A04-DVLqFl2iJ76tyK0nOJf"}}
2025-09-26 00:53:27.323 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T19:23:27.3059864+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:53:31.130 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageLogId_0='00857ffe-25ed-430c-b926-f3f1551d1cfb', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:53:31.140 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p5='204cfa58-4671-413c-ba81-c977f1de489c', @p0='0de43833a2519adae396e92bbb41977b2ba5befdcd4477a4ce220c04bf0317f1', @p1='2025-09-25T19:23:13.3308157Z' (Nullable = true) (DbType = DateTime), @p2='[]' (DbType = Object), @p3='[""]' (DbType = Object), @p4='2025-09-25T19:23:13.3308157Z' (DbType = DateTime), @p6='00857ffe-25ed-430c-b926-f3f1551d1cfb', @p7='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p8=NULL, @p9=NULL (DbType = Guid), @p10=NULL (DbType = Guid), @p11='f72333b2-1a90-4764-8eea-4f9b70fc08a6' (Nullable = true), @p12='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p13=NULL, @p14=NULL, @p15=NULL (DbType = DateTime), @p16='2025-09-25T19:23:13.3308157Z' (DbType = DateTime), @p17='Bad Request', @p18=NULL (DbType = Int32), @p19=NULL (DbType = Boolean), @p20='False', @p21=NULL, @p22='single_variable_body' (Nullable = false), @p23=NULL, @p24=NULL (DbType = Decimal), @p25=NULL, @p26=NULL, @p27=NULL, @p28='{"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"Parameter of type text is missing text value"},"fbtrace_id":"A04-DVLqFl2iJ76tyK0nOJf"}}', @p29='918974005240' (Nullable = false), @p30=NULL (DbType = Guid), @p31=NULL, @p32='87fc2fad-1bca-4fa9-a9b2-6c8d7edc68ae' (Nullable = true), @p33=NULL (DbType = DateTime), @p34='campaign', @p35='Failed' (Nullable = false), @p36='2e70a1a7-3b39-4b4b-ae81-dce73441291c', @p37='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p38=NULL, @p39=NULL, @p40='2025-09-25T19:23:31.1331906+00:00' (DbType = DateTime), @p41='send_response' (Nullable = false), @p42=NULL (DbType = Boolean), @p43='00857ffe-25ed-430c-b926-f3f1551d1cfb' (Nullable = true), @p44='2025-09-25T19:23:31.1331922+00:00' (DbType = DateTime), @p45='{"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"Parameter of type text is missing text value"},"fbtrace_id":"A04-DVLqFl2iJ76tyK0nOJf"}}' (Nullable = false), @p46=NULL (DbType = Decimal), @p47=NULL, @p48='META_CLOUD' (Nullable = false), @p49=NULL], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignRecipients" SET "IdempotencyKey" = @p0, "MaterializedAt" = @p1, "ResolvedButtonUrlsJson" = @p2, "ResolvedParametersJson" = @p3, "UpdatedAt" = @p4
WHERE "Id" = @p5;
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35)
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49);
2025-09-26 00:53:31.169 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='677985e3-f331-4beb-95d5-bd93bd509729', @p1='True', @p2=NULL, @p3='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p4=NULL, @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7='f72333b2-1a90-4764-8eea-4f9b70fc08a6', @p8=NULL, @p9=NULL, @p10=NULL (DbType = DateTime), @p11='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p12=NULL, @p13='2025-09-25T19:23:13.3308157Z' (DbType = DateTime), @p14='system', @p15=NULL (DbType = DateTime), @p16=NULL, @p17=NULL, @p18='Bad Request', @p19=NULL, @p20='False', @p21=NULL (DbType = DateTime), @p22=NULL, @p23=NULL, @p24='Hello
We are sedning {{1}} items.' (Nullable = false), @p25=NULL, @p26='00857ffe-25ed-430c-b926-f3f1551d1cfb' (Nullable = true), @p27=NULL (DbType = DateTime), @p28='204cfa58-4671-413c-ba81-c977f1de489c', @p29='0', @p30='87fc2fad-1bca-4fa9-a9b2-6c8d7edc68ae' (Nullable = true), @p31='Failed', @p32=NULL (DbType = DateTime), @p33=NULL, @p34='single_variable_body', @p35=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-09-26 00:53:33.585 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:53:33.587 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 24934.3961ms
2025-09-26 00:53:33.591 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 00:53:33.593 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f72333b2-1a90-4764-8eea-4f9b70fc08a6 - 200 null application/json; charset=utf-8 24949.1626ms
2025-09-26 00:53:39.153 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:23:39.1512799+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:53:49.174 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:23:49.1710961+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:53:57.460 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 00:53:57.464 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:53:57.465 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 204 null null 5.6429ms
2025-09-26 00:53:57.473 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 00:53:57.476 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 00:53:57.477 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:53:57.483 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:53:57.484 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 204 null null 11.3802ms
2025-09-26 00:53:57.487 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 00:53:57.492 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 00:53:57.500 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 00:53:57.500 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-26 00:53:57.505 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:53:57.508 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType155`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType241`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:53:57.509 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 00:53:57.513 +05:30 [INF] Route matched with {action = "GetSenders", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSenders(System.Guid) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-26 00:53:57.511 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 16.4337ms
2025-09-26 00:53:57.517 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 00:53:57.519 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-26 00:53:57.521 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 200 null application/json; charset=utf-8 45.6519ms
2025-09-26 00:53:57.524 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.WhatsAppSettings.DTOs.WhatsAppSenderDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:53:57.531 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api) in 16.4325ms
2025-09-26 00:53:57.533 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 00:53:57.535 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 200 null application/json; charset=utf-8 35.1805ms
2025-09-26 00:53:59.182 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:23:59.1794755+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:54:09.191 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:24:09.1883352+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:54:19.199 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:24:19.1974550+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:54:19.982 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/shoe_launch_offer - null null
2025-09-26 00:54:19.987 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:54:19.988 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/shoe_launch_offer - 204 null null 5.8132ms
2025-09-26 00:54:19.993 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/shoe_launch_offer - null null
2025-09-26 00:54:19.997 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:54:19.999 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-26 00:54:20.000 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 00:54:20.008 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__name_1='shoe_launch_offer'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-09-26 00:54:20.017 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='shoe_launch_offer', @__language_2='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Language" = @__language_2
ORDER BY w."Language" = @__language_2 DESC
LIMIT 1
2025-09-26 00:54:20.020 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType242`10[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:54:20.022 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 18.3714ms
2025-09-26 00:54:20.025 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-26 00:54:20.026 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/shoe_launch_offer - 200 null application/json; charset=utf-8 33.5588ms
2025-09-26 00:54:29.206 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:24:29.2038232+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:54:31.805 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/single_variable_body - null null
2025-09-26 00:54:31.809 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:54:31.810 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/single_variable_body - 204 null null 5.0042ms
2025-09-26 00:54:31.814 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/single_variable_body - null null
2025-09-26 00:54:31.818 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:54:31.820 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-26 00:54:31.821 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 00:54:31.827 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__name_1='single_variable_body'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-09-26 00:54:31.834 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body', @__language_2='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Language" = @__language_2
ORDER BY w."Language" = @__language_2 DESC
LIMIT 1
2025-09-26 00:54:31.837 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType242`10[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:54:31.839 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 15.6089ms
2025-09-26 00:54:31.841 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-26 00:54:31.843 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/single_variable_body - 200 null application/json; charset=utf-8 28.9886ms
2025-09-26 00:54:39.222 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:24:39.2194662+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:54:42.437 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-09-26 00:54:42.442 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:54:42.444 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 7.7866ms
2025-09-26 00:54:42.451 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 467
2025-09-26 00:54:42.454 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:54:42.455 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-26 00:54:42.456 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:54:42.463 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__phoneNumberId_1='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."PhoneNumberId" = @__phoneNumberId_1 AND w."IsActive"
LIMIT 1
2025-09-26 00:54:42.471 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:54:42.474 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:54:42.476 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:54:45.095 +05:30 [INF] Received HTTP response headers after 2617.916ms - 200
2025-09-26 00:54:45.097 +05:30 [INF] End processing HTTP request after 2622.8256ms - 200
2025-09-26 00:54:45.127 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body', @__provider_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:54:45.133 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='3ce43915-ccfe-41e5-b495-9f2ec400f373', @p1=NULL (DbType = Guid), @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='text', @p6='2025-09-25T19:24:45.1240923Z' (DbType = DateTime), @p7='system', @p8=NULL (DbType = Guid), @p9=NULL (DbType = DateTime), @p10=NULL, @p11=NULL, @p12=NULL, @p13=NULL, @p14=NULL, @p15='False', @p16='Hello
We are sedning sdfasfs items.', @p17='Hello
We are sedning {{1}} items.' (Nullable = false), @p18='Bodyvar2' (Nullable = false), @p19='673199269218077', @p20='META_CLOUD', @p21=NULL (DbType = DateTime), @p22=NULL (DbType = Guid), @p23='Draft' (Nullable = false), @p24='single_variable_body', @p25='["sdfasfs"]', @p26='{"Provider":"meta_cloud","TemplateId":"1209106791238164","TemplateName":"single_variable_body","Language":"en_US","HasHeaderMedia":false,"HeaderType":"","BodyPlaceholders":[{"Index":1,"Label":null,"Example":null}],"Buttons":[]}' (DbType = Object), @p27='2025-09-25T19:24:45.1240925Z' (DbType = DateTime), @p28=NULL], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "AudienceId", "BusinessId", "CTAFlowConfigId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "DocumentUrl", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "PhoneNumberId", "Provider", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "TemplateSchemaSnapshot", "UpdatedAt", "VideoUrl")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2025-09-26 00:54:45.136 +05:30 [INF] ✅ Campaign 'Bodyvar2' created | Type:text | Header:none | FlowId:null | EntryTemplate:single_variable_body | Sender:META_CLOUD/673199269218077 | Recipients:0
2025-09-26 00:54:45.139 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType64`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:54:45.141 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 2682.193ms
2025-09-26 00:54:45.142 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-26 00:54:45.143 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 2692.5477ms
2025-09-26 00:54:45.215 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:54:45.218 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:54:45.219 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 4.7273ms
2025-09-26 00:54:45.216 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:54:45.215 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/3ce43915-ccfe-41e5-b495-9f2ec400f373/csv-sample/schema - null null
2025-09-26 00:54:45.217 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-26 00:54:45.223 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:54:45.215 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/3ce43915-ccfe-41e5-b495-9f2ec400f373 - null null
2025-09-26 00:54:45.243 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:54:45.247 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:54:45.250 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:54:45.253 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:54:45.258 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:54:45.259 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 42.2888ms
2025-09-26 00:54:45.260 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/3ce43915-ccfe-41e5-b495-9f2ec400f373/csv-sample/schema - 204 null null 45.2731ms
2025-09-26 00:54:45.261 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 44.0129ms
2025-09-26 00:54:45.262 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:54:45.263 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/3ce43915-ccfe-41e5-b495-9f2ec400f373 - 204 null null 48.2452ms
2025-09-26 00:54:45.272 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/3ce43915-ccfe-41e5-b495-9f2ec400f373 - null null
2025-09-26 00:54:45.278 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-26 00:54:45.279 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-26 00:54:45.283 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/3ce43915-ccfe-41e5-b495-9f2ec400f373/csv-sample/schema - null null
2025-09-26 00:54:45.286 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:54:45.295 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-26 00:54:45.289 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:54:45.298 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:54:45.299 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-26 00:54:45.301 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:54:45.302 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-26 00:54:45.303 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:54:45.304 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:54:45.306 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 14.7226ms
2025-09-26 00:54:45.308 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:54:45.314 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:54:45.308 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-26 00:54:45.309 +05:30 [INF] Route matched with {action = "GetSchema", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSchema(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 00:54:45.317 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='3ce43915-ccfe-41e5-b495-9f2ec400f373', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AudienceId", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."DocumentUrl", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."TemplateSchemaSnapshot", t."UpdatedAt", t."VideoUrl", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", t."Id1", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value", t."BusinessId1", t."CreatedAt1", t."CreatedBy0", t."FlowName", t."IsActive0", t."IsPublished", t."UpdatedAt1"
FROM (
    SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0", c1."Id" AS "Id1", c1."BusinessId" AS "BusinessId1", c1."CreatedAt" AS "CreatedAt1", c1."CreatedBy" AS "CreatedBy0", c1."FlowName", c1."IsActive" AS "IsActive0", c1."IsPublished", c1."UpdatedAt" AS "UpdatedAt1"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    LEFT JOIN "CTAFlowConfigs" AS c1 ON c."CTAFlowConfigId" = c1."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t."Id0", t."Id1"
2025-09-26 00:54:45.321 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 98.005ms
2025-09-26 00:54:45.324 +05:30 [INF] GetPagedContactsAsync: businessId="6b5cea67-e8e9-42f7-8bde-51a9dbc02d56", tab=all, page=1, pageSize=1000
2025-09-26 00:54:45.329 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='3ce43915-ccfe-41e5-b495-9f2ec400f373', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 00:54:45.343 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-26 00:54:45.320 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:54:45.349 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:54:45.333 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-09-26 00:54:45.354 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."ProfileName", t."ProfileNameUpdatedAt", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-26 00:54:45.353 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:54:45.358 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:54:45.359 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 46.6489ms
2025-09-26 00:54:45.363 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:54:45.364 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-26 00:54:45.367 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType66`3[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType67`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:54:45.371 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 47.3143ms
2025-09-26 00:54:45.377 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-26 00:54:45.377 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api) in 50.5885ms
2025-09-26 00:54:45.369 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-26 00:54:45.380 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-26 00:54:45.384 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:54:45.385 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:54:45.387 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/3ce43915-ccfe-41e5-b495-9f2ec400f373 - 200 null application/json; charset=utf-8 115.0824ms
2025-09-26 00:54:45.389 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 110.6766ms
2025-09-26 00:54:45.392 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 18.0473ms
2025-09-26 00:54:45.394 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/3ce43915-ccfe-41e5-b495-9f2ec400f373/csv-sample/schema - 200 null application/json; charset=utf-8 111.1762ms
2025-09-26 00:54:45.403 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/3ce43915-ccfe-41e5-b495-9f2ec400f373/csv-sample/schema - null null
2025-09-26 00:54:45.404 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:54:45.413 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:54:45.414 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 106.4152ms
2025-09-26 00:54:45.416 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:54:45.421 +05:30 [INF] Route matched with {action = "GetSchema", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSchema(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 00:54:45.428 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='3ce43915-ccfe-41e5-b495-9f2ec400f373', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 00:54:45.435 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:54:45.440 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:54:45.444 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType66`3[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType67`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:54:45.446 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api) in 21.6863ms
2025-09-26 00:54:45.448 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:54:45.450 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/3ce43915-ccfe-41e5-b495-9f2ec400f373/csv-sample/schema - 200 null application/json; charset=utf-8 46.877ms
2025-09-26 00:54:49.233 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:24:49.2304782+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:54:59.248 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:24:59.2456246+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:55:01.858 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch - null null
2025-09-26 00:55:01.863 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:55:01.864 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch - 204 null null 6.0022ms
2025-09-26 00:55:01.869 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/csv/batch - multipart/form-data; boundary=----WebKitFormBoundaryWybMl0TrKwT6Qacv 239
2025-09-26 00:55:01.873 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:55:01.874 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api)'
2025-09-26 00:55:01.875 +05:30 [INF] Route matched with {action = "Upload", controller = "CsvBatch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Upload(xbytechat.api.Features.CampaignModule.DTOs.Requests.CsvBatchUploadForm, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController (xbytechat.api).
2025-09-26 00:55:01.896 +05:30 [INF] Executed DbCommand (15ms) [Parameters=[@p0='1ed5ad36-6cf1-4f42-a505-b1d05c7a0c72', @p1=NULL (DbType = Guid), @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3=NULL, @p4='2025-09-25T19:25:01.8801252Z' (DbType = DateTime), @p5=NULL (DbType = Guid), @p6=NULL, @p7='csv_two_parameter.csv', @p8=NULL (DbType = Object), @p9='0', @p10='0', @p11='ingesting' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CsvBatches" ("Id", "AudienceId", "BusinessId", "Checksum", "CreatedAt", "CreatedByUserId", "ErrorMessage", "FileName", "HeadersJson", "RowCount", "SkippedCount", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-09-26 00:55:01.901 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='1ed5ad36-6cf1-4f42-a505-b1d05c7a0c72', @p0='["phone","parameter1"]' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CsvBatches" SET "HeadersJson" = @p0
WHERE "Id" = @p1;
2025-09-26 00:55:01.907 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='d38a45a8-f672-4513-af03-59413803ea71', @p1='1ed5ad36-6cf1-4f42-a505-b1d05c7a0c72', @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3='2025-09-25T19:25:01.9049804Z' (DbType = DateTime), @p4=NULL, @p5=NULL, @p6='0', @p7='{"phone":"89740 05240","parameter1":"Robert Nicosta"}' (Nullable = false) (DbType = Object), @p8=NULL], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CsvRows" ("Id", "BatchId", "BusinessId", "CreatedAt", "PhoneE164", "PhoneRaw", "RowIndex", "RowJson", "ValidationError")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-09-26 00:55:01.912 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='1ed5ad36-6cf1-4f42-a505-b1d05c7a0c72', @p0='1', @p1='ready' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CsvBatches" SET "RowCount" = @p0, "Status" = @p1
WHERE "Id" = @p2;
2025-09-26 00:55:01.915 +05:30 [INF] CsvBatch "1ed5ad36-6cf1-4f42-a505-b1d05c7a0c72" ingested: 1 rows; headers=2
2025-09-26 00:55:01.917 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType70`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.CampaignModule.DTOs.CsvBatchUploadResultDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:55:01.919 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api) in 41.1555ms
2025-09-26 00:55:01.922 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api)'
2025-09-26 00:55:01.924 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/csv/batch - 200 null application/json; charset=utf-8 54.4914ms
2025-09-26 00:55:01.932 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch/1ed5ad36-6cf1-4f42-a505-b1d05c7a0c72/sample?take=10 - null null
2025-09-26 00:55:01.936 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:55:01.937 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch/1ed5ad36-6cf1-4f42-a505-b1d05c7a0c72/sample?take=10 - 204 null null 5.4742ms
2025-09-26 00:55:01.945 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/csv/batch/1ed5ad36-6cf1-4f42-a505-b1d05c7a0c72/sample?take=10 - null null
2025-09-26 00:55:01.949 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:55:01.951 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api)'
2025-09-26 00:55:01.953 +05:30 [INF] Route matched with {action = "Sample", controller = "CsvBatch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sample(System.Guid, Int32, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController (xbytechat.api).
2025-09-26 00:55:01.959 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__batchId_0='1ed5ad36-6cf1-4f42-a505-b1d05c7a0c72', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."HeadersJson", c."RowCount"
FROM "CsvBatches" AS c
WHERE c."Id" = @__batchId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:55:01.967 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__batchId_1='1ed5ad36-6cf1-4f42-a505-b1d05c7a0c72', @__p_2='10'], CommandType='"Text"', CommandTimeout='30']
SELECT c."RowIndex", c."Id", c."BatchId", c."BusinessId", c."CreatedAt", c."PhoneE164", c."PhoneRaw", c."RowJson", c."ValidationError"
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__batchId_1
ORDER BY c."RowIndex"
LIMIT @__p_2
2025-09-26 00:55:01.970 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType70`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IReadOnlyList`1[[xbytechat.api.Features.CampaignModule.DTOs.CsvRowSampleDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:55:01.971 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api) in 15.8525ms
2025-09-26 00:55:01.974 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api)'
2025-09-26 00:55:01.976 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/csv/batch/1ed5ad36-6cf1-4f42-a505-b1d05c7a0c72/sample?take=10 - 200 null application/json; charset=utf-8 30.8033ms
2025-09-26 00:55:01.982 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/3ce43915-ccfe-41e5-b495-9f2ec400f373/mappings/suggest?batchId=1ed5ad36-6cf1-4f42-a505-b1d05c7a0c72 - null null
2025-09-26 00:55:01.986 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:55:01.987 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/3ce43915-ccfe-41e5-b495-9f2ec400f373/mappings/suggest?batchId=1ed5ad36-6cf1-4f42-a505-b1d05c7a0c72 - 204 null null 5.3243ms
2025-09-26 00:55:01.998 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/3ce43915-ccfe-41e5-b495-9f2ec400f373/mappings/suggest?batchId=1ed5ad36-6cf1-4f42-a505-b1d05c7a0c72 - null null
2025-09-26 00:55:02.001 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:55:02.003 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api)'
2025-09-26 00:55:02.005 +05:30 [INF] Route matched with {action = "Suggest", controller = "CampaignMappings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestAsync(System.Guid, System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController (xbytechat.api).
2025-09-26 00:55:02.010 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='3ce43915-ccfe-41e5-b495-9f2ec400f373', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateParameters"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:55:02.018 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__batchId_0='1ed5ad36-6cf1-4f42-a505-b1d05c7a0c72', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."HeadersJson"
FROM "CsvBatches" AS c
WHERE c."Id" = @__batchId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:55:02.022 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:55:02.024 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api) in 16.8629ms
2025-09-26 00:55:02.027 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api)'
2025-09-26 00:55:02.028 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/3ce43915-ccfe-41e5-b495-9f2ec400f373/mappings/suggest?batchId=1ed5ad36-6cf1-4f42-a505-b1d05c7a0c72 - 200 null application/json; charset=utf-8 30.9304ms
2025-09-26 00:55:04.485 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/3ce43915-ccfe-41e5-b495-9f2ec400f373/mappings - null null
2025-09-26 00:55:04.489 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:55:04.490 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/3ce43915-ccfe-41e5-b495-9f2ec400f373/mappings - 204 null null 4.7359ms
2025-09-26 00:55:04.496 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaigns/3ce43915-ccfe-41e5-b495-9f2ec400f373/mappings - application/json 27
2025-09-26 00:55:04.500 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:55:04.503 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api)'
2025-09-26 00:55:04.505 +05:30 [INF] Route matched with {action = "Save", controller = "CampaignMappings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SaveAsync(System.Guid, System.Collections.Generic.Dictionary`2[System.String,System.String], System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController (xbytechat.api).
2025-09-26 00:55:04.509 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-26 00:55:04.511 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api) in 2.7142ms
2025-09-26 00:55:04.512 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api)'
2025-09-26 00:55:04.514 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaigns/3ce43915-ccfe-41e5-b495-9f2ec400f373/mappings - 204 null null 18.5593ms
2025-09-26 00:55:04.520 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/3ce43915-ccfe-41e5-b495-9f2ec400f373/materialize - null null
2025-09-26 00:55:04.523 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:55:04.525 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/3ce43915-ccfe-41e5-b495-9f2ec400f373/materialize - 204 null null 4.9048ms
2025-09-26 00:55:04.529 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaigns/3ce43915-ccfe-41e5-b495-9f2ec400f373/materialize - application/json 207
2025-09-26 00:55:04.533 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:55:04.535 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api)'
2025-09-26 00:55:04.536 +05:30 [INF] Route matched with {action = "CsvCreate", controller = "CampaignMaterialize"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeResponseDto]] CsvCreate(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeRequestDto, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController (xbytechat.api).
2025-09-26 00:55:04.540 +05:30 [INF] 📦 Materialize request: campaign="3ce43915-ccfe-41e5-b495-9f2ec400f373" persist=true batch="1ed5ad36-6cf1-4f42-a505-b1d05c7a0c72" audience='Audience 2025-09-26'
2025-09-26 00:55:04.545 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='3ce43915-ccfe-41e5-b495-9f2ec400f373', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1)
2025-09-26 00:55:04.552 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__request_CsvBatchId_1='1ed5ad36-6cf1-4f42-a505-b1d05c7a0c72'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__request_CsvBatchId_1
2025-09-26 00:55:04.556 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__request_CsvBatchId_1='1ed5ad36-6cf1-4f42-a505-b1d05c7a0c72', @__p_2='200'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BatchId", c."BusinessId", c."CreatedAt", c."PhoneE164", c."PhoneRaw", c."RowIndex", c."RowJson", c."ValidationError"
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__request_CsvBatchId_1
ORDER BY c."RowIndex"
LIMIT @__p_2
2025-09-26 00:55:04.563 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='3ce43915-ccfe-41e5-b495-9f2ec400f373', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."MessageTemplate", c."TemplateId"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:55:04.567 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:55:04.573 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__r_Phone_1='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__8__locals1_businessId_0 AND c."PhoneNumber" = @__r_Phone_1
LIMIT 1
2025-09-26 00:55:04.584 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='acb0200d-36f9-4a3e-877f-3d56de1ca541', @p1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p2=NULL (DbType = Guid), @p3='2025-09-25T19:25:04.5712903Z' (DbType = DateTime), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6=NULL, @p7='False', @p8='Audience 2025-09-26' (Nullable = false), @p9='2025-09-25T19:25:04.5712903Z' (Nullable = true) (DbType = DateTime), @p10='fcb35da3-76ac-489e-99ac-3208fab8477b', @p11='{"parameter1":"Robert Nicosta"}' (DbType = Object), @p12='acb0200d-36f9-4a3e-877f-3d56de1ca541', @p13='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p14='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p15='2025-09-25T19:25:04.5712903Z' (DbType = DateTime), @p16=NULL (DbType = Guid), @p17=NULL, @p18='False', @p19='False', @p20=NULL, @p21='918974005240', @p22=NULL, @p23=NULL (DbType = DateTime), @p24='2025-09-25T19:25:04.5712903Z' (Nullable = true) (DbType = DateTime), @p25='e781faed-91cb-452c-aef7-051d30737531', @p26='fcb35da3-76ac-489e-99ac-3208fab8477b' (Nullable = true), @p27=NULL, @p28='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p29='3ce43915-ccfe-41e5-b495-9f2ec400f373', @p30=NULL, @p31=NULL, @p32='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p33='F25F02AECBEECECA1F713D196DF8D8088CF6347E700C01A12FBAF5FDA80AE66D', @p34='False', @p35='2025-09-25T19:25:04.5712903Z' (Nullable = true) (DbType = DateTime), @p36=NULL, @p37=NULL, @p38='{}' (DbType = Object), @p39='["Robert Nicosta"]' (DbType = Object), @p40=NULL (DbType = DateTime), @p41='Pending' (Nullable = false), @p42='2025-09-25T19:25:04.5712903Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Audiences" ("Id", "BusinessId", "CampaignId", "CreatedAt", "CreatedByUserId", "CsvBatchId", "Description", "IsDeleted", "Name", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
INSERT INTO "AudienceMembers" ("Id", "AttributesJson", "AudienceId", "BusinessId", "ContactId", "CreatedAt", "CreatedByUserId", "Email", "IsDeleted", "IsTransientContact", "Name", "PhoneE164", "PhoneRaw", "PromotedAt", "UpdatedAt")
VALUES (@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
INSERT INTO "CampaignRecipients" ("Id", "AudienceMemberId", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IdempotencyKey", "IsAutoTagged", "MaterializedAt", "MessagePreview", "ProductBrowsed", "ResolvedButtonUrlsJson", "ResolvedParametersJson", "SentAt", "Status", "UpdatedAt")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42);
2025-09-26 00:55:04.590 +05:30 [INF] 📦 Materialize result: campaign="3ce43915-ccfe-41e5-b495-9f2ec400f373" materialized=1 skipped=0 audienceId="acb0200d-36f9-4a3e-877f-3d56de1ca541"
2025-09-26 00:55:04.593 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeResponseDto'.
2025-09-26 00:55:04.595 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api) in 55.8646ms
2025-09-26 00:55:04.597 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api)'
2025-09-26 00:55:04.598 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaigns/3ce43915-ccfe-41e5-b495-9f2ec400f373/materialize - 200 null application/json; charset=utf-8 69.1979ms
2025-09-26 00:55:09.259 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:25:09.2565043+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:55:10.271 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 00:55:10.275 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:55:10.276 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 4.7964ms
2025-09-26 00:55:10.284 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 00:55:10.287 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:55:10.289 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 00:55:10.290 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:55:10.300 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-09-26 00:55:10.303 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:55:10.305 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 11.9814ms
2025-09-26 00:55:10.308 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 00:55:10.309 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 25.1537ms
2025-09-26 00:55:12.830 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/3ce43915-ccfe-41e5-b495-9f2ec400f373 - null null
2025-09-26 00:55:12.833 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:55:12.834 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/3ce43915-ccfe-41e5-b495-9f2ec400f373 - 204 null null 4.179ms
2025-09-26 00:55:12.839 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/3ce43915-ccfe-41e5-b495-9f2ec400f373 - null 0
2025-09-26 00:55:12.843 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:55:12.844 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 00:55:12.846 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:55:15.575 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='3ce43915-ccfe-41e5-b495-9f2ec400f373'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
ORDER BY c."Id"
LIMIT 1
2025-09-26 00:55:15.606 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='3ce43915-ccfe-41e5-b495-9f2ec400f373'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."AudienceMemberId", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IdempotencyKey", t0."IsAutoTagged", t0."MaterializedAt", t0."MessagePreview", t0."ProductBrowsed", t0."ResolvedButtonUrlsJson", t0."ResolvedParametersJson", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."ProfileName", t0."ProfileNameUpdatedAt", t0."Tags", t0."Id1", t0."AttributesJson", t0."AudienceId", t0."BusinessId1", t0."ContactId0", t0."CreatedAt0", t0."CreatedByUserId", t0."Email0", t0."IsDeleted", t0."IsTransientContact", t0."Name0", t0."PhoneE164", t0."PhoneRaw", t0."PromotedAt", t0."UpdatedAt0", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN (
    SELECT c0."Id", c0."AudienceMemberId", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IdempotencyKey", c0."IsAutoTagged", c0."MaterializedAt", c0."MessagePreview", c0."ProductBrowsed", c0."ResolvedButtonUrlsJson", c0."ResolvedParametersJson", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."ProfileName", c1."ProfileNameUpdatedAt", c1."Tags", a."Id" AS "Id1", a."AttributesJson", a."AudienceId", a."BusinessId" AS "BusinessId1", a."ContactId" AS "ContactId0", a."CreatedAt" AS "CreatedAt0", a."CreatedByUserId", a."Email" AS "Email0", a."IsDeleted", a."IsTransientContact", a."Name" AS "Name0", a."PhoneE164", a."PhoneRaw", a."PromotedAt", a."UpdatedAt" AS "UpdatedAt0"
    FROM "CampaignRecipients" AS c0
    LEFT JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
    LEFT JOIN "AudienceMembers" AS a ON c0."AudienceMemberId" = a."Id"
) AS t0 ON t."Id" = t0."CampaignId"
ORDER BY t."Id"
2025-09-26 00:55:15.612 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='3ce43915-ccfe-41e5-b495-9f2ec400f373'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."CampaignId", c0."IsFromTemplate", c0."Position", c0."Title", c0."Type", c0."Value", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN "CampaignButtons" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-26 00:55:15.617 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:55:15.621 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:55:15.622 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:55:17.645 +05:30 [INF] Received HTTP response headers after 2021.327ms - 200
2025-09-26 00:55:17.647 +05:30 [INF] End processing HTTP request after 2026.4403ms - 200
2025-09-26 00:55:17.958 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 00:55:17.965 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 00:55:20.491 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:55:20.492 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:55:20.493 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:25:20.4915316+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:55:21.557 +05:30 [INF] Received HTTP response headers after 1062.555ms - 200
2025-09-26 00:55:21.561 +05:30 [INF] End processing HTTP request after 1070.5588ms - 200
2025-09-26 00:55:24.774 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageLogId_0='71c8bc7a-fa04-4440-8840-4804f5e9647c', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:55:24.786 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p5='e781faed-91cb-452c-aef7-051d30737531', @p0='adacde59f69f1ef60fab205bb6c0e35b6c20d05e1a93617354064e830cef4884', @p1='2025-09-25T19:25:17.9524482Z' (Nullable = true) (DbType = DateTime), @p2='[]' (DbType = Object), @p3='["sdfasfs"]' (DbType = Object), @p4='2025-09-25T19:25:17.9524482Z' (DbType = DateTime), @p6='71c8bc7a-fa04-4440-8840-4804f5e9647c', @p7='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p8=NULL, @p9=NULL (DbType = Guid), @p10=NULL (DbType = Guid), @p11='3ce43915-ccfe-41e5-b495-9f2ec400f373' (Nullable = true), @p12='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p13=NULL, @p14=NULL, @p15=NULL (DbType = DateTime), @p16='2025-09-25T19:25:17.9524482Z' (DbType = DateTime), @p17=NULL, @p18=NULL (DbType = Int32), @p19=NULL (DbType = Boolean), @p20='False', @p21=NULL, @p22='single_variable_body' (Nullable = false), @p23='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTE2OThGNTA2MjQwOEZFNkMwAA==', @p24=NULL (DbType = Decimal), @p25=NULL, @p26=NULL, @p27=NULL, @p28='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTE2OThGNTA2MjQwOEZFNkMwAA==","message_status":"accepted"}]}', @p29='918974005240' (Nullable = false), @p30=NULL (DbType = Guid), @p31=NULL, @p32='95fae314-7ef9-41d8-8591-67253d1d776e' (Nullable = true), @p33='2025-09-25T19:25:17.9524482Z' (Nullable = true) (DbType = DateTime), @p34='campaign', @p35='Sent' (Nullable = false), @p36='5bc99632-4319-49eb-95ad-9c9d2232948e', @p37='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p38=NULL, @p39=NULL, @p40='2025-09-25T19:25:24.7813294+00:00' (DbType = DateTime), @p41='send_response' (Nullable = false), @p42=NULL (DbType = Boolean), @p43='71c8bc7a-fa04-4440-8840-4804f5e9647c' (Nullable = true), @p44='2025-09-25T19:25:24.7813312+00:00' (DbType = DateTime), @p45='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTE2OThGNTA2MjQwOEZFNkMwAA==","message_status":"accepted"}]}' (Nullable = false), @p46=NULL (DbType = Decimal), @p47=NULL, @p48='META_CLOUD' (Nullable = false), @p49='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTE2OThGNTA2MjQwOEZFNkMwAA=='], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignRecipients" SET "IdempotencyKey" = @p0, "MaterializedAt" = @p1, "ResolvedButtonUrlsJson" = @p2, "ResolvedParametersJson" = @p3, "UpdatedAt" = @p4
WHERE "Id" = @p5;
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35)
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49);
2025-09-26 00:55:24.797 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='ab57a643-3a6b-48aa-a4e3-d6a0c0576084', @p1='True', @p2=NULL, @p3='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p4=NULL, @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7='3ce43915-ccfe-41e5-b495-9f2ec400f373', @p8=NULL, @p9=NULL, @p10=NULL (DbType = DateTime), @p11='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p12=NULL, @p13='2025-09-25T19:25:17.9524482Z' (DbType = DateTime), @p14='system', @p15=NULL (DbType = DateTime), @p16=NULL, @p17=NULL, @p18=NULL, @p19=NULL, @p20='False', @p21=NULL (DbType = DateTime), @p22=NULL, @p23=NULL, @p24='Hello
We are sedning sdfasfs items.' (Nullable = false), @p25='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTE2OThGNTA2MjQwOEZFNkMwAA==', @p26='71c8bc7a-fa04-4440-8840-4804f5e9647c' (Nullable = true), @p27=NULL (DbType = DateTime), @p28='e781faed-91cb-452c-aef7-051d30737531', @p29='0', @p30='95fae314-7ef9-41d8-8591-67253d1d776e' (Nullable = true), @p31='Sent', @p32='2025-09-25T19:25:17.9524482Z' (Nullable = true) (DbType = DateTime), @p33=NULL, @p34='single_variable_body', @p35=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-09-26 00:55:27.951 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:55:27.953 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 15104.3ms
2025-09-26 00:55:27.954 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 00:55:27.955 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/3ce43915-ccfe-41e5-b495-9f2ec400f373 - 200 null application/json; charset=utf-8 15116.4254ms
2025-09-26 00:55:29.725 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-26 00:55:29.729 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:55:29.730 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 00:55:29.733 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTE2OThGNTA2MjQwOEZFNkMwAA==","status":"sent","timestamp":"1758828328","recipient_id":"918974005240","conversation":{"id":"26aa96359a22d730419287438e3c2980","expiration_timestamp":"1758828328","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:55:29.735 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 00:55:29.735 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTE2OThGNTA2MjQwOEZFNkMwAA==","status":"sent","timestamp":"1758828328","recipient_id":"918974005240","conversation":{"id":"26aa96359a22d730419287438e3c2980","expiration_timestamp":"1758828328","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:55:29.736 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:55:29.740 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-26 00:55:29.740 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 8.3769ms
2025-09-26 00:55:29.745 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-26 00:55:29.746 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:55:29.748 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-26 00:55:29.749 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 24.49ms
2025-09-26 00:55:29.752 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 00:55:29.761 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTE2OThGNTA2MjQwOEZFNkMwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 00:55:29.766 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='ab57a643-3a6b-48aa-a4e3-d6a0c0576084'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 00:55:29.769 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTE2OThGNTA2MjQwOEZFNkMwAA== (legacy)
2025-09-26 00:55:30.533 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:25:30.5310226+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:55:30.959 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-09-26 00:55:30.962 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:55:30.964 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 00:55:30.966 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTE2OThGNTA2MjQwOEZFNkMwAA==","status":"delivered","timestamp":"1758828329","recipient_id":"918974005240","conversation":{"id":"26aa96359a22d730419287438e3c2980","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:55:30.969 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 00:55:30.969 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTE2OThGNTA2MjQwOEZFNkMwAA==","status":"delivered","timestamp":"1758828329","recipient_id":"918974005240","conversation":{"id":"26aa96359a22d730419287438e3c2980","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:55:30.970 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:55:30.971 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 00:55:30.972 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.5179ms
2025-09-26 00:55:30.977 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTE2OThGNTA2MjQwOEZFNkMwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 00:55:30.978 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:55:30.981 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='ab57a643-3a6b-48aa-a4e3-d6a0c0576084'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 00:55:30.982 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 22.8006ms
2025-09-26 00:55:30.987 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p2='ab57a643-3a6b-48aa-a4e3-d6a0c0576084', @p0='2025-09-25T19:25:29.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-26 00:55:30.994 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTE2OThGNTA2MjQwOEZFNkMwAA== → Delivered
2025-09-26 00:55:36.043 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-09-26 00:55:36.056 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:55:36.058 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 00:55:36.061 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTE2OThGNTA2MjQwOEZFNkMwAA==","status":"read","timestamp":"1758828333","recipient_id":"918974005240","conversation":{"id":"26aa96359a22d730419287438e3c2980","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:55:36.063 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 00:55:36.064 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTE2OThGNTA2MjQwOEZFNkMwAA==","status":"read","timestamp":"1758828333","recipient_id":"918974005240","conversation":{"id":"26aa96359a22d730419287438e3c2980","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:55:36.065 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:55:36.066 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 00:55:36.068 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.393ms
2025-09-26 00:55:36.073 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:55:36.074 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTE2OThGNTA2MjQwOEZFNkMwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 00:55:36.075 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 31.4344ms
2025-09-26 00:55:36.080 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='ab57a643-3a6b-48aa-a4e3-d6a0c0576084'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 00:55:36.108 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p2='ab57a643-3a6b-48aa-a4e3-d6a0c0576084', @p0='2025-09-25T19:25:33.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-26 00:55:36.111 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTE2OThGNTA2MjQwOEZFNkMwAA== → Read
2025-09-26 00:55:40.549 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:25:40.5470285+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:55:50.565 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__now_0='2025-09-25T19:25:50.5601120+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:56:00.575 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:26:00.5723866+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:56:10.585 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:26:10.5826443+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:56:20.592 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:26:20.5902385+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:56:30.600 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:26:30.5980508+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:56:40.603 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:26:40.6007024+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:56:50.610 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:26:50.6077731+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:57:00.734 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__now_0='2025-09-25T19:27:00.6156156+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:57:07.347 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 00:57:07.347 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 00:57:07.351 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:07.357 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:07.384 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 204 null null 36.9881ms
2025-09-26 00:57:07.385 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 204 null null 37.5943ms
2025-09-26 00:57:07.398 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 00:57:07.398 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 00:57:07.403 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:07.406 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:07.408 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 00:57:07.408 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 00:57:07.410 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 00:57:07.411 +05:30 [INF] Route matched with {action = "GetSenders", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSenders(System.Guid) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-26 00:57:07.420 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-26 00:57:07.429 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType155`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType241`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:57:07.432 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 16.9828ms
2025-09-26 00:57:07.434 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 00:57:07.436 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 200 null application/json; charset=utf-8 37.896ms
2025-09-26 00:57:07.535 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-26 00:57:07.539 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.WhatsAppSettings.DTOs.WhatsAppSenderDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:57:07.541 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api) in 121.5124ms
2025-09-26 00:57:07.543 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 00:57:07.545 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 200 null application/json; charset=utf-8 146.4226ms
2025-09-26 00:57:10.759 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:27:10.7564160+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:57:14.549 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/single_variable_body - null null
2025-09-26 00:57:14.553 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:14.554 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/single_variable_body - 204 null null 5.2075ms
2025-09-26 00:57:14.559 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/single_variable_body - null null
2025-09-26 00:57:14.562 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:14.563 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-26 00:57:14.564 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 00:57:14.571 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__name_1='single_variable_body'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-09-26 00:57:14.578 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body', @__language_2='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Language" = @__language_2
ORDER BY w."Language" = @__language_2 DESC
LIMIT 1
2025-09-26 00:57:14.581 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType242`10[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:57:14.583 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 16.7301ms
2025-09-26 00:57:14.585 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-26 00:57:14.587 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/single_variable_body - 200 null application/json; charset=utf-8 27.9096ms
2025-09-26 00:57:20.769 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:27:20.7662305+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:57:24.336 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-09-26 00:57:24.339 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:24.340 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 4.7453ms
2025-09-26 00:57:24.345 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 468
2025-09-26 00:57:24.348 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:24.350 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-26 00:57:24.351 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:57:24.358 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__phoneNumberId_1='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."PhoneNumberId" = @__phoneNumberId_1 AND w."IsActive"
LIMIT 1
2025-09-26 00:57:24.366 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:57:24.370 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:57:24.372 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:57:26.053 +05:30 [INF] Received HTTP response headers after 1678.6554ms - 200
2025-09-26 00:57:26.055 +05:30 [INF] End processing HTTP request after 1684.9742ms - 200
2025-09-26 00:57:26.116 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body', @__provider_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:57:26.143 +05:30 [INF] Executed DbCommand (22ms) [Parameters=[@p0='c70ac32e-f10a-440e-843e-93552fb776b7', @p1=NULL (DbType = Guid), @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='text', @p6='2025-09-25T19:27:26.1148351Z' (DbType = DateTime), @p7='system', @p8=NULL (DbType = Guid), @p9=NULL (DbType = DateTime), @p10=NULL, @p11=NULL, @p12=NULL, @p13=NULL, @p14=NULL, @p15='False', @p16='Hello
We are sedning HardCode items.', @p17='Hello
We are sedning {{1}} items.' (Nullable = false), @p18='Bodyvar3' (Nullable = false), @p19='673199269218077', @p20='META_CLOUD', @p21=NULL (DbType = DateTime), @p22=NULL (DbType = Guid), @p23='Draft' (Nullable = false), @p24='single_variable_body', @p25='["HardCode"]', @p26='{"Provider":"meta_cloud","TemplateId":"1209106791238164","TemplateName":"single_variable_body","Language":"en_US","HasHeaderMedia":false,"HeaderType":"","BodyPlaceholders":[{"Index":1,"Label":null,"Example":null}],"Buttons":[]}' (DbType = Object), @p27='2025-09-25T19:27:26.1148352Z' (DbType = DateTime), @p28=NULL], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "AudienceId", "BusinessId", "CTAFlowConfigId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "DocumentUrl", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "PhoneNumberId", "Provider", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "TemplateSchemaSnapshot", "UpdatedAt", "VideoUrl")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2025-09-26 00:57:26.146 +05:30 [INF] ✅ Campaign 'Bodyvar3' created | Type:text | Header:none | FlowId:null | EntryTemplate:single_variable_body | Sender:META_CLOUD/673199269218077 | Recipients:0
2025-09-26 00:57:26.150 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType64`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:57:26.152 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 1797.6929ms
2025-09-26 00:57:26.154 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-26 00:57:26.155 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 1810.6768ms
2025-09-26 00:57:26.210 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:57:26.214 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-26 00:57:26.216 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/c70ac32e-f10a-440e-843e-93552fb776b7 - null null
2025-09-26 00:57:26.214 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/csv-sample/schema - null null
2025-09-26 00:57:26.214 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:57:26.228 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:26.233 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:26.245 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 31.027ms
2025-09-26 00:57:26.244 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 34.3892ms
2025-09-26 00:57:26.236 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:26.240 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:26.243 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:26.256 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:57:26.261 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-26 00:57:26.262 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/c70ac32e-f10a-440e-843e-93552fb776b7 - 204 null null 46.0233ms
2025-09-26 00:57:26.263 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/csv-sample/schema - 204 null null 49.7846ms
2025-09-26 00:57:26.264 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 50.0487ms
2025-09-26 00:57:26.275 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:26.279 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:26.288 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/c70ac32e-f10a-440e-843e-93552fb776b7 - null null
2025-09-26 00:57:26.291 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/csv-sample/schema - null null
2025-09-26 00:57:26.293 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:57:26.293 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-26 00:57:26.298 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:26.302 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:26.304 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-26 00:57:26.305 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-26 00:57:26.307 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-26 00:57:26.316 +05:30 [INF] GetPagedContactsAsync: businessId="6b5cea67-e8e9-42f7-8bde-51a9dbc02d56", tab=all, page=1, pageSize=1000
2025-09-26 00:57:26.308 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:57:26.322 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-26 00:57:26.317 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:57:26.324 +05:30 [INF] Route matched with {action = "GetSchema", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSchema(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 00:57:26.332 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."ProfileName", t."ProfileNameUpdatedAt", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-26 00:57:26.314 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-26 00:57:26.347 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:57:26.350 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:57:26.353 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 37.5749ms
2025-09-26 00:57:26.354 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 43.585ms
2025-09-26 00:57:26.355 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-26 00:57:26.356 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-26 00:57:26.358 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:57:26.362 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:26.363 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 102.4029ms
2025-09-26 00:57:26.365 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 108.573ms
2025-09-26 00:57:26.366 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:57:26.376 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-26 00:57:26.382 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-26 00:57:26.387 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:57:26.390 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 11.2592ms
2025-09-26 00:57:26.393 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 00:57:26.395 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 39.5182ms
2025-09-26 00:57:26.451 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__campaignId_0='c70ac32e-f10a-440e-843e-93552fb776b7', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AudienceId", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."DocumentUrl", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."TemplateSchemaSnapshot", t."UpdatedAt", t."VideoUrl", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", t."Id1", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value", t."BusinessId1", t."CreatedAt1", t."CreatedBy0", t."FlowName", t."IsActive0", t."IsPublished", t."UpdatedAt1"
FROM (
    SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0", c1."Id" AS "Id1", c1."BusinessId" AS "BusinessId1", c1."CreatedAt" AS "CreatedAt1", c1."CreatedBy" AS "CreatedBy0", c1."FlowName", c1."IsActive" AS "IsActive0", c1."IsPublished", c1."UpdatedAt" AS "UpdatedAt1"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    LEFT JOIN "CTAFlowConfigs" AS c1 ON c."CTAFlowConfigId" = c1."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t."Id0", t."Id1"
2025-09-26 00:57:26.455 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-09-26 00:57:26.457 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 124.6228ms
2025-09-26 00:57:26.459 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-26 00:57:26.461 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/c70ac32e-f10a-440e-843e-93552fb776b7 - 200 null application/json; charset=utf-8 173.2165ms
2025-09-26 00:57:26.502 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='c70ac32e-f10a-440e-843e-93552fb776b7', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 00:57:26.507 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:57:26.513 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:57:26.516 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType66`3[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType67`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:57:26.518 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api) in 180.9589ms
2025-09-26 00:57:26.520 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/csv-sample/schema - null null
2025-09-26 00:57:26.521 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:57:26.525 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:26.526 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/csv-sample/schema - 200 null application/json; charset=utf-8 235.0364ms
2025-09-26 00:57:26.528 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:57:26.535 +05:30 [INF] Route matched with {action = "GetSchema", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSchema(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 00:57:26.541 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='c70ac32e-f10a-440e-843e-93552fb776b7', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 00:57:26.550 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 00:57:26.557 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:57:26.560 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType66`3[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType67`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:57:26.564 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api) in 26.1198ms
2025-09-26 00:57:26.567 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 00:57:26.568 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/csv-sample/schema - 200 null application/json; charset=utf-8 48.5407ms
2025-09-26 00:57:30.778 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:27:30.7736000+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:57:34.941 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch - null null
2025-09-26 00:57:34.945 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:34.946 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch - 204 null null 5.3329ms
2025-09-26 00:57:34.961 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/csv/batch - multipart/form-data; boundary=----WebKitFormBoundaryAEQ0vbVmWK2XhdPN 239
2025-09-26 00:57:34.966 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:34.968 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api)'
2025-09-26 00:57:34.970 +05:30 [INF] Route matched with {action = "Upload", controller = "CsvBatch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Upload(xbytechat.api.Features.CampaignModule.DTOs.Requests.CsvBatchUploadForm, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController (xbytechat.api).
2025-09-26 00:57:34.997 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[@p0='f3c4d5c3-9d17-4202-87ba-bb6b38fffe2b', @p1=NULL (DbType = Guid), @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3=NULL, @p4='2025-09-25T19:27:34.9749344Z' (DbType = DateTime), @p5=NULL (DbType = Guid), @p6=NULL, @p7='csv_two_parameter.csv', @p8=NULL (DbType = Object), @p9='0', @p10='0', @p11='ingesting' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CsvBatches" ("Id", "AudienceId", "BusinessId", "Checksum", "CreatedAt", "CreatedByUserId", "ErrorMessage", "FileName", "HeadersJson", "RowCount", "SkippedCount", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-09-26 00:57:35.004 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p1='f3c4d5c3-9d17-4202-87ba-bb6b38fffe2b', @p0='["phone","parameter1"]' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CsvBatches" SET "HeadersJson" = @p0
WHERE "Id" = @p1;
2025-09-26 00:57:35.012 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='52df26e2-0029-4e88-8bbf-c61658a7fe89', @p1='f3c4d5c3-9d17-4202-87ba-bb6b38fffe2b', @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3='2025-09-25T19:27:35.0080051Z' (DbType = DateTime), @p4=NULL, @p5=NULL, @p6='0', @p7='{"phone":"89740 05240","parameter1":"Robert Nicosta"}' (Nullable = false) (DbType = Object), @p8=NULL], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CsvRows" ("Id", "BatchId", "BusinessId", "CreatedAt", "PhoneE164", "PhoneRaw", "RowIndex", "RowJson", "ValidationError")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-09-26 00:57:35.018 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='f3c4d5c3-9d17-4202-87ba-bb6b38fffe2b', @p0='1', @p1='ready' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CsvBatches" SET "RowCount" = @p0, "Status" = @p1
WHERE "Id" = @p2;
2025-09-26 00:57:35.021 +05:30 [INF] CsvBatch "f3c4d5c3-9d17-4202-87ba-bb6b38fffe2b" ingested: 1 rows; headers=2
2025-09-26 00:57:35.023 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType70`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.CampaignModule.DTOs.CsvBatchUploadResultDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:57:35.026 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api) in 52.824ms
2025-09-26 00:57:35.028 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api)'
2025-09-26 00:57:35.030 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/csv/batch - 200 null application/json; charset=utf-8 68.7255ms
2025-09-26 00:57:35.035 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch/f3c4d5c3-9d17-4202-87ba-bb6b38fffe2b/sample?take=10 - null null
2025-09-26 00:57:35.040 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:35.041 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch/f3c4d5c3-9d17-4202-87ba-bb6b38fffe2b/sample?take=10 - 204 null null 5.5683ms
2025-09-26 00:57:35.046 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/csv/batch/f3c4d5c3-9d17-4202-87ba-bb6b38fffe2b/sample?take=10 - null null
2025-09-26 00:57:35.050 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:35.052 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api)'
2025-09-26 00:57:35.054 +05:30 [INF] Route matched with {action = "Sample", controller = "CsvBatch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sample(System.Guid, Int32, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController (xbytechat.api).
2025-09-26 00:57:35.060 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__batchId_0='f3c4d5c3-9d17-4202-87ba-bb6b38fffe2b', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."HeadersJson", c."RowCount"
FROM "CsvBatches" AS c
WHERE c."Id" = @__batchId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:57:35.068 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__batchId_1='f3c4d5c3-9d17-4202-87ba-bb6b38fffe2b', @__p_2='10'], CommandType='"Text"', CommandTimeout='30']
SELECT c."RowIndex", c."Id", c."BatchId", c."BusinessId", c."CreatedAt", c."PhoneE164", c."PhoneRaw", c."RowJson", c."ValidationError"
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__batchId_1
ORDER BY c."RowIndex"
LIMIT @__p_2
2025-09-26 00:57:35.071 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType70`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IReadOnlyList`1[[xbytechat.api.Features.CampaignModule.DTOs.CsvRowSampleDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:57:35.076 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api) in 19.4761ms
2025-09-26 00:57:35.079 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api)'
2025-09-26 00:57:35.081 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/csv/batch/f3c4d5c3-9d17-4202-87ba-bb6b38fffe2b/sample?take=10 - 200 null application/json; charset=utf-8 34.7338ms
2025-09-26 00:57:35.091 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/mappings/suggest?batchId=f3c4d5c3-9d17-4202-87ba-bb6b38fffe2b - null null
2025-09-26 00:57:35.096 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:35.097 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/mappings/suggest?batchId=f3c4d5c3-9d17-4202-87ba-bb6b38fffe2b - 204 null null 5.9655ms
2025-09-26 00:57:35.114 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/mappings/suggest?batchId=f3c4d5c3-9d17-4202-87ba-bb6b38fffe2b - null null
2025-09-26 00:57:35.119 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:35.120 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api)'
2025-09-26 00:57:35.121 +05:30 [INF] Route matched with {action = "Suggest", controller = "CampaignMappings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestAsync(System.Guid, System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController (xbytechat.api).
2025-09-26 00:57:35.128 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='c70ac32e-f10a-440e-843e-93552fb776b7', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateParameters"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:57:35.134 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__batchId_0='f3c4d5c3-9d17-4202-87ba-bb6b38fffe2b', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."HeadersJson"
FROM "CsvBatches" AS c
WHERE c."Id" = @__batchId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:57:35.138 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:57:35.140 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api) in 15.5571ms
2025-09-26 00:57:35.142 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api)'
2025-09-26 00:57:35.144 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/mappings/suggest?batchId=f3c4d5c3-9d17-4202-87ba-bb6b38fffe2b - 200 null application/json; charset=utf-8 29.7315ms
2025-09-26 00:57:37.330 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/mappings - null null
2025-09-26 00:57:37.334 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:37.335 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/mappings - 204 null null 4.564ms
2025-09-26 00:57:37.340 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/mappings - application/json 27
2025-09-26 00:57:37.344 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:37.346 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api)'
2025-09-26 00:57:37.347 +05:30 [INF] Route matched with {action = "Save", controller = "CampaignMappings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SaveAsync(System.Guid, System.Collections.Generic.Dictionary`2[System.String,System.String], System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController (xbytechat.api).
2025-09-26 00:57:37.350 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-26 00:57:37.351 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api) in 1.9341ms
2025-09-26 00:57:37.353 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api)'
2025-09-26 00:57:37.355 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/mappings - 204 null null 15.0845ms
2025-09-26 00:57:37.360 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/materialize - null null
2025-09-26 00:57:37.365 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:37.366 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/materialize - 204 null null 5.6621ms
2025-09-26 00:57:37.372 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/materialize - application/json 171
2025-09-26 00:57:37.377 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:37.378 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api)'
2025-09-26 00:57:37.380 +05:30 [INF] Route matched with {action = "CsvCreate", controller = "CampaignMaterialize"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeResponseDto]] CsvCreate(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeRequestDto, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController (xbytechat.api).
2025-09-26 00:57:37.383 +05:30 [INF] 📦 Materialize request: campaign="c70ac32e-f10a-440e-843e-93552fb776b7" persist=false batch="f3c4d5c3-9d17-4202-87ba-bb6b38fffe2b" audience='null'
2025-09-26 00:57:37.389 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='c70ac32e-f10a-440e-843e-93552fb776b7', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1)
2025-09-26 00:57:37.396 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__request_CsvBatchId_1='f3c4d5c3-9d17-4202-87ba-bb6b38fffe2b'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__request_CsvBatchId_1
2025-09-26 00:57:37.417 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__request_CsvBatchId_1='f3c4d5c3-9d17-4202-87ba-bb6b38fffe2b', @__p_2='200'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BatchId", c."BusinessId", c."CreatedAt", c."PhoneE164", c."PhoneRaw", c."RowIndex", c."RowJson", c."ValidationError"
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__request_CsvBatchId_1
ORDER BY c."RowIndex"
LIMIT @__p_2
2025-09-26 00:57:37.424 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='c70ac32e-f10a-440e-843e-93552fb776b7', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."MessageTemplate", c."TemplateId"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:57:37.432 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:57:37.436 +05:30 [INF] 📦 Materialize result: campaign="c70ac32e-f10a-440e-843e-93552fb776b7" materialized=1 skipped=0 audienceId=null
2025-09-26 00:57:37.439 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeResponseDto'.
2025-09-26 00:57:37.440 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api) in 58.0282ms
2025-09-26 00:57:37.443 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api)'
2025-09-26 00:57:37.444 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/materialize - 200 null application/json; charset=utf-8 71.8549ms
2025-09-26 00:57:40.788 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:27:40.7857189+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:57:41.076 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/mappings - application/json 27
2025-09-26 00:57:41.079 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:41.081 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api)'
2025-09-26 00:57:41.082 +05:30 [INF] Route matched with {action = "Save", controller = "CampaignMappings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SaveAsync(System.Guid, System.Collections.Generic.Dictionary`2[System.String,System.String], System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController (xbytechat.api).
2025-09-26 00:57:41.086 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-26 00:57:41.087 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api) in 2.1566ms
2025-09-26 00:57:41.089 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api)'
2025-09-26 00:57:41.091 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/mappings - 204 null null 15.1017ms
2025-09-26 00:57:41.098 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/materialize - application/json 207
2025-09-26 00:57:41.103 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:41.104 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api)'
2025-09-26 00:57:41.105 +05:30 [INF] Route matched with {action = "CsvCreate", controller = "CampaignMaterialize"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeResponseDto]] CsvCreate(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeRequestDto, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController (xbytechat.api).
2025-09-26 00:57:41.108 +05:30 [INF] 📦 Materialize request: campaign="c70ac32e-f10a-440e-843e-93552fb776b7" persist=true batch="f3c4d5c3-9d17-4202-87ba-bb6b38fffe2b" audience='Audience 2025-09-26'
2025-09-26 00:57:41.113 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='c70ac32e-f10a-440e-843e-93552fb776b7', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1)
2025-09-26 00:57:41.121 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__request_CsvBatchId_1='f3c4d5c3-9d17-4202-87ba-bb6b38fffe2b'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__request_CsvBatchId_1
2025-09-26 00:57:41.126 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__request_CsvBatchId_1='f3c4d5c3-9d17-4202-87ba-bb6b38fffe2b', @__p_2='200'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BatchId", c."BusinessId", c."CreatedAt", c."PhoneE164", c."PhoneRaw", c."RowIndex", c."RowJson", c."ValidationError"
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__request_CsvBatchId_1
ORDER BY c."RowIndex"
LIMIT @__p_2
2025-09-26 00:57:41.131 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='c70ac32e-f10a-440e-843e-93552fb776b7', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."MessageTemplate", c."TemplateId"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:57:41.136 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 00:57:41.142 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__r_Phone_1='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__8__locals1_businessId_0 AND c."PhoneNumber" = @__r_Phone_1
LIMIT 1
2025-09-26 00:57:41.153 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='1d54fd1f-6cab-4cf3-ac5f-e9de7f6042a9', @p1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p2=NULL (DbType = Guid), @p3='2025-09-25T19:27:41.1405073Z' (DbType = DateTime), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6=NULL, @p7='False', @p8='Audience 2025-09-26' (Nullable = false), @p9='2025-09-25T19:27:41.1405073Z' (Nullable = true) (DbType = DateTime), @p10='fd9935af-dfb2-483e-b839-591f3e141bc6', @p11='{"parameter1":"Robert Nicosta"}' (DbType = Object), @p12='1d54fd1f-6cab-4cf3-ac5f-e9de7f6042a9', @p13='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p14='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p15='2025-09-25T19:27:41.1405073Z' (DbType = DateTime), @p16=NULL (DbType = Guid), @p17=NULL, @p18='False', @p19='False', @p20=NULL, @p21='918974005240', @p22=NULL, @p23=NULL (DbType = DateTime), @p24='2025-09-25T19:27:41.1405073Z' (Nullable = true) (DbType = DateTime), @p25='5c61c51a-bb04-478c-8b59-59a2606cc051', @p26='fd9935af-dfb2-483e-b839-591f3e141bc6' (Nullable = true), @p27=NULL, @p28='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p29='c70ac32e-f10a-440e-843e-93552fb776b7', @p30=NULL, @p31=NULL, @p32='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p33='F6B50CC248B47A2CB401C181C0E6D4BB3FBFE4B4A1908A681632E0F63007DD65', @p34='False', @p35='2025-09-25T19:27:41.1405073Z' (Nullable = true) (DbType = DateTime), @p36=NULL, @p37=NULL, @p38='{}' (DbType = Object), @p39='["Robert Nicosta"]' (DbType = Object), @p40=NULL (DbType = DateTime), @p41='Pending' (Nullable = false), @p42='2025-09-25T19:27:41.1405073Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Audiences" ("Id", "BusinessId", "CampaignId", "CreatedAt", "CreatedByUserId", "CsvBatchId", "Description", "IsDeleted", "Name", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
INSERT INTO "AudienceMembers" ("Id", "AttributesJson", "AudienceId", "BusinessId", "ContactId", "CreatedAt", "CreatedByUserId", "Email", "IsDeleted", "IsTransientContact", "Name", "PhoneE164", "PhoneRaw", "PromotedAt", "UpdatedAt")
VALUES (@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
INSERT INTO "CampaignRecipients" ("Id", "AudienceMemberId", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IdempotencyKey", "IsAutoTagged", "MaterializedAt", "MessagePreview", "ProductBrowsed", "ResolvedButtonUrlsJson", "ResolvedParametersJson", "SentAt", "Status", "UpdatedAt")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42);
2025-09-26 00:57:41.177 +05:30 [INF] 📦 Materialize result: campaign="c70ac32e-f10a-440e-843e-93552fb776b7" materialized=1 skipped=0 audienceId="1d54fd1f-6cab-4cf3-ac5f-e9de7f6042a9"
2025-09-26 00:57:41.180 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeResponseDto'.
2025-09-26 00:57:41.182 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api) in 74.1557ms
2025-09-26 00:57:41.184 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api)'
2025-09-26 00:57:41.187 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/materialize - 200 null application/json; charset=utf-8 88.4671ms
2025-09-26 00:57:44.341 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 00:57:44.349 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:44.352 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 10.9966ms
2025-09-26 00:57:44.360 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 00:57:44.367 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:44.369 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 00:57:44.371 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:57:44.380 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-09-26 00:57:44.385 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 00:57:44.387 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 13.0797ms
2025-09-26 00:57:44.389 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 00:57:44.391 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 31.4109ms
2025-09-26 00:57:48.373 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/c70ac32e-f10a-440e-843e-93552fb776b7 - null null
2025-09-26 00:57:48.379 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:48.382 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/c70ac32e-f10a-440e-843e-93552fb776b7 - 204 null null 9.1936ms
2025-09-26 00:57:48.389 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/c70ac32e-f10a-440e-843e-93552fb776b7 - null 0
2025-09-26 00:57:48.393 +05:30 [INF] CORS policy execution successful.
2025-09-26 00:57:48.395 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 00:57:48.396 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 00:57:50.315 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='c70ac32e-f10a-440e-843e-93552fb776b7'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
ORDER BY c."Id"
LIMIT 1
2025-09-26 00:57:50.345 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='c70ac32e-f10a-440e-843e-93552fb776b7'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."AudienceMemberId", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IdempotencyKey", t0."IsAutoTagged", t0."MaterializedAt", t0."MessagePreview", t0."ProductBrowsed", t0."ResolvedButtonUrlsJson", t0."ResolvedParametersJson", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."ProfileName", t0."ProfileNameUpdatedAt", t0."Tags", t0."Id1", t0."AttributesJson", t0."AudienceId", t0."BusinessId1", t0."ContactId0", t0."CreatedAt0", t0."CreatedByUserId", t0."Email0", t0."IsDeleted", t0."IsTransientContact", t0."Name0", t0."PhoneE164", t0."PhoneRaw", t0."PromotedAt", t0."UpdatedAt0", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN (
    SELECT c0."Id", c0."AudienceMemberId", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IdempotencyKey", c0."IsAutoTagged", c0."MaterializedAt", c0."MessagePreview", c0."ProductBrowsed", c0."ResolvedButtonUrlsJson", c0."ResolvedParametersJson", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."ProfileName", c1."ProfileNameUpdatedAt", c1."Tags", a."Id" AS "Id1", a."AttributesJson", a."AudienceId", a."BusinessId" AS "BusinessId1", a."ContactId" AS "ContactId0", a."CreatedAt" AS "CreatedAt0", a."CreatedByUserId", a."Email" AS "Email0", a."IsDeleted", a."IsTransientContact", a."Name" AS "Name0", a."PhoneE164", a."PhoneRaw", a."PromotedAt", a."UpdatedAt" AS "UpdatedAt0"
    FROM "CampaignRecipients" AS c0
    LEFT JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
    LEFT JOIN "AudienceMembers" AS a ON c0."AudienceMemberId" = a."Id"
) AS t0 ON t."Id" = t0."CampaignId"
ORDER BY t."Id"
2025-09-26 00:57:50.351 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='c70ac32e-f10a-440e-843e-93552fb776b7'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."CampaignId", c0."IsFromTemplate", c0."Position", c0."Title", c0."Type", c0."Value", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN "CampaignButtons" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-26 00:57:50.357 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 00:57:50.360 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:57:50.362 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 00:57:50.803 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:27:50.8012672+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:57:51.167 +05:30 [INF] Received HTTP response headers after 803.1045ms - 200
2025-09-26 00:57:51.172 +05:30 [INF] End processing HTTP request after 811.342ms - 200
2025-09-26 00:57:51.264 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 00:57:51.271 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 00:57:53.075 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:57:53.080 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 00:57:54.099 +05:30 [INF] Received HTTP response headers after 1017.6827ms - 200
2025-09-26 00:57:54.116 +05:30 [INF] End processing HTTP request after 1040.6693ms - 200
2025-09-26 00:57:57.426 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageLogId_0='b1ab2b54-77fb-435d-9f02-82f137005061', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 00:57:57.434 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p5='5c61c51a-bb04-478c-8b59-59a2606cc051', @p0='2de573aceef8e6b93cd9ca8982f5b36324f76a8d88c73543b3a7aca7827e7123', @p1='2025-09-25T19:27:51.2614592Z' (Nullable = true) (DbType = DateTime), @p2='[]' (DbType = Object), @p3='["HardCode"]' (DbType = Object), @p4='2025-09-25T19:27:51.2614592Z' (DbType = DateTime), @p6='b1ab2b54-77fb-435d-9f02-82f137005061', @p7='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p8=NULL, @p9=NULL (DbType = Guid), @p10=NULL (DbType = Guid), @p11='c70ac32e-f10a-440e-843e-93552fb776b7' (Nullable = true), @p12='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p13=NULL, @p14=NULL, @p15=NULL (DbType = DateTime), @p16='2025-09-25T19:27:51.2614592Z' (DbType = DateTime), @p17=NULL, @p18=NULL (DbType = Int32), @p19=NULL (DbType = Boolean), @p20='False', @p21=NULL, @p22='single_variable_body' (Nullable = false), @p23='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkJBMjc0OTk3Q0YzQjRFMUU2AA==', @p24=NULL (DbType = Decimal), @p25=NULL, @p26=NULL, @p27=NULL, @p28='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkJBMjc0OTk3Q0YzQjRFMUU2AA==","message_status":"accepted"}]}', @p29='918974005240' (Nullable = false), @p30=NULL (DbType = Guid), @p31=NULL, @p32='0d9f5ed2-af30-4d1d-8922-d7257999b101' (Nullable = true), @p33='2025-09-25T19:27:51.2614592Z' (Nullable = true) (DbType = DateTime), @p34='campaign', @p35='Sent' (Nullable = false), @p36='b86fbd11-27e3-48e2-8cfc-3ac2eea53258', @p37='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p38=NULL, @p39=NULL, @p40='2025-09-25T19:27:57.4296329+00:00' (DbType = DateTime), @p41='send_response' (Nullable = false), @p42=NULL (DbType = Boolean), @p43='b1ab2b54-77fb-435d-9f02-82f137005061' (Nullable = true), @p44='2025-09-25T19:27:57.4296345+00:00' (DbType = DateTime), @p45='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkJBMjc0OTk3Q0YzQjRFMUU2AA==","message_status":"accepted"}]}' (Nullable = false), @p46=NULL (DbType = Decimal), @p47=NULL, @p48='META_CLOUD' (Nullable = false), @p49='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkJBMjc0OTk3Q0YzQjRFMUU2AA=='], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignRecipients" SET "IdempotencyKey" = @p0, "MaterializedAt" = @p1, "ResolvedButtonUrlsJson" = @p2, "ResolvedParametersJson" = @p3, "UpdatedAt" = @p4
WHERE "Id" = @p5;
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35)
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49);
2025-09-26 00:57:57.445 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='d847d881-904d-4039-b748-5dbe5e1f2c3b', @p1='True', @p2=NULL, @p3='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p4=NULL, @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7='c70ac32e-f10a-440e-843e-93552fb776b7', @p8=NULL, @p9=NULL, @p10=NULL (DbType = DateTime), @p11='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p12=NULL, @p13='2025-09-25T19:27:51.2614592Z' (DbType = DateTime), @p14='system', @p15=NULL (DbType = DateTime), @p16=NULL, @p17=NULL, @p18=NULL, @p19=NULL, @p20='False', @p21=NULL (DbType = DateTime), @p22=NULL, @p23=NULL, @p24='Hello
We are sedning HardCode items.' (Nullable = false), @p25='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkJBMjc0OTk3Q0YzQjRFMUU2AA==', @p26='b1ab2b54-77fb-435d-9f02-82f137005061' (Nullable = true), @p27=NULL (DbType = DateTime), @p28='5c61c51a-bb04-478c-8b59-59a2606cc051', @p29='0', @p30='0d9f5ed2-af30-4d1d-8922-d7257999b101' (Nullable = true), @p31='Sent', @p32='2025-09-25T19:27:51.2614592Z' (Nullable = true) (DbType = DateTime), @p33=NULL, @p34='single_variable_body', @p35=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-09-26 00:57:57.448 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 00:57:57.450 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 9050.2199ms
2025-09-26 00:57:57.452 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 00:57:57.453 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/c70ac32e-f10a-440e-843e-93552fb776b7 - 200 null application/json; charset=utf-8 9064.1688ms
2025-09-26 00:58:00.820 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:28:00.8172154+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:58:02.010 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-26 00:58:02.015 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:58:02.017 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 00:58:02.021 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkJBMjc0OTk3Q0YzQjRFMUU2AA==","status":"sent","timestamp":"1758828480","recipient_id":"918974005240","conversation":{"id":"1811ef528912616f44141eb6612a4597","expiration_timestamp":"1758828480","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:58:02.024 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 00:58:02.025 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkJBMjc0OTk3Q0YzQjRFMUU2AA==","status":"sent","timestamp":"1758828480","recipient_id":"918974005240","conversation":{"id":"1811ef528912616f44141eb6612a4597","expiration_timestamp":"1758828480","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:58:02.026 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:58:02.031 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-26 00:58:02.032 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 11.486ms
2025-09-26 00:58:02.037 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:58:02.040 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-26 00:58:02.040 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 30.8575ms
2025-09-26 00:58:02.043 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-26 00:58:02.049 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 00:58:02.055 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkJBMjc0OTk3Q0YzQjRFMUU2AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 00:58:02.061 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__sid_0='d847d881-904d-4039-b748-5dbe5e1f2c3b'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 00:58:02.065 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkJBMjc0OTk3Q0YzQjRFMUU2AA== (legacy)
2025-09-26 00:58:02.684 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-09-26 00:58:02.707 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:58:02.709 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 00:58:02.712 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkJBMjc0OTk3Q0YzQjRFMUU2AA==","status":"delivered","timestamp":"1758828481","recipient_id":"918974005240","conversation":{"id":"1811ef528912616f44141eb6612a4597","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:58:02.714 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 00:58:02.714 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkJBMjc0OTk3Q0YzQjRFMUU2AA==","status":"delivered","timestamp":"1758828481","recipient_id":"918974005240","conversation":{"id":"1811ef528912616f44141eb6612a4597","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:58:02.715 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:58:02.716 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 00:58:02.718 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.3269ms
2025-09-26 00:58:02.724 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:58:02.724 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkJBMjc0OTk3Q0YzQjRFMUU2AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 00:58:02.726 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 41.1903ms
2025-09-26 00:58:02.732 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__sid_0='d847d881-904d-4039-b748-5dbe5e1f2c3b'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 00:58:02.740 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='d847d881-904d-4039-b748-5dbe5e1f2c3b', @p0='2025-09-25T19:28:01.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-26 00:58:02.743 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkJBMjc0OTk3Q0YzQjRFMUU2AA== → Delivered
2025-09-26 00:58:08.169 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-09-26 00:58:08.174 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:58:08.176 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 00:58:08.179 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkJBMjc0OTk3Q0YzQjRFMUU2AA==","status":"read","timestamp":"1758828486","recipient_id":"918974005240","conversation":{"id":"1811ef528912616f44141eb6612a4597","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:58:08.181 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 00:58:08.181 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkJBMjc0OTk3Q0YzQjRFMUU2AA==","status":"read","timestamp":"1758828486","recipient_id":"918974005240","conversation":{"id":"1811ef528912616f44141eb6612a4597","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 00:58:08.182 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 00:58:08.183 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 00:58:08.185 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.9316ms
2025-09-26 00:58:08.189 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkJBMjc0OTk3Q0YzQjRFMUU2AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 00:58:08.190 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 00:58:08.195 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='d847d881-904d-4039-b748-5dbe5e1f2c3b'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 00:58:08.196 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 26.677ms
2025-09-26 00:58:08.201 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='d847d881-904d-4039-b748-5dbe5e1f2c3b', @p0='2025-09-25T19:28:06.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-26 00:58:08.208 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkJBMjc0OTk3Q0YzQjRFMUU2AA== → Read
2025-09-26 00:58:10.829 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:28:10.8272090+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:58:20.847 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:28:20.8440701+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:58:30.865 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:28:30.8624739+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:58:40.875 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:28:40.8728936+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:58:50.887 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:28:50.8846777+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:59:00.899 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T19:29:00.8952525+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:59:10.916 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:29:10.9142382+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:59:20.924 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:29:20.9211754+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:59:30.946 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:29:30.9442979+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:59:40.955 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:29:40.9531911+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 00:59:50.970 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:29:50.9681569+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:00:00.031 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/c70ac32e-f10a-440e-843e-93552fb776b7 - null null
2025-09-26 01:00:00.035 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:00:00.036 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/c70ac32e-f10a-440e-843e-93552fb776b7 - 204 null null 5.2726ms
2025-09-26 01:00:00.042 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/c70ac32e-f10a-440e-843e-93552fb776b7 - null 0
2025-09-26 01:00:00.045 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:00:00.047 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 01:00:00.048 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 01:00:02.415 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T19:30:02.4116111+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:00:02.415 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='c70ac32e-f10a-440e-843e-93552fb776b7'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
ORDER BY c."Id"
LIMIT 1
2025-09-26 01:00:02.428 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='c70ac32e-f10a-440e-843e-93552fb776b7'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."AudienceMemberId", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IdempotencyKey", t0."IsAutoTagged", t0."MaterializedAt", t0."MessagePreview", t0."ProductBrowsed", t0."ResolvedButtonUrlsJson", t0."ResolvedParametersJson", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."ProfileName", t0."ProfileNameUpdatedAt", t0."Tags", t0."Id1", t0."AttributesJson", t0."AudienceId", t0."BusinessId1", t0."ContactId0", t0."CreatedAt0", t0."CreatedByUserId", t0."Email0", t0."IsDeleted", t0."IsTransientContact", t0."Name0", t0."PhoneE164", t0."PhoneRaw", t0."PromotedAt", t0."UpdatedAt0", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN (
    SELECT c0."Id", c0."AudienceMemberId", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IdempotencyKey", c0."IsAutoTagged", c0."MaterializedAt", c0."MessagePreview", c0."ProductBrowsed", c0."ResolvedButtonUrlsJson", c0."ResolvedParametersJson", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."ProfileName", c1."ProfileNameUpdatedAt", c1."Tags", a."Id" AS "Id1", a."AttributesJson", a."AudienceId", a."BusinessId" AS "BusinessId1", a."ContactId" AS "ContactId0", a."CreatedAt" AS "CreatedAt0", a."CreatedByUserId", a."Email" AS "Email0", a."IsDeleted", a."IsTransientContact", a."Name" AS "Name0", a."PhoneE164", a."PhoneRaw", a."PromotedAt", a."UpdatedAt" AS "UpdatedAt0"
    FROM "CampaignRecipients" AS c0
    LEFT JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
    LEFT JOIN "AudienceMembers" AS a ON c0."AudienceMemberId" = a."Id"
) AS t0 ON t."Id" = t0."CampaignId"
ORDER BY t."Id"
2025-09-26 01:00:02.434 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='c70ac32e-f10a-440e-843e-93552fb776b7'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."CampaignId", c0."IsFromTemplate", c0."Position", c0."Title", c0."Type", c0."Value", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN "CampaignButtons" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-26 01:00:02.440 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 01:00:02.443 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:00:02.445 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:00:03.754 +05:30 [INF] Received HTTP response headers after 1306.739ms - 200
2025-09-26 01:00:03.756 +05:30 [INF] End processing HTTP request after 1312.5256ms - 200
2025-09-26 01:00:03.874 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 01:00:03.879 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 01:00:04.858 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 01:00:04.860 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 01:00:05.748 +05:30 [INF] Received HTTP response headers after 886.7261ms - 200
2025-09-26 01:00:05.751 +05:30 [INF] End processing HTTP request after 892.4895ms - 200
2025-09-26 01:00:05.755 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageLogId_0='899dd595-d5a0-456e-9c19-9ec73115639f', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 01:00:05.763 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p2='5c61c51a-bb04-478c-8b59-59a2606cc051', @p0='2025-09-25T19:30:03.8722442Z' (Nullable = true) (DbType = DateTime), @p1='2025-09-25T19:30:03.8722442Z' (DbType = DateTime), @p3='899dd595-d5a0-456e-9c19-9ec73115639f', @p4='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p5=NULL, @p6=NULL (DbType = Guid), @p7=NULL (DbType = Guid), @p8='c70ac32e-f10a-440e-843e-93552fb776b7' (Nullable = true), @p9='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p10=NULL, @p11=NULL, @p12=NULL (DbType = DateTime), @p13='2025-09-25T19:30:03.8722442Z' (DbType = DateTime), @p14=NULL, @p15=NULL (DbType = Int32), @p16=NULL (DbType = Boolean), @p17='False', @p18=NULL, @p19='single_variable_body' (Nullable = false), @p20='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODBFN0U1M0QxRUZBMEFCRDYzAA==', @p21=NULL (DbType = Decimal), @p22=NULL, @p23=NULL, @p24=NULL, @p25='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODBFN0U1M0QxRUZBMEFCRDYzAA==","message_status":"accepted"}]}', @p26='918974005240' (Nullable = false), @p27=NULL (DbType = Guid), @p28=NULL, @p29='6b39a518-6457-4304-a4b9-44c30cfcdeb8' (Nullable = true), @p30='2025-09-25T19:30:03.8722442Z' (Nullable = true) (DbType = DateTime), @p31='campaign', @p32='Sent' (Nullable = false), @p33='72738148-0161-45e6-b2b4-bd5fed57f695', @p34='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p35=NULL, @p36=NULL, @p37='2025-09-25T19:30:05.7583386+00:00' (DbType = DateTime), @p38='send_response' (Nullable = false), @p39=NULL (DbType = Boolean), @p40='899dd595-d5a0-456e-9c19-9ec73115639f' (Nullable = true), @p41='2025-09-25T19:30:05.7583398+00:00' (DbType = DateTime), @p42='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODBFN0U1M0QxRUZBMEFCRDYzAA==","message_status":"accepted"}]}' (Nullable = false), @p43=NULL (DbType = Decimal), @p44=NULL, @p45='META_CLOUD' (Nullable = false), @p46='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODBFN0U1M0QxRUZBMEFCRDYzAA=='], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignRecipients" SET "MaterializedAt" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32)
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46);
2025-09-26 01:00:05.787 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='38325897-3404-41c9-a2f9-471a7433532d', @p1='True', @p2=NULL, @p3='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p4=NULL, @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7='c70ac32e-f10a-440e-843e-93552fb776b7', @p8=NULL, @p9=NULL, @p10=NULL (DbType = DateTime), @p11='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p12=NULL, @p13='2025-09-25T19:30:03.8722442Z' (DbType = DateTime), @p14='system', @p15=NULL (DbType = DateTime), @p16=NULL, @p17=NULL, @p18=NULL, @p19=NULL, @p20='False', @p21=NULL (DbType = DateTime), @p22=NULL, @p23=NULL, @p24='Hello
We are sedning HardCode items.' (Nullable = false), @p25='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODBFN0U1M0QxRUZBMEFCRDYzAA==', @p26='899dd595-d5a0-456e-9c19-9ec73115639f' (Nullable = true), @p27=NULL (DbType = DateTime), @p28='5c61c51a-bb04-478c-8b59-59a2606cc051', @p29='0', @p30='6b39a518-6457-4304-a4b9-44c30cfcdeb8' (Nullable = true), @p31='Sent', @p32='2025-09-25T19:30:03.8722442Z' (Nullable = true) (DbType = DateTime), @p33=NULL, @p34='single_variable_body', @p35=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-09-26 01:00:05.790 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 01:00:05.792 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 5741.4915ms
2025-09-26 01:00:05.794 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 01:00:05.795 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/c70ac32e-f10a-440e-843e-93552fb776b7 - 200 null application/json; charset=utf-8 5753.2259ms
2025-09-26 01:00:12.427 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:30:12.4249605+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:00:13.800 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-26 01:00:13.806 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:00:13.808 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:00:13.816 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODBFN0U1M0QxRUZBMEFCRDYzAA==","status":"sent","timestamp":"1758828612","recipient_id":"918974005240","conversation":{"id":"5c3138dbb0962a80f1445c9e8e6ad12c","expiration_timestamp":"1758828612","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:00:13.820 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:00:13.820 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODBFN0U1M0QxRUZBMEFCRDYzAA==","status":"sent","timestamp":"1758828612","recipient_id":"918974005240","conversation":{"id":"5c3138dbb0962a80f1445c9e8e6ad12c","expiration_timestamp":"1758828612","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:00:13.821 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:00:13.825 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-26 01:00:13.825 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 9.8601ms
2025-09-26 01:00:13.851 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:00:13.852 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 52.2749ms
2025-09-26 01:00:13.849 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-26 01:00:13.868 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-26 01:00:13.871 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:00:13.880 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODBFN0U1M0QxRUZBMEFCRDYzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:00:13.889 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='38325897-3404-41c9-a2f9-471a7433532d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 01:00:13.893 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODBFN0U1M0QxRUZBMEFCRDYzAA== (legacy)
2025-09-26 01:00:14.760 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-09-26 01:00:14.764 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:00:14.766 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:00:14.769 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODBFN0U1M0QxRUZBMEFCRDYzAA==","status":"delivered","timestamp":"1758828613","recipient_id":"918974005240","conversation":{"id":"5c3138dbb0962a80f1445c9e8e6ad12c","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:00:14.771 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:00:14.771 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODBFN0U1M0QxRUZBMEFCRDYzAA==","status":"delivered","timestamp":"1758828613","recipient_id":"918974005240","conversation":{"id":"5c3138dbb0962a80f1445c9e8e6ad12c","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:00:14.772 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:00:14.774 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:00:14.776 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.9154ms
2025-09-26 01:00:14.782 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODBFN0U1M0QxRUZBMEFCRDYzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:00:14.783 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:00:14.789 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='38325897-3404-41c9-a2f9-471a7433532d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 01:00:14.790 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 30.1353ms
2025-09-26 01:00:14.796 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='38325897-3404-41c9-a2f9-471a7433532d', @p0='2025-09-25T19:30:13.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-26 01:00:14.803 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODBFN0U1M0QxRUZBMEFCRDYzAA== → Delivered
2025-09-26 01:00:22.439 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:30:22.4376108+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:00:28.584 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/3ce43915-ccfe-41e5-b495-9f2ec400f373 - null null
2025-09-26 01:00:28.588 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:00:28.589 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/3ce43915-ccfe-41e5-b495-9f2ec400f373 - 204 null null 4.5407ms
2025-09-26 01:00:28.593 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/3ce43915-ccfe-41e5-b495-9f2ec400f373 - null 0
2025-09-26 01:00:28.596 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:00:28.597 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 01:00:28.599 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 01:00:33.283 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='3ce43915-ccfe-41e5-b495-9f2ec400f373'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
ORDER BY c."Id"
LIMIT 1
2025-09-26 01:00:33.284 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T19:30:33.2799800+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:00:33.312 +05:30 [INF] Executed DbCommand (27ms) [Parameters=[@__campaignId_0='3ce43915-ccfe-41e5-b495-9f2ec400f373'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."AudienceMemberId", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IdempotencyKey", t0."IsAutoTagged", t0."MaterializedAt", t0."MessagePreview", t0."ProductBrowsed", t0."ResolvedButtonUrlsJson", t0."ResolvedParametersJson", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."ProfileName", t0."ProfileNameUpdatedAt", t0."Tags", t0."Id1", t0."AttributesJson", t0."AudienceId", t0."BusinessId1", t0."ContactId0", t0."CreatedAt0", t0."CreatedByUserId", t0."Email0", t0."IsDeleted", t0."IsTransientContact", t0."Name0", t0."PhoneE164", t0."PhoneRaw", t0."PromotedAt", t0."UpdatedAt0", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN (
    SELECT c0."Id", c0."AudienceMemberId", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IdempotencyKey", c0."IsAutoTagged", c0."MaterializedAt", c0."MessagePreview", c0."ProductBrowsed", c0."ResolvedButtonUrlsJson", c0."ResolvedParametersJson", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."ProfileName", c1."ProfileNameUpdatedAt", c1."Tags", a."Id" AS "Id1", a."AttributesJson", a."AudienceId", a."BusinessId" AS "BusinessId1", a."ContactId" AS "ContactId0", a."CreatedAt" AS "CreatedAt0", a."CreatedByUserId", a."Email" AS "Email0", a."IsDeleted", a."IsTransientContact", a."Name" AS "Name0", a."PhoneE164", a."PhoneRaw", a."PromotedAt", a."UpdatedAt" AS "UpdatedAt0"
    FROM "CampaignRecipients" AS c0
    LEFT JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
    LEFT JOIN "AudienceMembers" AS a ON c0."AudienceMemberId" = a."Id"
) AS t0 ON t."Id" = t0."CampaignId"
ORDER BY t."Id"
2025-09-26 01:00:33.323 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='3ce43915-ccfe-41e5-b495-9f2ec400f373'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."CampaignId", c0."IsFromTemplate", c0."Position", c0."Title", c0."Type", c0."Value", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN "CampaignButtons" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-26 01:00:33.328 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 01:00:33.332 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:00:33.333 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:00:34.475 +05:30 [INF] Received HTTP response headers after 1139.8821ms - 200
2025-09-26 01:00:34.477 +05:30 [INF] End processing HTTP request after 1145.3319ms - 200
2025-09-26 01:00:34.598 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 01:00:34.603 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 01:00:35.901 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 01:00:35.902 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 01:00:36.727 +05:30 [INF] Received HTTP response headers after 823.4325ms - 200
2025-09-26 01:00:36.729 +05:30 [INF] End processing HTTP request after 828.0206ms - 200
2025-09-26 01:00:40.643 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__messageLogId_0='6189a900-c561-4eb6-8b7e-e3708a5b2dc9', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 01:00:40.651 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p2='e781faed-91cb-452c-aef7-051d30737531', @p0='2025-09-25T19:30:34.5943449Z' (Nullable = true) (DbType = DateTime), @p1='2025-09-25T19:30:34.5943449Z' (DbType = DateTime), @p3='6189a900-c561-4eb6-8b7e-e3708a5b2dc9', @p4='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p5=NULL, @p6=NULL (DbType = Guid), @p7=NULL (DbType = Guid), @p8='3ce43915-ccfe-41e5-b495-9f2ec400f373' (Nullable = true), @p9='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p10=NULL, @p11=NULL, @p12=NULL (DbType = DateTime), @p13='2025-09-25T19:30:34.5943449Z' (DbType = DateTime), @p14=NULL, @p15=NULL (DbType = Int32), @p16=NULL (DbType = Boolean), @p17='False', @p18=NULL, @p19='single_variable_body' (Nullable = false), @p20='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U3NUU4NTUwQkM3Q0ZDREZFAA==', @p21=NULL (DbType = Decimal), @p22=NULL, @p23=NULL, @p24=NULL, @p25='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U3NUU4NTUwQkM3Q0ZDREZFAA==","message_status":"accepted"}]}', @p26='918974005240' (Nullable = false), @p27=NULL (DbType = Guid), @p28=NULL, @p29='6738b4aa-d7f6-4b27-bc5d-15f8af98fa26' (Nullable = true), @p30='2025-09-25T19:30:34.5943449Z' (Nullable = true) (DbType = DateTime), @p31='campaign', @p32='Sent' (Nullable = false), @p33='459c63f7-da07-416f-8a6d-3b824ece25bc', @p34='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p35=NULL, @p36=NULL, @p37='2025-09-25T19:30:40.6471949+00:00' (DbType = DateTime), @p38='send_response' (Nullable = false), @p39=NULL (DbType = Boolean), @p40='6189a900-c561-4eb6-8b7e-e3708a5b2dc9' (Nullable = true), @p41='2025-09-25T19:30:40.6471964+00:00' (DbType = DateTime), @p42='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U3NUU4NTUwQkM3Q0ZDREZFAA==","message_status":"accepted"}]}' (Nullable = false), @p43=NULL (DbType = Decimal), @p44=NULL, @p45='META_CLOUD' (Nullable = false), @p46='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U3NUU4NTUwQkM3Q0ZDREZFAA=='], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignRecipients" SET "MaterializedAt" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32)
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46);
2025-09-26 01:00:40.660 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='fb787b45-e892-41c9-94d0-66b94f415ee2', @p1='True', @p2=NULL, @p3='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p4=NULL, @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7='3ce43915-ccfe-41e5-b495-9f2ec400f373', @p8=NULL, @p9=NULL, @p10=NULL (DbType = DateTime), @p11='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p12=NULL, @p13='2025-09-25T19:30:34.5943449Z' (DbType = DateTime), @p14='system', @p15=NULL (DbType = DateTime), @p16=NULL, @p17=NULL, @p18=NULL, @p19=NULL, @p20='False', @p21=NULL (DbType = DateTime), @p22=NULL, @p23=NULL, @p24='Hello
We are sedning sdfasfs items.' (Nullable = false), @p25='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U3NUU4NTUwQkM3Q0ZDREZFAA==', @p26='6189a900-c561-4eb6-8b7e-e3708a5b2dc9' (Nullable = true), @p27=NULL (DbType = DateTime), @p28='e781faed-91cb-452c-aef7-051d30737531', @p29='0', @p30='6738b4aa-d7f6-4b27-bc5d-15f8af98fa26' (Nullable = true), @p31='Sent', @p32='2025-09-25T19:30:34.5943449Z' (Nullable = true) (DbType = DateTime), @p33=NULL, @p34='single_variable_body', @p35=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-09-26 01:00:42.077 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 01:00:42.079 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 13477.6332ms
2025-09-26 01:00:42.080 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 01:00:42.082 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/3ce43915-ccfe-41e5-b495-9f2ec400f373 - 200 null application/json; charset=utf-8 13489.1841ms
2025-09-26 01:00:43.319 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:30:43.3176827+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:00:44.838 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-26 01:00:44.843 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:00:44.844 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:00:44.847 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U3NUU4NTUwQkM3Q0ZDREZFAA==","status":"sent","timestamp":"1758828643","recipient_id":"918974005240","conversation":{"id":"6b65ba65a57599201c1881a361eb262b","expiration_timestamp":"1758828643","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:00:44.850 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:00:44.850 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U3NUU4NTUwQkM3Q0ZDREZFAA==","status":"sent","timestamp":"1758828643","recipient_id":"918974005240","conversation":{"id":"6b65ba65a57599201c1881a361eb262b","expiration_timestamp":"1758828643","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:00:44.851 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:00:44.852 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:00:44.855 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.6149ms
2025-09-26 01:00:44.860 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U3NUU4NTUwQkM3Q0ZDREZFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:00:44.860 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:00:44.865 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='fb787b45-e892-41c9-94d0-66b94f415ee2'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 01:00:44.865 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 26.9687ms
2025-09-26 01:00:44.868 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U3NUU4NTUwQkM3Q0ZDREZFAA== (legacy)
2025-09-26 01:00:45.353 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f72333b2-1a90-4764-8eea-4f9b70fc08a6 - null null
2025-09-26 01:00:45.356 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:00:45.357 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f72333b2-1a90-4764-8eea-4f9b70fc08a6 - 204 null null 4.6425ms
2025-09-26 01:00:45.361 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f72333b2-1a90-4764-8eea-4f9b70fc08a6 - null 0
2025-09-26 01:00:45.364 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:00:45.366 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 01:00:45.368 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 01:00:51.896 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-09-26 01:00:51.897 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-09-26 01:00:51.909 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@__campaignId_0='f72333b2-1a90-4764-8eea-4f9b70fc08a6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
ORDER BY c."Id"
LIMIT 1
2025-09-26 01:00:51.919 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:00:51.929 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:00:51.922 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:00:51.933 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__campaignId_0='f72333b2-1a90-4764-8eea-4f9b70fc08a6'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."AudienceMemberId", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IdempotencyKey", t0."IsAutoTagged", t0."MaterializedAt", t0."MessagePreview", t0."ProductBrowsed", t0."ResolvedButtonUrlsJson", t0."ResolvedParametersJson", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."ProfileName", t0."ProfileNameUpdatedAt", t0."Tags", t0."Id1", t0."AttributesJson", t0."AudienceId", t0."BusinessId1", t0."ContactId0", t0."CreatedAt0", t0."CreatedByUserId", t0."Email0", t0."IsDeleted", t0."IsTransientContact", t0."Name0", t0."PhoneE164", t0."PhoneRaw", t0."PromotedAt", t0."UpdatedAt0", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN (
    SELECT c0."Id", c0."AudienceMemberId", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IdempotencyKey", c0."IsAutoTagged", c0."MaterializedAt", c0."MessagePreview", c0."ProductBrowsed", c0."ResolvedButtonUrlsJson", c0."ResolvedParametersJson", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."ProfileName", c1."ProfileNameUpdatedAt", c1."Tags", a."Id" AS "Id1", a."AttributesJson", a."AudienceId", a."BusinessId" AS "BusinessId1", a."ContactId" AS "ContactId0", a."CreatedAt" AS "CreatedAt0", a."CreatedByUserId", a."Email" AS "Email0", a."IsDeleted", a."IsTransientContact", a."Name" AS "Name0", a."PhoneE164", a."PhoneRaw", a."PromotedAt", a."UpdatedAt" AS "UpdatedAt0"
    FROM "CampaignRecipients" AS c0
    LEFT JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
    LEFT JOIN "AudienceMembers" AS a ON c0."AudienceMemberId" = a."Id"
) AS t0 ON t."Id" = t0."CampaignId"
ORDER BY t."Id"
2025-09-26 01:00:51.938 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U3NUU4NTUwQkM3Q0ZDREZFAA==","status":"delivered","timestamp":"1758828643","recipient_id":"918974005240","conversation":{"id":"6b65ba65a57599201c1881a361eb262b","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:00:51.939 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:00:51.944 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='f72333b2-1a90-4764-8eea-4f9b70fc08a6'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."CampaignId", c0."IsFromTemplate", c0."Position", c0."Title", c0."Type", c0."Value", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN "CampaignButtons" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-26 01:00:51.945 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:00:51.949 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U3NUU4NTUwQkM3Q0ZDREZFAA==","status":"delivered","timestamp":"1758828644","recipient_id":"918974005240","conversation":{"id":"6b65ba65a57599201c1881a361eb262b","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:00:51.953 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:00:51.945 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U3NUU4NTUwQkM3Q0ZDREZFAA==","status":"delivered","timestamp":"1758828643","recipient_id":"918974005240","conversation":{"id":"6b65ba65a57599201c1881a361eb262b","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:00:51.953 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 01:00:51.955 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:00:51.957 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 19.5839ms
2025-09-26 01:00:51.958 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:00:51.962 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:00:51.963 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:00:51.965 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:00:51.969 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U3NUU4NTUwQkM3Q0ZDREZFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:00:51.970 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:00:51.972 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 23.5439ms
2025-09-26 01:00:51.973 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 76.9732ms
2025-09-26 01:00:51.978 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='fb787b45-e892-41c9-94d0-66b94f415ee2'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 01:00:51.982 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:00:51.992 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='fb787b45-e892-41c9-94d0-66b94f415ee2', @p0='2025-09-25T19:30:43.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-26 01:00:51.992 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 95.7751ms
2025-09-26 01:00:51.996 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U3NUU4NTUwQkM3Q0ZDREZFAA== → Delivered
2025-09-26 01:00:52.003 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U3NUU4NTUwQkM3Q0ZDREZFAA==","status":"delivered","timestamp":"1758828644","recipient_id":"918974005240","conversation":{"id":"6b65ba65a57599201c1881a361eb262b","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:00:52.005 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:00:52.009 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U3NUU4NTUwQkM3Q0ZDREZFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:00:52.015 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='fb787b45-e892-41c9-94d0-66b94f415ee2'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 01:00:52.019 +05:30 [INF] 🔁 Duplicate status 'delivered' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U3NUU4NTUwQkM3Q0ZDREZFAA== (legacy)
2025-09-26 01:00:53.114 +05:30 [INF] Received HTTP response headers after 1134.9994ms - 200
2025-09-26 01:00:53.117 +05:30 [INF] End processing HTTP request after 1155.0733ms - 200
2025-09-26 01:00:53.318 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 01:00:53.322 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 01:00:56.726 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 01:00:56.727 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 01:00:56.733 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__now_0='2025-09-25T19:30:53.3280816+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:00:57.516 +05:30 [INF] Received HTTP response headers after 787.4763ms - 400
2025-09-26 01:00:57.518 +05:30 [INF] End processing HTTP request after 791.3988ms - 400
2025-09-26 01:00:57.519 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"Parameter of type text is missing text value"},"fbtrace_id":"AWj5BlM4vNjaagzQLH2pyM6"}}
2025-09-26 01:01:10.632 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageLogId_0='c85ae4e8-713f-4693-9507-b817f4377e0c', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 01:01:10.632 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:31:10.6289793+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:01:10.639 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p2='204cfa58-4671-413c-ba81-c977f1de489c', @p0='2025-09-25T19:30:53.3142187Z' (Nullable = true) (DbType = DateTime), @p1='2025-09-25T19:30:53.3142187Z' (DbType = DateTime), @p3='c85ae4e8-713f-4693-9507-b817f4377e0c', @p4='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p5=NULL, @p6=NULL (DbType = Guid), @p7=NULL (DbType = Guid), @p8='f72333b2-1a90-4764-8eea-4f9b70fc08a6' (Nullable = true), @p9='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p10=NULL, @p11=NULL, @p12=NULL (DbType = DateTime), @p13='2025-09-25T19:30:53.3142187Z' (DbType = DateTime), @p14='Bad Request', @p15=NULL (DbType = Int32), @p16=NULL (DbType = Boolean), @p17='False', @p18=NULL, @p19='single_variable_body' (Nullable = false), @p20=NULL, @p21=NULL (DbType = Decimal), @p22=NULL, @p23=NULL, @p24=NULL, @p25='{"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"Parameter of type text is missing text value"},"fbtrace_id":"AWj5BlM4vNjaagzQLH2pyM6"}}', @p26='918974005240' (Nullable = false), @p27=NULL (DbType = Guid), @p28=NULL, @p29='139814ed-1a55-4bbc-97c7-21825a90ac80' (Nullable = true), @p30=NULL (DbType = DateTime), @p31='campaign', @p32='Failed' (Nullable = false), @p33='2b6bf9a3-841e-4ea7-9479-eccd3d000fa6', @p34='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p35=NULL, @p36=NULL, @p37='2025-09-25T19:31:10.6348947+00:00' (DbType = DateTime), @p38='send_response' (Nullable = false), @p39=NULL (DbType = Boolean), @p40='c85ae4e8-713f-4693-9507-b817f4377e0c' (Nullable = true), @p41='2025-09-25T19:31:10.6348986+00:00' (DbType = DateTime), @p42='{"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"Parameter of type text is missing text value"},"fbtrace_id":"AWj5BlM4vNjaagzQLH2pyM6"}}' (Nullable = false), @p43=NULL (DbType = Decimal), @p44=NULL, @p45='META_CLOUD' (Nullable = false), @p46=NULL], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignRecipients" SET "MaterializedAt" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32)
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46);
2025-09-26 01:01:10.647 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='9dfc569d-cada-4ad8-b7a8-fd051e103b9d', @p1='True', @p2=NULL, @p3='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p4=NULL, @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7='f72333b2-1a90-4764-8eea-4f9b70fc08a6', @p8=NULL, @p9=NULL, @p10=NULL (DbType = DateTime), @p11='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p12=NULL, @p13='2025-09-25T19:30:53.3142187Z' (DbType = DateTime), @p14='system', @p15=NULL (DbType = DateTime), @p16=NULL, @p17=NULL, @p18='Bad Request', @p19=NULL, @p20='False', @p21=NULL (DbType = DateTime), @p22=NULL, @p23=NULL, @p24='Hello
We are sedning {{1}} items.' (Nullable = false), @p25=NULL, @p26='c85ae4e8-713f-4693-9507-b817f4377e0c' (Nullable = true), @p27=NULL (DbType = DateTime), @p28='204cfa58-4671-413c-ba81-c977f1de489c', @p29='0', @p30='139814ed-1a55-4bbc-97c7-21825a90ac80' (Nullable = true), @p31='Failed', @p32=NULL (DbType = DateTime), @p33=NULL, @p34='single_variable_body', @p35=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-09-26 01:01:10.650 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 01:01:10.652 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 25282.3811ms
2025-09-26 01:01:10.658 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 01:01:10.659 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f72333b2-1a90-4764-8eea-4f9b70fc08a6 - 200 null application/json; charset=utf-8 25297.9428ms
2025-09-26 01:01:13.510 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f72333b2-1a90-4764-8eea-4f9b70fc08a6 - null null
2025-09-26 01:01:13.515 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:01:13.518 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f72333b2-1a90-4764-8eea-4f9b70fc08a6 - 204 null null 7.7802ms
2025-09-26 01:01:13.523 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f72333b2-1a90-4764-8eea-4f9b70fc08a6 - null 0
2025-09-26 01:01:13.526 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:01:13.528 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 01:01:13.529 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 01:01:16.972 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='f72333b2-1a90-4764-8eea-4f9b70fc08a6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
ORDER BY c."Id"
LIMIT 1
2025-09-26 01:01:16.998 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='f72333b2-1a90-4764-8eea-4f9b70fc08a6'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."AudienceMemberId", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IdempotencyKey", t0."IsAutoTagged", t0."MaterializedAt", t0."MessagePreview", t0."ProductBrowsed", t0."ResolvedButtonUrlsJson", t0."ResolvedParametersJson", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."ProfileName", t0."ProfileNameUpdatedAt", t0."Tags", t0."Id1", t0."AttributesJson", t0."AudienceId", t0."BusinessId1", t0."ContactId0", t0."CreatedAt0", t0."CreatedByUserId", t0."Email0", t0."IsDeleted", t0."IsTransientContact", t0."Name0", t0."PhoneE164", t0."PhoneRaw", t0."PromotedAt", t0."UpdatedAt0", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN (
    SELECT c0."Id", c0."AudienceMemberId", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IdempotencyKey", c0."IsAutoTagged", c0."MaterializedAt", c0."MessagePreview", c0."ProductBrowsed", c0."ResolvedButtonUrlsJson", c0."ResolvedParametersJson", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."ProfileName", c1."ProfileNameUpdatedAt", c1."Tags", a."Id" AS "Id1", a."AttributesJson", a."AudienceId", a."BusinessId" AS "BusinessId1", a."ContactId" AS "ContactId0", a."CreatedAt" AS "CreatedAt0", a."CreatedByUserId", a."Email" AS "Email0", a."IsDeleted", a."IsTransientContact", a."Name" AS "Name0", a."PhoneE164", a."PhoneRaw", a."PromotedAt", a."UpdatedAt" AS "UpdatedAt0"
    FROM "CampaignRecipients" AS c0
    LEFT JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
    LEFT JOIN "AudienceMembers" AS a ON c0."AudienceMemberId" = a."Id"
) AS t0 ON t."Id" = t0."CampaignId"
ORDER BY t."Id"
2025-09-26 01:01:17.003 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__campaignId_0='f72333b2-1a90-4764-8eea-4f9b70fc08a6'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."CampaignId", c0."IsFromTemplate", c0."Position", c0."Title", c0."Type", c0."Value", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN "CampaignButtons" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-26 01:01:17.008 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 01:01:17.011 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:01:17.012 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:01:17.894 +05:30 [INF] Received HTTP response headers after 880.1214ms - 200
2025-09-26 01:01:17.896 +05:30 [INF] End processing HTTP request after 884.8284ms - 200
2025-09-26 01:01:18.005 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 01:01:18.014 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 01:01:19.266 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 01:01:19.268 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 01:01:19.847 +05:30 [INF] Received HTTP response headers after 577.5384ms - 400
2025-09-26 01:01:19.849 +05:30 [INF] End processing HTTP request after 583.3739ms - 400
2025-09-26 01:01:19.851 +05:30 [WRN] MetaCloud send failed (HTTP 400): {"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"Parameter of type text is missing text value"},"fbtrace_id":"ARhzBfy3aDD2k7uIOT8xldC"}}
2025-09-26 01:01:23.634 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T19:31:23.6312455+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:01:23.634 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageLogId_0='81222ff7-5acc-4249-9000-8f8b714b29a6', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 01:01:23.643 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='204cfa58-4671-413c-ba81-c977f1de489c', @p0='2025-09-25T19:31:18.0034747Z' (Nullable = true) (DbType = DateTime), @p1='2025-09-25T19:31:18.0034747Z' (DbType = DateTime), @p3='81222ff7-5acc-4249-9000-8f8b714b29a6', @p4='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p5=NULL, @p6=NULL (DbType = Guid), @p7=NULL (DbType = Guid), @p8='f72333b2-1a90-4764-8eea-4f9b70fc08a6' (Nullable = true), @p9='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p10=NULL, @p11=NULL, @p12=NULL (DbType = DateTime), @p13='2025-09-25T19:31:18.0034747Z' (DbType = DateTime), @p14='Bad Request', @p15=NULL (DbType = Int32), @p16=NULL (DbType = Boolean), @p17='False', @p18=NULL, @p19='single_variable_body' (Nullable = false), @p20=NULL, @p21=NULL (DbType = Decimal), @p22=NULL, @p23=NULL, @p24=NULL, @p25='{"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"Parameter of type text is missing text value"},"fbtrace_id":"ARhzBfy3aDD2k7uIOT8xldC"}}', @p26='918974005240' (Nullable = false), @p27=NULL (DbType = Guid), @p28=NULL, @p29='0596d411-06c2-4f7b-815c-72b498283b0e' (Nullable = true), @p30=NULL (DbType = DateTime), @p31='campaign', @p32='Failed' (Nullable = false), @p33='76ea3cc5-1089-436a-9214-922e4e226b49', @p34='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p35=NULL, @p36=NULL, @p37='2025-09-25T19:31:23.6405196+00:00' (DbType = DateTime), @p38='send_response' (Nullable = false), @p39=NULL (DbType = Boolean), @p40='81222ff7-5acc-4249-9000-8f8b714b29a6' (Nullable = true), @p41='2025-09-25T19:31:23.6405222+00:00' (DbType = DateTime), @p42='{"error":{"message":"(#131008) Required parameter is missing","type":"OAuthException","code":131008,"error_data":{"messaging_product":"whatsapp","details":"Parameter of type text is missing text value"},"fbtrace_id":"ARhzBfy3aDD2k7uIOT8xldC"}}' (Nullable = false), @p43=NULL (DbType = Decimal), @p44=NULL, @p45='META_CLOUD' (Nullable = false), @p46=NULL], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignRecipients" SET "MaterializedAt" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32)
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46);
2025-09-26 01:01:23.650 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='5848a734-eb83-4a87-a510-7b2787bc7c16', @p1='True', @p2=NULL, @p3='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p4=NULL, @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7='f72333b2-1a90-4764-8eea-4f9b70fc08a6', @p8=NULL, @p9=NULL, @p10=NULL (DbType = DateTime), @p11='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p12=NULL, @p13='2025-09-25T19:31:18.0034747Z' (DbType = DateTime), @p14='system', @p15=NULL (DbType = DateTime), @p16=NULL, @p17=NULL, @p18='Bad Request', @p19=NULL, @p20='False', @p21=NULL (DbType = DateTime), @p22=NULL, @p23=NULL, @p24='Hello
We are sedning {{1}} items.' (Nullable = false), @p25=NULL, @p26='81222ff7-5acc-4249-9000-8f8b714b29a6' (Nullable = true), @p27=NULL (DbType = DateTime), @p28='204cfa58-4671-413c-ba81-c977f1de489c', @p29='0', @p30='0596d411-06c2-4f7b-815c-72b498283b0e' (Nullable = true), @p31='Failed', @p32=NULL (DbType = DateTime), @p33=NULL, @p34='single_variable_body', @p35=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-09-26 01:01:23.653 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 01:01:23.655 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 10122.3083ms
2025-09-26 01:01:23.656 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 01:01:23.658 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f72333b2-1a90-4764-8eea-4f9b70fc08a6 - 200 null application/json; charset=utf-8 10134.7355ms
2025-09-26 01:01:33.645 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T19:31:33.6418212+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:01:43.658 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:31:43.6560154+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:01:53.671 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:31:53.6695171+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:02:03.688 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:32:03.6855939+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:02:13.796 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T19:32:13.6940726+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:02:23.805 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:32:23.8032262+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:02:33.809 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:32:33.8071727+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:02:43.824 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:32:43.8222567+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:02:53.836 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:32:53.8343140+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:03:03.845 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:33:03.8431476+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:03:13.859 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:33:13.8569608+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:03:23.866 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:33:23.8634014+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:03:33.872 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:33:33.8691836+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:03:43.892 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:33:43.8897387+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:03:53.899 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:33:53.8968009+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:04:03.913 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:34:03.9102764+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:04:13.920 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:34:13.9174997+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:04:23.932 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:34:23.9291529+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:04:33.942 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:34:33.9400551+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:04:43.942 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:34:43.9403667+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:04:53.958 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:34:53.9553808+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:05:03.975 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__now_0='2025-09-25T19:35:03.9711667+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:05:13.986 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:35:13.9840073+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:05:23.994 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:35:23.9922018+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:05:34.000 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:35:33.9979612+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:05:44.015 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:35:44.0118874+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:05:54.020 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:35:54.0177474+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:06:04.026 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:36:04.0242221+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:06:14.042 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:36:14.0404468+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:06:24.048 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:36:24.0460509+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:06:34.061 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:36:34.0584134+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:06:44.076 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:36:44.0741551+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:06:54.086 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:36:54.0843157+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:07:04.092 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:37:04.0904840+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:07:14.221 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T19:37:14.0941158+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:07:24.240 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:37:24.2383709+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:07:34.253 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:37:34.2512748+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:07:44.264 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:37:44.2620111+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:07:54.273 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:37:54.2703305+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:08:04.281 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:38:04.2784795+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:08:14.291 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:38:14.2880260+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:08:24.302 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:38:24.2997131+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:08:34.316 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:38:34.3139170+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:08:44.332 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:38:44.3291725+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:08:54.348 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:38:54.3446891+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:09:04.358 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:39:04.3562724+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:09:14.366 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:39:14.3637230+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:09:24.376 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:39:24.3746235+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:09:34.380 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:39:34.3784009+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:09:44.390 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:39:44.3873631+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:09:54.401 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:39:54.3995295+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:10:04.413 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:40:04.4115405+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:10:14.423 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:40:14.4211980+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:10:24.437 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:40:24.4357130+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:10:34.449 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:40:34.4473327+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:10:44.467 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:40:44.4655283+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:10:54.470 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:40:54.4670445+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:11:04.484 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:41:04.4823337+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:11:14.493 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:41:14.4911436+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:11:24.515 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:41:24.4929232+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:11:34.520 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:41:34.5180328+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:11:44.544 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:41:44.5423246+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:11:54.546 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:41:54.5435817+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:12:04.564 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:42:04.5624641+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:12:14.663 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T19:42:14.5655956+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:12:24.701 +05:30 [INF] Executed DbCommand (24ms) [Parameters=[@__now_0='2025-09-25T19:42:24.6762887+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:12:34.722 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:42:34.7186472+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:12:44.738 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:42:44.7359842+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:12:54.768 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:42:54.7662882+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:13:04.776 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:43:04.7734867+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:13:14.790 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:43:14.7878017+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:13:24.797 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:43:24.7951203+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:13:34.810 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:43:34.8044355+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:13:44.832 +05:30 [INF] Executed DbCommand (15ms) [Parameters=[@__now_0='2025-09-25T19:43:44.8164828+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:13:54.839 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:43:54.8363618+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:14:04.853 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:44:04.8512202+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:14:14.865 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:44:14.8629763+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:14:24.883 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:44:24.8810132+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:14:34.900 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:44:34.8977421+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:14:44.917 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:44:44.9146929+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:14:54.926 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:44:54.9242782+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:15:04.935 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:45:04.9330997+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:15:14.944 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:45:14.9416852+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:15:24.946 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:45:24.9441096+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:15:34.959 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:45:34.9580261+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:15:44.970 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:45:44.9673623+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:15:54.983 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:45:54.9804210+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:16:05.000 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:46:04.9979273+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:16:15.017 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:46:15.0137427+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:16:25.029 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:46:25.0277871+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:16:35.042 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:46:35.0398900+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:16:45.049 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:46:45.0473308+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:16:55.060 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:46:55.0582702+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:17:05.073 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:47:05.0716373+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:17:15.177 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__now_0='2025-09-25T19:47:15.0797186+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:17:25.189 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:47:25.1865410+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:17:35.196 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:47:35.1935894+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:17:45.201 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:47:45.1985622+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:17:55.218 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:47:55.2169181+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:18:05.235 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:48:05.2339822+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:18:15.249 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:48:15.2466034+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:18:25.252 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:48:25.2498953+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:18:35.268 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:48:35.2660684+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:18:45.281 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:48:45.2788056+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:18:55.287 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:48:55.2851248+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:19:05.306 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:49:05.3038250+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:19:15.333 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:49:15.3306175+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:19:25.343 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:49:25.3410932+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:19:32.266 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-09-26 01:19:32.266 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-09-26 01:19:32.270 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:19:32.274 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:19:32.275 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:19:32.277 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:19:32.280 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U3NUU4NTUwQkM3Q0ZDREZFAA==","status":"read","timestamp":"1758829770","recipient_id":"918974005240","conversation":{"id":"6b65ba65a57599201c1881a361eb262b","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:19:32.282 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODBFN0U1M0QxRUZBMEFCRDYzAA==","status":"read","timestamp":"1758829770","recipient_id":"918974005240","conversation":{"id":"5c3138dbb0962a80f1445c9e8e6ad12c","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:19:32.284 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:19:32.285 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U3NUU4NTUwQkM3Q0ZDREZFAA==","status":"read","timestamp":"1758829770","recipient_id":"918974005240","conversation":{"id":"6b65ba65a57599201c1881a361eb262b","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:19:32.286 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:19:32.287 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:19:32.290 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:19:32.298 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 18.4482ms
2025-09-26 01:19:32.293 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-26 01:19:32.307 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 24.997ms
2025-09-26 01:19:32.308 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:19:32.314 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:19:32.314 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-26 01:19:32.316 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 49.394ms
2025-09-26 01:19:32.318 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 51.1243ms
2025-09-26 01:19:32.321 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-26 01:19:32.333 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:19:32.339 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U3NUU4NTUwQkM3Q0ZDREZFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:19:32.344 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__sid_0='fb787b45-e892-41c9-94d0-66b94f415ee2'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 01:19:32.349 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='fb787b45-e892-41c9-94d0-66b94f415ee2', @p0='2025-09-25T19:49:30.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-26 01:19:32.352 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0U3NUU4NTUwQkM3Q0ZDREZFAA== → Read
2025-09-26 01:19:32.354 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODBFN0U1M0QxRUZBMEFCRDYzAA==","status":"read","timestamp":"1758829770","recipient_id":"918974005240","conversation":{"id":"5c3138dbb0962a80f1445c9e8e6ad12c","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:19:32.356 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:19:32.362 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODBFN0U1M0QxRUZBMEFCRDYzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:19:32.371 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__sid_0='38325897-3404-41c9-a2f9-471a7433532d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 01:19:32.376 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='38325897-3404-41c9-a2f9-471a7433532d', @p0='2025-09-25T19:49:30.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-26 01:19:32.381 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODBFN0U1M0QxRUZBMEFCRDYzAA== → Read
2025-09-26 01:19:35.356 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:49:35.3539912+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:19:45.368 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:49:45.3659021+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:19:55.377 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:49:55.3752931+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:20:05.399 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:50:05.3964858+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:20:15.416 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T19:50:15.4129782+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:20:25.433 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:50:25.4304619+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:20:35.445 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:50:35.4427445+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:20:45.454 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:50:45.4523020+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:20:55.475 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:50:55.4720174+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:21:05.480 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:51:05.4780020+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:21:15.504 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:51:15.5022369+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:21:25.525 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:51:25.5222119+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:21:35.541 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:51:35.5401667+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:21:45.556 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:51:45.5543069+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:21:55.569 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:51:55.5668775+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:22:05.594 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:52:05.5921325+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:23:32.014 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-26 01:23:32.097 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-26 01:23:32.146 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-26 01:23:34.007 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-26 01:23:35.261 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-26 01:23:35.287 +05:30 [INF] ClickLogWorker started
2025-09-26 01:23:35.778 +05:30 [INF] Executed DbCommand (103ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-26 01:23:35.781 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-26 01:23:35.788 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-26 01:23:35.792 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-26 01:23:35.794 +05:30 [INF] Hosting environment: Development
2025-09-26 01:23:35.797 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-26 01:23:35.818 +05:30 [INF] Executed DbCommand (148ms) [Parameters=[@__cutoff_0='2025-09-18T19:53:32.3971232Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-26 01:23:36.224 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-26 01:23:36.387 +05:30 [INF] ClickLogWorker stopped
2025-09-26 01:23:36.592 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 379.6126ms
2025-09-26 01:23:36.852 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-26 01:23:36.852 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-26 01:23:36.873 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 20.6566ms
2025-09-26 01:23:36.928 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 75.953ms
2025-09-26 01:23:37.192 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-26 01:23:37.665 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 473.5056ms
2025-09-26 01:23:40.460 +05:30 [INF] Executed DbCommand (32ms) [Parameters=[@__now_0='2025-09-25T19:53:40.3047060+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:23:41.031 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/c70ac32e-f10a-440e-843e-93552fb776b7 - null null
2025-09-26 01:23:41.042 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-26 01:23:41.111 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:23:41.119 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/c70ac32e-f10a-440e-843e-93552fb776b7 - 204 null null 88.0076ms
2025-09-26 01:23:41.127 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/c70ac32e-f10a-440e-843e-93552fb776b7 - null 0
2025-09-26 01:23:41.149 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:23:41.437 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 01:23:41.477 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 01:23:44.391 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__campaignId_0='c70ac32e-f10a-440e-843e-93552fb776b7'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
ORDER BY c."Id"
LIMIT 1
2025-09-26 01:23:44.534 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@__campaignId_0='c70ac32e-f10a-440e-843e-93552fb776b7'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."AudienceMemberId", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IdempotencyKey", t0."IsAutoTagged", t0."MaterializedAt", t0."MessagePreview", t0."ProductBrowsed", t0."ResolvedButtonUrlsJson", t0."ResolvedParametersJson", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."ProfileName", t0."ProfileNameUpdatedAt", t0."Tags", t0."Id1", t0."AttributesJson", t0."AudienceId", t0."BusinessId1", t0."ContactId0", t0."CreatedAt0", t0."CreatedByUserId", t0."Email0", t0."IsDeleted", t0."IsTransientContact", t0."Name0", t0."PhoneE164", t0."PhoneRaw", t0."PromotedAt", t0."UpdatedAt0", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN (
    SELECT c0."Id", c0."AudienceMemberId", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IdempotencyKey", c0."IsAutoTagged", c0."MaterializedAt", c0."MessagePreview", c0."ProductBrowsed", c0."ResolvedButtonUrlsJson", c0."ResolvedParametersJson", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."ProfileName", c1."ProfileNameUpdatedAt", c1."Tags", a."Id" AS "Id1", a."AttributesJson", a."AudienceId", a."BusinessId" AS "BusinessId1", a."ContactId" AS "ContactId0", a."CreatedAt" AS "CreatedAt0", a."CreatedByUserId", a."Email" AS "Email0", a."IsDeleted", a."IsTransientContact", a."Name" AS "Name0", a."PhoneE164", a."PhoneRaw", a."PromotedAt", a."UpdatedAt" AS "UpdatedAt0"
    FROM "CampaignRecipients" AS c0
    LEFT JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
    LEFT JOIN "AudienceMembers" AS a ON c0."AudienceMemberId" = a."Id"
) AS t0 ON t."Id" = t0."CampaignId"
ORDER BY t."Id"
2025-09-26 01:23:44.556 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='c70ac32e-f10a-440e-843e-93552fb776b7'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."CampaignId", c0."IsFromTemplate", c0."Position", c0."Title", c0."Type", c0."Value", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN "CampaignButtons" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-26 01:23:44.657 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 01:23:44.800 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:23:44.806 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:23:45.338 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT w."BusinessId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-09-26 01:23:45.375 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='86130882-681e-4d06-91b7-0f24be98783e'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-26 01:23:45.405 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='86130882-681e-4d06-91b7-0f24be98783e'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-09-26 01:23:45.433 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 01:23:45.436 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 01:23:46.192 +05:30 [INF] Received HTTP response headers after 747.4108ms - 401
2025-09-26 01:23:46.192 +05:30 [INF] Received HTTP response headers after 1371.4677ms - 200
2025-09-26 01:23:46.197 +05:30 [INF] End processing HTTP request after 763.2229ms - 401
2025-09-26 01:23:46.197 +05:30 [INF] End processing HTTP request after 1402.1789ms - 200
2025-09-26 01:23:46.222 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='86130882-681e-4d06-91b7-0f24be98783e', @__providerKey_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__providerKey_1
2025-09-26 01:23:46.273 +05:30 [INF] TemplateSyncWorker: biz="86130882-681e-4d06-91b7-0f24be98783e" added=0 updated=0 skipped=0 syncedAt="2025-09-25T19:53:45.3823172Z"
2025-09-26 01:23:46.291 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-26 01:23:46.300 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-09-26 01:23:46.306 +05:30 [INF] ⏭️ Skipping sync for "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56"; TTL not expired.
2025-09-26 01:23:46.317 +05:30 [INF] TemplateSyncWorker: biz="6b5cea67-e8e9-42f7-8bde-51a9dbc02d56" added=0 updated=0 skipped=0 syncedAt="2025-09-25T14:33:43.6316470Z"
2025-09-26 01:23:46.330 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='3142ac6b-39e5-4056-ae1b-ad853850e082'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-26 01:23:46.340 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='3142ac6b-39e5-4056-ae1b-ad853850e082'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-09-26 01:23:46.344 +05:30 [INF] ⏭️ Skipping sync for "3142ac6b-39e5-4056-ae1b-ad853850e082"; TTL not expired.
2025-09-26 01:23:46.346 +05:30 [INF] TemplateSyncWorker: biz="3142ac6b-39e5-4056-ae1b-ad853850e082" added=0 updated=0 skipped=0 syncedAt="2025-09-25T14:01:30.0885880Z"
2025-09-26 01:23:46.351 +05:30 [INF] TemplateSyncWorker: sweep finished in 1052 ms; processed=3; next run ~"2025-09-26T01:53:45.2991546Z"
2025-09-26 01:23:46.932 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 01:23:46.950 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 01:23:50.484 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T19:53:50.4786302+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:23:50.508 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 01:23:50.512 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 01:23:52.145 +05:30 [INF] Received HTTP response headers after 1629.9884ms - 200
2025-09-26 01:23:52.148 +05:30 [INF] End processing HTTP request after 1640.0938ms - 200
2025-09-26 01:23:56.498 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__messageLogId_0='8c179ccc-61b1-4fd4-911d-64126164cd2c', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 01:23:56.900 +05:30 [INF] Executed DbCommand (24ms) [Parameters=[@p2='5c61c51a-bb04-478c-8b59-59a2606cc051', @p0='2025-09-25T19:53:46.5401779Z' (Nullable = true) (DbType = DateTime), @p1='2025-09-25T19:53:46.5401779Z' (DbType = DateTime), @p3='8c179ccc-61b1-4fd4-911d-64126164cd2c', @p4='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p5=NULL, @p6=NULL (DbType = Guid), @p7=NULL (DbType = Guid), @p8='c70ac32e-f10a-440e-843e-93552fb776b7' (Nullable = true), @p9='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p10=NULL, @p11=NULL, @p12=NULL (DbType = DateTime), @p13='2025-09-25T19:53:46.5401779Z' (DbType = DateTime), @p14=NULL, @p15=NULL (DbType = Int32), @p16=NULL (DbType = Boolean), @p17='False', @p18=NULL, @p19='single_variable_body' (Nullable = false), @p20='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODQ2RTRCNTM0NUNBODhENzA2AA==', @p21=NULL (DbType = Decimal), @p22=NULL, @p23=NULL, @p24=NULL, @p25='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODQ2RTRCNTM0NUNBODhENzA2AA==","message_status":"accepted"}]}', @p26='918974005240' (Nullable = false), @p27=NULL (DbType = Guid), @p28=NULL, @p29='fef775b5-c57a-4f8f-8707-925ff24897ff' (Nullable = true), @p30='2025-09-25T19:53:46.5401779Z' (Nullable = true) (DbType = DateTime), @p31='campaign', @p32='Sent' (Nullable = false), @p33='1dcb010e-a3b6-45f9-8075-f9c364772cd0', @p34='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p35=NULL, @p36=NULL, @p37='2025-09-25T19:53:56.5070213+00:00' (DbType = DateTime), @p38='send_response' (Nullable = false), @p39=NULL (DbType = Boolean), @p40='8c179ccc-61b1-4fd4-911d-64126164cd2c' (Nullable = true), @p41='2025-09-25T19:53:56.5079882+00:00' (DbType = DateTime), @p42='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODQ2RTRCNTM0NUNBODhENzA2AA==","message_status":"accepted"}]}' (Nullable = false), @p43=NULL (DbType = Decimal), @p44=NULL, @p45='META_CLOUD' (Nullable = false), @p46='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODQ2RTRCNTM0NUNBODhENzA2AA=='], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignRecipients" SET "MaterializedAt" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32)
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46);
2025-09-26 01:23:57.125 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p0='00456dae-3a1f-4ebe-b634-102b31f53802', @p1='True', @p2=NULL, @p3='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p4=NULL, @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7='c70ac32e-f10a-440e-843e-93552fb776b7', @p8=NULL, @p9=NULL, @p10=NULL (DbType = DateTime), @p11='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p12=NULL, @p13='2025-09-25T19:53:46.5401779Z' (DbType = DateTime), @p14='system', @p15=NULL (DbType = DateTime), @p16=NULL, @p17=NULL, @p18=NULL, @p19=NULL, @p20='False', @p21=NULL (DbType = DateTime), @p22=NULL, @p23=NULL, @p24='Hello
We are sedning HardCode items.' (Nullable = false), @p25='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODQ2RTRCNTM0NUNBODhENzA2AA==', @p26='8c179ccc-61b1-4fd4-911d-64126164cd2c' (Nullable = true), @p27=NULL (DbType = DateTime), @p28='5c61c51a-bb04-478c-8b59-59a2606cc051', @p29='0', @p30='fef775b5-c57a-4f8f-8707-925ff24897ff' (Nullable = true), @p31='Sent', @p32='2025-09-25T19:53:46.5401779Z' (Nullable = true) (DbType = DateTime), @p33=NULL, @p34='single_variable_body', @p35=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-09-26 01:23:59.296 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 01:23:59.339 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 17851.2672ms
2025-09-26 01:23:59.343 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 01:23:59.352 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/c70ac32e-f10a-440e-843e-93552fb776b7 - 200 null application/json; charset=utf-8 18225.4452ms
2025-09-26 01:24:00.512 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T19:54:00.5068738+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:24:00.552 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-26 01:24:00.566 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:24:00.574 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:24:00.604 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODQ2RTRCNTM0NUNBODhENzA2AA==","status":"sent","timestamp":"1758830039","recipient_id":"918974005240","conversation":{"id":"4e3a05a6b2d57779da53aa1403398eb8","expiration_timestamp":"1758830039","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:24:00.611 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:24:00.615 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:24:00.625 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 47.6136ms
2025-09-26 01:24:00.628 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:24:00.630 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 77.8428ms
2025-09-26 01:24:00.878 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODQ2RTRCNTM0NUNBODhENzA2AA==","status":"sent","timestamp":"1758830039","recipient_id":"918974005240","conversation":{"id":"4e3a05a6b2d57779da53aa1403398eb8","expiration_timestamp":"1758830039","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:24:00.923 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-26 01:24:00.933 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-26 01:24:00.937 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-26 01:24:00.942 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:24:00.968 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODQ2RTRCNTM0NUNBODhENzA2AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:24:00.991 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__sid_0='00456dae-3a1f-4ebe-b634-102b31f53802'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 01:24:00.997 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODQ2RTRCNTM0NUNBODhENzA2AA== (legacy)
2025-09-26 01:24:01.763 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-09-26 01:24:01.766 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-09-26 01:24:01.775 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:24:01.775 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:24:01.777 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:24:01.779 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:24:01.783 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODQ2RTRCNTM0NUNBODhENzA2AA==","status":"delivered","timestamp":"1758830039","recipient_id":"918974005240","conversation":{"id":"4e3a05a6b2d57779da53aa1403398eb8","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:24:01.788 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODQ2RTRCNTM0NUNBODhENzA2AA==","status":"delivered","timestamp":"1758830040","recipient_id":"918974005240","conversation":{"id":"4e3a05a6b2d57779da53aa1403398eb8","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:24:01.788 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:24:01.791 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:24:01.792 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:24:01.792 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODQ2RTRCNTM0NUNBODhENzA2AA==","status":"delivered","timestamp":"1758830039","recipient_id":"918974005240","conversation":{"id":"4e3a05a6b2d57779da53aa1403398eb8","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:24:01.793 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:24:01.796 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 14.708ms
2025-09-26 01:24:01.799 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:24:01.801 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 16.1263ms
2025-09-26 01:24:01.804 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:24:01.810 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:24:01.811 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODQ2RTRCNTM0NUNBODhENzA2AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:24:01.813 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 49.3197ms
2025-09-26 01:24:01.815 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 48.7829ms
2025-09-26 01:24:01.822 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='00456dae-3a1f-4ebe-b634-102b31f53802'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 01:24:01.844 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p2='00456dae-3a1f-4ebe-b634-102b31f53802', @p0='2025-09-25T19:53:59.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-26 01:24:01.849 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODQ2RTRCNTM0NUNBODhENzA2AA== → Delivered
2025-09-26 01:24:01.867 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODQ2RTRCNTM0NUNBODhENzA2AA==","status":"delivered","timestamp":"1758830040","recipient_id":"918974005240","conversation":{"id":"4e3a05a6b2d57779da53aa1403398eb8","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:24:01.869 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:24:01.875 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODQ2RTRCNTM0NUNBODhENzA2AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:24:01.883 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='00456dae-3a1f-4ebe-b634-102b31f53802'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 01:24:01.889 +05:30 [INF] 🔁 Duplicate status 'delivered' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODQ2RTRCNTM0NUNBODhENzA2AA== (legacy)
2025-09-26 01:24:08.244 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-09-26 01:24:08.250 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:24:08.253 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:24:08.258 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODQ2RTRCNTM0NUNBODhENzA2AA==","status":"read","timestamp":"1758830046","recipient_id":"918974005240","conversation":{"id":"4e3a05a6b2d57779da53aa1403398eb8","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:24:08.261 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:24:08.261 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODQ2RTRCNTM0NUNBODhENzA2AA==","status":"read","timestamp":"1758830046","recipient_id":"918974005240","conversation":{"id":"4e3a05a6b2d57779da53aa1403398eb8","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:24:08.265 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:24:08.263 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:24:08.272 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODQ2RTRCNTM0NUNBODhENzA2AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:24:08.272 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 15.7217ms
2025-09-26 01:24:08.283 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='00456dae-3a1f-4ebe-b634-102b31f53802'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 01:24:08.284 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:24:08.290 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 46.0105ms
2025-09-26 01:24:08.293 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p2='00456dae-3a1f-4ebe-b634-102b31f53802', @p0='2025-09-25T19:54:06.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-26 01:24:08.302 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSODQ2RTRCNTM0NUNBODhENzA2AA== → Read
2025-09-26 01:24:10.529 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T19:54:10.5247564+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:24:20.543 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:54:20.5393389+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:24:30.562 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:54:30.5575715+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:24:40.570 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:54:40.5666245+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:24:50.581 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:54:50.5779716+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:24:51.894 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 01:24:51.900 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:24:51.903 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 8.5898ms
2025-09-26 01:24:51.916 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 01:24:51.922 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:24:51.925 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 01:24:51.934 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 01:24:52.014 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-09-26 01:24:52.021 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 01:24:52.048 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 110.0422ms
2025-09-26 01:24:52.051 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 01:24:52.054 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 138.2951ms
2025-09-26 01:24:53.714 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-26 01:24:53.722 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:24:53.732 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/c70ac32e-f10a-440e-843e-93552fb776b7 - null null
2025-09-26 01:24:53.733 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 18.6553ms
2025-09-26 01:24:53.748 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-26 01:24:53.738 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-26 01:24:53.726 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/csv-sample/schema - null null
2025-09-26 01:24:53.764 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:24:53.769 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-26 01:24:53.785 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/c70ac32e-f10a-440e-843e-93552fb776b7 - 204 null null 53.0424ms
2025-09-26 01:24:53.774 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:24:53.780 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:24:53.784 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:24:53.802 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:24:53.806 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/c70ac32e-f10a-440e-843e-93552fb776b7 - null null
2025-09-26 01:24:53.808 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 62.187ms
2025-09-26 01:24:53.809 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 71.7194ms
2025-09-26 01:24:53.814 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 01:24:53.817 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:24:53.811 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/csv-sample/schema - 204 null null 85.491ms
2025-09-26 01:24:53.828 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-26 01:24:53.832 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-26 01:24:53.835 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-26 01:24:53.837 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/csv-sample/schema - null null
2025-09-26 01:24:53.841 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:24:53.849 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 01:24:53.855 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:24:53.862 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-26 01:24:53.864 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-26 01:24:53.874 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 01:24:53.875 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-26 01:24:53.876 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 01:24:53.881 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 33.6601ms
2025-09-26 01:24:53.882 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-26 01:24:53.887 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 01:24:53.889 +05:30 [INF] GetPagedContactsAsync: businessId="6b5cea67-e8e9-42f7-8bde-51a9dbc02d56", tab=all, page=1, pageSize=1000
2025-09-26 01:24:53.889 +05:30 [INF] Route matched with {action = "GetSchema", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSchema(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 01:24:53.892 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:24:53.894 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 124.4188ms
2025-09-26 01:24:53.903 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 01:24:53.910 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-26 01:24:53.911 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-26 01:24:53.925 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-26 01:24:53.936 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 01:24:53.943 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 27.2521ms
2025-09-26 01:24:53.949 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 01:24:53.952 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 69.6091ms
2025-09-26 01:24:53.958 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='c70ac32e-f10a-440e-843e-93552fb776b7', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AudienceId", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."DocumentUrl", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."TemplateSchemaSnapshot", t."UpdatedAt", t."VideoUrl", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", t."Id1", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value", t."BusinessId1", t."CreatedAt1", t."CreatedBy0", t."FlowName", t."IsActive0", t."IsPublished", t."UpdatedAt1"
FROM (
    SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0", c1."Id" AS "Id1", c1."BusinessId" AS "BusinessId1", c1."CreatedAt" AS "CreatedAt1", c1."CreatedBy" AS "CreatedBy0", c1."FlowName", c1."IsActive" AS "IsActive0", c1."IsPublished", c1."UpdatedAt" AS "UpdatedAt1"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    LEFT JOIN "CTAFlowConfigs" AS c1 ON c."CTAFlowConfigId" = c1."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t."Id0", t."Id1"
2025-09-26 01:24:53.985 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."ProfileName", t."ProfileNameUpdatedAt", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-26 01:24:53.991 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-09-26 01:24:53.997 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 01:24:54.002 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 144.0297ms
2025-09-26 01:24:54.006 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-26 01:24:54.008 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/c70ac32e-f10a-440e-843e-93552fb776b7 - 200 null application/json; charset=utf-8 201.7898ms
2025-09-26 01:24:54.012 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 130.0609ms
2025-09-26 01:24:54.018 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-26 01:24:54.021 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 192.6391ms
2025-09-26 01:24:54.072 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='c70ac32e-f10a-440e-843e-93552fb776b7', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 01:24:54.090 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 01:24:54.112 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 01:24:54.122 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType66`3[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType67`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 01:24:54.132 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api) in 232.0553ms
2025-09-26 01:24:54.134 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/csv-sample/schema - null null
2025-09-26 01:24:54.136 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 01:24:54.142 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:24:54.145 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/csv-sample/schema - 200 null application/json; charset=utf-8 308.0899ms
2025-09-26 01:24:54.150 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 01:24:54.158 +05:30 [INF] Route matched with {action = "GetSchema", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSchema(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 01:24:54.168 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='c70ac32e-f10a-440e-843e-93552fb776b7', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 01:24:54.179 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 01:24:54.188 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 01:24:54.193 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType66`3[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType67`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 01:24:54.271 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api) in 108.8478ms
2025-09-26 01:24:54.275 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 01:24:54.279 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/csv-sample/schema - 200 null application/json; charset=utf-8 144.9477ms
2025-09-26 01:25:00.606 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__now_0='2025-09-25T19:55:00.6007867+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:25:10.618 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:55:10.6149679+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:25:15.577 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch - null null
2025-09-26 01:25:15.582 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:25:15.583 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch - 204 null null 6.3967ms
2025-09-26 01:25:15.589 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/csv/batch - multipart/form-data; boundary=----WebKitFormBoundary4nVtRkdap5aqWKBJ 239
2025-09-26 01:25:15.594 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:25:15.598 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api)'
2025-09-26 01:25:15.612 +05:30 [INF] Route matched with {action = "Upload", controller = "CsvBatch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Upload(xbytechat.api.Features.CampaignModule.DTOs.Requests.CsvBatchUploadForm, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController (xbytechat.api).
2025-09-26 01:25:15.723 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p0='7b73624d-1515-47aa-a0bd-5ba68ce6a7f6', @p1=NULL (DbType = Guid), @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3=NULL, @p4='2025-09-25T19:55:15.6605749Z' (DbType = DateTime), @p5=NULL (DbType = Guid), @p6=NULL, @p7='csv_two_parameter.csv', @p8=NULL (DbType = Object), @p9='0', @p10='0', @p11='ingesting' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CsvBatches" ("Id", "AudienceId", "BusinessId", "Checksum", "CreatedAt", "CreatedByUserId", "ErrorMessage", "FileName", "HeadersJson", "RowCount", "SkippedCount", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-09-26 01:25:15.761 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@p1='7b73624d-1515-47aa-a0bd-5ba68ce6a7f6', @p0='["phone","parameter1"]' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CsvBatches" SET "HeadersJson" = @p0
WHERE "Id" = @p1;
2025-09-26 01:25:15.811 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p0='5e11a480-f0ff-41de-8be8-7ffe88191b9a', @p1='7b73624d-1515-47aa-a0bd-5ba68ce6a7f6', @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3='2025-09-25T19:55:15.7658922Z' (DbType = DateTime), @p4=NULL, @p5=NULL, @p6='0', @p7='{"phone":"89740 05240","parameter1":"Robert Nicosta"}' (Nullable = false) (DbType = Object), @p8=NULL], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CsvRows" ("Id", "BatchId", "BusinessId", "CreatedAt", "PhoneE164", "PhoneRaw", "RowIndex", "RowJson", "ValidationError")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-09-26 01:25:15.852 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='7b73624d-1515-47aa-a0bd-5ba68ce6a7f6', @p0='1', @p1='ready' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CsvBatches" SET "RowCount" = @p0, "Status" = @p1
WHERE "Id" = @p2;
2025-09-26 01:25:15.859 +05:30 [INF] CsvBatch "7b73624d-1515-47aa-a0bd-5ba68ce6a7f6" ingested: 1 rows; headers=2
2025-09-26 01:25:15.871 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType70`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.CampaignModule.DTOs.CsvBatchUploadResultDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 01:25:15.898 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api) in 281.9845ms
2025-09-26 01:25:15.915 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api)'
2025-09-26 01:25:15.922 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/csv/batch - 200 null application/json; charset=utf-8 332.8048ms
2025-09-26 01:25:15.954 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch/7b73624d-1515-47aa-a0bd-5ba68ce6a7f6/sample?take=10 - null null
2025-09-26 01:25:15.961 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:25:15.964 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch/7b73624d-1515-47aa-a0bd-5ba68ce6a7f6/sample?take=10 - 204 null null 10.1645ms
2025-09-26 01:25:15.973 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/csv/batch/7b73624d-1515-47aa-a0bd-5ba68ce6a7f6/sample?take=10 - null null
2025-09-26 01:25:15.983 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:25:15.987 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api)'
2025-09-26 01:25:15.997 +05:30 [INF] Route matched with {action = "Sample", controller = "CsvBatch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sample(System.Guid, Int32, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController (xbytechat.api).
2025-09-26 01:25:16.020 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__batchId_0='7b73624d-1515-47aa-a0bd-5ba68ce6a7f6', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."HeadersJson", c."RowCount"
FROM "CsvBatches" AS c
WHERE c."Id" = @__batchId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 01:25:16.048 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__batchId_1='7b73624d-1515-47aa-a0bd-5ba68ce6a7f6', @__p_2='10'], CommandType='"Text"', CommandTimeout='30']
SELECT c."RowIndex", c."Id", c."BatchId", c."BusinessId", c."CreatedAt", c."PhoneE164", c."PhoneRaw", c."RowJson", c."ValidationError"
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__batchId_1
ORDER BY c."RowIndex"
LIMIT @__p_2
2025-09-26 01:25:16.055 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType70`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IReadOnlyList`1[[xbytechat.api.Features.CampaignModule.DTOs.CsvRowSampleDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:25:16.062 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api) in 59.9965ms
2025-09-26 01:25:16.064 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api)'
2025-09-26 01:25:16.066 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/csv/batch/7b73624d-1515-47aa-a0bd-5ba68ce6a7f6/sample?take=10 - 200 null application/json; charset=utf-8 93.3755ms
2025-09-26 01:25:16.073 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/mappings/suggest?batchId=7b73624d-1515-47aa-a0bd-5ba68ce6a7f6 - null null
2025-09-26 01:25:16.080 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:25:16.081 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/mappings/suggest?batchId=7b73624d-1515-47aa-a0bd-5ba68ce6a7f6 - 204 null null 8.5876ms
2025-09-26 01:25:16.088 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/mappings/suggest?batchId=7b73624d-1515-47aa-a0bd-5ba68ce6a7f6 - null null
2025-09-26 01:25:16.093 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:25:16.097 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api)'
2025-09-26 01:25:16.104 +05:30 [INF] Route matched with {action = "Suggest", controller = "CampaignMappings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestAsync(System.Guid, System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController (xbytechat.api).
2025-09-26 01:25:16.122 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='c70ac32e-f10a-440e-843e-93552fb776b7', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateParameters"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 01:25:16.140 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__batchId_0='7b73624d-1515-47aa-a0bd-5ba68ce6a7f6', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."HeadersJson"
FROM "CsvBatches" AS c
WHERE c."Id" = @__batchId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 01:25:16.158 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:25:16.161 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api) in 53.9916ms
2025-09-26 01:25:16.164 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api)'
2025-09-26 01:25:16.167 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/mappings/suggest?batchId=7b73624d-1515-47aa-a0bd-5ba68ce6a7f6 - 200 null application/json; charset=utf-8 78.4867ms
2025-09-26 01:25:18.532 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/mappings - null null
2025-09-26 01:25:18.537 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:25:18.538 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/mappings - 204 null null 6.015ms
2025-09-26 01:25:18.551 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/mappings - application/json 27
2025-09-26 01:25:18.559 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:25:18.563 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api)'
2025-09-26 01:25:18.569 +05:30 [INF] Route matched with {action = "Save", controller = "CampaignMappings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SaveAsync(System.Guid, System.Collections.Generic.Dictionary`2[System.String,System.String], System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController (xbytechat.api).
2025-09-26 01:25:18.586 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-26 01:25:18.589 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api) in 15.1601ms
2025-09-26 01:25:18.591 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api)'
2025-09-26 01:25:18.594 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/mappings - 204 null null 42.9373ms
2025-09-26 01:25:18.600 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/materialize - null null
2025-09-26 01:25:18.604 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:25:18.606 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/materialize - 204 null null 6.2236ms
2025-09-26 01:25:18.612 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/materialize - application/json 207
2025-09-26 01:25:18.616 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:25:18.618 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api)'
2025-09-26 01:25:18.624 +05:30 [INF] Route matched with {action = "CsvCreate", controller = "CampaignMaterialize"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeResponseDto]] CsvCreate(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeRequestDto, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController (xbytechat.api).
2025-09-26 01:25:18.647 +05:30 [INF] 📦 Materialize request: campaign="c70ac32e-f10a-440e-843e-93552fb776b7" persist=true batch="7b73624d-1515-47aa-a0bd-5ba68ce6a7f6" audience='Audience 2025-09-26'
2025-09-26 01:25:18.663 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='c70ac32e-f10a-440e-843e-93552fb776b7', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1)
2025-09-26 01:25:18.676 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__request_CsvBatchId_1='7b73624d-1515-47aa-a0bd-5ba68ce6a7f6'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__request_CsvBatchId_1
2025-09-26 01:25:18.689 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__request_CsvBatchId_1='7b73624d-1515-47aa-a0bd-5ba68ce6a7f6', @__p_2='200'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BatchId", c."BusinessId", c."CreatedAt", c."PhoneE164", c."PhoneRaw", c."RowIndex", c."RowJson", c."ValidationError"
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__request_CsvBatchId_1
ORDER BY c."RowIndex"
LIMIT @__p_2
2025-09-26 01:25:18.713 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='c70ac32e-f10a-440e-843e-93552fb776b7', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."MessageTemplate", c."TemplateId"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 01:25:18.730 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 01:25:18.814 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__r_Phone_1='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__8__locals1_businessId_0 AND c."PhoneNumber" = @__r_Phone_1
LIMIT 1
2025-09-26 01:25:18.881 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p0='c854407f-c098-4ec9-9e26-a5c35176b270', @p1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p2=NULL (DbType = Guid), @p3='2025-09-25T19:55:18.7619490Z' (DbType = DateTime), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6=NULL, @p7='False', @p8='Audience 2025-09-26' (Nullable = false), @p9='2025-09-25T19:55:18.7619490Z' (Nullable = true) (DbType = DateTime), @p10='459a4d5a-0514-40bc-b102-17dd28456b86', @p11='{"parameter1":"Robert Nicosta"}' (DbType = Object), @p12='c854407f-c098-4ec9-9e26-a5c35176b270', @p13='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p14='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p15='2025-09-25T19:55:18.7619490Z' (DbType = DateTime), @p16=NULL (DbType = Guid), @p17=NULL, @p18='False', @p19='False', @p20=NULL, @p21='918974005240', @p22=NULL, @p23=NULL (DbType = DateTime), @p24='2025-09-25T19:55:18.7619490Z' (Nullable = true) (DbType = DateTime), @p25='0c3f185b-7b04-4ee8-8a8a-c626bb6d2865', @p26='459a4d5a-0514-40bc-b102-17dd28456b86' (Nullable = true), @p27=NULL, @p28='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p29='c70ac32e-f10a-440e-843e-93552fb776b7', @p30=NULL, @p31=NULL, @p32='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p33='F6B50CC248B47A2CB401C181C0E6D4BB3FBFE4B4A1908A681632E0F63007DD65', @p34='False', @p35='2025-09-25T19:55:18.7619490Z' (Nullable = true) (DbType = DateTime), @p36=NULL, @p37=NULL, @p38='{}' (DbType = Object), @p39='["Robert Nicosta"]' (DbType = Object), @p40=NULL (DbType = DateTime), @p41='Pending' (Nullable = false), @p42='2025-09-25T19:55:18.7619490Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Audiences" ("Id", "BusinessId", "CampaignId", "CreatedAt", "CreatedByUserId", "CsvBatchId", "Description", "IsDeleted", "Name", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
INSERT INTO "AudienceMembers" ("Id", "AttributesJson", "AudienceId", "BusinessId", "ContactId", "CreatedAt", "CreatedByUserId", "Email", "IsDeleted", "IsTransientContact", "Name", "PhoneE164", "PhoneRaw", "PromotedAt", "UpdatedAt")
VALUES (@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
INSERT INTO "CampaignRecipients" ("Id", "AudienceMemberId", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IdempotencyKey", "IsAutoTagged", "MaterializedAt", "MessagePreview", "ProductBrowsed", "ResolvedButtonUrlsJson", "ResolvedParametersJson", "SentAt", "Status", "UpdatedAt")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42);
2025-09-26 01:25:18.905 +05:30 [INF] 📦 Materialize result: campaign="c70ac32e-f10a-440e-843e-93552fb776b7" materialized=1 skipped=0 audienceId="c854407f-c098-4ec9-9e26-a5c35176b270"
2025-09-26 01:25:18.908 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeResponseDto'.
2025-09-26 01:25:18.917 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api) in 288.4817ms
2025-09-26 01:25:18.920 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api)'
2025-09-26 01:25:18.922 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaigns/c70ac32e-f10a-440e-843e-93552fb776b7/materialize - 200 null application/json; charset=utf-8 309.8992ms
2025-09-26 01:25:20.634 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:55:20.6310055+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:25:21.662 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 01:25:21.668 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:25:21.670 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 8.4774ms
2025-09-26 01:25:21.679 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 01:25:21.684 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:25:21.686 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 01:25:21.689 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 01:25:21.701 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-09-26 01:25:21.707 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 01:25:21.711 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 17.2872ms
2025-09-26 01:25:21.714 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 01:25:21.716 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 37.7428ms
2025-09-26 01:25:23.192 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/c70ac32e-f10a-440e-843e-93552fb776b7 - null null
2025-09-26 01:25:23.216 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:25:23.220 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/c70ac32e-f10a-440e-843e-93552fb776b7 - 204 null null 27.9906ms
2025-09-26 01:25:23.227 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/c70ac32e-f10a-440e-843e-93552fb776b7 - null 0
2025-09-26 01:25:23.232 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:25:23.234 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 01:25:23.236 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 01:25:26.288 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='c70ac32e-f10a-440e-843e-93552fb776b7'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
ORDER BY c."Id"
LIMIT 1
2025-09-26 01:25:26.328 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__campaignId_0='c70ac32e-f10a-440e-843e-93552fb776b7'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."AudienceMemberId", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IdempotencyKey", t0."IsAutoTagged", t0."MaterializedAt", t0."MessagePreview", t0."ProductBrowsed", t0."ResolvedButtonUrlsJson", t0."ResolvedParametersJson", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."ProfileName", t0."ProfileNameUpdatedAt", t0."Tags", t0."Id1", t0."AttributesJson", t0."AudienceId", t0."BusinessId1", t0."ContactId0", t0."CreatedAt0", t0."CreatedByUserId", t0."Email0", t0."IsDeleted", t0."IsTransientContact", t0."Name0", t0."PhoneE164", t0."PhoneRaw", t0."PromotedAt", t0."UpdatedAt0", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN (
    SELECT c0."Id", c0."AudienceMemberId", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IdempotencyKey", c0."IsAutoTagged", c0."MaterializedAt", c0."MessagePreview", c0."ProductBrowsed", c0."ResolvedButtonUrlsJson", c0."ResolvedParametersJson", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."ProfileName", c1."ProfileNameUpdatedAt", c1."Tags", a."Id" AS "Id1", a."AttributesJson", a."AudienceId", a."BusinessId" AS "BusinessId1", a."ContactId" AS "ContactId0", a."CreatedAt" AS "CreatedAt0", a."CreatedByUserId", a."Email" AS "Email0", a."IsDeleted", a."IsTransientContact", a."Name" AS "Name0", a."PhoneE164", a."PhoneRaw", a."PromotedAt", a."UpdatedAt" AS "UpdatedAt0"
    FROM "CampaignRecipients" AS c0
    LEFT JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
    LEFT JOIN "AudienceMembers" AS a ON c0."AudienceMemberId" = a."Id"
) AS t0 ON t."Id" = t0."CampaignId"
ORDER BY t."Id"
2025-09-26 01:25:26.340 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='c70ac32e-f10a-440e-843e-93552fb776b7'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."CampaignId", c0."IsFromTemplate", c0."Position", c0."Title", c0."Type", c0."Value", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN "CampaignButtons" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-26 01:25:26.348 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 01:25:26.358 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:25:26.360 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:25:28.411 +05:30 [INF] Received HTTP response headers after 2049.5166ms - 200
2025-09-26 01:25:28.417 +05:30 [INF] End processing HTTP request after 2059.3478ms - 200
2025-09-26 01:25:28.437 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 01:25:28.446 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 01:25:30.899 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 01:25:30.901 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:55:30.8973576+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:25:30.904 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 01:25:31.893 +05:30 [INF] Received HTTP response headers after 983.9495ms - 200
2025-09-26 01:25:31.898 +05:30 [INF] End processing HTTP request after 999.2207ms - 200
2025-09-26 01:25:37.609 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageLogId_0='9c1d81c1-1f43-49f7-8f0d-70ead07dd06e', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 01:25:37.622 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p2='5c61c51a-bb04-478c-8b59-59a2606cc051', @p0='2025-09-25T19:55:28.4287902Z' (Nullable = true) (DbType = DateTime), @p1='2025-09-25T19:55:28.4287902Z' (DbType = DateTime), @p3='9c1d81c1-1f43-49f7-8f0d-70ead07dd06e', @p4='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p5=NULL, @p6=NULL (DbType = Guid), @p7=NULL (DbType = Guid), @p8='c70ac32e-f10a-440e-843e-93552fb776b7' (Nullable = true), @p9='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p10=NULL, @p11=NULL, @p12=NULL (DbType = DateTime), @p13='2025-09-25T19:55:28.4287902Z' (DbType = DateTime), @p14=NULL, @p15=NULL (DbType = Int32), @p16=NULL (DbType = Boolean), @p17='False', @p18=NULL, @p19='single_variable_body' (Nullable = false), @p20='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUNEMjZCRDcwQkNFNDg3NzlBAA==', @p21=NULL (DbType = Decimal), @p22=NULL, @p23=NULL, @p24=NULL, @p25='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUNEMjZCRDcwQkNFNDg3NzlBAA==","message_status":"accepted"}]}', @p26='918974005240' (Nullable = false), @p27=NULL (DbType = Guid), @p28=NULL, @p29='9bce7b30-66f0-40b4-a1be-8ea21b1ebb67' (Nullable = true), @p30='2025-09-25T19:55:28.4287902Z' (Nullable = true) (DbType = DateTime), @p31='campaign', @p32='Sent' (Nullable = false), @p33='c65cc612-3b3f-47c5-9e06-b42f52b94782', @p34='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p35=NULL, @p36=NULL, @p37='2025-09-25T19:55:37.6152686+00:00' (DbType = DateTime), @p38='send_response' (Nullable = false), @p39=NULL (DbType = Boolean), @p40='9c1d81c1-1f43-49f7-8f0d-70ead07dd06e' (Nullable = true), @p41='2025-09-25T19:55:37.6152715+00:00' (DbType = DateTime), @p42='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUNEMjZCRDcwQkNFNDg3NzlBAA==","message_status":"accepted"}]}' (Nullable = false), @p43=NULL (DbType = Decimal), @p44=NULL, @p45='META_CLOUD' (Nullable = false), @p46='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUNEMjZCRDcwQkNFNDg3NzlBAA=='], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignRecipients" SET "MaterializedAt" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32)
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46);
2025-09-26 01:25:37.635 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 01:25:37.642 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 01:25:40.572 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 01:25:40.573 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-26 01:25:40.575 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 01:25:40.579 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:25:40.584 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:25:40.589 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUNEMjZCRDcwQkNFNDg3NzlBAA==","status":"sent","timestamp":"1758830138","recipient_id":"918974005240","conversation":{"id":"7bace9b663499ac7752255e6fd209361","expiration_timestamp":"1758830138","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:25:40.592 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:25:40.592 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUNEMjZCRDcwQkNFNDg3NzlBAA==","status":"sent","timestamp":"1758830138","recipient_id":"918974005240","conversation":{"id":"7bace9b663499ac7752255e6fd209361","expiration_timestamp":"1758830138","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:25:40.593 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:25:40.595 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:25:40.597 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 8.9075ms
2025-09-26 01:25:40.605 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUNEMjZCRDcwQkNFNDg3NzlBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:25:40.605 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:25:40.611 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUNEMjZCRDcwQkNFNDg3NzlBAA==
2025-09-26 01:25:40.612 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 39.3007ms
2025-09-26 01:25:40.625 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUNEMjZCRDcwQkNFNDg3NzlBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:25:40.631 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUNEMjZCRDcwQkNFNDg3NzlBAA== (legacy)
2025-09-26 01:25:40.919 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:55:40.9161605+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:25:41.072 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-09-26 01:25:41.078 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:25:41.081 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:25:41.085 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUNEMjZCRDcwQkNFNDg3NzlBAA==","status":"delivered","timestamp":"1758830139","recipient_id":"918974005240","conversation":{"id":"7bace9b663499ac7752255e6fd209361","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:25:41.088 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:25:41.089 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUNEMjZCRDcwQkNFNDg3NzlBAA==","status":"delivered","timestamp":"1758830139","recipient_id":"918974005240","conversation":{"id":"7bace9b663499ac7752255e6fd209361","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:25:41.090 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:25:41.091 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:25:41.094 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 9.1408ms
2025-09-26 01:25:41.098 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUNEMjZCRDcwQkNFNDg3NzlBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:25:41.100 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:25:41.104 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUNEMjZCRDcwQkNFNDg3NzlBAA==
2025-09-26 01:25:41.106 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 33.8611ms
2025-09-26 01:25:41.111 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUNEMjZCRDcwQkNFNDg3NzlBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:25:41.141 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p1='9c1d81c1-1f43-49f7-8f0d-70ead07dd06e', @p0='Delivered' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-09-26 01:25:41.146 +05:30 [INF] ℹ️ MessageLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUNEMjZCRDcwQkNFNDg3NzlBAA== → Delivered
2025-09-26 01:25:41.708 +05:30 [INF] Received HTTP response headers after 1126.8062ms - 200
2025-09-26 01:25:41.710 +05:30 [INF] End processing HTTP request after 1138.1619ms - 200
2025-09-26 01:25:41.717 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageLogId_0='20ccea35-a1fd-473b-8939-0bbb22f34601', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 01:25:41.731 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p4='0c3f185b-7b04-4ee8-8a8a-c626bb6d2865', @p0='34a4ea5115bffddbd1c71a28bf022cabe448e41a0903f87a07f2213b57238922', @p1='2025-09-25T19:55:28.4287902Z' (Nullable = true) (DbType = DateTime), @p2='[]' (DbType = Object), @p3='2025-09-25T19:55:28.4287902Z' (DbType = DateTime), @p5='50739138-e16b-46a1-8c11-71e7d929468d', @p6='True', @p7=NULL, @p8='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p9=NULL, @p10=NULL (DbType = Guid), @p11=NULL (DbType = Guid), @p12='c70ac32e-f10a-440e-843e-93552fb776b7', @p13=NULL, @p14=NULL, @p15=NULL (DbType = DateTime), @p16='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p17=NULL, @p18='2025-09-25T19:55:28.4287902Z' (DbType = DateTime), @p19='system', @p20=NULL (DbType = DateTime), @p21=NULL, @p22=NULL, @p23=NULL, @p24=NULL, @p25='False', @p26=NULL (DbType = DateTime), @p27=NULL, @p28=NULL, @p29='Hello
We are sedning HardCode items.' (Nullable = false), @p30='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUNEMjZCRDcwQkNFNDg3NzlBAA==', @p31='9c1d81c1-1f43-49f7-8f0d-70ead07dd06e' (Nullable = true), @p32=NULL (DbType = DateTime), @p33='5c61c51a-bb04-478c-8b59-59a2606cc051', @p34='0', @p35='9bce7b30-66f0-40b4-a1be-8ea21b1ebb67' (Nullable = true), @p36='Sent', @p37='2025-09-25T19:55:28.4287902Z' (Nullable = true) (DbType = DateTime), @p38=NULL, @p39='single_variable_body', @p40=NULL (DbType = Guid), @p41='20ccea35-a1fd-473b-8939-0bbb22f34601', @p42='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p43=NULL, @p44=NULL (DbType = Guid), @p45=NULL (DbType = Guid), @p46='c70ac32e-f10a-440e-843e-93552fb776b7' (Nullable = true), @p47='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p48=NULL, @p49=NULL, @p50=NULL (DbType = DateTime), @p51='2025-09-25T19:55:28.4287902Z' (DbType = DateTime), @p52=NULL, @p53=NULL (DbType = Int32), @p54=NULL (DbType = Boolean), @p55='False', @p56=NULL, @p57='single_variable_body' (Nullable = false), @p58='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRUUzNDNERDZBNjk1MEE2MkVEAA==', @p59=NULL (DbType = Decimal), @p60=NULL, @p61=NULL, @p62=NULL, @p63='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRUUzNDNERDZBNjk1MEE2MkVEAA==","message_status":"accepted"}]}', @p64='918974005240' (Nullable = false), @p65=NULL (DbType = Guid), @p66=NULL, @p67='fc454b77-176c-43d9-8096-f63d9f3e6bfe' (Nullable = true), @p68='2025-09-25T19:55:28.4287902Z' (Nullable = true) (DbType = DateTime), @p69='campaign', @p70='Sent' (Nullable = false), @p71='f5f2bdc5-847f-4f1b-9bb9-1d1545aa4a1a', @p72='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p73=NULL, @p74=NULL, @p75='2025-09-25T19:55:41.7235100+00:00' (DbType = DateTime), @p76='send_response' (Nullable = false), @p77=NULL (DbType = Boolean), @p78='20ccea35-a1fd-473b-8939-0bbb22f34601' (Nullable = true), @p79='2025-09-25T19:55:41.7235120+00:00' (DbType = DateTime), @p80='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRUUzNDNERDZBNjk1MEE2MkVEAA==","message_status":"accepted"}]}' (Nullable = false), @p81=NULL (DbType = Decimal), @p82=NULL, @p83='META_CLOUD' (Nullable = false), @p84='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRUUzNDNERDZBNjk1MEE2MkVEAA=='], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignRecipients" SET "IdempotencyKey" = @p0, "MaterializedAt" = @p1, "ResolvedButtonUrlsJson" = @p2, "UpdatedAt" = @p3
WHERE "Id" = @p4;
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68, @p69, @p70)
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p71, @p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, @p81, @p82, @p83, @p84);
2025-09-26 01:25:41.763 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='14ce5b31-5abe-448e-bb80-70d05e2ec8d8', @p1='True', @p2=NULL, @p3='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p4=NULL, @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7='c70ac32e-f10a-440e-843e-93552fb776b7', @p8=NULL, @p9=NULL, @p10=NULL (DbType = DateTime), @p11='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p12=NULL, @p13='2025-09-25T19:55:28.4287902Z' (DbType = DateTime), @p14='system', @p15=NULL (DbType = DateTime), @p16=NULL, @p17=NULL, @p18=NULL, @p19=NULL, @p20='False', @p21=NULL (DbType = DateTime), @p22=NULL, @p23=NULL, @p24='Hello
We are sedning HardCode items.' (Nullable = false), @p25='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRUUzNDNERDZBNjk1MEE2MkVEAA==', @p26='20ccea35-a1fd-473b-8939-0bbb22f34601' (Nullable = true), @p27=NULL (DbType = DateTime), @p28='0c3f185b-7b04-4ee8-8a8a-c626bb6d2865', @p29='0', @p30='fc454b77-176c-43d9-8096-f63d9f3e6bfe' (Nullable = true), @p31='Sent', @p32='2025-09-25T19:55:28.4287902Z' (Nullable = true) (DbType = DateTime), @p33=NULL, @p34='single_variable_body', @p35=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-09-26 01:25:42.854 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 01:25:42.857 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 19616.963ms
2025-09-26 01:25:42.861 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 01:25:42.863 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/c70ac32e-f10a-440e-843e-93552fb776b7 - 200 null application/json; charset=utf-8 19636.2206ms
2025-09-26 01:25:45.866 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f72333b2-1a90-4764-8eea-4f9b70fc08a6 - null null
2025-09-26 01:25:45.872 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:25:45.873 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f72333b2-1a90-4764-8eea-4f9b70fc08a6 - 204 null null 6.9992ms
2025-09-26 01:25:45.880 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f72333b2-1a90-4764-8eea-4f9b70fc08a6 - null 0
2025-09-26 01:25:45.885 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:25:45.887 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 01:25:45.889 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 01:25:48.689 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='f72333b2-1a90-4764-8eea-4f9b70fc08a6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
ORDER BY c."Id"
LIMIT 1
2025-09-26 01:25:48.731 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='f72333b2-1a90-4764-8eea-4f9b70fc08a6'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."AudienceMemberId", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IdempotencyKey", t0."IsAutoTagged", t0."MaterializedAt", t0."MessagePreview", t0."ProductBrowsed", t0."ResolvedButtonUrlsJson", t0."ResolvedParametersJson", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."ProfileName", t0."ProfileNameUpdatedAt", t0."Tags", t0."Id1", t0."AttributesJson", t0."AudienceId", t0."BusinessId1", t0."ContactId0", t0."CreatedAt0", t0."CreatedByUserId", t0."Email0", t0."IsDeleted", t0."IsTransientContact", t0."Name0", t0."PhoneE164", t0."PhoneRaw", t0."PromotedAt", t0."UpdatedAt0", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN (
    SELECT c0."Id", c0."AudienceMemberId", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IdempotencyKey", c0."IsAutoTagged", c0."MaterializedAt", c0."MessagePreview", c0."ProductBrowsed", c0."ResolvedButtonUrlsJson", c0."ResolvedParametersJson", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."ProfileName", c1."ProfileNameUpdatedAt", c1."Tags", a."Id" AS "Id1", a."AttributesJson", a."AudienceId", a."BusinessId" AS "BusinessId1", a."ContactId" AS "ContactId0", a."CreatedAt" AS "CreatedAt0", a."CreatedByUserId", a."Email" AS "Email0", a."IsDeleted", a."IsTransientContact", a."Name" AS "Name0", a."PhoneE164", a."PhoneRaw", a."PromotedAt", a."UpdatedAt" AS "UpdatedAt0"
    FROM "CampaignRecipients" AS c0
    LEFT JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
    LEFT JOIN "AudienceMembers" AS a ON c0."AudienceMemberId" = a."Id"
) AS t0 ON t."Id" = t0."CampaignId"
ORDER BY t."Id"
2025-09-26 01:25:48.739 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='f72333b2-1a90-4764-8eea-4f9b70fc08a6'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."CampaignId", c0."IsFromTemplate", c0."Position", c0."Title", c0."Type", c0."Value", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN "CampaignButtons" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-26 01:25:48.748 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 01:25:48.755 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:25:48.757 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:25:50.038 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-26 01:25:50.045 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:25:50.048 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:25:50.052 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRUUzNDNERDZBNjk1MEE2MkVEAA==","status":"sent","timestamp":"1758830148","recipient_id":"918974005240","conversation":{"id":"6a10fd5500a48fffdf24c75b0b52ab67","expiration_timestamp":"1758830148","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:25:50.055 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:25:50.055 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRUUzNDNERDZBNjk1MEE2MkVEAA==","status":"sent","timestamp":"1758830148","recipient_id":"918974005240","conversation":{"id":"6a10fd5500a48fffdf24c75b0b52ab67","expiration_timestamp":"1758830148","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:25:50.057 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:25:50.059 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:25:50.062 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 10.4594ms
2025-09-26 01:25:50.069 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRUUzNDNERDZBNjk1MEE2MkVEAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:25:50.071 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:25:50.079 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='14ce5b31-5abe-448e-bb80-70d05e2ec8d8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 01:25:50.080 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 41.5743ms
2025-09-26 01:25:50.084 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRUUzNDNERDZBNjk1MEE2MkVEAA== (legacy)
2025-09-26 01:25:50.232 +05:30 [INF] Received HTTP response headers after 1472.1226ms - 200
2025-09-26 01:25:50.235 +05:30 [INF] End processing HTTP request after 1480.0101ms - 200
2025-09-26 01:25:50.301 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-09-26 01:25:50.302 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-09-26 01:25:50.307 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:25:50.312 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:25:50.314 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:25:50.316 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:25:50.322 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p2='204cfa58-4671-413c-ba81-c977f1de489c', @p0='2025-09-25T19:55:50.3150329Z' (Nullable = true) (DbType = DateTime), @p1='2025-09-25T19:55:50.3150329Z' (DbType = DateTime), @p3='c7eb6389-26ed-4db4-8c68-346e79cc5c25', @p4='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p5=NULL, @p6=NULL (DbType = Guid), @p7=NULL (DbType = Guid), @p8='f72333b2-1a90-4764-8eea-4f9b70fc08a6' (Nullable = true), @p9='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p10=NULL, @p11=NULL, @p12=NULL (DbType = DateTime), @p13='2025-09-25T19:55:50.3150329Z' (DbType = DateTime), @p14='Missing body parameter(s): expected 1, got 0 filled.', @p15=NULL (DbType = Int32), @p16=NULL (DbType = Boolean), @p17='False', @p18=NULL, @p19='single_variable_body' (Nullable = false), @p20=NULL, @p21=NULL (DbType = Decimal), @p22=NULL, @p23=NULL, @p24=NULL, @p25='{"local_error":"missing_template_body_params"}', @p26='918974005240' (Nullable = false), @p27=NULL (DbType = Guid), @p28=NULL, @p29='056911aa-e11b-41fa-a50b-2f260055ab11' (Nullable = true), @p30=NULL (DbType = DateTime), @p31='campaign', @p32='Failed' (Nullable = false), @p33='e9b6de7e-4789-4e33-a9e5-d7f859599c16', @p34='True', @p35=NULL, @p36='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p37=NULL, @p38=NULL (DbType = Guid), @p39=NULL (DbType = Guid), @p40='f72333b2-1a90-4764-8eea-4f9b70fc08a6', @p41=NULL, @p42=NULL, @p43=NULL (DbType = DateTime), @p44='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p45=NULL, @p46='2025-09-25T19:55:50.3150329Z' (DbType = DateTime), @p47='system', @p48=NULL (DbType = DateTime), @p49=NULL, @p50=NULL, @p51='Missing body parameter(s): expected 1, got 0 filled.', @p52=NULL, @p53='False', @p54=NULL (DbType = DateTime), @p55=NULL, @p56=NULL, @p57='Hello
We are sedning {{1}} items.' (Nullable = false), @p58=NULL, @p59='c7eb6389-26ed-4db4-8c68-346e79cc5c25' (Nullable = true), @p60=NULL (DbType = DateTime), @p61='204cfa58-4671-413c-ba81-c977f1de489c', @p62='0', @p63='056911aa-e11b-41fa-a50b-2f260055ab11' (Nullable = true), @p64='Failed', @p65=NULL (DbType = DateTime), @p66=NULL, @p67='single_variable_body', @p68=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignRecipients" SET "MaterializedAt" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32)
RETURNING "MessageTime";
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68);
2025-09-26 01:25:50.323 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRUUzNDNERDZBNjk1MEE2MkVEAA==","status":"delivered","timestamp":"1758830148","recipient_id":"918974005240","conversation":{"id":"6a10fd5500a48fffdf24c75b0b52ab67","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:25:50.326 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRUUzNDNERDZBNjk1MEE2MkVEAA==","status":"delivered","timestamp":"1758830148","recipient_id":"918974005240","conversation":{"id":"6a10fd5500a48fffdf24c75b0b52ab67","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:25:50.377 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:25:51.970 +05:30 [INF] Executed DbCommand (29ms) [Parameters=[@__now_0='2025-09-25T19:55:51.9399948+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:25:51.998 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:25:50.378 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRUUzNDNERDZBNjk1MEE2MkVEAA==","status":"delivered","timestamp":"1758830148","recipient_id":"918974005240","conversation":{"id":"6a10fd5500a48fffdf24c75b0b52ab67","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:25:51.946 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:25:57.908 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 01:25:57.912 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7589.376ms
2025-09-26 01:25:57.915 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:25:57.916 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:26:00.314 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:26:00.312 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 14419.8905ms
2025-09-26 01:26:00.320 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRUUzNDNERDZBNjk1MEE2MkVEAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:26:00.322 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 9996.1322ms
2025-09-26 01:26:00.325 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 10024.0518ms
2025-09-26 01:26:00.327 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 01:26:00.334 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='14ce5b31-5abe-448e-bb80-70d05e2ec8d8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 01:26:00.336 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:26:00.344 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f72333b2-1a90-4764-8eea-4f9b70fc08a6 - 200 null application/json; charset=utf-8 14464.098ms
2025-09-26 01:26:00.353 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p2='14ce5b31-5abe-448e-bb80-70d05e2ec8d8', @p0='2025-09-25T19:55:48.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-26 01:26:00.355 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 10053.1731ms
2025-09-26 01:26:00.367 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRUUzNDNERDZBNjk1MEE2MkVEAA== → Delivered
2025-09-26 01:26:00.375 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRUUzNDNERDZBNjk1MEE2MkVEAA==","status":"delivered","timestamp":"1758830148","recipient_id":"918974005240","conversation":{"id":"6a10fd5500a48fffdf24c75b0b52ab67","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:26:00.377 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:26:00.386 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRUUzNDNERDZBNjk1MEE2MkVEAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:26:00.394 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='14ce5b31-5abe-448e-bb80-70d05e2ec8d8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 01:26:00.399 +05:30 [INF] 🔁 Duplicate status 'delivered' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRUUzNDNERDZBNjk1MEE2MkVEAA== (legacy)
2025-09-26 01:26:07.172 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-09-26 01:26:07.202 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-09-26 01:26:07.207 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:26:07.213 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:26:07.214 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:26:07.216 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:26:07.221 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRUUzNDNERDZBNjk1MEE2MkVEAA==","status":"read","timestamp":"1758830165","recipient_id":"918974005240","conversation":{"id":"6a10fd5500a48fffdf24c75b0b52ab67","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:26:07.224 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUNEMjZCRDcwQkNFNDg3NzlBAA==","status":"read","timestamp":"1758830165","recipient_id":"918974005240","conversation":{"id":"7bace9b663499ac7752255e6fd209361","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:26:07.226 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:26:07.228 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRUUzNDNERDZBNjk1MEE2MkVEAA==","status":"read","timestamp":"1758830165","recipient_id":"918974005240","conversation":{"id":"6a10fd5500a48fffdf24c75b0b52ab67","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:26:07.230 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:26:07.233 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:26:07.237 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:26:07.239 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-26 01:26:07.243 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 23.3233ms
2025-09-26 01:26:07.246 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 23.0001ms
2025-09-26 01:26:07.254 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-26 01:26:07.256 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:26:07.259 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:26:07.263 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-26 01:26:07.265 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 92.9379ms
2025-09-26 01:26:07.267 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 65.3004ms
2025-09-26 01:26:07.271 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:26:07.291 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRUUzNDNERDZBNjk1MEE2MkVEAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:26:07.299 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='14ce5b31-5abe-448e-bb80-70d05e2ec8d8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 01:26:07.307 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='14ce5b31-5abe-448e-bb80-70d05e2ec8d8', @p0='2025-09-25T19:56:05.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-26 01:26:07.313 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRUUzNDNERDZBNjk1MEE2MkVEAA== → Read
2025-09-26 01:26:07.317 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUNEMjZCRDcwQkNFNDg3NzlBAA==","status":"read","timestamp":"1758830165","recipient_id":"918974005240","conversation":{"id":"7bace9b663499ac7752255e6fd209361","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:26:07.320 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:26:07.327 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUNEMjZCRDcwQkNFNDg3NzlBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:26:07.335 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__sid_0='50739138-e16b-46a1-8c11-71e7d929468d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 01:26:07.344 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p2='50739138-e16b-46a1-8c11-71e7d929468d', @p0='2025-09-25T19:56:05.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-26 01:26:07.350 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOUNEMjZCRDcwQkNFNDg3NzlBAA== → Read
2025-09-26 01:26:07.936 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:56:07.9335710+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:26:17.956 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:56:17.9528914+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:26:21.879 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f72333b2-1a90-4764-8eea-4f9b70fc08a6 - null null
2025-09-26 01:26:21.886 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:26:21.887 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f72333b2-1a90-4764-8eea-4f9b70fc08a6 - 204 null null 8.3888ms
2025-09-26 01:26:21.894 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f72333b2-1a90-4764-8eea-4f9b70fc08a6 - null 0
2025-09-26 01:26:21.898 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:26:21.901 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 01:26:21.903 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 01:26:24.512 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='f72333b2-1a90-4764-8eea-4f9b70fc08a6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
ORDER BY c."Id"
LIMIT 1
2025-09-26 01:26:24.536 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='f72333b2-1a90-4764-8eea-4f9b70fc08a6'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."AudienceMemberId", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IdempotencyKey", t0."IsAutoTagged", t0."MaterializedAt", t0."MessagePreview", t0."ProductBrowsed", t0."ResolvedButtonUrlsJson", t0."ResolvedParametersJson", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."ProfileName", t0."ProfileNameUpdatedAt", t0."Tags", t0."Id1", t0."AttributesJson", t0."AudienceId", t0."BusinessId1", t0."ContactId0", t0."CreatedAt0", t0."CreatedByUserId", t0."Email0", t0."IsDeleted", t0."IsTransientContact", t0."Name0", t0."PhoneE164", t0."PhoneRaw", t0."PromotedAt", t0."UpdatedAt0", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN (
    SELECT c0."Id", c0."AudienceMemberId", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IdempotencyKey", c0."IsAutoTagged", c0."MaterializedAt", c0."MessagePreview", c0."ProductBrowsed", c0."ResolvedButtonUrlsJson", c0."ResolvedParametersJson", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."ProfileName", c1."ProfileNameUpdatedAt", c1."Tags", a."Id" AS "Id1", a."AttributesJson", a."AudienceId", a."BusinessId" AS "BusinessId1", a."ContactId" AS "ContactId0", a."CreatedAt" AS "CreatedAt0", a."CreatedByUserId", a."Email" AS "Email0", a."IsDeleted", a."IsTransientContact", a."Name" AS "Name0", a."PhoneE164", a."PhoneRaw", a."PromotedAt", a."UpdatedAt" AS "UpdatedAt0"
    FROM "CampaignRecipients" AS c0
    LEFT JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
    LEFT JOIN "AudienceMembers" AS a ON c0."AudienceMemberId" = a."Id"
) AS t0 ON t."Id" = t0."CampaignId"
ORDER BY t."Id"
2025-09-26 01:26:24.547 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='f72333b2-1a90-4764-8eea-4f9b70fc08a6'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."CampaignId", c0."IsFromTemplate", c0."Position", c0."Title", c0."Type", c0."Value", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN "CampaignButtons" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-26 01:26:24.553 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 01:26:24.565 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:26:24.569 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:26:25.272 +05:30 [INF] Received HTTP response headers after 701.0791ms - 200
2025-09-26 01:26:25.277 +05:30 [INF] End processing HTTP request after 712.8424ms - 200
2025-09-26 01:26:25.338 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p2='204cfa58-4671-413c-ba81-c977f1de489c', @p0='2025-09-25T19:56:25.3284804Z' (Nullable = true) (DbType = DateTime), @p1='2025-09-25T19:56:25.3284804Z' (DbType = DateTime), @p3='d55d291e-9c05-4274-aa29-21c032308720', @p4='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p5=NULL, @p6=NULL (DbType = Guid), @p7=NULL (DbType = Guid), @p8='f72333b2-1a90-4764-8eea-4f9b70fc08a6' (Nullable = true), @p9='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p10=NULL, @p11=NULL, @p12=NULL (DbType = DateTime), @p13='2025-09-25T19:56:25.3284804Z' (DbType = DateTime), @p14='Missing body parameter(s): expected 1, got 0 filled.', @p15=NULL (DbType = Int32), @p16=NULL (DbType = Boolean), @p17='False', @p18=NULL, @p19='single_variable_body' (Nullable = false), @p20=NULL, @p21=NULL (DbType = Decimal), @p22=NULL, @p23=NULL, @p24=NULL, @p25='{"local_error":"missing_template_body_params"}', @p26='918974005240' (Nullable = false), @p27=NULL (DbType = Guid), @p28=NULL, @p29='913318f0-788f-4a7d-be49-55dc1fe2aa27' (Nullable = true), @p30=NULL (DbType = DateTime), @p31='campaign', @p32='Failed' (Nullable = false), @p33='7a70fb79-5471-4095-bc31-a061ebe0cfa3', @p34='True', @p35=NULL, @p36='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p37=NULL, @p38=NULL (DbType = Guid), @p39=NULL (DbType = Guid), @p40='f72333b2-1a90-4764-8eea-4f9b70fc08a6', @p41=NULL, @p42=NULL, @p43=NULL (DbType = DateTime), @p44='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p45=NULL, @p46='2025-09-25T19:56:25.3284804Z' (DbType = DateTime), @p47='system', @p48=NULL (DbType = DateTime), @p49=NULL, @p50=NULL, @p51='Missing body parameter(s): expected 1, got 0 filled.', @p52=NULL, @p53='False', @p54=NULL (DbType = DateTime), @p55=NULL, @p56=NULL, @p57='Hello
We are sedning {{1}} items.' (Nullable = false), @p58=NULL, @p59='d55d291e-9c05-4274-aa29-21c032308720' (Nullable = true), @p60=NULL (DbType = DateTime), @p61='204cfa58-4671-413c-ba81-c977f1de489c', @p62='0', @p63='913318f0-788f-4a7d-be49-55dc1fe2aa27' (Nullable = true), @p64='Failed', @p65=NULL (DbType = DateTime), @p66=NULL, @p67='single_variable_body', @p68=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignRecipients" SET "MaterializedAt" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32)
RETURNING "MessageTime";
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68);
2025-09-26 01:26:25.348 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 01:26:25.351 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 3444.9299ms
2025-09-26 01:26:25.354 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 01:26:25.356 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f72333b2-1a90-4764-8eea-4f9b70fc08a6 - 200 null application/json; charset=utf-8 3461.9825ms
2025-09-26 01:26:27.972 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:56:27.9683886+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:26:37.984 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:56:37.9810038+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:26:41.569 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f72333b2-1a90-4764-8eea-4f9b70fc08a6 - null null
2025-09-26 01:26:41.583 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:26:41.584 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/f72333b2-1a90-4764-8eea-4f9b70fc08a6 - 204 null null 15.5249ms
2025-09-26 01:26:41.590 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f72333b2-1a90-4764-8eea-4f9b70fc08a6 - null 0
2025-09-26 01:26:41.595 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:26:41.597 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 01:26:41.600 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 01:26:43.482 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='f72333b2-1a90-4764-8eea-4f9b70fc08a6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
ORDER BY c."Id"
LIMIT 1
2025-09-26 01:26:43.523 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='f72333b2-1a90-4764-8eea-4f9b70fc08a6'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."AudienceMemberId", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IdempotencyKey", t0."IsAutoTagged", t0."MaterializedAt", t0."MessagePreview", t0."ProductBrowsed", t0."ResolvedButtonUrlsJson", t0."ResolvedParametersJson", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."ProfileName", t0."ProfileNameUpdatedAt", t0."Tags", t0."Id1", t0."AttributesJson", t0."AudienceId", t0."BusinessId1", t0."ContactId0", t0."CreatedAt0", t0."CreatedByUserId", t0."Email0", t0."IsDeleted", t0."IsTransientContact", t0."Name0", t0."PhoneE164", t0."PhoneRaw", t0."PromotedAt", t0."UpdatedAt0", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN (
    SELECT c0."Id", c0."AudienceMemberId", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IdempotencyKey", c0."IsAutoTagged", c0."MaterializedAt", c0."MessagePreview", c0."ProductBrowsed", c0."ResolvedButtonUrlsJson", c0."ResolvedParametersJson", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."ProfileName", c1."ProfileNameUpdatedAt", c1."Tags", a."Id" AS "Id1", a."AttributesJson", a."AudienceId", a."BusinessId" AS "BusinessId1", a."ContactId" AS "ContactId0", a."CreatedAt" AS "CreatedAt0", a."CreatedByUserId", a."Email" AS "Email0", a."IsDeleted", a."IsTransientContact", a."Name" AS "Name0", a."PhoneE164", a."PhoneRaw", a."PromotedAt", a."UpdatedAt" AS "UpdatedAt0"
    FROM "CampaignRecipients" AS c0
    LEFT JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
    LEFT JOIN "AudienceMembers" AS a ON c0."AudienceMemberId" = a."Id"
) AS t0 ON t."Id" = t0."CampaignId"
ORDER BY t."Id"
2025-09-26 01:26:43.531 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='f72333b2-1a90-4764-8eea-4f9b70fc08a6'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."CampaignId", c0."IsFromTemplate", c0."Position", c0."Title", c0."Type", c0."Value", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN "CampaignButtons" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-26 01:26:43.538 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 01:26:43.542 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:26:43.545 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:26:44.392 +05:30 [INF] Received HTTP response headers after 845.6547ms - 200
2025-09-26 01:26:44.395 +05:30 [INF] End processing HTTP request after 852.5384ms - 200
2025-09-26 01:26:44.456 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p2='204cfa58-4671-413c-ba81-c977f1de489c', @p0='2025-09-25T19:56:44.4500608Z' (Nullable = true) (DbType = DateTime), @p1='2025-09-25T19:56:44.4500608Z' (DbType = DateTime), @p3='d0ff7057-ca63-44e0-ae2f-fe932e1b4c80', @p4='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p5=NULL, @p6=NULL (DbType = Guid), @p7=NULL (DbType = Guid), @p8='f72333b2-1a90-4764-8eea-4f9b70fc08a6' (Nullable = true), @p9='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p10=NULL, @p11=NULL, @p12=NULL (DbType = DateTime), @p13='2025-09-25T19:56:44.4500608Z' (DbType = DateTime), @p14='Missing body parameter(s): expected 1, got 0 filled.', @p15=NULL (DbType = Int32), @p16=NULL (DbType = Boolean), @p17='False', @p18=NULL, @p19='single_variable_body' (Nullable = false), @p20=NULL, @p21=NULL (DbType = Decimal), @p22=NULL, @p23=NULL, @p24=NULL, @p25='{"local_error":"missing_template_body_params"}', @p26='918974005240' (Nullable = false), @p27=NULL (DbType = Guid), @p28=NULL, @p29='e60d8710-aa85-4169-83f6-7f42d3e9e93c' (Nullable = true), @p30=NULL (DbType = DateTime), @p31='campaign', @p32='Failed' (Nullable = false), @p33='8f5d737a-3146-4135-897d-bd590529b518', @p34='True', @p35=NULL, @p36='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p37=NULL, @p38=NULL (DbType = Guid), @p39=NULL (DbType = Guid), @p40='f72333b2-1a90-4764-8eea-4f9b70fc08a6', @p41=NULL, @p42=NULL, @p43=NULL (DbType = DateTime), @p44='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p45=NULL, @p46='2025-09-25T19:56:44.4500608Z' (DbType = DateTime), @p47='system', @p48=NULL (DbType = DateTime), @p49=NULL, @p50=NULL, @p51='Missing body parameter(s): expected 1, got 0 filled.', @p52=NULL, @p53='False', @p54=NULL (DbType = DateTime), @p55=NULL, @p56=NULL, @p57='Hello
We are sedning {{1}} items.' (Nullable = false), @p58=NULL, @p59='d0ff7057-ca63-44e0-ae2f-fe932e1b4c80' (Nullable = true), @p60=NULL (DbType = DateTime), @p61='204cfa58-4671-413c-ba81-c977f1de489c', @p62='0', @p63='e60d8710-aa85-4169-83f6-7f42d3e9e93c' (Nullable = true), @p64='Failed', @p65=NULL (DbType = DateTime), @p66=NULL, @p67='single_variable_body', @p68=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignRecipients" SET "MaterializedAt" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32)
RETURNING "MessageTime";
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63, @p64, @p65, @p66, @p67, @p68);
2025-09-26 01:26:48.968 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@__now_0='2025-09-25T19:56:48.9476263+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:26:50.003 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 01:26:52.228 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 10623.2521ms
2025-09-26 01:26:52.231 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 01:26:52.234 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/f72333b2-1a90-4764-8eea-4f9b70fc08a6 - 200 null application/json; charset=utf-8 10644.0054ms
2025-09-26 01:26:59.040 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:56:59.0373255+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:27:09.058 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T19:57:09.0542187+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:27:14.910 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 01:27:14.912 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 01:27:14.936 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:14.941 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:14.944 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 204 null null 34.0676ms
2025-09-26 01:27:14.946 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 204 null null 33.5494ms
2025-09-26 01:27:14.959 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 01:27:14.966 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 01:27:14.974 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:14.977 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:14.978 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 01:27:14.979 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 01:27:14.987 +05:30 [INF] Route matched with {action = "GetSenders", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSenders(System.Guid) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-26 01:27:14.990 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 01:27:15.008 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-26 01:27:15.022 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-26 01:27:15.028 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.WhatsAppSettings.DTOs.WhatsAppSenderDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 01:27:15.036 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType155`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType241`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:27:15.038 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api) in 47.2708ms
2025-09-26 01:27:15.042 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 01:27:15.044 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 200 null application/json; charset=utf-8 84.341ms
2025-09-26 01:27:15.046 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 51.2566ms
2025-09-26 01:27:15.053 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 01:27:15.056 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 200 null application/json; charset=utf-8 89.8336ms
2025-09-26 01:27:18.283 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/single_variable_body - null null
2025-09-26 01:27:18.288 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:18.289 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/single_variable_body - 204 null null 6.273ms
2025-09-26 01:27:18.295 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/single_variable_body - null null
2025-09-26 01:27:18.300 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:18.302 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-26 01:27:18.311 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 01:27:18.341 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__name_1='single_variable_body'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-09-26 01:27:18.356 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body', @__language_2='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Language" = @__language_2
ORDER BY w."Language" = @__language_2 DESC
LIMIT 1
2025-09-26 01:27:18.392 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType242`10[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:27:18.401 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 85.8801ms
2025-09-26 01:27:18.404 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-26 01:27:18.407 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/single_variable_body - 200 null application/json; charset=utf-8 112.0058ms
2025-09-26 01:27:19.075 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:57:19.0721786+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:27:29.094 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:57:29.0908608+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:27:30.262 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-09-26 01:27:30.268 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:30.271 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 8.3809ms
2025-09-26 01:27:30.278 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 454
2025-09-26 01:27:30.283 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:30.286 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-26 01:27:30.295 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 01:27:30.366 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__phoneNumberId_1='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."PhoneNumberId" = @__phoneNumberId_1 AND w."IsActive"
LIMIT 1
2025-09-26 01:27:30.383 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 01:27:30.388 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:27:30.390 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:27:31.395 +05:30 [INF] Received HTTP response headers after 1001.7331ms - 200
2025-09-26 01:27:31.399 +05:30 [INF] End processing HTTP request after 1010.5254ms - 200
2025-09-26 01:27:31.619 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body', @__provider_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 01:27:31.669 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='e85bc4b4-37bb-47b3-9770-ae599a0bac6f', @p1=NULL (DbType = Guid), @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5='text', @p6='2025-09-25T19:57:31.6050251Z' (DbType = DateTime), @p7='system', @p8=NULL (DbType = Guid), @p9=NULL (DbType = DateTime), @p10=NULL, @p11=NULL, @p12=NULL, @p13=NULL, @p14=NULL, @p15='False', @p16='Hello
We are sedning {{1}} items.', @p17='Hello
We are sedning {{1}} items.' (Nullable = false), @p18='Sing1' (Nullable = false), @p19='673199269218077', @p20='META_CLOUD', @p21=NULL (DbType = DateTime), @p22=NULL (DbType = Guid), @p23='Draft' (Nullable = false), @p24='single_variable_body', @p25='[]', @p26='{"Provider":"meta_cloud","TemplateId":"1209106791238164","TemplateName":"single_variable_body","Language":"en_US","HasHeaderMedia":false,"HeaderType":"","BodyPlaceholders":[{"Index":1,"Label":null,"Example":null}],"Buttons":[]}' (DbType = Object), @p27='2025-09-25T19:57:31.6051116Z' (DbType = DateTime), @p28=NULL], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "AudienceId", "BusinessId", "CTAFlowConfigId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "DocumentUrl", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "PhoneNumberId", "Provider", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "TemplateSchemaSnapshot", "UpdatedAt", "VideoUrl")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
2025-09-26 01:27:31.675 +05:30 [INF] ✅ Campaign 'Sing1' created | Type:text | Header:none | FlowId:null | EntryTemplate:single_variable_body | Sender:META_CLOUD/673199269218077 | Recipients:0
2025-09-26 01:27:31.681 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType64`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:27:31.688 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 1388.0713ms
2025-09-26 01:27:31.693 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-26 01:27:31.695 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 1417.2667ms
2025-09-26 01:27:31.778 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-26 01:27:31.783 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:31.788 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 10.0785ms
2025-09-26 01:27:31.789 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-26 01:27:31.809 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/e85bc4b4-37bb-47b3-9770-ae599a0bac6f - null null
2025-09-26 01:27:31.789 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/e85bc4b4-37bb-47b3-9770-ae599a0bac6f/csv-sample/schema - null null
2025-09-26 01:27:31.798 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-26 01:27:31.817 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-26 01:27:31.822 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:31.826 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:31.831 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:31.837 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:31.841 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:31.842 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 53.0677ms
2025-09-26 01:27:31.844 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/e85bc4b4-37bb-47b3-9770-ae599a0bac6f - 204 null null 36.0996ms
2025-09-26 01:27:31.849 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 01:27:31.846 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/e85bc4b4-37bb-47b3-9770-ae599a0bac6f/csv-sample/schema - 204 null null 56.3739ms
2025-09-26 01:27:31.847 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 49.5226ms
2025-09-26 01:27:31.864 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-26 01:27:31.866 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-26 01:27:31.873 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/e85bc4b4-37bb-47b3-9770-ae599a0bac6f - null null
2025-09-26 01:27:31.878 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/e85bc4b4-37bb-47b3-9770-ae599a0bac6f/csv-sample/schema - null null
2025-09-26 01:27:31.894 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-26 01:27:31.883 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:31.892 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:31.902 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:31.906 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 01:27:31.908 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-26 01:27:31.909 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-26 01:27:31.910 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 01:27:31.913 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 26.6559ms
2025-09-26 01:27:31.915 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-26 01:27:31.915 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-26 01:27:31.917 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 01:27:31.920 +05:30 [INF] Route matched with {action = "GetSchema", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSchema(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 01:27:31.932 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:31.940 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='e85bc4b4-37bb-47b3-9770-ae599a0bac6f', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AudienceId", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."DocumentUrl", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."TemplateSchemaSnapshot", t."UpdatedAt", t."VideoUrl", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", t."Id1", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value", t."BusinessId1", t."CreatedAt1", t."CreatedBy0", t."FlowName", t."IsActive0", t."IsPublished", t."UpdatedAt1"
FROM (
    SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0", c1."Id" AS "Id1", c1."BusinessId" AS "BusinessId1", c1."CreatedAt" AS "CreatedAt1", c1."CreatedBy" AS "CreatedBy0", c1."FlowName", c1."IsActive" AS "IsActive0", c1."IsPublished", c1."UpdatedAt" AS "UpdatedAt1"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    LEFT JOIN "CTAFlowConfigs" AS c1 ON c."CTAFlowConfigId" = c1."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t."Id0", t."Id1"
2025-09-26 01:27:31.944 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 01:27:31.923 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 01:27:31.928 +05:30 [INF] GetPagedContactsAsync: businessId="6b5cea67-e8e9-42f7-8bde-51a9dbc02d56", tab=all, page=1, pageSize=1000
2025-09-26 01:27:31.948 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e85bc4b4-37bb-47b3-9770-ae599a0bac6f', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 01:27:31.966 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-26 01:27:31.965 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-09-26 01:27:31.968 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 151.6203ms
2025-09-26 01:27:31.995 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 60.9369ms
2025-09-26 01:27:31.992 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-26 01:27:31.986 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 01:27:31.976 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-26 01:27:32.008 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-26 01:27:32.022 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 01:27:32.012 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 01:27:32.029 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/e85bc4b4-37bb-47b3-9770-ae599a0bac6f - 200 null application/json; charset=utf-8 156.0407ms
2025-09-26 01:27:32.030 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."ProfileName", t."ProfileNameUpdatedAt", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-26 01:27:32.034 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType66`3[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType67`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 01:27:32.037 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 49.0993ms
2025-09-26 01:27:32.048 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 01:27:32.052 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api) in 109.5467ms
2025-09-26 01:27:32.053 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/e85bc4b4-37bb-47b3-9770-ae599a0bac6f/csv-sample/schema - null null
2025-09-26 01:27:32.054 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 01:27:32.057 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 130.0734ms
2025-09-26 01:27:32.060 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 01:27:32.065 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:32.069 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 153.9075ms
2025-09-26 01:27:32.072 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-26 01:27:32.074 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/e85bc4b4-37bb-47b3-9770-ae599a0bac6f/csv-sample/schema - 200 null application/json; charset=utf-8 195.5362ms
2025-09-26 01:27:32.076 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 01:27:32.084 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 220.0178ms
2025-09-26 01:27:32.094 +05:30 [INF] Route matched with {action = "GetSchema", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSchema(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 01:27:32.110 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='e85bc4b4-37bb-47b3-9770-ae599a0bac6f', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 01:27:32.123 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 01:27:32.132 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 01:27:32.138 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType66`3[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType67`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 01:27:32.143 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api) in 38.2397ms
2025-09-26 01:27:32.146 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 01:27:32.149 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/e85bc4b4-37bb-47b3-9770-ae599a0bac6f/csv-sample/schema - 200 null application/json; charset=utf-8 95.7221ms
2025-09-26 01:27:39.104 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:57:39.1010097+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:27:41.900 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch - null null
2025-09-26 01:27:41.906 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:41.908 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch - 204 null null 7.9064ms
2025-09-26 01:27:41.918 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/csv/batch - multipart/form-data; boundary=----WebKitFormBoundaryBAs5pb1lbdoqQhnu 239
2025-09-26 01:27:41.923 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:41.926 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api)'
2025-09-26 01:27:41.931 +05:30 [INF] Route matched with {action = "Upload", controller = "CsvBatch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Upload(xbytechat.api.Features.CampaignModule.DTOs.Requests.CsvBatchUploadForm, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController (xbytechat.api).
2025-09-26 01:27:41.946 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='cbdac81b-f72b-495f-8a5f-478768aaaf18', @p1=NULL (DbType = Guid), @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3=NULL, @p4='2025-09-25T19:57:41.9416438Z' (DbType = DateTime), @p5=NULL (DbType = Guid), @p6=NULL, @p7='csv_two_parameter.csv', @p8=NULL (DbType = Object), @p9='0', @p10='0', @p11='ingesting' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CsvBatches" ("Id", "AudienceId", "BusinessId", "Checksum", "CreatedAt", "CreatedByUserId", "ErrorMessage", "FileName", "HeadersJson", "RowCount", "SkippedCount", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-09-26 01:27:41.956 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p1='cbdac81b-f72b-495f-8a5f-478768aaaf18', @p0='["phone","parameter1"]' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CsvBatches" SET "HeadersJson" = @p0
WHERE "Id" = @p1;
2025-09-26 01:27:41.965 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='f04c66fe-7dc1-4fd3-96e4-df1ac9735e26', @p1='cbdac81b-f72b-495f-8a5f-478768aaaf18', @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3='2025-09-25T19:57:41.9621590Z' (DbType = DateTime), @p4=NULL, @p5=NULL, @p6='0', @p7='{"phone":"89740 05240","parameter1":"Robert Nicosta"}' (Nullable = false) (DbType = Object), @p8=NULL], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CsvRows" ("Id", "BatchId", "BusinessId", "CreatedAt", "PhoneE164", "PhoneRaw", "RowIndex", "RowJson", "ValidationError")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-09-26 01:27:41.973 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='cbdac81b-f72b-495f-8a5f-478768aaaf18', @p0='1', @p1='ready' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CsvBatches" SET "RowCount" = @p0, "Status" = @p1
WHERE "Id" = @p2;
2025-09-26 01:27:41.979 +05:30 [INF] CsvBatch "cbdac81b-f72b-495f-8a5f-478768aaaf18" ingested: 1 rows; headers=2
2025-09-26 01:27:41.982 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType70`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.CampaignModule.DTOs.CsvBatchUploadResultDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 01:27:41.985 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api) in 50.1102ms
2025-09-26 01:27:41.988 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api)'
2025-09-26 01:27:41.992 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/csv/batch - 200 null application/json; charset=utf-8 73.7975ms
2025-09-26 01:27:42.014 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch/cbdac81b-f72b-495f-8a5f-478768aaaf18/sample?take=10 - null null
2025-09-26 01:27:42.022 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:42.025 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch/cbdac81b-f72b-495f-8a5f-478768aaaf18/sample?take=10 - 204 null null 10.5301ms
2025-09-26 01:27:42.033 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/csv/batch/cbdac81b-f72b-495f-8a5f-478768aaaf18/sample?take=10 - null null
2025-09-26 01:27:42.038 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:42.041 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api)'
2025-09-26 01:27:42.043 +05:30 [INF] Route matched with {action = "Sample", controller = "CsvBatch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sample(System.Guid, Int32, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController (xbytechat.api).
2025-09-26 01:27:42.052 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__batchId_0='cbdac81b-f72b-495f-8a5f-478768aaaf18', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."HeadersJson", c."RowCount"
FROM "CsvBatches" AS c
WHERE c."Id" = @__batchId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 01:27:42.062 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__batchId_1='cbdac81b-f72b-495f-8a5f-478768aaaf18', @__p_2='10'], CommandType='"Text"', CommandTimeout='30']
SELECT c."RowIndex", c."Id", c."BatchId", c."BusinessId", c."CreatedAt", c."PhoneE164", c."PhoneRaw", c."RowJson", c."ValidationError"
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__batchId_1
ORDER BY c."RowIndex"
LIMIT @__p_2
2025-09-26 01:27:42.067 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType70`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IReadOnlyList`1[[xbytechat.api.Features.CampaignModule.DTOs.CsvRowSampleDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:27:42.070 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api) in 21.907ms
2025-09-26 01:27:42.073 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api)'
2025-09-26 01:27:42.075 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/csv/batch/cbdac81b-f72b-495f-8a5f-478768aaaf18/sample?take=10 - 200 null application/json; charset=utf-8 41.7264ms
2025-09-26 01:27:42.085 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/e85bc4b4-37bb-47b3-9770-ae599a0bac6f/mappings/suggest?batchId=cbdac81b-f72b-495f-8a5f-478768aaaf18 - null null
2025-09-26 01:27:42.090 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:42.092 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/e85bc4b4-37bb-47b3-9770-ae599a0bac6f/mappings/suggest?batchId=cbdac81b-f72b-495f-8a5f-478768aaaf18 - 204 null null 6.8152ms
2025-09-26 01:27:42.103 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/e85bc4b4-37bb-47b3-9770-ae599a0bac6f/mappings/suggest?batchId=cbdac81b-f72b-495f-8a5f-478768aaaf18 - null null
2025-09-26 01:27:42.109 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:42.112 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api)'
2025-09-26 01:27:42.114 +05:30 [INF] Route matched with {action = "Suggest", controller = "CampaignMappings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestAsync(System.Guid, System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController (xbytechat.api).
2025-09-26 01:27:42.124 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e85bc4b4-37bb-47b3-9770-ae599a0bac6f', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateParameters"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 01:27:42.134 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__batchId_0='cbdac81b-f72b-495f-8a5f-478768aaaf18', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."HeadersJson"
FROM "CsvBatches" AS c
WHERE c."Id" = @__batchId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 01:27:42.139 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:27:42.142 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api) in 24.9158ms
2025-09-26 01:27:42.146 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api)'
2025-09-26 01:27:42.148 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/e85bc4b4-37bb-47b3-9770-ae599a0bac6f/mappings/suggest?batchId=cbdac81b-f72b-495f-8a5f-478768aaaf18 - 200 null application/json; charset=utf-8 44.3242ms
2025-09-26 01:27:44.327 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/e85bc4b4-37bb-47b3-9770-ae599a0bac6f/mappings - null null
2025-09-26 01:27:44.335 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:44.336 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/e85bc4b4-37bb-47b3-9770-ae599a0bac6f/mappings - 204 null null 9.0889ms
2025-09-26 01:27:44.345 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaigns/e85bc4b4-37bb-47b3-9770-ae599a0bac6f/mappings - application/json 27
2025-09-26 01:27:44.350 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:44.353 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api)'
2025-09-26 01:27:44.355 +05:30 [INF] Route matched with {action = "Save", controller = "CampaignMappings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SaveAsync(System.Guid, System.Collections.Generic.Dictionary`2[System.String,System.String], System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController (xbytechat.api).
2025-09-26 01:27:44.377 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-26 01:27:44.380 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api) in 4.3601ms
2025-09-26 01:27:44.383 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api)'
2025-09-26 01:27:44.386 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaigns/e85bc4b4-37bb-47b3-9770-ae599a0bac6f/mappings - 204 null null 41.2052ms
2025-09-26 01:27:44.399 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/e85bc4b4-37bb-47b3-9770-ae599a0bac6f/materialize - null null
2025-09-26 01:27:44.406 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:44.408 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/e85bc4b4-37bb-47b3-9770-ae599a0bac6f/materialize - 204 null null 9.5261ms
2025-09-26 01:27:44.415 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaigns/e85bc4b4-37bb-47b3-9770-ae599a0bac6f/materialize - application/json 207
2025-09-26 01:27:44.419 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:44.421 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api)'
2025-09-26 01:27:44.423 +05:30 [INF] Route matched with {action = "CsvCreate", controller = "CampaignMaterialize"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeResponseDto]] CsvCreate(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeRequestDto, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController (xbytechat.api).
2025-09-26 01:27:44.429 +05:30 [INF] 📦 Materialize request: campaign="e85bc4b4-37bb-47b3-9770-ae599a0bac6f" persist=true batch="cbdac81b-f72b-495f-8a5f-478768aaaf18" audience='Audience 2025-09-26'
2025-09-26 01:27:44.437 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='e85bc4b4-37bb-47b3-9770-ae599a0bac6f', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1)
2025-09-26 01:27:44.448 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__request_CsvBatchId_1='cbdac81b-f72b-495f-8a5f-478768aaaf18'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__request_CsvBatchId_1
2025-09-26 01:27:44.455 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__request_CsvBatchId_1='cbdac81b-f72b-495f-8a5f-478768aaaf18', @__p_2='200'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BatchId", c."BusinessId", c."CreatedAt", c."PhoneE164", c."PhoneRaw", c."RowIndex", c."RowJson", c."ValidationError"
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__request_CsvBatchId_1
ORDER BY c."RowIndex"
LIMIT @__p_2
2025-09-26 01:27:44.463 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e85bc4b4-37bb-47b3-9770-ae599a0bac6f', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."MessageTemplate", c."TemplateId"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 01:27:44.470 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='single_variable_body'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 01:27:44.484 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__r_Phone_1='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__8__locals1_businessId_0 AND c."PhoneNumber" = @__r_Phone_1
LIMIT 1
2025-09-26 01:27:44.499 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p0='3b6496f6-1e90-44c0-aaac-30fa54c8c500', @p1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p2=NULL (DbType = Guid), @p3='2025-09-25T19:57:44.4805200Z' (DbType = DateTime), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6=NULL, @p7='False', @p8='Audience 2025-09-26' (Nullable = false), @p9='2025-09-25T19:57:44.4805200Z' (Nullable = true) (DbType = DateTime), @p10='d8fc32e1-6dea-4e87-884b-3c9754deb180', @p11='{"parameter1":"Robert Nicosta"}' (DbType = Object), @p12='3b6496f6-1e90-44c0-aaac-30fa54c8c500', @p13='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p14='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p15='2025-09-25T19:57:44.4805200Z' (DbType = DateTime), @p16=NULL (DbType = Guid), @p17=NULL, @p18='False', @p19='False', @p20=NULL, @p21='918974005240', @p22=NULL, @p23=NULL (DbType = DateTime), @p24='2025-09-25T19:57:44.4805200Z' (Nullable = true) (DbType = DateTime), @p25='088a1697-cdd8-45f4-820b-0cd9650b32eb', @p26='d8fc32e1-6dea-4e87-884b-3c9754deb180' (Nullable = true), @p27=NULL, @p28='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p29='e85bc4b4-37bb-47b3-9770-ae599a0bac6f', @p30=NULL, @p31=NULL, @p32='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p33='5422CB1058C414E0D4908ACB2061FE7124AF2EE22B1102B6AEAF8B5C4D06B43B', @p34='False', @p35='2025-09-25T19:57:44.4805200Z' (Nullable = true) (DbType = DateTime), @p36=NULL, @p37=NULL, @p38='{}' (DbType = Object), @p39='["Robert Nicosta"]' (DbType = Object), @p40=NULL (DbType = DateTime), @p41='Pending' (Nullable = false), @p42='2025-09-25T19:57:44.4805200Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Audiences" ("Id", "BusinessId", "CampaignId", "CreatedAt", "CreatedByUserId", "CsvBatchId", "Description", "IsDeleted", "Name", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
INSERT INTO "AudienceMembers" ("Id", "AttributesJson", "AudienceId", "BusinessId", "ContactId", "CreatedAt", "CreatedByUserId", "Email", "IsDeleted", "IsTransientContact", "Name", "PhoneE164", "PhoneRaw", "PromotedAt", "UpdatedAt")
VALUES (@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
INSERT INTO "CampaignRecipients" ("Id", "AudienceMemberId", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IdempotencyKey", "IsAutoTagged", "MaterializedAt", "MessagePreview", "ProductBrowsed", "ResolvedButtonUrlsJson", "ResolvedParametersJson", "SentAt", "Status", "UpdatedAt")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42);
2025-09-26 01:27:44.526 +05:30 [INF] 📦 Materialize result: campaign="e85bc4b4-37bb-47b3-9770-ae599a0bac6f" materialized=1 skipped=0 audienceId="3b6496f6-1e90-44c0-aaac-30fa54c8c500"
2025-09-26 01:27:44.530 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeResponseDto'.
2025-09-26 01:27:44.532 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api) in 105.9233ms
2025-09-26 01:27:44.536 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api)'
2025-09-26 01:27:44.540 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaigns/e85bc4b4-37bb-47b3-9770-ae599a0bac6f/materialize - 200 null application/json; charset=utf-8 125.1648ms
2025-09-26 01:27:49.111 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:57:49.1085135+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:27:49.392 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 01:27:49.403 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:49.406 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 13.8509ms
2025-09-26 01:27:49.429 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 01:27:49.437 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:49.440 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 01:27:49.443 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 01:27:49.470 +05:30 [INF] Executed DbCommand (23ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-09-26 01:27:49.475 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 01:27:49.478 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 32.6309ms
2025-09-26 01:27:49.482 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 01:27:49.484 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 55.1302ms
2025-09-26 01:27:51.077 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e85bc4b4-37bb-47b3-9770-ae599a0bac6f - null null
2025-09-26 01:27:51.083 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:51.084 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/e85bc4b4-37bb-47b3-9770-ae599a0bac6f - 204 null null 7.0808ms
2025-09-26 01:27:51.092 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e85bc4b4-37bb-47b3-9770-ae599a0bac6f - null 0
2025-09-26 01:27:51.097 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:27:51.100 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 01:27:51.103 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 01:27:53.880 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='e85bc4b4-37bb-47b3-9770-ae599a0bac6f'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
ORDER BY c."Id"
LIMIT 1
2025-09-26 01:27:53.919 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='e85bc4b4-37bb-47b3-9770-ae599a0bac6f'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."AudienceMemberId", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IdempotencyKey", t0."IsAutoTagged", t0."MaterializedAt", t0."MessagePreview", t0."ProductBrowsed", t0."ResolvedButtonUrlsJson", t0."ResolvedParametersJson", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."ProfileName", t0."ProfileNameUpdatedAt", t0."Tags", t0."Id1", t0."AttributesJson", t0."AudienceId", t0."BusinessId1", t0."ContactId0", t0."CreatedAt0", t0."CreatedByUserId", t0."Email0", t0."IsDeleted", t0."IsTransientContact", t0."Name0", t0."PhoneE164", t0."PhoneRaw", t0."PromotedAt", t0."UpdatedAt0", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN (
    SELECT c0."Id", c0."AudienceMemberId", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IdempotencyKey", c0."IsAutoTagged", c0."MaterializedAt", c0."MessagePreview", c0."ProductBrowsed", c0."ResolvedButtonUrlsJson", c0."ResolvedParametersJson", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."ProfileName", c1."ProfileNameUpdatedAt", c1."Tags", a."Id" AS "Id1", a."AttributesJson", a."AudienceId", a."BusinessId" AS "BusinessId1", a."ContactId" AS "ContactId0", a."CreatedAt" AS "CreatedAt0", a."CreatedByUserId", a."Email" AS "Email0", a."IsDeleted", a."IsTransientContact", a."Name" AS "Name0", a."PhoneE164", a."PhoneRaw", a."PromotedAt", a."UpdatedAt" AS "UpdatedAt0"
    FROM "CampaignRecipients" AS c0
    LEFT JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
    LEFT JOIN "AudienceMembers" AS a ON c0."AudienceMemberId" = a."Id"
) AS t0 ON t."Id" = t0."CampaignId"
ORDER BY t."Id"
2025-09-26 01:27:53.928 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='e85bc4b4-37bb-47b3-9770-ae599a0bac6f'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."CampaignId", c0."IsFromTemplate", c0."Position", c0."Title", c0."Type", c0."Value", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN "CampaignButtons" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-26 01:27:53.935 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 01:27:53.942 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:27:53.945 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:27:56.280 +05:30 [INF] Received HTTP response headers after 2332.2327ms - 200
2025-09-26 01:27:56.290 +05:30 [INF] End processing HTTP request after 2347.5357ms - 200
2025-09-26 01:27:56.388 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 01:27:56.407 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 01:27:58.721 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 01:27:58.725 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 01:27:59.133 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:57:59.1305077+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:28:00.183 +05:30 [INF] Received HTTP response headers after 1455.3428ms - 200
2025-09-26 01:28:00.186 +05:30 [INF] End processing HTTP request after 1464.8815ms - 200
2025-09-26 01:28:03.430 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageLogId_0='42862bbb-d6d6-4d4e-a6b7-fd1571f83ce3', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 01:28:03.443 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p4='088a1697-cdd8-45f4-820b-0cd9650b32eb', @p0='e3cea4d81d1c929b6da9c60bc634da5917363cfedca3a742173ec669a4d398ad', @p1='2025-09-25T19:57:56.3842701Z' (Nullable = true) (DbType = DateTime), @p2='[]' (DbType = Object), @p3='2025-09-25T19:57:56.3842701Z' (DbType = DateTime), @p5='42862bbb-d6d6-4d4e-a6b7-fd1571f83ce3', @p6='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p7=NULL, @p8=NULL (DbType = Guid), @p9=NULL (DbType = Guid), @p10='e85bc4b4-37bb-47b3-9770-ae599a0bac6f' (Nullable = true), @p11='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p12=NULL, @p13=NULL, @p14=NULL (DbType = DateTime), @p15='2025-09-25T19:57:56.3842701Z' (DbType = DateTime), @p16=NULL, @p17=NULL (DbType = Int32), @p18=NULL (DbType = Boolean), @p19='False', @p20=NULL, @p21='single_variable_body' (Nullable = false), @p22='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4NDNFRTdFM0UzNDM4NUM4AA==', @p23=NULL (DbType = Decimal), @p24=NULL, @p25=NULL, @p26=NULL, @p27='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4NDNFRTdFM0UzNDM4NUM4AA==","message_status":"accepted"}]}', @p28='918974005240' (Nullable = false), @p29=NULL (DbType = Guid), @p30=NULL, @p31='e3de6c72-acaf-4da3-95c1-2501d12309f0' (Nullable = true), @p32='2025-09-25T19:57:56.3842701Z' (Nullable = true) (DbType = DateTime), @p33='campaign', @p34='Sent' (Nullable = false), @p35='7108cc6c-26ef-4402-8397-3e2cbbd32060', @p36='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p37=NULL, @p38=NULL, @p39='2025-09-25T19:58:03.4367293+00:00' (DbType = DateTime), @p40='send_response' (Nullable = false), @p41=NULL (DbType = Boolean), @p42='42862bbb-d6d6-4d4e-a6b7-fd1571f83ce3' (Nullable = true), @p43='2025-09-25T19:58:03.4367313+00:00' (DbType = DateTime), @p44='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4NDNFRTdFM0UzNDM4NUM4AA==","message_status":"accepted"}]}' (Nullable = false), @p45=NULL (DbType = Decimal), @p46=NULL, @p47='META_CLOUD' (Nullable = false), @p48='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4NDNFRTdFM0UzNDM4NUM4AA=='], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignRecipients" SET "IdempotencyKey" = @p0, "MaterializedAt" = @p1, "ResolvedButtonUrlsJson" = @p2, "UpdatedAt" = @p3
WHERE "Id" = @p4;
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34)
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48);
2025-09-26 01:28:03.464 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='5717d224-035d-4ae5-8314-c27936df3942', @p1='True', @p2=NULL, @p3='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p4=NULL, @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7='e85bc4b4-37bb-47b3-9770-ae599a0bac6f', @p8=NULL, @p9=NULL, @p10=NULL (DbType = DateTime), @p11='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p12=NULL, @p13='2025-09-25T19:57:56.3842701Z' (DbType = DateTime), @p14='system', @p15=NULL (DbType = DateTime), @p16=NULL, @p17=NULL, @p18=NULL, @p19=NULL, @p20='False', @p21=NULL (DbType = DateTime), @p22=NULL, @p23=NULL, @p24='Hello
We are sedning {{1}} items.' (Nullable = false), @p25='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4NDNFRTdFM0UzNDM4NUM4AA==', @p26='42862bbb-d6d6-4d4e-a6b7-fd1571f83ce3' (Nullable = true), @p27=NULL (DbType = DateTime), @p28='088a1697-cdd8-45f4-820b-0cd9650b32eb', @p29='0', @p30='e3de6c72-acaf-4da3-95c1-2501d12309f0' (Nullable = true), @p31='Sent', @p32='2025-09-25T19:57:56.3842701Z' (Nullable = true) (DbType = DateTime), @p33=NULL, @p34='single_variable_body', @p35=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-09-26 01:28:05.213 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 01:28:05.217 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 14110.0776ms
2025-09-26 01:28:05.224 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 01:28:05.227 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/e85bc4b4-37bb-47b3-9770-ae599a0bac6f - 200 null application/json; charset=utf-8 14134.5739ms
2025-09-26 01:28:08.580 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-26 01:28:08.586 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:28:08.588 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:28:08.593 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4NDNFRTdFM0UzNDM4NUM4AA==","status":"sent","timestamp":"1758830287","recipient_id":"918974005240","conversation":{"id":"b195081fb8eac08bb73780cb57091fd5","expiration_timestamp":"1758830287","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:28:08.596 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:28:08.596 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4NDNFRTdFM0UzNDM4NUM4AA==","status":"sent","timestamp":"1758830287","recipient_id":"918974005240","conversation":{"id":"b195081fb8eac08bb73780cb57091fd5","expiration_timestamp":"1758830287","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:28:08.598 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:28:08.602 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-26 01:28:08.603 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 11.4177ms
2025-09-26 01:28:08.611 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-26 01:28:08.613 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:28:08.617 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-26 01:28:08.619 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 39.2783ms
2025-09-26 01:28:08.622 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:28:08.638 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4NDNFRTdFM0UzNDM4NUM4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:28:08.645 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='5717d224-035d-4ae5-8314-c27936df3942'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 01:28:08.648 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4NDNFRTdFM0UzNDM4NUM4AA== (legacy)
2025-09-26 01:28:09.141 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-25T19:58:09.1393669+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:28:09.715 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-09-26 01:28:09.720 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:28:09.723 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:28:09.726 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4NDNFRTdFM0UzNDM4NUM4AA==","status":"delivered","timestamp":"1758830287","recipient_id":"918974005240","conversation":{"id":"b195081fb8eac08bb73780cb57091fd5","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:28:09.729 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:28:09.731 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:28:09.730 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4NDNFRTdFM0UzNDM4NUM4AA==","status":"delivered","timestamp":"1758830287","recipient_id":"918974005240","conversation":{"id":"b195081fb8eac08bb73780cb57091fd5","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:28:09.735 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 8.7064ms
2025-09-26 01:28:09.738 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:28:09.741 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:28:09.746 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4NDNFRTdFM0UzNDM4NUM4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:28:09.747 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 31.9258ms
2025-09-26 01:28:09.759 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__sid_0='5717d224-035d-4ae5-8314-c27936df3942'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 01:28:09.773 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='5717d224-035d-4ae5-8314-c27936df3942', @p0='2025-09-25T19:58:07.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-26 01:28:09.777 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4NDNFRTdFM0UzNDM4NUM4AA== → Delivered
2025-09-26 01:28:12.261 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-09-26 01:28:12.266 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:28:12.269 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:28:12.273 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4NDNFRTdFM0UzNDM4NUM4AA==","status":"read","timestamp":"1758830290","recipient_id":"918974005240","conversation":{"id":"b195081fb8eac08bb73780cb57091fd5","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:28:12.276 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:28:12.276 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4NDNFRTdFM0UzNDM4NUM4AA==","status":"read","timestamp":"1758830290","recipient_id":"918974005240","conversation":{"id":"b195081fb8eac08bb73780cb57091fd5","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:28:12.278 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:28:12.281 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:28:12.283 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 10.7221ms
2025-09-26 01:28:12.290 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4NDNFRTdFM0UzNDM4NUM4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:28:12.293 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:28:12.300 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='5717d224-035d-4ae5-8314-c27936df3942'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 01:28:12.301 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 40.7024ms
2025-09-26 01:28:12.310 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='5717d224-035d-4ae5-8314-c27936df3942', @p0='2025-09-25T19:58:10.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-26 01:28:12.321 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4NDNFRTdFM0UzNDM4NUM4AA== → Read
2025-09-26 01:28:19.151 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:58:19.1477418+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:28:29.169 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__now_0='2025-09-25T19:58:29.1633487+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:28:36.236 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 01:28:36.238 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 01:28:36.243 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:28:36.249 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:28:36.251 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 204 null null 15.1537ms
2025-09-26 01:28:36.253 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 204 null null 15.5203ms
2025-09-26 01:28:36.260 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 01:28:36.267 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 01:28:36.273 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:28:36.278 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:28:36.281 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 01:28:36.282 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 01:28:36.287 +05:30 [INF] Route matched with {action = "GetSenders", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSenders(System.Guid) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-26 01:28:36.289 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 01:28:36.297 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-26 01:28:36.306 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-26 01:28:36.311 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.WhatsAppSettings.DTOs.WhatsAppSenderDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 01:28:36.314 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType155`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType241`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:28:36.317 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api) in 24.4713ms
2025-09-26 01:28:36.320 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 22.5416ms
2025-09-26 01:28:36.322 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 01:28:36.325 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 01:28:36.327 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 200 null application/json; charset=utf-8 67.3305ms
2025-09-26 01:28:36.329 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 200 null application/json; charset=utf-8 62.4194ms
2025-09-26 01:28:39.194 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__now_0='2025-09-25T19:58:39.1857861+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:28:49.427 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__now_0='2025-09-25T19:58:49.2613397+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:28:59.444 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:58:59.4411326+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:29:09.450 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:59:09.4457222+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:29:12.442 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-26 01:29:12.448 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:29:12.450 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 8.0085ms
2025-09-26 01:29:12.461 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-26 01:29:12.469 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:29:12.471 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-26 01:29:12.479 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-09-26 01:29:12.493 +05:30 [INF] 🔎 Fetching templates for BusinessId "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56"
2025-09-26 01:29:12.505 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 01:29:12.512 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 01:29:12.514 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 01:29:14.411 +05:30 [INF] Received HTTP response headers after 1895.042ms - 200
2025-09-26 01:29:14.413 +05:30 [INF] End processing HTTP request after 1901.5425ms - 200
2025-09-26 01:29:14.514 +05:30 [INF] 📦 Meta Template API (Biz "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56") payload:
{"data":[{"name":"single_variable_body","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\nWe are sedning {{1}} items.","example":{"body_text":[["five"]]}},{"type":"FOOTER","text":"Sent by xplorebyte"}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1209106791238164"},{"name":"variable_csv_demo","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Dear  {{1}},\n\nWe are happy to announce that we are going to launch our new product on {{2}}.\n\nRegards,\nLeadsCone","example":{"body_text":[["Nicolaus","Monaday"]]}}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1463763351520294"},{"name":"support_report_issue_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We're sorry to hear you're experiencing an issue.\n\nTo help us resolve it quickly, please tap the button below to connect with our technical support team. Please be ready to provide a brief description of the problem."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Connect to Technical Team"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"755167220845328"},{"name":"pdf_template","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"DOCUMENT","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534415257_508230149051927_6330429317144744326_n.pdf?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=b2YWNnPv7YoQ7kNvwGBOF9H&_nc_oc=AdnM42tWm_8qqw_k0xD7FhroXxYvcubATQXPHvhhIZLPw_Ca_0jiGdHeXUtBTpHKHS7PCjdC4iXn5IvJmc1Yrz_l&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=_hjR3adVzSX9Y-oXFlZr5Q&oh=01_Q5Aa2gGyUtZS4WQRCwERU5Jd4kxEtqFnlDWo6fIE94JO0VlnJw&oe=68FD04F5"]}},{"type":"BODY","text":"Hello {{1}},\n\nPlease find your Invoice.","example":{"body_text":[["Usernmok"]]}},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Recieved"},{"type":"QUICK_REPLY","text":"No Received"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"508230145718594"},{"name":"welcome_video","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"VIDEO","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534417141_1284099973020036_5812680847202991712_n.mp4?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=zsyoQsHKvQoQ7kNvwHIJtvF&_nc_oc=AdlV0sbKmrKDFtfOqartFnb3DwICFJYiPMP2fzM_-1mz1pI4Ds5bRLhMXp-s4G1wiMKoGlAbweW1acnIp3V6u6FF&_nc_zt=28&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=_hjR3adVzSX9Y-oXFlZr5Q&oh=01_Q5Aa2gGu42rxrrFIpAN0qVNH3yTxyk1sQPs889YvQGJ_lD7ZBg&oe=68FCFAC3"]}},{"type":"BODY","text":"Hello {{1}} \ud83d\udc4b\nAapka order successfully deliver ho chuka hai. \ud83d\ude9a\u2728\nKya aapne Nirvasa ka Vaji Amrit Vati lena start kar diya hai? \ud83d\udc8a\nNeeche diye gaye options me se select karke bataye \ud83d\udc47","example":{"body_text":[["Nicolus"]]}},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Yes"},{"type":"QUICK_REPLY","text":"No"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1284099969686703"},{"name":"template_1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 1"},{"type":"BODY","text":"This is the Template : 1"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 2"},{"type":"QUICK_REPLY","text":"Show Me Template 3"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2381212765606675"},{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"},{"name":"template_3","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 3"},{"type":"BODY","text":"This is themplate : 3"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1760623375330098"},{"name":"template_2","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 2"},{"type":"BODY","text":"This is teh template 2"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1222093123248950"},{"name":"welcome_menu_minds","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello! Thank you for contacting MindsMiratus.\n\nIf you're a new visitor, we're happy to help you get started. If you're an existing customer, we're here to support you. Please choose from the options below."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Explore Our Services"},{"type":"QUICK_REPLY","text":"View Our Products"},{"type":"QUICK_REPLY","text":"Customer Support"},{"type":"QUICK_REPLY","text":"Contact Sales"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1115530356706526"},{"name":"contact_sales_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We'd love to discuss how we can help your business grow. You can reach our sales team via email at info\u0040mindsmiratus.com or call us at +91-321-123-4321.\n\nWould you like one of our experts to call you back?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Yes, call me back"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"954501560165102"},{"name":"human_takeover_confirmation_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Thank you! We've received your request. One of our experts will get in touch with you shortly.\n\nIs there anything else I can help you with in the meantime?"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1304432401406654"},{"name":"products_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We are proud to offer our powerful and easy-to-use GST Software, designed to simplify your tax compliance, invoicing, and financial management.\n\nWhat would you like to do?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a GST Demo"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2567632853585898"},{"name":"services_menu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We offer a wide range of services to power your business's growth. Please select a category you are interested in:"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Design Services"},{"type":"QUICK_REPLY","text":"Development Services"},{"type":"QUICK_REPLY","text":"Digital & Tele-Marketing"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"738253949023987"},{"name":"support_project_status_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"To check the status of your ongoing project, please provide your registered email address or project ID, and one of our project managers will get back to you with a detailed update shortly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Project Manager"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1599668577490835"},{"name":"support_main_menu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Welcome to the MindsMiratus Support Center. We're here to help you with any questions or issues you may have.\n\nPlease select an option so we can assist you faster."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"GST Software Support"},{"type":"QUICK_REPLY","text":"Check Project Status"},{"type":"QUICK_REPLY","text":"Report Technical Issues"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en","status":"APPROVED","category":"MARKETING","id":"679342281096115"},{"name":"demo","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Demo Template"},{"type":"BODY","text":"Demo Template Message."},{"type":"FOOTER","text":"sent by ExploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/visit"]},{"type":"URL","text":"Shop Now","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/shopnow"]},{"type":"PHONE_NUMBER","text":"Call Us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"757818770430461"},{"name":"dev_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our expert developers build robust and scalable solutions tailored to your business needs. Which area of development interests you?\n\n\ud83d\udcbb Web & Software Dev: Custom applications and software solutions.\n\ud83d\udcf1 Mobile App Dev: Engaging and high-performance apps for iOS and Android.\n\ud83d\uded2 E-commerce Dev: Powerful online stores that drive sales and growth."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Discuss a Project"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3118090155157247"},{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/tutrials"]},{"type":"URL","text":"View Demo","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"},{"name":"build_urltracking","parameter_format":"NAMED","components":[{"type":"BODY","text":"Hello \n\nThis is the test message to check wheather redirecting url is working or not."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/softwaredev"]},{"type":"URL","text":"Explore More","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/moreopt"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"788214393726841"},{"name":"marketing_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We help you reach your target audience and grow your brand effectively. Explore our marketing services:\n\n\ud83d\udcc8 Digital Marketing: SEO, Social Media Marketing, and targeted PPC campaigns.\n\ud83d\udcde Tele-Marketing: IVR systems, Bulk SMS, Voice Calls, and official WhatsApp API solutions."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Get a Marketing Plan"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1683803515627636"},{"name":"design_services_submenu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our creative team delivers stunning and effective designs to make your brand stand out. Which design service would you like to know more about?\n\n\ud83c\udfa8 Website Designing: We build beautiful, responsive, and user-friendly websites.\n\ud83d\udd8c\ufe0f Graphic Designing: We create compelling visuals, logos, and branding materials."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a Design Quote"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3291988187631744"},{"name":"support_gst_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"You've reached support for our GST Software. How can we help?\n\n\ud83d\udd27 Technical Help: For installation issues, errors, or bugs.\n\ud83d\udca1 Feature Questions: To understand how to use a specific feature.\n\ud83d\udcda View FAQs: Get answers to common questions instantly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Support Agent"},{"type":"QUICK_REPLY","text":"View FAQs"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1305308197880244"},{"name":"about_us_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"MindsMiratus is a leading IT solutions company dedicated to helping businesses grow through innovative and effective digital services. From design to development and marketing, we provide comprehensive solutions to elevate your brand.\n\nWhat would you like to do next?"},{"type":"FOOTER","text":"sent by Mindsmirtus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"},{"type":"QUICK_REPLY","text":"Talk to an Expert"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1971204310331370"},{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"\u26a1\ufe0f Feature Annoucement ! \u26a1\ufe0f\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/\u00257B\u00257BI\u00257D\u00257D{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"View Tutorials","url":"https:\/\/www.youtube.com\/\u00257B\u00257Bi\u00257D\u00257D{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"},{"name":"call_log","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is the checking for call log event."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/seeme"]},{"type":"URL","text":"Call Us","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/callme"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1286058192539680"},{"name":"track_url_after_flow_integ","message_send_ttl_seconds":86400,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BODY","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/vosiatstore"]},{"type":"URL","text":"Visit Demo","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/demo"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1084981273615848"},{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"watch Video","url":"https:\/\/www.youtube.com\/{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"},{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=eJAeQFq4sbYQ7kNvwFpXn8W&_nc_oc=AdlgBuy__gBLfPG4qOcNpzI6X3KF4Tb4oRFGDEgRhrr8VicCxdiD-S5h5XcqMdUYlP-IjhOpU7eelCekwHjyfMWO&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=_hjR3adVzSX9Y-oXFlZr5Q&oh=01_Q5Aa2gGvbfXajrFgyieaUFHSOjrQX9pjqgn7A01VjZ8nRueSvg&oe=68FD2B0F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! \ud83c\udf89\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15\u0025 discount** on your purchase. Don't just follow the trend\u2014set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https:\/\/xplorebytesolutions.com\/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"},{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https:\/\/www.qwexample.com\/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"}],"paging":{"cursors":{"before":"QVFIU0NIbkw4UHF0R1ZAWQktuTmtDeURyeXNac29xY3hRd0piUWh5SFNyUlRVRWpjanNGMW4za1dhYTFfN3R5R05MTmUtcXpxcnZAXMlhsakdQN0VvdXVOVjd3","after":"QVFIU1hSaTdZATm1tSjZAiNnlaQ1RubTFQZAjlKUUhnU1l2Y3hudWE0NXY0U3d0ZAE8wSV9NeWplbDlCS1FoRHBPN2NDOW1GZA3NLRHk4b3JBVU1TeklYd0JodU93"}}}
2025-09-26 01:29:14.577 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType155`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:29:14.589 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 2105.3998ms
2025-09-26 01:29:14.592 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-26 01:29:14.594 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 2133.4911ms
2025-09-26 01:29:19.468 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:59:19.4649917+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:29:29.476 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:59:29.4739261+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:29:34.959 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-26 01:29:34.965 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:29:34.967 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 7.1056ms
2025-09-26 01:29:34.978 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-26 01:29:34.984 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:29:34.994 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-26 01:29:34.997 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-09-26 01:29:35.002 +05:30 [INF] 🔎 Fetching templates for BusinessId "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56"
2025-09-26 01:29:35.008 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 01:29:35.015 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 01:29:35.018 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 01:29:36.529 +05:30 [INF] Received HTTP response headers after 1509.61ms - 200
2025-09-26 01:29:36.532 +05:30 [INF] End processing HTTP request after 1516.328ms - 200
2025-09-26 01:29:36.938 +05:30 [INF] 📦 Meta Template API (Biz "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56") payload:
{"data":[{"name":"single_variable_body","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\nWe are sedning {{1}} items.","example":{"body_text":[["five"]]}},{"type":"FOOTER","text":"Sent by xplorebyte"}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1209106791238164"},{"name":"variable_csv_demo","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Dear  {{1}},\n\nWe are happy to announce that we are going to launch our new product on {{2}}.\n\nRegards,\nLeadsCone","example":{"body_text":[["Nicolaus","Monaday"]]}}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1463763351520294"},{"name":"support_report_issue_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We're sorry to hear you're experiencing an issue.\n\nTo help us resolve it quickly, please tap the button below to connect with our technical support team. Please be ready to provide a brief description of the problem."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Connect to Technical Team"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"755167220845328"},{"name":"pdf_template","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"DOCUMENT","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534415257_508230149051927_6330429317144744326_n.pdf?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=b2YWNnPv7YoQ7kNvwGBOF9H&_nc_oc=AdnM42tWm_8qqw_k0xD7FhroXxYvcubATQXPHvhhIZLPw_Ca_0jiGdHeXUtBTpHKHS7PCjdC4iXn5IvJmc1Yrz_l&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=pYLNmCdVPZKlaMq4Z_srrQ&oh=01_Q5Aa2gGTM5ssBCOEGkNCubRXEonXRoVu0Si3uEXT9F0YpTwT3A&oe=68FD04F5"]}},{"type":"BODY","text":"Hello {{1}},\n\nPlease find your Invoice.","example":{"body_text":[["Usernmok"]]}},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Recieved"},{"type":"QUICK_REPLY","text":"No Received"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"508230145718594"},{"name":"welcome_video","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"VIDEO","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534417141_1284099973020036_5812680847202991712_n.mp4?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=zsyoQsHKvQoQ7kNvwHIJtvF&_nc_oc=AdlV0sbKmrKDFtfOqartFnb3DwICFJYiPMP2fzM_-1mz1pI4Ds5bRLhMXp-s4G1wiMKoGlAbweW1acnIp3V6u6FF&_nc_zt=28&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=pYLNmCdVPZKlaMq4Z_srrQ&oh=01_Q5Aa2gFLRDdTMT04rA6RxbNpt9qeWmt8pnmH9dQzRCzTMkUp_g&oe=68FCFAC3"]}},{"type":"BODY","text":"Hello {{1}} \ud83d\udc4b\nAapka order successfully deliver ho chuka hai. \ud83d\ude9a\u2728\nKya aapne Nirvasa ka Vaji Amrit Vati lena start kar diya hai? \ud83d\udc8a\nNeeche diye gaye options me se select karke bataye \ud83d\udc47","example":{"body_text":[["Nicolus"]]}},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Yes"},{"type":"QUICK_REPLY","text":"No"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1284099969686703"},{"name":"template_1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 1"},{"type":"BODY","text":"This is the Template : 1"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 2"},{"type":"QUICK_REPLY","text":"Show Me Template 3"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2381212765606675"},{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"},{"name":"template_3","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 3"},{"type":"BODY","text":"This is themplate : 3"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1760623375330098"},{"name":"template_2","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 2"},{"type":"BODY","text":"This is teh template 2"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1222093123248950"},{"name":"welcome_menu_minds","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello! Thank you for contacting MindsMiratus.\n\nIf you're a new visitor, we're happy to help you get started. If you're an existing customer, we're here to support you. Please choose from the options below."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Explore Our Services"},{"type":"QUICK_REPLY","text":"View Our Products"},{"type":"QUICK_REPLY","text":"Customer Support"},{"type":"QUICK_REPLY","text":"Contact Sales"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1115530356706526"},{"name":"contact_sales_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We'd love to discuss how we can help your business grow. You can reach our sales team via email at info\u0040mindsmiratus.com or call us at +91-321-123-4321.\n\nWould you like one of our experts to call you back?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Yes, call me back"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"954501560165102"},{"name":"human_takeover_confirmation_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Thank you! We've received your request. One of our experts will get in touch with you shortly.\n\nIs there anything else I can help you with in the meantime?"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1304432401406654"},{"name":"products_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We are proud to offer our powerful and easy-to-use GST Software, designed to simplify your tax compliance, invoicing, and financial management.\n\nWhat would you like to do?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a GST Demo"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2567632853585898"},{"name":"services_menu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We offer a wide range of services to power your business's growth. Please select a category you are interested in:"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Design Services"},{"type":"QUICK_REPLY","text":"Development Services"},{"type":"QUICK_REPLY","text":"Digital & Tele-Marketing"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"738253949023987"},{"name":"support_project_status_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"To check the status of your ongoing project, please provide your registered email address or project ID, and one of our project managers will get back to you with a detailed update shortly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Project Manager"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1599668577490835"},{"name":"support_main_menu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Welcome to the MindsMiratus Support Center. We're here to help you with any questions or issues you may have.\n\nPlease select an option so we can assist you faster."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"GST Software Support"},{"type":"QUICK_REPLY","text":"Check Project Status"},{"type":"QUICK_REPLY","text":"Report Technical Issues"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en","status":"APPROVED","category":"MARKETING","id":"679342281096115"},{"name":"demo","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Demo Template"},{"type":"BODY","text":"Demo Template Message."},{"type":"FOOTER","text":"sent by ExploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/visit"]},{"type":"URL","text":"Shop Now","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/shopnow"]},{"type":"PHONE_NUMBER","text":"Call Us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"757818770430461"},{"name":"dev_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our expert developers build robust and scalable solutions tailored to your business needs. Which area of development interests you?\n\n\ud83d\udcbb Web & Software Dev: Custom applications and software solutions.\n\ud83d\udcf1 Mobile App Dev: Engaging and high-performance apps for iOS and Android.\n\ud83d\uded2 E-commerce Dev: Powerful online stores that drive sales and growth."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Discuss a Project"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3118090155157247"},{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/tutrials"]},{"type":"URL","text":"View Demo","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"},{"name":"build_urltracking","parameter_format":"NAMED","components":[{"type":"BODY","text":"Hello \n\nThis is the test message to check wheather redirecting url is working or not."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/softwaredev"]},{"type":"URL","text":"Explore More","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/moreopt"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"788214393726841"},{"name":"marketing_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We help you reach your target audience and grow your brand effectively. Explore our marketing services:\n\n\ud83d\udcc8 Digital Marketing: SEO, Social Media Marketing, and targeted PPC campaigns.\n\ud83d\udcde Tele-Marketing: IVR systems, Bulk SMS, Voice Calls, and official WhatsApp API solutions."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Get a Marketing Plan"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1683803515627636"},{"name":"design_services_submenu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our creative team delivers stunning and effective designs to make your brand stand out. Which design service would you like to know more about?\n\n\ud83c\udfa8 Website Designing: We build beautiful, responsive, and user-friendly websites.\n\ud83d\udd8c\ufe0f Graphic Designing: We create compelling visuals, logos, and branding materials."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a Design Quote"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3291988187631744"},{"name":"support_gst_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"You've reached support for our GST Software. How can we help?\n\n\ud83d\udd27 Technical Help: For installation issues, errors, or bugs.\n\ud83d\udca1 Feature Questions: To understand how to use a specific feature.\n\ud83d\udcda View FAQs: Get answers to common questions instantly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Support Agent"},{"type":"QUICK_REPLY","text":"View FAQs"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1305308197880244"},{"name":"about_us_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"MindsMiratus is a leading IT solutions company dedicated to helping businesses grow through innovative and effective digital services. From design to development and marketing, we provide comprehensive solutions to elevate your brand.\n\nWhat would you like to do next?"},{"type":"FOOTER","text":"sent by Mindsmirtus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"},{"type":"QUICK_REPLY","text":"Talk to an Expert"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1971204310331370"},{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"\u26a1\ufe0f Feature Annoucement ! \u26a1\ufe0f\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/\u00257B\u00257BI\u00257D\u00257D{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"View Tutorials","url":"https:\/\/www.youtube.com\/\u00257B\u00257Bi\u00257D\u00257D{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"},{"name":"call_log","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is the checking for call log event."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/seeme"]},{"type":"URL","text":"Call Us","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/callme"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1286058192539680"},{"name":"track_url_after_flow_integ","message_send_ttl_seconds":86400,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BODY","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/vosiatstore"]},{"type":"URL","text":"Visit Demo","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/demo"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1084981273615848"},{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"watch Video","url":"https:\/\/www.youtube.com\/{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"},{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=eJAeQFq4sbYQ7kNvwFpXn8W&_nc_oc=AdlgBuy__gBLfPG4qOcNpzI6X3KF4Tb4oRFGDEgRhrr8VicCxdiD-S5h5XcqMdUYlP-IjhOpU7eelCekwHjyfMWO&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=pYLNmCdVPZKlaMq4Z_srrQ&oh=01_Q5Aa2gFmwD7gG21apMDdvsB1_fWLiKljXH8GqNwMEGrsXRH7nw&oe=68FD2B0F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! \ud83c\udf89\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15\u0025 discount** on your purchase. Don't just follow the trend\u2014set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https:\/\/xplorebytesolutions.com\/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"},{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https:\/\/www.qwexample.com\/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"}],"paging":{"cursors":{"before":"QVFIU0NIbkw4UHF0R1ZAWQktuTmtDeURyeXNac29xY3hRd0piUWh5SFNyUlRVRWpjanNGMW4za1dhYTFfN3R5R05MTmUtcXpxcnZAXMlhsakdQN0VvdXVOVjd3","after":"QVFIU1hSaTdZATm1tSjZAiNnlaQ1RubTFQZAjlKUUhnU1l2Y3hudWE0NXY0U3d0ZAE8wSV9NeWplbDlCS1FoRHBPN2NDOW1GZA3NLRHk4b3JBVU1TeklYd0JodU93"}}}
2025-09-26 01:29:36.951 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType155`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:29:36.958 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 1956.8824ms
2025-09-26 01:29:36.960 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-26 01:29:36.962 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 1984.5387ms
2025-09-26 01:29:39.496 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:59:39.4929203+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:29:49.517 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T19:59:49.5138713+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:29:59.528 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T19:59:59.5242322+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:30:09.547 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:00:09.5434696+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:30:19.556 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:00:19.5527079+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:30:22.688 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-26 01:30:22.693 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:30:22.697 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 9.0772ms
2025-09-26 01:30:22.710 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-26 01:30:22.715 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:30:22.719 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-26 01:30:22.724 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-09-26 01:30:22.728 +05:30 [INF] 🔎 Fetching templates for BusinessId "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56"
2025-09-26 01:30:22.737 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 01:30:22.744 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 01:30:22.746 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 01:30:23.738 +05:30 [INF] Received HTTP response headers after 988.557ms - 401
2025-09-26 01:30:23.741 +05:30 [INF] End processing HTTP request after 996.5375ms - 401
2025-09-26 01:30:23.743 +05:30 [INF] 📦 Meta Template API (Biz "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56") payload:
{"error":{"message":"Error validating access token: Session has expired on Thursday, 25-Sep-25 13:00:00 PDT. The current time is Thursday, 25-Sep-25 13:00:23 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"A3j0p9CzZo6Z2LClCs6Zgp_"}}
2025-09-26 01:30:23.745 +05:30 [ERR] ❌ Meta template fetch failed (Biz "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56"): {"error":{"message":"Error validating access token: Session has expired on Thursday, 25-Sep-25 13:00:00 PDT. The current time is Thursday, 25-Sep-25 13:00:23 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"A3j0p9CzZo6Z2LClCs6Zgp_"}}
2025-09-26 01:30:23.750 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType155`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:30:23.753 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 1025.333ms
2025-09-26 01:30:23.756 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-26 01:30:23.758 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 1047.8988ms
2025-09-26 01:30:27.274 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-26 01:30:27.279 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:30:27.281 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-26 01:30:27.284 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-09-26 01:30:27.288 +05:30 [INF] 🔎 Fetching templates for BusinessId "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56"
2025-09-26 01:30:27.293 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 01:30:27.301 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 01:30:27.309 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 01:30:27.703 +05:30 [INF] Received HTTP response headers after 389.5952ms - 401
2025-09-26 01:30:27.706 +05:30 [INF] End processing HTTP request after 405.4712ms - 401
2025-09-26 01:30:27.709 +05:30 [INF] 📦 Meta Template API (Biz "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56") payload:
{"error":{"message":"Error validating access token: Session has expired on Thursday, 25-Sep-25 13:00:00 PDT. The current time is Thursday, 25-Sep-25 13:00:27 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"ATkALDoLtcMMZm5MKirj-ro"}}
2025-09-26 01:30:27.712 +05:30 [ERR] ❌ Meta template fetch failed (Biz "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56"): {"error":{"message":"Error validating access token: Session has expired on Thursday, 25-Sep-25 13:00:00 PDT. The current time is Thursday, 25-Sep-25 13:00:27 PDT.","type":"OAuthException","code":190,"error_subcode":463,"fbtrace_id":"ATkALDoLtcMMZm5MKirj-ro"}}
2025-09-26 01:30:27.715 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType155`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:30:27.717 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 430.1071ms
2025-09-26 01:30:27.720 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-26 01:30:27.722 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 448.5018ms
2025-09-26 01:30:29.581 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T20:00:29.5771571+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:30:39.606 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:00:39.6020395+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:30:49.623 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T20:00:49.6197541+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:30:59.637 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:00:59.6343612+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:31:09.653 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:01:09.6496484+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:31:12.978 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-26 01:31:12.986 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:31:12.988 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 9.6825ms
2025-09-26 01:31:12.995 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-26 01:31:13.005 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:31:13.007 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-26 01:31:13.016 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-26 01:31:13.044 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-09-26 01:31:13.094 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-26 01:31:13.101 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType51`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:31:13.110 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 90.3212ms
2025-09-26 01:31:13.113 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-26 01:31:13.116 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 120.6629ms
2025-09-26 01:31:13.192 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-26 01:31:13.198 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:31:13.199 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.1298ms
2025-09-26 01:31:13.218 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-26 01:31:13.224 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:31:13.226 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-26 01:31:13.228 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-26 01:31:13.237 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-26 01:31:13.244 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType51`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:31:13.247 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.6829ms
2025-09-26 01:31:13.250 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-26 01:31:13.252 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 34.7101ms
2025-09-26 01:31:13.433 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-26 01:31:13.439 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:31:13.441 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-26 01:31:13.443 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-26 01:31:13.453 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-09-26 01:31:13.461 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType51`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:31:13.464 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 17.0141ms
2025-09-26 01:31:13.466 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-26 01:31:13.469 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 36.527ms
2025-09-26 01:31:14.828 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-09-26 01:31:14.831 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-26 01:31:14.836 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:31:14.842 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:31:14.848 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 204 null null 17.7659ms
2025-09-26 01:31:14.847 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 19.1545ms
2025-09-26 01:31:14.858 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-09-26 01:31:14.868 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-09-26 01:31:14.873 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:31:14.879 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:31:14.881 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-26 01:31:14.882 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-26 01:31:14.890 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-26 01:31:14.891 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-26 01:31:14.908 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-26 01:31:14.931 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-09-26 01:31:14.935 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='PINNACLE'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-26 01:31:14.944 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 01:31:14.947 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 53.5473ms
2025-09-26 01:31:14.948 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 50.5063ms
2025-09-26 01:31:14.951 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-09-26 01:31:14.954 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-26 01:31:14.956 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 98.4248ms
2025-09-26 01:31:14.958 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 200 null application/json; charset=utf-8 90.3734ms
2025-09-26 01:31:14.987 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-26 01:31:14.990 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-26 01:31:14.994 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:31:15.000 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:31:15.002 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 14.3154ms
2025-09-26 01:31:15.003 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 13.7626ms
2025-09-26 01:31:15.016 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-26 01:31:15.021 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:31:15.024 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-26 01:31:15.027 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-26 01:31:15.038 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-26 01:31:15.047 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 01:31:15.054 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 21.4389ms
2025-09-26 01:31:15.057 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-09-26 01:31:15.058 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-26 01:31:15.064 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:31:15.067 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 50.6904ms
2025-09-26 01:31:15.069 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-26 01:31:15.079 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-09-26 01:31:15.090 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-26 01:31:15.099 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 01:31:15.103 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 19.1889ms
2025-09-26 01:31:15.106 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-09-26 01:31:15.110 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 52.9601ms
2025-09-26 01:31:19.673 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:01:19.6704742+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:31:19.864 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-09-26 01:31:19.870 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:31:19.872 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 8.0848ms
2025-09-26 01:31:19.878 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 564
2025-09-26 01:31:19.884 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:31:19.887 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-26 01:31:19.894 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-26 01:31:19.921 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_BusinessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__dto_Provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0 AND w."Provider" = @__dto_Provider_1
LIMIT 1
2025-09-26 01:31:19.951 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[@p2='fc65f9cd-52a8-4041-a8fb-a074df588451', @p0='EAAUbmP4285YBPsLtKKAS7re1ZCsiKWV1DKBe7ZBLqM2RFspQHTBGgaTGvZBqotWnTRwCyyyId8BvzvX0sibRPlERZAO6P3yDZA0kU7oQE1o9mNYfuRUIshuF17ZAfNgTy1pUWjpNPx9Dg0mU7AZBwTkFIe3PwqLFfjyKTZAb6PYrRoNDk2xWwGdKupW4MYhqpChdLbaT8xSQQAS0V7cS1cCXPwGiZAUDX2p1ZABGI20A5XJTQZBDBJEnbx6gLZCJqfLX7wZDZD' (Nullable = false), @p1='2025-09-25T20:01:19.9303070Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "ApiKey" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-09-26 01:31:19.959 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:31:19.965 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 66.9288ms
2025-09-26 01:31:19.969 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-09-26 01:31:19.971 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 93.2514ms
2025-09-26 01:31:29.693 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:01:29.6902774+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:31:35.053 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-26 01:31:35.059 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:31:35.061 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 7.5066ms
2025-09-26 01:31:35.067 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-26 01:31:35.072 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:31:35.074 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-26 01:31:35.076 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-09-26 01:31:35.080 +05:30 [INF] 🔎 Fetching templates for BusinessId "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56"
2025-09-26 01:31:35.085 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 01:31:35.093 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 01:31:35.097 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 01:31:35.827 +05:30 [INF] Received HTTP response headers after 728.5277ms - 200
2025-09-26 01:31:35.831 +05:30 [INF] End processing HTTP request after 737.0652ms - 200
2025-09-26 01:31:35.945 +05:30 [INF] 📦 Meta Template API (Biz "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56") payload:
{"data":[{"name":"single_variable_body","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\nWe are sedning {{1}} items.","example":{"body_text":[["five"]]}},{"type":"FOOTER","text":"Sent by xplorebyte"}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1209106791238164"},{"name":"variable_csv_demo","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Dear  {{1}},\n\nWe are happy to announce that we are going to launch our new product on {{2}}.\n\nRegards,\nLeadsCone","example":{"body_text":[["Nicolaus","Monaday"]]}}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1463763351520294"},{"name":"support_report_issue_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We're sorry to hear you're experiencing an issue.\n\nTo help us resolve it quickly, please tap the button below to connect with our technical support team. Please be ready to provide a brief description of the problem."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Connect to Technical Team"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"755167220845328"},{"name":"pdf_template","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"DOCUMENT","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534415257_508230149051927_6330429317144744326_n.pdf?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=b2YWNnPv7YoQ7kNvwGBOF9H&_nc_oc=AdnM42tWm_8qqw_k0xD7FhroXxYvcubATQXPHvhhIZLPw_Ca_0jiGdHeXUtBTpHKHS7PCjdC4iXn5IvJmc1Yrz_l&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=PDx7QkHctx97pEvYCECdpA&oh=01_Q5Aa2gGHf8B_8nT-t4T3vOXup1WgL_8iU8nJdAmktKctp0YTuw&oe=68FD04F5"]}},{"type":"BODY","text":"Hello {{1}},\n\nPlease find your Invoice.","example":{"body_text":[["Usernmok"]]}},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Recieved"},{"type":"QUICK_REPLY","text":"No Received"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"508230145718594"},{"name":"welcome_video","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"VIDEO","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534417141_1284099973020036_5812680847202991712_n.mp4?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=zsyoQsHKvQoQ7kNvwHIJtvF&_nc_oc=AdlV0sbKmrKDFtfOqartFnb3DwICFJYiPMP2fzM_-1mz1pI4Ds5bRLhMXp-s4G1wiMKoGlAbweW1acnIp3V6u6FF&_nc_zt=28&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=PDx7QkHctx97pEvYCECdpA&oh=01_Q5Aa2gGMc7wg1x-rBAzx_emSvKuZImttm9dpEgECYlsImQlmiQ&oe=68FCFAC3"]}},{"type":"BODY","text":"Hello {{1}} \ud83d\udc4b\nAapka order successfully deliver ho chuka hai. \ud83d\ude9a\u2728\nKya aapne Nirvasa ka Vaji Amrit Vati lena start kar diya hai? \ud83d\udc8a\nNeeche diye gaye options me se select karke bataye \ud83d\udc47","example":{"body_text":[["Nicolus"]]}},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Yes"},{"type":"QUICK_REPLY","text":"No"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1284099969686703"},{"name":"template_1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 1"},{"type":"BODY","text":"This is the Template : 1"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 2"},{"type":"QUICK_REPLY","text":"Show Me Template 3"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2381212765606675"},{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"},{"name":"template_3","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 3"},{"type":"BODY","text":"This is themplate : 3"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1760623375330098"},{"name":"template_2","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 2"},{"type":"BODY","text":"This is teh template 2"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1222093123248950"},{"name":"welcome_menu_minds","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello! Thank you for contacting MindsMiratus.\n\nIf you're a new visitor, we're happy to help you get started. If you're an existing customer, we're here to support you. Please choose from the options below."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Explore Our Services"},{"type":"QUICK_REPLY","text":"View Our Products"},{"type":"QUICK_REPLY","text":"Customer Support"},{"type":"QUICK_REPLY","text":"Contact Sales"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1115530356706526"},{"name":"contact_sales_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We'd love to discuss how we can help your business grow. You can reach our sales team via email at info\u0040mindsmiratus.com or call us at +91-321-123-4321.\n\nWould you like one of our experts to call you back?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Yes, call me back"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"954501560165102"},{"name":"human_takeover_confirmation_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Thank you! We've received your request. One of our experts will get in touch with you shortly.\n\nIs there anything else I can help you with in the meantime?"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1304432401406654"},{"name":"products_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We are proud to offer our powerful and easy-to-use GST Software, designed to simplify your tax compliance, invoicing, and financial management.\n\nWhat would you like to do?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a GST Demo"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2567632853585898"},{"name":"services_menu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We offer a wide range of services to power your business's growth. Please select a category you are interested in:"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Design Services"},{"type":"QUICK_REPLY","text":"Development Services"},{"type":"QUICK_REPLY","text":"Digital & Tele-Marketing"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"738253949023987"},{"name":"support_project_status_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"To check the status of your ongoing project, please provide your registered email address or project ID, and one of our project managers will get back to you with a detailed update shortly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Project Manager"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1599668577490835"},{"name":"support_main_menu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Welcome to the MindsMiratus Support Center. We're here to help you with any questions or issues you may have.\n\nPlease select an option so we can assist you faster."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"GST Software Support"},{"type":"QUICK_REPLY","text":"Check Project Status"},{"type":"QUICK_REPLY","text":"Report Technical Issues"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en","status":"APPROVED","category":"MARKETING","id":"679342281096115"},{"name":"demo","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Demo Template"},{"type":"BODY","text":"Demo Template Message."},{"type":"FOOTER","text":"sent by ExploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/visit"]},{"type":"URL","text":"Shop Now","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/shopnow"]},{"type":"PHONE_NUMBER","text":"Call Us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"757818770430461"},{"name":"dev_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our expert developers build robust and scalable solutions tailored to your business needs. Which area of development interests you?\n\n\ud83d\udcbb Web & Software Dev: Custom applications and software solutions.\n\ud83d\udcf1 Mobile App Dev: Engaging and high-performance apps for iOS and Android.\n\ud83d\uded2 E-commerce Dev: Powerful online stores that drive sales and growth."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Discuss a Project"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3118090155157247"},{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/tutrials"]},{"type":"URL","text":"View Demo","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"},{"name":"build_urltracking","parameter_format":"NAMED","components":[{"type":"BODY","text":"Hello \n\nThis is the test message to check wheather redirecting url is working or not."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/softwaredev"]},{"type":"URL","text":"Explore More","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/moreopt"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"788214393726841"},{"name":"marketing_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We help you reach your target audience and grow your brand effectively. Explore our marketing services:\n\n\ud83d\udcc8 Digital Marketing: SEO, Social Media Marketing, and targeted PPC campaigns.\n\ud83d\udcde Tele-Marketing: IVR systems, Bulk SMS, Voice Calls, and official WhatsApp API solutions."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Get a Marketing Plan"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1683803515627636"},{"name":"design_services_submenu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our creative team delivers stunning and effective designs to make your brand stand out. Which design service would you like to know more about?\n\n\ud83c\udfa8 Website Designing: We build beautiful, responsive, and user-friendly websites.\n\ud83d\udd8c\ufe0f Graphic Designing: We create compelling visuals, logos, and branding materials."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a Design Quote"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3291988187631744"},{"name":"support_gst_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"You've reached support for our GST Software. How can we help?\n\n\ud83d\udd27 Technical Help: For installation issues, errors, or bugs.\n\ud83d\udca1 Feature Questions: To understand how to use a specific feature.\n\ud83d\udcda View FAQs: Get answers to common questions instantly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Support Agent"},{"type":"QUICK_REPLY","text":"View FAQs"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1305308197880244"},{"name":"about_us_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"MindsMiratus is a leading IT solutions company dedicated to helping businesses grow through innovative and effective digital services. From design to development and marketing, we provide comprehensive solutions to elevate your brand.\n\nWhat would you like to do next?"},{"type":"FOOTER","text":"sent by Mindsmirtus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"},{"type":"QUICK_REPLY","text":"Talk to an Expert"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1971204310331370"},{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"\u26a1\ufe0f Feature Annoucement ! \u26a1\ufe0f\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/\u00257B\u00257BI\u00257D\u00257D{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"View Tutorials","url":"https:\/\/www.youtube.com\/\u00257B\u00257Bi\u00257D\u00257D{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"},{"name":"call_log","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is the checking for call log event."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/seeme"]},{"type":"URL","text":"Call Us","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/callme"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1286058192539680"},{"name":"track_url_after_flow_integ","message_send_ttl_seconds":86400,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BODY","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/vosiatstore"]},{"type":"URL","text":"Visit Demo","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/demo"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1084981273615848"},{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"watch Video","url":"https:\/\/www.youtube.com\/{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"},{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=eJAeQFq4sbYQ7kNvwFpXn8W&_nc_oc=AdlgBuy__gBLfPG4qOcNpzI6X3KF4Tb4oRFGDEgRhrr8VicCxdiD-S5h5XcqMdUYlP-IjhOpU7eelCekwHjyfMWO&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=PDx7QkHctx97pEvYCECdpA&oh=01_Q5Aa2gH9x91NY8VefXzNBlRf8jQqyK5K-4MS1Dy8gXnU3YDHeQ&oe=68FD2B0F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! \ud83c\udf89\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15\u0025 discount** on your purchase. Don't just follow the trend\u2014set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https:\/\/xplorebytesolutions.com\/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"},{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https:\/\/www.qwexample.com\/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"}],"paging":{"cursors":{"before":"QVFIU0NIbkw4UHF0R1ZAWQktuTmtDeURyeXNac29xY3hRd0piUWh5SFNyUlRVRWpjanNGMW4za1dhYTFfN3R5R05MTmUtcXpxcnZAXMlhsakdQN0VvdXVOVjd3","after":"QVFIU1hSaTdZATm1tSjZAiNnlaQ1RubTFQZAjlKUUhnU1l2Y3hudWE0NXY0U3d0ZAE8wSV9NeWplbDlCS1FoRHBPN2NDOW1GZA3NLRHk4b3JBVU1TeklYd0JodU93"}}}
2025-09-26 01:31:35.956 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType155`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:31:35.962 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 882.6855ms
2025-09-26 01:31:35.965 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-26 01:31:35.968 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 900.6817ms
2025-09-26 01:31:39.705 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:01:39.7014547+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:31:49.729 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:01:49.7262812+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:31:59.742 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:01:59.7394440+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:32:09.764 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:02:09.7613004+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:32:13.233 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/save-visual - null null
2025-09-26 01:32:13.242 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:32:13.258 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/save-visual - 204 null null 25.1003ms
2025-09-26 01:32:13.270 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/cta-flow/save-visual - application/json 1238
2025-09-26 01:32:13.283 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:32:13.287 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.SaveVisualFlow (xbytechat.api)'
2025-09-26 01:32:13.296 +05:30 [INF] Route matched with {action = "SaveVisualFlow", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SaveVisualFlow(xbytechat.api.Features.CTAFlowBuilder.DTOs.SaveVisualFlowDto) on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-09-26 01:32:13.349 +05:30 [INF] 📦 Saving CTA Flow: F3 by Test Company
2025-09-26 01:32:13.359 +05:30 [INF] 🧠 SaveVisualFlow started | FlowName: F3 | BusinessId: "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56"
2025-09-26 01:32:13.374 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_FlowName_0='F3', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
FROM "CTAFlowConfigs" AS c
WHERE c."FlowName" = @__dto_FlowName_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 01:32:13.428 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__flow_Id_0='2648e864-9190-4484-a53c-8c263daebe4d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."ProfileNameSlot", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c."UseProfileName", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "CTAFlowSteps" AS c
LEFT JOIN "FlowButtonLinks" AS f ON c."Id" = f."CTAFlowStepId"
WHERE c."CTAFlowConfigId" = @__flow_Id_0
ORDER BY c."Id"
2025-09-26 01:32:13.600 +05:30 [INF] Executed DbCommand (15ms) [Parameters=[@p1='2648e864-9190-4484-a53c-8c263daebe4d', @p0='2025-09-25T20:02:13.5579464Z' (Nullable = true) (DbType = DateTime), @p2='96a79783-4e08-4177-8f1e-8c9a89c917aa', @p3='6facc21f-73f8-4ff0-878b-47e403d102b5', @p4='b3640e9a-3d2b-4f3a-b691-5af5f92e1620', @p5='154e9b84-efbf-46a3-9b6e-25b6b0f74fed', @p6='2648e864-9190-4484-a53c-8c263daebe4d', @p7='272' (Nullable = true), @p8='256' (Nullable = true), @p9='1' (Nullable = true), @p10=NULL, @p11=NULL, @p12='1', @p13='single_variable_body' (Nullable = false), @p14='text_template', @p15='Show Me Template 3' (Nullable = false), @p16='quick_reply' (Nullable = false), @p17='True', @p18='812b0075-74ac-4e77-9ff8-47a1360ff202', @p19='2648e864-9190-4484-a53c-8c263daebe4d', @p20='-48' (Nullable = true), @p21='256' (Nullable = true), @p22=NULL (DbType = Int32), @p23=NULL, @p24=NULL, @p25='0', @p26='template_1' (Nullable = false), @p27='text_template', @p28='Show Me Template 2' (Nullable = false), @p29='cta' (Nullable = false), @p30='False', @p31='5d22600f-e165-46d3-bdc1-f08822530c54', @p32='0', @p33='quick_reply' (Nullable = false), @p34='Show Me Template 2' (Nullable = false), @p35='QUICK_REPLY' (Nullable = false), @p36='' (Nullable = false), @p37='812b0075-74ac-4e77-9ff8-47a1360ff202', @p38='154e9b84-efbf-46a3-9b6e-25b6b0f74fed' (Nullable = true), @p39='80f4c430-e43d-4ad5-b626-6b711286c911', @p40='1', @p41='quick_reply' (Nullable = false), @p42='Show Me Template 3' (Nullable = false), @p43='QUICK_REPLY' (Nullable = false), @p44='' (Nullable = false), @p45='812b0075-74ac-4e77-9ff8-47a1360ff202', @p46='154e9b84-efbf-46a3-9b6e-25b6b0f74fed' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CTAFlowConfigs" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
DELETE FROM "FlowButtonLinks"
WHERE "Id" = @p2;
DELETE FROM "CTAFlowSteps"
WHERE "Id" = @p3;
DELETE FROM "CTAFlowSteps"
WHERE "Id" = @p4;
INSERT INTO "CTAFlowSteps" ("Id", "CTAFlowConfigId", "PositionX", "PositionY", "ProfileNameSlot", "RequiredSource", "RequiredTag", "StepOrder", "TemplateToSend", "TemplateType", "TriggerButtonText", "TriggerButtonType", "UseProfileName")
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
INSERT INTO "CTAFlowSteps" ("Id", "CTAFlowConfigId", "PositionX", "PositionY", "ProfileNameSlot", "RequiredSource", "RequiredTag", "StepOrder", "TemplateToSend", "TemplateType", "TriggerButtonText", "TriggerButtonType", "UseProfileName")
VALUES (@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30);
INSERT INTO "FlowButtonLinks" ("Id", "ButtonIndex", "ButtonSubType", "ButtonText", "ButtonType", "ButtonValue", "CTAFlowStepId", "NextStepId")
VALUES (@p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38);
INSERT INTO "FlowButtonLinks" ("Id", "ButtonIndex", "ButtonSubType", "ButtonText", "ButtonType", "ButtonValue", "CTAFlowStepId", "NextStepId")
VALUES (@p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46);
2025-09-26 01:32:13.626 +05:30 [INF] ✅ Flow 'F3' saved | Steps: 2 | Links: 4
2025-09-26 01:32:13.630 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:32:13.634 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.SaveVisualFlow (xbytechat.api) in 331.0308ms
2025-09-26 01:32:13.636 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.SaveVisualFlow (xbytechat.api)'
2025-09-26 01:32:13.638 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/cta-flow/save-visual - 200 null application/json; charset=utf-8 368.7453ms
2025-09-26 01:32:19.772 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:02:19.7689953+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:32:21.418 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 01:32:21.422 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 01:32:21.426 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:32:21.431 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:32:21.432 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 204 null null 14.2181ms
2025-09-26 01:32:21.434 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 204 null null 12.1549ms
2025-09-26 01:32:21.441 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 01:32:21.449 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 01:32:21.454 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:32:21.459 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:32:21.462 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 01:32:21.463 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 01:32:21.465 +05:30 [INF] Route matched with {action = "GetSenders", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSenders(System.Guid) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-26 01:32:21.467 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 01:32:21.476 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-26 01:32:21.490 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.WhatsAppSettings.DTOs.WhatsAppSenderDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 01:32:21.503 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api) in 31.8131ms
2025-09-26 01:32:21.506 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 01:32:21.509 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 200 null application/json; charset=utf-8 67.3494ms
2025-09-26 01:32:21.617 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-26 01:32:21.623 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType155`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType241`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:32:21.626 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 146.8663ms
2025-09-26 01:32:21.629 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 01:32:21.632 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 200 null application/json; charset=utf-8 182.3253ms
2025-09-26 01:32:24.732 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/template_1 - null null
2025-09-26 01:32:24.738 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:32:24.740 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/template_1 - 204 null null 7.7326ms
2025-09-26 01:32:24.747 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/template_1 - null null
2025-09-26 01:32:24.752 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:32:24.755 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-26 01:32:24.757 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 01:32:24.767 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__name_1='template_1'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-09-26 01:32:24.777 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='template_1', @__language_2='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Language" = @__language_2
ORDER BY w."Language" = @__language_2 DESC
LIMIT 1
2025-09-26 01:32:24.790 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType242`10[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:32:24.793 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 32.0025ms
2025-09-26 01:32:24.796 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-26 01:32:24.798 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/template_1 - 200 null application/json; charset=utf-8 51.1285ms
2025-09-26 01:32:29.787 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:02:29.7832729+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:32:35.667 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/list/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?onlyPublished=true - null null
2025-09-26 01:32:35.691 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:32:35.693 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/list/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?onlyPublished=true - 204 null null 25.8284ms
2025-09-26 01:32:35.712 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/list/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?onlyPublished=true - null null
2025-09-26 01:32:35.719 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:32:35.721 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAvailableFlows (xbytechat.api)'
2025-09-26 01:32:35.729 +05:30 [INF] Route matched with {action = "GetAvailableFlows", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAvailableFlows(System.Guid, Boolean) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 01:32:35.749 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."FlowName", c."IsPublished"
FROM "CTAFlowConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive" AND c."IsPublished"
ORDER BY c."UpdatedAt" DESC
2025-09-26 01:32:35.759 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType53`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.FlowListItemDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:32:35.765 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAvailableFlows (xbytechat.api) in 31.1256ms
2025-09-26 01:32:35.770 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAvailableFlows (xbytechat.api)'
2025-09-26 01:32:35.773 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/list/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?onlyPublished=true - 200 null application/json; charset=utf-8 60.9214ms
2025-09-26 01:32:39.808 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:02:39.8048331+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:32:46.028 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-09-26 01:32:46.033 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:32:46.041 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 13.6705ms
2025-09-26 01:32:46.047 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 619
2025-09-26 01:32:46.058 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:32:46.076 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-26 01:32:46.078 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 01:32:46.092 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__phoneNumberId_1='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."PhoneNumberId" = @__phoneNumberId_1 AND w."IsActive"
LIMIT 1
2025-09-26 01:32:46.138 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-26 01:32:46.148 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__incomingFlowId_Value_0='2648e864-9190-4484-a53c-8c263daebe4d', @__8__locals1_businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", t0."Id", t0."CTAFlowConfigId", t0."PositionX", t0."PositionY", t0."ProfileNameSlot", t0."RequiredSource", t0."RequiredTag", t0."StepOrder", t0."TemplateToSend", t0."TemplateType", t0."TriggerButtonText", t0."TriggerButtonType", t0."UseProfileName", t0."Id0", t0."ButtonIndex", t0."ButtonSubType", t0."ButtonText", t0."ButtonType", t0."ButtonValue", t0."CTAFlowStepId", t0."NextStepId"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."Id" = @__incomingFlowId_Value_0 AND c."BusinessId" = @__8__locals1_businessId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."CTAFlowConfigId", c0."PositionX", c0."PositionY", c0."ProfileNameSlot", c0."RequiredSource", c0."RequiredTag", c0."StepOrder", c0."TemplateToSend", c0."TemplateType", c0."TriggerButtonText", c0."TriggerButtonType", c0."UseProfileName", f."Id" AS "Id0", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
    FROM "CTAFlowSteps" AS c0
    LEFT JOIN "FlowButtonLinks" AS f ON c0."Id" = f."CTAFlowStepId"
) AS t0 ON t."Id" = t0."CTAFlowConfigId"
ORDER BY t."Id", t0."Id"
2025-09-26 01:32:46.163 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 01:32:46.174 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:32:46.177 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:32:47.507 +05:30 [INF] Received HTTP response headers after 1326.9897ms - 200
2025-09-26 01:32:47.510 +05:30 [INF] End processing HTTP request after 1335.5343ms - 200
2025-09-26 01:32:47.637 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='template_1', @__provider_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 01:32:47.682 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p0='7df0c339-72ae-4211-9827-ca3ccb924714', @p1=NULL (DbType = Guid), @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3='2648e864-9190-4484-a53c-8c263daebe4d' (Nullable = true), @p4=NULL (DbType = Guid), @p5='text', @p6='2025-09-25T20:02:47.6339029Z' (DbType = DateTime), @p7='system', @p8=NULL (DbType = Guid), @p9=NULL (DbType = DateTime), @p10=NULL, @p11=NULL, @p12=NULL, @p13=NULL, @p14=NULL, @p15='False', @p16='This is the Template : 1', @p17='This is the Template : 1' (Nullable = false), @p18='chkFlow' (Nullable = false), @p19='673199269218077', @p20='META_CLOUD', @p21=NULL (DbType = DateTime), @p22=NULL (DbType = Guid), @p23='Draft' (Nullable = false), @p24='template_1', @p25='[]', @p26='{"Provider":"meta_cloud","TemplateId":"2381212765606675","TemplateName":"template_1","Language":"en_US","HasHeaderMedia":false,"HeaderType":"TEXT","BodyPlaceholders":[],"Buttons":[{"Type":"QUICK_REPLY","Text":"Show Me Template 2","Value":"","Order":0},{"Type":"QUICK_REPLY","Text":"Show Me Template 3","Value":"","Order":1}]}' (DbType = Object), @p27='2025-09-25T20:02:47.6339030Z' (DbType = DateTime), @p28=NULL, @p29='8398b943-a6db-4ea5-a300-bbdf4007511e', @p30='7df0c339-72ae-4211-9827-ca3ccb924714', @p31='True', @p32='2', @p33='Show Me Template 3' (Nullable = false), @p34='QUICK_REPLY' (Nullable = false), @p35='' (Nullable = false), @p36='f77d6812-6fa7-48ca-9c10-a9f01e640376', @p37='7df0c339-72ae-4211-9827-ca3ccb924714', @p38='True', @p39='1', @p40='Show Me Template 2' (Nullable = false), @p41='QUICK_REPLY' (Nullable = false), @p42='' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "AudienceId", "BusinessId", "CTAFlowConfigId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "DocumentUrl", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "PhoneNumberId", "Provider", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "TemplateSchemaSnapshot", "UpdatedAt", "VideoUrl")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41, @p42);
2025-09-26 01:32:47.690 +05:30 [INF] ✅ Campaign 'chkFlow' created | Type:text | Header:text | FlowId:"2648e864-9190-4484-a53c-8c263daebe4d" | EntryTemplate:template_1 | Sender:META_CLOUD/673199269218077 | Recipients:0
2025-09-26 01:32:47.696 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType64`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:32:47.699 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 1617.4311ms
2025-09-26 01:32:47.701 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-26 01:32:47.703 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 1655.8872ms
2025-09-26 01:32:47.763 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-26 01:32:47.775 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-26 01:32:47.778 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:32:47.776 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-26 01:32:47.775 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/7df0c339-72ae-4211-9827-ca3ccb924714 - null null
2025-09-26 01:32:47.770 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/7df0c339-72ae-4211-9827-ca3ccb924714/csv-sample/schema - null null
2025-09-26 01:32:47.798 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:32:47.802 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 38.988ms
2025-09-26 01:32:47.808 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:32:47.812 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:32:47.817 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:32:47.819 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 43.9692ms
2025-09-26 01:32:47.825 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-26 01:32:47.827 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 51.0493ms
2025-09-26 01:32:47.828 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/7df0c339-72ae-4211-9827-ca3ccb924714 - 204 null null 52.7057ms
2025-09-26 01:32:47.830 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/7df0c339-72ae-4211-9827-ca3ccb924714/csv-sample/schema - 204 null null 60.1365ms
2025-09-26 01:32:47.840 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:32:47.847 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-26 01:32:47.853 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/7df0c339-72ae-4211-9827-ca3ccb924714 - null null
2025-09-26 01:32:47.858 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/7df0c339-72ae-4211-9827-ca3ccb924714/csv-sample/schema - null null
2025-09-26 01:32:47.860 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 01:32:47.864 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:32:47.869 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:32:47.873 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:32:47.876 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-26 01:32:47.877 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-26 01:32:47.879 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-26 01:32:47.887 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-26 01:32:47.889 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-26 01:32:47.881 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 01:32:47.893 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 01:32:47.898 +05:30 [INF] GetPagedContactsAsync: businessId="6b5cea67-e8e9-42f7-8bde-51a9dbc02d56", tab=all, page=1, pageSize=1000
2025-09-26 01:32:47.902 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 01:32:47.915 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__campaignId_0='7df0c339-72ae-4211-9827-ca3ccb924714', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AudienceId", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."DocumentUrl", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."TemplateSchemaSnapshot", t."UpdatedAt", t."VideoUrl", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", t."Id1", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value", t."BusinessId1", t."CreatedAt1", t."CreatedBy0", t."FlowName", t."IsActive0", t."IsPublished", t."UpdatedAt1"
FROM (
    SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0", c1."Id" AS "Id1", c1."BusinessId" AS "BusinessId1", c1."CreatedAt" AS "CreatedAt1", c1."CreatedBy" AS "CreatedBy0", c1."FlowName", c1."IsActive" AS "IsActive0", c1."IsPublished", c1."UpdatedAt" AS "UpdatedAt1"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    LEFT JOIN "CTAFlowConfigs" AS c1 ON c."CTAFlowConfigId" = c1."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t."Id0", t."Id1"
2025-09-26 01:32:47.919 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-26 01:32:47.922 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 38.1238ms
2025-09-26 01:32:47.933 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-09-26 01:32:47.924 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-26 01:32:47.903 +05:30 [INF] Route matched with {action = "GetSchema", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSchema(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 01:32:47.936 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 01:32:47.940 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 33.0171ms
2025-09-26 01:32:47.938 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."ProfileName", t."ProfileNameUpdatedAt", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-26 01:32:47.951 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='7df0c339-72ae-4211-9827-ca3ccb924714', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 01:32:47.944 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:32:47.957 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-26 01:32:47.962 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 01:32:47.970 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='template_1', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 01:32:47.952 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 127.0404ms
2025-09-26 01:32:47.975 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/7df0c339-72ae-4211-9827-ca3ccb924714 - 200 null application/json; charset=utf-8 122.1561ms
2025-09-26 01:32:47.978 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 81.1975ms
2025-09-26 01:32:47.987 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='template_1'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 01:32:47.972 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 01:32:48.000 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-26 01:32:48.005 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType66`3[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType67`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 01:32:48.006 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-26 01:32:48.008 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 161.0256ms
2025-09-26 01:32:48.011 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api) in 64.1043ms
2025-09-26 01:32:48.020 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-26 01:32:48.027 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/7df0c339-72ae-4211-9827-ca3ccb924714/csv-sample/schema - null null
2025-09-26 01:32:48.030 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 01:32:48.034 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 01:32:48.040 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:32:48.042 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/7df0c339-72ae-4211-9827-ca3ccb924714/csv-sample/schema - 200 null application/json; charset=utf-8 184.5607ms
2025-09-26 01:32:48.045 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 28.8276ms
2025-09-26 01:32:48.047 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 01:32:48.056 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 01:32:48.058 +05:30 [INF] Route matched with {action = "GetSchema", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSchema(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 01:32:48.060 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 135.833ms
2025-09-26 01:32:48.068 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='7df0c339-72ae-4211-9827-ca3ccb924714', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 01:32:48.082 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='template_1', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 01:32:48.090 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='template_1'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 01:32:48.096 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType66`3[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType67`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 01:32:48.100 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api) in 36.3261ms
2025-09-26 01:32:48.103 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 01:32:48.105 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/7df0c339-72ae-4211-9827-ca3ccb924714/csv-sample/schema - 200 null application/json; charset=utf-8 77.8721ms
2025-09-26 01:32:49.819 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T20:02:49.8149405+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:32:59.838 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:02:59.8355272+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:33:09.856 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:03:09.8525905+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:33:10.046 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch - null null
2025-09-26 01:33:10.053 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:33:10.055 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch - 204 null null 8.373ms
2025-09-26 01:33:10.073 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/csv/batch - multipart/form-data; boundary=----WebKitFormBoundary6UwWaKHGiXoHTHTn 216
2025-09-26 01:33:10.079 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:33:10.082 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api)'
2025-09-26 01:33:10.085 +05:30 [INF] Route matched with {action = "Upload", controller = "CsvBatch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Upload(xbytechat.api.Features.CampaignModule.DTOs.Requests.CsvBatchUploadForm, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController (xbytechat.api).
2025-09-26 01:33:10.115 +05:30 [INF] Executed DbCommand (23ms) [Parameters=[@p0='20346c62-f2da-409e-ba47-655d3b7421dc', @p1=NULL (DbType = Guid), @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3=NULL, @p4='2025-09-25T20:03:10.0909745Z' (DbType = DateTime), @p5=NULL (DbType = Guid), @p6=NULL, @p7='csv_single_parameter.csv', @p8=NULL (DbType = Object), @p9='0', @p10='0', @p11='ingesting' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CsvBatches" ("Id", "AudienceId", "BusinessId", "Checksum", "CreatedAt", "CreatedByUserId", "ErrorMessage", "FileName", "HeadersJson", "RowCount", "SkippedCount", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-09-26 01:33:10.124 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p1='20346c62-f2da-409e-ba47-655d3b7421dc', @p0='["phone"]' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CsvBatches" SET "HeadersJson" = @p0
WHERE "Id" = @p1;
2025-09-26 01:33:10.133 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='6888d3ea-0191-4fdb-9513-eaa5dd83fd27', @p1='20346c62-f2da-409e-ba47-655d3b7421dc', @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3='2025-09-25T20:03:10.1286975Z' (DbType = DateTime), @p4=NULL, @p5=NULL, @p6='0', @p7='{"phone":"89740 05240"}' (Nullable = false) (DbType = Object), @p8=NULL], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CsvRows" ("Id", "BatchId", "BusinessId", "CreatedAt", "PhoneE164", "PhoneRaw", "RowIndex", "RowJson", "ValidationError")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-09-26 01:33:10.141 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='20346c62-f2da-409e-ba47-655d3b7421dc', @p0='1', @p1='ready' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CsvBatches" SET "RowCount" = @p0, "Status" = @p1
WHERE "Id" = @p2;
2025-09-26 01:33:10.146 +05:30 [INF] CsvBatch "20346c62-f2da-409e-ba47-655d3b7421dc" ingested: 1 rows; headers=1
2025-09-26 01:33:10.150 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType70`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.CampaignModule.DTOs.CsvBatchUploadResultDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 01:33:10.153 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api) in 63.8942ms
2025-09-26 01:33:10.155 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api)'
2025-09-26 01:33:10.158 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/csv/batch - 200 null application/json; charset=utf-8 85.5599ms
2025-09-26 01:33:10.176 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch/20346c62-f2da-409e-ba47-655d3b7421dc/sample?take=10 - null null
2025-09-26 01:33:10.183 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:33:10.184 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch/20346c62-f2da-409e-ba47-655d3b7421dc/sample?take=10 - 204 null null 8.2315ms
2025-09-26 01:33:10.203 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/csv/batch/20346c62-f2da-409e-ba47-655d3b7421dc/sample?take=10 - null null
2025-09-26 01:33:10.209 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:33:10.211 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api)'
2025-09-26 01:33:10.213 +05:30 [INF] Route matched with {action = "Sample", controller = "CsvBatch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sample(System.Guid, Int32, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController (xbytechat.api).
2025-09-26 01:33:10.223 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__batchId_0='20346c62-f2da-409e-ba47-655d3b7421dc', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."HeadersJson", c."RowCount"
FROM "CsvBatches" AS c
WHERE c."Id" = @__batchId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 01:33:10.235 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__batchId_1='20346c62-f2da-409e-ba47-655d3b7421dc', @__p_2='10'], CommandType='"Text"', CommandTimeout='30']
SELECT c."RowIndex", c."Id", c."BatchId", c."BusinessId", c."CreatedAt", c."PhoneE164", c."PhoneRaw", c."RowJson", c."ValidationError"
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__batchId_1
ORDER BY c."RowIndex"
LIMIT @__p_2
2025-09-26 01:33:10.249 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType70`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IReadOnlyList`1[[xbytechat.api.Features.CampaignModule.DTOs.CsvRowSampleDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:33:10.252 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api) in 34.1758ms
2025-09-26 01:33:10.256 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api)'
2025-09-26 01:33:10.258 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/csv/batch/20346c62-f2da-409e-ba47-655d3b7421dc/sample?take=10 - 200 null application/json; charset=utf-8 54.8619ms
2025-09-26 01:33:10.268 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/7df0c339-72ae-4211-9827-ca3ccb924714/mappings/suggest?batchId=20346c62-f2da-409e-ba47-655d3b7421dc - null null
2025-09-26 01:33:10.273 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:33:10.275 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/7df0c339-72ae-4211-9827-ca3ccb924714/mappings/suggest?batchId=20346c62-f2da-409e-ba47-655d3b7421dc - 204 null null 7.2894ms
2025-09-26 01:33:10.286 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/7df0c339-72ae-4211-9827-ca3ccb924714/mappings/suggest?batchId=20346c62-f2da-409e-ba47-655d3b7421dc - null null
2025-09-26 01:33:10.292 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:33:10.294 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api)'
2025-09-26 01:33:10.297 +05:30 [INF] Route matched with {action = "Suggest", controller = "CampaignMappings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestAsync(System.Guid, System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController (xbytechat.api).
2025-09-26 01:33:10.306 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='7df0c339-72ae-4211-9827-ca3ccb924714', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateParameters"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 01:33:10.315 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__batchId_0='20346c62-f2da-409e-ba47-655d3b7421dc', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."HeadersJson"
FROM "CsvBatches" AS c
WHERE c."Id" = @__batchId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 01:33:10.321 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:33:10.324 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api) in 22.982ms
2025-09-26 01:33:10.327 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api)'
2025-09-26 01:33:10.330 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/7df0c339-72ae-4211-9827-ca3ccb924714/mappings/suggest?batchId=20346c62-f2da-409e-ba47-655d3b7421dc - 200 null application/json; charset=utf-8 44.5295ms
2025-09-26 01:33:13.009 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/7df0c339-72ae-4211-9827-ca3ccb924714/mappings - null null
2025-09-26 01:33:13.015 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:33:13.018 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/7df0c339-72ae-4211-9827-ca3ccb924714/mappings - 204 null null 9.748ms
2025-09-26 01:33:13.026 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaigns/7df0c339-72ae-4211-9827-ca3ccb924714/mappings - application/json 2
2025-09-26 01:33:13.033 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:33:13.037 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api)'
2025-09-26 01:33:13.039 +05:30 [INF] Route matched with {action = "Save", controller = "CampaignMappings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SaveAsync(System.Guid, System.Collections.Generic.Dictionary`2[System.String,System.String], System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController (xbytechat.api).
2025-09-26 01:33:13.043 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-26 01:33:13.046 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api) in 3.3223ms
2025-09-26 01:33:13.048 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api)'
2025-09-26 01:33:13.050 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaigns/7df0c339-72ae-4211-9827-ca3ccb924714/mappings - 204 null null 24.0415ms
2025-09-26 01:33:13.057 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/7df0c339-72ae-4211-9827-ca3ccb924714/materialize - null null
2025-09-26 01:33:13.063 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:33:13.065 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/7df0c339-72ae-4211-9827-ca3ccb924714/materialize - 204 null null 7.6722ms
2025-09-26 01:33:13.072 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaigns/7df0c339-72ae-4211-9827-ca3ccb924714/materialize - application/json 182
2025-09-26 01:33:13.077 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:33:13.079 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api)'
2025-09-26 01:33:13.082 +05:30 [INF] Route matched with {action = "CsvCreate", controller = "CampaignMaterialize"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeResponseDto]] CsvCreate(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeRequestDto, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController (xbytechat.api).
2025-09-26 01:33:13.089 +05:30 [INF] 📦 Materialize request: campaign="7df0c339-72ae-4211-9827-ca3ccb924714" persist=true batch="20346c62-f2da-409e-ba47-655d3b7421dc" audience='Audience 2025-09-26'
2025-09-26 01:33:13.095 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='7df0c339-72ae-4211-9827-ca3ccb924714', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1)
2025-09-26 01:33:13.105 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__request_CsvBatchId_1='20346c62-f2da-409e-ba47-655d3b7421dc'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__request_CsvBatchId_1
2025-09-26 01:33:13.112 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__request_CsvBatchId_1='20346c62-f2da-409e-ba47-655d3b7421dc', @__p_2='200'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BatchId", c."BusinessId", c."CreatedAt", c."PhoneE164", c."PhoneRaw", c."RowIndex", c."RowJson", c."ValidationError"
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__request_CsvBatchId_1
ORDER BY c."RowIndex"
LIMIT @__p_2
2025-09-26 01:33:13.120 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='7df0c339-72ae-4211-9827-ca3ccb924714', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."MessageTemplate", c."TemplateId"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 01:33:13.126 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='template_1'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 01:33:13.152 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__r_Phone_1='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__8__locals1_businessId_0 AND c."PhoneNumber" = @__r_Phone_1
LIMIT 1
2025-09-26 01:33:13.167 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p0='104429a6-05b5-4997-80ff-089f6c86d057', @p1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p2=NULL (DbType = Guid), @p3='2025-09-25T20:03:13.1494035Z' (DbType = DateTime), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6=NULL, @p7='False', @p8='Audience 2025-09-26' (Nullable = false), @p9='2025-09-25T20:03:13.1494035Z' (Nullable = true) (DbType = DateTime), @p10='41847975-9c59-4551-a121-dd364060d56f', @p11='{"phone":"89740 05240"}' (DbType = Object), @p12='104429a6-05b5-4997-80ff-089f6c86d057', @p13='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p14='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p15='2025-09-25T20:03:13.1494035Z' (DbType = DateTime), @p16=NULL (DbType = Guid), @p17=NULL, @p18='False', @p19='False', @p20=NULL, @p21='918974005240', @p22=NULL, @p23=NULL (DbType = DateTime), @p24='2025-09-25T20:03:13.1494035Z' (Nullable = true) (DbType = DateTime), @p25='a9c41b52-e704-4f54-891a-69d241af7193', @p26='41847975-9c59-4551-a121-dd364060d56f' (Nullable = true), @p27=NULL, @p28='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p29='7df0c339-72ae-4211-9827-ca3ccb924714', @p30=NULL, @p31=NULL, @p32='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p33='12333C92A1B12B7820DADA2E6B8428C2BC9610BD203096AB405A2575E68ABAB2', @p34='False', @p35='2025-09-25T20:03:13.1494035Z' (Nullable = true) (DbType = DateTime), @p36=NULL, @p37=NULL, @p38='{}' (DbType = Object), @p39='[]' (DbType = Object), @p40=NULL (DbType = DateTime), @p41='Pending' (Nullable = false), @p42='2025-09-25T20:03:13.1494035Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Audiences" ("Id", "BusinessId", "CampaignId", "CreatedAt", "CreatedByUserId", "CsvBatchId", "Description", "IsDeleted", "Name", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
INSERT INTO "AudienceMembers" ("Id", "AttributesJson", "AudienceId", "BusinessId", "ContactId", "CreatedAt", "CreatedByUserId", "Email", "IsDeleted", "IsTransientContact", "Name", "PhoneE164", "PhoneRaw", "PromotedAt", "UpdatedAt")
VALUES (@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
INSERT INTO "CampaignRecipients" ("Id", "AudienceMemberId", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IdempotencyKey", "IsAutoTagged", "MaterializedAt", "MessagePreview", "ProductBrowsed", "ResolvedButtonUrlsJson", "ResolvedParametersJson", "SentAt", "Status", "UpdatedAt")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42);
2025-09-26 01:33:13.176 +05:30 [INF] 📦 Materialize result: campaign="7df0c339-72ae-4211-9827-ca3ccb924714" materialized=1 skipped=0 audienceId="104429a6-05b5-4997-80ff-089f6c86d057"
2025-09-26 01:33:13.180 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeResponseDto'.
2025-09-26 01:33:13.184 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api) in 98.6684ms
2025-09-26 01:33:13.187 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api)'
2025-09-26 01:33:13.189 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaigns/7df0c339-72ae-4211-9827-ca3ccb924714/materialize - 200 null application/json; charset=utf-8 117.0195ms
2025-09-26 01:33:19.876 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:03:19.8731335+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:33:20.711 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 01:33:20.729 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:33:20.731 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 19.5756ms
2025-09-26 01:33:20.736 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 01:33:20.741 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:33:20.743 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 01:33:20.745 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 01:33:20.756 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-09-26 01:33:20.763 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 01:33:20.765 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 17.0154ms
2025-09-26 01:33:20.768 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 01:33:20.770 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 33.6696ms
2025-09-26 01:33:22.621 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/7df0c339-72ae-4211-9827-ca3ccb924714 - null null
2025-09-26 01:33:22.632 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:33:22.634 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/7df0c339-72ae-4211-9827-ca3ccb924714 - 204 null null 12.5011ms
2025-09-26 01:33:22.641 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/7df0c339-72ae-4211-9827-ca3ccb924714 - null 0
2025-09-26 01:33:22.646 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:33:22.648 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 01:33:22.650 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 01:33:25.509 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='7df0c339-72ae-4211-9827-ca3ccb924714'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
ORDER BY c."Id"
LIMIT 1
2025-09-26 01:33:25.568 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__campaignId_0='7df0c339-72ae-4211-9827-ca3ccb924714'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."AudienceMemberId", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IdempotencyKey", t0."IsAutoTagged", t0."MaterializedAt", t0."MessagePreview", t0."ProductBrowsed", t0."ResolvedButtonUrlsJson", t0."ResolvedParametersJson", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."ProfileName", t0."ProfileNameUpdatedAt", t0."Tags", t0."Id1", t0."AttributesJson", t0."AudienceId", t0."BusinessId1", t0."ContactId0", t0."CreatedAt0", t0."CreatedByUserId", t0."Email0", t0."IsDeleted", t0."IsTransientContact", t0."Name0", t0."PhoneE164", t0."PhoneRaw", t0."PromotedAt", t0."UpdatedAt0", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN (
    SELECT c0."Id", c0."AudienceMemberId", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IdempotencyKey", c0."IsAutoTagged", c0."MaterializedAt", c0."MessagePreview", c0."ProductBrowsed", c0."ResolvedButtonUrlsJson", c0."ResolvedParametersJson", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."ProfileName", c1."ProfileNameUpdatedAt", c1."Tags", a."Id" AS "Id1", a."AttributesJson", a."AudienceId", a."BusinessId" AS "BusinessId1", a."ContactId" AS "ContactId0", a."CreatedAt" AS "CreatedAt0", a."CreatedByUserId", a."Email" AS "Email0", a."IsDeleted", a."IsTransientContact", a."Name" AS "Name0", a."PhoneE164", a."PhoneRaw", a."PromotedAt", a."UpdatedAt" AS "UpdatedAt0"
    FROM "CampaignRecipients" AS c0
    LEFT JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
    LEFT JOIN "AudienceMembers" AS a ON c0."AudienceMemberId" = a."Id"
) AS t0 ON t."Id" = t0."CampaignId"
ORDER BY t."Id"
2025-09-26 01:33:25.577 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='7df0c339-72ae-4211-9827-ca3ccb924714'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."CampaignId", c0."IsFromTemplate", c0."Position", c0."Title", c0."Type", c0."Value", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN "CampaignButtons" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-26 01:33:25.601 +05:30 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-26 01:33:25.612 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__flowId_Value_0='2648e864-9190-4484-a53c-8c263daebe4d', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", t0."Id", t0."CTAFlowConfigId", t0."PositionX", t0."PositionY", t0."ProfileNameSlot", t0."RequiredSource", t0."RequiredTag", t0."StepOrder", t0."TemplateToSend", t0."TemplateType", t0."TriggerButtonText", t0."TriggerButtonType", t0."UseProfileName", t0."Id0", t0."ButtonIndex", t0."ButtonSubType", t0."ButtonText", t0."ButtonType", t0."ButtonValue", t0."CTAFlowStepId", t0."NextStepId"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."Id" = @__flowId_Value_0 AND c."BusinessId" = @__businessId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."CTAFlowConfigId", c0."PositionX", c0."PositionY", c0."ProfileNameSlot", c0."RequiredSource", c0."RequiredTag", c0."StepOrder", c0."TemplateToSend", c0."TemplateType", c0."TriggerButtonText", c0."TriggerButtonType", c0."UseProfileName", f."Id" AS "Id0", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
    FROM "CTAFlowSteps" AS c0
    LEFT JOIN "FlowButtonLinks" AS f ON c0."Id" = f."CTAFlowStepId"
) AS t0 ON t."Id" = t0."CTAFlowConfigId"
ORDER BY t."Id", t0."Id"
2025-09-26 01:33:25.622 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 01:33:25.627 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:33:25.629 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:33:27.242 +05:30 [INF] Received HTTP response headers after 1609.5823ms - 200
2025-09-26 01:33:27.245 +05:30 [INF] End processing HTTP request after 1618.1196ms - 200
2025-09-26 01:33:27.865 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaign_CTAFlowConfigId_Value_0='2648e864-9190-4484-a53c-8c263daebe4d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "CTAFlowSteps" AS c
WHERE c."CTAFlowConfigId" = @__campaign_CTAFlowConfigId_Value_0
ORDER BY c."StepOrder"
LIMIT 1
2025-09-26 01:33:27.890 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 01:33:27.899 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 01:33:29.404 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 01:33:29.407 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 01:33:29.890 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:03:29.8868981+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:33:30.558 +05:30 [INF] Received HTTP response headers after 1148.6449ms - 200
2025-09-26 01:33:30.561 +05:30 [INF] End processing HTTP request after 1156.5113ms - 200
2025-09-26 01:33:34.608 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-26 01:33:34.614 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-09-26 01:33:34.613 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__messageLogId_0='9f1ae4a0-0ff0-4317-afbf-f8214d90bab3', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 01:33:34.613 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-09-26 01:33:34.626 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:33:34.623 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:33:34.635 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:33:34.637 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:33:34.638 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p4='a9c41b52-e704-4f54-891a-69d241af7193', @p0='ad72274583b4139f55612c372025d07ac2e3c42aaa7bd588ad6999439b2ce953', @p1='2025-09-25T20:03:27.8824133Z' (Nullable = true) (DbType = DateTime), @p2='[]' (DbType = Object), @p3='2025-09-25T20:03:27.8824133Z' (DbType = DateTime), @p5='9f1ae4a0-0ff0-4317-afbf-f8214d90bab3', @p6='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p7='[{"i":0,"position":1,"text":"Show Me Template 2","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"position":2,"text":"Show Me Template 3","type":"QUICK_REPLY","subType":"quick_reply"}]', @p8='2648e864-9190-4484-a53c-8c263daebe4d' (Nullable = true), @p9='812b0075-74ac-4e77-9ff8-47a1360ff202' (Nullable = true), @p10='7df0c339-72ae-4211-9827-ca3ccb924714' (Nullable = true), @p11='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p12=NULL, @p13=NULL, @p14=NULL (DbType = DateTime), @p15='2025-09-25T20:03:27.8824133Z' (DbType = DateTime), @p16=NULL, @p17=NULL (DbType = Int32), @p18=NULL (DbType = Boolean), @p19='False', @p20=NULL, @p21='template_1' (Nullable = false), @p22='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjdFOTZDRDg3Qjc1OTQ1QkY0AA==', @p23=NULL (DbType = Decimal), @p24=NULL, @p25=NULL, @p26=NULL, @p27='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjdFOTZDRDg3Qjc1OTQ1QkY0AA==","message_status":"accepted"}]}', @p28='918974005240' (Nullable = false), @p29=NULL (DbType = Guid), @p30=NULL, @p31='3d2debe8-c577-4769-a048-57d7eb08f855' (Nullable = true), @p32='2025-09-25T20:03:27.8824133Z' (Nullable = true) (DbType = DateTime), @p33='campaign', @p34='Sent' (Nullable = false), @p35='98f739e5-b6df-4369-b682-2212afc06739', @p36='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p37=NULL, @p38=NULL, @p39='2025-09-25T20:03:34.6300221+00:00' (DbType = DateTime), @p40='send_response' (Nullable = false), @p41=NULL (DbType = Boolean), @p42='9f1ae4a0-0ff0-4317-afbf-f8214d90bab3' (Nullable = true), @p43='2025-09-25T20:03:34.6300238+00:00' (DbType = DateTime), @p44='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjdFOTZDRDg3Qjc1OTQ1QkY0AA==","message_status":"accepted"}]}' (Nullable = false), @p45=NULL (DbType = Decimal), @p46=NULL, @p47='META_CLOUD' (Nullable = false), @p48='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjdFOTZDRDg3Qjc1OTQ1QkY0AA=='], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignRecipients" SET "IdempotencyKey" = @p0, "MaterializedAt" = @p1, "ResolvedButtonUrlsJson" = @p2, "UpdatedAt" = @p3
WHERE "Id" = @p4;
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34)
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48);
2025-09-26 01:33:34.639 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:33:34.644 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjdFOTZDRDg3Qjc1OTQ1QkY0AA==","status":"delivered","timestamp":"1758830611","recipient_id":"918974005240","conversation":{"id":"161575d87a7575f114e422682d0bc9c9","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:33:34.651 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjdFOTZDRDg3Qjc1OTQ1QkY0AA==","status":"sent","timestamp":"1758830610","recipient_id":"918974005240","conversation":{"id":"161575d87a7575f114e422682d0bc9c9","expiration_timestamp":"1758830610","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:33:34.655 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:33:34.640 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:33:34.656 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjdFOTZDRDg3Qjc1OTQ1QkY0AA==","status":"delivered","timestamp":"1758830611","recipient_id":"918974005240","conversation":{"id":"161575d87a7575f114e422682d0bc9c9","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:33:34.657 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='f21a2915-ddbe-40bd-8632-16854bc803e8', @p1='True', @p2=NULL, @p3='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p4='[{"i":0,"position":1,"text":"Show Me Template 2","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"position":2,"text":"Show Me Template 3","type":"QUICK_REPLY","subType":"quick_reply"}]', @p5='2648e864-9190-4484-a53c-8c263daebe4d' (Nullable = true), @p6='812b0075-74ac-4e77-9ff8-47a1360ff202' (Nullable = true), @p7='7df0c339-72ae-4211-9827-ca3ccb924714', @p8=NULL, @p9=NULL, @p10=NULL (DbType = DateTime), @p11='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p12=NULL, @p13='2025-09-25T20:03:27.8824133Z' (DbType = DateTime), @p14='system', @p15=NULL (DbType = DateTime), @p16=NULL, @p17=NULL, @p18=NULL, @p19=NULL, @p20='False', @p21=NULL (DbType = DateTime), @p22=NULL, @p23=NULL, @p24='This is the Template : 1' (Nullable = false), @p25='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjdFOTZDRDg3Qjc1OTQ1QkY0AA==', @p26='9f1ae4a0-0ff0-4317-afbf-f8214d90bab3' (Nullable = true), @p27=NULL (DbType = DateTime), @p28='a9c41b52-e704-4f54-891a-69d241af7193', @p29='0', @p30='3d2debe8-c577-4769-a048-57d7eb08f855' (Nullable = true), @p31='Sent', @p32='2025-09-25T20:03:27.8824133Z' (Nullable = true) (DbType = DateTime), @p33=NULL, @p34='template_1', @p35=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-09-26 01:33:34.660 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:33:34.658 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:33:34.668 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-26 01:33:34.663 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjdFOTZDRDg3Qjc1OTQ1QkY0AA==","status":"delivered","timestamp":"1758830612","recipient_id":"918974005240","conversation":{"id":"161575d87a7575f114e422682d0bc9c9","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:33:34.680 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 36.9026ms
2025-09-26 01:33:34.680 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 01:33:34.682 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:33:34.689 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-26 01:33:34.690 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:33:34.692 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:33:34.695 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 12040.3767ms
2025-09-26 01:33:34.697 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 45.9685ms
2025-09-26 01:33:34.701 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-26 01:33:34.702 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:33:34.704 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 90.5008ms
2025-09-26 01:33:34.707 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 01:33:34.709 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:33:34.714 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 51.4039ms
2025-09-26 01:33:34.712 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:33:34.721 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/7df0c339-72ae-4211-9827-ca3ccb924714 - 200 null application/json; charset=utf-8 12080.2232ms
2025-09-26 01:33:34.723 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 114.8674ms
2025-09-26 01:33:34.725 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:33:34.731 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjdFOTZDRDg3Qjc1OTQ1QkY0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:33:34.745 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 132.0731ms
2025-09-26 01:33:34.752 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__sid_0='f21a2915-ddbe-40bd-8632-16854bc803e8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 01:33:34.765 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='f21a2915-ddbe-40bd-8632-16854bc803e8', @p0='2025-09-25T20:03:31.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-26 01:33:34.770 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjdFOTZDRDg3Qjc1OTQ1QkY0AA== → Delivered
2025-09-26 01:33:34.772 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjdFOTZDRDg3Qjc1OTQ1QkY0AA==","status":"sent","timestamp":"1758830610","recipient_id":"918974005240","conversation":{"id":"161575d87a7575f114e422682d0bc9c9","expiration_timestamp":"1758830610","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:33:34.774 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:33:34.779 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjdFOTZDRDg3Qjc1OTQ1QkY0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:33:34.786 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='f21a2915-ddbe-40bd-8632-16854bc803e8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 01:33:34.793 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='f21a2915-ddbe-40bd-8632-16854bc803e8', @p0='Sent'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "SendStatus" = @p0
WHERE "Id" = @p1;
2025-09-26 01:33:34.798 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjdFOTZDRDg3Qjc1OTQ1QkY0AA== → Sent
2025-09-26 01:33:34.800 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjdFOTZDRDg3Qjc1OTQ1QkY0AA==","status":"delivered","timestamp":"1758830612","recipient_id":"918974005240","conversation":{"id":"161575d87a7575f114e422682d0bc9c9","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:33:34.803 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:33:34.809 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjdFOTZDRDg3Qjc1OTQ1QkY0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:33:34.817 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='f21a2915-ddbe-40bd-8632-16854bc803e8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 01:33:34.823 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='f21a2915-ddbe-40bd-8632-16854bc803e8', @p0='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "SendStatus" = @p0
WHERE "Id" = @p1;
2025-09-26 01:33:34.827 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjdFOTZDRDg3Qjc1OTQ1QkY0AA== → Delivered
2025-09-26 01:33:39.912 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:03:39.9091665+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:33:45.896 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-09-26 01:33:45.901 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:33:45.903 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:33:45.908 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjdFOTZDRDg3Qjc1OTQ1QkY0AA==","status":"read","timestamp":"1758830624","recipient_id":"918974005240","conversation":{"id":"161575d87a7575f114e422682d0bc9c9","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:33:45.911 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:33:45.912 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjdFOTZDRDg3Qjc1OTQ1QkY0AA==","status":"read","timestamp":"1758830624","recipient_id":"918974005240","conversation":{"id":"161575d87a7575f114e422682d0bc9c9","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:33:45.913 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:33:45.915 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:33:45.918 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 10.9734ms
2025-09-26 01:33:45.925 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjdFOTZDRDg3Qjc1OTQ1QkY0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:33:45.925 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:33:45.932 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='f21a2915-ddbe-40bd-8632-16854bc803e8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 01:33:45.934 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 37.6124ms
2025-09-26 01:33:45.943 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='f21a2915-ddbe-40bd-8632-16854bc803e8', @p0='2025-09-25T20:03:44.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-26 01:33:45.955 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjdFOTZDRDg3Qjc1OTQ1QkY0AA== → Read
2025-09-26 01:33:49.921 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:03:49.9178934+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:33:52.032 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 633
2025-09-26 01:33:52.039 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:33:52.041 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:33:52.045 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjdFOTZDRDg3Qjc1OTQ1QkY0AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMjk3RUE0NTMzMUNCNTg1QjRGRDM1N0I5N0M2NEFEMTcA","timestamp":"1758830630","type":"button","button":{"payload":"Show Me Template 2","text":"Show Me Template 2"}}]},"field":"messages"}]}]}
2025-09-26 01:33:52.048 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:33:52.049 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjdFOTZDRDg3Qjc1OTQ1QkY0AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMjk3RUE0NTMzMUNCNTg1QjRGRDM1N0I5N0M2NEFEMTcA","timestamp":"1758830630","type":"button","button":{"payload":"Show Me Template 2","text":"Show Me Template 2"}}]},"field":"messages"}]}]}
2025-09-26 01:33:52.050 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:33:52.055 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 10.8227ms
2025-09-26 01:33:52.053 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-26 01:33:52.058 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:33:52.062 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 29.2718ms
2025-09-26 01:33:52.095 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-26 01:33:52.099 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggMjk3RUE0NTMzMUNCNTg1QjRGRDM1N0I5N0M2NEFEMTcA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjdFOTZDRDg3Qjc1OTQ1QkY0AA==, Text: Show Me Template 2
2025-09-26 01:33:52.113 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjdFOTZDRDg3Qjc1OTQ1QkY0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-26 01:33:52.128 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__origin_Id_0='9f1ae4a0-0ff0-4317-afbf-f8214d90bab3' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjdFOTZDRDg3Qjc1OTQ1QkY0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-09-26 01:33:52.145 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__fromDigits_1='918974005240', @__fromRaw_2='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND (c."PhoneNumber" = @__fromDigits_1 OR c."PhoneNumber" = @__fromRaw_2)
LIMIT 1
2025-09-26 01:33:52.165 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__stepId_0='812b0075-74ac-4e77-9ff8-47a1360ff202'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
WHERE f."CTAFlowStepId" = @__stepId_0
ORDER BY f."ButtonIndex"
2025-09-26 01:33:52.173 +05:30 [INF] ✅ Mapped click by TEXT to index 0 (flow="2648e864-9190-4484-a53c-8c263daebe4d", step="812b0075-74ac-4e77-9ff8-47a1360ff202")
2025-09-26 01:33:52.193 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__sourceStepId_0='812b0075-74ac-4e77-9ff8-47a1360ff202', @__flowId_1='2648e864-9190-4484-a53c-8c263daebe4d', @__buttonIndex_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-09-26 01:33:52.205 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__stepId_0='812b0075-74ac-4e77-9ff8-47a1360ff202'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-09-26 01:33:52.288 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='3b7d16dd-7d2d-4514-86a3-651a5fc7868e', @p1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p2='0' (Nullable = true), @p3='f21a2915-ddbe-40bd-8632-16854bc803e8' (Nullable = true), @p4='918974005240', @p5=NULL, @p6='2025-09-25T20:03:52.2119227Z' (DbType = DateTime), @p7='2648e864-9190-4484-a53c-8c263daebe4d' (Nullable = true), @p8='9f1ae4a0-0ff0-4317-afbf-f8214d90bab3' (Nullable = true), @p9=NULL, @p10='bea3f1a3-3be5-47c5-b118-219f828cc532' (Nullable = true), @p11='3d2debe8-c577-4769-a048-57d7eb08f855' (Nullable = true), @p12='812b0075-74ac-4e77-9ff8-47a1360ff202', @p13='template_1' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='Show Me Template 2'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-26 01:33:52.311 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignSendLogId_Value_0='f21a2915-ddbe-40bd-8632-16854bc803e8'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Provider", c0."PhoneNumberId"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
WHERE c."Id" = @__campaignSendLogId_Value_0
LIMIT 1
2025-09-26 01:33:52.351 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_TargetStepId_0='154e9b84-efbf-46a3-9b6e-25b6b0f74fed' (Nullable = true), @__8__locals1_context_FlowId_1='2648e864-9190-4484-a53c-8c263daebe4d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."ProfileNameSlot", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", t."UseProfileName", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."ProfileNameSlot", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c."UseProfileName"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__8__locals1_context_TargetStepId_0 AND c."CTAFlowConfigId" = @__8__locals1_context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-09-26 01:33:52.359 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 01:33:52.365 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:33:52.367 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:33:53.354 +05:30 [INF] Received HTTP response headers after 985.005ms - 200
2025-09-26 01:33:53.358 +05:30 [INF] End processing HTTP request after 993.359ms - 200
2025-09-26 01:33:53.576 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_BusinessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__8__locals1_context_ContactPhone_1='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__8__locals1_context_BusinessId_0 AND c."PhoneNumber" = @__8__locals1_context_ContactPhone_1
LIMIT 1
2025-09-26 01:33:53.587 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 01:33:53.596 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 01:34:00.089 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T20:04:00.0849117+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:34:00.092 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 01:34:00.099 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 01:34:01.442 +05:30 [INF] Received HTTP response headers after 1341.3785ms - 200
2025-09-26 01:34:01.445 +05:30 [INF] End processing HTTP request after 1352.5501ms - 200
2025-09-26 01:34:05.762 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='e25554fc-cd01-4d1b-9184-c66b90ce3b26', @p1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-09-25T20:04:05.7567421Z' (DbType = DateTime), @p7='2648e864-9190-4484-a53c-8c263daebe4d' (Nullable = true), @p8='4c381592-8f15-43f3-9f72-693e33b48bc6' (Nullable = true), @p9='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4OUM0MDY4MjYzM0E0OTJFAA==","message_status":"accepted"}]}', @p10='fda30da2-3990-4406-9ff6-8f2db2c82332' (Nullable = true), @p11=NULL (DbType = Guid), @p12='154e9b84-efbf-46a3-9b6e-25b6b0f74fed', @p13='single_variable_body' (Nullable = false), @p14='True', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='4c381592-8f15-43f3-9f72-693e33b48bc6', @p20='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p21=NULL, @p22='2648e864-9190-4484-a53c-8c263daebe4d' (Nullable = true), @p23='154e9b84-efbf-46a3-9b6e-25b6b0f74fed' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26=NULL, @p27=NULL, @p28=NULL (DbType = DateTime), @p29='2025-09-25T20:04:05.7545285Z' (DbType = DateTime), @p30=NULL, @p31='1' (Nullable = true), @p32=NULL (DbType = Boolean), @p33='False', @p34=NULL, @p35='single_variable_body' (Nullable = false), @p36='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4OUM0MDY4MjYzM0E0OTJFAA==', @p37=NULL (DbType = Decimal), @p38=NULL, @p39=NULL, @p40=NULL, @p41='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4OUM0MDY4MjYzM0E0OTJFAA==","message_status":"accepted"}]}', @p42='918974005240' (Nullable = false), @p43='9f1ae4a0-0ff0-4317-afbf-f8214d90bab3' (Nullable = true), @p44=NULL, @p45=NULL (DbType = Guid), @p46='2025-09-25T20:04:05.7545307Z' (Nullable = true) (DbType = DateTime), @p47='flow', @p48='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48)
RETURNING "MessageTime";
2025-09-26 01:34:08.627 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-26 01:34:08.633 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:34:08.635 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:34:08.639 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4OUM0MDY4MjYzM0E0OTJFAA==","status":"sent","timestamp":"1758830647","recipient_id":"918974005240","conversation":{"id":"789d9403c88b57799a852d36ff30301c","expiration_timestamp":"1758830647","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:34:08.642 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:34:08.643 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4OUM0MDY4MjYzM0E0OTJFAA==","status":"sent","timestamp":"1758830647","recipient_id":"918974005240","conversation":{"id":"789d9403c88b57799a852d36ff30301c","expiration_timestamp":"1758830647","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:34:08.643 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:34:08.645 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:34:08.648 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 9.2283ms
2025-09-26 01:34:08.654 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4OUM0MDY4MjYzM0E0OTJFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:34:08.655 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:34:08.658 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4OUM0MDY4MjYzM0E0OTJFAA==
2025-09-26 01:34:08.659 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 32.7548ms
2025-09-26 01:34:08.663 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4OUM0MDY4MjYzM0E0OTJFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:34:08.672 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4OUM0MDY4MjYzM0E0OTJFAA== (legacy)
2025-09-26 01:34:10.103 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:04:10.1006088+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:34:10.166 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-09-26 01:34:10.172 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:34:10.175 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:34:10.178 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4OUM0MDY4MjYzM0E0OTJFAA==","status":"read","timestamp":"1758830647","recipient_id":"918974005240","conversation":{"id":"789d9403c88b57799a852d36ff30301c","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:34:10.181 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:34:10.181 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4OUM0MDY4MjYzM0E0OTJFAA==","status":"read","timestamp":"1758830647","recipient_id":"918974005240","conversation":{"id":"789d9403c88b57799a852d36ff30301c","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:34:10.182 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:34:10.188 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-09-26 01:34:10.188 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:34:10.190 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 12.4744ms
2025-09-26 01:34:10.201 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4OUM0MDY4MjYzM0E0OTJFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:34:10.195 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:34:10.202 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:34:10.206 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4OUM0MDY4MjYzM0E0OTJFAA==
2025-09-26 01:34:10.207 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:34:10.214 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4OUM0MDY4MjYzM0E0OTJFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:34:10.209 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 43.5049ms
2025-09-26 01:34:10.227 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='4c381592-8f15-43f3-9f72-693e33b48bc6', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-09-26 01:34:10.218 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4OUM0MDY4MjYzM0E0OTJFAA==","status":"delivered","timestamp":"1758830647","recipient_id":"918974005240","conversation":{"id":"789d9403c88b57799a852d36ff30301c","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:34:10.236 +05:30 [INF] ℹ️ MessageLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4OUM0MDY4MjYzM0E0OTJFAA== → Read
2025-09-26 01:34:10.238 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:34:10.240 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4OUM0MDY4MjYzM0E0OTJFAA==","status":"delivered","timestamp":"1758830647","recipient_id":"918974005240","conversation":{"id":"789d9403c88b57799a852d36ff30301c","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:34:10.242 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:34:10.243 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:34:10.246 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 29.1267ms
2025-09-26 01:34:10.255 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4OUM0MDY4MjYzM0E0OTJFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:34:10.256 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:34:10.260 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4OUM0MDY4MjYzM0E0OTJFAA==
2025-09-26 01:34:10.263 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 75.0296ms
2025-09-26 01:34:10.267 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4OUM0MDY4MjYzM0E0OTJFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:34:10.276 +05:30 [INF] 🔁 Duplicate status 'delivered' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQjI4OUM0MDY4MjYzM0E0OTJFAA== (legacy)
2025-09-26 01:34:14.868 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 633
2025-09-26 01:34:14.875 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:34:14.878 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:34:14.881 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjdFOTZDRDg3Qjc1OTQ1QkY0AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggOTI3MDhFMTU5MkE3NTdBNDVGQUU2NUIyNzlGODAzQ0IA","timestamp":"1758830653","type":"button","button":{"payload":"Show Me Template 3","text":"Show Me Template 3"}}]},"field":"messages"}]}]}
2025-09-26 01:34:14.885 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:34:14.885 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjdFOTZDRDg3Qjc1OTQ1QkY0AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggOTI3MDhFMTU5MkE3NTdBNDVGQUU2NUIyNzlGODAzQ0IA","timestamp":"1758830653","type":"button","button":{"payload":"Show Me Template 3","text":"Show Me Template 3"}}]},"field":"messages"}]}]}
2025-09-26 01:34:14.887 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:34:14.889 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-26 01:34:14.891 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 10.5181ms
2025-09-26 01:34:14.893 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-26 01:34:14.895 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:34:14.897 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggOTI3MDhFMTU5MkE3NTdBNDVGQUU2NUIyNzlGODAzQ0IA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjdFOTZDRDg3Qjc1OTQ1QkY0AA==, Text: Show Me Template 3
2025-09-26 01:34:14.902 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 34.4424ms
2025-09-26 01:34:14.908 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjdFOTZDRDg3Qjc1OTQ1QkY0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-26 01:34:14.922 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__origin_Id_0='9f1ae4a0-0ff0-4317-afbf-f8214d90bab3' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMjdFOTZDRDg3Qjc1OTQ1QkY0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-09-26 01:34:14.930 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__fromDigits_1='918974005240', @__fromRaw_2='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND (c."PhoneNumber" = @__fromDigits_1 OR c."PhoneNumber" = @__fromRaw_2)
LIMIT 1
2025-09-26 01:34:14.937 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__stepId_0='812b0075-74ac-4e77-9ff8-47a1360ff202'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
WHERE f."CTAFlowStepId" = @__stepId_0
ORDER BY f."ButtonIndex"
2025-09-26 01:34:14.942 +05:30 [INF] ✅ Mapped click by TEXT to index 1 (flow="2648e864-9190-4484-a53c-8c263daebe4d", step="812b0075-74ac-4e77-9ff8-47a1360ff202")
2025-09-26 01:34:14.951 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sourceStepId_0='812b0075-74ac-4e77-9ff8-47a1360ff202', @__flowId_1='2648e864-9190-4484-a53c-8c263daebe4d', @__buttonIndex_2='1'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-09-26 01:34:14.960 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__stepId_0='812b0075-74ac-4e77-9ff8-47a1360ff202'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-09-26 01:34:14.969 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='15306063-8e9c-4217-b909-cedc2659aeae', @p1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p2='1' (Nullable = true), @p3='f21a2915-ddbe-40bd-8632-16854bc803e8' (Nullable = true), @p4='918974005240', @p5=NULL, @p6='2025-09-25T20:04:14.9649379Z' (DbType = DateTime), @p7='2648e864-9190-4484-a53c-8c263daebe4d' (Nullable = true), @p8='9f1ae4a0-0ff0-4317-afbf-f8214d90bab3' (Nullable = true), @p9=NULL, @p10='660657c3-2646-4b9c-b37e-dea69b0a64ee' (Nullable = true), @p11='3d2debe8-c577-4769-a048-57d7eb08f855' (Nullable = true), @p12='812b0075-74ac-4e77-9ff8-47a1360ff202', @p13='template_1' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='Show Me Template 3'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-26 01:34:14.977 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignSendLogId_Value_0='f21a2915-ddbe-40bd-8632-16854bc803e8'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Provider", c0."PhoneNumberId"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
WHERE c."Id" = @__campaignSendLogId_Value_0
LIMIT 1
2025-09-26 01:34:14.985 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_TargetStepId_0='154e9b84-efbf-46a3-9b6e-25b6b0f74fed' (Nullable = true), @__8__locals1_context_FlowId_1='2648e864-9190-4484-a53c-8c263daebe4d'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."ProfileNameSlot", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", t."UseProfileName", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."ProfileNameSlot", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c."UseProfileName"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__8__locals1_context_TargetStepId_0 AND c."CTAFlowConfigId" = @__8__locals1_context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-09-26 01:34:14.993 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 01:34:14.998 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:34:15.000 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:34:18.033 +05:30 [INF] Received HTTP response headers after 3031.3764ms - 200
2025-09-26 01:34:18.037 +05:30 [INF] End processing HTTP request after 3038.8384ms - 200
2025-09-26 01:34:18.212 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_context_BusinessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__8__locals1_context_ContactPhone_1='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__8__locals1_context_BusinessId_0 AND c."PhoneNumber" = @__8__locals1_context_ContactPhone_1
LIMIT 1
2025-09-26 01:34:18.221 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 01:34:18.228 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 01:34:21.041 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 01:34:21.044 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:04:21.0411470+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:34:21.045 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 01:34:22.018 +05:30 [INF] Received HTTP response headers after 966.1715ms - 200
2025-09-26 01:34:22.020 +05:30 [INF] End processing HTTP request after 979.6713ms - 200
2025-09-26 01:34:22.029 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='2281ef97-0cab-4f3e-b0e2-7ba9a42bbef5', @p1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p2='1' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-09-25T20:04:22.0245282Z' (DbType = DateTime), @p7='2648e864-9190-4484-a53c-8c263daebe4d' (Nullable = true), @p8='c30f523f-89c3-44ae-aa37-2a787941a8df' (Nullable = true), @p9='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0IxRUI3NUM0Qjc1NDRGNTI0AA==","message_status":"accepted"}]}', @p10='9d9fd25c-1d98-4ad9-b568-f4a4294a035e' (Nullable = true), @p11=NULL (DbType = Guid), @p12='154e9b84-efbf-46a3-9b6e-25b6b0f74fed', @p13='single_variable_body' (Nullable = false), @p14='True', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='c30f523f-89c3-44ae-aa37-2a787941a8df', @p20='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p21=NULL, @p22='2648e864-9190-4484-a53c-8c263daebe4d' (Nullable = true), @p23='154e9b84-efbf-46a3-9b6e-25b6b0f74fed' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26=NULL, @p27=NULL, @p28=NULL (DbType = DateTime), @p29='2025-09-25T20:04:22.0242583Z' (DbType = DateTime), @p30=NULL, @p31='1' (Nullable = true), @p32=NULL (DbType = Boolean), @p33='False', @p34=NULL, @p35='single_variable_body' (Nullable = false), @p36='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0IxRUI3NUM0Qjc1NDRGNTI0AA==', @p37=NULL (DbType = Decimal), @p38=NULL, @p39=NULL, @p40=NULL, @p41='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0IxRUI3NUM0Qjc1NDRGNTI0AA==","message_status":"accepted"}]}', @p42='918974005240' (Nullable = false), @p43='9f1ae4a0-0ff0-4317-afbf-f8214d90bab3' (Nullable = true), @p44=NULL, @p45=NULL (DbType = Guid), @p46='2025-09-25T20:04:22.0242599Z' (Nullable = true) (DbType = DateTime), @p47='flow', @p48='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48)
RETURNING "MessageTime";
2025-09-26 01:34:29.909 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-26 01:34:29.916 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:34:29.919 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:34:29.923 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0IxRUI3NUM0Qjc1NDRGNTI0AA==","status":"sent","timestamp":"1758830668","recipient_id":"918974005240","conversation":{"id":"2a22b94d402e44dd586037bb041f4423","expiration_timestamp":"1758830668","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:34:29.927 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:34:29.928 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0IxRUI3NUM0Qjc1NDRGNTI0AA==","status":"sent","timestamp":"1758830668","recipient_id":"918974005240","conversation":{"id":"2a22b94d402e44dd586037bb041f4423","expiration_timestamp":"1758830668","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:34:29.930 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:34:29.932 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:34:29.934 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 11.7876ms
2025-09-26 01:34:29.941 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0IxRUI3NUM0Qjc1NDRGNTI0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:34:29.943 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:34:29.947 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0IxRUI3NUM0Qjc1NDRGNTI0AA==
2025-09-26 01:34:29.949 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 39.5354ms
2025-09-26 01:34:29.955 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0IxRUI3NUM0Qjc1NDRGNTI0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:34:29.966 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0IxRUI3NUM0Qjc1NDRGNTI0AA== (legacy)
2025-09-26 01:34:30.130 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/7df0c339-72ae-4211-9827-ca3ccb924714/summary - null null
2025-09-26 01:34:30.138 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:34:30.141 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/7df0c339-72ae-4211-9827-ca3ccb924714/summary - 204 null null 10.7774ms
2025-09-26 01:34:30.159 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/7df0c339-72ae-4211-9827-ca3ccb924714/summary - null null
2025-09-26 01:34:30.168 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:34:30.170 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-09-26 01:34:30.179 +05:30 [INF] Route matched with {action = "GetCampaignSummary", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCampaignSummary(System.Guid) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-09-26 01:34:30.224 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-26 01:34:30.240 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__campaignId_0='7df0c339-72ae-4211-9827-ca3ccb924714'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int AS "TotalRecipients", count(*) FILTER (WHERE t."SendStatus" <> 'Failed' OR t."SendStatus" IS NULL)::int AS "SentCount", count(*) FILTER (WHERE t."SendStatus" = 'Failed')::int AS "FailedCount", count(*) FILTER (WHERE t."IsClicked")::int AS "ClickedCount", count(*) FILTER (WHERE t."DeliveredAt" IS NOT NULL)::int AS "DeliveredCount", count(*) FILTER (WHERE t."ReadAt" IS NOT NULL)::int AS "ReadCount", max(t."SentAt") AS "LastSentAt"
FROM (
    SELECT c."DeliveredAt", c."IsClicked", c."ReadAt", c."SendStatus", c."SentAt", 1 AS "Key"
    FROM "CampaignSendLogs" AS c
    WHERE c."CampaignId" = @__campaignId_0
) AS t
GROUP BY t."Key"
LIMIT 1
2025-09-26 01:34:30.250 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignTracking.DTOs.CampaignLogSummaryDto'.
2025-09-26 01:34:30.257 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api) in 74.0243ms
2025-09-26 01:34:30.261 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetCampaignSummary (xbytechat.api)'
2025-09-26 01:34:30.263 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/7df0c339-72ae-4211-9827-ca3ccb924714/summary - 200 null application/json; charset=utf-8 104.5189ms
2025-09-26 01:34:30.367 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-09-26 01:34:30.373 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:34:30.376 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:34:30.380 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0IxRUI3NUM0Qjc1NDRGNTI0AA==","status":"read","timestamp":"1758830668","recipient_id":"918974005240","conversation":{"id":"2a22b94d402e44dd586037bb041f4423","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:34:30.384 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:34:30.384 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0IxRUI3NUM0Qjc1NDRGNTI0AA==","status":"read","timestamp":"1758830668","recipient_id":"918974005240","conversation":{"id":"2a22b94d402e44dd586037bb041f4423","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:34:30.385 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:34:30.388 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:34:30.390 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 10.9426ms
2025-09-26 01:34:30.397 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0IxRUI3NUM0Qjc1NDRGNTI0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:34:30.399 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:34:30.405 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0IxRUI3NUM0Qjc1NDRGNTI0AA==
2025-09-26 01:34:30.407 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 39.5088ms
2025-09-26 01:34:30.413 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0IxRUI3NUM0Qjc1NDRGNTI0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:34:30.429 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p1='c30f523f-89c3-44ae-aa37-2a787941a8df', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-09-26 01:34:30.436 +05:30 [INF] ℹ️ MessageLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0IxRUI3NUM0Qjc1NDRGNTI0AA== → Read
2025-09-26 01:34:30.586 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/7df0c339-72ae-4211-9827-ca3ccb924714?page=1&pageSize=10&status=&search= - null null
2025-09-26 01:34:30.592 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:34:30.594 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign-logs/campaign/7df0c339-72ae-4211-9827-ca3ccb924714?page=1&pageSize=10&status=&search= - 204 null null 8.3936ms
2025-09-26 01:34:30.601 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/7df0c339-72ae-4211-9827-ca3ccb924714?page=1&pageSize=10&status=&search= - null null
2025-09-26 01:34:30.607 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:34:30.609 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-09-26 01:34:30.619 +05:30 [INF] Route matched with {action = "GetLogsByCampaign", controller = "CampaignSendLog"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogsByCampaign(System.Guid, System.String, System.String, Int32, Int32) on controller xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController (xbytechat.api).
2025-09-26 01:34:30.672 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='7df0c339-72ae-4211-9827-ca3ccb924714'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CampaignSendLogs" AS c
LEFT JOIN "MessageLogs" AS m ON c."MessageLogId" = m."Id"
WHERE c."CampaignId" = @__campaignId_0
2025-09-26 01:34:30.710 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__campaignId_0='7df0c339-72ae-4211-9827-ca3ccb924714', @__p_2='10', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CampaignId", t."ContactId", CASE
    WHEN c0."Id" IS NOT NULL THEN c0."Name"
    ELSE 'N/A'
END AS "ContactName", CASE
    WHEN c0."Id" IS NOT NULL THEN c0."PhoneNumber"
    ELSE '-'
END AS "ContactPhone", t."RecipientNumber", t."RecipientId", t."MessageBody", t."TemplateId", t."SendStatus", t."ErrorMessage", t."CreatedAt", t."SentAt", t."DeliveredAt", t."ReadAt", t."SourceChannel", t."IsClicked", t."ClickedAt", t."ClickType"
FROM (
    SELECT c."Id", c."CampaignId", c."ClickType", c."ClickedAt", c."ContactId", c."CreatedAt", c."DeliveredAt", c."ErrorMessage", c."IsClicked", c."MessageBody", c."ReadAt", c."RecipientId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", m."RecipientNumber"
    FROM "CampaignSendLogs" AS c
    LEFT JOIN "MessageLogs" AS m ON c."MessageLogId" = m."Id"
    WHERE c."CampaignId" = @__campaignId_0
    ORDER BY c."CreatedAt" DESC
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN "Contacts" AS c0 ON t."ContactId" = c0."Id"
ORDER BY t."CreatedAt" DESC
2025-09-26 01:34:30.721 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.CRM.Dtos.PagedResult`1[[xbytechat.api.Features.CampaignTracking.DTOs.CampaignSendLogDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 01:34:30.739 +05:30 [INF] Executed action xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api) in 114.9832ms
2025-09-26 01:34:30.743 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignTracking.Controllers.CampaignSendLogController.GetLogsByCampaign (xbytechat.api)'
2025-09-26 01:34:30.745 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign-logs/campaign/7df0c339-72ae-4211-9827-ca3ccb924714?page=1&pageSize=10&status=&search= - 200 null application/json; charset=utf-8 144.4182ms
2025-09-26 01:34:31.069 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:04:31.0653974+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:34:33.625 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/f21a2915-ddbe-40bd-8632-16854bc803e8 - null null
2025-09-26 01:34:33.632 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:34:33.634 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tracking/journeys/f21a2915-ddbe-40bd-8632-16854bc803e8 - 204 null null 9.7263ms
2025-09-26 01:34:33.645 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/f21a2915-ddbe-40bd-8632-16854bc803e8 - null null
2025-09-26 01:34:33.652 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:34:33.654 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-09-26 01:34:33.663 +05:30 [INF] Route matched with {action = "GetJourney", controller = "Tracking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetJourney(System.Guid) on controller xbytechat.api.Features.Tracking.Controllers.TrackingController (xbytechat.api).
2025-09-26 01:34:33.745 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__initialCampaignSendLogId_0='f21a2915-ddbe-40bd-8632-16854bc803e8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId", c0."Id", c0."AudienceId", c0."BusinessId", c0."CTAFlowConfigId", c0."CampaignId", c0."CampaignType", c0."CreatedAt", c0."CreatedBy", c0."CtaId", c0."DeletedAt", c0."DeletedBy", c0."DocumentUrl", c0."FollowUpTemplateId", c0."ImageCaption", c0."ImageUrl", c0."IsDeleted", c0."MessageBody", c0."MessageTemplate", c0."Name", c0."PhoneNumberId", c0."Provider", c0."ScheduledAt", c0."SourceCampaignId", c0."Status", c0."TemplateId", c0."TemplateParameters", c0."TemplateSchemaSnapshot", c0."UpdatedAt", c0."VideoUrl", c1."Id", c1."AssignedAgentId", c1."BusinessId", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."ProfileName", c1."ProfileNameUpdatedAt", c1."Tags"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
LEFT JOIN "Contacts" AS c1 ON c."ContactId" = c1."Id"
WHERE c."Id" = @__initialCampaignSendLogId_0
LIMIT 1
2025-09-26 01:34:33.772 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__contactId_0='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @__8__locals1_campaignId_1='7df0c339-72ae-4211-9827-ca3ccb924714', @__8__locals1_sessionStart_2='2025-09-25T20:03:27.8824130Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT c."CreatedAt"
FROM "CampaignSendLogs" AS c
WHERE c."ContactId" = @__contactId_0 AND c."CampaignId" = @__8__locals1_campaignId_1 AND c."CreatedAt" > @__8__locals1_sessionStart_2
ORDER BY c."CreatedAt"
LIMIT 1
2025-09-26 01:34:33.804 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals2_contactId_0='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @__flowId_1='2648e864-9190-4484-a53c-8c263daebe4d' (Nullable = true), @__8__locals1_sessionStart_2='2025-09-25T20:03:27.8824130Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT c."CreatedAt"
FROM "CampaignSendLogs" AS c
WHERE c."ContactId" = @__8__locals2_contactId_0 AND c."CTAFlowConfigId" = @__flowId_1 AND c."CreatedAt" > @__8__locals1_sessionStart_2
ORDER BY c."CreatedAt"
LIMIT 1
2025-09-26 01:34:33.831 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__sentLog_Id_0='f21a2915-ddbe-40bd-8632-16854bc803e8', @__sessionStart_1='2025-09-25T20:03:27.8824130Z' (DbType = DateTime), @__sessionEnd_2='2025-09-26T20:03:27.8824130Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."RunId", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = @__sentLog_Id_0 AND c."ClickedAt" >= @__sessionStart_1 AND c."ClickedAt" < @__sessionEnd_2
ORDER BY c."ClickedAt"
2025-09-26 01:34:33.844 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__flowId_0='2648e864-9190-4484-a53c-8c263daebe4d'], CommandType='"Text"', CommandTimeout='30']
SELECT c."FlowName"
FROM "CTAFlowConfigs" AS c
WHERE c."Id" = @__flowId_0
LIMIT 1
2025-09-26 01:34:33.859 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals3_sentLog_BusinessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__flowId_1='2648e864-9190-4484-a53c-8c263daebe4d' (Nullable = true), @__8__locals3_sessionStart_2='2025-09-25T20:03:27.8824130Z' (DbType = DateTime), @__8__locals3_sessionEnd_3='2025-09-26T20:03:27.8824130Z' (DbType = DateTime), @__contactId_4='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__8__locals3_sentLog_BusinessId_0 AND c."CTAFlowConfigId" = @__flowId_1 AND c."CreatedAt" >= @__8__locals3_sessionStart_2 AND c."CreatedAt" < @__8__locals3_sessionEnd_3 AND c."ContactId" = @__contactId_4
ORDER BY c."CreatedAt"
2025-09-26 01:34:34.026 +05:30 [INF] Executed DbCommand (121ms) [Parameters=[@__chainCslIds_0={ 'f21a2915-ddbe-40bd-8632-16854bc803e8' } (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."MessageLogId", c."SentAt", c."CreatedAt", c."TemplateId", c."CTAFlowStepId", c."DeliveredAt", c."ReadAt"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = ANY (@__chainCslIds_0)
ORDER BY c."CreatedAt"
2025-09-26 01:34:34.051 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__chainCslIds_0={ 'f21a2915-ddbe-40bd-8632-16854bc803e8' } (DbType = Object), @__8__locals3_sessionStart_1='2025-09-25T20:03:27.8824130Z' (DbType = DateTime), @__8__locals3_sessionEnd_2='2025-09-26T20:03:27.8824130Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."BusinessId", f."ButtonIndex", f."CampaignSendLogId", f."ContactPhone", f."ErrorMessage", f."ExecutedAt", f."FlowId", f."MessageLogId", f."RawResponse", f."RequestId", f."RunId", f."StepId", f."StepName", f."Success", f."TemplateName", f."TemplateType", f."TrackingLogId", f."TriggeredByButton"
FROM "FlowExecutionLogs" AS f
WHERE f."CampaignSendLogId" IS NOT NULL AND f."CampaignSendLogId" = ANY (@__chainCslIds_0) AND f."ExecutedAt" >= @__8__locals3_sessionStart_1 AND f."ExecutedAt" < @__8__locals3_sessionEnd_2
ORDER BY f."ExecutedAt"
2025-09-26 01:34:34.065 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__chainMsgLogIds_0={ '9f1ae4a0-0ff0-4317-afbf-f8214d90bab3' } (DbType = Object), @__8__locals3_sessionStart_1='2025-09-25T20:03:27.8824130Z' (DbType = DateTime), @__8__locals3_sessionEnd_2='2025-09-26T20:03:27.8824130Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."BusinessId", f."ButtonIndex", f."CampaignSendLogId", f."ContactPhone", f."ErrorMessage", f."ExecutedAt", f."FlowId", f."MessageLogId", f."RawResponse", f."RequestId", f."RunId", f."StepId", f."StepName", f."Success", f."TemplateName", f."TemplateType", f."TrackingLogId", f."TriggeredByButton"
FROM "FlowExecutionLogs" AS f
WHERE f."MessageLogId" IS NOT NULL AND f."MessageLogId" = ANY (@__chainMsgLogIds_0) AND f."ExecutedAt" >= @__8__locals3_sessionStart_1 AND f."ExecutedAt" < @__8__locals3_sessionEnd_2
ORDER BY f."ExecutedAt"
2025-09-26 01:34:34.078 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals3_sentLog_BusinessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__flowId_1='2648e864-9190-4484-a53c-8c263daebe4d' (Nullable = true), @__phoneA_2='918974005240', @__phoneB_3='+918974005240', @__8__locals3_sessionStart_4='2025-09-25T20:03:27.8824130Z' (DbType = DateTime), @__8__locals3_sessionEnd_5='2025-09-26T20:03:27.8824130Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."BusinessId", f."ButtonIndex", f."CampaignSendLogId", f."ContactPhone", f."ErrorMessage", f."ExecutedAt", f."FlowId", f."MessageLogId", f."RawResponse", f."RequestId", f."RunId", f."StepId", f."StepName", f."Success", f."TemplateName", f."TemplateType", f."TrackingLogId", f."TriggeredByButton"
FROM "FlowExecutionLogs" AS f
WHERE f."BusinessId" = @__8__locals3_sentLog_BusinessId_0 AND f."FlowId" = @__flowId_1 AND (f."ContactPhone" = @__phoneA_2 OR f."ContactPhone" = @__phoneB_3) AND f."ExecutedAt" >= @__8__locals3_sessionStart_4 AND f."ExecutedAt" < @__8__locals3_sessionEnd_5
ORDER BY f."ExecutedAt"
2025-09-26 01:34:34.100 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__chainCslIds_0={ 'f21a2915-ddbe-40bd-8632-16854bc803e8' } (DbType = Object), @__8__locals3_sessionStart_1='2025-09-25T20:03:27.8824130Z' (DbType = DateTime), @__8__locals3_sessionEnd_2='2025-09-26T20:03:27.8824130Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."ButtonIndex", c."ButtonTitle", c."CampaignId", c."CampaignSendLogId", c."ClickType", c."ClickedAt", c."ContactId", c."Destination", c."Ip", c."RunId", c."UserAgent"
FROM "CampaignClickLogs" AS c
WHERE c."CampaignSendLogId" = ANY (@__chainCslIds_0) AND c."ClickedAt" >= @__8__locals3_sessionStart_1 AND c."ClickedAt" < @__8__locals3_sessionEnd_2
ORDER BY c."ClickedAt"
2025-09-26 01:34:34.108 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.Tracking.DTOs.JourneyResponseDto'.
2025-09-26 01:34:34.120 +05:30 [INF] Executed action xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api) in 450.204ms
2025-09-26 01:34:34.123 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Tracking.Controllers.TrackingController.GetJourney (xbytechat.api)'
2025-09-26 01:34:34.126 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tracking/journeys/f21a2915-ddbe-40bd-8632-16854bc803e8 - 200 null application/json; charset=utf-8 480.5484ms
2025-09-26 01:34:41.088 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:04:41.0846982+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:34:51.104 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:04:51.1010419+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:35:01.122 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:05:01.1193313+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:35:11.134 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:05:11.1312730+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:35:21.146 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:05:21.1430848+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:35:31.156 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:05:31.1526892+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:35:39.621 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-26 01:35:39.626 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:35:39.629 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 7.815ms
2025-09-26 01:35:39.635 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-26 01:35:39.640 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:35:39.641 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-26 01:35:39.644 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-09-26 01:35:39.648 +05:30 [INF] 🔎 Fetching templates for BusinessId "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56"
2025-09-26 01:35:39.656 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 01:35:39.664 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 01:35:39.666 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 01:35:41.265 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:05:41.2618134+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:35:42.316 +05:30 [INF] Received HTTP response headers after 2648.5084ms - 200
2025-09-26 01:35:42.320 +05:30 [INF] End processing HTTP request after 2656.5414ms - 200
2025-09-26 01:35:42.618 +05:30 [INF] 📦 Meta Template API (Biz "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56") payload:
{"data":[{"name":"template_1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 1"},{"type":"BODY","text":"This is the Template : 1"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 2"},{"type":"QUICK_REPLY","text":"Show Me Template 3"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2381212765606675"},{"name":"single_variable_body","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\nWe are sedning {{1}} items.","example":{"body_text":[["five"]]}},{"type":"FOOTER","text":"Sent by xplorebyte"}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1209106791238164"},{"name":"variable_csv_demo","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Dear  {{1}},\n\nWe are happy to announce that we are going to launch our new product on {{2}}.\n\nRegards,\nLeadsCone","example":{"body_text":[["Nicolaus","Monaday"]]}}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1463763351520294"},{"name":"support_report_issue_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We're sorry to hear you're experiencing an issue.\n\nTo help us resolve it quickly, please tap the button below to connect with our technical support team. Please be ready to provide a brief description of the problem."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Connect to Technical Team"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"755167220845328"},{"name":"pdf_template","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"DOCUMENT","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534415257_508230149051927_6330429317144744326_n.pdf?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=b2YWNnPv7YoQ7kNvwGBOF9H&_nc_oc=AdnM42tWm_8qqw_k0xD7FhroXxYvcubATQXPHvhhIZLPw_Ca_0jiGdHeXUtBTpHKHS7PCjdC4iXn5IvJmc1Yrz_l&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=TgJbtbY7YTgX86kwOVfnug&oh=01_Q5Aa2gGCcH9bnfQEpitsvW-H8HbsDjMYD5YJfF0EkZfGVCo_-w&oe=68FD04F5"]}},{"type":"BODY","text":"Hello {{1}},\n\nPlease find your Invoice.","example":{"body_text":[["Usernmok"]]}},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Recieved"},{"type":"QUICK_REPLY","text":"No Received"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"508230145718594"},{"name":"welcome_video","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"VIDEO","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534417141_1284099973020036_5812680847202991712_n.mp4?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=zsyoQsHKvQoQ7kNvwHIJtvF&_nc_oc=AdlV0sbKmrKDFtfOqartFnb3DwICFJYiPMP2fzM_-1mz1pI4Ds5bRLhMXp-s4G1wiMKoGlAbweW1acnIp3V6u6FF&_nc_zt=28&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=TgJbtbY7YTgX86kwOVfnug&oh=01_Q5Aa2gFXLB3HiSFTG6LrmWP-tIcxzkUgzQWY4jQ1yWrrckUgFQ&oe=68FCFAC3"]}},{"type":"BODY","text":"Hello {{1}} \ud83d\udc4b\nAapka order successfully deliver ho chuka hai. \ud83d\ude9a\u2728\nKya aapne Nirvasa ka Vaji Amrit Vati lena start kar diya hai? \ud83d\udc8a\nNeeche diye gaye options me se select karke bataye \ud83d\udc47","example":{"body_text":[["Nicolus"]]}},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Yes"},{"type":"QUICK_REPLY","text":"No"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1284099969686703"},{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"},{"name":"template_3","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 3"},{"type":"BODY","text":"This is themplate : 3"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1760623375330098"},{"name":"template_2","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 2"},{"type":"BODY","text":"This is teh template 2"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1222093123248950"},{"name":"welcome_menu_minds","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello! Thank you for contacting MindsMiratus.\n\nIf you're a new visitor, we're happy to help you get started. If you're an existing customer, we're here to support you. Please choose from the options below."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Explore Our Services"},{"type":"QUICK_REPLY","text":"View Our Products"},{"type":"QUICK_REPLY","text":"Customer Support"},{"type":"QUICK_REPLY","text":"Contact Sales"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1115530356706526"},{"name":"contact_sales_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We'd love to discuss how we can help your business grow. You can reach our sales team via email at info\u0040mindsmiratus.com or call us at +91-321-123-4321.\n\nWould you like one of our experts to call you back?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Yes, call me back"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"954501560165102"},{"name":"human_takeover_confirmation_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Thank you! We've received your request. One of our experts will get in touch with you shortly.\n\nIs there anything else I can help you with in the meantime?"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1304432401406654"},{"name":"products_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We are proud to offer our powerful and easy-to-use GST Software, designed to simplify your tax compliance, invoicing, and financial management.\n\nWhat would you like to do?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a GST Demo"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2567632853585898"},{"name":"services_menu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We offer a wide range of services to power your business's growth. Please select a category you are interested in:"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Design Services"},{"type":"QUICK_REPLY","text":"Development Services"},{"type":"QUICK_REPLY","text":"Digital & Tele-Marketing"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"738253949023987"},{"name":"support_project_status_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"To check the status of your ongoing project, please provide your registered email address or project ID, and one of our project managers will get back to you with a detailed update shortly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Project Manager"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1599668577490835"},{"name":"support_main_menu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Welcome to the MindsMiratus Support Center. We're here to help you with any questions or issues you may have.\n\nPlease select an option so we can assist you faster."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"GST Software Support"},{"type":"QUICK_REPLY","text":"Check Project Status"},{"type":"QUICK_REPLY","text":"Report Technical Issues"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en","status":"APPROVED","category":"MARKETING","id":"679342281096115"},{"name":"demo","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Demo Template"},{"type":"BODY","text":"Demo Template Message."},{"type":"FOOTER","text":"sent by ExploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/visit"]},{"type":"URL","text":"Shop Now","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/shopnow"]},{"type":"PHONE_NUMBER","text":"Call Us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"757818770430461"},{"name":"dev_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our expert developers build robust and scalable solutions tailored to your business needs. Which area of development interests you?\n\n\ud83d\udcbb Web & Software Dev: Custom applications and software solutions.\n\ud83d\udcf1 Mobile App Dev: Engaging and high-performance apps for iOS and Android.\n\ud83d\uded2 E-commerce Dev: Powerful online stores that drive sales and growth."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Discuss a Project"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3118090155157247"},{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/tutrials"]},{"type":"URL","text":"View Demo","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"},{"name":"build_urltracking","parameter_format":"NAMED","components":[{"type":"BODY","text":"Hello \n\nThis is the test message to check wheather redirecting url is working or not."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/softwaredev"]},{"type":"URL","text":"Explore More","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/moreopt"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"788214393726841"},{"name":"marketing_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We help you reach your target audience and grow your brand effectively. Explore our marketing services:\n\n\ud83d\udcc8 Digital Marketing: SEO, Social Media Marketing, and targeted PPC campaigns.\n\ud83d\udcde Tele-Marketing: IVR systems, Bulk SMS, Voice Calls, and official WhatsApp API solutions."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Get a Marketing Plan"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1683803515627636"},{"name":"design_services_submenu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our creative team delivers stunning and effective designs to make your brand stand out. Which design service would you like to know more about?\n\n\ud83c\udfa8 Website Designing: We build beautiful, responsive, and user-friendly websites.\n\ud83d\udd8c\ufe0f Graphic Designing: We create compelling visuals, logos, and branding materials."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a Design Quote"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3291988187631744"},{"name":"support_gst_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"You've reached support for our GST Software. How can we help?\n\n\ud83d\udd27 Technical Help: For installation issues, errors, or bugs.\n\ud83d\udca1 Feature Questions: To understand how to use a specific feature.\n\ud83d\udcda View FAQs: Get answers to common questions instantly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Support Agent"},{"type":"QUICK_REPLY","text":"View FAQs"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1305308197880244"},{"name":"about_us_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"MindsMiratus is a leading IT solutions company dedicated to helping businesses grow through innovative and effective digital services. From design to development and marketing, we provide comprehensive solutions to elevate your brand.\n\nWhat would you like to do next?"},{"type":"FOOTER","text":"sent by Mindsmirtus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"},{"type":"QUICK_REPLY","text":"Talk to an Expert"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1971204310331370"},{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"\u26a1\ufe0f Feature Annoucement ! \u26a1\ufe0f\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/\u00257B\u00257BI\u00257D\u00257D{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"View Tutorials","url":"https:\/\/www.youtube.com\/\u00257B\u00257Bi\u00257D\u00257D{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"},{"name":"call_log","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is the checking for call log event."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/seeme"]},{"type":"URL","text":"Call Us","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/callme"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1286058192539680"},{"name":"track_url_after_flow_integ","message_send_ttl_seconds":86400,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BODY","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/vosiatstore"]},{"type":"URL","text":"Visit Demo","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/demo"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1084981273615848"},{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"watch Video","url":"https:\/\/www.youtube.com\/{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"},{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=eJAeQFq4sbYQ7kNvwFpXn8W&_nc_oc=AdlgBuy__gBLfPG4qOcNpzI6X3KF4Tb4oRFGDEgRhrr8VicCxdiD-S5h5XcqMdUYlP-IjhOpU7eelCekwHjyfMWO&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=TgJbtbY7YTgX86kwOVfnug&oh=01_Q5Aa2gEmiqbnDI-sFP_PltIbuE1RFJEt3J2fL2gxaAjNDLXprw&oe=68FD2B0F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! \ud83c\udf89\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15\u0025 discount** on your purchase. Don't just follow the trend\u2014set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https:\/\/xplorebytesolutions.com\/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"},{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https:\/\/www.qwexample.com\/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"}],"paging":{"cursors":{"before":"QVFIU2M5dHpzWnhDLXNkVGJPOUIyTjc4c0ZAhSHdVSmdxTGJJaXpkQVdTdFF1LWRtb1FKWE9pcVVNM1FzeXVSN0I3anpZAZAUJZAWkhMSU1JMDYwYktJeXRKZAUJn","after":"QVFIU1hSaTdZATm1tSjZAiNnlaQ1RubTFQZAjlKUUhnU1l2Y3hudWE0NXY0U3d0ZAE8wSV9NeWplbDlCS1FoRHBPN2NDOW1GZA3NLRHk4b3JBVU1TeklYd0JodU93"}}}
2025-09-26 01:35:42.630 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType155`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:35:42.634 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 2985.8281ms
2025-09-26 01:35:42.637 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-26 01:35:42.639 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 3004.2613ms
2025-09-26 01:35:51.281 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:05:51.2788036+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:35:55.656 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-26 01:35:55.668 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:35:55.670 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 204 null null 13.2373ms
2025-09-26 01:35:55.692 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - null null
2025-09-26 01:35:55.699 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:35:55.701 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-26 01:35:55.703 +05:30 [INF] Route matched with {action = "GetAllTemplates", controller = "WhatsAppTemplateFetcher"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTemplatesAsync() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController (xbytechat.api).
2025-09-26 01:35:55.708 +05:30 [INF] 🔎 Fetching templates for BusinessId "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56"
2025-09-26 01:35:55.713 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 01:35:55.722 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 01:35:55.724 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 01:35:56.854 +05:30 [INF] Received HTTP response headers after 1128.0486ms - 200
2025-09-26 01:35:56.857 +05:30 [INF] End processing HTTP request after 1135.1866ms - 200
2025-09-26 01:35:57.162 +05:30 [INF] 📦 Meta Template API (Biz "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56") payload:
{"data":[{"name":"template_1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 1"},{"type":"BODY","text":"This is the Template : 1"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 2"},{"type":"QUICK_REPLY","text":"Show Me Template 3"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2381212765606675"},{"name":"single_variable_body","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\nWe are sedning {{1}} items.","example":{"body_text":[["five"]]}},{"type":"FOOTER","text":"Sent by xplorebyte"}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1209106791238164"},{"name":"variable_csv_demo","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Dear  {{1}},\n\nWe are happy to announce that we are going to launch our new product on {{2}}.\n\nRegards,\nLeadsCone","example":{"body_text":[["Nicolaus","Monaday"]]}}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1463763351520294"},{"name":"support_report_issue_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We're sorry to hear you're experiencing an issue.\n\nTo help us resolve it quickly, please tap the button below to connect with our technical support team. Please be ready to provide a brief description of the problem."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Connect to Technical Team"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"755167220845328"},{"name":"pdf_template","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"DOCUMENT","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534415257_508230149051927_6330429317144744326_n.pdf?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=b2YWNnPv7YoQ7kNvwGBOF9H&_nc_oc=AdnM42tWm_8qqw_k0xD7FhroXxYvcubATQXPHvhhIZLPw_Ca_0jiGdHeXUtBTpHKHS7PCjdC4iXn5IvJmc1Yrz_l&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=o2rRKc8zaDz0G1sGsUNQ8Q&oh=01_Q5Aa2gFhBcJCRD9XjcaMFs3KwkAkf0IaszLZrnFCYP0XZ_BPcA&oe=68FD04F5"]}},{"type":"BODY","text":"Hello {{1}},\n\nPlease find your Invoice.","example":{"body_text":[["Usernmok"]]}},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Recieved"},{"type":"QUICK_REPLY","text":"No Received"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"508230145718594"},{"name":"welcome_video","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"VIDEO","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534417141_1284099973020036_5812680847202991712_n.mp4?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=zsyoQsHKvQoQ7kNvwHIJtvF&_nc_oc=AdlV0sbKmrKDFtfOqartFnb3DwICFJYiPMP2fzM_-1mz1pI4Ds5bRLhMXp-s4G1wiMKoGlAbweW1acnIp3V6u6FF&_nc_zt=28&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=o2rRKc8zaDz0G1sGsUNQ8Q&oh=01_Q5Aa2gF_VxRaqxTsmNaubdMPoclrQJSlVyMdIcohV5lMc3uPeA&oe=68FCFAC3"]}},{"type":"BODY","text":"Hello {{1}} \ud83d\udc4b\nAapka order successfully deliver ho chuka hai. \ud83d\ude9a\u2728\nKya aapne Nirvasa ka Vaji Amrit Vati lena start kar diya hai? \ud83d\udc8a\nNeeche diye gaye options me se select karke bataye \ud83d\udc47","example":{"body_text":[["Nicolus"]]}},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Yes"},{"type":"QUICK_REPLY","text":"No"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1284099969686703"},{"name":"hello_world","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Hello World"},{"type":"BODY","text":"Welcome and congratulations!! This message demonstrates your ability to send a WhatsApp message notification from the Cloud API, hosted by Meta. Thank you for taking the time to test with us."},{"type":"FOOTER","text":"WhatsApp Business Platform sample message"}],"language":"en_US","status":"APPROVED","category":"UTILITY","id":"617143187619824"},{"name":"template_3","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 3"},{"type":"BODY","text":"This is themplate : 3"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1760623375330098"},{"name":"template_2","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Template 2"},{"type":"BODY","text":"This is teh template 2"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Show Me Template 1"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1222093123248950"},{"name":"welcome_menu_minds","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello! Thank you for contacting MindsMiratus.\n\nIf you're a new visitor, we're happy to help you get started. If you're an existing customer, we're here to support you. Please choose from the options below."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Explore Our Services"},{"type":"QUICK_REPLY","text":"View Our Products"},{"type":"QUICK_REPLY","text":"Customer Support"},{"type":"QUICK_REPLY","text":"Contact Sales"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1115530356706526"},{"name":"contact_sales_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We'd love to discuss how we can help your business grow. You can reach our sales team via email at info\u0040mindsmiratus.com or call us at +91-321-123-4321.\n\nWould you like one of our experts to call you back?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Yes, call me back"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"954501560165102"},{"name":"human_takeover_confirmation_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Thank you! We've received your request. One of our experts will get in touch with you shortly.\n\nIs there anything else I can help you with in the meantime?"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1304432401406654"},{"name":"products_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We are proud to offer our powerful and easy-to-use GST Software, designed to simplify your tax compliance, invoicing, and financial management.\n\nWhat would you like to do?"},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a GST Demo"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"2567632853585898"},{"name":"services_menu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We offer a wide range of services to power your business's growth. Please select a category you are interested in:"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Design Services"},{"type":"QUICK_REPLY","text":"Development Services"},{"type":"QUICK_REPLY","text":"Digital & Tele-Marketing"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"738253949023987"},{"name":"support_project_status_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"To check the status of your ongoing project, please provide your registered email address or project ID, and one of our project managers will get back to you with a detailed update shortly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Project Manager"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1599668577490835"},{"name":"support_main_menu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Welcome to the MindsMiratus Support Center. We're here to help you with any questions or issues you may have.\n\nPlease select an option so we can assist you faster."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"GST Software Support"},{"type":"QUICK_REPLY","text":"Check Project Status"},{"type":"QUICK_REPLY","text":"Report Technical Issues"},{"type":"QUICK_REPLY","text":"Back to Main Menu"}]}],"language":"en","status":"APPROVED","category":"MARKETING","id":"679342281096115"},{"name":"demo","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Demo Template"},{"type":"BODY","text":"Demo Template Message."},{"type":"FOOTER","text":"sent by ExploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/visit"]},{"type":"URL","text":"Shop Now","url":"https:\/\/1c5e318901b7.ngrok-free.app\/r\/{{1}}","example":["https:\/\/1c5e318901b7.ngrok-free.app\/r\/shopnow"]},{"type":"PHONE_NUMBER","text":"Call Us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"757818770430461"},{"name":"dev_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our expert developers build robust and scalable solutions tailored to your business needs. Which area of development interests you?\n\n\ud83d\udcbb Web & Software Dev: Custom applications and software solutions.\n\ud83d\udcf1 Mobile App Dev: Engaging and high-performance apps for iOS and Android.\n\ud83d\uded2 E-commerce Dev: Powerful online stores that drive sales and growth."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Discuss a Project"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3118090155157247"},{"name":"url_tracking","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is used to check wheather url redirection is woking or not."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/tutrials"]},{"type":"URL","text":"View Demo","url":"https:\/\/077903ad22d3.ngrok-free.app\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/trackingurl"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1322949819198164"},{"name":"build_urltracking","parameter_format":"NAMED","components":[{"type":"BODY","text":"Hello \n\nThis is the test message to check wheather redirecting url is working or not."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop Now","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/softwaredev"]},{"type":"URL","text":"Explore More","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/moreopt"]},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"788214393726841"},{"name":"marketing_services_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"We help you reach your target audience and grow your brand effectively. Explore our marketing services:\n\n\ud83d\udcc8 Digital Marketing: SEO, Social Media Marketing, and targeted PPC campaigns.\n\ud83d\udcde Tele-Marketing: IVR systems, Bulk SMS, Voice Calls, and official WhatsApp API solutions."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Get a Marketing Plan"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1683803515627636"},{"name":"design_services_submenu_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Our creative team delivers stunning and effective designs to make your brand stand out. Which design service would you like to know more about?\n\n\ud83c\udfa8 Website Designing: We build beautiful, responsive, and user-friendly websites.\n\ud83d\udd8c\ufe0f Graphic Designing: We create compelling visuals, logos, and branding materials."},{"type":"FOOTER","text":"sent by Mindsmiratus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Request a Design Quote"},{"type":"QUICK_REPLY","text":"Back to Services Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3291988187631744"},{"name":"support_gst_submenu_v1","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"You've reached support for our GST Software. How can we help?\n\n\ud83d\udd27 Technical Help: For installation issues, errors, or bugs.\n\ud83d\udca1 Feature Questions: To understand how to use a specific feature.\n\ud83d\udcda View FAQs: Get answers to common questions instantly."},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Talk to a Support Agent"},{"type":"QUICK_REPLY","text":"View FAQs"},{"type":"QUICK_REPLY","text":"Back to Support Menu"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1305308197880244"},{"name":"about_us_info_v1","message_send_ttl_seconds":43200,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"MindsMiratus is a leading IT solutions company dedicated to helping businesses grow through innovative and effective digital services. From design to development and marketing, we provide comprehensive solutions to elevate your brand.\n\nWhat would you like to do next?"},{"type":"FOOTER","text":"sent by Mindsmirtus"},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Back to Main Menu"},{"type":"QUICK_REPLY","text":"Talk to an Expert"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1971204310331370"},{"name":"bot_launch","parameter_format":"NAMED","components":[{"type":"BODY","text":"\u26a1\ufe0f Feature Annoucement ! \u26a1\ufe0f\nHi,\nWe rre happy to tell you that our most awaited feature Bot Integartion is live now."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/\u00257B\u00257BI\u00257D\u00257D{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"View Tutorials","url":"https:\/\/www.youtube.com\/\u00257B\u00257Bi\u00257D\u00257D{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"3255438291278546"},{"name":"call_log","parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nThis is the checking for call log event."},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Explore","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/seeme"]},{"type":"URL","text":"Call Us","url":"https:\/\/077903ad22d3.ngrok-free.app\/r\/{{1}}","example":["https:\/\/077903ad22d3.ngrok-free.app\/r\/callme"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1286058192539680"},{"name":"track_url_after_flow_integ","message_send_ttl_seconds":86400,"parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BODY","text":"Tracking Test after FlowIntergartion in Journey"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/vosiatstore"]},{"type":"URL","text":"Visit Demo","url":"https:\/\/2a611865c2cd.ngrok-free.app\/r\/{{1}}","example":["https:\/\/2a611865c2cd.ngrok-free.app\/demo"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1084981273615848"},{"name":"offer_aiboat","message_send_ttl_seconds":604800,"parameter_format":"POSITIONAL","components":[{"type":"BODY","text":"Hello\n\nPlease check our newaly launched Ai Boat."},{"type":"FOOTER","text":"Team XploreByte"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Visit website","url":"https:\/\/www.mindsmiratus.com\/{{1}}","example":["https:\/\/www.mindsmiratus.com\/software-development"]},{"type":"URL","text":"watch Video","url":"https:\/\/www.youtube.com\/{{1}}","example":["https:\/\/www.youtube.com\/shorts\/tQF_xAb8Yfw"]}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"663456696777015"},{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https:\/\/scontent.whatsapp.net\/v\/t61.29466-34\/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=eJAeQFq4sbYQ7kNvwFpXn8W&_nc_oc=AdlgBuy__gBLfPG4qOcNpzI6X3KF4Tb4oRFGDEgRhrr8VicCxdiD-S5h5XcqMdUYlP-IjhOpU7eelCekwHjyfMWO&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=o2rRKc8zaDz0G1sGsUNQ8Q&oh=01_Q5Aa2gGziLG9ISpUDvtpiCR57ho17Ens6ssIMSHwUl-8PBErFg&oe=68FD2B0F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! \ud83c\udf89\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15\u0025 discount** on your purchase. Don't just follow the trend\u2014set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https:\/\/xplorebytesolutions.com\/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"},{"name":"account_creation_confirmation_3","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"TEXT","text":"Finalize account set-up"},{"type":"BODY","text":"Hi {{1}},\n\nYour new account has been created successfully. \n\nPlease verify {{2}} to complete your profile.","example":{"body_text":[["John","your email address"]]}},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Verify account","url":"https:\/\/www.qwexample.com\/"}]}],"language":"en_US","status":"APPROVED","category":"UTILITY","library_template_name":"account_creation_confirmation_3","id":"817241660991962"}],"paging":{"cursors":{"before":"QVFIU2M5dHpzWnhDLXNkVGJPOUIyTjc4c0ZAhSHdVSmdxTGJJaXpkQVdTdFF1LWRtb1FKWE9pcVVNM1FzeXVSN0I3anpZAZAUJZAWkhMSU1JMDYwYktJeXRKZAUJn","after":"QVFIU1hSaTdZATm1tSjZAiNnlaQ1RubTFQZAjlKUUhnU1l2Y3hudWE0NXY0U3d0ZAE8wSV9NeWplbDlCS1FoRHBPN2NDOW1GZA3NLRHk4b3JBVU1TeklYd0JodU93"}}}
2025-09-26 01:35:57.178 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType155`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[TemplateForUIResponseDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:35:57.182 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api) in 1474.9257ms
2025-09-26 01:35:57.185 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppTemplateFetcherController.GetAllTemplatesAsync (xbytechat.api)'
2025-09-26 01:35:57.187 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppTemplateFetcher/get-template-all - 200 null application/json; charset=utf-8 1495.0472ms
2025-09-26 01:36:01.295 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:06:01.2923605+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:36:11.303 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:06:11.3009707+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:36:21.313 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:06:21.3095089+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:36:31.327 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:06:31.3235318+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:36:41.340 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:06:41.3375039+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:36:42.807 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/save-visual - null null
2025-09-26 01:36:42.813 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:36:42.815 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/save-visual - 204 null null 7.9371ms
2025-09-26 01:36:42.821 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/cta-flow/save-visual - application/json 1344
2025-09-26 01:36:42.826 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:36:42.828 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.SaveVisualFlow (xbytechat.api)'
2025-09-26 01:36:42.830 +05:30 [INF] Route matched with {action = "SaveVisualFlow", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SaveVisualFlow(xbytechat.api.Features.CTAFlowBuilder.DTOs.SaveVisualFlowDto) on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-09-26 01:36:42.836 +05:30 [INF] 📦 Saving CTA Flow: VideoFlow by Test Company
2025-09-26 01:36:42.839 +05:30 [INF] 🧠 SaveVisualFlow started | FlowName: VideoFlow | BusinessId: "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56"
2025-09-26 01:36:42.847 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_FlowName_0='VideoFlow', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
FROM "CTAFlowConfigs" AS c
WHERE c."FlowName" = @__dto_FlowName_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 01:36:42.858 +05:30 [INF] ✅ New FlowConfig created with ID: "d89bd994-3e0f-45c1-a619-fd6024540b2c"
2025-09-26 01:36:42.866 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='d89bd994-3e0f-45c1-a619-fd6024540b2c', @p1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p2='2025-09-25T20:06:42.8570194Z' (DbType = DateTime), @p3='Test Company', @p4='VideoFlow' (Nullable = false), @p5='True', @p6='True', @p7='2025-09-25T20:06:42.8571646Z' (Nullable = true) (DbType = DateTime), @p8='0e8a1d87-25f8-4636-8292-b01357b885b6', @p9='d89bd994-3e0f-45c1-a619-fd6024540b2c', @p10='-64' (Nullable = true), @p11='288' (Nullable = true), @p12=NULL (DbType = Int32), @p13=NULL, @p14=NULL, @p15='0', @p16='welcome_video' (Nullable = false), @p17='text_template', @p18='Yes' (Nullable = false), @p19='cta' (Nullable = false), @p20='False', @p21='5c722a51-2e9b-4dd7-b420-966696e14e4f', @p22='d89bd994-3e0f-45c1-a619-fd6024540b2c', @p23='336' (Nullable = true), @p24='336' (Nullable = true), @p25='1' (Nullable = true), @p26=NULL, @p27=NULL, @p28='1', @p29='single_variable_body' (Nullable = false), @p30='text_template', @p31='No' (Nullable = false), @p32='quick_reply' (Nullable = false), @p33='True', @p34='7bfb9bc3-7ada-4d99-902a-2f8bf36752a3', @p35='0', @p36='quick_reply' (Nullable = false), @p37='Yes' (Nullable = false), @p38='QUICK_REPLY' (Nullable = false), @p39='' (Nullable = false), @p40='0e8a1d87-25f8-4636-8292-b01357b885b6', @p41='5c722a51-2e9b-4dd7-b420-966696e14e4f' (Nullable = true), @p42='c189230d-ba7c-4996-8f43-1fd6cf11da13', @p43='1', @p44='quick_reply' (Nullable = false), @p45='No' (Nullable = false), @p46='QUICK_REPLY' (Nullable = false), @p47='' (Nullable = false), @p48='0e8a1d87-25f8-4636-8292-b01357b885b6', @p49='5c722a51-2e9b-4dd7-b420-966696e14e4f' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CTAFlowConfigs" ("Id", "BusinessId", "CreatedAt", "CreatedBy", "FlowName", "IsActive", "IsPublished", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
INSERT INTO "CTAFlowSteps" ("Id", "CTAFlowConfigId", "PositionX", "PositionY", "ProfileNameSlot", "RequiredSource", "RequiredTag", "StepOrder", "TemplateToSend", "TemplateType", "TriggerButtonText", "TriggerButtonType", "UseProfileName")
VALUES (@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20);
INSERT INTO "CTAFlowSteps" ("Id", "CTAFlowConfigId", "PositionX", "PositionY", "ProfileNameSlot", "RequiredSource", "RequiredTag", "StepOrder", "TemplateToSend", "TemplateType", "TriggerButtonText", "TriggerButtonType", "UseProfileName")
VALUES (@p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33);
INSERT INTO "FlowButtonLinks" ("Id", "ButtonIndex", "ButtonSubType", "ButtonText", "ButtonType", "ButtonValue", "CTAFlowStepId", "NextStepId")
VALUES (@p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41);
INSERT INTO "FlowButtonLinks" ("Id", "ButtonIndex", "ButtonSubType", "ButtonText", "ButtonType", "ButtonValue", "CTAFlowStepId", "NextStepId")
VALUES (@p42, @p43, @p44, @p45, @p46, @p47, @p48, @p49);
2025-09-26 01:36:42.892 +05:30 [INF] ✅ Flow 'VideoFlow' saved | Steps: 2 | Links: 4
2025-09-26 01:36:42.895 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:36:42.898 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.SaveVisualFlow (xbytechat.api) in 63.4416ms
2025-09-26 01:36:42.901 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.SaveVisualFlow (xbytechat.api)'
2025-09-26 01:36:42.904 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/cta-flow/save-visual - 200 null application/json; charset=utf-8 83.1041ms
2025-09-26 01:36:48.979 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 01:36:48.984 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:36:48.986 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 204 null null 7.2969ms
2025-09-26 01:36:48.988 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 01:36:48.996 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - null null
2025-09-26 01:36:48.998 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:36:49.002 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:36:49.004 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 204 null null 15.775ms
2025-09-26 01:36:49.006 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 01:36:49.013 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - null null
2025-09-26 01:36:49.015 +05:30 [INF] Route matched with {action = "List", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.Guid, System.String, System.String, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 01:36:49.021 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:36:49.027 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 01:36:49.029 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__status_1='APPROVED'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Name", w."Language", w."Status", w."Category", w."PlaceholderCount", w."HasImageHeader", w."ButtonsJson"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Status" = @__status_1
ORDER BY w."Name"
2025-09-26 01:36:49.033 +05:30 [INF] Route matched with {action = "GetSenders", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSenders(System.Guid) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-09-26 01:36:49.039 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType155`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[<>f__AnonymousType241`7[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:36:49.048 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-09-26 01:36:49.049 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api) in 24.6598ms
2025-09-26 01:36:49.063 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.WhatsAppSettings.DTOs.WhatsAppSenderDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 01:36:49.066 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.List (xbytechat.api)'
2025-09-26 01:36:49.069 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api) in 26.7744ms
2025-09-26 01:36:49.072 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?status=APPROVED - 200 null application/json; charset=utf-8 76.4995ms
2025-09-26 01:36:49.075 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetSenders (xbytechat.api)'
2025-09-26 01:36:49.084 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/WhatsAppSettings/senders/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56 - 200 null application/json; charset=utf-8 71.3181ms
2025-09-26 01:36:51.359 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:06:51.3555706+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:37:01.367 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:07:01.3636157+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:37:03.887 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/variable_csv_demo - null null
2025-09-26 01:37:03.892 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:37:03.894 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/variable_csv_demo - 204 null null 7.0406ms
2025-09-26 01:37:03.901 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/variable_csv_demo - null null
2025-09-26 01:37:03.905 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:37:03.907 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-26 01:37:03.909 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 01:37:03.916 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__name_1='variable_csv_demo'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-09-26 01:37:03.926 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='variable_csv_demo', @__language_2='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Language" = @__language_2
ORDER BY w."Language" = @__language_2 DESC
LIMIT 1
2025-09-26 01:37:03.931 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType242`10[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:37:03.934 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 21.9895ms
2025-09-26 01:37:03.937 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-26 01:37:03.939 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/variable_csv_demo - 200 null application/json; charset=utf-8 38.0624ms
2025-09-26 01:37:08.329 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/welcome_video - null null
2025-09-26 01:37:08.333 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:37:08.335 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/welcome_video - 204 null null 6.7542ms
2025-09-26 01:37:08.356 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/welcome_video - null null
2025-09-26 01:37:08.362 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:37:08.364 +05:30 [INF] Executing endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-26 01:37:08.366 +05:30 [INF] Route matched with {action = "GetOne", controller = "Templates"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOne(System.Guid, System.String, System.String) on controller xbytechat.api.WhatsAppSettings.Controllers.TemplatesController (xbytechat.api).
2025-09-26 01:37:08.372 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__name_1='welcome_video'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Name" = @__name_1
LIMIT 1
2025-09-26 01:37:08.382 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='welcome_video', @__language_2='en_US'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Language" = @__language_2
ORDER BY w."Language" = @__language_2 DESC
LIMIT 1
2025-09-26 01:37:08.388 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType242`10[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:37:08.391 +05:30 [INF] Executed action xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api) in 22.5989ms
2025-09-26 01:37:08.394 +05:30 [INF] Executed endpoint 'xbytechat.api.WhatsAppSettings.Controllers.TemplatesController.GetOne (xbytechat.api)'
2025-09-26 01:37:08.396 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/templates/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56/welcome_video - 200 null application/json; charset=utf-8 39.771ms
2025-09-26 01:37:11.376 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:07:11.3727420+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:37:12.122 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/list/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?onlyPublished=true - null null
2025-09-26 01:37:12.130 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:37:12.132 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/list/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?onlyPublished=true - 204 null null 10.3698ms
2025-09-26 01:37:12.150 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/list/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?onlyPublished=true - null null
2025-09-26 01:37:12.156 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:37:12.158 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAvailableFlows (xbytechat.api)'
2025-09-26 01:37:12.161 +05:30 [INF] Route matched with {action = "GetAvailableFlows", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAvailableFlows(System.Guid, Boolean) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 01:37:12.169 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."FlowName", c."IsPublished"
FROM "CTAFlowConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive" AND c."IsPublished"
ORDER BY c."UpdatedAt" DESC
2025-09-26 01:37:12.179 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType53`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.FlowListItemDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:37:12.182 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAvailableFlows (xbytechat.api) in 17.4649ms
2025-09-26 01:37:12.188 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAvailableFlows (xbytechat.api)'
2025-09-26 01:37:12.191 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/list/6b5cea67-e8e9-42f7-8bde-51a9dbc02d56?onlyPublished=true - 200 null application/json; charset=utf-8 41.3335ms
2025-09-26 01:37:21.392 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:07:21.3887134+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:37:31.402 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:07:31.3991418+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:37:41.419 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T20:07:41.4157139+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:37:51.426 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:07:51.4229409+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:38:01.443 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:08:01.4400436+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:38:04.281 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - null null
2025-09-26 01:38:04.288 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:38:04.290 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/create-text-campaign - 204 null null 8.8383ms
2025-09-26 01:38:04.295 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - application/json 873
2025-09-26 01:38:04.301 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:38:04.303 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-26 01:38:04.305 +05:30 [INF] Route matched with {action = "CreateTextCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateTextCampaign(xbytechat.api.Features.CampaignModule.DTOs.CampaignCreateDto) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 01:38:04.313 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__phoneNumberId_1='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."PhoneNumberId" = @__phoneNumberId_1 AND w."IsActive"
LIMIT 1
2025-09-26 01:38:04.324 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__incomingFlowId_Value_0='d89bd994-3e0f-45c1-a619-fd6024540b2c', @__8__locals1_businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", t0."Id", t0."CTAFlowConfigId", t0."PositionX", t0."PositionY", t0."ProfileNameSlot", t0."RequiredSource", t0."RequiredTag", t0."StepOrder", t0."TemplateToSend", t0."TemplateType", t0."TriggerButtonText", t0."TriggerButtonType", t0."UseProfileName", t0."Id0", t0."ButtonIndex", t0."ButtonSubType", t0."ButtonText", t0."ButtonType", t0."ButtonValue", t0."CTAFlowStepId", t0."NextStepId"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."Id" = @__incomingFlowId_Value_0 AND c."BusinessId" = @__8__locals1_businessId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."CTAFlowConfigId", c0."PositionX", c0."PositionY", c0."ProfileNameSlot", c0."RequiredSource", c0."RequiredTag", c0."StepOrder", c0."TemplateToSend", c0."TemplateType", c0."TriggerButtonText", c0."TriggerButtonType", c0."UseProfileName", f."Id" AS "Id0", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
    FROM "CTAFlowSteps" AS c0
    LEFT JOIN "FlowButtonLinks" AS f ON c0."Id" = f."CTAFlowStepId"
) AS t0 ON t."Id" = t0."CTAFlowConfigId"
ORDER BY t."Id", t0."Id"
2025-09-26 01:38:04.332 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 01:38:04.338 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:38:04.340 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:38:07.411 +05:30 [INF] Received HTTP response headers after 3068.8513ms - 200
2025-09-26 01:38:07.415 +05:30 [INF] End processing HTTP request after 3077.6463ms - 200
2025-09-26 01:38:07.622 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='welcome_video', @__provider_2='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 01:38:07.633 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='3e3c49b8-7dec-4604-812f-c910590113b2', @p1=NULL (DbType = Guid), @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3='d89bd994-3e0f-45c1-a619-fd6024540b2c' (Nullable = true), @p4=NULL (DbType = Guid), @p5='video', @p6='2025-09-25T20:08:07.6193030Z' (DbType = DateTime), @p7='system', @p8=NULL (DbType = Guid), @p9=NULL (DbType = DateTime), @p10=NULL, @p11=NULL, @p12=NULL, @p13=NULL, @p14=NULL, @p15='False', @p16='Hello {{1}} 👋
Aapka order successfully deliver ho chuka hai. 🚚✨
Kya aapne Nirvasa ka Vaji Amrit Vati lena start kar diya hai? 💊
Neeche diye gaye options me se select karke bataye 👇', @p17='Hello {{1}} 👋
Aapka order successfully deliver ho chuka hai. 🚚✨
Kya aapne Nirvasa ka Vaji Amrit Vati lena start kar diya hai? 💊
Neeche diye gaye options me se select karke bataye 👇' (Nullable = false), @p18='videoFlowCam' (Nullable = false), @p19='673199269218077', @p20='META_CLOUD', @p21=NULL (DbType = DateTime), @p22=NULL (DbType = Guid), @p23='Draft' (Nullable = false), @p24='welcome_video', @p25='[]', @p26='{"Provider":"meta_cloud","TemplateId":"1284099969686703","TemplateName":"welcome_video","Language":"en_US","HasHeaderMedia":true,"HeaderType":"VIDEO","BodyPlaceholders":[{"Index":1,"Label":null,"Example":null}],"Buttons":[{"Type":"QUICK_REPLY","Text":"Yes","Value":"","Order":0},{"Type":"QUICK_REPLY","Text":"No","Value":"","Order":1}]}' (DbType = Object), @p27='2025-09-25T20:08:07.6193031Z' (DbType = DateTime), @p28='https://whatsappdata.s3.ap-south-1.amazonaws.com/userMedia/dab49080d80c724aad5ebf158d63df41/vde_templ.mp4', @p29='e74137c1-ad10-47bd-a66b-375752d1b56d', @p30='3e3c49b8-7dec-4604-812f-c910590113b2', @p31='True', @p32='1', @p33='Yes' (Nullable = false), @p34='QUICK_REPLY' (Nullable = false), @p35='' (Nullable = false), @p36='f8871f79-78cd-46e3-a5e9-2a23f2eefe9c', @p37='3e3c49b8-7dec-4604-812f-c910590113b2', @p38='True', @p39='2', @p40='No' (Nullable = false), @p41='QUICK_REPLY' (Nullable = false), @p42='' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Campaigns" ("Id", "AudienceId", "BusinessId", "CTAFlowConfigId", "CampaignId", "CampaignType", "CreatedAt", "CreatedBy", "CtaId", "DeletedAt", "DeletedBy", "DocumentUrl", "FollowUpTemplateId", "ImageCaption", "ImageUrl", "IsDeleted", "MessageBody", "MessageTemplate", "Name", "PhoneNumberId", "Provider", "ScheduledAt", "SourceCampaignId", "Status", "TemplateId", "TemplateParameters", "TemplateSchemaSnapshot", "UpdatedAt", "VideoUrl")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p29, @p30, @p31, @p32, @p33, @p34, @p35);
INSERT INTO "CampaignButtons" ("Id", "CampaignId", "IsFromTemplate", "Position", "Title", "Type", "Value")
VALUES (@p36, @p37, @p38, @p39, @p40, @p41, @p42);
2025-09-26 01:38:07.658 +05:30 [INF] ✅ Campaign 'videoFlowCam' created | Type:video | Header:video | FlowId:"d89bd994-3e0f-45c1-a619-fd6024540b2c" | EntryTemplate:welcome_video | Sender:META_CLOUD/673199269218077 | Recipients:0
2025-09-26 01:38:07.664 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType64`3[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:38:07.666 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api) in 3358.2188ms
2025-09-26 01:38:07.670 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.CreateTextCampaign (xbytechat.api)'
2025-09-26 01:38:07.672 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/create-text-campaign - 200 null application/json; charset=utf-8 3376.6715ms
2025-09-26 01:38:07.731 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-26 01:38:07.740 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-26 01:38:07.740 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/3e3c49b8-7dec-4604-812f-c910590113b2 - null null
2025-09-26 01:38:07.740 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - null null
2025-09-26 01:38:07.734 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/3e3c49b8-7dec-4604-812f-c910590113b2/csv-sample/schema - null null
2025-09-26 01:38:07.754 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:38:07.758 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:38:07.763 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:38:07.784 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 204 null null 43.8651ms
2025-09-26 01:38:07.787 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/3e3c49b8-7dec-4604-812f-c910590113b2 - 204 null null 47.3864ms
2025-09-26 01:38:07.768 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:38:07.773 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:38:07.775 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 44.0729ms
2025-09-26 01:38:07.802 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - null null
2025-09-26 01:38:07.808 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/3e3c49b8-7dec-4604-812f-c910590113b2 - null null
2025-09-26 01:38:07.809 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/tags/get-tags - 204 null null 68.8921ms
2025-09-26 01:38:07.811 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/3e3c49b8-7dec-4604-812f-c910590113b2/csv-sample/schema - 204 null null 77.2582ms
2025-09-26 01:38:07.819 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-26 01:38:07.824 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:38:07.830 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:38:07.845 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/3e3c49b8-7dec-4604-812f-c910590113b2/csv-sample/schema - null null
2025-09-26 01:38:07.850 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:38:07.851 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-26 01:38:07.853 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-26 01:38:07.857 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:38:07.859 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 01:38:07.862 +05:30 [INF] Route matched with {action = "GetAllContacts", controller = "Contacts"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllContacts(System.String, Int32, Int32) on controller xbytechat.api.CRM.Controllers.ContactsController (xbytechat.api).
2025-09-26 01:38:07.863 +05:30 [INF] Route matched with {action = "GetCampaignById", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignDto]] GetCampaignById(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 01:38:07.865 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 01:38:07.871 +05:30 [INF] GetPagedContactsAsync: businessId="6b5cea67-e8e9-42f7-8bde-51a9dbc02d56", tab=all, page=1, pageSize=1000
2025-09-26 01:38:07.880 +05:30 [INF] Route matched with {action = "GetSchema", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSchema(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 01:38:07.867 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-26 01:38:07.883 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__campaignId_0='3e3c49b8-7dec-4604-812f-c910590113b2', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AudienceId", t."BusinessId", t."CTAFlowConfigId", t."CampaignId", t."CampaignType", t."CreatedAt", t."CreatedBy", t."CtaId", t."DeletedAt", t."DeletedBy", t."DocumentUrl", t."FollowUpTemplateId", t."ImageCaption", t."ImageUrl", t."IsDeleted", t."MessageBody", t."MessageTemplate", t."Name", t."PhoneNumberId", t."Provider", t."ScheduledAt", t."SourceCampaignId", t."Status", t."TemplateId", t."TemplateParameters", t."TemplateSchemaSnapshot", t."UpdatedAt", t."VideoUrl", t."Id0", t."BusinessId0", t."ButtonText", t."ButtonType", t."CreatedAt0", t."Description", t."IsActive", t."TargetUrl", t."Title", t."UpdatedAt0", t."Id1", c2."Id", c2."CampaignId", c2."IsFromTemplate", c2."Position", c2."Title", c2."Type", c2."Value", t."BusinessId1", t."CreatedAt1", t."CreatedBy0", t."FlowName", t."IsActive0", t."IsPublished", t."UpdatedAt1"
FROM (
    SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl", c0."Id" AS "Id0", c0."BusinessId" AS "BusinessId0", c0."ButtonText", c0."ButtonType", c0."CreatedAt" AS "CreatedAt0", c0."Description", c0."IsActive", c0."TargetUrl", c0."Title", c0."UpdatedAt" AS "UpdatedAt0", c1."Id" AS "Id1", c1."BusinessId" AS "BusinessId1", c1."CreatedAt" AS "CreatedAt1", c1."CreatedBy" AS "CreatedBy0", c1."FlowName", c1."IsActive" AS "IsActive0", c1."IsPublished", c1."UpdatedAt" AS "UpdatedAt1"
    FROM "Campaigns" AS c
    LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
    LEFT JOIN "CTAFlowConfigs" AS c1 ON c."CTAFlowConfigId" = c1."Id"
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
    LIMIT 1
) AS t
LEFT JOIN "CampaignButtons" AS c2 ON t."Id" = c2."CampaignId"
ORDER BY t."Id", t."Id0", t."Id1"
2025-09-26 01:38:07.928 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignDto'.
2025-09-26 01:38:07.931 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api) in 56.559ms
2025-09-26 01:38:07.934 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetCampaignById (xbytechat.api)'
2025-09-26 01:38:07.937 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/3e3c49b8-7dec-4604-812f-c910590113b2 - 200 null application/json; charset=utf-8 128.8908ms
2025-09-26 01:38:08.034 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-09-26 01:38:08.044 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__p_2='100', @__p_1='0'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."AssignedAgentId", t."BusinessId", t."CreatedAt", t."Email", t."Group", t."IsActive", t."IsArchived", t."IsAutomationPaused", t."IsFavorite", t."LastCTAInteraction", t."LastCTAType", t."LastClickedProductId", t."LastContactedAt", t."LeadSource", t."Name", t."NextFollowUpAt", t."Notes", t."PhoneNumber", t."ProfileName", t."ProfileNameUpdatedAt", t."Tags", t0."Id", t0."AssignedAt", t0."AssignedBy", t0."BusinessId", t0."ContactId", t0."TagId", t0."Id0", t0."BusinessId0", t0."Category", t0."ColorHex", t0."CreatedAt", t0."IsActive", t0."IsSystemTag", t0."LastUsedAt", t0."Name", t0."Notes"
FROM (
    SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
    FROM "Contacts" AS c
    WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
    ORDER BY c."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."AssignedAt", c0."AssignedBy", c0."BusinessId", c0."ContactId", c0."TagId", t1."Id" AS "Id0", t1."BusinessId" AS "BusinessId0", t1."Category", t1."ColorHex", t1."CreatedAt", t1."IsActive", t1."IsSystemTag", t1."LastUsedAt", t1."Name", t1."Notes"
    FROM "ContactTags" AS c0
    INNER JOIN "Tags" AS t1 ON c0."TagId" = t1."Id"
) AS t0 ON t."Id" = t0."ContactId"
ORDER BY t."Name", t."Id", t0."Id"
2025-09-26 01:38:08.050 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 01:38:08.055 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api) in 184.0184ms
2025-09-26 01:38:08.062 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.ContactsController.GetAllContacts (xbytechat.api)'
2025-09-26 01:38:08.065 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/contacts?tab=all&page=1&pageSize=1000 - 200 null application/json; charset=utf-8 262.6046ms
2025-09-26 01:38:08.092 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='3e3c49b8-7dec-4604-812f-c910590113b2', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 01:38:08.102 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='welcome_video', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 01:38:08.110 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='welcome_video'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 01:38:08.115 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType66`3[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType67`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 01:38:08.118 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api) in 223.3452ms
2025-09-26 01:38:08.120 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/3e3c49b8-7dec-4604-812f-c910590113b2/csv-sample/schema - null null
2025-09-26 01:38:08.121 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 01:38:08.128 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:38:08.130 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/3e3c49b8-7dec-4604-812f-c910590113b2/csv-sample/schema - 200 null application/json; charset=utf-8 285.1936ms
2025-09-26 01:38:08.134 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 01:38:08.135 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-26 01:38:08.142 +05:30 [INF] Route matched with {action = "GetSchema", controller = "CampaignCsvSample"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSchema(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController (xbytechat.api).
2025-09-26 01:38:08.147 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 01:38:08.155 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='3e3c49b8-7dec-4604-812f-c910590113b2', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateId", c."MessageTemplate", c."Provider"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1 AND NOT (c."IsDeleted")
LIMIT 1
2025-09-26 01:38:08.158 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - null null
2025-09-26 01:38:08.156 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 246.9323ms
2025-09-26 01:38:08.167 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='welcome_video', @__provider_2='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1 AND w."Provider" = @__provider_2
ORDER BY (SELECT 1) DESC
LIMIT 1
2025-09-26 01:38:08.171 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:38:08.173 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 01:38:08.182 +05:30 [INF] Executing endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 01:38:08.183 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='welcome_video'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 01:38:08.184 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 365.8369ms
2025-09-26 01:38:08.186 +05:30 [INF] Route matched with {action = "GetAllTags", controller = "Tags"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllTags() on controller xbytechat.api.CRM.Controllers.TagsController (xbytechat.api).
2025-09-26 01:38:08.191 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType66`3[[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType67`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 01:38:08.206 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", t."ColorHex", t."Category", t."Notes", t."IsSystemTag", t."IsActive", t."CreatedAt", t."LastUsedAt"
FROM "Tags" AS t
WHERE t."BusinessId" = @__businessId_0 AND t."IsActive"
ORDER BY t."CreatedAt" DESC
2025-09-26 01:38:08.207 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api) in 56.1021ms
2025-09-26 01:38:08.214 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 01:38:08.216 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignCsvSampleController.GetSchema (xbytechat.api)'
2025-09-26 01:38:08.219 +05:30 [INF] Executed action xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api) in 16.9419ms
2025-09-26 01:38:08.221 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/3e3c49b8-7dec-4604-812f-c910590113b2/csv-sample/schema - 200 null application/json; charset=utf-8 101.1378ms
2025-09-26 01:38:08.224 +05:30 [INF] Executed endpoint 'xbytechat.api.CRM.Controllers.TagsController.GetAllTags (xbytechat.api)'
2025-09-26 01:38:08.233 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/tags/get-tags - 200 null application/json; charset=utf-8 74.7871ms
2025-09-26 01:38:11.455 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__now_0='2025-09-25T20:08:11.4507423+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:38:13.471 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 389
2025-09-26 01:38:13.477 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:38:13.479 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:38:13.483 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ5Mzg5MkY1RUMwMTkwRTJEAA==","status":"read","timestamp":"1758267040","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-09-26 01:38:13.486 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:38:13.486 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ5Mzg5MkY1RUMwMTkwRTJEAA==","status":"read","timestamp":"1758267040","recipient_id":"918974005240"}]},"field":"messages"}]}]}
2025-09-26 01:38:13.488 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:38:13.494 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 11.2252ms
2025-09-26 01:38:13.495 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-26 01:38:13.496 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:38:13.503 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-09-26 01:38:13.505 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 33.5895ms
2025-09-26 01:38:13.511 +05:30 [WRN] ProviderDirectory: No match for provider=meta, pnid=673199269218077, disp=15551622077, waba=null
2025-09-26 01:38:13.520 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:38:13.528 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ5Mzg5MkY1RUMwMTkwRTJEAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:38:13.532 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ5Mzg5MkY1RUMwMTkwRTJEAA==
2025-09-26 01:38:13.538 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ5Mzg5MkY1RUMwMTkwRTJEAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:38:13.542 +05:30 [INF] ⓘ No matching CampaignSendLog/MessageLog for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ5Mzg5MkY1RUMwMTkwRTJEAA== (legacy)
2025-09-26 01:38:17.022 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch - null null
2025-09-26 01:38:17.028 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:38:17.030 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch - 204 null null 8.6745ms
2025-09-26 01:38:17.042 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/csv/batch - multipart/form-data; boundary=----WebKitFormBoundaryAZdqxxsBUAPDDwlv 239
2025-09-26 01:38:17.048 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:38:17.050 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api)'
2025-09-26 01:38:17.053 +05:30 [INF] Route matched with {action = "Upload", controller = "CsvBatch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Upload(xbytechat.api.Features.CampaignModule.DTOs.Requests.CsvBatchUploadForm, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController (xbytechat.api).
2025-09-26 01:38:17.082 +05:30 [INF] Executed DbCommand (22ms) [Parameters=[@p0='c47d3c8f-1850-4635-a25d-9a54f88efc8b', @p1=NULL (DbType = Guid), @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3=NULL, @p4='2025-09-25T20:08:17.0590058Z' (DbType = DateTime), @p5=NULL (DbType = Guid), @p6=NULL, @p7='csv_two_parameter.csv', @p8=NULL (DbType = Object), @p9='0', @p10='0', @p11='ingesting' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CsvBatches" ("Id", "AudienceId", "BusinessId", "Checksum", "CreatedAt", "CreatedByUserId", "ErrorMessage", "FileName", "HeadersJson", "RowCount", "SkippedCount", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-09-26 01:38:17.090 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='c47d3c8f-1850-4635-a25d-9a54f88efc8b', @p0='["phone","parameter1"]' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CsvBatches" SET "HeadersJson" = @p0
WHERE "Id" = @p1;
2025-09-26 01:38:17.102 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='f4600f12-a9f3-40ea-a229-e452a96332ac', @p1='c47d3c8f-1850-4635-a25d-9a54f88efc8b', @p2='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p3='2025-09-25T20:08:17.0968992Z' (DbType = DateTime), @p4=NULL, @p5=NULL, @p6='0', @p7='{"phone":"89740 05240","parameter1":"Robert Nicosta"}' (Nullable = false) (DbType = Object), @p8=NULL], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CsvRows" ("Id", "BatchId", "BusinessId", "CreatedAt", "PhoneE164", "PhoneRaw", "RowIndex", "RowJson", "ValidationError")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-09-26 01:38:17.111 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p2='c47d3c8f-1850-4635-a25d-9a54f88efc8b', @p0='1', @p1='ready' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CsvBatches" SET "RowCount" = @p0, "Status" = @p1
WHERE "Id" = @p2;
2025-09-26 01:38:17.115 +05:30 [INF] CsvBatch "c47d3c8f-1850-4635-a25d-9a54f88efc8b" ingested: 1 rows; headers=2
2025-09-26 01:38:17.117 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType70`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.CampaignModule.DTOs.CsvBatchUploadResultDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 01:38:17.120 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api) in 62.6934ms
2025-09-26 01:38:17.123 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Upload (xbytechat.api)'
2025-09-26 01:38:17.125 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/csv/batch - 200 null application/json; charset=utf-8 83.6307ms
2025-09-26 01:38:17.137 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch/c47d3c8f-1850-4635-a25d-9a54f88efc8b/sample?take=10 - null null
2025-09-26 01:38:17.143 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:38:17.145 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/csv/batch/c47d3c8f-1850-4635-a25d-9a54f88efc8b/sample?take=10 - 204 null null 7.528ms
2025-09-26 01:38:17.157 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/csv/batch/c47d3c8f-1850-4635-a25d-9a54f88efc8b/sample?take=10 - null null
2025-09-26 01:38:17.163 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:38:17.166 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api)'
2025-09-26 01:38:17.168 +05:30 [INF] Route matched with {action = "Sample", controller = "CsvBatch"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Sample(System.Guid, Int32, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController (xbytechat.api).
2025-09-26 01:38:17.188 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__batchId_0='c47d3c8f-1850-4635-a25d-9a54f88efc8b', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."HeadersJson", c."RowCount"
FROM "CsvBatches" AS c
WHERE c."Id" = @__batchId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 01:38:17.197 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__batchId_1='c47d3c8f-1850-4635-a25d-9a54f88efc8b', @__p_2='10'], CommandType='"Text"', CommandTimeout='30']
SELECT c."RowIndex", c."Id", c."BatchId", c."BusinessId", c."CreatedAt", c."PhoneE164", c."PhoneRaw", c."RowJson", c."ValidationError"
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__batchId_1
ORDER BY c."RowIndex"
LIMIT @__p_2
2025-09-26 01:38:17.203 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType70`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IReadOnlyList`1[[xbytechat.api.Features.CampaignModule.DTOs.CsvRowSampleDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:38:17.207 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api) in 27.3474ms
2025-09-26 01:38:17.209 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CsvBatchController.Sample (xbytechat.api)'
2025-09-26 01:38:17.212 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/csv/batch/c47d3c8f-1850-4635-a25d-9a54f88efc8b/sample?take=10 - 200 null application/json; charset=utf-8 54.4636ms
2025-09-26 01:38:17.219 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/3e3c49b8-7dec-4604-812f-c910590113b2/mappings/suggest?batchId=c47d3c8f-1850-4635-a25d-9a54f88efc8b - null null
2025-09-26 01:38:17.224 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:38:17.245 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/3e3c49b8-7dec-4604-812f-c910590113b2/mappings/suggest?batchId=c47d3c8f-1850-4635-a25d-9a54f88efc8b - 204 null null 25.6455ms
2025-09-26 01:38:17.251 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaigns/3e3c49b8-7dec-4604-812f-c910590113b2/mappings/suggest?batchId=c47d3c8f-1850-4635-a25d-9a54f88efc8b - null null
2025-09-26 01:38:17.257 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:38:17.259 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api)'
2025-09-26 01:38:17.261 +05:30 [INF] Route matched with {action = "Suggest", controller = "CampaignMappings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestAsync(System.Guid, System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController (xbytechat.api).
2025-09-26 01:38:17.269 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='3e3c49b8-7dec-4604-812f-c910590113b2', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."TemplateParameters"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 01:38:17.279 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__batchId_0='c47d3c8f-1850-4635-a25d-9a54f88efc8b', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."HeadersJson"
FROM "CsvBatches" AS c
WHERE c."Id" = @__batchId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 01:38:17.284 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.Dictionary`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:38:17.286 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api) in 22.0741ms
2025-09-26 01:38:17.289 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SuggestAsync (xbytechat.api)'
2025-09-26 01:38:17.292 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaigns/3e3c49b8-7dec-4604-812f-c910590113b2/mappings/suggest?batchId=c47d3c8f-1850-4635-a25d-9a54f88efc8b - 200 null application/json; charset=utf-8 40.2667ms
2025-09-26 01:38:19.342 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/3e3c49b8-7dec-4604-812f-c910590113b2/mappings - null null
2025-09-26 01:38:19.347 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:38:19.349 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/3e3c49b8-7dec-4604-812f-c910590113b2/mappings - 204 null null 7.2295ms
2025-09-26 01:38:19.357 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaigns/3e3c49b8-7dec-4604-812f-c910590113b2/mappings - application/json 27
2025-09-26 01:38:19.362 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:38:19.364 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api)'
2025-09-26 01:38:19.367 +05:30 [INF] Route matched with {action = "Save", controller = "CampaignMappings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SaveAsync(System.Guid, System.Collections.Generic.Dictionary`2[System.String,System.String], System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController (xbytechat.api).
2025-09-26 01:38:19.372 +05:30 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-09-26 01:38:19.374 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api) in 2.4317ms
2025-09-26 01:38:19.376 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMappingsController.SaveAsync (xbytechat.api)'
2025-09-26 01:38:19.379 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaigns/3e3c49b8-7dec-4604-812f-c910590113b2/mappings - 204 null null 21.4348ms
2025-09-26 01:38:19.396 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/3e3c49b8-7dec-4604-812f-c910590113b2/materialize - null null
2025-09-26 01:38:19.402 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:38:19.404 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaigns/3e3c49b8-7dec-4604-812f-c910590113b2/materialize - 204 null null 7.6619ms
2025-09-26 01:38:19.411 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaigns/3e3c49b8-7dec-4604-812f-c910590113b2/materialize - application/json 207
2025-09-26 01:38:19.415 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:38:19.416 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api)'
2025-09-26 01:38:19.419 +05:30 [INF] Route matched with {action = "CsvCreate", controller = "CampaignMaterialize"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeResponseDto]] CsvCreate(System.Guid, xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeRequestDto, System.Threading.CancellationToken) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController (xbytechat.api).
2025-09-26 01:38:19.423 +05:30 [INF] 📦 Materialize request: campaign="3e3c49b8-7dec-4604-812f-c910590113b2" persist=true batch="c47d3c8f-1850-4635-a25d-9a54f88efc8b" audience='Audience 2025-09-26'
2025-09-26 01:38:19.430 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='3e3c49b8-7dec-4604-812f-c910590113b2', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1)
2025-09-26 01:38:19.440 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__request_CsvBatchId_1='c47d3c8f-1850-4635-a25d-9a54f88efc8b'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__request_CsvBatchId_1
2025-09-26 01:38:19.447 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__request_CsvBatchId_1='c47d3c8f-1850-4635-a25d-9a54f88efc8b', @__p_2='200'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BatchId", c."BusinessId", c."CreatedAt", c."PhoneE164", c."PhoneRaw", c."RowIndex", c."RowJson", c."ValidationError"
FROM "CsvRows" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."BatchId" = @__request_CsvBatchId_1
ORDER BY c."RowIndex"
LIMIT @__p_2
2025-09-26 01:38:19.455 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignId_0='3e3c49b8-7dec-4604-812f-c910590113b2', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."MessageTemplate", c."TemplateId"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 01:38:19.463 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__templateName_1='welcome_video'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."Name" = @__templateName_1
ORDER BY CASE
    WHEN w."UpdatedAt" > w."CreatedAt" THEN w."UpdatedAt"
    ELSE w."CreatedAt"
END DESC
LIMIT 1
2025-09-26 01:38:19.471 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__r_Phone_1='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__8__locals1_businessId_0 AND c."PhoneNumber" = @__r_Phone_1
LIMIT 1
2025-09-26 01:38:19.485 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p0='5055b67f-4a32-41cb-a4c9-a79c1ad11e53', @p1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p2=NULL (DbType = Guid), @p3='2025-09-25T20:08:19.4687941Z' (DbType = DateTime), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6=NULL, @p7='False', @p8='Audience 2025-09-26' (Nullable = false), @p9='2025-09-25T20:08:19.4687941Z' (Nullable = true) (DbType = DateTime), @p10='1123d347-b5a9-4af9-a9b3-a1acad67ece9', @p11='{"parameter1":"Robert Nicosta"}' (DbType = Object), @p12='5055b67f-4a32-41cb-a4c9-a79c1ad11e53', @p13='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p14='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p15='2025-09-25T20:08:19.4687941Z' (DbType = DateTime), @p16=NULL (DbType = Guid), @p17=NULL, @p18='False', @p19='False', @p20=NULL, @p21='918974005240', @p22=NULL, @p23=NULL (DbType = DateTime), @p24='2025-09-25T20:08:19.4687941Z' (Nullable = true) (DbType = DateTime), @p25='b5e5af12-ad03-495f-8450-c9706ef1e116', @p26='1123d347-b5a9-4af9-a9b3-a1acad67ece9' (Nullable = true), @p27=NULL, @p28='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p29='3e3c49b8-7dec-4604-812f-c910590113b2', @p30=NULL, @p31=NULL, @p32='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p33='5FF1B1A492891C60FFA9B0D7DCD101C617875C2EAC733801927F0DBDC849094D', @p34='False', @p35='2025-09-25T20:08:19.4687941Z' (Nullable = true) (DbType = DateTime), @p36=NULL, @p37=NULL, @p38='{}' (DbType = Object), @p39='["Robert Nicosta"]' (DbType = Object), @p40=NULL (DbType = DateTime), @p41='Pending' (Nullable = false), @p42='2025-09-25T20:08:19.4687941Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Audiences" ("Id", "BusinessId", "CampaignId", "CreatedAt", "CreatedByUserId", "CsvBatchId", "Description", "IsDeleted", "Name", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
INSERT INTO "AudienceMembers" ("Id", "AttributesJson", "AudienceId", "BusinessId", "ContactId", "CreatedAt", "CreatedByUserId", "Email", "IsDeleted", "IsTransientContact", "Name", "PhoneE164", "PhoneRaw", "PromotedAt", "UpdatedAt")
VALUES (@p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24);
INSERT INTO "CampaignRecipients" ("Id", "AudienceMemberId", "BotId", "BusinessId", "CampaignId", "CategoryBrowsed", "ClickedCTA", "ContactId", "IdempotencyKey", "IsAutoTagged", "MaterializedAt", "MessagePreview", "ProductBrowsed", "ResolvedButtonUrlsJson", "ResolvedParametersJson", "SentAt", "Status", "UpdatedAt")
VALUES (@p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42);
2025-09-26 01:38:19.512 +05:30 [INF] 📦 Materialize result: campaign="3e3c49b8-7dec-4604-812f-c910590113b2" materialized=1 skipped=0 audienceId="5055b67f-4a32-41cb-a4c9-a79c1ad11e53"
2025-09-26 01:38:19.516 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.CampaignModule.DTOs.CampaignCsvMaterializeResponseDto'.
2025-09-26 01:38:19.519 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api) in 96.4587ms
2025-09-26 01:38:19.522 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignMaterializeController.CsvCreate (xbytechat.api)'
2025-09-26 01:38:19.524 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaigns/3e3c49b8-7dec-4604-812f-c910590113b2/materialize - 200 null application/json; charset=utf-8 113.3876ms
2025-09-26 01:38:21.472 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T20:08:21.4678114+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:38:24.263 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 01:38:24.269 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:38:24.271 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 7.7705ms
2025-09-26 01:38:24.293 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 01:38:24.298 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:38:24.301 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 01:38:24.304 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 01:38:24.318 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-09-26 01:38:24.322 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 01:38:24.324 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 16.5317ms
2025-09-26 01:38:24.327 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 01:38:24.330 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 37.1245ms
2025-09-26 01:38:25.767 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/3e3c49b8-7dec-4604-812f-c910590113b2 - null null
2025-09-26 01:38:25.773 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:38:25.775 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/send-campaign/3e3c49b8-7dec-4604-812f-c910590113b2 - 204 null null 7.7787ms
2025-09-26 01:38:25.782 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/3e3c49b8-7dec-4604-812f-c910590113b2 - null 0
2025-09-26 01:38:25.787 +05:30 [INF] CORS policy execution successful.
2025-09-26 01:38:25.788 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 01:38:25.791 +05:30 [INF] Route matched with {action = "SendTemplateCampaign", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplateCampaign(System.Guid) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 01:38:27.854 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='3e3c49b8-7dec-4604-812f-c910590113b2'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AudienceId", c."BusinessId", c."CTAFlowConfigId", c."CampaignId", c."CampaignType", c."CreatedAt", c."CreatedBy", c."CtaId", c."DeletedAt", c."DeletedBy", c."DocumentUrl", c."FollowUpTemplateId", c."ImageCaption", c."ImageUrl", c."IsDeleted", c."MessageBody", c."MessageTemplate", c."Name", c."PhoneNumberId", c."Provider", c."ScheduledAt", c."SourceCampaignId", c."Status", c."TemplateId", c."TemplateParameters", c."TemplateSchemaSnapshot", c."UpdatedAt", c."VideoUrl"
FROM "Campaigns" AS c
WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
ORDER BY c."Id"
LIMIT 1
2025-09-26 01:38:27.904 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__campaignId_0='3e3c49b8-7dec-4604-812f-c910590113b2'], CommandType='"Text"', CommandTimeout='30']
SELECT t0."Id", t0."AudienceMemberId", t0."BotId", t0."BusinessId", t0."CampaignId", t0."CategoryBrowsed", t0."ClickedCTA", t0."ContactId", t0."IdempotencyKey", t0."IsAutoTagged", t0."MaterializedAt", t0."MessagePreview", t0."ProductBrowsed", t0."ResolvedButtonUrlsJson", t0."ResolvedParametersJson", t0."SentAt", t0."Status", t0."UpdatedAt", t0."Id0", t0."AssignedAgentId", t0."BusinessId0", t0."CreatedAt", t0."Email", t0."Group", t0."IsActive", t0."IsArchived", t0."IsAutomationPaused", t0."IsFavorite", t0."LastCTAInteraction", t0."LastCTAType", t0."LastClickedProductId", t0."LastContactedAt", t0."LeadSource", t0."Name", t0."NextFollowUpAt", t0."Notes", t0."PhoneNumber", t0."ProfileName", t0."ProfileNameUpdatedAt", t0."Tags", t0."Id1", t0."AttributesJson", t0."AudienceId", t0."BusinessId1", t0."ContactId0", t0."CreatedAt0", t0."CreatedByUserId", t0."Email0", t0."IsDeleted", t0."IsTransientContact", t0."Name0", t0."PhoneE164", t0."PhoneRaw", t0."PromotedAt", t0."UpdatedAt0", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN (
    SELECT c0."Id", c0."AudienceMemberId", c0."BotId", c0."BusinessId", c0."CampaignId", c0."CategoryBrowsed", c0."ClickedCTA", c0."ContactId", c0."IdempotencyKey", c0."IsAutoTagged", c0."MaterializedAt", c0."MessagePreview", c0."ProductBrowsed", c0."ResolvedButtonUrlsJson", c0."ResolvedParametersJson", c0."SentAt", c0."Status", c0."UpdatedAt", c1."Id" AS "Id0", c1."AssignedAgentId", c1."BusinessId" AS "BusinessId0", c1."CreatedAt", c1."Email", c1."Group", c1."IsActive", c1."IsArchived", c1."IsAutomationPaused", c1."IsFavorite", c1."LastCTAInteraction", c1."LastCTAType", c1."LastClickedProductId", c1."LastContactedAt", c1."LeadSource", c1."Name", c1."NextFollowUpAt", c1."Notes", c1."PhoneNumber", c1."ProfileName", c1."ProfileNameUpdatedAt", c1."Tags", a."Id" AS "Id1", a."AttributesJson", a."AudienceId", a."BusinessId" AS "BusinessId1", a."ContactId" AS "ContactId0", a."CreatedAt" AS "CreatedAt0", a."CreatedByUserId", a."Email" AS "Email0", a."IsDeleted", a."IsTransientContact", a."Name" AS "Name0", a."PhoneE164", a."PhoneRaw", a."PromotedAt", a."UpdatedAt" AS "UpdatedAt0"
    FROM "CampaignRecipients" AS c0
    LEFT JOIN "Contacts" AS c1 ON c0."ContactId" = c1."Id"
    LEFT JOIN "AudienceMembers" AS a ON c0."AudienceMemberId" = a."Id"
) AS t0 ON t."Id" = t0."CampaignId"
ORDER BY t."Id"
2025-09-26 01:38:27.911 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__campaignId_0='3e3c49b8-7dec-4604-812f-c910590113b2'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Id", c0."CampaignId", c0."IsFromTemplate", c0."Position", c0."Title", c0."Type", c0."Value", t."Id"
FROM (
    SELECT c."Id"
    FROM "Campaigns" AS c
    WHERE c."Id" = @__campaignId_0 AND NOT (c."IsDeleted")
    LIMIT 1
) AS t
INNER JOIN "CampaignButtons" AS c0 ON t."Id" = c0."CampaignId"
ORDER BY t."Id"
2025-09-26 01:38:27.951 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__flowId_Value_0='d89bd994-3e0f-45c1-a619-fd6024540b2c', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."BusinessId", t."CreatedAt", t."CreatedBy", t."FlowName", t."IsActive", t."IsPublished", t."UpdatedAt", t0."Id", t0."CTAFlowConfigId", t0."PositionX", t0."PositionY", t0."ProfileNameSlot", t0."RequiredSource", t0."RequiredTag", t0."StepOrder", t0."TemplateToSend", t0."TemplateType", t0."TriggerButtonText", t0."TriggerButtonType", t0."UseProfileName", t0."Id0", t0."ButtonIndex", t0."ButtonSubType", t0."ButtonText", t0."ButtonType", t0."ButtonValue", t0."CTAFlowStepId", t0."NextStepId"
FROM (
    SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
    FROM "CTAFlowConfigs" AS c
    WHERE c."Id" = @__flowId_Value_0 AND c."BusinessId" = @__businessId_1 AND c."IsActive"
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT c0."Id", c0."CTAFlowConfigId", c0."PositionX", c0."PositionY", c0."ProfileNameSlot", c0."RequiredSource", c0."RequiredTag", c0."StepOrder", c0."TemplateToSend", c0."TemplateType", c0."TriggerButtonText", c0."TriggerButtonType", c0."UseProfileName", f."Id" AS "Id0", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
    FROM "CTAFlowSteps" AS c0
    LEFT JOIN "FlowButtonLinks" AS f ON c0."Id" = f."CTAFlowStepId"
) AS t0 ON t."Id" = t0."CTAFlowConfigId"
ORDER BY t."Id", t0."Id"
2025-09-26 01:38:27.962 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 01:38:27.966 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:38:27.969 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:38:28.917 +05:30 [INF] Received HTTP response headers after 945.8184ms - 200
2025-09-26 01:38:28.919 +05:30 [INF] End processing HTTP request after 952.972ms - 200
2025-09-26 01:38:29.125 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaign_CTAFlowConfigId_Value_0='d89bd994-3e0f-45c1-a619-fd6024540b2c'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "CTAFlowSteps" AS c
WHERE c."CTAFlowConfigId" = @__campaign_CTAFlowConfigId_Value_0
ORDER BY c."StepOrder"
LIMIT 1
2025-09-26 01:38:29.150 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 01:38:29.158 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 01:38:30.593 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 01:38:30.596 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 01:38:31.482 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:08:31.4791437+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:38:32.051 +05:30 [INF] Received HTTP response headers after 1452.4435ms - 200
2025-09-26 01:38:32.054 +05:30 [INF] End processing HTTP request after 1460.5531ms - 200
2025-09-26 01:38:35.689 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageLogId_0='bb1e27d1-8323-471a-b9fb-c260ebb6f169', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 01:38:35.706 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p2='b5e5af12-ad03-495f-8450-c9706ef1e116', @p0='66d41d51d1712a237967118f6ec9691a4d15b0130664b3fced996409aa7fcc29', @p1='2025-09-25T20:08:29.1311640Z' (DbType = DateTime), @p3='bb1e27d1-8323-471a-b9fb-c260ebb6f169', @p4='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p5='[{"i":0,"position":1,"text":"Yes","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"position":2,"text":"No","type":"QUICK_REPLY","subType":"quick_reply"}]', @p6='d89bd994-3e0f-45c1-a619-fd6024540b2c' (Nullable = true), @p7='0e8a1d87-25f8-4636-8292-b01357b885b6' (Nullable = true), @p8='3e3c49b8-7dec-4604-812f-c910590113b2' (Nullable = true), @p9='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p10=NULL, @p11=NULL, @p12=NULL (DbType = DateTime), @p13='2025-09-25T20:08:29.1311640Z' (DbType = DateTime), @p14=NULL, @p15=NULL (DbType = Int32), @p16=NULL (DbType = Boolean), @p17='False', @p18='https://whatsappdata.s3.ap-south-1.amazonaws.com/userMedia/dab49080d80c724aad5ebf158d63df41/vde_templ.mp4', @p19='welcome_video' (Nullable = false), @p20='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkNGQjk3MjFGOTI5OTQ1QjM3AA==', @p21=NULL (DbType = Decimal), @p22=NULL, @p23='META_CLOUD', @p24='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkNGQjk3MjFGOTI5OTQ1QjM3AA==', @p25='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkNGQjk3MjFGOTI5OTQ1QjM3AA==","message_status":"accepted"}]}', @p26='918974005240' (Nullable = false), @p27=NULL (DbType = Guid), @p28=NULL, @p29='67db0b30-8848-440b-8058-fe2e2dcf2159' (Nullable = true), @p30='2025-09-25T20:08:29.1311640Z' (Nullable = true) (DbType = DateTime), @p31='campaign', @p32='Sent' (Nullable = false), @p33='a1161a47-ab01-4fbb-998e-cdae128c4229', @p34='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p35=NULL, @p36=NULL, @p37='2025-09-25T20:08:35.6982094+00:00' (DbType = DateTime), @p38='send_response' (Nullable = false), @p39=NULL (DbType = Boolean), @p40='bb1e27d1-8323-471a-b9fb-c260ebb6f169' (Nullable = true), @p41='2025-09-25T20:08:35.6982118+00:00' (DbType = DateTime), @p42='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkNGQjk3MjFGOTI5OTQ1QjM3AA==","message_status":"accepted"}]}' (Nullable = false), @p43=NULL (DbType = Decimal), @p44=NULL, @p45='META_CLOUD' (Nullable = false), @p46='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkNGQjk3MjFGOTI5OTQ1QjM3AA=='], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignRecipients" SET "IdempotencyKey" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32)
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46);
2025-09-26 01:38:35.718 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='34431ea7-86c9-4bc1-affd-9439cdb85795', @p1='True', @p2=NULL, @p3='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p4='[{"i":0,"position":1,"text":"Yes","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"position":2,"text":"No","type":"QUICK_REPLY","subType":"quick_reply"}]', @p5='d89bd994-3e0f-45c1-a619-fd6024540b2c' (Nullable = true), @p6='0e8a1d87-25f8-4636-8292-b01357b885b6' (Nullable = true), @p7='3e3c49b8-7dec-4604-812f-c910590113b2', @p8=NULL, @p9=NULL, @p10=NULL (DbType = DateTime), @p11='a45ee3e2-7409-4ced-a535-9b9391d8b938' (Nullable = true), @p12=NULL, @p13='2025-09-25T20:08:29.1311640Z' (DbType = DateTime), @p14='system', @p15=NULL (DbType = DateTime), @p16=NULL, @p17=NULL, @p18=NULL, @p19=NULL, @p20='False', @p21=NULL (DbType = DateTime), @p22=NULL, @p23=NULL, @p24='Hello {{1}} 👋
Aapka order successfully deliver ho chuka hai. 🚚✨
Kya aapne Nirvasa ka Vaji Amrit Vati lena start kar diya hai? 💊
Neeche diye gaye options me se select karke bataye 👇' (Nullable = false), @p25='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkNGQjk3MjFGOTI5OTQ1QjM3AA==', @p26='bb1e27d1-8323-471a-b9fb-c260ebb6f169' (Nullable = true), @p27=NULL (DbType = DateTime), @p28='b5e5af12-ad03-495f-8450-c9706ef1e116', @p29='0', @p30='67db0b30-8848-440b-8058-fe2e2dcf2159' (Nullable = true), @p31='Sent', @p32='2025-09-25T20:08:29.1311640Z' (Nullable = true) (DbType = DateTime), @p33='video_template', @p34='welcome_video', @p35=NULL (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CampaignSendLogs" ("Id", "AllowRetry", "Browser", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "City", "ClickType", "ClickedAt", "ContactId", "Country", "CreatedAt", "CreatedBy", "DeliveredAt", "DeviceInfo", "DeviceType", "ErrorMessage", "IpAddress", "IsClicked", "LastRetryAt", "LastRetryStatus", "MacAddress", "MessageBody", "MessageId", "MessageLogId", "ReadAt", "RecipientId", "RetryCount", "RunId", "SendStatus", "SentAt", "SourceChannel", "TemplateId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35);
2025-09-26 01:38:37.973 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-09-26 01:38:37.975 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api) in 12180.7457ms
2025-09-26 01:38:37.978 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.SendTemplateCampaign (xbytechat.api)'
2025-09-26 01:38:37.980 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/campaign/send-campaign/3e3c49b8-7dec-4604-812f-c910590113b2 - 200 null application/json; charset=utf-8 12197.7076ms
2025-09-26 01:38:41.503 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:08:41.5001351+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:38:42.855 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-26 01:38:42.860 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:38:42.862 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:38:42.953 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkNGQjk3MjFGOTI5OTQ1QjM3AA==","status":"sent","timestamp":"1758830921","recipient_id":"918974005240","conversation":{"id":"ba2f7f010ce02fd90b46e423e4d4cb3b","expiration_timestamp":"1758830921","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:38:42.958 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:38:42.958 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkNGQjk3MjFGOTI5OTQ1QjM3AA==","status":"sent","timestamp":"1758830921","recipient_id":"918974005240","conversation":{"id":"ba2f7f010ce02fd90b46e423e4d4cb3b","expiration_timestamp":"1758830921","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:38:42.960 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:38:42.962 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:38:42.965 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 99.5773ms
2025-09-26 01:38:42.972 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkNGQjk3MjFGOTI5OTQ1QjM3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:38:42.972 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:38:42.980 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 125.0513ms
2025-09-26 01:38:42.980 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__sid_0='34431ea7-86c9-4bc1-affd-9439cdb85795'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 01:38:42.990 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkNGQjk3MjFGOTI5OTQ1QjM3AA== (legacy)
2025-09-26 01:38:43.562 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-09-26 01:38:43.570 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:38:43.572 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:38:43.575 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkNGQjk3MjFGOTI5OTQ1QjM3AA==","status":"delivered","timestamp":"1758830922","recipient_id":"918974005240","conversation":{"id":"ba2f7f010ce02fd90b46e423e4d4cb3b","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:38:43.577 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:38:43.578 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkNGQjk3MjFGOTI5OTQ1QjM3AA==","status":"delivered","timestamp":"1758830922","recipient_id":"918974005240","conversation":{"id":"ba2f7f010ce02fd90b46e423e4d4cb3b","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:38:43.579 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:38:43.581 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:38:43.583 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 8.9679ms
2025-09-26 01:38:43.589 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkNGQjk3MjFGOTI5OTQ1QjM3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:38:43.591 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:38:43.599 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__sid_0='34431ea7-86c9-4bc1-affd-9439cdb85795'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 01:38:43.600 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 37.7507ms
2025-09-26 01:38:43.607 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='34431ea7-86c9-4bc1-affd-9439cdb85795', @p0='2025-09-25T20:08:42.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Delivered'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "DeliveredAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-26 01:38:43.617 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkNGQjk3MjFGOTI5OTQ1QjM3AA== → Delivered
2025-09-26 01:38:43.869 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-09-26 01:38:43.875 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:38:43.877 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:38:43.881 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkNGQjk3MjFGOTI5OTQ1QjM3AA==","status":"delivered","timestamp":"1758830922","recipient_id":"918974005240","conversation":{"id":"ba2f7f010ce02fd90b46e423e4d4cb3b","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:38:43.885 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:38:43.886 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkNGQjk3MjFGOTI5OTQ1QjM3AA==","status":"delivered","timestamp":"1758830922","recipient_id":"918974005240","conversation":{"id":"ba2f7f010ce02fd90b46e423e4d4cb3b","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:38:43.887 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:38:43.888 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:38:43.890 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 9.6422ms
2025-09-26 01:38:43.896 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkNGQjk3MjFGOTI5OTQ1QjM3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:38:43.898 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:38:43.904 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='34431ea7-86c9-4bc1-affd-9439cdb85795'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 01:38:43.905 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 35.8375ms
2025-09-26 01:38:43.909 +05:30 [INF] 🔁 Duplicate status 'delivered' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkNGQjk3MjFGOTI5OTQ1QjM3AA== (legacy)
2025-09-26 01:38:45.815 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-09-26 01:38:45.820 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:38:45.823 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:38:45.826 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkNGQjk3MjFGOTI5OTQ1QjM3AA==","status":"read","timestamp":"1758830923","recipient_id":"918974005240","conversation":{"id":"ba2f7f010ce02fd90b46e423e4d4cb3b","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:38:45.829 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:38:45.830 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkNGQjk3MjFGOTI5OTQ1QjM3AA==","status":"read","timestamp":"1758830923","recipient_id":"918974005240","conversation":{"id":"ba2f7f010ce02fd90b46e423e4d4cb3b","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:38:45.831 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:38:45.834 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:38:45.836 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 9.808ms
2025-09-26 01:38:45.845 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkNGQjk3MjFGOTI5OTQ1QjM3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:38:45.846 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:38:45.853 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sid_0='34431ea7-86c9-4bc1-affd-9439cdb85795'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."Id" = @__sid_0
LIMIT 1
2025-09-26 01:38:45.854 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 39.6441ms
2025-09-26 01:38:45.862 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p2='34431ea7-86c9-4bc1-affd-9439cdb85795', @p0='2025-09-25T20:08:43.0000000Z' (Nullable = true) (DbType = DateTime), @p1='Read'], CommandType='"Text"', CommandTimeout='30']
UPDATE "CampaignSendLogs" SET "ReadAt" = @p0, "SendStatus" = @p1
WHERE "Id" = @p2;
2025-09-26 01:38:45.872 +05:30 [INF] ✅ CampaignSendLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkNGQjk3MjFGOTI5OTQ1QjM3AA== → Read
2025-09-26 01:38:48.198 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 603
2025-09-26 01:38:48.205 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:38:48.207 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:38:48.212 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkNGQjk3MjFGOTI5OTQ1QjM3AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQ0MzQTVEQ0NDRkFDMTRDMDVGM0EzQ0IzMTE0QTI0NDAA","timestamp":"1758830926","type":"button","button":{"payload":"Yes","text":"Yes"}}]},"field":"messages"}]}]}
2025-09-26 01:38:48.216 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:38:48.217 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkNGQjk3MjFGOTI5OTQ1QjM3AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQ0MzQTVEQ0NDRkFDMTRDMDVGM0EzQ0IzMTE0QTI0NDAA","timestamp":"1758830926","type":"button","button":{"payload":"Yes","text":"Yes"}}]},"field":"messages"}]}]}
2025-09-26 01:38:48.218 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:38:48.219 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-09-26 01:38:48.222 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 10.5825ms
2025-09-26 01:38:48.223 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-09-26 01:38:48.226 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:38:48.228 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQ0MzQTVEQ0NDRkFDMTRDMDVGM0EzQ0IzMTE0QTI0NDAA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkNGQjk3MjFGOTI5OTQ1QjM3AA==, Text: Yes
2025-09-26 01:38:48.230 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 31.6078ms
2025-09-26 01:38:48.237 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkNGQjk3MjFGOTI5OTQ1QjM3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-09-26 01:38:48.248 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__origin_Id_0='bb1e27d1-8323-471a-b9fb-c260ebb6f169' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRkNGQjk3MjFGOTI5OTQ1QjM3AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-09-26 01:38:48.255 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__fromDigits_1='918974005240', @__fromRaw_2='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND (c."PhoneNumber" = @__fromDigits_1 OR c."PhoneNumber" = @__fromRaw_2)
LIMIT 1
2025-09-26 01:38:48.262 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__stepId_0='0e8a1d87-25f8-4636-8292-b01357b885b6'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
WHERE f."CTAFlowStepId" = @__stepId_0
ORDER BY f."ButtonIndex"
2025-09-26 01:38:48.268 +05:30 [INF] ✅ Mapped click by TEXT to index 0 (flow="d89bd994-3e0f-45c1-a619-fd6024540b2c", step="0e8a1d87-25f8-4636-8292-b01357b885b6")
2025-09-26 01:38:48.273 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sourceStepId_0='0e8a1d87-25f8-4636-8292-b01357b885b6', @__flowId_1='d89bd994-3e0f-45c1-a619-fd6024540b2c', @__buttonIndex_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-09-26 01:38:48.280 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__stepId_0='0e8a1d87-25f8-4636-8292-b01357b885b6'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-09-26 01:38:48.288 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='63537f52-a563-44f4-8337-4e69eeaa5729', @p1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p2='0' (Nullable = true), @p3='34431ea7-86c9-4bc1-affd-9439cdb85795' (Nullable = true), @p4='918974005240', @p5=NULL, @p6='2025-09-25T20:08:48.2852879Z' (DbType = DateTime), @p7='d89bd994-3e0f-45c1-a619-fd6024540b2c' (Nullable = true), @p8='bb1e27d1-8323-471a-b9fb-c260ebb6f169' (Nullable = true), @p9=NULL, @p10='61b330fa-9e67-4521-a1f8-55a00bf80135' (Nullable = true), @p11='67db0b30-8848-440b-8058-fe2e2dcf2159' (Nullable = true), @p12='0e8a1d87-25f8-4636-8292-b01357b885b6', @p13='welcome_video' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='Yes'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-09-26 01:38:48.295 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__campaignSendLogId_Value_0='34431ea7-86c9-4bc1-affd-9439cdb85795'], CommandType='"Text"', CommandTimeout='30']
SELECT c0."Provider", c0."PhoneNumberId"
FROM "CampaignSendLogs" AS c
INNER JOIN "Campaigns" AS c0 ON c."CampaignId" = c0."Id"
WHERE c."Id" = @__campaignSendLogId_Value_0
LIMIT 1
2025-09-26 01:38:48.303 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_TargetStepId_0='5c722a51-2e9b-4dd7-b420-966696e14e4f' (Nullable = true), @__8__locals1_context_FlowId_1='d89bd994-3e0f-45c1-a619-fd6024540b2c'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."ProfileNameSlot", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", t."UseProfileName", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."ProfileNameSlot", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c."UseProfileName"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__8__locals1_context_TargetStepId_0 AND c."CTAFlowConfigId" = @__8__locals1_context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-09-26 01:38:48.309 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-09-26 01:38:48.314 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:38:48.317 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-09-26 01:38:49.704 +05:30 [INF] Received HTTP response headers after 1385.6626ms - 200
2025-09-26 01:38:49.707 +05:30 [INF] End processing HTTP request after 1393.2951ms - 200
2025-09-26 01:38:49.813 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_BusinessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__8__locals1_context_ContactPhone_1='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__8__locals1_context_BusinessId_0 AND c."PhoneNumber" = @__8__locals1_context_ContactPhone_1
LIMIT 1
2025-09-26 01:38:49.820 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-09-26 01:38:49.828 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-09-26 01:38:54.420 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 01:38:54.423 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:08:54.4183120+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:38:54.424 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-09-26 01:38:55.512 +05:30 [INF] Received HTTP response headers after 1082.1406ms - 200
2025-09-26 01:38:55.516 +05:30 [INF] End processing HTTP request after 1096.2674ms - 200
2025-09-26 01:38:59.731 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='8d25b617-e4ef-4d02-bb09-dbe095f2df73', @p1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-09-25T20:08:59.7239261Z' (DbType = DateTime), @p7='d89bd994-3e0f-45c1-a619-fd6024540b2c' (Nullable = true), @p8='f6683dd8-55c9-4963-87eb-935c989fce8f' (Nullable = true), @p9='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDk4MDkxRkNGOUZGMTczRjNBAA==","message_status":"accepted"}]}', @p10='9a2dae4c-ad5d-4d5d-902f-21f495727056' (Nullable = true), @p11=NULL (DbType = Guid), @p12='5c722a51-2e9b-4dd7-b420-966696e14e4f', @p13='single_variable_body' (Nullable = false), @p14='True', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='f6683dd8-55c9-4963-87eb-935c989fce8f', @p20='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @p21=NULL, @p22='d89bd994-3e0f-45c1-a619-fd6024540b2c' (Nullable = true), @p23='5c722a51-2e9b-4dd7-b420-966696e14e4f' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26=NULL, @p27=NULL, @p28=NULL (DbType = DateTime), @p29='2025-09-25T20:08:59.7236203Z' (DbType = DateTime), @p30=NULL, @p31='1' (Nullable = true), @p32=NULL (DbType = Boolean), @p33='False', @p34=NULL, @p35='single_variable_body' (Nullable = false), @p36='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDk4MDkxRkNGOUZGMTczRjNBAA==', @p37=NULL (DbType = Decimal), @p38=NULL, @p39=NULL, @p40=NULL, @p41='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDk4MDkxRkNGOUZGMTczRjNBAA==","message_status":"accepted"}]}', @p42='918974005240' (Nullable = false), @p43='bb1e27d1-8323-471a-b9fb-c260ebb6f169' (Nullable = true), @p44=NULL, @p45=NULL (DbType = Guid), @p46='2025-09-25T20:08:59.7236217Z' (Nullable = true) (DbType = DateTime), @p47='flow', @p48='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48)
RETURNING "MessageTime";
2025-09-26 01:39:03.439 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-09-26 01:39:03.445 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:39:03.446 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:39:03.451 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDk4MDkxRkNGOUZGMTczRjNBAA==","status":"sent","timestamp":"1758830942","recipient_id":"918974005240","conversation":{"id":"51c5520d6e2e61d63efed13c506308aa","expiration_timestamp":"1758830942","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:39:03.455 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:39:03.455 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDk4MDkxRkNGOUZGMTczRjNBAA==","status":"sent","timestamp":"1758830942","recipient_id":"918974005240","conversation":{"id":"51c5520d6e2e61d63efed13c506308aa","expiration_timestamp":"1758830942","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:39:03.457 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:39:03.460 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:39:03.462 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 11.806ms
2025-09-26 01:39:03.469 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDk4MDkxRkNGOUZGMTczRjNBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:39:03.470 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:39:03.476 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDk4MDkxRkNGOUZGMTczRjNBAA==
2025-09-26 01:39:03.478 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 38.4156ms
2025-09-26 01:39:03.483 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDk4MDkxRkNGOUZGMTczRjNBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:39:03.493 +05:30 [INF] 🔁 Duplicate status 'sent' skipped for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDk4MDkxRkNGOUZGMTczRjNBAA== (legacy)
2025-09-26 01:39:04.444 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T20:09:04.4411819+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:39:04.453 +05:30 [INF] Request starting HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-09-26 01:39:04.458 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:39:04.460 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-09-26 01:39:04.464 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDk4MDkxRkNGOUZGMTczRjNBAA==","status":"read","timestamp":"1758830943","recipient_id":"918974005240","conversation":{"id":"51c5520d6e2e61d63efed13c506308aa","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:39:04.467 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-09-26 01:39:04.467 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDk4MDkxRkNGOUZGMTczRjNBAA==","status":"read","timestamp":"1758830943","recipient_id":"918974005240","conversation":{"id":"51c5520d6e2e61d63efed13c506308aa","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-09-26 01:39:04.468 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType162`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 01:39:04.472 +05:30 [WRN] ⚠️ Status routing fallback → legacy processor (provider=meta, businessId=null)
2025-09-26 01:39:04.474 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 11.0514ms
2025-09-26 01:39:04.485 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-09-26 01:39:04.483 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDk4MDkxRkNGOUZGMTczRjNBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:39:04.488 +05:30 [INF] Request finished HTTP/1.1 POST http://2474e2efc056.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 34.5757ms
2025-09-26 01:39:04.491 +05:30 [WRN] ⚠️ CampaignSendLog not found for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDk4MDkxRkNGOUZGMTczRjNBAA==
2025-09-26 01:39:04.500 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDk4MDkxRkNGOUZGMTczRjNBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__messageId_0
LIMIT 1
2025-09-26 01:39:04.510 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p1='f6683dd8-55c9-4963-87eb-935c989fce8f', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-09-26 01:39:04.514 +05:30 [INF] ℹ️ MessageLog updated (legacy) for MessageId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDk4MDkxRkNGOUZGMTczRjNBAA== → Read
2025-09-26 01:39:14.457 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-25T20:09:14.4532162+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:39:24.465 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:09:24.4623300+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 01:39:34.474 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-25T20:09:34.4715343+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:27:33.979 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-26 12:27:34.033 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-26 12:27:34.054 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-26 12:27:35.436 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-26 12:27:36.338 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-26 12:27:36.364 +05:30 [INF] ClickLogWorker started
2025-09-26 12:27:36.609 +05:30 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-26 12:27:36.646 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-26 12:27:36.647 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-26 12:27:36.649 +05:30 [INF] Executed DbCommand (101ms) [Parameters=[@__cutoff_0='2025-09-19T06:57:34.2257567Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-26 12:27:36.649 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-26 12:27:36.653 +05:30 [INF] Hosting environment: Development
2025-09-26 12:27:36.655 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-26 12:27:37.428 +05:30 [INF] ClickLogWorker stopped
2025-09-26 12:27:37.578 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-26 12:27:37.817 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 231.7082ms
2025-09-26 12:27:37.826 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-26 12:27:37.834 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.4052ms
2025-09-26 12:27:37.927 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-26 12:27:37.987 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 59.7204ms
2025-09-26 12:27:38.213 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-26 12:27:38.614 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 400.8244ms
2025-09-26 12:27:41.487 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__now_0='2025-09-26T06:57:41.3831318+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:27:46.418 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT w."BusinessId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-09-26 12:27:46.479 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='86130882-681e-4d06-91b7-0f24be98783e'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-26 12:27:46.510 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='86130882-681e-4d06-91b7-0f24be98783e'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-09-26 12:27:46.551 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 12:27:46.556 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 12:27:47.462 +05:30 [INF] Received HTTP response headers after 900.4695ms - 401
2025-09-26 12:27:47.466 +05:30 [INF] End processing HTTP request after 920.7617ms - 401
2025-09-26 12:27:47.487 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='86130882-681e-4d06-91b7-0f24be98783e', @__providerKey_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__providerKey_1
2025-09-26 12:27:47.516 +05:30 [INF] TemplateSyncWorker: biz="86130882-681e-4d06-91b7-0f24be98783e" added=0 updated=0 skipped=0 syncedAt="2025-09-26T06:57:46.4930444Z"
2025-09-26 12:27:47.533 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-26 12:27:47.541 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-09-26 12:27:47.545 +05:30 [INF] ⏭️ Skipping sync for "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56"; TTL not expired.
2025-09-26 12:27:47.547 +05:30 [INF] TemplateSyncWorker: biz="6b5cea67-e8e9-42f7-8bde-51a9dbc02d56" added=0 updated=0 skipped=0 syncedAt="2025-09-26T03:46:04.5831990Z"
2025-09-26 12:27:47.556 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='3142ac6b-39e5-4056-ae1b-ad853850e082'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-26 12:27:47.562 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='3142ac6b-39e5-4056-ae1b-ad853850e082'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-09-26 12:27:47.566 +05:30 [INF] ⏭️ Skipping sync for "3142ac6b-39e5-4056-ae1b-ad853850e082"; TTL not expired.
2025-09-26 12:27:47.567 +05:30 [INF] TemplateSyncWorker: biz="3142ac6b-39e5-4056-ae1b-ad853850e082" added=0 updated=0 skipped=0 syncedAt="2025-09-26T03:28:34.7028200Z"
2025-09-26 12:27:47.570 +05:30 [INF] TemplateSyncWorker: sweep finished in 1194 ms; processed=3; next run ~"2025-09-26T12:57:46.3760252Z"
2025-09-26 12:27:51.509 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-26T06:57:51.5042139+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:28:01.519 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T06:58:01.5155580+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:28:03.100 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 12:28:03.108 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-26 12:28:03.187 +05:30 [INF] CORS policy execution successful.
2025-09-26 12:28:03.193 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/campaign/get-image-campaign - 204 null null 93.3709ms
2025-09-26 12:28:03.199 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - null null
2025-09-26 12:28:03.214 +05:30 [INF] CORS policy execution successful.
2025-09-26 12:28:03.414 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 12:28:03.449 +05:30 [INF] Route matched with {action = "GetAll", controller = "Campaign"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(System.String) on controller xbytechat.api.Features.CampaignModule.Controllers.CampaignController (xbytechat.api).
2025-09-26 12:28:03.628 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status", c."ScheduledAt", c."CreatedAt", c."ImageUrl", c."ImageCaption", c0."Title" AS "CtaTitle", (
    SELECT count(*)::int
    FROM "CampaignRecipients" AS c1
    WHERE c."Id" = c1."CampaignId") AS "RecipientCount"
FROM "Campaigns" AS c
LEFT JOIN "CTADefinitions" AS c0 ON c."CtaId" = c0."Id"
WHERE c."BusinessId" = @__businessId_0
ORDER BY c."CreatedAt" DESC
2025-09-26 12:28:03.647 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CampaignModule.DTOs.CampaignSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 12:28:03.691 +05:30 [INF] Executed action xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api) in 232.2031ms
2025-09-26 12:28:03.695 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CampaignModule.Controllers.CampaignController.GetAll (xbytechat.api)'
2025-09-26 12:28:03.704 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/campaign/get-image-campaign - 200 null application/json; charset=utf-8 505.2225ms
2025-09-26 12:28:08.882 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-draft - null null
2025-09-26 12:28:08.892 +05:30 [INF] CORS policy execution successful.
2025-09-26 12:28:08.897 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-draft - 204 null null 13.6966ms
2025-09-26 12:28:08.948 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - null null
2025-09-26 12:28:08.956 +05:30 [INF] CORS policy execution successful.
2025-09-26 12:28:08.961 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-09-26 12:28:08.971 +05:30 [INF] Route matched with {action = "GetAllDraftFlows", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllDraftFlows() on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-09-26 12:28:09.172 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."FlowName", c."CreatedAt", c."IsPublished"
FROM "CTAFlowConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND NOT (c."IsPublished") AND c."IsActive"
ORDER BY c."CreatedAt" DESC
2025-09-26 12:28:09.180 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CTAFlowBuilder.DTOs.VisualFlowSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 12:28:09.186 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api) in 210.4838ms
2025-09-26 12:28:09.189 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-09-26 12:28:09.192 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - 200 null application/json; charset=utf-8 243.8374ms
2025-09-26 12:28:10.737 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-published - null null
2025-09-26 12:28:10.740 +05:30 [INF] CORS policy execution successful.
2025-09-26 12:28:10.741 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-published - 204 null null 4.704ms
2025-09-26 12:28:10.749 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-published - null null
2025-09-26 12:28:10.755 +05:30 [INF] CORS policy execution successful.
2025-09-26 12:28:10.760 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetPublishedFlows (xbytechat.api)'
2025-09-26 12:28:10.768 +05:30 [INF] Route matched with {action = "GetPublishedFlows", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPublishedFlows() on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-09-26 12:28:10.782 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."FlowName", c."IsPublished", c."CreatedAt"
FROM "CTAFlowConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsPublished"
ORDER BY c."CreatedAt" DESC
2025-09-26 12:28:10.789 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CTAFlowBuilder.DTOs.VisualFlowSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 12:28:10.793 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetPublishedFlows (xbytechat.api) in 21.9436ms
2025-09-26 12:28:10.796 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetPublishedFlows (xbytechat.api)'
2025-09-26 12:28:10.799 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-published - 200 null application/json; charset=utf-8 49.8263ms
2025-09-26 12:28:11.529 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T06:58:11.5250173+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:28:16.686 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/delete/4c6ed28f-69f8-4b0f-9921-d64d9b64f6bb - null null
2025-09-26 12:28:16.694 +05:30 [INF] CORS policy execution successful.
2025-09-26 12:28:16.696 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/delete/4c6ed28f-69f8-4b0f-9921-d64d9b64f6bb - 204 null null 9.5436ms
2025-09-26 12:28:16.700 +05:30 [INF] Request starting HTTP/1.1 DELETE http://localhost:7113/api/cta-flow/delete/4c6ed28f-69f8-4b0f-9921-d64d9b64f6bb - null null
2025-09-26 12:28:16.710 +05:30 [INF] CORS policy execution successful.
2025-09-26 12:28:16.712 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.DeleteFlow (xbytechat.api)'
2025-09-26 12:28:16.720 +05:30 [INF] Route matched with {action = "DeleteFlow", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteFlow(System.Guid) on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-09-26 12:28:29.863 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T06:58:22.8815675+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:28:31.827 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='4c6ed28f-69f8-4b0f-9921-d64d9b64f6bb', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
FROM "CTAFlowConfigs" AS c
WHERE c."Id" = @__id_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 12:28:43.024 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__now_0='2025-09-26T06:58:43.0144587+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:28:43.148 +05:30 [ERR] Failed executing DbCommand (36ms) [Parameters=[@p0='4c6ed28f-69f8-4b0f-9921-d64d9b64f6bb'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "CTAFlowConfigs"
WHERE "Id" = @p0;
2025-09-26 12:28:43.217 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'xbytechat.api.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: update or delete on table "CTAFlowConfigs" violates foreign key constraint "FK_Campaigns_CTAFlowConfigs_CTAFlowConfigId" on table "Campaigns"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: update or delete on table "CTAFlowConfigs" violates foreign key constraint "FK_Campaigns_CTAFlowConfigs_CTAFlowConfigId" on table "Campaigns"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Campaigns
    ConstraintName: FK_Campaigns_CTAFlowConfigs_CTAFlowConfigId
    File: ri_triggers.c
    Line: 2633
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: update or delete on table "CTAFlowConfigs" violates foreign key constraint "FK_Campaigns_CTAFlowConfigs_CTAFlowConfigId" on table "Campaigns"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: update or delete on table "CTAFlowConfigs" violates foreign key constraint "FK_Campaigns_CTAFlowConfigs_CTAFlowConfigId" on table "Campaigns"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Campaigns
    ConstraintName: FK_Campaigns_CTAFlowConfigs_CTAFlowConfigId
    File: ri_triggers.c
    Line: 2633
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-09-26 12:28:43.661 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.DeleteFlow (xbytechat.api) in 26935.3152ms
2025-09-26 12:28:43.665 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.DeleteFlow (xbytechat.api)'
2025-09-26 12:28:43.811 +05:30 [ERR] ❌ An unhandled exception occurred
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: update or delete on table "CTAFlowConfigs" violates foreign key constraint "FK_Campaigns_CTAFlowConfigs_CTAFlowConfigId" on table "Campaigns"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: update or delete on table "CTAFlowConfigs" violates foreign key constraint "FK_Campaigns_CTAFlowConfigs_CTAFlowConfigId" on table "Campaigns"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Campaigns
    ConstraintName: FK_Campaigns_CTAFlowConfigs_CTAFlowConfigId
    File: ri_triggers.c
    Line: 2633
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at xbytechat.api.Features.CTAFlowBuilder.Services.CTAFlowService.DeleteFlowAsync(Guid id, Guid businessId) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CTAFlowBuilder\Services\CTAFlowService.cs:line 704
   at xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.DeleteFlow(Guid id) in D:\xbytechat\xbytechat-api\xbytechat-api\Features\CTAFlowBuilder\Controllers\CTAFlowController.cs:line 156
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_15>d.MoveNext() in D:\xbytechat\xbytechat-api\xbytechat-api\Program.cs:line 503
--- End of stack trace from previous location ---
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-09-26 12:28:43.943 +05:30 [INF] Request finished HTTP/1.1 DELETE http://localhost:7113/api/cta-flow/delete/4c6ed28f-69f8-4b0f-9921-d64d9b64f6bb - 500 null application/json; charset=utf-8 27242.3089ms
2025-09-26 12:28:56.877 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T06:58:56.8739257+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:29:06.886 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-26T06:59:06.8815972+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:29:16.904 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T06:59:16.8944718+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:29:26.928 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T06:59:26.9245628+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:29:36.946 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T06:59:36.9437972+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:29:46.960 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T06:59:46.9559645+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:29:56.975 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T06:59:56.9726017+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:30:06.986 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:00:06.9825224+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:30:17.009 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:00:17.0052298+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:30:27.032 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:00:27.0277732+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:30:37.041 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:00:37.0377077+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:30:47.066 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:00:47.0625599+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:30:57.087 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:00:57.0839381+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:31:07.102 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:01:07.0992478+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:31:17.116 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:01:17.1125399+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:31:27.132 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:01:27.1288972+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:31:37.145 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:01:37.1420922+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:31:47.159 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:01:47.1556792+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:31:57.183 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:01:57.1802076+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:32:07.192 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:02:07.1890659+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:32:17.211 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:02:17.2077759+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:32:27.228 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:02:27.2247874+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:32:37.247 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:02:37.2442605+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:32:47.366 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-26T07:02:47.2548783+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:32:57.376 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:02:57.3732568+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:33:07.384 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:03:07.3810510+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:33:17.391 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:03:17.3889598+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:33:27.408 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:03:27.4050171+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:33:37.419 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:03:37.4159731+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:38:40.554 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-26 12:38:40.622 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-26 12:38:40.646 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-26 12:38:42.128 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-26 12:38:42.272 +05:30 [WRN] The foreign key property 'Campaign.CTAFlowConfigId1' was created in shadow state because a conflicting property with the simple name 'CTAFlowConfigId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-26 12:38:43.126 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-26 12:38:43.155 +05:30 [INF] ClickLogWorker started
2025-09-26 12:38:43.418 +05:30 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-26 12:38:43.482 +05:30 [INF] Executed DbCommand (109ms) [Parameters=[@__cutoff_0='2025-09-19T07:08:40.8445916Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-26 12:38:43.513 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-26 12:38:43.515 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-26 12:38:43.516 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-26 12:38:43.518 +05:30 [INF] Hosting environment: Development
2025-09-26 12:38:43.519 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-26 12:38:44.238 +05:30 [INF] ClickLogWorker stopped
2025-09-26 12:38:44.278 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-26 12:38:44.526 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 259.8847ms
2025-09-26 12:38:44.687 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-26 12:38:44.687 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-26 12:38:44.695 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.8153ms
2025-09-26 12:38:44.745 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 58.2451ms
2025-09-26 12:38:44.896 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-26 12:38:45.246 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 350.4526ms
2025-09-26 12:38:48.262 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__now_0='2025-09-26T07:08:48.1699856+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:38:53.197 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT w."BusinessId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-09-26 12:38:53.267 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='86130882-681e-4d06-91b7-0f24be98783e'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-26 12:38:53.299 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='86130882-681e-4d06-91b7-0f24be98783e'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-09-26 12:38:53.350 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 12:38:53.356 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 12:38:54.496 +05:30 [INF] Received HTTP response headers after 1134.2853ms - 401
2025-09-26 12:38:54.499 +05:30 [INF] End processing HTTP request after 1154.3959ms - 401
2025-09-26 12:38:54.516 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='86130882-681e-4d06-91b7-0f24be98783e', @__providerKey_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__providerKey_1
2025-09-26 12:38:54.540 +05:30 [INF] TemplateSyncWorker: biz="86130882-681e-4d06-91b7-0f24be98783e" added=0 updated=0 skipped=0 syncedAt="2025-09-26T07:08:53.2839105Z"
2025-09-26 12:38:54.555 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-26 12:38:54.562 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-09-26 12:38:54.567 +05:30 [INF] ⏭️ Skipping sync for "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56"; TTL not expired.
2025-09-26 12:38:54.569 +05:30 [INF] TemplateSyncWorker: biz="6b5cea67-e8e9-42f7-8bde-51a9dbc02d56" added=0 updated=0 skipped=0 syncedAt="2025-09-26T03:46:04.5831990Z"
2025-09-26 12:38:54.579 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='3142ac6b-39e5-4056-ae1b-ad853850e082'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-26 12:38:54.585 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='3142ac6b-39e5-4056-ae1b-ad853850e082'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-09-26 12:38:54.589 +05:30 [INF] ⏭️ Skipping sync for "3142ac6b-39e5-4056-ae1b-ad853850e082"; TTL not expired.
2025-09-26 12:38:54.591 +05:30 [INF] TemplateSyncWorker: biz="3142ac6b-39e5-4056-ae1b-ad853850e082" added=0 updated=0 skipped=0 syncedAt="2025-09-26T03:28:34.7028200Z"
2025-09-26 12:38:54.593 +05:30 [INF] TemplateSyncWorker: sweep finished in 1429 ms; processed=3; next run ~"2025-09-26T13:08:53.1642225Z"
2025-09-26 12:38:54.655 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-draft - null null
2025-09-26 12:38:54.667 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-26 12:38:54.755 +05:30 [INF] CORS policy execution successful.
2025-09-26 12:38:54.762 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-draft - 204 null null 107.1547ms
2025-09-26 12:38:54.768 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - null null
2025-09-26 12:38:54.785 +05:30 [INF] CORS policy execution successful.
2025-09-26 12:38:55.025 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-09-26 12:38:55.051 +05:30 [INF] Route matched with {action = "GetAllDraftFlows", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllDraftFlows() on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-09-26 12:38:55.280 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."FlowName", c."CreatedAt", c."IsPublished"
FROM "CTAFlowConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND NOT (c."IsPublished") AND c."IsActive"
ORDER BY c."CreatedAt" DESC
2025-09-26 12:38:55.298 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CTAFlowBuilder.DTOs.VisualFlowSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 12:38:55.328 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api) in 268.6531ms
2025-09-26 12:38:55.332 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetAllDraftFlows (xbytechat.api)'
2025-09-26 12:38:55.341 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-draft - 200 null application/json; charset=utf-8 572.8455ms
2025-09-26 12:38:57.630 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-published - null null
2025-09-26 12:38:57.640 +05:30 [INF] CORS policy execution successful.
2025-09-26 12:38:57.642 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/all-published - 204 null null 12.2737ms
2025-09-26 12:38:57.658 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-published - null null
2025-09-26 12:38:57.664 +05:30 [INF] CORS policy execution successful.
2025-09-26 12:38:57.669 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetPublishedFlows (xbytechat.api)'
2025-09-26 12:38:57.675 +05:30 [INF] Route matched with {action = "GetPublishedFlows", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPublishedFlows() on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-09-26 12:39:00.720 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:09:00.7161396+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:39:01.560 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."FlowName", c."IsPublished", c."CreatedAt"
FROM "CTAFlowConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsPublished"
ORDER BY c."CreatedAt" DESC
2025-09-26 12:39:01.567 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.CTAFlowBuilder.DTOs.VisualFlowSummaryDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-09-26 12:39:01.576 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetPublishedFlows (xbytechat.api) in 3897.5815ms
2025-09-26 12:39:01.578 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.GetPublishedFlows (xbytechat.api)'
2025-09-26 12:39:01.581 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/cta-flow/all-published - 200 null application/json; charset=utf-8 3922.4687ms
2025-09-26 12:39:06.177 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/delete/4c6ed28f-69f8-4b0f-9921-d64d9b64f6bb - null null
2025-09-26 12:39:06.183 +05:30 [INF] CORS policy execution successful.
2025-09-26 12:39:06.215 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/delete/4c6ed28f-69f8-4b0f-9921-d64d9b64f6bb - 204 null null 38.0397ms
2025-09-26 12:39:06.220 +05:30 [INF] Request starting HTTP/1.1 DELETE http://localhost:7113/api/cta-flow/delete/4c6ed28f-69f8-4b0f-9921-d64d9b64f6bb - null null
2025-09-26 12:39:06.225 +05:30 [INF] CORS policy execution successful.
2025-09-26 12:39:06.230 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.DeleteFlow (xbytechat.api)'
2025-09-26 12:39:06.258 +05:30 [INF] Route matched with {action = "DeleteFlow", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteFlow(System.Guid, Boolean) on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-09-26 12:39:06.321 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='4c6ed28f-69f8-4b0f-9921-d64d9b64f6bb', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
FROM "CTAFlowConfigs" AS c
WHERE c."Id" = @__id_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 12:39:06.448 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__id_1='4c6ed28f-69f8-4b0f-9921-d64d9b64f6bb' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status"
FROM "Campaigns" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."CTAFlowConfigId" = @__id_1
2025-09-26 12:39:06.606 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@p3='4c6ed28f-69f8-4b0f-9921-d64d9b64f6bb', @p0='False', @p1='False', @p2='2025-09-26T07:09:06.4539329Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CTAFlowConfigs" SET "IsActive" = @p0, "IsPublished" = @p1, "UpdatedAt" = @p2
WHERE "Id" = @p3;
2025-09-26 12:39:06.627 +05:30 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 12:39:06.633 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.DeleteFlow (xbytechat.api) in 370.7475ms
2025-09-26 12:39:06.637 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.DeleteFlow (xbytechat.api)'
2025-09-26 12:39:06.639 +05:30 [INF] Request finished HTTP/1.1 DELETE http://localhost:7113/api/cta-flow/delete/4c6ed28f-69f8-4b0f-9921-d64d9b64f6bb - 400 null application/json; charset=utf-8 418.6452ms
2025-09-26 12:39:11.569 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-26T07:09:11.5655538+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:39:21.200 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/delete/4c6ed28f-69f8-4b0f-9921-d64d9b64f6bb - null null
2025-09-26 12:39:21.204 +05:30 [INF] CORS policy execution successful.
2025-09-26 12:39:21.205 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/delete/4c6ed28f-69f8-4b0f-9921-d64d9b64f6bb - 204 null null 5.2731ms
2025-09-26 12:39:21.221 +05:30 [INF] Request starting HTTP/1.1 DELETE http://localhost:7113/api/cta-flow/delete/4c6ed28f-69f8-4b0f-9921-d64d9b64f6bb - null null
2025-09-26 12:39:21.225 +05:30 [INF] CORS policy execution successful.
2025-09-26 12:39:21.228 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.DeleteFlow (xbytechat.api)'
2025-09-26 12:39:21.230 +05:30 [INF] Route matched with {action = "DeleteFlow", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteFlow(System.Guid, Boolean) on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-09-26 12:39:21.240 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='4c6ed28f-69f8-4b0f-9921-d64d9b64f6bb', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
FROM "CTAFlowConfigs" AS c
WHERE c."Id" = @__id_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 12:39:21.250 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__id_1='4c6ed28f-69f8-4b0f-9921-d64d9b64f6bb' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status"
FROM "Campaigns" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."CTAFlowConfigId" = @__id_1
2025-09-26 12:39:21.258 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p1='4c6ed28f-69f8-4b0f-9921-d64d9b64f6bb', @p0='2025-09-26T07:09:21.2533539Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CTAFlowConfigs" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-09-26 12:39:21.262 +05:30 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 12:39:21.265 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.DeleteFlow (xbytechat.api) in 31.746ms
2025-09-26 12:39:21.267 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.DeleteFlow (xbytechat.api)'
2025-09-26 12:39:21.268 +05:30 [INF] Request finished HTTP/1.1 DELETE http://localhost:7113/api/cta-flow/delete/4c6ed28f-69f8-4b0f-9921-d64d9b64f6bb - 400 null application/json; charset=utf-8 47.5058ms
2025-09-26 12:39:21.586 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:09:21.5826073+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:39:31.601 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:09:31.5979582+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:39:41.629 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:09:41.6256653+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:39:47.418 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/delete/4c6ed28f-69f8-4b0f-9921-d64d9b64f6bb - null null
2025-09-26 12:39:47.443 +05:30 [INF] CORS policy execution successful.
2025-09-26 12:39:47.446 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/cta-flow/delete/4c6ed28f-69f8-4b0f-9921-d64d9b64f6bb - 204 null null 27.7698ms
2025-09-26 12:39:47.451 +05:30 [INF] Request starting HTTP/1.1 DELETE http://localhost:7113/api/cta-flow/delete/4c6ed28f-69f8-4b0f-9921-d64d9b64f6bb - null null
2025-09-26 12:39:47.456 +05:30 [INF] CORS policy execution successful.
2025-09-26 12:39:47.458 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.DeleteFlow (xbytechat.api)'
2025-09-26 12:39:47.460 +05:30 [INF] Route matched with {action = "DeleteFlow", controller = "CTAFlow"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteFlow(System.Guid, Boolean) on controller xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController (xbytechat.api).
2025-09-26 12:39:47.467 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='4c6ed28f-69f8-4b0f-9921-d64d9b64f6bb', @__businessId_1='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."CreatedAt", c."CreatedBy", c."FlowName", c."IsActive", c."IsPublished", c."UpdatedAt"
FROM "CTAFlowConfigs" AS c
WHERE c."Id" = @__id_0 AND c."BusinessId" = @__businessId_1
LIMIT 1
2025-09-26 12:39:47.478 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56', @__id_1='4c6ed28f-69f8-4b0f-9921-d64d9b64f6bb' (Nullable = true)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Name", c."Status"
FROM "Campaigns" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."CTAFlowConfigId" = @__id_1
2025-09-26 12:39:47.484 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='4c6ed28f-69f8-4b0f-9921-d64d9b64f6bb', @p0='2025-09-26T07:09:47.4816733Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CTAFlowConfigs" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-09-26 12:39:47.489 +05:30 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 12:39:47.491 +05:30 [INF] Executed action xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.DeleteFlow (xbytechat.api) in 28.6237ms
2025-09-26 12:39:47.494 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CTAFlowBuilder.Controllers.CTAFlowController.DeleteFlow (xbytechat.api)'
2025-09-26 12:39:47.497 +05:30 [INF] Request finished HTTP/1.1 DELETE http://localhost:7113/api/cta-flow/delete/4c6ed28f-69f8-4b0f-9921-d64d9b64f6bb - 400 null application/json; charset=utf-8 46.3242ms
2025-09-26 12:39:51.643 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:09:51.6398519+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:40:01.664 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:10:01.6614968+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:40:11.679 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:10:11.6758818+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:40:21.694 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-26T07:10:21.6894754+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:40:31.704 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:10:31.7010554+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:40:41.715 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:10:41.7117108+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:40:51.731 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:10:51.7283246+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:41:01.741 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:11:01.7381155+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:41:11.755 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:11:11.7512242+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:41:21.770 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:11:21.7676168+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:41:31.797 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-26T07:11:31.7953237+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:41:41.814 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:11:41.8111003+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:41:51.834 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:11:51.8313457+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:42:01.846 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:12:01.8432648+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:42:11.868 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:12:11.8648634+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:42:21.882 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:12:21.8787658+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:42:31.900 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-09-26T07:12:31.8953811+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:42:41.909 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:12:41.9062501+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:42:51.926 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:12:51.9233904+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:43:01.939 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:13:01.9364455+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:43:11.943 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:13:11.9406307+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:43:21.960 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:13:21.9562671+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:43:31.974 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-26T07:13:31.9720287+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:43:41.984 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-26T07:13:41.9818386+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:43:52.046 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:13:51.9900756+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:44:02.054 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-26T07:14:02.0525940+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:44:12.075 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-26T07:14:12.0730805+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:44:22.093 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-26T07:14:22.0916746+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:44:32.099 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-26T07:14:32.0975416+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:44:42.117 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-26T07:14:42.1155749+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:44:52.124 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-26T07:14:52.1221175+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:45:02.138 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-26T07:15:02.1364207+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:45:12.143 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-26T07:15:12.1414248+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:47:03.029 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-26 12:47:03.065 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-26 12:47:03.077 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-26 12:47:03.934 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-26 12:47:04.010 +05:30 [WRN] The foreign key property 'Campaign.CTAFlowConfigId1' was created in shadow state because a conflicting property with the simple name 'CTAFlowConfigId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-26 12:47:04.466 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-26 12:47:04.484 +05:30 [INF] ClickLogWorker started
2025-09-26 12:47:04.687 +05:30 [INF] Executed DbCommand (71ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-26 12:47:04.713 +05:30 [INF] Executed DbCommand (102ms) [Parameters=[@__cutoff_0='2025-09-19T07:17:03.2311033Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-26 12:47:04.716 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-26 12:47:04.717 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-26 12:47:04.718 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-26 12:47:04.719 +05:30 [INF] Hosting environment: Development
2025-09-26 12:47:04.720 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-26 12:47:05.530 +05:30 [INF] ClickLogWorker stopped
2025-09-26 12:47:06.459 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-26 12:47:06.605 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 153.3906ms
2025-09-26 12:47:06.630 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-26 12:47:06.639 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.7212ms
2025-09-26 12:47:06.692 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-26 12:47:06.723 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.9906ms
2025-09-26 12:47:06.879 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-26 12:47:07.157 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 278.067ms
2025-09-26 12:47:09.564 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__now_0='2025-09-26T07:17:09.5024692+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:47:14.524 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT w."BusinessId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-09-26 12:47:14.625 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='86130882-681e-4d06-91b7-0f24be98783e'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-26 12:47:14.641 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='86130882-681e-4d06-91b7-0f24be98783e'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-09-26 12:47:14.660 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 12:47:14.662 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 12:47:15.245 +05:30 [INF] Received HTTP response headers after 579.5318ms - 401
2025-09-26 12:47:15.247 +05:30 [INF] End processing HTTP request after 589.4829ms - 401
2025-09-26 12:47:15.256 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='86130882-681e-4d06-91b7-0f24be98783e', @__providerKey_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__providerKey_1
2025-09-26 12:47:15.271 +05:30 [INF] TemplateSyncWorker: biz="86130882-681e-4d06-91b7-0f24be98783e" added=0 updated=0 skipped=0 syncedAt="2025-09-26T07:17:14.6330406Z"
2025-09-26 12:47:15.279 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-26 12:47:15.283 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='6b5cea67-e8e9-42f7-8bde-51a9dbc02d56'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-09-26 12:47:15.286 +05:30 [INF] ⏭️ Skipping sync for "6b5cea67-e8e9-42f7-8bde-51a9dbc02d56"; TTL not expired.
2025-09-26 12:47:15.287 +05:30 [INF] TemplateSyncWorker: biz="6b5cea67-e8e9-42f7-8bde-51a9dbc02d56" added=0 updated=0 skipped=0 syncedAt="2025-09-26T03:46:04.5831990Z"
2025-09-26 12:47:15.294 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='3142ac6b-39e5-4056-ae1b-ad853850e082'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-26 12:47:15.297 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='3142ac6b-39e5-4056-ae1b-ad853850e082'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-09-26 12:47:15.300 +05:30 [INF] ⏭️ Skipping sync for "3142ac6b-39e5-4056-ae1b-ad853850e082"; TTL not expired.
2025-09-26 12:47:15.301 +05:30 [INF] TemplateSyncWorker: biz="3142ac6b-39e5-4056-ae1b-ad853850e082" added=0 updated=0 skipped=0 syncedAt="2025-09-26T03:28:34.7028200Z"
2025-09-26 12:47:15.302 +05:30 [INF] TemplateSyncWorker: sweep finished in 799 ms; processed=3; next run ~"2025-09-26T13:17:14.5036775Z"
2025-09-26 12:47:19.576 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:17:19.5733683+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:47:29.583 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-09-26T07:17:29.5808101+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:47:39.604 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-26T07:17:39.6018450+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:47:49.624 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-26T07:17:49.6215066+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:47:59.634 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-26T07:17:59.6317558+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:48:09.645 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-26T07:18:09.6433032+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:48:19.664 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-26T07:18:19.6618805+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 12:48:29.671 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-09-26T07:18:29.6689033+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:29:05.892 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-26 23:29:06.296 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-09-26 23:29:06.481 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-09-26 23:29:09.346 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-09-26 23:29:09.654 +05:30 [WRN] The foreign key property 'Campaign.CTAFlowConfigId1' was created in shadow state because a conflicting property with the simple name 'CTAFlowConfigId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-09-26 23:29:10.891 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-09-26 23:29:10.913 +05:30 [INF] ClickLogWorker started
2025-09-26 23:29:12.719 +05:30 [INF] ClickLogWorker stopped
2025-09-26 23:29:13.081 +05:30 [INF] Now listening on: http://localhost:7113
2025-09-26 23:29:13.083 +05:30 [INF] Now listening on: http://localhost:5295
2025-09-26 23:29:13.084 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-09-26 23:29:13.086 +05:30 [INF] Hosting environment: Development
2025-09-26 23:29:13.088 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-09-26 23:29:14.898 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger - null null
2025-09-26 23:29:15.677 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger - 301 0 null 785.9625ms
2025-09-26 23:29:15.687 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-09-26 23:29:16.037 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 349.3334ms
2025-09-26 23:29:16.056 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/swagger-ui-bundle.js - null null
2025-09-26 23:29:16.059 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/swagger-ui.css - null null
2025-09-26 23:29:16.103 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/swagger-ui-standalone-preset.js - null null
2025-09-26 23:29:16.173 +05:30 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-09-26 23:29:16.173 +05:30 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-09-26 23:29:16.179 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/swagger-ui.css - 200 152034 text/css 119.3357ms
2025-09-26 23:29:16.179 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/swagger-ui-standalone-preset.js - 200 230280 text/javascript 75.7223ms
2025-09-26 23:29:16.196 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-09-26 23:29:16.198 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-09-26 23:29:16.206 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 10.1439ms
2025-09-26 23:29:16.251 +05:30 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-09-26 23:29:16.255 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/swagger-ui-bundle.js - 200 1456926 text/javascript 198.6284ms
2025-09-26 23:29:16.339 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 140.8677ms
2025-09-26 23:29:16.609 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-09-26 23:29:17.109 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 499.3506ms
2025-09-26 23:29:19.841 +05:30 [INF] Executed DbCommand (133ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-09-26 23:29:19.865 +05:30 [INF] Executed DbCommand (128ms) [Parameters=[@__cutoff_0='2025-09-19T17:59:07.3187062Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-09-26 23:29:21.045 +05:30 [INF] Executed DbCommand (101ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT w."BusinessId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-09-26 23:29:21.468 +05:30 [INF] Executed DbCommand (96ms) [Parameters=[@__businessId_0='bf82072c-69c1-4f8c-be53-ade19d6776a5'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-26 23:29:21.573 +05:30 [INF] Executed DbCommand (81ms) [Parameters=[@__businessId_0='bf82072c-69c1-4f8c-be53-ade19d6776a5'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-09-26 23:29:21.580 +05:30 [INF] ⏭️ Skipping sync for "bf82072c-69c1-4f8c-be53-ade19d6776a5"; TTL not expired.
2025-09-26 23:29:21.584 +05:30 [INF] TemplateSyncWorker: biz="bf82072c-69c1-4f8c-be53-ade19d6776a5" added=0 updated=0 skipped=0 syncedAt="2025-09-26T10:09:02.6037540Z"
2025-09-26 23:29:21.676 +05:30 [INF] Executed DbCommand (84ms) [Parameters=[@__businessId_0='7f726daa-ec21-423c-87cc-9a4c8e2608b4'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-09-26 23:29:21.757 +05:30 [INF] Executed DbCommand (76ms) [Parameters=[@__businessId_0='7f726daa-ec21-423c-87cc-9a4c8e2608b4'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-09-26 23:29:21.792 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 23:29:21.796 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-09-26 23:29:22.633 +05:30 [INF] Received HTTP response headers after 831.4991ms - 401
2025-09-26 23:29:22.636 +05:30 [INF] End processing HTTP request after 846.3171ms - 401
2025-09-26 23:29:22.805 +05:30 [INF] Executed DbCommand (159ms) [Parameters=[@__businessId_0='7f726daa-ec21-423c-87cc-9a4c8e2608b4', @__providerKey_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__providerKey_1
2025-09-26 23:29:22.979 +05:30 [INF] TemplateSyncWorker: biz="7f726daa-ec21-423c-87cc-9a4c8e2608b4" added=0 updated=0 skipped=0 syncedAt="2025-09-26T17:59:21.6797009Z"
2025-09-26 23:29:22.983 +05:30 [INF] TemplateSyncWorker: sweep finished in 2063 ms; processed=2; next run ~"2025-09-26T23:59:20.9198315Z"
2025-09-26 23:29:24.091 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-09-26 23:29:24.099 +05:30 [WRN] Failed to determine the https port for redirect.
2025-09-26 23:29:24.172 +05:30 [INF] CORS policy execution successful.
2025-09-26 23:29:24.176 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 84.8586ms
2025-09-26 23:29:24.181 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 53
2025-09-26 23:29:24.191 +05:30 [INF] CORS policy execution successful.
2025-09-26 23:29:24.212 +05:30 [INF] Executed DbCommand (86ms) [Parameters=[@__now_0='2025-09-26T17:59:15.9357570+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:29:24.439 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-26 23:29:24.460 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-09-26 23:29:24.499 +05:30 [INF] 🔑 Login attempt for email: admin@xbytechat.com
2025-09-26 23:29:24.659 +05:30 [INF] Executed DbCommand (85ms) [Parameters=[@__dto_Email_0='admin@xbytechat.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-09-26 23:29:24.830 +05:30 [INF] Executed DbCommand (87ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Code"
FROM "Permissions" AS p
WHERE p."IsActive"
ORDER BY p."Code"
2025-09-26 23:29:24.842 +05:30 [INF] ✅ Token generated for: admin@xbytechat.com
2025-09-26 23:29:24.990 +05:30 [INF] 🔎 JWT includes plan_id: 
2025-09-26 23:29:24.992 +05:30 [INF] ✅ Login successful for admin@xbytechat.com, Role: admin, PlanId: null
2025-09-26 23:29:25.000 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 23:29:25.010 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 543.7155ms
2025-09-26 23:29:25.013 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-09-26 23:29:25.020 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 839.0335ms
2025-09-26 23:29:25.025 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-26 23:29:25.030 +05:30 [INF] CORS policy execution successful.
2025-09-26 23:29:25.032 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.0295ms
2025-09-26 23:29:25.036 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-26 23:29:25.040 +05:30 [INF] CORS policy execution successful.
2025-09-26 23:29:25.087 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-26 23:29:25.095 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-26 23:29:25.102 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType51`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 23:29:25.119 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 21.5542ms
2025-09-26 23:29:25.121 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-26 23:29:25.122 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 86.3252ms
2025-09-26 23:29:25.146 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-09-26 23:29:25.150 +05:30 [INF] CORS policy execution successful.
2025-09-26 23:29:25.152 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 6.0437ms
2025-09-26 23:29:25.161 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-26 23:29:25.165 +05:30 [INF] CORS policy execution successful.
2025-09-26 23:29:25.172 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-26 23:29:25.174 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-26 23:29:25.178 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType51`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 23:29:25.180 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 3.4972ms
2025-09-26 23:29:25.182 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-26 23:29:25.183 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 23.0428ms
2025-09-26 23:29:25.322 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-09-26 23:29:25.327 +05:30 [INF] CORS policy execution successful.
2025-09-26 23:29:25.331 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-26 23:29:25.333 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-09-26 23:29:25.337 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType51`3[[System.Nullable`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String[], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-09-26 23:29:25.340 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 4.4475ms
2025-09-26 23:29:25.342 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-09-26 23:29:25.343 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 20.9977ms
2025-09-26 23:29:34.366 +05:30 [INF] Executed DbCommand (150ms) [Parameters=[@__now_0='2025-09-26T17:59:34.2155279+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:29:44.442 +05:30 [INF] Executed DbCommand (69ms) [Parameters=[@__now_0='2025-09-26T17:59:44.3725268+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:29:54.544 +05:30 [INF] Executed DbCommand (95ms) [Parameters=[@__now_0='2025-09-26T17:59:54.4485002+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:30:04.677 +05:30 [INF] Executed DbCommand (122ms) [Parameters=[@__now_0='2025-09-26T18:00:04.5549357+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:30:14.913 +05:30 [INF] Executed DbCommand (223ms) [Parameters=[@__now_0='2025-09-26T18:00:14.6890740+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:30:25.055 +05:30 [INF] Executed DbCommand (129ms) [Parameters=[@__now_0='2025-09-26T18:00:24.9248802+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:30:35.192 +05:30 [INF] Executed DbCommand (125ms) [Parameters=[@__now_0='2025-09-26T18:00:35.0663181+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:30:45.297 +05:30 [INF] Executed DbCommand (91ms) [Parameters=[@__now_0='2025-09-26T18:00:45.2057342+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:30:55.467 +05:30 [INF] Executed DbCommand (164ms) [Parameters=[@__now_0='2025-09-26T18:00:55.3027190+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:31:05.606 +05:30 [INF] Executed DbCommand (133ms) [Parameters=[@__now_0='2025-09-26T18:01:05.4725679+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:31:15.743 +05:30 [INF] Executed DbCommand (130ms) [Parameters=[@__now_0='2025-09-26T18:01:15.6123853+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:31:25.816 +05:30 [INF] Executed DbCommand (74ms) [Parameters=[@__now_0='2025-09-26T18:01:25.7424569+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:31:36.020 +05:30 [INF] Executed DbCommand (187ms) [Parameters=[@__now_0='2025-09-26T18:01:35.8321353+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:31:46.157 +05:30 [INF] Executed DbCommand (122ms) [Parameters=[@__now_0='2025-09-26T18:01:46.0343284+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:31:56.358 +05:30 [INF] Executed DbCommand (181ms) [Parameters=[@__now_0='2025-09-26T18:01:56.1751287+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:32:06.458 +05:30 [INF] Executed DbCommand (89ms) [Parameters=[@__now_0='2025-09-26T18:02:06.3678196+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:32:16.541 +05:30 [INF] Executed DbCommand (77ms) [Parameters=[@__now_0='2025-09-26T18:02:16.4639271+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:32:26.639 +05:30 [INF] Executed DbCommand (85ms) [Parameters=[@__now_0='2025-09-26T18:02:26.5532119+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:32:36.727 +05:30 [INF] Executed DbCommand (75ms) [Parameters=[@__now_0='2025-09-26T18:02:36.6521454+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:32:46.807 +05:30 [INF] Executed DbCommand (60ms) [Parameters=[@__now_0='2025-09-26T18:02:46.7431402+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:32:56.890 +05:30 [INF] Executed DbCommand (79ms) [Parameters=[@__now_0='2025-09-26T18:02:56.8086554+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:33:06.981 +05:30 [INF] Executed DbCommand (83ms) [Parameters=[@__now_0='2025-09-26T18:03:06.8975608+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:33:17.192 +05:30 [INF] Executed DbCommand (203ms) [Parameters=[@__now_0='2025-09-26T18:03:16.9876820+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:33:27.305 +05:30 [INF] Executed DbCommand (103ms) [Parameters=[@__now_0='2025-09-26T18:03:27.2008860+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:33:37.437 +05:30 [INF] Executed DbCommand (114ms) [Parameters=[@__now_0='2025-09-26T18:03:37.3218747+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:33:57.613 +05:30 [INF] Executed DbCommand (10,163ms) [Parameters=[@__now_0='2025-09-26T18:03:47.4488616+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:34:07.702 +05:30 [INF] Executed DbCommand (83ms) [Parameters=[@__now_0='2025-09-26T18:04:07.6184173+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:34:17.801 +05:30 [INF] Executed DbCommand (87ms) [Parameters=[@__now_0='2025-09-26T18:04:17.7125955+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:34:35.968 +05:30 [INF] Executed DbCommand (92ms) [Parameters=[@__now_0='2025-09-26T18:04:27.8159120+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:34:46.055 +05:30 [INF] Executed DbCommand (89ms) [Parameters=[@__now_0='2025-09-26T18:04:45.9647482+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:34:56.387 +05:30 [INF] Executed DbCommand (318ms) [Parameters=[@__now_0='2025-09-26T18:04:56.0676221+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:35:06.556 +05:30 [INF] Executed DbCommand (159ms) [Parameters=[@__now_0='2025-09-26T18:05:06.3958291+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:35:16.695 +05:30 [INF] Executed DbCommand (126ms) [Parameters=[@__now_0='2025-09-26T18:05:16.5689269+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:35:26.831 +05:30 [INF] Executed DbCommand (124ms) [Parameters=[@__now_0='2025-09-26T18:05:26.7062844+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:35:36.970 +05:30 [INF] Executed DbCommand (121ms) [Parameters=[@__now_0='2025-09-26T18:05:36.8490919+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:35:47.068 +05:30 [INF] Executed DbCommand (83ms) [Parameters=[@__now_0='2025-09-26T18:05:46.9837436+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:35:57.220 +05:30 [INF] Executed DbCommand (133ms) [Parameters=[@__now_0='2025-09-26T18:05:57.0865125+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:36:07.383 +05:30 [INF] Executed DbCommand (150ms) [Parameters=[@__now_0='2025-09-26T18:06:07.2327634+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:36:17.931 +05:30 [INF] Executed DbCommand (535ms) [Parameters=[@__now_0='2025-09-26T18:06:17.3959803+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:36:28.069 +05:30 [INF] Executed DbCommand (122ms) [Parameters=[@__now_0='2025-09-26T18:06:27.9461657+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:36:38.206 +05:30 [INF] Executed DbCommand (124ms) [Parameters=[@__now_0='2025-09-26T18:06:38.0813485+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:36:48.446 +05:30 [INF] Executed DbCommand (218ms) [Parameters=[@__now_0='2025-09-26T18:06:48.2275696+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:36:58.687 +05:30 [INF] Executed DbCommand (224ms) [Parameters=[@__now_0='2025-09-26T18:06:58.4622809+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:37:08.788 +05:30 [INF] Executed DbCommand (92ms) [Parameters=[@__now_0='2025-09-26T18:07:08.6955853+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:37:18.961 +05:30 [INF] Executed DbCommand (178ms) [Parameters=[@__now_0='2025-09-26T18:07:18.7822009+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:37:29.202 +05:30 [INF] Executed DbCommand (239ms) [Parameters=[@__now_0='2025-09-26T18:07:28.9619555+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:37:39.339 +05:30 [INF] Executed DbCommand (128ms) [Parameters=[@__now_0='2025-09-26T18:07:39.2102221+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:37:49.576 +05:30 [INF] Executed DbCommand (221ms) [Parameters=[@__now_0='2025-09-26T18:07:49.3542356+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:37:59.793 +05:30 [INF] Executed DbCommand (211ms) [Parameters=[@__now_0='2025-09-26T18:07:59.5819810+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:38:09.869 +05:30 [INF] Executed DbCommand (69ms) [Parameters=[@__now_0='2025-09-26T18:08:09.7989062+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:38:20.199 +05:30 [INF] Executed DbCommand (317ms) [Parameters=[@__now_0='2025-09-26T18:08:19.8811940+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:38:30.338 +05:30 [INF] Executed DbCommand (135ms) [Parameters=[@__now_0='2025-09-26T18:08:30.2032865+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:38:40.473 +05:30 [INF] Executed DbCommand (131ms) [Parameters=[@__now_0='2025-09-26T18:08:40.3408801+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:38:50.612 +05:30 [INF] Executed DbCommand (133ms) [Parameters=[@__now_0='2025-09-26T18:08:50.4782371+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:39:00.756 +05:30 [INF] Executed DbCommand (138ms) [Parameters=[@__now_0='2025-09-26T18:09:00.6171669+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:39:10.886 +05:30 [INF] Executed DbCommand (118ms) [Parameters=[@__now_0='2025-09-26T18:09:10.7671293+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:39:21.025 +05:30 [INF] Executed DbCommand (124ms) [Parameters=[@__now_0='2025-09-26T18:09:20.9006688+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:39:31.161 +05:30 [INF] Executed DbCommand (128ms) [Parameters=[@__now_0='2025-09-26T18:09:31.0321916+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:39:49.491 +05:30 [INF] Executed DbCommand (102ms) [Parameters=[@__now_0='2025-09-26T18:09:41.1677920+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:39:59.630 +05:30 [INF] Executed DbCommand (117ms) [Parameters=[@__now_0='2025-09-26T18:09:59.5127874+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:40:09.767 +05:30 [INF] Executed DbCommand (123ms) [Parameters=[@__now_0='2025-09-26T18:10:09.6433087+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:40:19.906 +05:30 [INF] Executed DbCommand (132ms) [Parameters=[@__now_0='2025-09-26T18:10:19.7732125+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:40:30.017 +05:30 [INF] Executed DbCommand (99ms) [Parameters=[@__now_0='2025-09-26T18:10:29.9172529+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:40:40.181 +05:30 [INF] Executed DbCommand (151ms) [Parameters=[@__now_0='2025-09-26T18:10:40.0288028+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:40:50.315 +05:30 [INF] Executed DbCommand (122ms) [Parameters=[@__now_0='2025-09-26T18:10:50.1923834+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:41:00.394 +05:30 [INF] Executed DbCommand (77ms) [Parameters=[@__now_0='2025-09-26T18:11:00.3168320+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:41:10.594 +05:30 [INF] Executed DbCommand (185ms) [Parameters=[@__now_0='2025-09-26T18:11:10.4079496+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:41:20.731 +05:30 [INF] Executed DbCommand (129ms) [Parameters=[@__now_0='2025-09-26T18:11:20.6019440+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:41:30.870 +05:30 [INF] Executed DbCommand (130ms) [Parameters=[@__now_0='2025-09-26T18:11:30.7399496+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:41:41.110 +05:30 [INF] Executed DbCommand (221ms) [Parameters=[@__now_0='2025-09-26T18:11:40.8876055+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:41:51.201 +05:30 [INF] Executed DbCommand (76ms) [Parameters=[@__now_0='2025-09-26T18:11:51.1245277+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:42:01.302 +05:30 [INF] Executed DbCommand (95ms) [Parameters=[@__now_0='2025-09-26T18:12:01.2064340+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:42:11.401 +05:30 [INF] Executed DbCommand (89ms) [Parameters=[@__now_0='2025-09-26T18:12:11.3109401+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:42:21.503 +05:30 [INF] Executed DbCommand (86ms) [Parameters=[@__now_0='2025-09-26T18:12:21.4169798+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:42:31.695 +05:30 [INF] Executed DbCommand (189ms) [Parameters=[@__now_0='2025-09-26T18:12:31.5066198+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:42:41.936 +05:30 [INF] Executed DbCommand (222ms) [Parameters=[@__now_0='2025-09-26T18:12:41.7142483+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:42:52.073 +05:30 [INF] Executed DbCommand (138ms) [Parameters=[@__now_0='2025-09-26T18:12:51.9350720+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:43:02.183 +05:30 [INF] Executed DbCommand (92ms) [Parameters=[@__now_0='2025-09-26T18:13:02.0907961+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:43:12.349 +05:30 [INF] Executed DbCommand (161ms) [Parameters=[@__now_0='2025-09-26T18:13:12.1876904+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:43:22.487 +05:30 [INF] Executed DbCommand (129ms) [Parameters=[@__now_0='2025-09-26T18:13:22.3577430+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:43:32.590 +05:30 [INF] Executed DbCommand (96ms) [Parameters=[@__now_0='2025-09-26T18:13:32.4927038+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:43:42.763 +05:30 [INF] Executed DbCommand (156ms) [Parameters=[@__now_0='2025-09-26T18:13:42.6058794+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:43:52.901 +05:30 [INF] Executed DbCommand (122ms) [Parameters=[@__now_0='2025-09-26T18:13:52.7787148+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:44:02.994 +05:30 [INF] Executed DbCommand (75ms) [Parameters=[@__now_0='2025-09-26T18:14:02.9186796+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:44:13.175 +05:30 [INF] Executed DbCommand (173ms) [Parameters=[@__now_0='2025-09-26T18:14:13.0019550+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:44:23.314 +05:30 [INF] Executed DbCommand (122ms) [Parameters=[@__now_0='2025-09-26T18:14:23.1907135+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:44:33.413 +05:30 [INF] Executed DbCommand (83ms) [Parameters=[@__now_0='2025-09-26T18:14:33.3301351+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-09-26 23:44:43.590 +05:30 [INF] Executed DbCommand (169ms) [Parameters=[@__now_0='2025-09-26T18:14:43.4201530+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
