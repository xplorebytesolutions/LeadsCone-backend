2025-10-01 00:00:06.614 +05:30 [INF] Executed DbCommand (84ms) [Parameters=[@__now_0='2025-09-30T18:29:58.3886040+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:00:16.742 +05:30 [INF] Executed DbCommand (110ms) [Parameters=[@__now_0='2025-09-30T18:30:16.6317754+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:00:26.982 +05:30 [INF] Executed DbCommand (218ms) [Parameters=[@__now_0='2025-09-30T18:30:26.7633964+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:00:37.357 +05:30 [INF] Executed DbCommand (368ms) [Parameters=[@__now_0='2025-09-30T18:30:36.9883121+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:00:47.463 +05:30 [INF] Executed DbCommand (95ms) [Parameters=[@__now_0='2025-09-30T18:30:47.3673586+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:00:57.702 +05:30 [INF] Executed DbCommand (231ms) [Parameters=[@__now_0='2025-09-30T18:30:57.4710160+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:01:07.841 +05:30 [INF] Executed DbCommand (127ms) [Parameters=[@__now_0='2025-09-30T18:31:07.7129803+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:01:17.977 +05:30 [INF] Executed DbCommand (121ms) [Parameters=[@__now_0='2025-09-30T18:31:17.8555038+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:01:28.116 +05:30 [INF] Executed DbCommand (133ms) [Parameters=[@__now_0='2025-09-30T18:31:27.9822977+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:01:38.254 +05:30 [INF] Executed DbCommand (128ms) [Parameters=[@__now_0='2025-09-30T18:31:38.1258173+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:01:48.375 +05:30 [INF] Executed DbCommand (102ms) [Parameters=[@__now_0='2025-09-30T18:31:48.2725394+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:01:58.528 +05:30 [INF] Executed DbCommand (136ms) [Parameters=[@__now_0='2025-09-30T18:31:58.3920048+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:02:08.616 +05:30 [INF] Executed DbCommand (73ms) [Parameters=[@__now_0='2025-09-30T18:32:08.5417277+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:02:18.730 +05:30 [INF] Executed DbCommand (107ms) [Parameters=[@__now_0='2025-09-30T18:32:18.6222593+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:02:29.336 +05:30 [INF] Executed DbCommand (580ms) [Parameters=[@__now_0='2025-09-30T18:32:28.7494910+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:02:39.415 +05:30 [INF] Executed DbCommand (71ms) [Parameters=[@__now_0='2025-09-30T18:32:39.3438699+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:02:49.494 +05:30 [INF] Executed DbCommand (69ms) [Parameters=[@__now_0='2025-09-30T18:32:49.4245411+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:03:00.982 +05:30 [INF] Executed DbCommand (1,470ms) [Parameters=[@__now_0='2025-09-30T18:32:59.5120786+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:03:11.084 +05:30 [INF] Executed DbCommand (83ms) [Parameters=[@__now_0='2025-09-30T18:33:11.0006759+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:03:21.167 +05:30 [INF] Executed DbCommand (74ms) [Parameters=[@__now_0='2025-09-30T18:33:21.0925441+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:03:31.253 +05:30 [INF] Executed DbCommand (80ms) [Parameters=[@__now_0='2025-09-30T18:33:31.1722931+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:03:41.356 +05:30 [INF] Executed DbCommand (87ms) [Parameters=[@__now_0='2025-09-30T18:33:41.2677805+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:03:51.469 +05:30 [INF] Executed DbCommand (102ms) [Parameters=[@__now_0='2025-09-30T18:33:51.3658789+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:04:01.630 +05:30 [INF] Executed DbCommand (136ms) [Parameters=[@__now_0='2025-09-30T18:34:01.4937988+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:04:18.026 +05:30 [INF] Executed DbCommand (6,356ms) [Parameters=[@__now_0='2025-09-30T18:34:11.6493482+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:04:28.938 +05:30 [INF] Executed DbCommand (845ms) [Parameters=[@__now_0='2025-09-30T18:34:28.0737608+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:04:39.182 +05:30 [INF] Executed DbCommand (224ms) [Parameters=[@__now_0='2025-09-30T18:34:38.9566543+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:04:49.438 +05:30 [INF] Executed DbCommand (229ms) [Parameters=[@__now_0='2025-09-30T18:34:49.2084736+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:04:59.577 +05:30 [INF] Executed DbCommand (128ms) [Parameters=[@__now_0='2025-09-30T18:34:59.4484136+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:05:19.339 +05:30 [INF] Executed DbCommand (632ms) [Parameters=[@__now_0='2025-09-30T18:35:09.5959794+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:05:30.291 +05:30 [INF] Executed DbCommand (938ms) [Parameters=[@__now_0='2025-09-30T18:35:29.3533476+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:05:40.460 +05:30 [INF] Executed DbCommand (158ms) [Parameters=[@__now_0='2025-09-30T18:35:40.3021928+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:05:50.626 +05:30 [INF] Executed DbCommand (162ms) [Parameters=[@__now_0='2025-09-30T18:35:50.4641690+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:06:00.720 +05:30 [INF] Executed DbCommand (78ms) [Parameters=[@__now_0='2025-09-30T18:36:00.6414524+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:06:10.845 +05:30 [INF] Executed DbCommand (108ms) [Parameters=[@__now_0='2025-09-30T18:36:10.7357937+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:06:21.027 +05:30 [INF] Executed DbCommand (168ms) [Parameters=[@__now_0='2025-09-30T18:36:20.8595497+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:06:31.123 +05:30 [INF] Executed DbCommand (98ms) [Parameters=[@__now_0='2025-09-30T18:36:31.0252611+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:06:41.362 +05:30 [INF] Executed DbCommand (219ms) [Parameters=[@__now_0='2025-09-30T18:36:41.1423161+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:06:51.511 +05:30 [INF] Executed DbCommand (140ms) [Parameters=[@__now_0='2025-09-30T18:36:51.3702911+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:07:02.434 +05:30 [INF] Executed DbCommand (915ms) [Parameters=[@__now_0='2025-09-30T18:37:01.5188531+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:07:12.532 +05:30 [INF] Executed DbCommand (73ms) [Parameters=[@__now_0='2025-09-30T18:37:12.4586985+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:07:22.662 +05:30 [INF] Executed DbCommand (117ms) [Parameters=[@__now_0='2025-09-30T18:37:22.5452858+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:07:32.761 +05:30 [INF] Executed DbCommand (90ms) [Parameters=[@__now_0='2025-09-30T18:37:32.6704204+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:07:42.907 +05:30 [INF] Executed DbCommand (136ms) [Parameters=[@__now_0='2025-09-30T18:37:42.7706607+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 00:07:53.016 +05:30 [INF] Executed DbCommand (88ms) [Parameters=[@__now_0='2025-09-30T18:37:52.9270449+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 10:20:17.300 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-01 10:20:17.343 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-10-01 10:20:17.360 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-10-01 10:20:18.479 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 10:20:19.144 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-10-01 10:20:19.164 +05:30 [INF] ClickLogWorker started
2025-10-01 10:20:19.407 +05:30 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-10-01 10:20:19.436 +05:30 [INF] Now listening on: http://localhost:7113
2025-10-01 10:20:19.438 +05:30 [INF] Now listening on: http://localhost:5295
2025-10-01 10:20:19.440 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-01 10:20:19.441 +05:30 [INF] Hosting environment: Development
2025-10-01 10:20:19.443 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-10-01 10:20:19.443 +05:30 [INF] Executed DbCommand (83ms) [Parameters=[@__cutoff_0='2025-09-24T04:50:17.5100263Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-10-01 10:20:20.223 +05:30 [INF] ClickLogWorker stopped
2025-10-01 10:20:21.210 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-10-01 10:20:21.470 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 269.9838ms
2025-10-01 10:20:21.624 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-10-01 10:20:21.624 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-10-01 10:20:21.636 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 11.9822ms
2025-10-01 10:20:21.687 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 63.408ms
2025-10-01 10:20:21.797 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-10-01 10:20:22.139 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 341.6242ms
2025-10-01 10:20:24.256 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__now_0='2025-10-01T04:50:24.1947226+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 10:20:46.465 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 10:21:12.405 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 10:21:13.031 +05:30 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 10:21:13.078 +05:30 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 10:21:13.163 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 10:21:13.232 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 10:21:13.233 +05:30 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 10:21:13.242 +05:30 [INF] Applying migration '20251001045047_AddCustomerWebhookConfig'.
2025-10-01 10:21:13.486 +05:30 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "CustomerWebhookConfigs" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "Url" character varying(1024) NOT NULL,
    "BearerToken" character varying(2048),
    "IsActive" boolean NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone,
    CONSTRAINT "PK_CustomerWebhookConfigs" PRIMARY KEY ("Id")
);
2025-10-01 10:21:13.496 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CustomerWebhookConfigs_BusinessId_IsActive" ON "CustomerWebhookConfigs" ("BusinessId", "IsActive");
2025-10-01 10:21:13.498 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20251001045047_AddCustomerWebhookConfig', '8.0.18');
2025-10-01 11:29:33.685 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-01 11:29:33.758 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-10-01 11:29:33.784 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-10-01 11:29:35.307 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 11:29:36.265 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-10-01 11:29:36.293 +05:30 [INF] ClickLogWorker started
2025-10-01 11:29:36.569 +05:30 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-10-01 11:29:36.594 +05:30 [INF] Executed DbCommand (64ms) [Parameters=[@__cutoff_0='2025-09-24T05:59:33.9873622Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-10-01 11:29:36.692 +05:30 [INF] Now listening on: http://localhost:7113
2025-10-01 11:29:36.693 +05:30 [INF] Now listening on: http://localhost:5295
2025-10-01 11:29:36.695 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-01 11:29:36.696 +05:30 [INF] Hosting environment: Development
2025-10-01 11:29:36.697 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-10-01 11:29:37.371 +05:30 [INF] ClickLogWorker stopped
2025-10-01 11:29:37.542 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-10-01 11:29:37.796 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 266.7941ms
2025-10-01 11:29:37.822 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-10-01 11:29:37.830 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 9.1485ms
2025-10-01 11:29:37.913 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-10-01 11:29:37.955 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 42.0227ms
2025-10-01 11:29:38.151 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-10-01 11:29:38.555 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 403.5297ms
2025-10-01 11:29:41.447 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@__now_0='2025-10-01T05:59:41.3145451+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:29:46.369 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT w."BusinessId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-10-01 11:29:46.428 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='8390da76-10de-4d76-80f2-68b68f4e2b82'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-10-01 11:29:46.464 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__businessId_0='8390da76-10de-4d76-80f2-68b68f4e2b82'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-10-01 11:29:46.508 +05:30 [INF] Start processing HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-10-01 11:29:46.512 +05:30 [INF] Sending HTTP request GET https://partnersv1.pinbot.ai/v3/251114021418599/message_templates?limit=100
2025-10-01 11:29:48.471 +05:30 [INF] Received HTTP response headers after 1951.5132ms - 200
2025-10-01 11:29:48.474 +05:30 [INF] End processing HTTP request after 1970.9795ms - 200
2025-10-01 11:29:48.879 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='8390da76-10de-4d76-80f2-68b68f4e2b82', @__providerKey_1='pinnacle'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__providerKey_1
2025-10-01 11:29:49.177 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[@p1='005f7851-ae6e-4fa9-8f54-beb8cd92276b', @p0='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p3='1821d66c-fb26-4c9c-ae9c-637698927546', @p2='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p5='1a2910fa-84aa-474a-8174-b799c98fbff6', @p4='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p7='1c000849-2790-447f-88a4-f5a19dc96926', @p6='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p9='1d5e446c-321a-4967-af0c-cd0e8d0268e5', @p8='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p11='1df5ec8b-e36d-438d-9bec-e8d4698df64a', @p10='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p13='347871a0-b1f9-49c7-a494-8df146b1a4e6', @p12='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p15='3bbfd722-61cf-445c-9d5f-2a7c672ad813', @p14='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p17='3cef57c5-0397-4ce6-a864-afe4109a7b36', @p16='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p19='40070956-4f23-40d3-a4a1-e23dd483ba02', @p18='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p21='4678725a-14c2-4a7d-9c47-eb5c238a6c7e', @p20='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p23='46cdca2c-1e94-4d83-8e36-bfcec81e2b7e', @p22='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p25='4f385d21-c035-435e-b352-d75b1e276b46', @p24='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p27='5110a9d7-ce2a-491c-98b8-f2c7d84be02b', @p26='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p29='5a12c8cf-76e4-4dc1-a281-77bbb2dbac73', @p28='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p31='6154a579-fab8-4eb9-a1f7-b0f5342aea7b', @p30='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p33='622ed49c-d677-4c6f-a2ab-6cb6ae3d49ff', @p32='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p35='643fd567-51c8-4fc8-9b32-36142aa42264', @p34='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p37='6cb81f1b-a149-48a4-a917-92f7d4ca1233', @p36='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p39='6e18fc61-5c74-4d0c-b2f6-81b8bdec772a', @p38='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p41='741fcb87-6fcd-42f1-bc8f-1a6f821590fa', @p40='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p43='78747243-4856-4560-ab7e-de8c63ae9753', @p42='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p47='9dc1ecc0-27e8-400a-8c2b-3705a332d516', @p44='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p45='{"name":"testing_1","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/434020495_817759347145442_7459011205631203997_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=TPeLgqGOc_QQ7kNvwG8ZnAA&_nc_oc=Adlsb8Xopu1DHmzRWaCDR-QTcJywo8gIZ08UpVskHIiyJjRS-VsmECNLvKKD_4sTTrw&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=Fc13JJrAFf8S3d5qY6x8rw&oh=01_Q5Aa2gFMgBONMioYSNepeZ0L9HZ1jNaK9k3lbs0ORlQ-o-4cdw&oe=69041BD9"]}},{"type":"BODY","text":"Dear User,\r\nTesting"}],"language":"en","status":"APPROVED","category":"MARKETING","id":"817759340478776"}' (Nullable = false), @p46='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p49='a837c77e-bcd3-4178-b7b9-032bbf63cc51', @p48='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p53='a9b97f70-ab05-492c-975a-7b6ee5eb0e6d', @p50='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p51='{"name":"tempalte_v1","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/389521422_865429908351181_4208520018935703846_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=XJ2AtTaAFy8Q7kNvwH0RC7u&_nc_oc=Admvvvv62QCd_hnqZLK38byKxZdZbETcrwkLpS77teOam7OVji4Re8G2qAwdPE2Btgo&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=Fc13JJrAFf8S3d5qY6x8rw&oh=01_Q5Aa2gHIK0VTi0vpt5j81y9d_joMUr4r463JrtFgjhwGd9EdqQ&oe=69042F3D"]}},{"type":"BODY","text":"Dear {{1}},\r\nThe Sale is live Now!!!!!!","example":{"body_text":[["name"]]}}],"language":"en","status":"APPROVED","category":"MARKETING","id":"865429905017848"}' (Nullable = false), @p52='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p55='b9d39738-1b3e-4cd5-824f-20d90829bc27', @p54='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p59='c2ab8631-3dd6-42ce-9252-88b97a6d5a32', @p56='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p57='{"name":"video_template","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"VIDEO","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/516018879_2829095420619582_8191240975323859564_n.mp4?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=LQmDN_EQ3iAQ7kNvwFcI6RM&_nc_oc=Adncv6MTgzATdeu1YC3An9uJ2aCqa3F37ZmYcjDtcRmrv2V1jSBI33X7laFqdnCSEzw&_nc_zt=28&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=Fc13JJrAFf8S3d5qY6x8rw&oh=01_Q5Aa2gF0JMyYdSlC7FDiLo1qij5YSdQUMMkc4_zZyFyWNUAOqA&oe=6904239B"]}},{"type":"BODY","text":"Hello {{1}}👋\nAapka order successfully deliver ho chuka hai. 🚚✨\nKya aapne Nirvasa ka Vaji Amrit Vati lena start kar diya hai? 💊\nNeeche diye gaye options me se select karke bataye 👇","example":{"body_text":[["No"]]}},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Yes"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","id":"2829095417286249"}' (Nullable = false), @p58='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p61='cc1fbb25-b689-46af-b9ab-dd079b69796b', @p60='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p63='d73052f7-cf7c-41c9-80fd-859b50a8b296', @p62='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p65='d9a658f1-aa9f-402c-8cd8-3e0a6f449c59', @p64='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p67='dd977d94-5945-47fe-9fb2-bd9677b6bacd', @p66='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p69='e0211c6f-8eb7-4292-b62b-813528e7ed8d', @p68='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p71='e4f5ff05-2904-4dac-9d81-e167456a9072', @p70='2025-10-01T05:59:46.4435249Z' (DbType = DateTime), @p73='f1bc02e3-a7a6-44e0-8c00-a2db666f7777', @p72='2025-10-01T05:59:46.4435249Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p0
WHERE "Id" = @p1;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p2
WHERE "Id" = @p3;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p4
WHERE "Id" = @p5;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p6
WHERE "Id" = @p7;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p8
WHERE "Id" = @p9;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p10
WHERE "Id" = @p11;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p12
WHERE "Id" = @p13;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p14
WHERE "Id" = @p15;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p16
WHERE "Id" = @p17;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p18
WHERE "Id" = @p19;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p20
WHERE "Id" = @p21;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p22
WHERE "Id" = @p23;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p24
WHERE "Id" = @p25;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p26
WHERE "Id" = @p27;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p28
WHERE "Id" = @p29;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p30
WHERE "Id" = @p31;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p32
WHERE "Id" = @p33;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p34
WHERE "Id" = @p35;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p36
WHERE "Id" = @p37;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p38
WHERE "Id" = @p39;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p40
WHERE "Id" = @p41;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p42
WHERE "Id" = @p43;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p44, "RawJson" = @p45, "UpdatedAt" = @p46
WHERE "Id" = @p47;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p48
WHERE "Id" = @p49;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p50, "RawJson" = @p51, "UpdatedAt" = @p52
WHERE "Id" = @p53;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p54
WHERE "Id" = @p55;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p56, "RawJson" = @p57, "UpdatedAt" = @p58
WHERE "Id" = @p59;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p60
WHERE "Id" = @p61;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p62
WHERE "Id" = @p63;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p64
WHERE "Id" = @p65;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p66
WHERE "Id" = @p67;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p68
WHERE "Id" = @p69;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p70
WHERE "Id" = @p71;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p72
WHERE "Id" = @p73;
2025-10-01 11:29:49.209 +05:30 [INF] TemplateSyncWorker: biz="8390da76-10de-4d76-80f2-68b68f4e2b82" added=0 updated=3 skipped=31 syncedAt="2025-10-01T05:59:46.4435249Z"
2025-10-01 11:29:49.223 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-10-01 11:29:49.230 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-10-01 11:29:49.246 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-10-01 11:29:49.248 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-10-01 11:29:50.112 +05:30 [INF] Received HTTP response headers after 862.1167ms - 401
2025-10-01 11:29:50.114 +05:30 [INF] End processing HTTP request after 868.1121ms - 401
2025-10-01 11:29:50.119 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerKey_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__providerKey_1
2025-10-01 11:29:50.126 +05:30 [INF] TemplateSyncWorker: biz="9841bcab-ca71-439f-8691-d85ada887b01" added=0 updated=0 skipped=0 syncedAt="2025-10-01T05:59:49.2264115Z"
2025-10-01 11:29:50.129 +05:30 [INF] TemplateSyncWorker: sweep finished in 3814 ms; processed=2; next run ~"2025-10-01T11:59:46.3147295Z"
2025-10-01 11:29:51.462 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T05:59:51.4574130+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:30:01.478 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:00:01.4755139+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:30:11.489 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:00:11.4859165+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:30:21.512 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:00:21.5085534+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:30:31.528 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:00:31.5253240+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:30:41.541 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:00:41.5376124+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:30:51.561 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:00:51.5576828+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:31:01.575 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:01:01.5731110+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:31:11.587 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:01:11.5844865+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:31:21.599 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:01:21.5963548+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:31:31.614 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:01:31.6108863+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:31:41.626 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:01:41.6231731+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:31:51.639 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:01:51.6348187+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:32:01.656 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:02:01.6525569+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:32:10.069 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/custom/test-webhook?businessId=9841bcab-ca71-439f-8691-d85ada887b01 - null 0
2025-10-01 11:32:10.077 +05:30 [WRN] Failed to determine the https port for redirect.
2025-10-01 11:32:10.185 +05:30 [INF] CORS policy execution successful.
2025-10-01 11:32:10.281 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.TestWebhook (xbytechat.api)'
2025-10-01 11:32:10.311 +05:30 [INF] Route matched with {action = "TestWebhook", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestWebhook(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 11:32:10.334 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.TestWebhook (xbytechat.api) in 15.6287ms
2025-10-01 11:32:10.338 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.TestWebhook (xbytechat.api)'
2025-10-01 11:32:10.383 +05:30 [ERR] ❌ An unhandled exception occurred
System.InvalidOperationException: Unable to resolve service for type 'xbytechat.api.Features.CustomeApi.Services.CtaJourneyPublisher' while attempting to activate 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method395(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-10-01 11:32:10.471 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/custom/test-webhook?businessId=9841bcab-ca71-439f-8691-d85ada887b01 - 500 null application/json; charset=utf-8 401.9833ms
2025-10-01 11:32:11.661 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:02:11.6595617+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:32:21.665 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:02:21.6627869+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:32:31.681 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:02:31.6779586+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:32:41.699 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:02:41.6957075+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:32:51.715 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:02:51.7124417+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:33:01.723 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:03:01.7204542+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:33:11.733 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:03:11.7307999+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:33:21.740 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:03:21.7374679+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:33:31.755 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:03:31.7519222+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:33:41.762 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:03:41.7604209+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:33:51.770 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:03:51.7680214+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:34:01.783 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__now_0='2025-10-01T06:04:01.7767953+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:34:11.791 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:04:11.7879867+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:34:21.812 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:04:21.8091772+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:34:31.841 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:04:31.8388187+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:34:41.960 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T06:04:41.8643359+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:34:51.977 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:04:51.9742363+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:35:01.983 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T06:05:01.9801493+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:35:12.007 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:05:12.0050564+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:35:22.023 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:05:22.0202649+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:35:32.039 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:05:32.0367253+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:35:42.055 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:05:42.0524515+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:35:52.067 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:05:52.0642361+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:36:02.083 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:06:02.0805292+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:36:12.093 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:06:12.0908503+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:36:22.112 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:06:22.1106752+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:36:32.118 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:06:32.1150483+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:36:42.137 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:06:42.1354365+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:36:52.153 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T06:06:52.1489082+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:37:02.160 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:07:02.1573235+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:37:12.179 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:07:12.1771105+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:37:22.194 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:07:22.1925395+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:37:32.211 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T06:07:32.2067636+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:37:42.223 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:07:42.2205373+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:37:52.231 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:07:52.2282737+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:38:02.243 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T06:08:02.2394466+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:38:12.250 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:08:12.2474448+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:38:22.259 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:08:22.2550595+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:38:32.274 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:08:32.2712239+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:38:42.296 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__now_0='2025-10-01T06:08:42.2909439+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:38:52.325 +05:30 [INF] Executed DbCommand (10ms) [Parameters=[@__now_0='2025-10-01T06:08:52.3057403+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:39:02.330 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:09:02.3268077+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:39:12.349 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:09:12.3461287+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:39:22.358 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:09:22.3552775+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:39:32.367 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:09:32.3649744+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:39:42.477 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__now_0='2025-10-01T06:09:42.3835396+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:39:52.485 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:09:52.4832122+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:40:02.494 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:10:02.4919807+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:40:12.500 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:10:12.4981868+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:40:22.516 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:10:22.5129540+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:40:32.527 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:10:32.5247432+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:40:42.530 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:10:42.5276204+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:40:52.532 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:10:52.5301851+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:41:02.541 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:11:02.5387925+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:41:12.558 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:11:12.5560162+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:41:22.571 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:11:22.5688907+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:41:32.579 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:11:32.5764283+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:41:42.595 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:11:42.5930867+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:41:52.615 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:11:52.6130163+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:42:02.629 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:12:02.6266560+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:42:12.638 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:12:12.6363040+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:42:22.650 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:12:22.6481720+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:42:32.655 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T06:12:32.6522721+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:42:42.665 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:12:42.6628587+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:42:52.668 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:12:52.6665163+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:43:02.681 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:13:02.6785816+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:43:12.700 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:13:12.6969401+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:43:22.712 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:13:22.7100541+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:43:32.732 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:13:32.7304235+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:43:42.743 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:13:42.7408509+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:43:52.755 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:13:52.7528171+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:44:02.761 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:14:02.7590797+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:44:12.776 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:14:12.7733159+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:44:22.784 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:14:22.7817455+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:44:32.810 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:14:32.8078834+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:44:42.918 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__now_0='2025-10-01T06:14:42.8272911+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:44:52.926 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:14:52.9234534+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:45:02.937 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:15:02.9356364+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:45:12.948 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:15:12.9455027+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:45:22.954 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:15:22.9515554+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:45:32.982 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:15:32.9798732+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:45:42.989 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:15:42.9869945+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:45:53.006 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:15:53.0039500+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:46:03.008 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:16:03.0055349+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:46:13.014 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:16:13.0115750+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:46:23.019 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:16:23.0175441+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:46:33.030 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:16:33.0249131+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:46:43.041 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:16:43.0387567+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:46:53.054 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:16:53.0517390+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:47:03.064 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:17:03.0618813+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:47:13.082 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:17:13.0794224+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:47:23.096 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:17:23.0937313+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:47:33.104 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:17:33.1023891+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:47:43.115 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:17:43.1097456+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:47:53.133 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:17:53.1308531+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:48:03.141 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:18:03.1384531+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:48:13.148 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:18:13.1451090+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:48:23.154 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:18:23.1513629+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:48:33.163 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:18:33.1602187+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:48:43.176 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:18:43.1734457+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:48:53.187 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:18:53.1846757+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:49:03.200 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:19:03.1979677+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:49:13.228 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:19:13.2255560+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:49:23.236 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:19:23.2339503+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:49:33.255 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:19:33.2530162+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:49:43.368 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T06:19:43.2716733+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:49:53.376 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:19:53.3733275+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:50:03.380 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:20:03.3781028+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:50:13.392 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:20:13.3885962+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:50:23.397 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:20:23.3944776+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:50:33.408 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:20:33.4053945+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:50:43.413 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:20:43.4112275+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:50:53.421 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:20:53.4179260+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:51:03.440 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:21:03.4377517+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:51:13.449 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:21:13.4471230+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:51:23.467 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:21:23.4639283+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:51:33.474 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:21:33.4718290+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:51:43.494 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:21:43.4916457+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:56:35.762 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-01 11:56:35.807 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-10-01 11:56:35.824 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-10-01 11:56:36.744 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 11:56:37.401 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-10-01 11:56:37.421 +05:30 [INF] ClickLogWorker started
2025-10-01 11:56:37.598 +05:30 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-10-01 11:56:37.611 +05:30 [INF] Now listening on: http://localhost:7113
2025-10-01 11:56:37.612 +05:30 [INF] Now listening on: http://localhost:5295
2025-10-01 11:56:37.614 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-01 11:56:37.615 +05:30 [INF] Hosting environment: Development
2025-10-01 11:56:37.616 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-10-01 11:56:37.619 +05:30 [INF] Executed DbCommand (77ms) [Parameters=[@__cutoff_0='2025-09-24T06:26:35.9290756Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-10-01 11:56:38.477 +05:30 [INF] ClickLogWorker stopped
2025-10-01 11:56:39.378 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-10-01 11:56:39.619 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 258.4073ms
2025-10-01 11:56:39.645 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-10-01 11:56:39.657 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 11.2203ms
2025-10-01 11:56:39.753 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-10-01 11:56:39.808 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 54.8824ms
2025-10-01 11:56:40.054 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-10-01 11:56:40.411 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 357.221ms
2025-10-01 11:56:42.543 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__now_0='2025-10-01T06:26:42.4427976+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:56:47.464 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT w."BusinessId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-10-01 11:56:47.512 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='8390da76-10de-4d76-80f2-68b68f4e2b82'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-10-01 11:56:47.540 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='8390da76-10de-4d76-80f2-68b68f4e2b82'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-10-01 11:56:47.546 +05:30 [INF] ⏭️ Skipping sync for "8390da76-10de-4d76-80f2-68b68f4e2b82"; TTL not expired.
2025-10-01 11:56:47.568 +05:30 [INF] TemplateSyncWorker: biz="8390da76-10de-4d76-80f2-68b68f4e2b82" added=0 updated=0 skipped=0 syncedAt="2025-10-01T05:59:46.4435240Z"
2025-10-01 11:56:47.582 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-10-01 11:56:47.588 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-10-01 11:56:47.618 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-10-01 11:56:47.622 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-10-01 11:56:48.672 +05:30 [INF] Received HTTP response headers after 1044.5804ms - 401
2025-10-01 11:56:48.677 +05:30 [INF] End processing HTTP request after 1062.882ms - 401
2025-10-01 11:56:48.694 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerKey_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__providerKey_1
2025-10-01 11:56:48.820 +05:30 [INF] TemplateSyncWorker: biz="9841bcab-ca71-439f-8691-d85ada887b01" added=0 updated=0 skipped=0 syncedAt="2025-10-01T06:26:47.5858117Z"
2025-10-01 11:56:48.824 +05:30 [INF] TemplateSyncWorker: sweep finished in 1387 ms; processed=2; next run ~"2025-10-01T12:26:47.4369019Z"
2025-10-01 11:56:52.556 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T06:26:52.5513168+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:57:02.571 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T06:27:02.5663224+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:57:12.583 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:27:12.5795021+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:57:23.049 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:27:23.0458708+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:57:33.069 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T06:27:33.0644352+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:57:43.077 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:27:43.0749453+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:57:53.086 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:27:53.0831246+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:58:02.836 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-10-01 11:58:02.845 +05:30 [WRN] Failed to determine the https port for redirect.
2025-10-01 11:58:02.921 +05:30 [INF] CORS policy execution successful.
2025-10-01 11:58:02.927 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 90.6984ms
2025-10-01 11:58:02.941 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 48
2025-10-01 11:58:02.955 +05:30 [INF] CORS policy execution successful.
2025-10-01 11:58:03.050 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-10-01 11:58:03.080 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-10-01 11:58:03.108 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:28:03.1049909+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:58:03.140 +05:30 [INF] 🔑 Login attempt for email: test@gmail.com
2025-10-01 11:58:03.273 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_Email_0='test@gmail.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-10-01 11:58:03.385 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@__user_BusinessId_Value_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-10-01 11:58:03.555 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@__userId_0='6376a399-238e-4a8c-b2b8-b66a69a74c0c'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-10-01 11:58:03.569 +05:30 [INF] ✅ Token generated for: test@gmail.com
2025-10-01 11:58:03.694 +05:30 [INF] 🔎 JWT includes plan_id: 5f9f5de1-a0b2-48ba-b03d-77b27345613f
2025-10-01 11:58:03.697 +05:30 [INF] ✅ Login successful for test@gmail.com, Role: business, PlanId: "5f9f5de1-a0b2-48ba-b03d-77b27345613f"
2025-10-01 11:58:03.707 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 11:58:03.724 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 634.8344ms
2025-10-01 11:58:03.727 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-10-01 11:58:03.736 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 794.5573ms
2025-10-01 11:58:03.743 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-10-01 11:58:03.751 +05:30 [INF] CORS policy execution successful.
2025-10-01 11:58:03.753 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 9.791ms
2025-10-01 11:58:03.759 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-10-01 11:58:03.764 +05:30 [INF] CORS policy execution successful.
2025-10-01 11:58:03.820 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-10-01 11:58:03.835 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-10-01 11:58:03.855 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-10-01 11:58:03.894 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-10-01 11:58:03.900 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType59`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 11:58:03.921 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 82.1731ms
2025-10-01 11:58:03.924 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-10-01 11:58:03.926 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 167.3515ms
2025-10-01 11:58:03.947 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-10-01 11:58:03.952 +05:30 [INF] CORS policy execution successful.
2025-10-01 11:58:03.954 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.4416ms
2025-10-01 11:58:03.968 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-10-01 11:58:03.972 +05:30 [INF] CORS policy execution successful.
2025-10-01 11:58:03.979 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-10-01 11:58:03.981 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-10-01 11:58:03.990 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-10-01 11:58:03.997 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType59`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 11:58:04.000 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 15.2174ms
2025-10-01 11:58:04.002 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-10-01 11:58:04.004 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 36.8704ms
2025-10-01 11:58:04.133 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-10-01 11:58:04.138 +05:30 [INF] CORS policy execution successful.
2025-10-01 11:58:04.142 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-10-01 11:58:04.151 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-10-01 11:58:04.171 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-10-01 11:58:04.178 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType59`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 11:58:04.182 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 28.8137ms
2025-10-01 11:58:04.185 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-10-01 11:58:04.188 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 55.2206ms
2025-10-01 11:58:09.804 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-10-01 11:58:09.806 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-10-01 11:58:09.812 +05:30 [INF] CORS policy execution successful.
2025-10-01 11:58:09.818 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 13.7562ms
2025-10-01 11:58:09.818 +05:30 [INF] CORS policy execution successful.
2025-10-01 11:58:09.824 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-10-01 11:58:09.825 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 204 null null 19.4762ms
2025-10-01 11:58:09.830 +05:30 [INF] CORS policy execution successful.
2025-10-01 11:58:09.834 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-10-01 11:58:09.838 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-10-01 11:58:09.840 +05:30 [INF] CORS policy execution successful.
2025-10-01 11:58:09.843 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-10-01 11:58:09.846 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-10-01 11:58:09.850 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-10-01 11:58:09.869 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-10-01 11:58:09.877 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='PINNACLE'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-10-01 11:58:09.883 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 11:58:09.903 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 49.7308ms
2025-10-01 11:58:09.905 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-10-01 11:58:09.907 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 200 null application/json; charset=utf-8 73.1342ms
2025-10-01 11:58:09.924 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-10-01 11:58:09.936 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 86.8006ms
2025-10-01 11:58:09.939 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-10-01 11:58:09.941 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 116.9037ms
2025-10-01 11:58:09.967 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-10-01 11:58:09.969 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-10-01 11:58:09.973 +05:30 [INF] CORS policy execution successful.
2025-10-01 11:58:09.977 +05:30 [INF] CORS policy execution successful.
2025-10-01 11:58:09.978 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 10.8191ms
2025-10-01 11:58:09.980 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 10.6147ms
2025-10-01 11:58:09.992 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-10-01 11:58:09.997 +05:30 [INF] CORS policy execution successful.
2025-10-01 11:58:09.999 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-10-01 11:58:10.000 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-10-01 11:58:10.010 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-10-01 11:58:10.015 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 11:58:10.017 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 13.881ms
2025-10-01 11:58:10.022 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-10-01 11:58:10.022 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-10-01 11:58:10.024 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 31.5161ms
2025-10-01 11:58:10.027 +05:30 [INF] CORS policy execution successful.
2025-10-01 11:58:10.032 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-10-01 11:58:10.034 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-10-01 11:58:10.043 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-10-01 11:58:10.048 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 11:58:10.051 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 13.2904ms
2025-10-01 11:58:10.054 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-10-01 11:58:10.056 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 34.1403ms
2025-10-01 11:58:13.119 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:28:13.1163517+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:58:23.137 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T06:28:23.1329806+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:58:28.289 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-10-01 11:58:28.294 +05:30 [INF] CORS policy execution successful.
2025-10-01 11:58:28.296 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 7.4043ms
2025-10-01 11:58:28.301 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - application/json 135
2025-10-01 11:58:28.305 +05:30 [INF] CORS policy execution successful.
2025-10-01 11:58:28.307 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api)'
2025-10-01 11:58:28.313 +05:30 [INF] Route matched with {action = "Upsert", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Upsert(System.String, UpsertRequest) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-10-01 11:58:28.375 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
LIMIT 1
2025-10-01 11:58:28.387 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerForChild_1='META_CLOUD', @__phoneNumberId_2='673199269218078'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__providerForChild_1 AND w."PhoneNumberId" = @__phoneNumberId_2
LIMIT 1
2025-10-01 11:58:28.435 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - application/json 135
2025-10-01 11:58:28.439 +05:30 [INF] CORS policy execution successful.
2025-10-01 11:58:28.441 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api)'
2025-10-01 11:58:28.443 +05:30 [INF] Route matched with {action = "Upsert", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Upsert(System.String, UpsertRequest) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-10-01 11:58:28.452 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
LIMIT 1
2025-10-01 11:58:28.460 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerForChild_1='META_CLOUD', @__phoneNumberId_2='673199269218078'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__providerForChild_1 AND w."PhoneNumberId" = @__phoneNumberId_2
LIMIT 1
2025-10-01 11:58:28.584 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@p0='90ec61f3-2812-482b-9c53-e4465446d1c7', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='2025-10-01T06:28:28.3500198Z' (DbType = DateTime), @p3='True', @p4='False', @p5='673199269218078' (Nullable = false), @p6='META_CLOUD' (Nullable = false), @p7='', @p8=NULL (DbType = DateTime), @p9='+1 555 162 2078' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WhatsAppPhoneNumbers" ("Id", "BusinessId", "CreatedAt", "IsActive", "IsDefault", "PhoneNumberId", "Provider", "SenderDisplayName", "UpdatedAt", "WhatsAppBusinessNumber")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-10-01 11:58:28.630 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber'.
2025-10-01 11:58:28.633 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api) in 317.1669ms
2025-10-01 11:58:28.635 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api)'
2025-10-01 11:58:28.638 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 337.0545ms
2025-10-01 11:58:28.643 +05:30 [ERR] Failed executing DbCommand (69ms) [Parameters=[@p0='c369f08d-39b8-4d56-afad-ad08818a89ff', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='2025-10-01T06:28:28.4468775Z' (DbType = DateTime), @p3='True', @p4='False', @p5='673199269218078' (Nullable = false), @p6='META_CLOUD' (Nullable = false), @p7='', @p8=NULL (DbType = DateTime), @p9='+1 555 162 2078' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "WhatsAppPhoneNumbers" ("Id", "BusinessId", "CreatedAt", "IsActive", "IsDefault", "PhoneNumberId", "Provider", "SenderDisplayName", "UpdatedAt", "WhatsAppBusinessNumber")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-10-01 11:58:28.727 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'xbytechat.api.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_WhatsAppPhoneNumbers_BizProviderPhone"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "IX_WhatsAppPhoneNumbers_BizProviderPhone"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: WhatsAppPhoneNumbers
    ConstraintName: IX_WhatsAppPhoneNumbers_BizProviderPhone
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_WhatsAppPhoneNumbers_BizProviderPhone"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "IX_WhatsAppPhoneNumbers_BizProviderPhone"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: WhatsAppPhoneNumbers
    ConstraintName: IX_WhatsAppPhoneNumbers_BizProviderPhone
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-10-01 11:58:29.110 +05:30 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType270`2[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 11:58:29.116 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api) in 669.8734ms
2025-10-01 11:58:29.118 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.Upsert (xbytechat.api)'
2025-10-01 11:58:29.120 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 500 null application/json; charset=utf-8 685.2051ms
2025-10-01 11:58:33.150 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:28:33.1461618+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:58:36.695 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-10-01 11:58:36.702 +05:30 [INF] CORS policy execution successful.
2025-10-01 11:58:36.703 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 7.9752ms
2025-10-01 11:58:36.710 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 557
2025-10-01 11:58:36.717 +05:30 [INF] CORS policy execution successful.
2025-10-01 11:58:36.719 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-10-01 11:58:36.725 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-10-01 11:58:36.750 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__dto_Provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0 AND w."Provider" = @__dto_Provider_1
LIMIT 1
2025-10-01 11:58:36.771 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p1='22ee5a32-2db4-4602-814f-0a24694f5636', @p0='2025-10-01T06:28:36.7575809Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "UpdatedAt" = @p0
WHERE "Id" = @p1;
2025-10-01 11:58:36.776 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 11:58:36.779 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 51.3529ms
2025-10-01 11:58:36.782 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-10-01 11:58:36.784 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 73.6354ms
2025-10-01 11:58:43.167 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:28:43.1635619+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:58:53.182 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:28:53.1791378+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:59:03.191 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:29:03.1884500+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:59:13.200 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:29:13.1981406+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:59:23.208 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:29:23.2061388+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:59:33.220 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T06:29:33.2160388+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:59:43.241 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:29:43.2383584+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 11:59:53.249 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:29:53.2459615+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:00:03.278 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:30:03.2747897+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:00:13.297 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:30:13.2943239+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:00:23.303 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:30:23.2994630+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:00:33.315 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T06:30:33.3111807+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:00:43.332 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:30:43.3293902+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:00:53.355 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:30:53.3519551+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:01:03.357 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:31:03.3543189+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:01:13.367 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:31:13.3645628+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:01:23.381 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:31:23.3786368+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:01:33.400 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:31:33.3970417+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:01:43.522 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T06:31:43.4117562+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:01:53.526 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:31:53.5240548+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:02:03.533 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:32:03.5306481+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:02:13.555 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:32:13.5520593+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:02:23.578 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:32:23.5750258+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:02:33.593 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:32:33.5902042+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:02:43.600 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:32:43.5970425+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:02:53.613 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:32:53.6106323+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:03:03.623 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:33:03.6196762+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:03:13.640 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:33:13.6373002+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:03:23.653 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:33:23.6498565+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:03:33.664 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:33:33.6607740+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:03:43.674 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:33:43.6716103+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:03:53.683 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:33:53.6808699+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:04:03.692 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:34:03.6892412+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:04:13.711 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:34:13.7090993+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:04:23.721 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:34:23.7182233+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:04:33.733 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T06:34:33.7295960+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:04:35.321 +05:30 [INF] Request starting HTTP/1.1 GET http://3585323701f3.ngrok-free.app/api/custom/sendflow - null null
2025-10-01 12:04:35.335 +05:30 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-10-01 12:04:35.337 +05:30 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-10-01 12:04:35.339 +05:30 [INF] Request finished HTTP/1.1 GET http://3585323701f3.ngrok-free.app/api/custom/sendflow - 405 0 null 17.7464ms
2025-10-01 12:04:39.910 +05:30 [INF] Request starting HTTP/1.1 GET http://3585323701f3.ngrok-free.app/api/custom/sendflow - null null
2025-10-01 12:04:39.920 +05:30 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-10-01 12:04:39.922 +05:30 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-10-01 12:04:39.924 +05:30 [INF] Request finished HTTP/1.1 GET http://3585323701f3.ngrok-free.app/api/custom/sendflow - 405 0 null 14.2427ms
2025-10-01 12:04:43.759 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:34:43.7559124+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:04:53.781 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:34:53.7783177+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:05:03.517 +05:30 [INF] Request starting HTTP/1.1 GET http://3585323701f3.ngrok-free.app/swagger/index.html - null null
2025-10-01 12:05:03.524 +05:30 [INF] Request finished HTTP/1.1 GET http://3585323701f3.ngrok-free.app/swagger/index.html - 200 null text/html;charset=utf-8 6.6318ms
2025-10-01 12:05:03.782 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:35:03.7805681+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:05:03.853 +05:30 [INF] Request starting HTTP/1.1 GET http://3585323701f3.ngrok-free.app/swagger/swagger-ui-standalone-preset.js - null null
2025-10-01 12:05:03.863 +05:30 [INF] Request starting HTTP/1.1 GET http://3585323701f3.ngrok-free.app/_vs/browserLink - null null
2025-10-01 12:05:03.896 +05:30 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-10-01 12:05:03.899 +05:30 [INF] Request finished HTTP/1.1 GET http://3585323701f3.ngrok-free.app/swagger/swagger-ui-standalone-preset.js - 200 230280 text/javascript 45.805ms
2025-10-01 12:05:03.900 +05:30 [INF] Request finished HTTP/1.1 GET http://3585323701f3.ngrok-free.app/_vs/browserLink - 200 null text/javascript; charset=UTF-8 37.2486ms
2025-10-01 12:05:04.079 +05:30 [INF] Request starting HTTP/1.1 GET http://3585323701f3.ngrok-free.app/_framework/aspnetcore-browser-refresh.js - null null
2025-10-01 12:05:04.079 +05:30 [INF] Request starting HTTP/1.1 GET http://3585323701f3.ngrok-free.app/swagger/swagger-ui.css - null null
2025-10-01 12:05:04.080 +05:30 [INF] Request starting HTTP/1.1 GET http://3585323701f3.ngrok-free.app/swagger/swagger-ui-bundle.js - null null
2025-10-01 12:05:04.084 +05:30 [INF] Request finished HTTP/1.1 GET http://3585323701f3.ngrok-free.app/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 4.7151ms
2025-10-01 12:05:04.117 +05:30 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-10-01 12:05:04.124 +05:30 [INF] Request finished HTTP/1.1 GET http://3585323701f3.ngrok-free.app/swagger/swagger-ui.css - 200 152034 text/css 44.8123ms
2025-10-01 12:05:09.881 +05:30 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-10-01 12:05:09.883 +05:30 [INF] Request finished HTTP/1.1 GET http://3585323701f3.ngrok-free.app/swagger/swagger-ui-bundle.js - 200 1456926 text/javascript 5802.6251ms
2025-10-01 12:05:12.469 +05:30 [INF] Request starting HTTP/1.1 GET http://3585323701f3.ngrok-free.app/swagger/v1/swagger.json - null null
2025-10-01 12:05:12.527 +05:30 [INF] Request starting HTTP/1.1 GET http://3585323701f3.ngrok-free.app/swagger/favicon-32x32.png - null null
2025-10-01 12:05:12.532 +05:30 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-10-01 12:05:12.534 +05:30 [INF] Request finished HTTP/1.1 GET http://3585323701f3.ngrok-free.app/swagger/favicon-32x32.png - 200 628 image/png 7.1194ms
2025-10-01 12:05:12.598 +05:30 [INF] Request finished HTTP/1.1 GET http://3585323701f3.ngrok-free.app/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 128.4537ms
2025-10-01 12:05:13.798 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:35:13.7941195+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:05:23.815 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:35:23.8125422+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:05:33.834 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:35:33.8318231+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:05:43.843 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:35:43.8402706+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:05:53.851 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:35:53.8485504+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:06:03.864 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:36:03.8619640+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:06:13.867 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:36:13.8645636+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:06:21.146 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-10-01 12:06:21.150 +05:30 [INF] CORS policy execution successful.
2025-10-01 12:06:21.152 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 5.7517ms
2025-10-01 12:06:21.156 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 566
2025-10-01 12:06:21.160 +05:30 [INF] CORS policy execution successful.
2025-10-01 12:06:21.162 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-10-01 12:06:21.164 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-10-01 12:06:21.176 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__dto_Provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0 AND w."Provider" = @__dto_Provider_1
LIMIT 1
2025-10-01 12:06:21.202 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[@p2='22ee5a32-2db4-4602-814f-0a24694f5636', @p0='EAAUbmP4285YBPomJX3fGnmeZBZAi3T89tm2vboiZCg05fCY06CxhpB3FhfRnC8QZCMPQRffFPTgJ59BtkD1u2KP2gOAAaZCSXiezZAraAT0qDI8nImJXNZCnnJ3gZA8c9R5omvYCEiaiNkeVn3Pypg6yGUnGgDEa7iICb0Wp2b9PyK4GGh9q4xDOlnu4IQwOwZCmG9ve849CKWUvrI6c2YHR3Y4QNwgsd7P8x0faZCxhci5IixxNLV9OkRpuLF1ZCPz5AZDZD' (Nullable = false), @p1='2025-10-01T06:36:21.1805422Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "ApiKey" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-10-01 12:06:21.206 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:06:21.208 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 41.599ms
2025-10-01 12:06:21.211 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-10-01 12:06:21.213 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 56.7157ms
2025-10-01 12:06:21.942 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection/current - null null
2025-10-01 12:06:21.946 +05:30 [INF] CORS policy execution successful.
2025-10-01 12:06:21.948 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection/current - 204 null null 5.7715ms
2025-10-01 12:06:21.953 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection/current - application/json 2
2025-10-01 12:06:21.958 +05:30 [INF] CORS policy execution successful.
2025-10-01 12:06:21.961 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnectionCurrent (xbytechat.api)'
2025-10-01 12:06:21.967 +05:30 [INF] Route matched with {action = "TestConnectionCurrent", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnectionCurrent() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-10-01 12:06:21.977 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-10-01 12:06:21.986 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-10-01 12:06:21.988 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-10-01 12:06:23.542 +05:30 [INF] Received HTTP response headers after 1552.2277ms - 200
2025-10-01 12:06:23.544 +05:30 [INF] End processing HTTP request after 1558.6031ms - 200
2025-10-01 12:06:23.552 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:06:23.555 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnectionCurrent (xbytechat.api) in 1585.3104ms
2025-10-01 12:06:23.559 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnectionCurrent (xbytechat.api)'
2025-10-01 12:06:23.561 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection/current - 200 null application/json; charset=utf-8 1607.6194ms
2025-10-01 12:06:23.877 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:36:23.8740862+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:06:33.891 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__now_0='2025-10-01T06:36:33.8862037+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:06:44.020 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T06:36:43.9227977+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:06:54.026 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:36:54.0237164+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:07:04.044 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:37:04.0423255+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:07:14.058 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:37:14.0553204+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:07:24.073 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:37:24.0706591+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:07:34.090 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__now_0='2025-10-01T06:37:34.0809822+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:07:44.108 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:37:44.1057991+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:07:54.118 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:37:54.1158214+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:07:54.791 +05:30 [INF] Request starting HTTP/1.1 GET http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp?hub.mode=subscribe&hub.challenge=1213912421&hub.verify_token=SPYdyJzlMorCAHYtiayJzlMorUoryJzlMorEYUcGCaRdzy0IMhhK - null null
2025-10-01 12:07:54.803 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api)'
2025-10-01 12:07:54.808 +05:30 [INF] Route matched with {action = "VerifyWebhook", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult VerifyWebhook(System.String, System.String, System.String) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 12:07:54.816 +05:30 [INF] ✅ WhatsApp webhook verified successfully.
2025-10-01 12:07:54.819 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-10-01 12:07:54.822 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api) in 10.5545ms
2025-10-01 12:07:54.824 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.VerifyWebhook (xbytechat.api)'
2025-10-01 12:07:54.826 +05:30 [INF] Request finished HTTP/1.1 GET http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp?hub.mode=subscribe&hub.challenge=1213912421&hub.verify_token=SPYdyJzlMorCAHYtiayJzlMorUoryJzlMorEYUcGCaRdzy0IMhhK - 200 null text/plain; charset=utf-8 35.0288ms
2025-10-01 12:08:04.133 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:38:04.1305418+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:08:14.146 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:38:14.1438514+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:08:24.151 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:38:24.1489868+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:08:34.174 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__now_0='2025-10-01T06:38:34.1700341+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:08:44.193 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:38:44.1904367+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:08:54.206 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:38:54.2047824+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:09:04.222 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:39:04.2200326+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:09:14.230 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:39:14.2279642+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:09:18.993 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-10-01 12:09:18.997 +05:30 [INF] CORS policy execution successful.
2025-10-01 12:09:18.998 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 5.0774ms
2025-10-01 12:09:19.014 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-10-01 12:09:19.015 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-10-01 12:09:19.018 +05:30 [INF] CORS policy execution successful.
2025-10-01 12:09:19.021 +05:30 [INF] CORS policy execution successful.
2025-10-01 12:09:19.023 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 204 null null 7.6376ms
2025-10-01 12:09:19.023 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-10-01 12:09:19.027 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-10-01 12:09:19.028 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-10-01 12:09:19.031 +05:30 [INF] CORS policy execution successful.
2025-10-01 12:09:19.039 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-10-01 12:09:19.040 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-10-01 12:09:19.042 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-10-01 12:09:19.049 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-10-01 12:09:19.057 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='PINNACLE'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-10-01 12:09:19.061 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 27.8441ms
2025-10-01 12:09:19.063 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 12:09:19.066 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-10-01 12:09:19.068 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 17.0415ms
2025-10-01 12:09:19.073 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 58.5157ms
2025-10-01 12:09:19.075 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-10-01 12:09:19.079 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-10-01 12:09:19.081 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 200 null application/json; charset=utf-8 54.3053ms
2025-10-01 12:09:19.087 +05:30 [INF] CORS policy execution successful.
2025-10-01 12:09:19.091 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 11.6893ms
2025-10-01 12:09:19.097 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-10-01 12:09:19.101 +05:30 [INF] CORS policy execution successful.
2025-10-01 12:09:19.103 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-10-01 12:09:19.105 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-10-01 12:09:19.111 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-10-01 12:09:19.116 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 12:09:19.118 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 11.0582ms
2025-10-01 12:09:19.121 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-10-01 12:09:19.124 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 26.9493ms
2025-10-01 12:09:19.136 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-10-01 12:09:19.140 +05:30 [INF] CORS policy execution successful.
2025-10-01 12:09:19.142 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-10-01 12:09:19.144 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-10-01 12:09:19.152 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-10-01 12:09:19.157 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 12:09:19.160 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 13.3187ms
2025-10-01 12:09:19.162 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-10-01 12:09:19.164 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 27.9073ms
2025-10-01 12:09:24.241 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:39:24.2386019+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:09:34.241 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:39:34.2387022+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:09:44.251 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:39:44.2484052+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:09:54.258 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:39:54.2560881+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:10:04.265 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:40:04.2630352+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:10:14.278 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:40:14.2743528+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:10:24.291 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:40:24.2893066+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:10:32.899 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/sendflow - application/json 359
2025-10-01 12:10:32.903 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:10:32.928 +05:30 [INF] Route matched with {action = "SendTemplate", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplate(xbytechat.api.Features.CustomeApi.DTOs.DirectTemplateSendRequest, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 12:10:32.946 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api) in 15.6364ms
2025-10-01 12:10:32.949 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:10:33.001 +05:30 [ERR] ❌ An unhandled exception occurred
System.InvalidOperationException: Unable to resolve service for type 'xbytechat.api.Features.CustomeApi.Services.CtaJourneyPublisher' while attempting to activate 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method1510(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-10-01 12:10:33.038 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/sendflow - 500 null application/json; charset=utf-8 139.1674ms
2025-10-01 12:10:34.301 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:40:34.2980053+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:10:44.314 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:40:44.3113132+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:10:54.326 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:40:54.3235306+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:11:04.336 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:41:04.3339686+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:11:14.342 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:41:14.3400591+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:11:24.355 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:41:24.3524006+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:11:24.886 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - application/json 359
2025-10-01 12:11:24.895 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:11:24.896 +05:30 [INF] Route matched with {action = "SendTemplate", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplate(xbytechat.api.Features.CustomeApi.DTOs.DirectTemplateSendRequest, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 12:11:24.904 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api) in 5.3266ms
2025-10-01 12:11:24.906 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:11:24.941 +05:30 [ERR] ❌ An unhandled exception occurred
System.InvalidOperationException: Unable to resolve service for type 'xbytechat.api.Features.CustomeApi.Services.CtaJourneyPublisher' while attempting to activate 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method1510(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-10-01 12:11:24.951 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - 500 null application/json; charset=utf-8 65.1501ms
2025-10-01 12:11:34.370 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:41:34.3667588+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:11:40.182 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - application/json 359
2025-10-01 12:11:40.187 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:11:40.189 +05:30 [INF] Route matched with {action = "SendTemplate", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplate(xbytechat.api.Features.CustomeApi.DTOs.DirectTemplateSendRequest, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 12:11:40.199 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api) in 8.5866ms
2025-10-01 12:11:40.202 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:11:40.228 +05:30 [ERR] ❌ An unhandled exception occurred
System.InvalidOperationException: Unable to resolve service for type 'xbytechat.api.Features.CustomeApi.Services.CtaJourneyPublisher' while attempting to activate 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method1510(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-10-01 12:11:40.236 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - 500 null application/json; charset=utf-8 53.5399ms
2025-10-01 12:11:44.480 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T06:41:44.3798215+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:11:54.491 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:41:54.4884093+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:12:08.095 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-01 12:12:08.167 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-10-01 12:12:08.189 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-10-01 12:12:09.491 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 12:12:10.137 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-10-01 12:12:10.158 +05:30 [INF] ClickLogWorker started
2025-10-01 12:12:10.313 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-10-01 12:12:10.352 +05:30 [INF] Executed DbCommand (55ms) [Parameters=[@__cutoff_0='2025-09-24T06:42:08.3460223Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-10-01 12:12:10.382 +05:30 [INF] Now listening on: http://localhost:7113
2025-10-01 12:12:10.383 +05:30 [INF] Now listening on: http://localhost:5295
2025-10-01 12:12:10.384 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-01 12:12:10.385 +05:30 [INF] Hosting environment: Development
2025-10-01 12:12:10.386 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-10-01 12:12:11.201 +05:30 [INF] ClickLogWorker stopped
2025-10-01 12:12:11.869 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-10-01 12:12:12.145 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 287.8373ms
2025-10-01 12:12:12.174 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-10-01 12:12:12.227 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 52.5845ms
2025-10-01 12:12:12.291 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-10-01 12:12:12.351 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 59.9166ms
2025-10-01 12:12:12.573 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-10-01 12:12:12.890 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 316.5789ms
2025-10-01 12:12:15.284 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__now_0='2025-10-01T06:42:15.1710603+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:12:20.206 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT w."BusinessId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-10-01 12:12:20.265 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='8390da76-10de-4d76-80f2-68b68f4e2b82'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-10-01 12:12:20.298 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='8390da76-10de-4d76-80f2-68b68f4e2b82'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-10-01 12:12:20.305 +05:30 [INF] ⏭️ Skipping sync for "8390da76-10de-4d76-80f2-68b68f4e2b82"; TTL not expired.
2025-10-01 12:12:20.308 +05:30 [INF] TemplateSyncWorker: biz="8390da76-10de-4d76-80f2-68b68f4e2b82" added=0 updated=0 skipped=0 syncedAt="2025-10-01T05:59:46.4435240Z"
2025-10-01 12:12:20.321 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-10-01 12:12:20.328 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-10-01 12:12:20.365 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-10-01 12:12:20.369 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=100
2025-10-01 12:12:21.654 +05:30 [INF] Received HTTP response headers after 1279.468ms - 200
2025-10-01 12:12:21.657 +05:30 [INF] End processing HTTP request after 1296.7218ms - 200
2025-10-01 12:12:21.734 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - application/json 359
2025-10-01 12:12:21.780 +05:30 [WRN] Failed to determine the https port for redirect.
2025-10-01 12:12:21.903 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:12:21.931 +05:30 [INF] Route matched with {action = "SendTemplate", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplate(xbytechat.api.Features.CustomeApi.DTOs.DirectTemplateSendRequest, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 12:12:21.951 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api) in 11.847ms
2025-10-01 12:12:21.966 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:12:22.114 +05:30 [ERR] ❌ An unhandled exception occurred
System.InvalidOperationException: Unable to resolve service for type 'xbytechat.api.Features.CustomeApi.Services.CtaJourneyPublisher' while attempting to activate 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method181(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-10-01 12:12:22.198 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - 500 null application/json; charset=utf-8 463.73ms
2025-10-01 12:12:22.566 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerKey_1='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."Body", w."BusinessId", w."ButtonsJson", w."Category", w."CreatedAt", w."ExternalId", w."HasImageHeader", w."IsActive", w."Language", w."LastSyncedAt", w."Name", w."PlaceholderCount", w."Provider", w."RawJson", w."Status", w."UpdatedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__providerKey_1
2025-10-01 12:12:22.832 +05:30 [INF] Executed DbCommand (27ms) [Parameters=[@p1='011cbbb2-c2bb-4496-9192-a3d6b774b8d4', @p0='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p3='016d56cc-6729-4843-9959-d835d45f58fa', @p2='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p5='0370e011-5a1d-4a67-854a-0fbcf5648331', @p4='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p7='13493525-00e9-44ea-99a1-66796a44932e', @p6='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p9='165006ca-f706-435f-93c0-cd89ef7773fc', @p8='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p11='21533538-1fc0-41e8-aa1c-cf69db568733', @p10='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p13='2377d482-9fb9-4c93-ae00-3719af536b2a', @p12='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p15='29f5c5dc-6e02-4cee-ae04-f0aa3edc4d9a', @p14='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p17='2df07743-35ab-4a38-a40f-4a32a022334e', @p16='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p19='3027a02a-c6a7-4d5c-8520-3b7967cecb4b', @p18='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p21='3370ba3e-c344-4cf2-91f7-1924856ec046', @p20='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p23='38c67e31-0848-4149-a324-cdc34c04bc54', @p22='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p25='45bc982b-adcf-49fb-a888-e86412ae3aa7', @p24='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p27='4be5ea24-fa7b-4bc7-ac2c-ec460bd69972', @p26='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p29='5046cab8-e27a-4b52-841b-3218bec2f52b', @p28='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p31='519a3271-0786-4495-9a30-fe45b93b477b', @p30='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p33='5ed88fcc-3d15-4f82-af6f-e23e2d71fbb7', @p32='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p35='73267220-a9e5-44aa-8af9-84636f9919e8', @p34='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p37='832116b1-e2ab-48a8-bc91-29ffd3dea322', @p36='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p39='89c4fe4f-8060-41f1-ac86-9764a35100ba', @p38='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p41='90d4429e-23ae-42e2-8e68-82574e0a3284', @p40='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p45='9a3f869d-79ad-4c4a-aa4e-f59df48712ef', @p42='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p43='{"name":"pdf_template","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"DOCUMENT","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/534415257_508230149051927_6330429317144744326_n.pdf?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=6gmSIOfbwZUQ7kNvwGzSTUE&_nc_oc=AdnR7F3Txsy0K1Z5V4CgAH_hTHGl6KjdS1WVWqOy24K6UT44E8qDvxhk_UNgJZAsZ2hfCYXXCSFsByKcJOMksm7P&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=oRWDSEc_IANfaLtu-rGf1g&oh=01_Q5Aa2gGiPUU8UppGe1QRFxaQY11fkvgxvunWfUf6jVZ3g4P68w&oe=69044535"]}},{"type":"BODY","text":"Hello {{1}},\n\nPlease find your Invoice.","example":{"body_text":[["Usernmok"]]}},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Recieved"},{"type":"QUICK_REPLY","text":"No Received"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"508230145718594"}' (Nullable = false), @p44='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p49='9b4b4389-ff80-4861-bd61-1e01cf0a91ea', @p46='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p47='{"name":"welcome_video","parameter_format":"POSITIONAL","components":[{"type":"HEADER","format":"VIDEO","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/534417141_1284099973020036_5812680847202991712_n.mp4?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=Enz6gVNgWYMQ7kNvwGdmYG9&_nc_oc=Adld1wu25ZYbomfWwviHi9mnTFuavhuXREpsDrchcdlp2VdTQI1f8xSC4YE1rPcgQzsEO2aeU0CzlfER3bY9LJpI&_nc_zt=28&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=oRWDSEc_IANfaLtu-rGf1g&oh=01_Q5Aa2gEKXVx08bUy_I2gRjaCR3TgoAGYQC-eUixKoWbRx2eHIA&oe=69043B03"]}},{"type":"BODY","text":"Hello {{1}} 👋\nAapka order successfully deliver ho chuka hai. 🚚✨\nKya aapne Nirvasa ka Vaji Amrit Vati lena start kar diya hai? 💊\nNeeche diye gaye options me se select karke bataye 👇","example":{"body_text":[["Nicolus"]]}},{"type":"BUTTONS","buttons":[{"type":"QUICK_REPLY","text":"Yes"},{"type":"QUICK_REPLY","text":"No"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1284099969686703"}' (Nullable = false), @p48='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p51='9b75c680-c36f-4cc1-a717-8dcbbdb09998', @p50='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p53='a24a8aa5-00d6-4e27-ae00-5251480ba7ee', @p52='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p57='a7690842-f899-4064-872f-42ee1e0ea934', @p54='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p55='{"name":"shoe_launch_offer","parameter_format":"NAMED","components":[{"type":"HEADER","format":"IMAGE","example":{"header_handle":["https://scontent.whatsapp.net/v/t61.29466-34/534420374_1100798475349987_2054812548274537975_n.png?ccb=1-7&_nc_sid=8b1bef&_nc_ohc=TPhNUOFPIkQQ7kNvwE5FEzX&_nc_oc=AdmLW2Z5aRi13VqG0_TWenKfbsyHtOfvvGrO7qOtzRA1Ww7l09JUwngb_4DTAULpI42TbYs9rg9mOd4RxesrMyTW&_nc_zt=3&_nc_ht=scontent.whatsapp.net&edm=AH51TzQEAAAA&_nc_gid=oRWDSEc_IANfaLtu-rGf1g&oh=01_Q5Aa2gGEM233FvAl25wNhYtWAhb7zAt9Jrq8gUwUeXotCA48tQ&oe=6904330F"]}},{"type":"BODY","text":"Hello {{}}! The moment has arrived! 🎉\n\nOur new **[Shoe Model Name]** is officially here, and we're celebrating with a special offer just for our WhatsApp family!\n\nFor the next 48 hours, get an **exclusive 15% discount** on your purchase. Don't just follow the trend—set it.\n\nUse code: **LAUNCH15**\n\nThis offer won't last long. Step into the future today!"},{"type":"FOOTER","text":"The XploreByte Team"},{"type":"BUTTONS","buttons":[{"type":"URL","text":"Shop now","url":"https://xplorebytesolutions.com/"},{"type":"PHONE_NUMBER","text":"Call us","phone_number":"+917082156227"}]}],"language":"en_US","status":"APPROVED","category":"MARKETING","sub_category":"CUSTOM","id":"1100798472016654"}' (Nullable = false), @p56='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p59='be892679-3fc5-4687-85cc-0ca879983766', @p58='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p61='c2984897-fef2-4f79-a068-eca5a820bd5e', @p60='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p63='e14238a0-03ae-4130-9369-92c3948aaa0d', @p62='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p65='e679348c-7124-4f79-bea4-ddb5f147d596', @p64='2025-10-01T06:42:20.3255670Z' (DbType = DateTime), @p67='ef2d8d19-8144-475a-a2cd-51ed38c59af6', @p66='2025-10-01T06:42:20.3255670Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p0
WHERE "Id" = @p1;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p2
WHERE "Id" = @p3;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p4
WHERE "Id" = @p5;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p6
WHERE "Id" = @p7;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p8
WHERE "Id" = @p9;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p10
WHERE "Id" = @p11;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p12
WHERE "Id" = @p13;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p14
WHERE "Id" = @p15;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p16
WHERE "Id" = @p17;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p18
WHERE "Id" = @p19;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p20
WHERE "Id" = @p21;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p22
WHERE "Id" = @p23;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p24
WHERE "Id" = @p25;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p26
WHERE "Id" = @p27;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p28
WHERE "Id" = @p29;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p30
WHERE "Id" = @p31;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p32
WHERE "Id" = @p33;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p34
WHERE "Id" = @p35;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p36
WHERE "Id" = @p37;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p38
WHERE "Id" = @p39;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p40
WHERE "Id" = @p41;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p42, "RawJson" = @p43, "UpdatedAt" = @p44
WHERE "Id" = @p45;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p46, "RawJson" = @p47, "UpdatedAt" = @p48
WHERE "Id" = @p49;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p50
WHERE "Id" = @p51;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p52
WHERE "Id" = @p53;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p54, "RawJson" = @p55, "UpdatedAt" = @p56
WHERE "Id" = @p57;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p58
WHERE "Id" = @p59;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p60
WHERE "Id" = @p61;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p62
WHERE "Id" = @p63;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p64
WHERE "Id" = @p65;
UPDATE "WhatsAppTemplates" SET "LastSyncedAt" = @p66
WHERE "Id" = @p67;
2025-10-01 12:12:22.864 +05:30 [INF] TemplateSyncWorker: biz="9841bcab-ca71-439f-8691-d85ada887b01" added=0 updated=3 skipped=28 syncedAt="2025-10-01T06:42:20.3255670Z"
2025-10-01 12:12:22.868 +05:30 [INF] TemplateSyncWorker: sweep finished in 2700 ms; processed=2; next run ~"2025-10-01T12:42:20.1672159Z"
2025-10-01 12:12:25.293 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:42:25.2890640+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:12:35.301 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T06:42:35.2977150+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:12:45.306 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:42:45.3030102+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:12:55.316 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:42:55.3137410+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:13:05.322 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:43:05.3184215+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:13:15.330 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:43:15.3264446+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:13:25.342 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:43:25.3399323+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:13:35.348 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:43:35.3448118+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:13:45.355 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:43:45.3519014+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:13:55.369 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:43:55.3662830+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:14:05.379 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T06:44:05.3756853+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:14:15.401 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:44:15.3977459+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:14:25.451 +05:30 [INF] Executed DbCommand (24ms) [Parameters=[@__now_0='2025-10-01T06:44:25.4265394+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:14:35.462 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T06:44:35.4582381+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:14:45.471 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:44:45.4676417+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:14:55.486 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:44:55.4832204+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:15:05.504 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:45:05.5024391+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:15:15.519 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:45:15.5151339+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:15:25.534 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:45:25.5315042+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:15:35.554 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:45:35.5523122+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:15:45.568 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:45:45.5622202+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:15:55.584 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:45:55.5805375+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:16:05.592 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:46:05.5891130+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:16:15.606 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:46:15.6001212+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:16:25.618 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:46:25.6168863+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:16:35.637 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:46:35.6346826+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:16:45.646 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:46:45.6440879+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:16:55.663 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:46:55.6605432+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:17:05.682 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T06:47:05.6775920+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:17:15.846 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T06:47:15.7037573+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:17:25.871 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:47:25.8682799+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:17:35.885 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:47:35.8819010+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:17:45.904 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:47:45.9008901+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:18:15.448 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-01 12:18:15.507 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-10-01 12:18:15.525 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-10-01 12:18:16.750 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 12:18:17.584 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-10-01 12:18:17.607 +05:30 [INF] ClickLogWorker started
2025-10-01 12:18:17.820 +05:30 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-10-01 12:18:17.857 +05:30 [INF] Now listening on: http://localhost:7113
2025-10-01 12:18:17.858 +05:30 [INF] Now listening on: http://localhost:5295
2025-10-01 12:18:17.859 +05:30 [INF] Executed DbCommand (94ms) [Parameters=[@__cutoff_0='2025-09-24T06:48:15.6617258Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-10-01 12:18:17.860 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-01 12:18:17.864 +05:30 [INF] Hosting environment: Development
2025-10-01 12:18:17.866 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-10-01 12:18:18.679 +05:30 [INF] ClickLogWorker stopped
2025-10-01 12:18:19.189 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-10-01 12:18:19.396 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 218.2215ms
2025-10-01 12:18:19.425 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-10-01 12:18:19.434 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 9.0598ms
2025-10-01 12:18:19.517 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-10-01 12:18:19.566 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 49.2517ms
2025-10-01 12:18:19.794 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-10-01 12:18:20.137 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 342.4124ms
2025-10-01 12:18:22.725 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__now_0='2025-10-01T06:48:22.6272940+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:18:27.657 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT w."BusinessId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-10-01 12:18:27.711 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='8390da76-10de-4d76-80f2-68b68f4e2b82'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-10-01 12:18:27.759 +05:30 [INF] Executed DbCommand (24ms) [Parameters=[@__businessId_0='8390da76-10de-4d76-80f2-68b68f4e2b82'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-10-01 12:18:27.767 +05:30 [INF] ⏭️ Skipping sync for "8390da76-10de-4d76-80f2-68b68f4e2b82"; TTL not expired.
2025-10-01 12:18:27.770 +05:30 [INF] TemplateSyncWorker: biz="8390da76-10de-4d76-80f2-68b68f4e2b82" added=0 updated=0 skipped=0 syncedAt="2025-10-01T05:59:46.4435240Z"
2025-10-01 12:18:27.782 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-10-01 12:18:27.788 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-10-01 12:18:27.792 +05:30 [INF] ⏭️ Skipping sync for "9841bcab-ca71-439f-8691-d85ada887b01"; TTL not expired.
2025-10-01 12:18:27.794 +05:30 [INF] TemplateSyncWorker: biz="9841bcab-ca71-439f-8691-d85ada887b01" added=0 updated=0 skipped=0 syncedAt="2025-10-01T06:42:20.3255670Z"
2025-10-01 12:18:27.798 +05:30 [INF] TemplateSyncWorker: sweep finished in 170 ms; processed=2; next run ~"2025-10-01T12:48:27.6273754Z"
2025-10-01 12:18:32.739 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:48:32.7344706+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:18:34.455 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - application/json 359
2025-10-01 12:18:34.467 +05:30 [WRN] Failed to determine the https port for redirect.
2025-10-01 12:18:34.608 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:18:34.635 +05:30 [INF] Route matched with {action = "SendTemplate", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplate(xbytechat.api.Features.CustomeApi.DTOs.DirectTemplateSendRequest, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 12:18:34.654 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api) in 12.2101ms
2025-10-01 12:18:34.659 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:18:34.726 +05:30 [ERR] ❌ An unhandled exception occurred
System.InvalidOperationException: Unable to resolve service for type 'xbytechat.api.Features.CustomeApi.Services.CtaJourneyPublisher' while attempting to activate 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method182(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-10-01 12:18:34.797 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - 500 null application/json; charset=utf-8 342.1289ms
2025-10-01 12:18:42.755 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T06:48:42.7509926+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:18:52.767 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:48:52.7634698+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:19:02.780 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:49:02.7767903+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:19:09.786 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - application/json 359
2025-10-01 12:19:09.800 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:19:09.803 +05:30 [INF] Route matched with {action = "SendTemplate", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplate(xbytechat.api.Features.CustomeApi.DTOs.DirectTemplateSendRequest, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 12:19:09.811 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api) in 4.6315ms
2025-10-01 12:19:09.814 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:19:09.837 +05:30 [ERR] ❌ An unhandled exception occurred
System.InvalidOperationException: Unable to resolve service for type 'xbytechat.api.Features.CustomeApi.Services.CtaJourneyPublisher' while attempting to activate 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method182(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-10-01 12:19:09.848 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - 500 null application/json; charset=utf-8 62.2405ms
2025-10-01 12:19:12.798 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T06:49:12.7945803+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:19:22.814 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:49:22.8107514+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:19:32.832 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:49:32.8294106+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:19:42.850 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:49:42.8467001+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:19:52.866 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:49:52.8638891+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:20:02.871 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:50:02.8680524+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:20:12.884 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:50:12.8809372+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:20:22.895 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:50:22.8919370+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:20:32.909 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:50:32.9050201+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:20:42.931 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:50:42.9274356+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:20:52.935 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:50:52.9334384+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:21:02.947 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:51:02.9453464+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:21:12.951 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:51:12.9498675+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:21:22.968 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:51:22.9656470+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:21:32.986 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:51:32.9827669+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:21:42.999 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:51:42.9957423+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:21:53.012 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:51:53.0086156+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:22:03.028 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:52:03.0252354+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:22:13.040 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:52:13.0371070+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:22:22.511 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-10-01 12:22:22.529 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 18.0004ms
2025-10-01 12:22:22.576 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-10-01 12:22:22.578 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-10-01 12:22:22.585 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.4428ms
2025-10-01 12:22:22.596 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 20.1688ms
2025-10-01 12:22:23.048 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:52:23.0457587+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:22:23.160 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-10-01 12:22:23.318 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 157.7564ms
2025-10-01 12:22:45.915 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-01 12:22:45.970 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-10-01 12:22:45.991 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-10-01 12:22:47.313 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 12:22:48.274 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-10-01 12:22:48.307 +05:30 [INF] ClickLogWorker started
2025-10-01 12:22:48.589 +05:30 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-10-01 12:22:48.649 +05:30 [INF] Now listening on: http://localhost:7113
2025-10-01 12:22:48.651 +05:30 [INF] Executed DbCommand (185ms) [Parameters=[@__cutoff_0='2025-09-24T06:52:46.1474114Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-10-01 12:22:48.651 +05:30 [INF] Now listening on: http://localhost:5295
2025-10-01 12:22:48.656 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-01 12:22:48.658 +05:30 [INF] Hosting environment: Development
2025-10-01 12:22:48.659 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-10-01 12:22:49.405 +05:30 [INF] ClickLogWorker stopped
2025-10-01 12:22:49.625 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-10-01 12:22:49.871 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 259.1353ms
2025-10-01 12:22:49.894 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-10-01 12:22:49.903 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 9.3799ms
2025-10-01 12:22:49.996 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-10-01 12:22:50.046 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 49.7451ms
2025-10-01 12:22:50.393 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-10-01 12:22:50.722 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 329.3956ms
2025-10-01 12:22:53.444 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__now_0='2025-10-01T06:52:53.3359475+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:22:56.850 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - application/json 359
2025-10-01 12:22:56.860 +05:30 [WRN] Failed to determine the https port for redirect.
2025-10-01 12:22:57.012 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:22:57.043 +05:30 [INF] Route matched with {action = "SendTemplate", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplate(xbytechat.api.Features.CustomeApi.DTOs.DirectTemplateSendRequest, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 12:22:57.073 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api) in 21.9472ms
2025-10-01 12:22:57.077 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:22:57.130 +05:30 [ERR] ❌ An unhandled exception occurred
System.InvalidOperationException: Unable to resolve service for type 'xbytechat.api.Features.CustomeApi.Services.CtaJourneyPublisher' while attempting to activate 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method176(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-10-01 12:22:57.218 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - 500 null application/json; charset=utf-8 367.4795ms
2025-10-01 12:22:58.360 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT w."BusinessId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-10-01 12:22:58.412 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='8390da76-10de-4d76-80f2-68b68f4e2b82'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-10-01 12:22:58.440 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='8390da76-10de-4d76-80f2-68b68f4e2b82'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-10-01 12:22:58.448 +05:30 [INF] ⏭️ Skipping sync for "8390da76-10de-4d76-80f2-68b68f4e2b82"; TTL not expired.
2025-10-01 12:22:58.451 +05:30 [INF] TemplateSyncWorker: biz="8390da76-10de-4d76-80f2-68b68f4e2b82" added=0 updated=0 skipped=0 syncedAt="2025-10-01T05:59:46.4435240Z"
2025-10-01 12:22:58.462 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-10-01 12:22:58.469 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-10-01 12:22:58.473 +05:30 [INF] ⏭️ Skipping sync for "9841bcab-ca71-439f-8691-d85ada887b01"; TTL not expired.
2025-10-01 12:22:58.475 +05:30 [INF] TemplateSyncWorker: biz="9841bcab-ca71-439f-8691-d85ada887b01" added=0 updated=0 skipped=0 syncedAt="2025-10-01T06:42:20.3255670Z"
2025-10-01 12:22:58.478 +05:30 [INF] TemplateSyncWorker: sweep finished in 148 ms; processed=2; next run ~"2025-10-01T12:52:58.3298162Z"
2025-10-01 12:23:03.464 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:53:03.4596606+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:23:13.481 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T06:53:13.4774003+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:23:22.850 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - application/json 359
2025-10-01 12:23:22.865 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:23:22.867 +05:30 [INF] Route matched with {action = "SendTemplate", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplate(xbytechat.api.Features.CustomeApi.DTOs.DirectTemplateSendRequest, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 12:23:22.874 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api) in 3.86ms
2025-10-01 12:23:22.876 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:23:22.957 +05:30 [ERR] ❌ An unhandled exception occurred
System.InvalidOperationException: Unable to resolve service for type 'xbytechat.api.Features.CustomeApi.Services.CtaJourneyPublisher' while attempting to activate 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method176(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-10-01 12:23:22.966 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - 500 null application/json; charset=utf-8 116.4654ms
2025-10-01 12:23:23.502 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:53:23.4985485+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:23:33.517 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:53:33.5136717+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:23:43.538 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:53:43.5353839+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:23:53.550 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:53:53.5466517+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:24:03.566 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:54:03.5625189+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:24:13.585 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T06:54:13.5809271+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:24:23.594 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:54:23.5906717+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:24:33.600 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:54:33.5966676+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:24:43.604 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:54:43.6007009+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:24:53.623 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:54:53.6200719+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:25:03.635 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:55:03.6322181+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:25:13.657 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:55:13.6524505+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:25:23.679 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:55:23.6757598+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:25:33.682 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:55:33.6795129+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:25:43.689 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:55:43.6872551+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:25:53.697 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:55:53.6947125+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:26:03.710 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:56:03.7069013+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:26:13.727 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:56:13.7239421+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:26:23.733 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:56:23.7298636+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:26:33.748 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:56:33.7449934+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:26:43.774 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:56:43.7709161+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:26:53.786 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:56:53.7833381+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:27:03.800 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T06:57:03.7962917+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:27:13.806 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:57:13.8045108+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:27:23.816 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:57:23.8142588+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:27:33.826 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:57:33.8237887+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:27:43.831 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:57:43.8279553+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:27:53.953 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T06:57:53.8402007+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:28:03.963 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:58:03.9612551+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:28:13.973 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:58:13.9710312+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:28:23.988 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:58:23.9848911+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:28:34.001 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:58:33.9991418+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:28:44.015 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:58:44.0134322+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:28:54.022 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T06:58:54.0203896+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:29:04.024 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:59:04.0222020+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:29:14.042 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:59:14.0390364+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:29:24.050 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:59:24.0474111+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:29:34.060 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:59:34.0577780+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:29:44.081 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T06:59:44.0763913+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:29:54.108 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T06:59:54.1052301+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:30:04.126 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:00:04.1237242+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:30:14.137 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T07:00:14.1287390+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:30:46.456 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-01 12:30:46.516 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-10-01 12:30:46.542 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-10-01 12:30:47.993 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 12:30:48.869 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-10-01 12:30:48.895 +05:30 [INF] ClickLogWorker started
2025-10-01 12:30:49.140 +05:30 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-10-01 12:30:49.190 +05:30 [INF] Now listening on: http://localhost:7113
2025-10-01 12:30:49.192 +05:30 [INF] Now listening on: http://localhost:5295
2025-10-01 12:30:49.194 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-01 12:30:49.194 +05:30 [INF] Executed DbCommand (124ms) [Parameters=[@__cutoff_0='2025-09-24T07:00:46.6994521Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-10-01 12:30:49.195 +05:30 [INF] Hosting environment: Development
2025-10-01 12:30:49.199 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-10-01 12:30:49.952 +05:30 [INF] ClickLogWorker stopped
2025-10-01 12:30:50.487 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-10-01 12:30:50.740 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 263.7043ms
2025-10-01 12:30:50.764 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-10-01 12:30:50.775 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 11.5715ms
2025-10-01 12:30:50.849 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-10-01 12:30:50.895 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 46.4877ms
2025-10-01 12:30:51.138 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-10-01 12:30:51.523 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 385.257ms
2025-10-01 12:30:54.039 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@__now_0='2025-10-01T07:00:53.9144780+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:30:58.935 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT w."BusinessId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-10-01 12:30:58.991 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='8390da76-10de-4d76-80f2-68b68f4e2b82'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-10-01 12:30:59.020 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='8390da76-10de-4d76-80f2-68b68f4e2b82'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-10-01 12:30:59.026 +05:30 [INF] ⏭️ Skipping sync for "8390da76-10de-4d76-80f2-68b68f4e2b82"; TTL not expired.
2025-10-01 12:30:59.030 +05:30 [INF] TemplateSyncWorker: biz="8390da76-10de-4d76-80f2-68b68f4e2b82" added=0 updated=0 skipped=0 syncedAt="2025-10-01T05:59:46.4435240Z"
2025-10-01 12:30:59.043 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-10-01 12:30:59.050 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-10-01 12:30:59.054 +05:30 [INF] ⏭️ Skipping sync for "9841bcab-ca71-439f-8691-d85ada887b01"; TTL not expired.
2025-10-01 12:30:59.056 +05:30 [INF] TemplateSyncWorker: biz="9841bcab-ca71-439f-8691-d85ada887b01" added=0 updated=0 skipped=0 syncedAt="2025-10-01T06:42:20.3255670Z"
2025-10-01 12:30:59.059 +05:30 [INF] TemplateSyncWorker: sweep finished in 158 ms; processed=2; next run ~"2025-10-01T13:00:58.9014126Z"
2025-10-01 12:31:04.068 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:01:04.0639198+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:31:14.081 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T07:01:14.0773821+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:31:20.587 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - application/json 350
2025-10-01 12:31:20.594 +05:30 [WRN] Failed to determine the https port for redirect.
2025-10-01 12:31:20.759 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:31:20.791 +05:30 [INF] Route matched with {action = "SendTemplate", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplate(xbytechat.api.Features.CustomeApi.DTOs.DirectTemplateSendRequest, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 12:31:20.813 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api) in 12.8899ms
2025-10-01 12:31:20.817 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:31:20.857 +05:30 [ERR] ❌ An unhandled exception occurred
System.InvalidOperationException: Unable to resolve service for type 'xbytechat.api.Features.CustomeApi.Services.CtaJourneyPublisher' while attempting to activate 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method182(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-10-01 12:31:20.924 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - 500 null application/json; charset=utf-8 337.022ms
2025-10-01 12:31:24.092 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:01:24.0891124+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:31:25.439 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - application/json 350
2025-10-01 12:31:25.452 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:31:25.454 +05:30 [INF] Route matched with {action = "SendTemplate", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplate(xbytechat.api.Features.CustomeApi.DTOs.DirectTemplateSendRequest, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 12:31:25.462 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api) in 4.644ms
2025-10-01 12:31:25.465 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:31:25.489 +05:30 [ERR] ❌ An unhandled exception occurred
System.InvalidOperationException: Unable to resolve service for type 'xbytechat.api.Features.CustomeApi.Services.CtaJourneyPublisher' while attempting to activate 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method182(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-10-01 12:31:25.499 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - 500 null application/json; charset=utf-8 60.5178ms
2025-10-01 12:31:34.094 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:01:34.0910831+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:31:44.110 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:01:44.1067200+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:31:54.122 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:01:54.1197517+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:32:04.125 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:02:04.1218714+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:32:14.145 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:02:14.1397881+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:32:24.164 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:02:24.1604775+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:32:34.183 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:02:34.1802338+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:32:44.196 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:02:44.1921832+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:32:54.207 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:02:54.2044811+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:33:04.223 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:03:04.2193241+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:33:14.230 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:03:14.2272520+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:33:24.245 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:03:24.2422536+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:33:34.257 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:03:34.2553581+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:33:44.267 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:03:44.2649351+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:33:54.271 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:03:54.2686079+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:34:04.282 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:04:04.2776991+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:34:14.296 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:04:14.2946597+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:34:24.300 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:04:24.2970411+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:34:34.305 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:04:34.3023606+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:34:44.328 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:04:44.3246450+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:34:54.351 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:04:54.3482514+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:35:04.362 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:05:04.3585923+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:35:14.379 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:05:14.3756533+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:35:24.401 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__now_0='2025-10-01T07:05:24.3927350+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:35:34.411 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:05:34.4080750+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:35:44.429 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:05:44.4260709+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:35:54.563 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T07:05:54.4326792+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:36:04.579 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:06:04.5762071+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:36:14.589 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:06:14.5866613+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:36:16.136 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - application/json 350
2025-10-01 12:36:16.145 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:36:16.147 +05:30 [INF] Route matched with {action = "SendTemplate", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplate(xbytechat.api.Features.CustomeApi.DTOs.DirectTemplateSendRequest, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 12:36:16.160 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api) in 9.728ms
2025-10-01 12:36:16.164 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:36:16.251 +05:30 [ERR] ❌ An unhandled exception occurred
System.InvalidOperationException: Unable to resolve service for type 'xbytechat.api.Features.CustomeApi.Services.CtaJourneyPublisher' while attempting to activate 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method182(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context) in D:\xbytechat\xbytechat-api\xbytechat-api\Middlewares\GlobalExceptionMiddleware.cs:line 32
2025-10-01 12:36:16.261 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - 500 null application/json; charset=utf-8 125.4383ms
2025-10-01 12:36:24.604 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:06:24.6012619+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:36:34.612 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:06:34.6082246+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:36:44.619 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:06:44.6160403+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:36:54.630 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:06:54.6284131+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:37:04.637 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:07:04.6345537+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:37:14.647 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:07:14.6459431+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:37:24.655 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:07:24.6530204+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:37:34.668 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T07:07:34.6626094+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:37:44.683 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:07:44.6801721+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:37:54.692 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:07:54.6897102+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:38:04.705 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:08:04.7026427+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:38:14.711 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:08:14.7082663+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:38:24.725 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:08:24.7226614+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:38:34.742 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:08:34.7391469+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:38:44.756 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:08:44.7535429+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:38:54.767 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:08:54.7654057+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:39:04.780 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:09:04.7788012+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:39:26.470 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-01 12:39:26.525 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-10-01 12:39:26.542 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-10-01 12:39:27.648 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 12:39:28.340 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-10-01 12:39:28.367 +05:30 [INF] ClickLogWorker started
2025-10-01 12:39:28.556 +05:30 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-10-01 12:39:28.584 +05:30 [INF] Executed DbCommand (77ms) [Parameters=[@__cutoff_0='2025-09-24T07:09:26.6651748Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-10-01 12:39:28.615 +05:30 [INF] Now listening on: http://localhost:7113
2025-10-01 12:39:28.616 +05:30 [INF] Now listening on: http://localhost:5295
2025-10-01 12:39:28.617 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-01 12:39:28.618 +05:30 [INF] Hosting environment: Development
2025-10-01 12:39:28.619 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-10-01 12:39:29.406 +05:30 [INF] ClickLogWorker stopped
2025-10-01 12:39:30.145 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-10-01 12:39:30.368 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 231.2075ms
2025-10-01 12:39:30.525 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-10-01 12:39:30.525 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-10-01 12:39:30.532 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.0882ms
2025-10-01 12:39:30.570 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 44.694ms
2025-10-01 12:39:30.759 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-10-01 12:39:31.046 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 287.5215ms
2025-10-01 12:39:33.464 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__now_0='2025-10-01T07:09:33.3827801+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:39:37.532 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - application/json 350
2025-10-01 12:39:37.537 +05:30 [WRN] Failed to determine the https port for redirect.
2025-10-01 12:39:37.632 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:39:37.651 +05:30 [INF] Route matched with {action = "SendTemplate", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplate(xbytechat.api.Features.CustomeApi.DTOs.DirectTemplateSendRequest, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 12:39:41.857 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 601
2025-10-01 12:39:41.869 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:39:41.873 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 12:39:41.885 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__req_PhoneNumberId_0='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."IsActive" AND w."PhoneNumberId" = @__req_PhoneNumberId_0
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 12:39:41.886 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0Q3OUY0M0JDQThBOUQ1QTlBAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQzgxQUIyMUIzODJGQjEyMDNGOEQ0NTk1RUQ0MTBFNzMA","timestamp":"1759249222","type":"button","button":{"payload":"No","text":"No"}}]},"field":"messages"}]}]}
2025-10-01 12:39:41.889 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT w."BusinessId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-10-01 12:39:41.892 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 12:39:41.906 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:39:41.912 +05:30 [INF] [CustomAPI:"cd02a180-e4ef-49cd-b9ae-05051f1ea79f"] Begin send. biz="9841bcab-ca71-439f-8691-d85ada887b01" pnid=673199269218077 to=********5240 template=welcome_video
2025-10-01 12:39:41.929 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 41.1197ms
2025-10-01 12:39:41.932 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:39:41.932 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='8390da76-10de-4d76-80f2-68b68f4e2b82'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-10-01 12:39:41.935 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 77.5314ms
2025-10-01 12:39:41.961 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='8390da76-10de-4d76-80f2-68b68f4e2b82'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-10-01 12:39:41.961 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-10-01 12:39:41.967 +05:30 [INF] ⏭️ Skipping sync for "8390da76-10de-4d76-80f2-68b68f4e2b82"; TTL not expired.
2025-10-01 12:39:41.969 +05:30 [INF] TemplateSyncWorker: biz="8390da76-10de-4d76-80f2-68b68f4e2b82" added=0 updated=0 skipped=0 syncedAt="2025-10-01T05:59:46.4435240Z"
2025-10-01 12:39:41.981 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-10-01 12:39:41.986 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-10-01 12:39:41.989 +05:30 [INF] ⏭️ Skipping sync for "9841bcab-ca71-439f-8691-d85ada887b01"; TTL not expired.
2025-10-01 12:39:41.991 +05:30 [INF] TemplateSyncWorker: biz="9841bcab-ca71-439f-8691-d85ada887b01" added=0 updated=0 skipped=0 syncedAt="2025-10-01T06:42:20.3255670Z"
2025-10-01 12:39:41.995 +05:30 [INF] TemplateSyncWorker: sweep finished in 137 ms; processed=2; next run ~"2025-10-01T13:09:41.8580405Z"
2025-10-01 12:39:42.040 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 12:39:42.043 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 12:39:42.080 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0Q3OUY0M0JDQThBOUQ1QTlBAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQzgxQUIyMUIzODJGQjEyMDNGOEQ0NTk1RUQ0MTBFNzMA","timestamp":"1759249222","type":"button","button":{"payload":"No","text":"No"}}]},"field":"messages"}]}]}
2025-10-01 12:39:42.082 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-10-01 12:39:42.096 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-10-01 12:39:42.099 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQzgxQUIyMUIzODJGQjEyMDNGOEQ0NTk1RUQ0MTBFNzMA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0Q3OUY0M0JDQThBOUQ1QTlBAA==, Text: No
2025-10-01 12:39:42.126 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0Q3OUY0M0JDQThBOUQ1QTlBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-10-01 12:39:42.151 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@__origin_Id_0='e953d2ab-f8e3-471f-bf03-0f6552518568' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0Q3OUY0M0JDQThBOUQ1QTlBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-10-01 12:39:42.169 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__fromDigits_1='918974005240', @__fromRaw_2='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND (c."PhoneNumber" = @__fromDigits_1 OR c."PhoneNumber" = @__fromRaw_2)
LIMIT 1
2025-10-01 12:39:42.236 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__stepId_0='f468d694-c120-4e84-8ef1-024085736ca8'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
WHERE f."CTAFlowStepId" = @__stepId_0
ORDER BY f."ButtonIndex"
2025-10-01 12:39:42.256 +05:30 [INF] 🟨 Falling back to single available link for step "f468d694-c120-4e84-8ef1-024085736ca8"
2025-10-01 12:39:42.258 +05:30 [INF] ✅ Mapped click by TEXT to index 0 (flow="0c5e1825-c899-41f0-b947-388dbffed015", step="f468d694-c120-4e84-8ef1-024085736ca8")
2025-10-01 12:39:42.314 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__sourceStepId_0='f468d694-c120-4e84-8ef1-024085736ca8', @__flowId_1='0c5e1825-c899-41f0-b947-388dbffed015', @__buttonIndex_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-10-01 12:39:42.322 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='f468d694-c120-4e84-8ef1-024085736ca8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-10-01 12:39:42.496 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p0='9ce5c4b1-132e-44bb-9b8c-5fe80479d8ce', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-10-01T07:09:42.3282163Z' (DbType = DateTime), @p7='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p8='e953d2ab-f8e3-471f-bf03-0f6552518568' (Nullable = true), @p9=NULL, @p10='6d9bbedd-1656-4f0e-a933-b8e5eb62ee52' (Nullable = true), @p11=NULL (DbType = Guid), @p12='f468d694-c120-4e84-8ef1-024085736ca8', @p13='welcome_video' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='No'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-10-01 12:39:42.513 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='f468d694-c120-4e84-8ef1-024085736ca8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-10-01 12:39:42.519 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__link_NextStepId_Value_0='00e8efb2-eb9d-4c6d-a516-1ea299da5c61'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__link_NextStepId_Value_0
LIMIT 1
2025-10-01 12:39:42.529 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__fromDigits_1='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__fromDigits_1
LIMIT 1
2025-10-01 12:39:42.542 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BearerToken", c."BusinessId", c."CreatedAt", c."IsActive", c."UpdatedAt", c."Url"
FROM "CustomerWebhookConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-10-01 12:39:42.549 +05:30 [INF] Start processing HTTP request POST https://3585323701f3.ngrok-free.app/api/custom/sendflow
2025-10-01 12:39:42.551 +05:30 [INF] Sending HTTP request POST https://3585323701f3.ngrok-free.app/api/custom/sendflow
2025-10-01 12:39:43.187 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/sendflow - application/json; charset=utf-8 169
2025-10-01 12:39:43.214 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-01 12:39:43.250 +05:30 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-01 12:39:43.251 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:39:43.252 +05:30 [INF] Route matched with {action = "SendTemplate", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplate(xbytechat.api.Features.CustomeApi.DTOs.DirectTemplateSendRequest, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 12:39:43.261 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-01 12:39:43.278 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api) in 24.1583ms
2025-10-01 12:39:43.280 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:39:43.281 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/sendflow - 400 null application/json; charset=utf-8 94.6288ms
2025-10-01 12:39:43.448 +05:30 [INF] Received HTTP response headers after 893.568ms - 400
2025-10-01 12:39:43.450 +05:30 [INF] End processing HTTP request after 900.6396ms - 400
2025-10-01 12:39:43.452 +05:30 [WRN] CTA Journey post failed (400) to https://3585323701f3.ngrok-free.app/api/custom/sendflow: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"To":["The To field is required."],"TemplateId":["The TemplateId field is required."],"PhoneNumberId":["The PhoneNumberId field is required."]},"traceId":"00-8060db9b369dcfdc197cf011138702c7-a53b201da845ddb0-00"}
2025-10-01 12:39:43.472 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:09:43.4704137+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:39:43.786 +05:30 [INF] Received HTTP response headers after 1741.2293ms - 200
2025-10-01 12:39:43.787 +05:30 [INF] End processing HTTP request after 1747.964ms - 200
2025-10-01 12:39:44.042 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__req_FlowConfigId_Value_0='0c5e1825-c899-41f0-b947-388dbffed015'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "CTAFlowSteps" AS c
WHERE c."CTAFlowConfigId" = @__req_FlowConfigId_Value_0
ORDER BY c."StepOrder"
LIMIT 1
2025-10-01 12:39:44.046 +05:30 [INF] [CustomAPI:"cd02a180-e4ef-49cd-b9ae-05051f1ea79f"] Sending welcome_video to ********5240 via META_CLOUD (PNID=673199269218077) video=true
2025-10-01 12:39:44.065 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-10-01 12:39:44.077 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-10-01 12:39:44.087 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 12:39:44.089 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 12:39:45.459 +05:30 [INF] Start processing HTTP request POST https://3585323701f3.ngrok-free.app/api/custom/sendflow
2025-10-01 12:39:45.461 +05:30 [INF] Sending HTTP request POST https://3585323701f3.ngrok-free.app/api/custom/sendflow
2025-10-01 12:39:45.538 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/sendflow - application/json; charset=utf-8 169
2025-10-01 12:39:45.542 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-01 12:39:45.544 +05:30 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-01 12:39:45.545 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:39:45.546 +05:30 [INF] Route matched with {action = "SendTemplate", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplate(xbytechat.api.Features.CustomeApi.DTOs.DirectTemplateSendRequest, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 12:39:45.551 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-01 12:39:45.553 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api) in 4.7164ms
2025-10-01 12:39:45.554 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:39:45.555 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/sendflow - 400 null application/json; charset=utf-8 17.2484ms
2025-10-01 12:39:45.623 +05:30 [INF] Received HTTP response headers after 159.8845ms - 400
2025-10-01 12:39:45.625 +05:30 [INF] End processing HTTP request after 165.2363ms - 400
2025-10-01 12:39:45.626 +05:30 [WRN] CTA Journey post failed (400) to https://3585323701f3.ngrok-free.app/api/custom/sendflow: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"To":["The To field is required."],"TemplateId":["The TemplateId field is required."],"PhoneNumberId":["The PhoneNumberId field is required."]},"traceId":"00-dc7d3a64f6913c284196113fc20b8feb-963e14bfa8fbce96-00"}
2025-10-01 12:39:46.156 +05:30 [INF] Received HTTP response headers after 2066.136ms - 200
2025-10-01 12:39:46.158 +05:30 [INF] End processing HTTP request after 2070.8794ms - 200
2025-10-01 12:39:46.299 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[@p0='4c4a1910-6017-494f-88dd-1dbde5fc2b86', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='[{"i":0,"position":1,"text":"Yes","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"position":2,"text":"No","type":"QUICK_REPLY","subType":"quick_reply"}]', @p3='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p4='f468d694-c120-4e84-8ef1-024085736ca8' (Nullable = true), @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7=NULL, @p8=NULL, @p9=NULL (DbType = DateTime), @p10='2025-10-01T07:09:46.1816292Z' (DbType = DateTime), @p11=NULL, @p12=NULL (DbType = Int32), @p13=NULL (DbType = Boolean), @p14='False', @p15='https://whatsappdata.s3.ap-south-1.amazonaws.com/userMedia/dab49080d80c724aad5ebf158d63df41/vde_templ.mp4', @p16='welcome_video' (Nullable = false), @p17='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA==', @p18=NULL (DbType = Decimal), @p19=NULL, @p20='META_CLOUD', @p21='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA==', @p22='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA==","message_status":"accepted"}]}', @p23='918974005240' (Nullable = false), @p24=NULL (DbType = Guid), @p25=NULL, @p26=NULL (DbType = Guid), @p27='2025-10-01T07:09:46.1816292Z' (Nullable = true) (DbType = DateTime), @p28='custom_api', @p29='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29)
RETURNING "MessageTime";
2025-10-01 12:39:46.327 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__messageLogId_0='4c4a1910-6017-494f-88dd-1dbde5fc2b86', @__businessId_1='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-10-01 12:39:46.369 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p0='5ed9d259-ada9-458f-8259-4936e1f1ae90', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2=NULL, @p3=NULL, @p4='2025-10-01T07:09:46.3302121+00:00' (DbType = DateTime), @p5='send_response' (Nullable = false), @p6=NULL (DbType = Boolean), @p7='4c4a1910-6017-494f-88dd-1dbde5fc2b86' (Nullable = true), @p8='2025-10-01T07:09:46.3305334+00:00' (DbType = DateTime), @p9='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA==","message_status":"accepted"}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 12:39:46.373 +05:30 [INF] [CustomAPI:"cd02a180-e4ef-49cd-b9ae-05051f1ea79f"] Done. success=true msgId=wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA== flow="0c5e1825-c899-41f0-b947-388dbffed015" step="f468d694-c120-4e84-8ef1-024085736ca8"
2025-10-01 12:39:46.376 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-10-01 12:39:46.384 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api) in 8731.3267ms
2025-10-01 12:39:46.386 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:39:46.392 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - 200 null application/json; charset=utf-8 8859.4511ms
2025-10-01 12:39:49.634 +05:30 [INF] Start processing HTTP request POST https://3585323701f3.ngrok-free.app/api/custom/sendflow
2025-10-01 12:39:49.638 +05:30 [INF] Sending HTTP request POST https://3585323701f3.ngrok-free.app/api/custom/sendflow
2025-10-01 12:39:50.463 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/sendflow - application/json; charset=utf-8 169
2025-10-01 12:39:50.466 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-01 12:39:50.467 +05:30 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-01 12:39:50.468 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:39:50.469 +05:30 [INF] Route matched with {action = "SendTemplate", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplate(xbytechat.api.Features.CustomeApi.DTOs.DirectTemplateSendRequest, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 12:39:50.472 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-01 12:39:50.473 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api) in 2.3972ms
2025-10-01 12:39:50.474 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:39:50.475 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/sendflow - 400 null application/json; charset=utf-8 12.6946ms
2025-10-01 12:39:50.612 +05:30 [INF] Received HTTP response headers after 973.5016ms - 400
2025-10-01 12:39:50.614 +05:30 [INF] End processing HTTP request after 979.8265ms - 400
2025-10-01 12:39:50.615 +05:30 [WRN] CTA Journey post failed (400) to https://3585323701f3.ngrok-free.app/api/custom/sendflow: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"To":["The To field is required."],"TemplateId":["The TemplateId field is required."],"PhoneNumberId":["The PhoneNumberId field is required."]},"traceId":"00-9ac853ed66767e7650fa0e01541e55b2-2b18725114283d4b-00"}
2025-10-01 12:39:50.617 +05:30 [INF] 📤 CTAJourney posted: welcome_video_to_template_1 (biz="9841bcab-ca71-439f-8691-d85ada887b01", phone=918974005240, botId=15551622077)
2025-10-01 12:39:50.690 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_TargetStepId_0='00e8efb2-eb9d-4c6d-a516-1ea299da5c61' (Nullable = true), @__8__locals1_context_FlowId_1='0c5e1825-c899-41f0-b947-388dbffed015'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."ProfileNameSlot", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", t."UseProfileName", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."ProfileNameSlot", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c."UseProfileName"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__8__locals1_context_TargetStepId_0 AND c."CTAFlowConfigId" = @__8__locals1_context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-10-01 12:39:50.731 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-10-01 12:39:50.734 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 12:39:50.736 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 12:39:52.270 +05:30 [INF] Received HTTP response headers after 1533.0448ms - 200
2025-10-01 12:39:52.272 +05:30 [INF] End processing HTTP request after 1537.4286ms - 200
2025-10-01 12:39:52.363 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__8__locals1_context_BusinessId_0 AND w."IsActive"
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 12:39:52.366 +05:30 [INF] ➡️ SEND-INTENT flow="0c5e1825-c899-41f0-b947-388dbffed015" step="00e8efb2-eb9d-4c6d-a516-1ea299da5c61" tmpl=template_1 to=918974005240 provider=META_CLOUD/673199269218077
2025-10-01 12:39:52.371 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-10-01 12:39:52.375 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-10-01 12:39:52.380 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 12:39:52.381 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 12:39:53.490 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:09:53.4872554+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:39:53.662 +05:30 [INF] Received HTTP response headers after 1279.9323ms - 200
2025-10-01 12:39:53.663 +05:30 [INF] End processing HTTP request after 1283.679ms - 200
2025-10-01 12:39:53.722 +05:30 [INF] Executed DbCommand (22ms) [Parameters=[@p0='c833ee00-0570-4fd4-b205-95bfcc14b39a', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-10-01T07:09:53.6765051Z' (DbType = DateTime), @p7='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p8='32eb8fc0-b042-4551-8e6c-40488ba88edf' (Nullable = true), @p9='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA==","message_status":"accepted"}]}', @p10='8db7be5d-8751-4442-9b4a-8e90a2f7ac46' (Nullable = true), @p11=NULL (DbType = Guid), @p12='00e8efb2-eb9d-4c6d-a516-1ea299da5c61', @p13='template_1' (Nullable = false), @p14='True', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='32eb8fc0-b042-4551-8e6c-40488ba88edf', @p20='9841bcab-ca71-439f-8691-d85ada887b01', @p21='[{"i":0,"t":"Show Me Template 2","ty":"QUICK_REPLY","v":"","ns":"0f631cc5-7088-49ad-82c6-2f7a13484896"}]', @p22='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p23='00e8efb2-eb9d-4c6d-a516-1ea299da5c61' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26=NULL, @p27=NULL, @p28=NULL (DbType = DateTime), @p29='2025-10-01T07:09:53.6755305Z' (DbType = DateTime), @p30=NULL, @p31='1' (Nullable = true), @p32=NULL (DbType = Boolean), @p33='False', @p34=NULL, @p35='template_1' (Nullable = false), @p36='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA==', @p37=NULL (DbType = Decimal), @p38=NULL, @p39=NULL, @p40=NULL, @p41='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA==","message_status":"accepted"}]}', @p42='918974005240' (Nullable = false), @p43='e953d2ab-f8e3-471f-bf03-0f6552518568' (Nullable = true), @p44=NULL, @p45=NULL (DbType = Guid), @p46='2025-10-01T07:09:53.6755324Z' (Nullable = true) (DbType = DateTime), @p47='flow', @p48='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48)
RETURNING "MessageTime";
2025-10-01 12:39:55.792 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-10-01 12:39:55.797 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:39:55.799 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 12:39:55.802 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA==","status":"sent","timestamp":"1759302597","recipient_id":"918974005240","conversation":{"id":"4c3c0a77b6831b2300f44fd7e5e2f7f8","expiration_timestamp":"1759302597","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:39:55.805 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 12:39:55.806 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:39:55.807 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.3109ms
2025-10-01 12:39:55.808 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA==","status":"sent","timestamp":"1759302597","recipient_id":"918974005240","conversation":{"id":"4c3c0a77b6831b2300f44fd7e5e2f7f8","expiration_timestamp":"1759302597","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:39:55.809 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:39:55.811 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 19.0002ms
2025-10-01 12:39:55.845 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[@__provider_0='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-10-01 12:39:55.851 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 12:39:55.868 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='sent', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:39:55.874 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:39:55.887 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:39:55.898 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='4c3c0a77b6831b2300f44fd7e5e2f7f8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:39:55.905 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='1225874e-cd33-4114-b8bc-993161817869', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='4c3c0a77b6831b2300f44fd7e5e2f7f8', @p4='2025-10-01T07:09:55.8711229+00:00' (DbType = DateTime), @p5='sent' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T07:09:57.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA==","status":"sent","timestamp":"1759302597","recipient_id":"918974005240","conversation":{"id":"4c3c0a77b6831b2300f44fd7e5e2f7f8","expiration_timestamp":"1759302597","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA==', @p14='135c4ac7-1a28-47bd-a9d5-ff3e14c3d82e', @p15='9841bcab-ca71-439f-8691-d85ada887b01', @p16='marketing', @p17='4c3c0a77b6831b2300f44fd7e5e2f7f8', @p18='2025-10-01T07:09:55.8766050+00:00' (DbType = DateTime), @p19='pricing_update' (Nullable = false), @p20='True' (Nullable = true), @p21=NULL (DbType = Guid), @p22='2025-10-01T07:09:57.0000000+00:00' (DbType = DateTime), @p23='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA==","status":"sent","timestamp":"1759302597","recipient_id":"918974005240","conversation":{"id":"4c3c0a77b6831b2300f44fd7e5e2f7f8","expiration_timestamp":"1759302597","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p24=NULL (DbType = Decimal), @p25=NULL, @p26='META_CLOUD' (Nullable = false), @p27='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27);
2025-10-01 12:39:55.922 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 12:39:55.935 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 12:39:56.230 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-10-01 12:39:56.235 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:39:56.236 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 12:39:56.239 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA==","status":"delivered","timestamp":"1759302598","recipient_id":"918974005240","conversation":{"id":"4c3c0a77b6831b2300f44fd7e5e2f7f8","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:39:56.241 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 12:39:56.242 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:39:56.243 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.522ms
2025-10-01 12:39:56.245 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:39:56.246 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 16.4109ms
2025-10-01 12:39:56.251 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA==","status":"delivered","timestamp":"1759302598","recipient_id":"918974005240","conversation":{"id":"4c3c0a77b6831b2300f44fd7e5e2f7f8","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:39:56.254 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 12:39:56.258 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='delivered', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:39:56.261 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:39:56.265 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:39:56.269 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='4c3c0a77b6831b2300f44fd7e5e2f7f8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:39:56.274 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='8ab1bfe9-961b-4cfa-aad6-ce78d4c9d13f', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='4c3c0a77b6831b2300f44fd7e5e2f7f8', @p4='2025-10-01T07:09:56.2604207+00:00' (DbType = DateTime), @p5='delivered' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T07:09:58.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA==","status":"delivered","timestamp":"1759302598","recipient_id":"918974005240","conversation":{"id":"4c3c0a77b6831b2300f44fd7e5e2f7f8","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 12:39:56.279 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 12:39:56.283 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 12:39:56.293 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='32eb8fc0-b042-4551-8e6c-40488ba88edf', @p0='Delivered' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-10-01 12:40:01.384 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 633
2025-10-01 12:40:01.388 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:40:01.389 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 12:40:01.392 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTVCOEE2NjJDMUVBNTBFN0VBQTc5RTk0QkJFMTAyRDIA","timestamp":"1759302603","type":"button","button":{"payload":"Show Me Template 2","text":"Show Me Template 2"}}]},"field":"messages"}]}]}
2025-10-01 12:40:01.394 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 12:40:01.394 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTVCOEE2NjJDMUVBNTBFN0VBQTc5RTk0QkJFMTAyRDIA","timestamp":"1759302603","type":"button","button":{"payload":"Show Me Template 2","text":"Show Me Template 2"}}]},"field":"messages"}]}]}
2025-10-01 12:40:01.395 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:40:01.396 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-10-01 12:40:01.397 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.3868ms
2025-10-01 12:40:01.399 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-10-01 12:40:01.400 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:40:01.400 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTVCOEE2NjJDMUVBNTBFN0VBQTc5RTk0QkJFMTAyRDIA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA==, Text: Show Me Template 2
2025-10-01 12:40:01.402 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 17.9758ms
2025-10-01 12:40:01.406 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-10-01 12:40:01.414 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__origin_Id_0='32eb8fc0-b042-4551-8e6c-40488ba88edf' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-10-01 12:40:01.417 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__fromDigits_1='918974005240', @__fromRaw_2='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND (c."PhoneNumber" = @__fromDigits_1 OR c."PhoneNumber" = @__fromRaw_2)
LIMIT 1
2025-10-01 12:40:01.424 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sourceStepId_0='00e8efb2-eb9d-4c6d-a516-1ea299da5c61', @__flowId_1='0c5e1825-c899-41f0-b947-388dbffed015', @__buttonIndex_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-10-01 12:40:01.428 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='00e8efb2-eb9d-4c6d-a516-1ea299da5c61'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-10-01 12:40:01.432 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='30bf967f-e794-4a4b-b7a4-727de7478807', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-10-01T07:10:01.4310722Z' (DbType = DateTime), @p7='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p8='32eb8fc0-b042-4551-8e6c-40488ba88edf' (Nullable = true), @p9=NULL, @p10='83d93ada-b2b1-4a08-9149-9b9c4b89a901' (Nullable = true), @p11=NULL (DbType = Guid), @p12='00e8efb2-eb9d-4c6d-a516-1ea299da5c61', @p13='template_1' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='Show Me Template 2'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-10-01 12:40:01.436 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='00e8efb2-eb9d-4c6d-a516-1ea299da5c61'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-10-01 12:40:01.440 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__link_NextStepId_Value_0='0f631cc5-7088-49ad-82c6-2f7a13484896'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__link_NextStepId_Value_0
LIMIT 1
2025-10-01 12:40:01.444 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__fromDigits_1='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__fromDigits_1
LIMIT 1
2025-10-01 12:40:01.448 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BearerToken", c."BusinessId", c."CreatedAt", c."IsActive", c."UpdatedAt", c."Url"
FROM "CustomerWebhookConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-10-01 12:40:01.450 +05:30 [INF] Start processing HTTP request POST https://3585323701f3.ngrok-free.app/api/custom/sendflow
2025-10-01 12:40:01.451 +05:30 [INF] Sending HTTP request POST https://3585323701f3.ngrok-free.app/api/custom/sendflow
2025-10-01 12:40:01.578 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-10-01 12:40:01.581 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:40:01.583 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 12:40:01.585 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA==","status":"read","timestamp":"1759302603","recipient_id":"918974005240","conversation":{"id":"4c3c0a77b6831b2300f44fd7e5e2f7f8","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:40:01.587 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 12:40:01.588 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:40:01.590 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.3798ms
2025-10-01 12:40:01.591 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:40:01.593 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 14.163ms
2025-10-01 12:40:01.672 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/sendflow - application/json; charset=utf-8 166
2025-10-01 12:40:01.676 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-01 12:40:01.678 +05:30 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-01 12:40:01.679 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:40:01.680 +05:30 [INF] Route matched with {action = "SendTemplate", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplate(xbytechat.api.Features.CustomeApi.DTOs.DirectTemplateSendRequest, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 12:40:01.683 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-01 12:40:01.684 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api) in 1.8957ms
2025-10-01 12:40:01.686 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:40:01.687 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/sendflow - 400 null application/json; charset=utf-8 15.0222ms
2025-10-01 12:40:01.878 +05:30 [INF] Received HTTP response headers after 425.4496ms - 400
2025-10-01 12:40:01.879 +05:30 [INF] End processing HTTP request after 428.9043ms - 400
2025-10-01 12:40:01.881 +05:30 [WRN] CTA Journey post failed (400) to https://3585323701f3.ngrok-free.app/api/custom/sendflow: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"To":["The To field is required."],"TemplateId":["The TemplateId field is required."],"PhoneNumberId":["The PhoneNumberId field is required."]},"traceId":"00-97e33b5f59f054995a43a0e4894b4894-8750de42cf8d1c1f-00"}
2025-10-01 12:40:03.497 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:10:03.4950295+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:40:03.887 +05:30 [INF] Start processing HTTP request POST https://3585323701f3.ngrok-free.app/api/custom/sendflow
2025-10-01 12:40:03.888 +05:30 [INF] Sending HTTP request POST https://3585323701f3.ngrok-free.app/api/custom/sendflow
2025-10-01 12:40:03.998 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/sendflow - application/json; charset=utf-8 166
2025-10-01 12:40:04.001 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-01 12:40:04.004 +05:30 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-01 12:40:04.005 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:40:04.007 +05:30 [INF] Route matched with {action = "SendTemplate", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplate(xbytechat.api.Features.CustomeApi.DTOs.DirectTemplateSendRequest, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 12:40:04.010 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-01 12:40:04.012 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api) in 2.1534ms
2025-10-01 12:40:04.014 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:40:04.015 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/sendflow - 400 null application/json; charset=utf-8 17.2801ms
2025-10-01 12:40:04.156 +05:30 [INF] Received HTTP response headers after 265.9308ms - 400
2025-10-01 12:40:04.158 +05:30 [INF] End processing HTTP request after 271.3888ms - 400
2025-10-01 12:40:04.160 +05:30 [WRN] CTA Journey post failed (400) to https://3585323701f3.ngrok-free.app/api/custom/sendflow: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"To":["The To field is required."],"TemplateId":["The TemplateId field is required."],"PhoneNumberId":["The PhoneNumberId field is required."]},"traceId":"00-71db5b1eb2530ed5d93713bdd21c6331-2eb3d585c2a01281-00"}
2025-10-01 12:40:08.161 +05:30 [INF] Start processing HTTP request POST https://3585323701f3.ngrok-free.app/api/custom/sendflow
2025-10-01 12:40:08.164 +05:30 [INF] Sending HTTP request POST https://3585323701f3.ngrok-free.app/api/custom/sendflow
2025-10-01 12:40:08.329 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/sendflow - application/json; charset=utf-8 166
2025-10-01 12:40:08.333 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-01 12:40:08.335 +05:30 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-01 12:40:08.336 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:40:08.337 +05:30 [INF] Route matched with {action = "SendTemplate", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplate(xbytechat.api.Features.CustomeApi.DTOs.DirectTemplateSendRequest, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 12:40:08.340 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-01 12:40:08.342 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api) in 2.8983ms
2025-10-01 12:40:08.344 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:40:08.345 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/sendflow - 400 null application/json; charset=utf-8 15.3997ms
2025-10-01 12:40:08.420 +05:30 [INF] Received HTTP response headers after 252.1334ms - 400
2025-10-01 12:40:08.421 +05:30 [INF] End processing HTTP request after 260.4089ms - 400
2025-10-01 12:40:08.423 +05:30 [WRN] CTA Journey post failed (400) to https://3585323701f3.ngrok-free.app/api/custom/sendflow: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"To":["The To field is required."],"TemplateId":["The TemplateId field is required."],"PhoneNumberId":["The PhoneNumberId field is required."]},"traceId":"00-cfa4c987b677a452b1d568fe65451c58-f01490319fe8103f-00"}
2025-10-01 12:40:08.424 +05:30 [INF] 📤 CTAJourney posted: template_1_to_template_2 (biz="9841bcab-ca71-439f-8691-d85ada887b01", phone=918974005240, botId=15551622077)
2025-10-01 12:40:08.429 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_TargetStepId_0='0f631cc5-7088-49ad-82c6-2f7a13484896' (Nullable = true), @__8__locals1_context_FlowId_1='0c5e1825-c899-41f0-b947-388dbffed015'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."ProfileNameSlot", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", t."UseProfileName", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."ProfileNameSlot", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c."UseProfileName"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__8__locals1_context_TargetStepId_0 AND c."CTAFlowConfigId" = @__8__locals1_context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-10-01 12:40:08.433 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-10-01 12:40:08.435 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 12:40:08.437 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 12:40:09.661 +05:30 [INF] Received HTTP response headers after 1222.8039ms - 200
2025-10-01 12:40:09.662 +05:30 [INF] End processing HTTP request after 1226.705ms - 200
2025-10-01 12:40:12.003 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_context_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__8__locals1_context_BusinessId_0 AND w."IsActive"
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 12:40:12.005 +05:30 [INF] ➡️ SEND-INTENT flow="0c5e1825-c899-41f0-b947-388dbffed015" step="0f631cc5-7088-49ad-82c6-2f7a13484896" tmpl=template_2 to=918974005240 provider=META_CLOUD/673199269218077
2025-10-01 12:40:12.009 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-10-01 12:40:12.013 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-10-01 12:40:12.015 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 12:40:12.017 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 12:40:13.310 +05:30 [INF] Received HTTP response headers after 1290.1153ms - 200
2025-10-01 12:40:13.312 +05:30 [INF] End processing HTTP request after 1296.4176ms - 200
2025-10-01 12:40:13.317 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='eaeb1ed1-7a45-4b07-90d0-4e8cc719acb8', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-10-01T07:10:13.3146356Z' (DbType = DateTime), @p7='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p8='58d3390e-993c-49ec-b530-82a4543a971a' (Nullable = true), @p9='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA==","message_status":"accepted"}]}', @p10='8cb5810a-9865-4f38-ba50-95357fd5a224' (Nullable = true), @p11=NULL (DbType = Guid), @p12='0f631cc5-7088-49ad-82c6-2f7a13484896', @p13='template_2' (Nullable = false), @p14='True', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='58d3390e-993c-49ec-b530-82a4543a971a', @p20='9841bcab-ca71-439f-8691-d85ada887b01', @p21=NULL, @p22='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p23='0f631cc5-7088-49ad-82c6-2f7a13484896' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26=NULL, @p27=NULL, @p28=NULL (DbType = DateTime), @p29='2025-10-01T07:10:13.3136745Z' (DbType = DateTime), @p30=NULL, @p31='1' (Nullable = true), @p32=NULL (DbType = Boolean), @p33='False', @p34=NULL, @p35='template_2' (Nullable = false), @p36='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA==', @p37=NULL (DbType = Decimal), @p38=NULL, @p39=NULL, @p40=NULL, @p41='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA==","message_status":"accepted"}]}', @p42='918974005240' (Nullable = false), @p43='32eb8fc0-b042-4551-8e6c-40488ba88edf' (Nullable = true), @p44=NULL, @p45=NULL (DbType = Guid), @p46='2025-10-01T07:10:13.3136755Z' (Nullable = true) (DbType = DateTime), @p47='flow', @p48='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48)
RETURNING "MessageTime";
2025-10-01 12:40:13.322 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA==","status":"read","timestamp":"1759302603","recipient_id":"918974005240","conversation":{"id":"4c3c0a77b6831b2300f44fd7e5e2f7f8","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:40:13.323 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 12:40:13.326 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='read', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:40:13.330 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:40:13.334 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:40:13.337 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='4c3c0a77b6831b2300f44fd7e5e2f7f8'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:40:13.341 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='0e92df30-3fcf-454b-89cf-37706df17ac8', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='4c3c0a77b6831b2300f44fd7e5e2f7f8', @p4='2025-10-01T07:10:13.3291889+00:00' (DbType = DateTime), @p5='read' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T07:10:03.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA==","status":"read","timestamp":"1759302603","recipient_id":"918974005240","conversation":{"id":"4c3c0a77b6831b2300f44fd7e5e2f7f8","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 12:40:13.345 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 12:40:13.349 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMzQxMzRGRUJBODM1MUFENzMyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 12:40:13.354 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='32eb8fc0-b042-4551-8e6c-40488ba88edf', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-10-01 12:40:13.507 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:10:13.5047699+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:40:14.888 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-10-01 12:40:14.890 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:40:14.891 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 12:40:14.894 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA==","status":"sent","timestamp":"1759302616","recipient_id":"918974005240","conversation":{"id":"2df86a0c04b066eac0b923137cb7b563","expiration_timestamp":"1759302616","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:40:14.896 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 12:40:14.896 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA==","status":"sent","timestamp":"1759302616","recipient_id":"918974005240","conversation":{"id":"2df86a0c04b066eac0b923137cb7b563","expiration_timestamp":"1759302616","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:40:14.897 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:40:14.898 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 12:40:14.899 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.8769ms
2025-10-01 12:40:14.903 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:40:14.903 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='sent', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:40:14.904 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 16.5867ms
2025-10-01 12:40:14.909 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:40:14.915 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:40:14.919 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='2df86a0c04b066eac0b923137cb7b563'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:40:14.924 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='19dea577-34ff-4805-9fd2-c8e96efc7dc3', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='2df86a0c04b066eac0b923137cb7b563', @p4='2025-10-01T07:10:14.9139788+00:00' (DbType = DateTime), @p5='pricing_update' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T07:10:16.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA==","status":"sent","timestamp":"1759302616","recipient_id":"918974005240","conversation":{"id":"2df86a0c04b066eac0b923137cb7b563","expiration_timestamp":"1759302616","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA==', @p14='26ba57b0-5f72-4f18-aa92-d46e64dd5719', @p15='9841bcab-ca71-439f-8691-d85ada887b01', @p16='marketing', @p17='2df86a0c04b066eac0b923137cb7b563', @p18='2025-10-01T07:10:14.9074499+00:00' (DbType = DateTime), @p19='sent' (Nullable = false), @p20='True' (Nullable = true), @p21=NULL (DbType = Guid), @p22='2025-10-01T07:10:16.0000000+00:00' (DbType = DateTime), @p23='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA==","status":"sent","timestamp":"1759302616","recipient_id":"918974005240","conversation":{"id":"2df86a0c04b066eac0b923137cb7b563","expiration_timestamp":"1759302616","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p24=NULL (DbType = Decimal), @p25=NULL, @p26='META_CLOUD' (Nullable = false), @p27='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27);
2025-10-01 12:40:14.929 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 12:40:14.933 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 12:40:15.396 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-10-01 12:40:15.399 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:40:15.400 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 12:40:15.403 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA==","status":"sent","timestamp":"1759302617","recipient_id":"918974005240","conversation":{"id":"cc7907e95de2cf49673f9ce4a0e52645","expiration_timestamp":"1759302617","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:40:15.404 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 12:40:15.405 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA==","status":"sent","timestamp":"1759302617","recipient_id":"918974005240","conversation":{"id":"cc7907e95de2cf49673f9ce4a0e52645","expiration_timestamp":"1759302617","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:40:15.406 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:40:15.407 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 12:40:15.408 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.9932ms
2025-10-01 12:40:15.412 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='sent', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:40:15.412 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:40:15.415 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:40:15.416 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 20.2064ms
2025-10-01 12:40:15.420 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:40:15.429 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p4='4c4a1910-6017-494f-88dd-1dbde5fc2b86', @p0='marketing', @p1='cc7907e95de2cf49673f9ce4a0e52645', @p2='2025-09-30T07:10:17.0000000+00:00' (Nullable = true) (DbType = DateTime), @p3='True' (Nullable = true), @p5='2fd830c2-7a6f-4b85-986d-0fb9ee5537d7', @p6='9841bcab-ca71-439f-8691-d85ada887b01', @p7='marketing', @p8='cc7907e95de2cf49673f9ce4a0e52645', @p9='2025-10-01T07:10:15.4145120+00:00' (DbType = DateTime), @p10='sent' (Nullable = false), @p11='True' (Nullable = true), @p12=NULL (DbType = Guid), @p13='2025-10-01T07:10:17.0000000+00:00' (DbType = DateTime), @p14='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA==","status":"sent","timestamp":"1759302617","recipient_id":"918974005240","conversation":{"id":"cc7907e95de2cf49673f9ce4a0e52645","expiration_timestamp":"1759302617","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p15=NULL (DbType = Decimal), @p16=NULL, @p17='META_CLOUD' (Nullable = false), @p18='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA==', @p19='8cebf75c-8082-48d6-97c9-fcc196f3a400', @p20='9841bcab-ca71-439f-8691-d85ada887b01', @p21='marketing', @p22='cc7907e95de2cf49673f9ce4a0e52645', @p23='2025-10-01T07:10:15.4189705+00:00' (DbType = DateTime), @p24='pricing_update' (Nullable = false), @p25='True' (Nullable = true), @p26=NULL (DbType = Guid), @p27='2025-10-01T07:10:17.0000000+00:00' (DbType = DateTime), @p28='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA==","status":"sent","timestamp":"1759302617","recipient_id":"918974005240","conversation":{"id":"cc7907e95de2cf49673f9ce4a0e52645","expiration_timestamp":"1759302617","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p29=NULL (DbType = Decimal), @p30=NULL, @p31='META_CLOUD' (Nullable = false), @p32='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA=='], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "ConversationCategory" = @p0, "ConversationId" = @p1, "ConversationStartedAt" = @p2, "IsChargeable" = @p3
WHERE "Id" = @p4
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32);
2025-10-01 12:40:15.436 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 12:40:15.440 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 12:40:15.601 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-10-01 12:40:15.601 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-10-01 12:40:15.604 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:40:15.606 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:40:15.607 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 12:40:15.608 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 12:40:15.610 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA==","status":"read","timestamp":"1759302617","recipient_id":"918974005240","conversation":{"id":"2df86a0c04b066eac0b923137cb7b563","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:40:15.612 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA==","status":"delivered","timestamp":"1759302617","recipient_id":"918974005240","conversation":{"id":"2df86a0c04b066eac0b923137cb7b563","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:40:15.613 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 12:40:15.613 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA==","status":"read","timestamp":"1759302617","recipient_id":"918974005240","conversation":{"id":"2df86a0c04b066eac0b923137cb7b563","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:40:15.614 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 12:40:15.615 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:40:15.617 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 12:40:15.618 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:40:15.623 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='read', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:40:15.620 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 9.7889ms
2025-10-01 12:40:15.624 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 12.2051ms
2025-10-01 12:40:15.627 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:40:15.628 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:40:15.629 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:40:15.632 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:40:15.634 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 33.0993ms
2025-10-01 12:40:15.635 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 33.9821ms
2025-10-01 12:40:15.639 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='2df86a0c04b066eac0b923137cb7b563'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:40:15.651 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='5dcb17be-ef8b-4ffa-bd73-1e5f24132a75', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='2df86a0c04b066eac0b923137cb7b563', @p4='2025-10-01T07:10:15.6262204+00:00' (DbType = DateTime), @p5='read' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T07:10:17.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA==","status":"read","timestamp":"1759302617","recipient_id":"918974005240","conversation":{"id":"2df86a0c04b066eac0b923137cb7b563","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 12:40:15.655 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 12:40:15.660 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 12:40:15.665 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='58d3390e-993c-49ec-b530-82a4543a971a', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-10-01 12:40:15.668 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA==","status":"delivered","timestamp":"1759302617","recipient_id":"918974005240","conversation":{"id":"2df86a0c04b066eac0b923137cb7b563","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:40:15.669 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 12:40:15.672 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='delivered', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:40:15.676 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:40:15.680 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:40:15.685 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='2df86a0c04b066eac0b923137cb7b563'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:40:15.689 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='9921699b-10d1-49e4-9214-2f7f4dbc30b1', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='2df86a0c04b066eac0b923137cb7b563', @p4='2025-10-01T07:10:15.6752201+00:00' (DbType = DateTime), @p5='delivered' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T07:10:17.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA==","status":"delivered","timestamp":"1759302617","recipient_id":"918974005240","conversation":{"id":"2df86a0c04b066eac0b923137cb7b563","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 12:40:15.694 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 12:40:15.698 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQkQzRDQ0MEUzREFGMkU5NDlCAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 12:40:15.813 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-10-01 12:40:15.816 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:40:15.817 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 12:40:15.819 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA==","status":"read","timestamp":"1759302618","recipient_id":"918974005240","conversation":{"id":"cc7907e95de2cf49673f9ce4a0e52645","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:40:15.820 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 12:40:15.820 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA==","status":"read","timestamp":"1759302618","recipient_id":"918974005240","conversation":{"id":"cc7907e95de2cf49673f9ce4a0e52645","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:40:15.821 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:40:15.822 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 12:40:15.823 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.1679ms
2025-10-01 12:40:15.827 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='read', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:40:15.828 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:40:15.831 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:40:15.832 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 19.2652ms
2025-10-01 12:40:15.836 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:40:15.845 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='3501a8af-e6c9-45b4-a84c-8b1237f020a6', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='cc7907e95de2cf49673f9ce4a0e52645', @p4='2025-10-01T07:10:15.8304317+00:00' (DbType = DateTime), @p5='read' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T07:10:18.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA==","status":"read","timestamp":"1759302618","recipient_id":"918974005240","conversation":{"id":"cc7907e95de2cf49673f9ce4a0e52645","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 12:40:15.849 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 12:40:15.853 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 12:40:15.857 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='4c4a1910-6017-494f-88dd-1dbde5fc2b86', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-10-01 12:40:16.111 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-10-01 12:40:16.114 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:40:16.116 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 12:40:16.119 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA==","status":"delivered","timestamp":"1759302618","recipient_id":"918974005240","conversation":{"id":"cc7907e95de2cf49673f9ce4a0e52645","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:40:16.120 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 12:40:16.121 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA==","status":"delivered","timestamp":"1759302618","recipient_id":"918974005240","conversation":{"id":"cc7907e95de2cf49673f9ce4a0e52645","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:40:16.121 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:40:16.122 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 12:40:16.123 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.0558ms
2025-10-01 12:40:16.126 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='delivered', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:40:16.127 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:40:16.131 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:40:16.132 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 20.9249ms
2025-10-01 12:40:16.136 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:40:16.144 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='f90a4233-911f-4f19-861d-54036fa5b1b9', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='cc7907e95de2cf49673f9ce4a0e52645', @p4='2025-10-01T07:10:16.1298217+00:00' (DbType = DateTime), @p5='delivered' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T07:10:18.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA==","status":"delivered","timestamp":"1759302618","recipient_id":"918974005240","conversation":{"id":"cc7907e95de2cf49673f9ce4a0e52645","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 12:40:16.148 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 12:40:16.152 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDNCMDQ4OTZDRkNBN0YyMkQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 12:40:23.514 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:10:23.5124869+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:40:33.515 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:10:33.5130321+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:40:43.528 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:10:43.5261997+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:40:53.546 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:10:53.5434869+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:41:03.564 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:11:03.5603362+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:41:13.572 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:11:13.5695197+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:41:23.588 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:11:23.5849816+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:41:33.607 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:11:33.6047558+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:41:43.622 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:11:43.6193539+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:41:53.625 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:11:53.6212745+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:42:03.633 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:12:03.6298252+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:42:13.643 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:12:13.6405262+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:42:23.705 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T07:12:23.6970977+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:42:33.720 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:12:33.7174888+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:42:43.733 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:12:43.7306375+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:42:53.745 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:12:53.7430459+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:43:03.754 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:13:03.7514599+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:43:13.776 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:13:13.7737796+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:43:23.779 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:13:23.7767476+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:43:33.794 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:13:33.7911827+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:43:43.805 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:13:43.8036650+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:43:53.816 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:13:53.8140832+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:44:03.835 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:14:03.8296931+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:44:04.500 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/custom/test-webhook?businessId=9841bcab-ca71-439f-8691-d85ada887b01 - null 0
2025-10-01 12:44:04.505 +05:30 [INF] CORS policy execution successful.
2025-10-01 12:44:04.532 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.TestWebhook (xbytechat.api)'
2025-10-01 12:44:04.540 +05:30 [INF] Route matched with {action = "TestWebhook", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestWebhook(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 12:44:04.568 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BearerToken", c."BusinessId", c."CreatedAt", c."IsActive", c."UpdatedAt", c."Url"
FROM "CustomerWebhookConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY COALESCE(c."UpdatedAt", c."CreatedAt") DESC
LIMIT 1
2025-10-01 12:44:04.576 +05:30 [INF] Start processing HTTP request POST https://3585323701f3.ngrok-free.app/api/custom/sendflow
2025-10-01 12:44:04.578 +05:30 [INF] Sending HTTP request POST https://3585323701f3.ngrok-free.app/api/custom/sendflow
2025-10-01 12:44:05.191 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/sendflow - application/json; charset=utf-8 155
2025-10-01 12:44:05.195 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-01 12:44:05.197 +05:30 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-01 12:44:05.200 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:44:05.201 +05:30 [INF] Route matched with {action = "SendTemplate", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplate(xbytechat.api.Features.CustomeApi.DTOs.DirectTemplateSendRequest, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 12:44:05.204 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-01 12:44:05.206 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api) in 3.2995ms
2025-10-01 12:44:05.208 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:44:05.210 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/sendflow - 400 null application/json; charset=utf-8 19.0887ms
2025-10-01 12:44:05.285 +05:30 [INF] Received HTTP response headers after 705.096ms - 400
2025-10-01 12:44:05.287 +05:30 [INF] End processing HTTP request after 710.9345ms - 400
2025-10-01 12:44:05.290 +05:30 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType141`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:44:05.295 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.TestWebhook (xbytechat.api) in 751.5875ms
2025-10-01 12:44:05.297 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.TestWebhook (xbytechat.api)'
2025-10-01 12:44:05.299 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/custom/test-webhook?businessId=9841bcab-ca71-439f-8691-d85ada887b01 - 400 null application/json; charset=utf-8 799.6801ms
2025-10-01 12:44:13.842 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:14:13.8407169+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:44:23.852 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:14:23.8498064+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:44:33.965 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T07:14:33.8646993+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:44:43.968 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:14:43.9663133+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:44:53.974 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:14:53.9725047+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:45:03.993 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:15:03.9910789+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:45:14.001 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:15:13.9990868+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:45:24.015 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:15:24.0118617+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:45:34.026 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:15:34.0232601+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:45:44.036 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:15:44.0342276+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:45:48.392 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-10-01 12:45:48.414 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 22.7743ms
2025-10-01 12:45:48.487 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-10-01 12:45:48.489 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-10-01 12:45:48.496 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 7.0376ms
2025-10-01 12:45:48.514 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 27.2255ms
2025-10-01 12:45:49.088 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-10-01 12:45:49.210 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 122.5124ms
2025-10-01 12:45:54.054 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:15:54.0518731+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:45:56.952 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - application/json 350
2025-10-01 12:45:56.956 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:45:56.963 +05:30 [INF] Route matched with {action = "SendTemplate", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplate(xbytechat.api.Features.CustomeApi.DTOs.DirectTemplateSendRequest, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 12:46:01.327 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__req_PhoneNumberId_0='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."IsActive" AND w."PhoneNumberId" = @__req_PhoneNumberId_0
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 12:46:01.333 +05:30 [INF] [CustomAPI:"5bf2072f-95b7-43e6-8799-3d3595b21764"] Begin send. biz="9841bcab-ca71-439f-8691-d85ada887b01" pnid=673199269218077 to=********5240 template=welcome_video
2025-10-01 12:46:01.339 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-10-01 12:46:01.345 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 12:46:01.347 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 12:46:03.396 +05:30 [INF] Received HTTP response headers after 2047.3319ms - 200
2025-10-01 12:46:03.398 +05:30 [INF] End processing HTTP request after 2053.7612ms - 200
2025-10-01 12:46:03.468 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__req_FlowConfigId_Value_0='0c5e1825-c899-41f0-b947-388dbffed015'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "CTAFlowSteps" AS c
WHERE c."CTAFlowConfigId" = @__req_FlowConfigId_Value_0
ORDER BY c."StepOrder"
LIMIT 1
2025-10-01 12:46:03.472 +05:30 [INF] [CustomAPI:"5bf2072f-95b7-43e6-8799-3d3595b21764"] Sending welcome_video to ********5240 via META_CLOUD (PNID=673199269218077) video=true
2025-10-01 12:46:03.478 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-10-01 12:46:03.483 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-10-01 12:46:03.494 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 12:46:03.496 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 12:46:04.073 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:16:04.0701565+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:46:05.704 +05:30 [INF] Received HTTP response headers after 2207.4299ms - 200
2025-10-01 12:46:05.707 +05:30 [INF] End processing HTTP request after 2213.1484ms - 200
2025-10-01 12:46:05.714 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='3a85344a-7497-488d-9f0f-06c721eb024a', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='[{"i":0,"position":1,"text":"Yes","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"position":2,"text":"No","type":"QUICK_REPLY","subType":"quick_reply"}]', @p3='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p4='f468d694-c120-4e84-8ef1-024085736ca8' (Nullable = true), @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7=NULL, @p8=NULL, @p9=NULL (DbType = DateTime), @p10='2025-10-01T07:16:05.7092023Z' (DbType = DateTime), @p11=NULL, @p12=NULL (DbType = Int32), @p13=NULL (DbType = Boolean), @p14='False', @p15='https://whatsappdata.s3.ap-south-1.amazonaws.com/userMedia/dab49080d80c724aad5ebf158d63df41/vde_templ.mp4', @p16='welcome_video' (Nullable = false), @p17='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA==', @p18=NULL (DbType = Decimal), @p19=NULL, @p20='META_CLOUD', @p21='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA==', @p22='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA==","message_status":"accepted"}]}', @p23='918974005240' (Nullable = false), @p24=NULL (DbType = Guid), @p25=NULL, @p26=NULL (DbType = Guid), @p27='2025-10-01T07:16:05.7092023Z' (Nullable = true) (DbType = DateTime), @p28='custom_api', @p29='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29)
RETURNING "MessageTime";
2025-10-01 12:46:05.721 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__messageLogId_0='3a85344a-7497-488d-9f0f-06c721eb024a', @__businessId_1='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-10-01 12:46:05.727 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='2b41cb1a-2242-46a2-88c8-6ade75f32e4d', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2=NULL, @p3=NULL, @p4='2025-10-01T07:16:05.7245395+00:00' (DbType = DateTime), @p5='send_response' (Nullable = false), @p6=NULL (DbType = Boolean), @p7='3a85344a-7497-488d-9f0f-06c721eb024a' (Nullable = true), @p8='2025-10-01T07:16:05.7245411+00:00' (DbType = DateTime), @p9='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA==","message_status":"accepted"}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 12:46:05.730 +05:30 [INF] [CustomAPI:"5bf2072f-95b7-43e6-8799-3d3595b21764"] Done. success=true msgId=wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA== flow="0c5e1825-c899-41f0-b947-388dbffed015" step="f468d694-c120-4e84-8ef1-024085736ca8"
2025-10-01 12:46:05.732 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-10-01 12:46:05.739 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api) in 8773.5034ms
2025-10-01 12:46:05.742 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:46:05.743 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - 200 null application/json; charset=utf-8 8791.4414ms
2025-10-01 12:46:14.088 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:16:14.0849734+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:46:18.113 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 479
2025-10-01 12:46:18.128 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:46:18.132 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 12:46:18.136 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTU2QkFGQTM3MTZDNTQyQzdCM0M1N0U1NTJGRjhEQjgA","timestamp":"1759302979","text":{"body":"Hi"},"type":"text"}]},"field":"messages"}]}]}
2025-10-01 12:46:18.139 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 12:46:18.140 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTU2QkFGQTM3MTZDNTQyQzdCM0M1N0U1NTJGRjhEQjgA","timestamp":"1759302979","text":{"body":"Hi"},"type":"text"}]},"field":"messages"}]}]}
2025-10-01 12:46:18.141 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:46:18.142 +05:30 [INF] 💬 Routing to InboundMessageProcessor (type: text)
2025-10-01 12:46:18.146 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 10.5514ms
2025-10-01 12:46:18.149 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:46:18.152 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 39.0735ms
2025-10-01 12:46:18.164 +05:30 [WRN] Collection navigations are only considered null if their parent entity is null. Use 'Any' to check whether collection navigation 'Business.WhatsAppSettings' is empty.
2025-10-01 12:46:18.217 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", w0."Id", w0."ApiKey", w0."ApiUrl", w0."BusinessId", w0."CreatedAt", w0."IsActive", w0."PhoneNumberId", w0."Provider", w0."SenderDisplayName", w0."UpdatedAt", w0."WabaId", w0."WebhookCallbackUrl", w0."WebhookSecret", w0."WebhookVerifyToken", w0."WhatsAppBusinessNumber"
FROM "Businesses" AS b
LEFT JOIN "WhatsAppSettings" AS w0 ON b."Id" = w0."BusinessId"
WHERE EXISTS (
    SELECT 1
    FROM "WhatsAppSettings" AS w
    WHERE b."Id" = w."BusinessId" AND w."WhatsAppBusinessNumber" IS NOT NULL)
ORDER BY b."Id"
2025-10-01 12:46:18.285 +05:30 [INF] FindOrCreateAsync: businessId="8390da76-10de-4d76-80f2-68b68f4e2b82", rawPhone=918974005240, normalized=+918974005240
2025-10-01 12:46:18.296 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='8390da76-10de-4d76-80f2-68b68f4e2b82', @__normalized_1='+918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__normalized_1
LIMIT 1
2025-10-01 12:46:18.301 +05:30 [INF] Contact already exists: contactId="d33e1a11-bb37-4360-aacf-7c376a298d78"
2025-10-01 12:46:18.312 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='8390da76-10de-4d76-80f2-68b68f4e2b82', @__phoneDigits_1='918974005240', @__phoneE164_2='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND (c."PhoneNumber" = @__phoneDigits_1 OR c."PhoneNumber" = @__phoneE164_2)
LIMIT 1
2025-10-01 12:46:18.338 +05:30 [INF] Executed DbCommand (15ms) [Parameters=[@__businessId_0='8390da76-10de-4d76-80f2-68b68f4e2b82', @__contactId_1='d33e1a11-bb37-4360-aacf-7c376a298d78'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BusinessId", c."ContactId", c."LastUpdatedAt", c."Mode", c."UpdatedBy"
FROM "ChatSessionStates" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."ContactId" = @__contactId_1
LIMIT 1
2025-10-01 12:46:18.374 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='d388aeb9-b710-44dc-871d-d31d45ac8351', @p1='8390da76-10de-4d76-80f2-68b68f4e2b82', @p2=NULL, @p3=NULL (DbType = Guid), @p4=NULL (DbType = Guid), @p5=NULL (DbType = Guid), @p6='d33e1a11-bb37-4360-aacf-7c376a298d78' (Nullable = true), @p7=NULL, @p8=NULL, @p9=NULL (DbType = DateTime), @p10='2025-10-01T07:16:18.3438557Z' (DbType = DateTime), @p11=NULL, @p12=NULL (DbType = Int32), @p13=NULL (DbType = Boolean), @p14='True', @p15=NULL, @p16='Hi' (Nullable = false), @p17=NULL, @p18=NULL (DbType = Decimal), @p19=NULL, @p20=NULL, @p21=NULL, @p22=NULL, @p23='918974005240' (Nullable = false), @p24=NULL (DbType = Guid), @p25=NULL, @p26=NULL (DbType = Guid), @p27='2025-10-01T07:16:18.3438561Z' (Nullable = true) (DbType = DateTime), @p28=NULL, @p29='received' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29)
RETURNING "MessageTime";
2025-10-01 12:46:18.401 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__businessId_0='8390da76-10de-4d76-80f2-68b68f4e2b82', @__keyword_2='hi'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."BusinessId", a."CreatedAt", a."EdgesJson", a."IsActive", a."Name", a."NodesJson", a."TriggerKeyword", a."UpdatedAt"
FROM "AutomationFlows" AS a
WHERE a."BusinessId" = @__businessId_0 AND a."TriggerKeyword" ILIKE @__keyword_2 ESCAPE '' AND a."IsActive"
LIMIT 1
2025-10-01 12:46:18.407 +05:30 [INF] TryRun: No matching automation flow found for keyword: 'hi'
2025-10-01 12:46:18.409 +05:30 [INF] 🕵️ No automation flow matched keyword: hi
2025-10-01 12:46:18.411 +05:30 [INF] 🚫 Skipping inbox sync: chat mode is not 'agent'
2025-10-01 12:46:24.099 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:16:24.0963164+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:46:34.109 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:16:34.1067351+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:46:40.169 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - application/json 350
2025-10-01 12:46:40.175 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:46:40.177 +05:30 [INF] Route matched with {action = "SendTemplate", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplate(xbytechat.api.Features.CustomeApi.DTOs.DirectTemplateSendRequest, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 12:46:40.183 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__req_PhoneNumberId_0='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."IsActive" AND w."PhoneNumberId" = @__req_PhoneNumberId_0
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 12:46:40.188 +05:30 [INF] [CustomAPI:"d9b7a65b-ff08-4435-86f7-08d302b0222b"] Begin send. biz="9841bcab-ca71-439f-8691-d85ada887b01" pnid=673199269218077 to=********5240 template=welcome_video
2025-10-01 12:46:40.193 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-10-01 12:46:40.197 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 12:46:40.198 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 12:46:40.537 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-10-01 12:46:40.544 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:46:40.546 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 12:46:40.549 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA==","status":"sent","timestamp":"1759303002","recipient_id":"918974005240","conversation":{"id":"8fc56205e8324a8f129f1b20b72bec74","expiration_timestamp":"1759303002","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:46:40.551 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 12:46:40.552 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA==","status":"sent","timestamp":"1759303002","recipient_id":"918974005240","conversation":{"id":"8fc56205e8324a8f129f1b20b72bec74","expiration_timestamp":"1759303002","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:46:40.552 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:46:40.559 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 11.2383ms
2025-10-01 12:46:40.561 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__provider_0='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-10-01 12:46:40.562 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:46:40.565 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 12:46:40.567 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 30.0209ms
2025-10-01 12:46:40.571 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='sent', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:46:40.580 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:46:40.586 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:46:40.596 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p4='3a85344a-7497-488d-9f0f-06c721eb024a', @p0='marketing', @p1='8fc56205e8324a8f129f1b20b72bec74', @p2='2025-09-30T07:16:42.0000000+00:00' (Nullable = true) (DbType = DateTime), @p3='True' (Nullable = true), @p5='4ebaaa71-8e39-46fe-8eff-89490998833d', @p6='9841bcab-ca71-439f-8691-d85ada887b01', @p7='marketing', @p8='8fc56205e8324a8f129f1b20b72bec74', @p9='2025-10-01T07:16:40.5834298+00:00' (DbType = DateTime), @p10='pricing_update' (Nullable = false), @p11='True' (Nullable = true), @p12=NULL (DbType = Guid), @p13='2025-10-01T07:16:42.0000000+00:00' (DbType = DateTime), @p14='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA==","status":"sent","timestamp":"1759303002","recipient_id":"918974005240","conversation":{"id":"8fc56205e8324a8f129f1b20b72bec74","expiration_timestamp":"1759303002","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p15=NULL (DbType = Decimal), @p16=NULL, @p17='META_CLOUD' (Nullable = false), @p18='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA==', @p19='98857f39-86ee-48cb-80e6-fd52696ae1a9', @p20='9841bcab-ca71-439f-8691-d85ada887b01', @p21='marketing', @p22='8fc56205e8324a8f129f1b20b72bec74', @p23='2025-10-01T07:16:40.5781666+00:00' (DbType = DateTime), @p24='sent' (Nullable = false), @p25='True' (Nullable = true), @p26=NULL (DbType = Guid), @p27='2025-10-01T07:16:42.0000000+00:00' (DbType = DateTime), @p28='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA==","status":"sent","timestamp":"1759303002","recipient_id":"918974005240","conversation":{"id":"8fc56205e8324a8f129f1b20b72bec74","expiration_timestamp":"1759303002","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p29=NULL (DbType = Decimal), @p30=NULL, @p31='META_CLOUD' (Nullable = false), @p32='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA=='], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "ConversationCategory" = @p0, "ConversationId" = @p1, "ConversationStartedAt" = @p2, "IsChargeable" = @p3
WHERE "Id" = @p4
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32);
2025-10-01 12:46:40.607 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 12:46:40.615 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 12:46:41.961 +05:30 [INF] Received HTTP response headers after 1761.2324ms - 200
2025-10-01 12:46:41.973 +05:30 [INF] End processing HTTP request after 1776.7412ms - 200
2025-10-01 12:46:41.977 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-10-01 12:46:41.980 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:46:41.982 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 12:46:41.985 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA==","status":"delivered","timestamp":"1759303003","recipient_id":"918974005240","conversation":{"id":"8fc56205e8324a8f129f1b20b72bec74","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:46:41.986 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 12:46:41.987 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA==","status":"delivered","timestamp":"1759303003","recipient_id":"918974005240","conversation":{"id":"8fc56205e8324a8f129f1b20b72bec74","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:46:41.987 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:46:41.989 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 12:46:41.991 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.1261ms
2025-10-01 12:46:41.997 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:46:41.997 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='delivered', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:46:41.999 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 22.6716ms
2025-10-01 12:46:42.016 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:46:42.034 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:46:42.042 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='04d3665c-4b42-436f-b6ec-a4f9d574259e', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='8fc56205e8324a8f129f1b20b72bec74', @p4='2025-10-01T07:16:42.0032674+00:00' (DbType = DateTime), @p5='delivered' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T07:16:43.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA==","status":"delivered","timestamp":"1759303003","recipient_id":"918974005240","conversation":{"id":"8fc56205e8324a8f129f1b20b72bec74","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 12:46:42.047 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 12:46:42.052 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 12:46:42.069 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@p1='3a85344a-7497-488d-9f0f-06c721eb024a', @p0='Delivered' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-10-01 12:46:42.070 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-10-01 12:46:42.079 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:46:42.080 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 12:46:42.083 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA==","status":"read","timestamp":"1759303003","recipient_id":"918974005240","conversation":{"id":"8fc56205e8324a8f129f1b20b72bec74","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:46:42.085 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 12:46:42.085 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA==","status":"read","timestamp":"1759303003","recipient_id":"918974005240","conversation":{"id":"8fc56205e8324a8f129f1b20b72bec74","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:46:42.086 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:46:42.089 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.9258ms
2025-10-01 12:46:42.087 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 12:46:42.092 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:46:42.096 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='read', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:46:42.097 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 26.9334ms
2025-10-01 12:46:42.102 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:46:42.110 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:46:42.115 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='aad35cb4-1fc0-4882-b384-d24a96fbcc66', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='8fc56205e8324a8f129f1b20b72bec74', @p4='2025-10-01T07:16:42.1002760+00:00' (DbType = DateTime), @p5='read' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T07:16:43.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA==","status":"read","timestamp":"1759303003","recipient_id":"918974005240","conversation":{"id":"8fc56205e8324a8f129f1b20b72bec74","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 12:46:42.120 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 12:46:42.126 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 12:46:42.131 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='3a85344a-7497-488d-9f0f-06c721eb024a', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-10-01 12:46:42.141 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__req_FlowConfigId_Value_0='0c5e1825-c899-41f0-b947-388dbffed015'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "CTAFlowSteps" AS c
WHERE c."CTAFlowConfigId" = @__req_FlowConfigId_Value_0
ORDER BY c."StepOrder"
LIMIT 1
2025-10-01 12:46:42.144 +05:30 [INF] [CustomAPI:"d9b7a65b-ff08-4435-86f7-08d302b0222b"] Sending welcome_video to ********5240 via META_CLOUD (PNID=673199269218077) video=true
2025-10-01 12:46:42.148 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-10-01 12:46:42.154 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-10-01 12:46:42.158 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 12:46:42.161 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 12:46:43.087 +05:30 [INF] Received HTTP response headers after 925.0788ms - 200
2025-10-01 12:46:43.089 +05:30 [INF] End processing HTTP request after 931.0731ms - 200
2025-10-01 12:46:43.111 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p0='53861bc7-89ce-4ac0-af0f-d63796be02d0', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='[{"i":0,"position":1,"text":"Yes","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"position":2,"text":"No","type":"QUICK_REPLY","subType":"quick_reply"}]', @p3='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p4='f468d694-c120-4e84-8ef1-024085736ca8' (Nullable = true), @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7=NULL, @p8=NULL, @p9=NULL (DbType = DateTime), @p10='2025-10-01T07:16:43.0914590Z' (DbType = DateTime), @p11=NULL, @p12=NULL (DbType = Int32), @p13=NULL (DbType = Boolean), @p14='False', @p15='https://whatsappdata.s3.ap-south-1.amazonaws.com/userMedia/dab49080d80c724aad5ebf158d63df41/vde_templ.mp4', @p16='welcome_video' (Nullable = false), @p17='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA==', @p18=NULL (DbType = Decimal), @p19=NULL, @p20='META_CLOUD', @p21='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA==', @p22='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA==","message_status":"accepted"}]}', @p23='918974005240' (Nullable = false), @p24=NULL (DbType = Guid), @p25=NULL, @p26=NULL (DbType = Guid), @p27='2025-10-01T07:16:43.0914590Z' (Nullable = true) (DbType = DateTime), @p28='custom_api', @p29='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29)
RETURNING "MessageTime";
2025-10-01 12:46:43.118 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageLogId_0='53861bc7-89ce-4ac0-af0f-d63796be02d0', @__businessId_1='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-10-01 12:46:43.123 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='10440e8b-fc8e-452b-be88-fb8549ffc30e', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2=NULL, @p3=NULL, @p4='2025-10-01T07:16:43.1211305+00:00' (DbType = DateTime), @p5='send_response' (Nullable = false), @p6=NULL (DbType = Boolean), @p7='53861bc7-89ce-4ac0-af0f-d63796be02d0' (Nullable = true), @p8='2025-10-01T07:16:43.1211317+00:00' (DbType = DateTime), @p9='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA==","message_status":"accepted"}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 12:46:43.126 +05:30 [INF] [CustomAPI:"d9b7a65b-ff08-4435-86f7-08d302b0222b"] Done. success=true msgId=wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA== flow="0c5e1825-c899-41f0-b947-388dbffed015" step="f468d694-c120-4e84-8ef1-024085736ca8"
2025-10-01 12:46:43.129 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-10-01 12:46:43.131 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api) in 2951.356ms
2025-10-01 12:46:43.132 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:46:43.134 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - 200 null application/json; charset=utf-8 2964.7943ms
2025-10-01 12:46:44.120 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:16:44.1169564+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:46:46.907 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 603
2025-10-01 12:46:46.911 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:46:46.912 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 12:46:46.916 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTVEMDVGRjNBQ0RBQjcyN0Q2MzZCM0Y4MjZBQTlBNUYA","timestamp":"1759303008","type":"button","button":{"payload":"Yes","text":"Yes"}}]},"field":"messages"}]}]}
2025-10-01 12:46:46.920 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 12:46:46.921 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTVEMDVGRjNBQ0RBQjcyN0Q2MzZCM0Y4MjZBQTlBNUYA","timestamp":"1759303008","type":"button","button":{"payload":"Yes","text":"Yes"}}]},"field":"messages"}]}]}
2025-10-01 12:46:46.922 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:46:46.923 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-10-01 12:46:46.930 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-10-01 12:46:46.930 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 14.8396ms
2025-10-01 12:46:46.930 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTVEMDVGRjNBQ0RBQjcyN0Q2MzZCM0Y4MjZBQTlBNUYA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA==, Text: Yes
2025-10-01 12:46:46.933 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:46:46.940 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-10-01 12:46:46.942 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 34.8641ms
2025-10-01 12:46:46.949 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__origin_Id_0='3a85344a-7497-488d-9f0f-06c721eb024a' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-10-01 12:46:46.961 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__fromDigits_1='918974005240', @__fromRaw_2='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND (c."PhoneNumber" = @__fromDigits_1 OR c."PhoneNumber" = @__fromRaw_2)
LIMIT 1
2025-10-01 12:46:46.971 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__stepId_0='f468d694-c120-4e84-8ef1-024085736ca8'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
WHERE f."CTAFlowStepId" = @__stepId_0
ORDER BY f."ButtonIndex"
2025-10-01 12:46:46.975 +05:30 [INF] ✅ Mapped click by TEXT to index 0 (flow="0c5e1825-c899-41f0-b947-388dbffed015", step="f468d694-c120-4e84-8ef1-024085736ca8")
2025-10-01 12:46:46.981 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sourceStepId_0='f468d694-c120-4e84-8ef1-024085736ca8', @__flowId_1='0c5e1825-c899-41f0-b947-388dbffed015', @__buttonIndex_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-10-01 12:46:46.986 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__stepId_0='f468d694-c120-4e84-8ef1-024085736ca8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-10-01 12:46:46.993 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='0e1af8ac-4d66-4350-8de1-78d44ca10ba8', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-10-01T07:16:46.9902931Z' (DbType = DateTime), @p7='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p8='3a85344a-7497-488d-9f0f-06c721eb024a' (Nullable = true), @p9=NULL, @p10='4f2823f1-6d7f-4e35-9812-20a02df550aa' (Nullable = true), @p11=NULL (DbType = Guid), @p12='f468d694-c120-4e84-8ef1-024085736ca8', @p13='welcome_video' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='Yes'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-10-01 12:46:46.998 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='f468d694-c120-4e84-8ef1-024085736ca8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-10-01 12:46:47.003 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__link_NextStepId_Value_0='00e8efb2-eb9d-4c6d-a516-1ea299da5c61'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__link_NextStepId_Value_0
LIMIT 1
2025-10-01 12:46:47.008 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__fromDigits_1='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__fromDigits_1
LIMIT 1
2025-10-01 12:46:47.014 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BearerToken", c."BusinessId", c."CreatedAt", c."IsActive", c."UpdatedAt", c."Url"
FROM "CustomerWebhookConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-10-01 12:46:47.019 +05:30 [INF] Start processing HTTP request POST https://3585323701f3.ngrok-free.app/api/custom/sendflow
2025-10-01 12:46:47.021 +05:30 [INF] Sending HTTP request POST https://3585323701f3.ngrok-free.app/api/custom/sendflow
2025-10-01 12:46:48.107 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/sendflow - application/json; charset=utf-8 169
2025-10-01 12:46:48.112 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-01 12:46:48.115 +05:30 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-01 12:46:48.117 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:46:48.118 +05:30 [INF] Route matched with {action = "SendTemplate", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplate(xbytechat.api.Features.CustomeApi.DTOs.DirectTemplateSendRequest, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 12:46:48.122 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-01 12:46:48.128 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api) in 6.6878ms
2025-10-01 12:46:48.133 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:46:48.135 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/sendflow - 400 null application/json; charset=utf-8 28.2544ms
2025-10-01 12:46:48.221 +05:30 [INF] Received HTTP response headers after 1198.2743ms - 400
2025-10-01 12:46:48.223 +05:30 [INF] End processing HTTP request after 1204.64ms - 400
2025-10-01 12:46:48.226 +05:30 [WRN] CTA Journey post failed (400) to https://3585323701f3.ngrok-free.app/api/custom/sendflow: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"To":["The To field is required."],"TemplateId":["The TemplateId field is required."],"PhoneNumberId":["The PhoneNumberId field is required."]},"traceId":"00-d40f07fb695d33a6e4f36891a6387f87-1232c7d76ba2ac6e-00"}
2025-10-01 12:46:50.227 +05:30 [INF] Start processing HTTP request POST https://3585323701f3.ngrok-free.app/api/custom/sendflow
2025-10-01 12:46:50.231 +05:30 [INF] Sending HTTP request POST https://3585323701f3.ngrok-free.app/api/custom/sendflow
2025-10-01 12:46:50.359 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/sendflow - application/json; charset=utf-8 169
2025-10-01 12:46:50.364 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-01 12:46:50.368 +05:30 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-01 12:46:50.371 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:46:50.372 +05:30 [INF] Route matched with {action = "SendTemplate", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplate(xbytechat.api.Features.CustomeApi.DTOs.DirectTemplateSendRequest, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 12:46:50.376 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-01 12:46:50.379 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api) in 3.5422ms
2025-10-01 12:46:50.381 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:46:50.382 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/sendflow - 400 null application/json; charset=utf-8 24.2843ms
2025-10-01 12:46:50.459 +05:30 [INF] Received HTTP response headers after 227.0707ms - 400
2025-10-01 12:46:50.462 +05:30 [INF] End processing HTTP request after 234.2483ms - 400
2025-10-01 12:46:50.463 +05:30 [WRN] CTA Journey post failed (400) to https://3585323701f3.ngrok-free.app/api/custom/sendflow: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"To":["The To field is required."],"TemplateId":["The TemplateId field is required."],"PhoneNumberId":["The PhoneNumberId field is required."]},"traceId":"00-5694b0a9ce9d50c91943441021b389a0-e314c14b23f7cb81-00"}
2025-10-01 12:46:54.125 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:16:54.1222813+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:46:54.475 +05:30 [INF] Start processing HTTP request POST https://3585323701f3.ngrok-free.app/api/custom/sendflow
2025-10-01 12:46:54.477 +05:30 [INF] Sending HTTP request POST https://3585323701f3.ngrok-free.app/api/custom/sendflow
2025-10-01 12:47:04.137 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:17:04.1341881+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:47:04.412 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/sendflow - application/json; charset=utf-8 169
2025-10-01 12:47:04.417 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-01 12:47:04.419 +05:30 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-01 12:47:04.421 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:47:04.423 +05:30 [INF] Route matched with {action = "SendTemplate", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplate(xbytechat.api.Features.CustomeApi.DTOs.DirectTemplateSendRequest, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 12:47:04.426 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-01 12:47:04.429 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api) in 2.9021ms
2025-10-01 12:47:04.432 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:47:04.433 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/sendflow - 400 null application/json; charset=utf-8 21.1803ms
2025-10-01 12:47:04.559 +05:30 [WRN] CTA Journey post exception to https://3585323701f3.ngrok-free.app/api/custom/sendflow (attempt 3)
System.Threading.Tasks.TaskCanceledException: The request was canceled due to the configured HttpClient.Timeout of 10 seconds elapsing.
 ---> System.TimeoutException: The operation was canceled.
 ---> System.Threading.Tasks.TaskCanceledException: The operation was canceled.
 ---> System.IO.IOException: Unable to read data from the transport connection: The I/O operation has been aborted because of either a thread exit or an application request..
 ---> System.Net.Sockets.SocketException (995): The I/O operation has been aborted because of either a thread exit or an application request.
   --- End of inner exception stack trace ---
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpConnection.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithVersionDetectionAndRetryAsync(HttpRequestMessage request, Boolean async, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, Boolean async, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at Microsoft.Extensions.Http.Logging.LoggingScopeHttpMessageHandler.<SendCoreAsync>g__Core|5_0(HttpRequestMessage request, Boolean useAsync, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   --- End of inner exception stack trace ---
   --- End of inner exception stack trace ---
   at System.Net.Http.HttpClient.HandleFailure(Exception e, Boolean telemetryStarted, HttpResponseMessage response, CancellationTokenSource cts, CancellationToken cancellationToken, CancellationTokenSource pendingRequestsCts)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at xbytechat.api.Features.CustomeApi.Services.CtaJourneyPublisher.PublishAsync(Guid businessId, CtaJourneyEventDto dto, CancellationToken ct)
2025-10-01 12:47:04.577 +05:30 [INF] 📤 CTAJourney posted: welcome_video_to_template_1 (biz="9841bcab-ca71-439f-8691-d85ada887b01", phone=918974005240, botId=15551622077)
2025-10-01 12:47:04.582 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_TargetStepId_0='00e8efb2-eb9d-4c6d-a516-1ea299da5c61' (Nullable = true), @__8__locals1_context_FlowId_1='0c5e1825-c899-41f0-b947-388dbffed015'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."ProfileNameSlot", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", t."UseProfileName", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."ProfileNameSlot", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c."UseProfileName"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__8__locals1_context_TargetStepId_0 AND c."CTAFlowConfigId" = @__8__locals1_context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-10-01 12:47:04.589 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-10-01 12:47:04.593 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 12:47:04.595 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 12:47:05.846 +05:30 [INF] Received HTTP response headers after 1250.1178ms - 200
2025-10-01 12:47:05.848 +05:30 [INF] End processing HTTP request after 1255.4752ms - 200
2025-10-01 12:47:05.928 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_context_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__8__locals1_context_BusinessId_0 AND w."IsActive"
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 12:47:05.932 +05:30 [INF] ➡️ SEND-INTENT flow="0c5e1825-c899-41f0-b947-388dbffed015" step="00e8efb2-eb9d-4c6d-a516-1ea299da5c61" tmpl=template_1 to=918974005240 provider=META_CLOUD/673199269218077
2025-10-01 12:47:05.936 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-10-01 12:47:05.941 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-10-01 12:47:05.947 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 12:47:05.950 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 12:47:06.162 +05:30 [ERR] Unobserved task exception
System.AggregateException: A Task's exception(s) were not observed either by Waiting on the Task or accessing its Exception property. As a result, the unobserved exception was rethrown by the finalizer thread. (One or more errors occurred. (Failed to load configuration from file 'D:\xbytechat\xbytechat-api\xbytechat-api\appsettings.Development.json'.))
 ---> System.AggregateException: One or more errors occurred. (Failed to load configuration from file 'D:\xbytechat\xbytechat-api\xbytechat-api\appsettings.Development.json'.)
 ---> System.IO.InvalidDataException: Failed to load configuration from file 'D:\xbytechat\xbytechat-api\xbytechat-api\appsettings.Development.json'.
 ---> System.FormatException: Could not parse the JSON file.
 ---> System.Text.Json.JsonReaderException: '"' is invalid after a value. Expected either ',', '}', or ']'. LineNumber: 67 | BytePositionInLine: 8.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.ConsumeNextTokenUntilAfterAllCommentsAreSkipped(Byte marker)
   at System.Text.Json.Utf8JsonReader.ConsumeNextToken(Byte marker)
   at System.Text.Json.Utf8JsonReader.ConsumeNextTokenOrRollback(Byte marker)
   at System.Text.Json.Utf8JsonReader.ReadSingleSegment()
   at System.Text.Json.Utf8JsonReader.Read()
   at System.Text.Json.JsonDocument.Parse(ReadOnlySpan`1 utf8JsonSpan, JsonReaderOptions readerOptions, MetadataDb& database, StackRowStack& stack)
   at System.Text.Json.JsonDocument.Parse(ReadOnlyMemory`1 utf8Json, JsonReaderOptions readerOptions, Byte[] extraRentedArrayPoolBytes, PooledByteBufferWriter extraPooledByteBufferWriter)
   at System.Text.Json.JsonDocument.Parse(ReadOnlyMemory`1 json, JsonDocumentOptions options)
   at System.Text.Json.JsonDocument.Parse(String json, JsonDocumentOptions options)
   at Microsoft.Extensions.Configuration.Json.JsonConfigurationFileParser.ParseStream(Stream input)
   at Microsoft.Extensions.Configuration.Json.JsonConfigurationProvider.Load(Stream stream)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.Configuration.Json.JsonConfigurationProvider.Load(Stream stream)
   at Microsoft.Extensions.Configuration.FileConfigurationProvider.Load(Boolean reload)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.Configuration.FileConfigurationProvider.Load(Boolean reload)
   at Microsoft.Extensions.Primitives.ChangeToken.ChangeTokenRegistration`1.OnChangeTokenFired()
   at System.Threading.CancellationTokenSource.Invoke(Delegate d, Object state, CancellationTokenSource source)
   at System.Threading.CancellationTokenSource.ExecuteCallbackHandlers(Boolean throwOnFirstException)
   --- End of inner exception stack trace ---
   at System.Threading.CancellationTokenSource.ExecuteCallbackHandlers(Boolean throwOnFirstException)
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
   --- End of inner exception stack trace ---
2025-10-01 12:47:06.186 +05:30 [ERR] Unobserved task exception
System.AggregateException: A Task's exception(s) were not observed either by Waiting on the Task or accessing its Exception property. As a result, the unobserved exception was rethrown by the finalizer thread. (One or more errors occurred. (Failed to load configuration from file 'D:\xbytechat\xbytechat-api\xbytechat-api\appsettings.Development.json'.))
 ---> System.AggregateException: One or more errors occurred. (Failed to load configuration from file 'D:\xbytechat\xbytechat-api\xbytechat-api\appsettings.Development.json'.)
 ---> System.IO.InvalidDataException: Failed to load configuration from file 'D:\xbytechat\xbytechat-api\xbytechat-api\appsettings.Development.json'.
 ---> System.FormatException: Could not parse the JSON file.
 ---> System.Text.Json.JsonReaderException: '"' is invalid after a value. Expected either ',', '}', or ']'. LineNumber: 67 | BytePositionInLine: 8.
   at System.Text.Json.ThrowHelper.ThrowJsonReaderException(Utf8JsonReader& json, ExceptionResource resource, Byte nextByte, ReadOnlySpan`1 bytes)
   at System.Text.Json.Utf8JsonReader.ConsumeNextTokenUntilAfterAllCommentsAreSkipped(Byte marker)
   at System.Text.Json.Utf8JsonReader.ConsumeNextToken(Byte marker)
   at System.Text.Json.Utf8JsonReader.ConsumeNextTokenOrRollback(Byte marker)
   at System.Text.Json.Utf8JsonReader.ReadSingleSegment()
   at System.Text.Json.Utf8JsonReader.Read()
   at System.Text.Json.JsonDocument.Parse(ReadOnlySpan`1 utf8JsonSpan, JsonReaderOptions readerOptions, MetadataDb& database, StackRowStack& stack)
   at System.Text.Json.JsonDocument.Parse(ReadOnlyMemory`1 utf8Json, JsonReaderOptions readerOptions, Byte[] extraRentedArrayPoolBytes, PooledByteBufferWriter extraPooledByteBufferWriter)
   at System.Text.Json.JsonDocument.Parse(ReadOnlyMemory`1 json, JsonDocumentOptions options)
   at System.Text.Json.JsonDocument.Parse(String json, JsonDocumentOptions options)
   at Microsoft.Extensions.Configuration.Json.JsonConfigurationFileParser.ParseStream(Stream input)
   at Microsoft.Extensions.Configuration.Json.JsonConfigurationProvider.Load(Stream stream)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.Configuration.Json.JsonConfigurationProvider.Load(Stream stream)
   at Microsoft.Extensions.Configuration.FileConfigurationProvider.Load(Boolean reload)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.Configuration.FileConfigurationProvider.Load(Boolean reload)
   at Microsoft.Extensions.Primitives.ChangeToken.ChangeTokenRegistration`1.OnChangeTokenFired()
   at System.Threading.CancellationTokenSource.Invoke(Delegate d, Object state, CancellationTokenSource source)
   at System.Threading.CancellationTokenSource.Register(Delegate callback, Object stateForCallback, SynchronizationContext syncContext, ExecutionContext executionContext)
   at System.Threading.CancellationToken.UnsafeRegister(Action`1 callback, Object state)
   at Microsoft.Extensions.Internal.ChangeCallbackRegistrar.UnsafeRegisterChangeCallback[T](Action`1 callback, Object state, CancellationToken token, Action`1 onFailure, T onFailureState)
   at Microsoft.Extensions.Primitives.CancellationChangeToken.RegisterChangeCallback(Action`1 callback, Object state)
   at Microsoft.Extensions.Primitives.ChangeToken.ChangeTokenRegistration`1.RegisterChangeTokenCallback(IChangeToken token)
   at Microsoft.Extensions.Primitives.ChangeToken.ChangeTokenRegistration`1.OnChangeTokenFired()
   at System.Threading.CancellationTokenSource.Invoke(Delegate d, Object state, CancellationTokenSource source)
   at System.Threading.CancellationTokenSource.ExecuteCallbackHandlers(Boolean throwOnFirstException)
   --- End of inner exception stack trace ---
   at System.Threading.CancellationTokenSource.ExecuteCallbackHandlers(Boolean throwOnFirstException)
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
   --- End of inner exception stack trace ---
2025-10-01 12:47:07.085 +05:30 [INF] Received HTTP response headers after 1133.1099ms - 200
2025-10-01 12:47:07.088 +05:30 [INF] End processing HTTP request after 1140.307ms - 200
2025-10-01 12:47:07.095 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='0268cabb-91b0-4ef4-9617-db6a13030b8d', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-10-01T07:17:07.0914829Z' (DbType = DateTime), @p7='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p8='37e7154f-6953-4500-aec4-a71efde39b36' (Nullable = true), @p9='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA==","message_status":"accepted"}]}', @p10='6acc42a0-1c34-4382-8882-c24803112887' (Nullable = true), @p11=NULL (DbType = Guid), @p12='00e8efb2-eb9d-4c6d-a516-1ea299da5c61', @p13='template_1' (Nullable = false), @p14='True', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='37e7154f-6953-4500-aec4-a71efde39b36', @p20='9841bcab-ca71-439f-8691-d85ada887b01', @p21='[{"i":0,"t":"Show Me Template 2","ty":"QUICK_REPLY","v":"","ns":"0f631cc5-7088-49ad-82c6-2f7a13484896"}]', @p22='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p23='00e8efb2-eb9d-4c6d-a516-1ea299da5c61' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26=NULL, @p27=NULL, @p28=NULL (DbType = DateTime), @p29='2025-10-01T07:17:07.0912996Z' (DbType = DateTime), @p30=NULL, @p31='1' (Nullable = true), @p32=NULL (DbType = Boolean), @p33='False', @p34=NULL, @p35='template_1' (Nullable = false), @p36='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA==', @p37=NULL (DbType = Decimal), @p38=NULL, @p39=NULL, @p40=NULL, @p41='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA==","message_status":"accepted"}]}', @p42='918974005240' (Nullable = false), @p43='3a85344a-7497-488d-9f0f-06c721eb024a' (Nullable = true), @p44=NULL, @p45=NULL (DbType = Guid), @p46='2025-10-01T07:17:07.0913008Z' (Nullable = true) (DbType = DateTime), @p47='flow', @p48='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48)
RETURNING "MessageTime";
2025-10-01 12:47:08.407 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-10-01 12:47:08.411 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:47:08.412 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 12:47:08.415 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA==","status":"sent","timestamp":"1759303030","recipient_id":"918974005240","conversation":{"id":"a42a35f6e4c15ecc5e55250a01a840a5","expiration_timestamp":"1759303030","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:47:08.417 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 12:47:08.417 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA==","status":"sent","timestamp":"1759303030","recipient_id":"918974005240","conversation":{"id":"a42a35f6e4c15ecc5e55250a01a840a5","expiration_timestamp":"1759303030","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:47:08.419 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:47:08.420 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 12:47:08.422 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.4667ms
2025-10-01 12:47:08.427 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='sent', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:47:08.427 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:47:08.434 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:47:08.434 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 27.8126ms
2025-10-01 12:47:08.441 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:47:08.455 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='a42a35f6e4c15ecc5e55250a01a840a5'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:47:08.461 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='31d7a2dc-a04a-41ea-8f7f-c63c2b669ceb', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='a42a35f6e4c15ecc5e55250a01a840a5', @p4='2025-10-01T07:17:08.4390995+00:00' (DbType = DateTime), @p5='pricing_update' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T07:17:10.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA==","status":"sent","timestamp":"1759303030","recipient_id":"918974005240","conversation":{"id":"a42a35f6e4c15ecc5e55250a01a840a5","expiration_timestamp":"1759303030","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA==', @p14='5358d2ef-a75a-43dd-8b3e-fc7705ddd255', @p15='9841bcab-ca71-439f-8691-d85ada887b01', @p16='marketing', @p17='a42a35f6e4c15ecc5e55250a01a840a5', @p18='2025-10-01T07:17:08.4313869+00:00' (DbType = DateTime), @p19='sent' (Nullable = false), @p20='True' (Nullable = true), @p21=NULL (DbType = Guid), @p22='2025-10-01T07:17:10.0000000+00:00' (DbType = DateTime), @p23='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA==","status":"sent","timestamp":"1759303030","recipient_id":"918974005240","conversation":{"id":"a42a35f6e4c15ecc5e55250a01a840a5","expiration_timestamp":"1759303030","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p24=NULL (DbType = Decimal), @p25=NULL, @p26='META_CLOUD' (Nullable = false), @p27='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27);
2025-10-01 12:47:08.468 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 12:47:08.473 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 12:47:08.887 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-10-01 12:47:08.890 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:47:08.892 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-10-01 12:47:08.892 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 12:47:08.895 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:47:08.897 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA==","status":"read","timestamp":"1759303031","recipient_id":"918974005240","conversation":{"id":"a42a35f6e4c15ecc5e55250a01a840a5","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:47:08.898 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 12:47:08.900 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 12:47:08.900 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA==","status":"read","timestamp":"1759303031","recipient_id":"918974005240","conversation":{"id":"a42a35f6e4c15ecc5e55250a01a840a5","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:47:08.903 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA==","status":"delivered","timestamp":"1759303031","recipient_id":"918974005240","conversation":{"id":"a42a35f6e4c15ecc5e55250a01a840a5","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:47:08.903 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:47:08.904 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 12:47:08.906 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 12:47:08.908 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 10.8698ms
2025-10-01 12:47:08.911 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='read', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:47:08.910 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:47:08.916 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:47:08.912 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:47:08.920 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:47:08.916 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 14.0891ms
2025-10-01 12:47:08.925 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='a42a35f6e4c15ecc5e55250a01a840a5'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:47:08.921 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 33.8965ms
2025-10-01 12:47:08.930 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='4ebc4036-0928-411f-b6d3-10ac6f3343d2', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='a42a35f6e4c15ecc5e55250a01a840a5', @p4='2025-10-01T07:17:08.9144765+00:00' (DbType = DateTime), @p5='read' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T07:17:11.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA==","status":"read","timestamp":"1759303031","recipient_id":"918974005240","conversation":{"id":"a42a35f6e4c15ecc5e55250a01a840a5","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 12:47:08.926 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:47:08.938 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 45.6476ms
2025-10-01 12:47:08.939 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 12:47:08.946 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 12:47:08.951 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='37e7154f-6953-4500-aec4-a71efde39b36', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-10-01 12:47:08.955 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA==","status":"delivered","timestamp":"1759303031","recipient_id":"918974005240","conversation":{"id":"a42a35f6e4c15ecc5e55250a01a840a5","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:47:08.956 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 12:47:08.960 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='delivered', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:47:08.965 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:47:08.970 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:47:08.974 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='a42a35f6e4c15ecc5e55250a01a840a5'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:47:08.979 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='6fd42573-010f-4112-99ce-c4aa32dde6b0', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='a42a35f6e4c15ecc5e55250a01a840a5', @p4='2025-10-01T07:17:08.9634122+00:00' (DbType = DateTime), @p5='delivered' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T07:17:11.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA==","status":"delivered","timestamp":"1759303031","recipient_id":"918974005240","conversation":{"id":"a42a35f6e4c15ecc5e55250a01a840a5","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 12:47:08.983 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 12:47:08.987 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTQ3Mjg4MzA5NjU4ODAyRTcyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 12:47:14.144 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:17:14.1420479+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:47:24.151 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:17:24.1487053+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:47:32.660 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-10-01 12:47:32.663 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:47:32.666 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 12:47:32.669 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA==","status":"sent","timestamp":"1759303054","recipient_id":"918974005240","conversation":{"id":"2194dd440931c7e07bf87caca2966111","expiration_timestamp":"1759303054","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:47:32.671 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 12:47:32.671 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA==","status":"sent","timestamp":"1759303054","recipient_id":"918974005240","conversation":{"id":"2194dd440931c7e07bf87caca2966111","expiration_timestamp":"1759303054","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:47:32.672 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:47:32.674 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 12:47:32.675 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.798ms
2025-10-01 12:47:32.680 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='sent', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:47:32.681 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:47:32.687 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:47:32.687 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 26.9325ms
2025-10-01 12:47:32.692 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:47:32.702 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p4='53861bc7-89ce-4ac0-af0f-d63796be02d0', @p0='marketing', @p1='2194dd440931c7e07bf87caca2966111', @p2='2025-09-30T07:17:34.0000000+00:00' (Nullable = true) (DbType = DateTime), @p3='True' (Nullable = true), @p5='11c20670-3786-4d3e-8c44-656266637b67', @p6='9841bcab-ca71-439f-8691-d85ada887b01', @p7='marketing', @p8='2194dd440931c7e07bf87caca2966111', @p9='2025-10-01T07:17:32.6846216+00:00' (DbType = DateTime), @p10='sent' (Nullable = false), @p11='True' (Nullable = true), @p12=NULL (DbType = Guid), @p13='2025-10-01T07:17:34.0000000+00:00' (DbType = DateTime), @p14='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA==","status":"sent","timestamp":"1759303054","recipient_id":"918974005240","conversation":{"id":"2194dd440931c7e07bf87caca2966111","expiration_timestamp":"1759303054","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p15=NULL (DbType = Decimal), @p16=NULL, @p17='META_CLOUD' (Nullable = false), @p18='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA==', @p19='4b9c8fb2-1c77-4977-b011-c8fda63355f3', @p20='9841bcab-ca71-439f-8691-d85ada887b01', @p21='marketing', @p22='2194dd440931c7e07bf87caca2966111', @p23='2025-10-01T07:17:32.6898255+00:00' (DbType = DateTime), @p24='pricing_update' (Nullable = false), @p25='True' (Nullable = true), @p26=NULL (DbType = Guid), @p27='2025-10-01T07:17:34.0000000+00:00' (DbType = DateTime), @p28='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA==","status":"sent","timestamp":"1759303054","recipient_id":"918974005240","conversation":{"id":"2194dd440931c7e07bf87caca2966111","expiration_timestamp":"1759303054","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p29=NULL (DbType = Decimal), @p30=NULL, @p31='META_CLOUD' (Nullable = false), @p32='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA=='], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "ConversationCategory" = @p0, "ConversationId" = @p1, "ConversationStartedAt" = @p2, "IsChargeable" = @p3
WHERE "Id" = @p4
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32);
2025-10-01 12:47:32.723 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-10-01 12:47:32.727 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 12:47:32.728 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:47:32.732 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 12:47:32.733 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 12:47:32.738 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA==","status":"read","timestamp":"1759303054","recipient_id":"918974005240","conversation":{"id":"2194dd440931c7e07bf87caca2966111","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:47:32.740 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 12:47:32.740 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA==","status":"read","timestamp":"1759303054","recipient_id":"918974005240","conversation":{"id":"2194dd440931c7e07bf87caca2966111","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:47:32.741 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:47:32.742 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 12:47:32.745 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.0333ms
2025-10-01 12:47:32.749 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='read', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:47:32.750 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:47:32.756 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:47:32.756 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 33.3965ms
2025-10-01 12:47:32.761 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:47:32.771 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='c9598f5b-1fc9-4d39-af1b-c85475edc3b9', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='2194dd440931c7e07bf87caca2966111', @p4='2025-10-01T07:17:32.7538783+00:00' (DbType = DateTime), @p5='read' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T07:17:34.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA==","status":"read","timestamp":"1759303054","recipient_id":"918974005240","conversation":{"id":"2194dd440931c7e07bf87caca2966111","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 12:47:32.776 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 12:47:32.782 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 12:47:32.787 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='53861bc7-89ce-4ac0-af0f-d63796be02d0', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-10-01 12:47:32.827 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-10-01 12:47:32.831 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:47:32.832 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 12:47:32.835 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA==","status":"delivered","timestamp":"1759303054","recipient_id":"918974005240","conversation":{"id":"2194dd440931c7e07bf87caca2966111","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:47:32.838 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 12:47:32.838 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA==","status":"delivered","timestamp":"1759303054","recipient_id":"918974005240","conversation":{"id":"2194dd440931c7e07bf87caca2966111","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:47:32.839 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:47:32.840 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 12:47:32.842 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.0298ms
2025-10-01 12:47:32.846 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='delivered', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:47:32.847 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:47:32.853 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:47:32.854 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 26.4231ms
2025-10-01 12:47:32.860 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:47:32.872 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='ebf9ec53-5ab1-4cf1-bbd6-f57d21fab0d0', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='2194dd440931c7e07bf87caca2966111', @p4='2025-10-01T07:17:32.8514951+00:00' (DbType = DateTime), @p5='delivered' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T07:17:34.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA==","status":"delivered","timestamp":"1759303054","recipient_id":"918974005240","conversation":{"id":"2194dd440931c7e07bf87caca2966111","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 12:47:32.877 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 12:47:32.883 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEQyNEI4RDRCNDUyMDcxRjVFAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 12:47:34.167 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__now_0='2025-10-01T07:17:34.1607785+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:47:44.174 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:17:44.1718181+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:47:54.184 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:17:54.1818721+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:48:04.195 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:18:04.1922602+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:48:14.212 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:18:14.2103929+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:48:24.220 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:18:24.2177592+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:48:29.899 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/getflow/bf82072c-69c1-4f8c-be53-ade19d6776a5 - null null
2025-10-01 12:48:29.904 +05:30 [INF] Executing endpoint 'DevCustomerWebhookConfigController.Get (xbytechat.api)'
2025-10-01 12:48:29.911 +05:30 [INF] Route matched with {action = "Get", controller = "DevCustomerWebhookConfig"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.Guid) on controller DevCustomerWebhookConfigController (xbytechat.api).
2025-10-01 12:48:42.191 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[@__now_0='2025-10-01T07:18:42.1682660+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:48:42.260 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='bf82072c-69c1-4f8c-be53-ade19d6776a5'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BearerToken", c."BusinessId", c."CreatedAt", c."IsActive", c."UpdatedAt", c."Url"
FROM "CustomerWebhookConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
LIMIT 1
2025-10-01 12:48:49.699 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType142`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:48:49.765 +05:30 [INF] Executed action DevCustomerWebhookConfigController.Get (xbytechat.api) in 19851.3322ms
2025-10-01 12:48:49.767 +05:30 [INF] Executed endpoint 'DevCustomerWebhookConfigController.Get (xbytechat.api)'
2025-10-01 12:48:54.005 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/getflow/bf82072c-69c1-4f8c-be53-ade19d6776a5 - 200 null application/json; charset=utf-8 24106.5986ms
2025-10-01 12:48:54.008 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:18:54.0059705+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:49:04.028 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:19:04.0252638+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:49:14.038 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:19:14.0354955+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:49:17.937 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 601
2025-10-01 12:49:17.942 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:49:17.944 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 12:49:17.946 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTU3RDJCMjJFM0M2NzlCQ0QwN0U5QzNEMTg4QTVCNzIA","timestamp":"1759303159","type":"button","button":{"payload":"No","text":"No"}}]},"field":"messages"}]}]}
2025-10-01 12:49:17.951 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 12:49:17.951 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTU3RDJCMjJFM0M2NzlCQ0QwN0U5QzNEMTg4QTVCNzIA","timestamp":"1759303159","type":"button","button":{"payload":"No","text":"No"}}]},"field":"messages"}]}]}
2025-10-01 12:49:17.952 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:49:17.953 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-10-01 12:49:17.955 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 9.0707ms
2025-10-01 12:49:17.956 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-10-01 12:49:17.958 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:49:17.959 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTU3RDJCMjJFM0M2NzlCQ0QwN0U5QzNEMTg4QTVCNzIA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA==, Text: No
2025-10-01 12:49:17.960 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 23.5413ms
2025-10-01 12:49:17.966 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-10-01 12:49:17.978 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__origin_Id_0='3a85344a-7497-488d-9f0f-06c721eb024a' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNjdGODUzRUNGNUM3RUQ2RkExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-10-01 12:49:17.983 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__fromDigits_1='918974005240', @__fromRaw_2='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND (c."PhoneNumber" = @__fromDigits_1 OR c."PhoneNumber" = @__fromRaw_2)
LIMIT 1
2025-10-01 12:49:17.989 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__stepId_0='f468d694-c120-4e84-8ef1-024085736ca8'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
WHERE f."CTAFlowStepId" = @__stepId_0
ORDER BY f."ButtonIndex"
2025-10-01 12:49:17.992 +05:30 [INF] 🟨 Falling back to single available link for step "f468d694-c120-4e84-8ef1-024085736ca8"
2025-10-01 12:49:17.994 +05:30 [INF] ✅ Mapped click by TEXT to index 0 (flow="0c5e1825-c899-41f0-b947-388dbffed015", step="f468d694-c120-4e84-8ef1-024085736ca8")
2025-10-01 12:49:17.999 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__sourceStepId_0='f468d694-c120-4e84-8ef1-024085736ca8', @__flowId_1='0c5e1825-c899-41f0-b947-388dbffed015', @__buttonIndex_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-10-01 12:49:18.004 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__stepId_0='f468d694-c120-4e84-8ef1-024085736ca8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-10-01 12:49:18.027 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p0='ef3feb06-87c5-49ea-ae41-efaac99821e5', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-10-01T07:19:18.0076158Z' (DbType = DateTime), @p7='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p8='3a85344a-7497-488d-9f0f-06c721eb024a' (Nullable = true), @p9=NULL, @p10='dbd28dae-ac69-43ae-a79d-da27476141f2' (Nullable = true), @p11=NULL (DbType = Guid), @p12='f468d694-c120-4e84-8ef1-024085736ca8', @p13='welcome_video' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='No'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-10-01 12:49:18.033 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='f468d694-c120-4e84-8ef1-024085736ca8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-10-01 12:49:18.038 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__link_NextStepId_Value_0='00e8efb2-eb9d-4c6d-a516-1ea299da5c61'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__link_NextStepId_Value_0
LIMIT 1
2025-10-01 12:49:18.043 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__fromDigits_1='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__fromDigits_1
LIMIT 1
2025-10-01 12:49:18.048 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BearerToken", c."BusinessId", c."CreatedAt", c."IsActive", c."UpdatedAt", c."Url"
FROM "CustomerWebhookConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-10-01 12:49:18.052 +05:30 [INF] Start processing HTTP request POST https://3585323701f3.ngrok-free.app/api/custom/sendflow
2025-10-01 12:49:18.054 +05:30 [INF] Sending HTTP request POST https://3585323701f3.ngrok-free.app/api/custom/sendflow
2025-10-01 12:49:19.048 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/sendflow - application/json; charset=utf-8 169
2025-10-01 12:49:19.052 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-01 12:49:19.056 +05:30 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-01 12:49:19.057 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:49:19.059 +05:30 [INF] Route matched with {action = "SendTemplate", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplate(xbytechat.api.Features.CustomeApi.DTOs.DirectTemplateSendRequest, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 12:49:19.061 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-01 12:49:19.065 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api) in 4.3808ms
2025-10-01 12:49:19.068 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:49:19.070 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/sendflow - 400 null application/json; charset=utf-8 22.0394ms
2025-10-01 12:49:19.249 +05:30 [INF] Received HTTP response headers after 1193.7022ms - 400
2025-10-01 12:49:19.251 +05:30 [INF] End processing HTTP request after 1199.7387ms - 400
2025-10-01 12:49:19.253 +05:30 [WRN] CTA Journey post failed (400) to https://3585323701f3.ngrok-free.app/api/custom/sendflow: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"To":["The To field is required."],"TemplateId":["The TemplateId field is required."],"PhoneNumberId":["The PhoneNumberId field is required."]},"traceId":"00-d6e0e3f6703f11d5d841061d32491978-38460dae900ecf13-00"}
2025-10-01 12:49:21.263 +05:30 [INF] Start processing HTTP request POST https://3585323701f3.ngrok-free.app/api/custom/sendflow
2025-10-01 12:49:21.265 +05:30 [INF] Sending HTTP request POST https://3585323701f3.ngrok-free.app/api/custom/sendflow
2025-10-01 12:49:21.508 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/sendflow - application/json; charset=utf-8 169
2025-10-01 12:49:21.513 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-01 12:49:21.516 +05:30 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-01 12:49:21.518 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:49:21.519 +05:30 [INF] Route matched with {action = "SendTemplate", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplate(xbytechat.api.Features.CustomeApi.DTOs.DirectTemplateSendRequest, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 12:49:21.523 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-01 12:49:21.525 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api) in 3.2378ms
2025-10-01 12:49:21.527 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:49:21.529 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/sendflow - 400 null application/json; charset=utf-8 20.6869ms
2025-10-01 12:49:21.707 +05:30 [INF] Received HTTP response headers after 439.9149ms - 400
2025-10-01 12:49:21.709 +05:30 [INF] End processing HTTP request after 445.7884ms - 400
2025-10-01 12:49:21.711 +05:30 [WRN] CTA Journey post failed (400) to https://3585323701f3.ngrok-free.app/api/custom/sendflow: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"To":["The To field is required."],"TemplateId":["The TemplateId field is required."],"PhoneNumberId":["The PhoneNumberId field is required."]},"traceId":"00-6376dd0a48eae4abcdc8db19700d5c52-a8837572e4765059-00"}
2025-10-01 12:49:24.055 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:19:24.0526598+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:49:25.719 +05:30 [INF] Start processing HTTP request POST https://3585323701f3.ngrok-free.app/api/custom/sendflow
2025-10-01 12:49:25.721 +05:30 [INF] Sending HTTP request POST https://3585323701f3.ngrok-free.app/api/custom/sendflow
2025-10-01 12:49:25.803 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/sendflow - application/json; charset=utf-8 169
2025-10-01 12:49:25.809 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-01 12:49:25.812 +05:30 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-01 12:49:25.814 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:49:25.815 +05:30 [INF] Route matched with {action = "SendTemplate", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplate(xbytechat.api.Features.CustomeApi.DTOs.DirectTemplateSendRequest, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 12:49:25.818 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-01 12:49:25.821 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api) in 3.2948ms
2025-10-01 12:49:25.823 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 12:49:25.824 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/sendflow - 400 null application/json; charset=utf-8 21.8547ms
2025-10-01 12:49:25.906 +05:30 [INF] Received HTTP response headers after 183.3244ms - 400
2025-10-01 12:49:25.909 +05:30 [INF] End processing HTTP request after 189.9469ms - 400
2025-10-01 12:49:25.910 +05:30 [WRN] CTA Journey post failed (400) to https://3585323701f3.ngrok-free.app/api/custom/sendflow: {"type":"https://tools.ietf.org/html/rfc9110#section-15.5.1","title":"One or more validation errors occurred.","status":400,"errors":{"To":["The To field is required."],"TemplateId":["The TemplateId field is required."],"PhoneNumberId":["The PhoneNumberId field is required."]},"traceId":"00-6193e17f21e34d302e6fc5b79e0359e5-918a405ed7f69e12-00"}
2025-10-01 12:49:25.912 +05:30 [INF] 📤 CTAJourney posted: welcome_video_to_template_1 (biz="9841bcab-ca71-439f-8691-d85ada887b01", phone=918974005240, botId=15551622077)
2025-10-01 12:49:25.918 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_TargetStepId_0='00e8efb2-eb9d-4c6d-a516-1ea299da5c61' (Nullable = true), @__8__locals1_context_FlowId_1='0c5e1825-c899-41f0-b947-388dbffed015'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."ProfileNameSlot", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", t."UseProfileName", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."ProfileNameSlot", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c."UseProfileName"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__8__locals1_context_TargetStepId_0 AND c."CTAFlowConfigId" = @__8__locals1_context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-10-01 12:49:25.924 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-10-01 12:49:25.928 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 12:49:25.930 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 12:49:27.225 +05:30 [INF] Received HTTP response headers after 1293.5943ms - 200
2025-10-01 12:49:27.227 +05:30 [INF] End processing HTTP request after 1299.4185ms - 200
2025-10-01 12:49:27.273 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__8__locals1_context_BusinessId_0 AND w."IsActive"
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 12:49:27.278 +05:30 [INF] ➡️ SEND-INTENT flow="0c5e1825-c899-41f0-b947-388dbffed015" step="00e8efb2-eb9d-4c6d-a516-1ea299da5c61" tmpl=template_1 to=918974005240 provider=META_CLOUD/673199269218077
2025-10-01 12:49:27.284 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-10-01 12:49:27.291 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-10-01 12:49:27.296 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 12:49:27.298 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 12:49:28.568 +05:30 [INF] Received HTTP response headers after 1268.1729ms - 200
2025-10-01 12:49:28.570 +05:30 [INF] End processing HTTP request after 1273.8862ms - 200
2025-10-01 12:49:28.577 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='39402276-193b-43cd-813a-51c59e1aeb62', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-10-01T07:19:28.5724814Z' (DbType = DateTime), @p7='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p8='9c70b43a-e4e7-41d9-85a4-7962dfcc1767' (Nullable = true), @p9='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA==","message_status":"accepted"}]}', @p10='21f49526-9545-4a85-9fb5-c4bc79162db2' (Nullable = true), @p11=NULL (DbType = Guid), @p12='00e8efb2-eb9d-4c6d-a516-1ea299da5c61', @p13='template_1' (Nullable = false), @p14='True', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='9c70b43a-e4e7-41d9-85a4-7962dfcc1767', @p20='9841bcab-ca71-439f-8691-d85ada887b01', @p21='[{"i":0,"t":"Show Me Template 2","ty":"QUICK_REPLY","v":"","ns":"0f631cc5-7088-49ad-82c6-2f7a13484896"}]', @p22='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p23='00e8efb2-eb9d-4c6d-a516-1ea299da5c61' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26=NULL, @p27=NULL, @p28=NULL (DbType = DateTime), @p29='2025-10-01T07:19:28.5722119Z' (DbType = DateTime), @p30=NULL, @p31='1' (Nullable = true), @p32=NULL (DbType = Boolean), @p33='False', @p34=NULL, @p35='template_1' (Nullable = false), @p36='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA==', @p37=NULL (DbType = Decimal), @p38=NULL, @p39=NULL, @p40=NULL, @p41='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA==","message_status":"accepted"}]}', @p42='918974005240' (Nullable = false), @p43='3a85344a-7497-488d-9f0f-06c721eb024a' (Nullable = true), @p44=NULL, @p45=NULL (DbType = Guid), @p46='2025-10-01T07:19:28.5722142Z' (Nullable = true) (DbType = DateTime), @p47='flow', @p48='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48)
RETURNING "MessageTime";
2025-10-01 12:49:30.011 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-10-01 12:49:30.015 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:49:30.017 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 12:49:30.020 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA==","status":"sent","timestamp":"1759303172","recipient_id":"918974005240","conversation":{"id":"5195cbc69c9abf8c3b488f61c7c89c65","expiration_timestamp":"1759303172","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:49:30.023 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 12:49:30.023 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA==","status":"sent","timestamp":"1759303172","recipient_id":"918974005240","conversation":{"id":"5195cbc69c9abf8c3b488f61c7c89c65","expiration_timestamp":"1759303172","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:49:30.024 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:49:30.028 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-10-01 12:49:30.029 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 10.4241ms
2025-10-01 12:49:30.033 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 12:49:30.034 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:49:30.039 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='sent', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:49:30.041 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 30.2515ms
2025-10-01 12:49:30.046 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:49:30.055 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:49:30.061 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='5195cbc69c9abf8c3b488f61c7c89c65'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:49:30.066 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='06dff5a4-26a7-4fd4-8231-77e79cec6660', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='5195cbc69c9abf8c3b488f61c7c89c65', @p4='2025-10-01T07:19:30.0442205+00:00' (DbType = DateTime), @p5='sent' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T07:19:32.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA==","status":"sent","timestamp":"1759303172","recipient_id":"918974005240","conversation":{"id":"5195cbc69c9abf8c3b488f61c7c89c65","expiration_timestamp":"1759303172","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA==', @p14='4d31cbd6-93a6-4d5a-ad80-0a9ac197ed91', @p15='9841bcab-ca71-439f-8691-d85ada887b01', @p16='marketing', @p17='5195cbc69c9abf8c3b488f61c7c89c65', @p18='2025-10-01T07:19:30.0530228+00:00' (DbType = DateTime), @p19='pricing_update' (Nullable = false), @p20='True' (Nullable = true), @p21=NULL (DbType = Guid), @p22='2025-10-01T07:19:32.0000000+00:00' (DbType = DateTime), @p23='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA==","status":"sent","timestamp":"1759303172","recipient_id":"918974005240","conversation":{"id":"5195cbc69c9abf8c3b488f61c7c89c65","expiration_timestamp":"1759303172","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p24=NULL (DbType = Decimal), @p25=NULL, @p26='META_CLOUD' (Nullable = false), @p27='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27);
2025-10-01 12:49:30.075 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 12:49:30.082 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 12:49:30.373 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-10-01 12:49:30.378 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:49:30.379 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 12:49:30.382 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA==","status":"delivered","timestamp":"1759303172","recipient_id":"918974005240","conversation":{"id":"5195cbc69c9abf8c3b488f61c7c89c65","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:49:30.385 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 12:49:30.385 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA==","status":"delivered","timestamp":"1759303172","recipient_id":"918974005240","conversation":{"id":"5195cbc69c9abf8c3b488f61c7c89c65","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:49:30.386 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:49:30.387 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 12:49:30.390 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.5914ms
2025-10-01 12:49:30.395 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='delivered', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:49:30.395 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:49:30.399 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:49:30.400 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 27.3293ms
2025-10-01 12:49:30.405 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:49:30.415 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='5195cbc69c9abf8c3b488f61c7c89c65'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:49:30.421 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='ee688923-e3cc-421c-839d-abc7f9e52e1f', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='5195cbc69c9abf8c3b488f61c7c89c65', @p4='2025-10-01T07:19:30.3978269+00:00' (DbType = DateTime), @p5='delivered' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T07:19:32.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA==","status":"delivered","timestamp":"1759303172","recipient_id":"918974005240","conversation":{"id":"5195cbc69c9abf8c3b488f61c7c89c65","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 12:49:30.427 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 12:49:30.433 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 12:49:30.439 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='9c70b43a-e4e7-41d9-85a4-7962dfcc1767', @p0='Delivered' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-10-01 12:49:30.631 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-10-01 12:49:30.634 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:49:30.636 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 12:49:30.640 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA==","status":"read","timestamp":"1759303172","recipient_id":"918974005240","conversation":{"id":"5195cbc69c9abf8c3b488f61c7c89c65","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:49:30.643 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 12:49:30.643 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA==","status":"read","timestamp":"1759303172","recipient_id":"918974005240","conversation":{"id":"5195cbc69c9abf8c3b488f61c7c89c65","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:49:30.644 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:49:30.645 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 12:49:30.647 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.8502ms
2025-10-01 12:49:30.652 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='read', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:49:30.652 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:49:30.658 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:49:30.660 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 29.0937ms
2025-10-01 12:49:30.664 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:49:30.675 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='5195cbc69c9abf8c3b488f61c7c89c65'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:49:30.680 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='17684a99-6fb8-421f-9151-41e38db49ab5', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='5195cbc69c9abf8c3b488f61c7c89c65', @p4='2025-10-01T07:19:30.6552963+00:00' (DbType = DateTime), @p5='read' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T07:19:32.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA==","status":"read","timestamp":"1759303172","recipient_id":"918974005240","conversation":{"id":"5195cbc69c9abf8c3b488f61c7c89c65","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 12:49:30.685 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 12:49:30.692 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0YzRjkyODc5RDJFNjQ5NEQ1AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 12:49:30.697 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='9c70b43a-e4e7-41d9-85a4-7962dfcc1767', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-10-01 12:49:34.064 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:19:34.0621355+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:49:44.178 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T07:19:44.0754000+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:49:54.191 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:19:54.1888180+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:50:04.215 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:20:04.2123218+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:50:05.160 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/getflow/bf82072c-69c1-4f8c-be53-ade19d6776a5 - null null
2025-10-01 12:50:05.166 +05:30 [INF] Executing endpoint 'DevCustomerWebhookConfigController.Get (xbytechat.api)'
2025-10-01 12:50:05.168 +05:30 [INF] Route matched with {action = "Get", controller = "DevCustomerWebhookConfig"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.Guid) on controller DevCustomerWebhookConfigController (xbytechat.api).
2025-10-01 12:50:07.840 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='bf82072c-69c1-4f8c-be53-ade19d6776a5'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BearerToken", c."BusinessId", c."CreatedAt", c."IsActive", c."UpdatedAt", c."Url"
FROM "CustomerWebhookConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
LIMIT 1
2025-10-01 12:50:07.847 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType142`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:50:07.850 +05:30 [INF] Executed action DevCustomerWebhookConfigController.Get (xbytechat.api) in 2678.8576ms
2025-10-01 12:50:07.851 +05:30 [INF] Executed endpoint 'DevCustomerWebhookConfigController.Get (xbytechat.api)'
2025-10-01 12:50:07.853 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/getflow/bf82072c-69c1-4f8c-be53-ade19d6776a5 - 200 null application/json; charset=utf-8 2693.5709ms
2025-10-01 12:50:14.225 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:20:14.2225362+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:50:24.230 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:20:24.2287231+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:50:34.251 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@__now_0='2025-10-01T07:20:34.2375072+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:50:44.303 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:20:44.3015104+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:50:54.308 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:20:54.3055533+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:51:04.315 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:21:04.3135630+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:51:14.334 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T07:21:14.3312706+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:51:24.348 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:21:24.3454326+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:51:34.358 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:21:34.3555234+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:51:44.368 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:21:44.3653915+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:51:54.369 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:21:54.3668778+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:52:04.389 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:22:04.3872640+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:52:14.399 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:22:14.3957862+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:52:24.416 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:22:24.4133678+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:52:34.421 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:22:34.4180996+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:52:44.437 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__now_0='2025-10-01T07:22:44.4310911+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:52:54.452 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:22:54.4494812+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:53:04.470 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:23:04.4685414+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:53:14.474 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:23:14.4734789+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:53:24.504 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:23:24.5020465+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:53:34.525 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:23:34.5231721+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:53:44.536 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:23:44.5340083+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:53:54.543 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:23:54.5408180+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:54:04.554 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T07:24:04.5500488+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:54:14.569 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:24:14.5676960+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:54:24.589 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:24:24.5869079+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:54:34.603 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:24:34.6013237+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:54:44.720 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T07:24:44.6228014+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:54:54.727 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:24:54.7243408+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:55:04.742 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:25:04.7394566+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:55:14.750 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:25:14.7474902+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:55:24.772 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:25:24.7696180+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:55:34.777 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:25:34.7755846+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:55:44.784 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:25:44.7814123+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:55:54.795 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:25:54.7912176+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:56:04.810 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:26:04.8079393+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:56:14.824 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:26:14.8217578+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:56:23.867 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-10-01 12:56:23.872 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:56:23.875 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 12:56:23.878 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0Q3OUY0M0JDQThBOUQ1QTlBAA==","status":"delivered","timestamp":"1759249035","recipient_id":"918974005240","conversation":{"id":"e1a3a6b63a8ed9814c442a31ad6f5518","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:56:23.880 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 12:56:23.881 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0Q3OUY0M0JDQThBOUQ1QTlBAA==","status":"delivered","timestamp":"1759249035","recipient_id":"918974005240","conversation":{"id":"e1a3a6b63a8ed9814c442a31ad6f5518","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 12:56:23.882 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:56:23.886 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 8.6441ms
2025-10-01 12:56:23.887 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__provider_0='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-10-01 12:56:23.889 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 12:56:23.892 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 12:56:23.893 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 26.2473ms
2025-10-01 12:56:23.898 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='delivered', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0Q3OUY0M0JDQThBOUQ1QTlBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:56:23.912 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0Q3OUY0M0JDQThBOUQ1QTlBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 12:56:23.919 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0Q3OUY0M0JDQThBOUQ1QTlBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 12:56:23.926 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p3='e953d2ab-f8e3-471f-bf03-0f6552518568', @p0='marketing', @p1='e1a3a6b63a8ed9814c442a31ad6f5518', @p2='True' (Nullable = true), @p4='b1acd701-2b2e-4d66-99bd-a59dc076273d', @p5='9841bcab-ca71-439f-8691-d85ada887b01', @p6='marketing', @p7='e1a3a6b63a8ed9814c442a31ad6f5518', @p8='2025-10-01T07:26:23.9097448+00:00' (DbType = DateTime), @p9='delivered' (Nullable = false), @p10='True' (Nullable = true), @p11=NULL (DbType = Guid), @p12='2025-09-30T16:17:15.0000000+00:00' (DbType = DateTime), @p13='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0Q3OUY0M0JDQThBOUQ1QTlBAA==","status":"delivered","timestamp":"1759249035","recipient_id":"918974005240","conversation":{"id":"e1a3a6b63a8ed9814c442a31ad6f5518","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p14=NULL (DbType = Decimal), @p15=NULL, @p16='META_CLOUD' (Nullable = false), @p17='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0Q3OUY0M0JDQThBOUQ1QTlBAA==', @p18='b2541032-97e8-4369-9609-4b920167db10', @p19='9841bcab-ca71-439f-8691-d85ada887b01', @p20='marketing', @p21='e1a3a6b63a8ed9814c442a31ad6f5518', @p22='2025-10-01T07:26:23.9152525+00:00' (DbType = DateTime), @p23='pricing_update' (Nullable = false), @p24='True' (Nullable = true), @p25=NULL (DbType = Guid), @p26='2025-09-30T16:17:15.0000000+00:00' (DbType = DateTime), @p27='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0Q3OUY0M0JDQThBOUQ1QTlBAA==","status":"delivered","timestamp":"1759249035","recipient_id":"918974005240","conversation":{"id":"e1a3a6b63a8ed9814c442a31ad6f5518","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p28=NULL (DbType = Decimal), @p29=NULL, @p30='META_CLOUD' (Nullable = false), @p31='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0Q3OUY0M0JDQThBOUQ1QTlBAA=='], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "ConversationCategory" = @p0, "ConversationId" = @p1, "IsChargeable" = @p2
WHERE "Id" = @p3
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17);
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31);
2025-10-01 12:56:23.953 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0Q3OUY0M0JDQThBOUQ1QTlBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 12:56:23.958 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSM0Q3OUY0M0JDQThBOUQ1QTlBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 12:56:23.964 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='e953d2ab-f8e3-471f-bf03-0f6552518568', @p0='Delivered' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-10-01 12:56:24.836 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:26:24.8337136+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:56:34.846 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:26:34.8437785+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:56:44.858 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:26:44.8554495+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:56:54.865 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:26:54.8624433+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:57:04.872 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:27:04.8702316+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:57:14.887 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:27:14.8859095+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:57:24.903 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:27:24.9004632+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:57:34.917 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:27:34.9149365+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:57:44.930 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:27:44.9273157+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:57:54.939 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:27:54.9363893+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:58:04.960 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:28:04.9572726+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:58:14.972 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__now_0='2025-10-01T07:28:14.9671613+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:58:24.997 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:28:24.9949855+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:58:35.005 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:28:35.0023235+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:58:45.016 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:28:45.0134607+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:58:55.023 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:28:55.0203933+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:59:05.029 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:29:05.0265694+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:59:15.039 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:29:15.0367313+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:59:25.049 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:29:25.0468552+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:59:35.058 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:29:35.0560428+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:59:39.209 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/getflow/bf82072c-69c1-4f8c-be53-ade19d6776a5 - null null
2025-10-01 12:59:39.213 +05:30 [INF] Executing endpoint 'DevCustomerWebhookConfigController.Get (xbytechat.api)'
2025-10-01 12:59:39.215 +05:30 [INF] Route matched with {action = "Get", controller = "DevCustomerWebhookConfig"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.Guid) on controller DevCustomerWebhookConfigController (xbytechat.api).
2025-10-01 12:59:41.382 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='bf82072c-69c1-4f8c-be53-ade19d6776a5'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BearerToken", c."BusinessId", c."CreatedAt", c."IsActive", c."UpdatedAt", c."Url"
FROM "CustomerWebhookConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
LIMIT 1
2025-10-01 12:59:41.389 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType142`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 12:59:41.393 +05:30 [INF] Executed action DevCustomerWebhookConfigController.Get (xbytechat.api) in 2174.9043ms
2025-10-01 12:59:41.397 +05:30 [INF] Executed endpoint 'DevCustomerWebhookConfigController.Get (xbytechat.api)'
2025-10-01 12:59:41.399 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/getflow/bf82072c-69c1-4f8c-be53-ade19d6776a5 - 200 null application/json; charset=utf-8 2189.9519ms
2025-10-01 12:59:45.176 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__now_0='2025-10-01T07:29:45.0747899+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 12:59:55.189 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:29:55.1863797+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:00:05.196 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:30:05.1942872+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:00:15.209 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:30:15.2075061+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:00:25.217 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:30:25.2149516+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:00:35.226 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:30:35.2236704+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:00:45.235 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:30:45.2328541+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:00:55.245 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:30:55.2403704+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:01:05.252 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:31:05.2495847+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:01:15.261 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:31:15.2584773+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:01:25.274 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T07:31:25.2699595+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:01:35.303 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:31:35.3007780+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:01:45.316 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:31:45.3139852+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:01:55.325 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:31:55.3228777+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:02:05.333 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:32:05.3303059+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:02:15.340 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:32:15.3376242+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:02:25.353 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:32:25.3508705+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:02:35.357 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:32:35.3550403+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:02:45.371 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:32:45.3690221+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:02:55.377 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:32:55.3744392+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:03:05.385 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:33:05.3834056+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:03:15.400 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:33:15.3974139+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:03:25.411 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:33:25.4096304+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:03:35.415 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:33:35.4118310+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:03:45.438 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:33:45.4363948+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:03:55.447 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:33:55.4455997+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:04:05.455 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:34:05.4538436+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:04:15.465 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:34:15.4638555+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:04:20.997 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/getflow/bf82072c-69c1-4f8c-be53-ade19d6776a5 - null null
2025-10-01 13:04:21.001 +05:30 [INF] Executing endpoint 'DevCustomerWebhookConfigController.Get (xbytechat.api)'
2025-10-01 13:04:21.002 +05:30 [INF] Route matched with {action = "Get", controller = "DevCustomerWebhookConfig"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.Guid) on controller DevCustomerWebhookConfigController (xbytechat.api).
2025-10-01 13:04:22.710 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='bf82072c-69c1-4f8c-be53-ade19d6776a5'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BearerToken", c."BusinessId", c."CreatedAt", c."IsActive", c."UpdatedAt", c."Url"
FROM "CustomerWebhookConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
LIMIT 1
2025-10-01 13:04:22.714 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType142`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:04:22.716 +05:30 [INF] Executed action DevCustomerWebhookConfigController.Get (xbytechat.api) in 1712.3194ms
2025-10-01 13:04:22.718 +05:30 [INF] Executed endpoint 'DevCustomerWebhookConfigController.Get (xbytechat.api)'
2025-10-01 13:04:22.720 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/getflow/bf82072c-69c1-4f8c-be53-ade19d6776a5 - 200 null application/json; charset=utf-8 1722.1643ms
2025-10-01 13:04:25.478 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:34:25.4761813+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:04:30.218 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/getflow/bf82072c-69c1-4f8c-be53-ade19d6776a5 - null null
2025-10-01 13:04:30.223 +05:30 [INF] Executing endpoint 'DevCustomerWebhookConfigController.Get (xbytechat.api)'
2025-10-01 13:04:30.224 +05:30 [INF] Route matched with {action = "Get", controller = "DevCustomerWebhookConfig"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.Guid) on controller DevCustomerWebhookConfigController (xbytechat.api).
2025-10-01 13:08:43.629 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@__now_0='2025-10-01T07:38:43.6174359+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:08:43.756 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='bf82072c-69c1-4f8c-be53-ade19d6776a5'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BearerToken", c."BusinessId", c."CreatedAt", c."IsActive", c."UpdatedAt", c."Url"
FROM "CustomerWebhookConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
LIMIT 1
2025-10-01 13:08:43.760 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType142`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:08:43.762 +05:30 [INF] Executed action DevCustomerWebhookConfigController.Get (xbytechat.api) in 253535.4462ms
2025-10-01 13:08:43.765 +05:30 [INF] Executed endpoint 'DevCustomerWebhookConfigController.Get (xbytechat.api)'
2025-10-01 13:08:43.767 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/getflow/bf82072c-69c1-4f8c-be53-ade19d6776a5 - 200 null application/json; charset=utf-8 253548.16ms
2025-10-01 13:08:53.650 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T07:38:53.6467612+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:09:03.660 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:39:03.6587731+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:09:07.483 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/getflow/9841bcab-ca71-439f-8691-d85ada887b01 - null null
2025-10-01 13:09:07.488 +05:30 [INF] Executing endpoint 'DevCustomerWebhookConfigController.Get (xbytechat.api)'
2025-10-01 13:09:07.490 +05:30 [INF] Route matched with {action = "Get", controller = "DevCustomerWebhookConfig"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.Guid) on controller DevCustomerWebhookConfigController (xbytechat.api).
2025-10-01 13:09:15.948 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:39:15.9460699+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:09:18.750 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BearerToken", c."BusinessId", c."CreatedAt", c."IsActive", c."UpdatedAt", c."Url"
FROM "CustomerWebhookConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
LIMIT 1
2025-10-01 13:09:27.895 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:39:27.8931670+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:09:29.791 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType143`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:09:29.849 +05:30 [INF] Executed action DevCustomerWebhookConfigController.Get (xbytechat.api) in 22355.5202ms
2025-10-01 13:09:29.852 +05:30 [INF] Executed endpoint 'DevCustomerWebhookConfigController.Get (xbytechat.api)'
2025-10-01 13:09:32.223 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/getflow/9841bcab-ca71-439f-8691-d85ada887b01 - 200 null application/json; charset=utf-8 24739.9091ms
2025-10-01 13:09:40.637 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:39:40.6358064+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:09:50.649 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:39:50.6468432+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:10:00.657 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:40:00.6536978+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:10:10.310 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - application/json 350
2025-10-01 13:10:10.314 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 13:10:10.316 +05:30 [INF] Route matched with {action = "SendTemplate", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplate(xbytechat.api.Features.CustomeApi.DTOs.DirectTemplateSendRequest, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 13:10:10.323 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__req_PhoneNumberId_0='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."IsActive" AND w."PhoneNumberId" = @__req_PhoneNumberId_0
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 13:10:10.329 +05:30 [INF] [CustomAPI:"56c9ae9e-3575-47c2-93a3-e148c1e8b45a"] Begin send. biz="9841bcab-ca71-439f-8691-d85ada887b01" pnid=673199269218077 to=********5240 template=welcome_video
2025-10-01 13:10:10.338 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-10-01 13:10:10.342 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 13:10:10.344 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 13:10:10.673 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:40:10.6710067+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:10:11.629 +05:30 [INF] Received HTTP response headers after 1283.0537ms - 200
2025-10-01 13:10:11.633 +05:30 [INF] End processing HTTP request after 1291.5704ms - 200
2025-10-01 13:10:11.750 +05:30 [INF] Executed DbCommand (21ms) [Parameters=[@__req_FlowConfigId_Value_0='0c5e1825-c899-41f0-b947-388dbffed015'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "CTAFlowSteps" AS c
WHERE c."CTAFlowConfigId" = @__req_FlowConfigId_Value_0
ORDER BY c."StepOrder"
LIMIT 1
2025-10-01 13:10:11.754 +05:30 [INF] [CustomAPI:"56c9ae9e-3575-47c2-93a3-e148c1e8b45a"] Sending welcome_video to ********5240 via META_CLOUD (PNID=673199269218077) video=true
2025-10-01 13:10:11.760 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-10-01 13:10:11.765 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-10-01 13:10:11.769 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 13:10:11.771 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 13:10:12.738 +05:30 [INF] Received HTTP response headers after 964.3102ms - 200
2025-10-01 13:10:12.741 +05:30 [INF] End processing HTTP request after 971.5621ms - 200
2025-10-01 13:10:12.768 +05:30 [INF] Executed DbCommand (24ms) [Parameters=[@p0='47327f20-addd-42d8-adc6-89a43af0235f', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='[{"i":0,"position":1,"text":"Yes","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"position":2,"text":"No","type":"QUICK_REPLY","subType":"quick_reply"}]', @p3='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p4='f468d694-c120-4e84-8ef1-024085736ca8' (Nullable = true), @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7=NULL, @p8=NULL, @p9=NULL (DbType = DateTime), @p10='2025-10-01T07:40:12.7436999Z' (DbType = DateTime), @p11=NULL, @p12=NULL (DbType = Int32), @p13=NULL (DbType = Boolean), @p14='False', @p15='https://whatsappdata.s3.ap-south-1.amazonaws.com/userMedia/dab49080d80c724aad5ebf158d63df41/vde_templ.mp4', @p16='welcome_video' (Nullable = false), @p17='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA==', @p18=NULL (DbType = Decimal), @p19=NULL, @p20='META_CLOUD', @p21='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA==', @p22='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA==","message_status":"accepted"}]}', @p23='918974005240' (Nullable = false), @p24=NULL (DbType = Guid), @p25=NULL, @p26=NULL (DbType = Guid), @p27='2025-10-01T07:40:12.7436999Z' (Nullable = true) (DbType = DateTime), @p28='custom_api', @p29='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29)
RETURNING "MessageTime";
2025-10-01 13:10:12.776 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageLogId_0='47327f20-addd-42d8-adc6-89a43af0235f', @__businessId_1='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-10-01 13:10:12.784 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='abffbf00-d328-4e28-bb30-30365f98ffb5', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2=NULL, @p3=NULL, @p4='2025-10-01T07:40:12.7813793+00:00' (DbType = DateTime), @p5='send_response' (Nullable = false), @p6=NULL (DbType = Boolean), @p7='47327f20-addd-42d8-adc6-89a43af0235f' (Nullable = true), @p8='2025-10-01T07:40:12.7813813+00:00' (DbType = DateTime), @p9='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA==","message_status":"accepted"}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 13:10:12.788 +05:30 [INF] [CustomAPI:"56c9ae9e-3575-47c2-93a3-e148c1e8b45a"] Done. success=true msgId=wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA== flow="0c5e1825-c899-41f0-b947-388dbffed015" step="f468d694-c120-4e84-8ef1-024085736ca8"
2025-10-01 13:10:12.791 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-10-01 13:10:12.794 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api) in 2474.5177ms
2025-10-01 13:10:12.799 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 13:10:12.801 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - 200 null application/json; charset=utf-8 2491.4746ms
2025-10-01 13:10:19.895 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/getflow/9841bcab-ca71-439f-8691-d85ada887b01 - null null
2025-10-01 13:10:19.900 +05:30 [INF] Executing endpoint 'DevCustomerWebhookConfigController.Get (xbytechat.api)'
2025-10-01 13:10:19.903 +05:30 [INF] Route matched with {action = "Get", controller = "DevCustomerWebhookConfig"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.Guid) on controller DevCustomerWebhookConfigController (xbytechat.api).
2025-10-01 13:10:21.810 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:40:21.2390366+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:10:21.902 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BearerToken", c."BusinessId", c."CreatedAt", c."IsActive", c."UpdatedAt", c."Url"
FROM "CustomerWebhookConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
LIMIT 1
2025-10-01 13:10:21.906 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType143`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:10:21.908 +05:30 [INF] Executed action DevCustomerWebhookConfigController.Get (xbytechat.api) in 2001.5576ms
2025-10-01 13:10:21.911 +05:30 [INF] Executed endpoint 'DevCustomerWebhookConfigController.Get (xbytechat.api)'
2025-10-01 13:10:21.914 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/getflow/9841bcab-ca71-439f-8691-d85ada887b01 - 200 null application/json; charset=utf-8 2018.5545ms
2025-10-01 13:10:22.929 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-10-01 13:10:22.943 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:10:22.950 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:10:22.957 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA==","status":"sent","timestamp":"1759304424","recipient_id":"918974005240","conversation":{"id":"546378a849bb250eb7bae77e4a8fe514","expiration_timestamp":"1759304424","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:10:22.962 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:10:22.962 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA==","status":"sent","timestamp":"1759304424","recipient_id":"918974005240","conversation":{"id":"546378a849bb250eb7bae77e4a8fe514","expiration_timestamp":"1759304424","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:10:22.963 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:10:22.972 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-10-01 13:10:22.973 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 17.3139ms
2025-10-01 13:10:22.981 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:10:22.979 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 13:10:22.988 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 58.7ms
2025-10-01 13:10:22.995 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='sent', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:10:23.011 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:10:23.022 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:10:23.032 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p4='47327f20-addd-42d8-adc6-89a43af0235f', @p0='marketing', @p1='546378a849bb250eb7bae77e4a8fe514', @p2='2025-09-30T07:40:24.0000000+00:00' (Nullable = true) (DbType = DateTime), @p3='True' (Nullable = true), @p5='2991012c-b452-4e82-8680-43376e7ab94b', @p6='9841bcab-ca71-439f-8691-d85ada887b01', @p7='marketing', @p8='546378a849bb250eb7bae77e4a8fe514', @p9='2025-10-01T07:40:23.0088933+00:00' (DbType = DateTime), @p10='sent' (Nullable = false), @p11='True' (Nullable = true), @p12=NULL (DbType = Guid), @p13='2025-10-01T07:40:24.0000000+00:00' (DbType = DateTime), @p14='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA==","status":"sent","timestamp":"1759304424","recipient_id":"918974005240","conversation":{"id":"546378a849bb250eb7bae77e4a8fe514","expiration_timestamp":"1759304424","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p15=NULL (DbType = Decimal), @p16=NULL, @p17='META_CLOUD' (Nullable = false), @p18='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA==', @p19='d195e72c-962a-425e-9af1-4909741cbf3a', @p20='9841bcab-ca71-439f-8691-d85ada887b01', @p21='marketing', @p22='546378a849bb250eb7bae77e4a8fe514', @p23='2025-10-01T07:40:23.0155842+00:00' (DbType = DateTime), @p24='pricing_update' (Nullable = false), @p25='True' (Nullable = true), @p26=NULL (DbType = Guid), @p27='2025-10-01T07:40:24.0000000+00:00' (DbType = DateTime), @p28='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA==","status":"sent","timestamp":"1759304424","recipient_id":"918974005240","conversation":{"id":"546378a849bb250eb7bae77e4a8fe514","expiration_timestamp":"1759304424","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p29=NULL (DbType = Decimal), @p30=NULL, @p31='META_CLOUD' (Nullable = false), @p32='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA=='], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "ConversationCategory" = @p0, "ConversationId" = @p1, "ConversationStartedAt" = @p2, "IsChargeable" = @p3
WHERE "Id" = @p4
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32);
2025-10-01 13:10:23.043 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 13:10:23.048 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 13:10:23.192 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-10-01 13:10:23.197 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:10:23.198 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:10:23.201 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA==","status":"delivered","timestamp":"1759304425","recipient_id":"918974005240","conversation":{"id":"546378a849bb250eb7bae77e4a8fe514","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:10:23.204 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:10:23.204 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA==","status":"delivered","timestamp":"1759304425","recipient_id":"918974005240","conversation":{"id":"546378a849bb250eb7bae77e4a8fe514","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:10:23.205 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:10:23.207 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 13:10:23.209 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.9018ms
2025-10-01 13:10:23.213 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='delivered', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:10:23.214 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:10:23.219 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:10:23.220 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 28.0443ms
2025-10-01 13:10:23.226 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:10:23.235 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='0b34de82-324d-4899-a965-cf553f23177f', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='546378a849bb250eb7bae77e4a8fe514', @p4='2025-10-01T07:40:23.2179053+00:00' (DbType = DateTime), @p5='delivered' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T07:40:25.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA==","status":"delivered","timestamp":"1759304425","recipient_id":"918974005240","conversation":{"id":"546378a849bb250eb7bae77e4a8fe514","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 13:10:23.241 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 13:10:23.246 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 13:10:23.252 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='47327f20-addd-42d8-adc6-89a43af0235f', @p0='Delivered' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-10-01 13:10:26.925 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/getflow/9841bcab-ca71-439f-8691-d85ada887b01 - null null
2025-10-01 13:10:26.929 +05:30 [INF] Executing endpoint 'DevCustomerWebhookConfigController.Get (xbytechat.api)'
2025-10-01 13:10:26.931 +05:30 [INF] Route matched with {action = "Get", controller = "DevCustomerWebhookConfig"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.Guid) on controller DevCustomerWebhookConfigController (xbytechat.api).
2025-10-01 13:10:30.098 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BearerToken", c."BusinessId", c."CreatedAt", c."IsActive", c."UpdatedAt", c."Url"
FROM "CustomerWebhookConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
LIMIT 1
2025-10-01 13:10:30.103 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType143`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:10:30.104 +05:30 [INF] Executed action DevCustomerWebhookConfigController.Get (xbytechat.api) in 3169.9345ms
2025-10-01 13:10:30.105 +05:30 [INF] Executed endpoint 'DevCustomerWebhookConfigController.Get (xbytechat.api)'
2025-10-01 13:10:30.106 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/getflow/9841bcab-ca71-439f-8691-d85ada887b01 - 200 null application/json; charset=utf-8 3180.6015ms
2025-10-01 13:10:31.815 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:40:31.8127867+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:10:41.830 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:40:41.8275753+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:10:51.850 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:40:51.8479003+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:11:01.865 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:41:01.8625414+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:11:11.873 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:41:11.8709310+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:11:21.886 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:41:21.8832944+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:11:31.904 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:41:31.9017469+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:11:41.923 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:41:41.9210021+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:11:51.936 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:41:51.9337596+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:12:01.958 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:42:01.9561583+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:12:11.968 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:42:11.9653762+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:12:21.990 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:42:21.9863474+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:12:32.003 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:42:32.0003148+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:12:42.013 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:42:42.0109181+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:12:52.025 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:42:52.0229697+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:13:02.032 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:43:02.0306040+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:13:12.042 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:43:12.0399499+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:13:22.048 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:43:22.0466933+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:13:32.065 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:43:32.0622958+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:13:42.080 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:43:42.0762626+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:13:52.099 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:43:52.0965239+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:14:02.206 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T07:44:02.1069023+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:14:12.210 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:44:12.2085453+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:14:22.214 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:44:22.2118477+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:14:32.218 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:44:32.2159768+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:14:42.229 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:44:42.2266057+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:14:52.231 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:44:52.2287132+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:15:02.244 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:45:02.2421954+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:15:12.249 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:45:12.2471021+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:15:22.255 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:45:22.2522762+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:15:32.259 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:45:32.2564808+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:15:42.266 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:45:42.2636055+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:15:52.285 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:45:52.2840385+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:16:02.293 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:46:02.2914894+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:16:12.301 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:46:12.3001068+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:16:22.319 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:46:22.3177982+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:16:32.323 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:46:32.3218155+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:16:42.329 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:46:42.3275258+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:16:52.335 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:46:52.3332734+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:17:02.350 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:47:02.3482300+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:17:12.376 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__now_0='2025-10-01T07:47:12.3699885+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:17:22.399 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:47:22.3965828+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:17:32.410 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:47:32.4077914+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:17:42.421 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:47:42.4185288+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:17:52.444 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:47:52.4410792+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:18:02.455 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:48:02.4532050+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:18:12.464 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:48:12.4620552+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:18:22.474 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:48:22.4724168+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:18:32.481 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:48:32.4792362+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:18:42.494 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:48:42.4913164+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:18:52.513 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:48:52.5114891+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:19:02.616 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T07:49:02.5197124+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:19:12.635 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:49:12.6330189+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:19:22.645 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:49:22.6433004+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:19:32.656 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:49:32.6540592+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:19:42.665 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:49:42.6619432+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:19:52.681 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:49:52.6785038+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:20:02.692 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:50:02.6895484+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:20:12.704 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:50:12.7023300+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:20:22.717 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:50:22.7147599+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:20:32.727 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:50:32.7242850+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:20:42.731 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:50:42.7294320+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:20:52.738 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:50:52.7355344+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:21:02.746 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:51:02.7428456+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:21:12.754 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:51:12.7524097+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:21:22.776 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:51:22.7736122+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:21:32.819 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:51:32.8169230+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:21:42.843 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:51:42.8401984+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:21:52.854 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:51:52.8512699+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:22:02.871 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:52:02.8691471+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:22:12.880 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:52:12.8779041+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:22:22.897 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:52:22.8953869+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:22:32.908 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:52:32.9060667+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:22:42.921 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:52:42.9187043+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:22:52.933 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:52:52.9312011+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:23:02.954 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:53:02.9519074+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:23:12.959 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:53:12.9571805+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:23:22.977 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:53:22.9744458+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:23:32.986 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:53:32.9839053+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:23:43.000 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T07:53:42.9964961+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:23:53.017 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:53:53.0155365+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:24:03.148 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__now_0='2025-10-01T07:54:03.0306048+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:24:13.154 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:54:13.1522832+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:24:23.163 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:54:23.1606146+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:24:33.177 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:54:33.1751059+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:24:43.183 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:54:43.1803918+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:24:53.198 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:54:53.1955645+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:25:03.210 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:55:03.2082790+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:25:13.228 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:55:13.2257748+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:25:23.233 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:55:23.2307558+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:25:33.241 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:55:33.2385523+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:25:43.246 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:55:43.2439871+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:25:53.256 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:55:53.2536105+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:26:03.271 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:56:03.2671836+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:26:13.293 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:56:13.2907277+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:26:23.309 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T07:56:23.3056019+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:26:33.329 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:56:33.3267420+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:26:43.335 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:56:43.3329747+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:26:53.347 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:56:53.3447546+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:27:03.353 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:57:03.3504473+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:27:13.375 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:57:13.3734202+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:27:23.382 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:57:23.3795412+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:27:33.389 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:57:33.3871548+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:27:43.400 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:57:43.3984945+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:27:53.411 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:57:53.4086062+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:28:03.420 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:58:03.4180443+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:28:13.441 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:58:13.4389624+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:28:23.448 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:58:23.4455015+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:28:33.453 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__now_0='2025-10-01T07:58:33.4476188+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:28:43.461 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:58:43.4592664+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:28:53.465 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:58:53.4633621+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:29:03.579 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T07:59:03.4748852+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:29:13.590 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:59:13.5882286+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:29:23.602 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:59:23.5993344+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:29:33.609 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T07:59:33.6064599+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:29:43.622 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:59:43.6197708+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:29:53.631 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T07:59:53.6287122+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:30:03.640 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:00:03.6383517+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:30:04.381 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/custom/test-webhook?businessId=9841bcab-ca71-439f-8691-d85ada887b01 - null 0
2025-10-01 13:30:04.386 +05:30 [INF] CORS policy execution successful.
2025-10-01 13:30:04.389 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.TestWebhook (xbytechat.api)'
2025-10-01 13:30:04.397 +05:30 [INF] Route matched with {action = "TestWebhook", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestWebhook(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 13:30:04.404 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BearerToken", c."BusinessId", c."CreatedAt", c."IsActive", c."UpdatedAt", c."Url"
FROM "CustomerWebhookConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY COALESCE(c."UpdatedAt", c."CreatedAt") DESC
LIMIT 1
2025-10-01 13:30:04.415 +05:30 [INF] Start processing HTTP request POST https://3585323701f3.ngrok-free.app/api/getflow/%7BbusinessId%7D
2025-10-01 13:30:04.418 +05:30 [INF] Sending HTTP request POST https://3585323701f3.ngrok-free.app/api/getflow/%7BbusinessId%7D
2025-10-01 13:30:04.795 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/getflow/{businessId} - application/json; charset=utf-8 155
2025-10-01 13:30:04.800 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-01 13:30:04.804 +05:30 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-01 13:30:04.806 +05:30 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-10-01 13:30:04.808 +05:30 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-10-01 13:30:04.810 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/getflow/{businessId} - 405 0 null 15.6115ms
2025-10-01 13:30:04.909 +05:30 [INF] Received HTTP response headers after 488.278ms - 405
2025-10-01 13:30:04.911 +05:30 [INF] End processing HTTP request after 495.5027ms - 405
2025-10-01 13:30:04.913 +05:30 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType141`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:30:04.917 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.TestWebhook (xbytechat.api) in 516.7143ms
2025-10-01 13:30:04.919 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.TestWebhook (xbytechat.api)'
2025-10-01 13:30:04.921 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/custom/test-webhook?businessId=9841bcab-ca71-439f-8691-d85ada887b01 - 400 null application/json; charset=utf-8 540.2487ms
2025-10-01 13:30:13.648 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:00:13.6460933+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:30:23.664 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:00:23.6616455+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:30:33.673 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:00:33.6705532+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:30:33.895 +05:30 [INF] Request starting HTTP/1.1 GET http://3585323701f3.ngrok-free.app/swagger/index.html - null null
2025-10-01 13:30:33.908 +05:30 [INF] Request finished HTTP/1.1 GET http://3585323701f3.ngrok-free.app/swagger/index.html - 200 null text/html;charset=utf-8 13.37ms
2025-10-01 13:30:34.183 +05:30 [INF] Request starting HTTP/1.1 GET http://3585323701f3.ngrok-free.app/swagger/swagger-ui.css - null null
2025-10-01 13:30:34.186 +05:30 [INF] Request starting HTTP/1.1 GET http://3585323701f3.ngrok-free.app/swagger/swagger-ui-bundle.js - null null
2025-10-01 13:30:34.195 +05:30 [INF] Request starting HTTP/1.1 GET http://3585323701f3.ngrok-free.app/swagger/swagger-ui-standalone-preset.js - null null
2025-10-01 13:30:34.195 +05:30 [INF] Request starting HTTP/1.1 GET http://3585323701f3.ngrok-free.app/_framework/aspnetcore-browser-refresh.js - null null
2025-10-01 13:30:34.212 +05:30 [INF] Request finished HTTP/1.1 GET http://3585323701f3.ngrok-free.app/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 16.28ms
2025-10-01 13:30:34.255 +05:30 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-10-01 13:30:34.255 +05:30 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-10-01 13:30:34.258 +05:30 [INF] Request finished HTTP/1.1 GET http://3585323701f3.ngrok-free.app/swagger/swagger-ui.css - 200 152034 text/css 74.6292ms
2025-10-01 13:30:34.260 +05:30 [INF] Request finished HTTP/1.1 GET http://3585323701f3.ngrok-free.app/swagger/swagger-ui-standalone-preset.js - 200 230280 text/javascript 65.4323ms
2025-10-01 13:30:35.490 +05:30 [INF] Request starting HTTP/1.1 GET http://3585323701f3.ngrok-free.app/_vs/browserLink - null null
2025-10-01 13:30:35.503 +05:30 [INF] Request finished HTTP/1.1 GET http://3585323701f3.ngrok-free.app/_vs/browserLink - 200 null text/javascript; charset=UTF-8 13.6718ms
2025-10-01 13:30:36.543 +05:30 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-10-01 13:30:36.546 +05:30 [INF] Request finished HTTP/1.1 GET http://3585323701f3.ngrok-free.app/swagger/swagger-ui-bundle.js - 200 1456926 text/javascript 2359.6705ms
2025-10-01 13:30:37.819 +05:30 [INF] Request starting HTTP/1.1 GET http://3585323701f3.ngrok-free.app/swagger/v1/swagger.json - null null
2025-10-01 13:30:37.948 +05:30 [INF] Request finished HTTP/1.1 GET http://3585323701f3.ngrok-free.app/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 129.3608ms
2025-10-01 13:30:43.679 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:00:43.6758229+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:30:53.680 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:00:53.6772026+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:31:03.690 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:01:03.6879225+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:31:13.693 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:01:13.6911782+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:31:23.696 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:01:23.6940993+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:31:26.727 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/test-webhook?businessId=9841bcab-ca71-439f-8691-d85ada887b01 - null 0
2025-10-01 13:31:26.732 +05:30 [INF] CORS policy execution failed.
2025-10-01 13:31:26.733 +05:30 [INF] Request origin https://3585323701f3.ngrok-free.app does not have permission to access the resource.
2025-10-01 13:31:26.735 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.TestWebhook (xbytechat.api)'
2025-10-01 13:31:26.737 +05:30 [INF] Route matched with {action = "TestWebhook", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestWebhook(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 13:31:26.745 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BearerToken", c."BusinessId", c."CreatedAt", c."IsActive", c."UpdatedAt", c."Url"
FROM "CustomerWebhookConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY COALESCE(c."UpdatedAt", c."CreatedAt") DESC
LIMIT 1
2025-10-01 13:31:26.750 +05:30 [INF] Start processing HTTP request POST https://3585323701f3.ngrok-free.app/api/getflow/%7BbusinessId%7D
2025-10-01 13:31:26.752 +05:30 [INF] Sending HTTP request POST https://3585323701f3.ngrok-free.app/api/getflow/%7BbusinessId%7D
2025-10-01 13:31:27.152 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/getflow/{businessId} - application/json; charset=utf-8 155
2025-10-01 13:31:27.156 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-10-01 13:31:27.160 +05:30 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EncodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-10-01 13:31:27.162 +05:30 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-10-01 13:31:27.164 +05:30 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-10-01 13:31:27.166 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/getflow/{businessId} - 405 0 null 14.1098ms
2025-10-01 13:31:27.239 +05:30 [INF] Received HTTP response headers after 484.5374ms - 405
2025-10-01 13:31:27.241 +05:30 [INF] End processing HTTP request after 491.0976ms - 405
2025-10-01 13:31:27.245 +05:30 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType141`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:31:27.247 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.TestWebhook (xbytechat.api) in 507.3022ms
2025-10-01 13:31:27.250 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.TestWebhook (xbytechat.api)'
2025-10-01 13:31:27.253 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/test-webhook?businessId=9841bcab-ca71-439f-8691-d85ada887b01 - 400 null application/json; charset=utf-8 525.313ms
2025-10-01 13:31:33.710 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:01:33.7082563+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:31:43.717 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:01:43.7150869+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:31:44.524 +05:30 [INF] Request starting HTTP/1.1 GET http://3585323701f3.ngrok-free.app/api/getflow/9841bcab-ca71-439f-8691-d85ada887b01 - null null
2025-10-01 13:31:44.529 +05:30 [INF] Executing endpoint 'DevCustomerWebhookConfigController.Get (xbytechat.api)'
2025-10-01 13:31:44.531 +05:30 [INF] Route matched with {action = "Get", controller = "DevCustomerWebhookConfig"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.Guid) on controller DevCustomerWebhookConfigController (xbytechat.api).
2025-10-01 13:31:48.994 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BearerToken", c."BusinessId", c."CreatedAt", c."IsActive", c."UpdatedAt", c."Url"
FROM "CustomerWebhookConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
LIMIT 1
2025-10-01 13:31:49.000 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType143`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:31:49.003 +05:30 [INF] Executed action DevCustomerWebhookConfigController.Get (xbytechat.api) in 4469.3099ms
2025-10-01 13:31:49.005 +05:30 [INF] Executed endpoint 'DevCustomerWebhookConfigController.Get (xbytechat.api)'
2025-10-01 13:31:49.006 +05:30 [INF] Request finished HTTP/1.1 GET http://3585323701f3.ngrok-free.app/api/getflow/9841bcab-ca71-439f-8691-d85ada887b01 - 200 null application/json; charset=utf-8 4482.4929ms
2025-10-01 13:31:53.727 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:01:53.7245641+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:32:03.747 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:02:03.7447511+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:32:13.775 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:02:13.7728407+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:32:23.783 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:02:23.7811555+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:32:33.789 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:02:33.7866751+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:32:43.878 +05:30 [INF] Executed DbCommand (43ms) [Parameters=[@__now_0='2025-10-01T08:02:43.8345093+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:32:53.892 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:02:53.8895358+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:33:03.900 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:03:03.8973905+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:33:13.912 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:03:13.9093076+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:33:23.918 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:03:23.9160996+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:33:33.921 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:03:33.9186457+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:33:43.932 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:03:43.9300019+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:33:53.943 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:03:53.9408287+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:34:04.046 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T08:04:03.9506910+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:34:14.063 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:04:14.0609034+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:34:24.071 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:04:24.0688874+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:34:34.092 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:04:34.0906140+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:34:44.104 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:04:44.1023413+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:34:54.112 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:04:54.1081470+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:35:04.119 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:05:04.1165835+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:35:14.127 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:05:14.1243648+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:35:18.176 +05:30 [INF] Request starting HTTP/1.1 GET http://3585323701f3.ngrok-free.app/api/getflow/9841bcab-ca71-439f-8691-d85ada887b01 - null null
2025-10-01 13:35:18.188 +05:30 [INF] Executing endpoint 'DevCustomerWebhookConfigController.Get (xbytechat.api)'
2025-10-01 13:35:18.189 +05:30 [INF] Route matched with {action = "Get", controller = "DevCustomerWebhookConfig"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.Guid) on controller DevCustomerWebhookConfigController (xbytechat.api).
2025-10-01 13:35:18.195 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BearerToken", c."BusinessId", c."CreatedAt", c."IsActive", c."UpdatedAt", c."Url"
FROM "CustomerWebhookConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
LIMIT 1
2025-10-01 13:35:18.219 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType143`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:35:18.223 +05:30 [INF] Executed action DevCustomerWebhookConfigController.Get (xbytechat.api) in 32.149ms
2025-10-01 13:35:18.225 +05:30 [INF] Executed endpoint 'DevCustomerWebhookConfigController.Get (xbytechat.api)'
2025-10-01 13:35:18.227 +05:30 [INF] Request finished HTTP/1.1 GET http://3585323701f3.ngrok-free.app/api/getflow/9841bcab-ca71-439f-8691-d85ada887b01 - 200 null application/json; charset=utf-8 50.2667ms
2025-10-01 13:35:18.769 +05:30 [INF] Request starting HTTP/1.1 GET http://3585323701f3.ngrok-free.app/favicon.ico - null null
2025-10-01 13:35:18.775 +05:30 [INF] Request finished HTTP/1.1 GET http://3585323701f3.ngrok-free.app/favicon.ico - 404 0 null 5.5609ms
2025-10-01 13:35:18.782 +05:30 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://3585323701f3.ngrok-free.app/favicon.ico, Response status code: 404
2025-10-01 13:35:24.132 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:05:24.1301011+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:35:34.153 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:05:34.1508285+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:35:44.172 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:05:44.1695006+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:35:54.185 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:05:54.1828054+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:36:04.199 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:06:04.1961660+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:36:14.212 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:06:14.2093190+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:36:24.287 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:06:24.2848479+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:36:34.307 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:06:34.3047152+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:36:44.323 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:06:44.3207044+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:36:54.342 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:06:54.3407481+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:37:04.352 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:07:04.3509239+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:37:14.362 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:07:14.3600888+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:37:24.370 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:07:24.3684713+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:37:34.379 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:07:34.3771127+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:37:44.397 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T08:07:44.3930650+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:37:54.399 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:07:54.3972422+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:38:04.418 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:08:04.4158300+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:38:10.403 +05:30 [INF] Request starting HTTP/1.1 GET http://3585323701f3.ngrok-free.app/api/getflow/9841bcab-ca71-439f-8691-d85ada887b01 - null null
2025-10-01 13:38:10.407 +05:30 [INF] Executing endpoint 'DevCustomerWebhookConfigController.Get (xbytechat.api)'
2025-10-01 13:38:10.409 +05:30 [INF] Route matched with {action = "Get", controller = "DevCustomerWebhookConfig"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.Guid) on controller DevCustomerWebhookConfigController (xbytechat.api).
2025-10-01 13:38:10.414 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BearerToken", c."BusinessId", c."CreatedAt", c."IsActive", c."UpdatedAt", c."Url"
FROM "CustomerWebhookConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
LIMIT 1
2025-10-01 13:38:10.420 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType143`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:38:10.422 +05:30 [INF] Executed action DevCustomerWebhookConfigController.Get (xbytechat.api) in 10.8757ms
2025-10-01 13:38:10.424 +05:30 [INF] Executed endpoint 'DevCustomerWebhookConfigController.Get (xbytechat.api)'
2025-10-01 13:38:10.426 +05:30 [INF] Request finished HTTP/1.1 GET http://3585323701f3.ngrok-free.app/api/getflow/9841bcab-ca71-439f-8691-d85ada887b01 - 200 null application/json; charset=utf-8 22.8437ms
2025-10-01 13:38:14.421 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:08:14.4183376+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:38:24.429 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:08:24.4269743+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:38:34.434 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:08:34.4321795+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:38:44.454 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:08:44.4517036+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:38:54.460 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:08:54.4577215+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:39:04.571 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T08:09:04.4714119+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:39:06.113 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/test-webhook?businessId=9841bcab-ca71-439f-8691-d85ada887b01 - null 0
2025-10-01 13:39:06.117 +05:30 [INF] CORS policy execution failed.
2025-10-01 13:39:06.118 +05:30 [INF] Request origin https://3585323701f3.ngrok-free.app does not have permission to access the resource.
2025-10-01 13:39:06.120 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.TestWebhook (xbytechat.api)'
2025-10-01 13:39:06.122 +05:30 [INF] Route matched with {action = "TestWebhook", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestWebhook(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 13:39:06.129 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BearerToken", c."BusinessId", c."CreatedAt", c."IsActive", c."UpdatedAt", c."Url"
FROM "CustomerWebhookConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY COALESCE(c."UpdatedAt", c."CreatedAt") DESC
LIMIT 1
2025-10-01 13:39:06.135 +05:30 [INF] Start processing HTTP request POST https://webhook.site/c5a8e6f1-509b-4b4a-b090-68f3d96c99ca
2025-10-01 13:39:06.137 +05:30 [INF] Sending HTTP request POST https://webhook.site/c5a8e6f1-509b-4b4a-b090-68f3d96c99ca
2025-10-01 13:39:07.536 +05:30 [INF] Received HTTP response headers after 1397.2143ms - 200
2025-10-01 13:39:07.538 +05:30 [INF] End processing HTTP request after 1402.7316ms - 200
2025-10-01 13:39:07.539 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType141`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:39:07.541 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.TestWebhook (xbytechat.api) in 1415.1147ms
2025-10-01 13:39:07.542 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.TestWebhook (xbytechat.api)'
2025-10-01 13:39:07.544 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/test-webhook?businessId=9841bcab-ca71-439f-8691-d85ada887b01 - 200 null application/json; charset=utf-8 1432.1061ms
2025-10-01 13:39:14.584 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:09:14.5818380+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:39:24.594 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:09:24.5916726+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:39:34.601 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:09:34.5991318+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:39:44.613 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:09:44.6102459+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:39:54.620 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:09:54.6172554+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:40:04.636 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:10:04.6339393+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:40:14.652 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:10:14.6496940+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:40:24.668 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T08:10:24.6641103+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:40:34.682 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:10:34.6796696+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:40:44.696 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:10:44.6947930+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:40:54.702 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:10:54.6992814+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:40:55.911 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-10-01 13:40:55.917 +05:30 [INF] CORS policy execution successful.
2025-10-01 13:40:55.921 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 9.5835ms
2025-10-01 13:40:55.929 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 48
2025-10-01 13:40:55.935 +05:30 [INF] CORS policy execution successful.
2025-10-01 13:40:55.938 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-10-01 13:40:55.945 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-10-01 13:40:55.969 +05:30 [INF] 🔑 Login attempt for email: test@gmail.com
2025-10-01 13:40:56.014 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_Email_0='test@gmail.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-10-01 13:40:56.113 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__user_BusinessId_Value_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-10-01 13:40:56.208 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='6376a399-238e-4a8c-b2b8-b66a69a74c0c'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-10-01 13:40:56.226 +05:30 [INF] ✅ Token generated for: test@gmail.com
2025-10-01 13:40:56.318 +05:30 [ERR] ❌ Error generating JWT from claims.
System.ArgumentOutOfRangeException: IDX10653: The encryption algorithm 'HS256' requires a key size of at least '128' bits. Key 'Null', is of size: '72'. (Parameter 'key')
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider..ctor(SecurityKey key, String algorithm, Boolean willCreateSignatures)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateSignatureProvider(SecurityKey key, String algorithm, Boolean willCreateSignatures, Boolean cacheProvider)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateForSigning(SecurityKey key, String algorithm, Boolean cacheProvider)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateForSigning(SecurityKey key, String algorithm)
   at Microsoft.IdentityModel.JsonWebTokens.JwtTokenUtilities.CreateEncodedSignature(String input, SigningCredentials signingCredentials)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.WriteToken(SecurityToken token)
   at xbytechat.api.AuthModule.Services.JwtTokenService.GenerateToken(IEnumerable`1 claims)
2025-10-01 13:40:56.351 +05:30 [ERR] ❌ Error generating token for userId: 6376a399-238e-4a8c-b2b8-b66a69a74c0c
System.ArgumentOutOfRangeException: IDX10653: The encryption algorithm 'HS256' requires a key size of at least '128' bits. Key 'Null', is of size: '72'. (Parameter 'key')
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider..ctor(SecurityKey key, String algorithm, Boolean willCreateSignatures)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateSignatureProvider(SecurityKey key, String algorithm, Boolean willCreateSignatures, Boolean cacheProvider)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateForSigning(SecurityKey key, String algorithm, Boolean cacheProvider)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateForSigning(SecurityKey key, String algorithm)
   at Microsoft.IdentityModel.JsonWebTokens.JwtTokenUtilities.CreateEncodedSignature(String input, SigningCredentials signingCredentials)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.WriteToken(SecurityToken token)
   at xbytechat.api.AuthModule.Services.JwtTokenService.GenerateToken(IEnumerable`1 claims)
   at xbytechat.api.AuthModule.Services.JwtTokenService.GenerateToken(String userId, String role, String userName, String email, String status, String businessId, String companyName, List`1 permissions, String planId, List`1 features, Boolean hasAllAccess)
2025-10-01 13:40:56.423 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 474.9762ms
2025-10-01 13:40:56.426 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-10-01 13:40:56.498 +05:30 [ERR] ❌ An unhandled exception occurred
System.ArgumentOutOfRangeException: IDX10653: The encryption algorithm 'HS256' requires a key size of at least '128' bits. Key 'Null', is of size: '72'. (Parameter 'key')
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider..ctor(SecurityKey key, String algorithm, Boolean willCreateSignatures)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateSignatureProvider(SecurityKey key, String algorithm, Boolean willCreateSignatures, Boolean cacheProvider)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateForSigning(SecurityKey key, String algorithm, Boolean cacheProvider)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateForSigning(SecurityKey key, String algorithm)
   at Microsoft.IdentityModel.JsonWebTokens.JwtTokenUtilities.CreateEncodedSignature(String input, SigningCredentials signingCredentials)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.WriteToken(SecurityToken token)
   at xbytechat.api.AuthModule.Services.JwtTokenService.GenerateToken(IEnumerable`1 claims)
   at xbytechat.api.AuthModule.Services.JwtTokenService.GenerateToken(String userId, String role, String userName, String email, String status, String businessId, String companyName, List`1 permissions, String planId, List`1 features, Boolean hasAllAccess)
   at xbytechat.api.AuthModule.Services.AuthService.LoginAsync(UserLoginDto dto)
   at xbytechat.api.AuthModule.Controllers.AuthController.Login(UserLoginDto dto)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context)
2025-10-01 13:40:56.519 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 500 null application/json; charset=utf-8 589.4927ms
2025-10-01 13:41:03.411 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-10-01 13:41:03.423 +05:30 [INF] CORS policy execution successful.
2025-10-01 13:41:03.426 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 15.21ms
2025-10-01 13:41:03.432 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 48
2025-10-01 13:41:03.436 +05:30 [INF] CORS policy execution successful.
2025-10-01 13:41:03.437 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-10-01 13:41:03.439 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-10-01 13:41:03.445 +05:30 [INF] 🔑 Login attempt for email: test@gmail.com
2025-10-01 13:41:03.451 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@gmail.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-10-01 13:41:03.467 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__user_BusinessId_Value_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-10-01 13:41:03.475 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='6376a399-238e-4a8c-b2b8-b66a69a74c0c'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-10-01 13:41:03.479 +05:30 [INF] ✅ Token generated for: test@gmail.com
2025-10-01 13:41:03.520 +05:30 [ERR] ❌ Error generating JWT from claims.
System.ArgumentOutOfRangeException: IDX10653: The encryption algorithm 'HS256' requires a key size of at least '128' bits. Key 'Null', is of size: '72'. (Parameter 'key')
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider..ctor(SecurityKey key, String algorithm, Boolean willCreateSignatures)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateSignatureProvider(SecurityKey key, String algorithm, Boolean willCreateSignatures, Boolean cacheProvider)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateForSigning(SecurityKey key, String algorithm, Boolean cacheProvider)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateForSigning(SecurityKey key, String algorithm)
   at Microsoft.IdentityModel.JsonWebTokens.JwtTokenUtilities.CreateEncodedSignature(String input, SigningCredentials signingCredentials)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.WriteToken(SecurityToken token)
   at xbytechat.api.AuthModule.Services.JwtTokenService.GenerateToken(IEnumerable`1 claims)
2025-10-01 13:41:03.554 +05:30 [ERR] ❌ Error generating token for userId: 6376a399-238e-4a8c-b2b8-b66a69a74c0c
System.ArgumentOutOfRangeException: IDX10653: The encryption algorithm 'HS256' requires a key size of at least '128' bits. Key 'Null', is of size: '72'. (Parameter 'key')
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider..ctor(SecurityKey key, String algorithm, Boolean willCreateSignatures)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateSignatureProvider(SecurityKey key, String algorithm, Boolean willCreateSignatures, Boolean cacheProvider)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateForSigning(SecurityKey key, String algorithm, Boolean cacheProvider)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateForSigning(SecurityKey key, String algorithm)
   at Microsoft.IdentityModel.JsonWebTokens.JwtTokenUtilities.CreateEncodedSignature(String input, SigningCredentials signingCredentials)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.WriteToken(SecurityToken token)
   at xbytechat.api.AuthModule.Services.JwtTokenService.GenerateToken(IEnumerable`1 claims)
   at xbytechat.api.AuthModule.Services.JwtTokenService.GenerateToken(String userId, String role, String userName, String email, String status, String businessId, String companyName, List`1 permissions, String planId, List`1 features, Boolean hasAllAccess)
2025-10-01 13:41:03.621 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 179.0677ms
2025-10-01 13:41:03.624 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-10-01 13:41:03.680 +05:30 [ERR] ❌ An unhandled exception occurred
System.ArgumentOutOfRangeException: IDX10653: The encryption algorithm 'HS256' requires a key size of at least '128' bits. Key 'Null', is of size: '72'. (Parameter 'key')
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider..ctor(SecurityKey key, String algorithm, Boolean willCreateSignatures)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateSignatureProvider(SecurityKey key, String algorithm, Boolean willCreateSignatures, Boolean cacheProvider)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateForSigning(SecurityKey key, String algorithm, Boolean cacheProvider)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateForSigning(SecurityKey key, String algorithm)
   at Microsoft.IdentityModel.JsonWebTokens.JwtTokenUtilities.CreateEncodedSignature(String input, SigningCredentials signingCredentials)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.WriteToken(SecurityToken token)
   at xbytechat.api.AuthModule.Services.JwtTokenService.GenerateToken(IEnumerable`1 claims)
   at xbytechat.api.AuthModule.Services.JwtTokenService.GenerateToken(String userId, String role, String userName, String email, String status, String businessId, String companyName, List`1 permissions, String planId, List`1 features, Boolean hasAllAccess)
   at xbytechat.api.AuthModule.Services.AuthService.LoginAsync(UserLoginDto dto)
   at xbytechat.api.AuthModule.Controllers.AuthController.Login(UserLoginDto dto)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context)
2025-10-01 13:41:03.693 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 500 null application/json; charset=utf-8 261.0805ms
2025-10-01 13:41:04.712 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:11:04.7098059+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:41:14.724 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:11:14.7221684+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:41:24.735 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:11:24.7333457+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:41:34.742 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:11:34.7394175+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:41:44.755 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:11:44.7525698+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:41:54.767 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__now_0='2025-10-01T08:11:54.7612509+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:42:00.949 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-10-01 13:42:00.951 +05:30 [INF] CORS policy execution successful.
2025-10-01 13:42:00.953 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 3.8343ms
2025-10-01 13:42:00.958 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 48
2025-10-01 13:42:00.963 +05:30 [INF] CORS policy execution successful.
2025-10-01 13:42:00.965 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-10-01 13:42:00.967 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-10-01 13:42:00.982 +05:30 [INF] 🔑 Login attempt for email: test@gmail.com
2025-10-01 13:42:00.991 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@gmail.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-10-01 13:42:01.000 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-10-01 13:42:01.009 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='6376a399-238e-4a8c-b2b8-b66a69a74c0c'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-10-01 13:42:01.012 +05:30 [INF] ✅ Token generated for: test@gmail.com
2025-10-01 13:42:01.048 +05:30 [ERR] ❌ Error generating JWT from claims.
System.ArgumentOutOfRangeException: IDX10653: The encryption algorithm 'HS256' requires a key size of at least '128' bits. Key 'Null', is of size: '72'. (Parameter 'key')
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider..ctor(SecurityKey key, String algorithm, Boolean willCreateSignatures)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateSignatureProvider(SecurityKey key, String algorithm, Boolean willCreateSignatures, Boolean cacheProvider)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateForSigning(SecurityKey key, String algorithm, Boolean cacheProvider)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateForSigning(SecurityKey key, String algorithm)
   at Microsoft.IdentityModel.JsonWebTokens.JwtTokenUtilities.CreateEncodedSignature(String input, SigningCredentials signingCredentials)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.WriteToken(SecurityToken token)
   at xbytechat.api.AuthModule.Services.JwtTokenService.GenerateToken(IEnumerable`1 claims)
2025-10-01 13:42:01.089 +05:30 [ERR] ❌ Error generating token for userId: 6376a399-238e-4a8c-b2b8-b66a69a74c0c
System.ArgumentOutOfRangeException: IDX10653: The encryption algorithm 'HS256' requires a key size of at least '128' bits. Key 'Null', is of size: '72'. (Parameter 'key')
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider..ctor(SecurityKey key, String algorithm, Boolean willCreateSignatures)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateSignatureProvider(SecurityKey key, String algorithm, Boolean willCreateSignatures, Boolean cacheProvider)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateForSigning(SecurityKey key, String algorithm, Boolean cacheProvider)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateForSigning(SecurityKey key, String algorithm)
   at Microsoft.IdentityModel.JsonWebTokens.JwtTokenUtilities.CreateEncodedSignature(String input, SigningCredentials signingCredentials)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.WriteToken(SecurityToken token)
   at xbytechat.api.AuthModule.Services.JwtTokenService.GenerateToken(IEnumerable`1 claims)
   at xbytechat.api.AuthModule.Services.JwtTokenService.GenerateToken(String userId, String role, String userName, String email, String status, String businessId, String companyName, List`1 permissions, String planId, List`1 features, Boolean hasAllAccess)
2025-10-01 13:42:01.166 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 194.2839ms
2025-10-01 13:42:01.170 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-10-01 13:42:01.239 +05:30 [ERR] ❌ An unhandled exception occurred
System.ArgumentOutOfRangeException: IDX10653: The encryption algorithm 'HS256' requires a key size of at least '128' bits. Key 'Null', is of size: '72'. (Parameter 'key')
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider..ctor(SecurityKey key, String algorithm, Boolean willCreateSignatures)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateSignatureProvider(SecurityKey key, String algorithm, Boolean willCreateSignatures, Boolean cacheProvider)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateForSigning(SecurityKey key, String algorithm, Boolean cacheProvider)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateForSigning(SecurityKey key, String algorithm)
   at Microsoft.IdentityModel.JsonWebTokens.JwtTokenUtilities.CreateEncodedSignature(String input, SigningCredentials signingCredentials)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.WriteToken(SecurityToken token)
   at xbytechat.api.AuthModule.Services.JwtTokenService.GenerateToken(IEnumerable`1 claims)
   at xbytechat.api.AuthModule.Services.JwtTokenService.GenerateToken(String userId, String role, String userName, String email, String status, String businessId, String companyName, List`1 permissions, String planId, List`1 features, Boolean hasAllAccess)
   at xbytechat.api.AuthModule.Services.AuthService.LoginAsync(UserLoginDto dto)
   at xbytechat.api.AuthModule.Controllers.AuthController.Login(UserLoginDto dto)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context)
2025-10-01 13:42:01.254 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 500 null application/json; charset=utf-8 296.0289ms
2025-10-01 13:42:04.778 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:12:04.7759553+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:42:10.718 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-10-01 13:42:10.722 +05:30 [INF] CORS policy execution successful.
2025-10-01 13:42:10.725 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 6.4403ms
2025-10-01 13:42:10.729 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 48
2025-10-01 13:42:10.732 +05:30 [INF] CORS policy execution successful.
2025-10-01 13:42:10.734 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-10-01 13:42:10.735 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-10-01 13:42:10.739 +05:30 [INF] 🔑 Login attempt for email: test@gmail.com
2025-10-01 13:42:10.747 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_Email_0='test@gmail.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-10-01 13:42:10.754 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__user_BusinessId_Value_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-10-01 13:42:10.763 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='6376a399-238e-4a8c-b2b8-b66a69a74c0c'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-10-01 13:42:10.767 +05:30 [INF] ✅ Token generated for: test@gmail.com
2025-10-01 13:42:10.803 +05:30 [ERR] ❌ Error generating JWT from claims.
System.ArgumentOutOfRangeException: IDX10653: The encryption algorithm 'HS256' requires a key size of at least '128' bits. Key 'Null', is of size: '72'. (Parameter 'key')
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider..ctor(SecurityKey key, String algorithm, Boolean willCreateSignatures)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateSignatureProvider(SecurityKey key, String algorithm, Boolean willCreateSignatures, Boolean cacheProvider)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateForSigning(SecurityKey key, String algorithm, Boolean cacheProvider)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateForSigning(SecurityKey key, String algorithm)
   at Microsoft.IdentityModel.JsonWebTokens.JwtTokenUtilities.CreateEncodedSignature(String input, SigningCredentials signingCredentials)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.WriteToken(SecurityToken token)
   at xbytechat.api.AuthModule.Services.JwtTokenService.GenerateToken(IEnumerable`1 claims)
2025-10-01 13:42:10.841 +05:30 [ERR] ❌ Error generating token for userId: 6376a399-238e-4a8c-b2b8-b66a69a74c0c
System.ArgumentOutOfRangeException: IDX10653: The encryption algorithm 'HS256' requires a key size of at least '128' bits. Key 'Null', is of size: '72'. (Parameter 'key')
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider..ctor(SecurityKey key, String algorithm, Boolean willCreateSignatures)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateSignatureProvider(SecurityKey key, String algorithm, Boolean willCreateSignatures, Boolean cacheProvider)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateForSigning(SecurityKey key, String algorithm, Boolean cacheProvider)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateForSigning(SecurityKey key, String algorithm)
   at Microsoft.IdentityModel.JsonWebTokens.JwtTokenUtilities.CreateEncodedSignature(String input, SigningCredentials signingCredentials)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.WriteToken(SecurityToken token)
   at xbytechat.api.AuthModule.Services.JwtTokenService.GenerateToken(IEnumerable`1 claims)
   at xbytechat.api.AuthModule.Services.JwtTokenService.GenerateToken(String userId, String role, String userName, String email, String status, String businessId, String companyName, List`1 permissions, String planId, List`1 features, Boolean hasAllAccess)
2025-10-01 13:42:10.921 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 183.114ms
2025-10-01 13:42:10.925 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-10-01 13:42:10.991 +05:30 [ERR] ❌ An unhandled exception occurred
System.ArgumentOutOfRangeException: IDX10653: The encryption algorithm 'HS256' requires a key size of at least '128' bits. Key 'Null', is of size: '72'. (Parameter 'key')
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider..ctor(SecurityKey key, String algorithm, Boolean willCreateSignatures)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateSignatureProvider(SecurityKey key, String algorithm, Boolean willCreateSignatures, Boolean cacheProvider)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateForSigning(SecurityKey key, String algorithm, Boolean cacheProvider)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateForSigning(SecurityKey key, String algorithm)
   at Microsoft.IdentityModel.JsonWebTokens.JwtTokenUtilities.CreateEncodedSignature(String input, SigningCredentials signingCredentials)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.WriteToken(SecurityToken token)
   at xbytechat.api.AuthModule.Services.JwtTokenService.GenerateToken(IEnumerable`1 claims)
   at xbytechat.api.AuthModule.Services.JwtTokenService.GenerateToken(String userId, String role, String userName, String email, String status, String businessId, String companyName, List`1 permissions, String planId, List`1 features, Boolean hasAllAccess)
   at xbytechat.api.AuthModule.Services.AuthService.LoginAsync(UserLoginDto dto)
   at xbytechat.api.AuthModule.Controllers.AuthController.Login(UserLoginDto dto)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at GlobalExceptionMiddleware.Invoke(HttpContext context)
2025-10-01 13:42:11.005 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 500 null application/json; charset=utf-8 275.7024ms
2025-10-01 13:43:32.393 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-01 13:43:32.457 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-10-01 13:43:32.479 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-10-01 13:43:33.831 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 13:43:34.649 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-10-01 13:43:34.670 +05:30 [INF] ClickLogWorker started
2025-10-01 13:43:34.906 +05:30 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-10-01 13:43:34.911 +05:30 [INF] Now listening on: http://localhost:7113
2025-10-01 13:43:34.912 +05:30 [INF] Now listening on: http://localhost:5295
2025-10-01 13:43:34.913 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-01 13:43:34.914 +05:30 [INF] Hosting environment: Development
2025-10-01 13:43:34.915 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-10-01 13:43:34.922 +05:30 [INF] Executed DbCommand (96ms) [Parameters=[@__cutoff_0='2025-09-24T08:13:32.6287721Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-10-01 13:43:35.745 +05:30 [INF] ClickLogWorker stopped
2025-10-01 13:43:36.483 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-10-01 13:43:36.750 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 274.903ms
2025-10-01 13:43:36.776 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-10-01 13:43:36.788 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 12.038ms
2025-10-01 13:43:36.891 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-10-01 13:43:36.947 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 56.1855ms
2025-10-01 13:43:37.275 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-10-01 13:43:37.617 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 342.1133ms
2025-10-01 13:43:39.785 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__now_0='2025-10-01T08:13:39.6894151+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:43:41.592 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - null null
2025-10-01 13:43:41.600 +05:30 [WRN] Failed to determine the https port for redirect.
2025-10-01 13:43:41.678 +05:30 [INF] CORS policy execution successful.
2025-10-01 13:43:41.682 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/auth/login - 204 null null 89.305ms
2025-10-01 13:43:41.688 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/auth/login - application/json 48
2025-10-01 13:43:41.704 +05:30 [INF] CORS policy execution successful.
2025-10-01 13:43:41.796 +05:30 [INF] Executing endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-10-01 13:43:41.819 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(xbytechat.api.AuthModule.DTOs.UserLoginDto) on controller xbytechat.api.AuthModule.Controllers.AuthController (xbytechat.api).
2025-10-01 13:43:41.856 +05:30 [INF] 🔑 Login attempt for email: test@gmail.com
2025-10-01 13:43:41.951 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_Email_0='test@gmail.com', @__hashedPassword_1='JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk='], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."BusinessId", u."CreatedAt", u."DeletedAt", u."Email", u."IsDeleted", u."Name", u."PasswordHash", u."RefreshToken", u."RefreshTokenExpiry", u."RoleId", u."Status", r."Id", r."CreatedAt", r."Description", r."IsActive", r."IsSystemDefined", r."Name"
FROM "Users" AS u
LEFT JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Email" = @__dto_Email_0 AND u."PasswordHash" = @__hashedPassword_1 AND NOT (u."IsDeleted")
LIMIT 1
2025-10-01 13:43:42.098 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__user_BusinessId_Value_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT b."Id", b."Address", b."ApprovedAt", b."ApprovedBy", b."BusinessEmail", b."BusinessName", b."CompanyName", b."CompanyPhone", b."CreatedAt", b."CreatedBy", b."CreatedByPartnerId", b."DeletedAt", b."DeletedBy", b."Industry", b."IsApproved", b."IsDeleted", b."LastLoginAt", b."LogoUrl", b."Notes", b."Phone", b."PlanId", b."RepresentativeName", b."Source", b."Status", b."Tags", b."Website", p."Id", p."Code", p."CreatedAt", p."Description", p."IsActive", p."Name"
FROM "Businesses" AS b
LEFT JOIN "Plans" AS p ON b."PlanId" = p."Id"
WHERE b."Id" = @__user_BusinessId_Value_0
LIMIT 1
2025-10-01 13:43:42.267 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='6376a399-238e-4a8c-b2b8-b66a69a74c0c'], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT t0."Code", t0."Group"
FROM "Users" AS u
INNER JOIN "Businesses" AS b ON u."BusinessId" = b."Id"
INNER JOIN (
    SELECT p."PermissionId", p."PlanId"
    FROM "PlanPermissions" AS p
    WHERE p."IsActive"
) AS t ON b."PlanId" = t."PlanId"
INNER JOIN (
    SELECT p0."Id", p0."Code", p0."Group"
    FROM "Permissions" AS p0
    WHERE p0."IsActive"
) AS t0 ON t."PermissionId" = t0."Id"
WHERE u."Id" = @__userId_0 AND EXISTS (
    SELECT 1
    FROM "RolePermissions" AS r
    WHERE r."IsActive" AND NOT (r."IsRevoked") AND r."RoleId" = u."RoleId" AND r."PermissionId" = t0."Id")
2025-10-01 13:43:42.282 +05:30 [INF] ✅ Token generated for: test@gmail.com
2025-10-01 13:43:42.384 +05:30 [INF] 🔎 JWT includes plan_id: 5f9f5de1-a0b2-48ba-b03d-77b27345613f
2025-10-01 13:43:42.387 +05:30 [INF] ✅ Login successful for test@gmail.com, Role: business, PlanId: "5f9f5de1-a0b2-48ba-b03d-77b27345613f"
2025-10-01 13:43:42.397 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:43:42.411 +05:30 [INF] Executed action xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api) in 583.6159ms
2025-10-01 13:43:42.414 +05:30 [INF] Executed endpoint 'xbytechat.api.AuthModule.Controllers.AuthController.Login (xbytechat.api)'
2025-10-01 13:43:42.424 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/auth/login - 200 null application/json; charset=utf-8 736.4563ms
2025-10-01 13:43:42.451 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-10-01 13:43:42.457 +05:30 [INF] CORS policy execution successful.
2025-10-01 13:43:42.459 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 8.0749ms
2025-10-01 13:43:42.463 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-10-01 13:43:42.467 +05:30 [INF] CORS policy execution successful.
2025-10-01 13:43:42.513 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-10-01 13:43:42.520 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-10-01 13:43:42.538 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p0."Id", p0."Code", p0."CreatedAt", p0."Description", p0."Group", p0."IsActive", p0."Name"
FROM "PlanPermissions" AS p
INNER JOIN "Permissions" AS p0 ON p."PermissionId" = p0."Id"
WHERE p."PlanId" = @__planId_0 AND p."IsActive"
2025-10-01 13:43:42.579 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-10-01 13:43:42.584 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType59`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:43:42.599 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 76.052ms
2025-10-01 13:43:42.602 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-10-01 13:43:42.604 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 141.0149ms
2025-10-01 13:43:42.624 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - null null
2025-10-01 13:43:42.629 +05:30 [INF] CORS policy execution successful.
2025-10-01 13:43:42.631 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/plan/me/permissions - 204 null null 7.0452ms
2025-10-01 13:43:42.639 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-10-01 13:43:42.644 +05:30 [INF] CORS policy execution successful.
2025-10-01 13:43:42.650 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-10-01 13:43:42.653 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-10-01 13:43:42.665 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-10-01 13:43:42.671 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType59`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:43:42.673 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 17.1494ms
2025-10-01 13:43:42.676 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-10-01 13:43:42.677 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 38.6902ms
2025-10-01 13:43:42.778 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - null null
2025-10-01 13:43:42.783 +05:30 [INF] CORS policy execution successful.
2025-10-01 13:43:42.787 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-10-01 13:43:42.789 +05:30 [INF] Route matched with {action = "GetMyPlanPermissions", controller = "Plan"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyPlanPermissions(System.Threading.CancellationToken) on controller xbytechat.api.Features.AccessControl.Controllers.PlanController (xbytechat.api).
2025-10-01 13:43:42.800 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__planId_0='5f9f5de1-a0b2-48ba-b03d-77b27345613f'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Code", p."Name", p."Description", p."IsActive"
FROM "Plans" AS p
WHERE p."Id" = @__planId_0
LIMIT 1
2025-10-01 13:43:42.806 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType59`3[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[xbytechat.api.Features.AccessControl.DTOs.PlanDto, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:43:42.808 +05:30 [INF] Executed action xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api) in 16.1453ms
2025-10-01 13:43:42.811 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.AccessControl.Controllers.PlanController.GetMyPlanPermissions (xbytechat.api)'
2025-10-01 13:43:42.812 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/plan/me/permissions - 200 null application/json; charset=utf-8 34.981ms
2025-10-01 13:43:44.699 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT w."BusinessId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-10-01 13:43:44.744 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='8390da76-10de-4d76-80f2-68b68f4e2b82'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-10-01 13:43:44.765 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='8390da76-10de-4d76-80f2-68b68f4e2b82'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-10-01 13:43:44.772 +05:30 [INF] ⏭️ Skipping sync for "8390da76-10de-4d76-80f2-68b68f4e2b82"; TTL not expired.
2025-10-01 13:43:44.775 +05:30 [INF] TemplateSyncWorker: biz="8390da76-10de-4d76-80f2-68b68f4e2b82" added=0 updated=0 skipped=0 syncedAt="2025-10-01T05:59:46.4435240Z"
2025-10-01 13:43:44.782 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-10-01 13:43:44.788 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-10-01 13:43:44.791 +05:30 [INF] ⏭️ Skipping sync for "9841bcab-ca71-439f-8691-d85ada887b01"; TTL not expired.
2025-10-01 13:43:44.793 +05:30 [INF] TemplateSyncWorker: biz="9841bcab-ca71-439f-8691-d85ada887b01" added=0 updated=0 skipped=0 syncedAt="2025-10-01T06:42:20.3255670Z"
2025-10-01 13:43:44.797 +05:30 [INF] TemplateSyncWorker: sweep finished in 116 ms; processed=2; next run ~"2025-10-01T14:13:44.6807151Z"
2025-10-01 13:43:47.432 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - null null
2025-10-01 13:43:47.435 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-10-01 13:43:47.439 +05:30 [INF] CORS policy execution successful.
2025-10-01 13:43:47.444 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/me - 204 null null 12.4929ms
2025-10-01 13:43:47.445 +05:30 [INF] CORS policy execution successful.
2025-10-01 13:43:47.450 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - null null
2025-10-01 13:43:47.451 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 204 null null 15.8665ms
2025-10-01 13:43:47.455 +05:30 [INF] CORS policy execution successful.
2025-10-01 13:43:47.460 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - null null
2025-10-01 13:43:47.463 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-10-01 13:43:47.466 +05:30 [INF] CORS policy execution successful.
2025-10-01 13:43:47.471 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-10-01 13:43:47.474 +05:30 [INF] Route matched with {action = "GetMySettings", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMySettings() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-10-01 13:43:47.478 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-10-01 13:43:47.493 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-10-01 13:43:47.507 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='PINNACLE'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-10-01 13:43:47.514 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 13:43:47.536 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 55.5016ms
2025-10-01 13:43:47.539 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-10-01 13:43:47.541 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/PINNACLE/numbers - 200 null application/json; charset=utf-8 81.4095ms
2025-10-01 13:43:47.558 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat_api.WhatsAppSettings.Models.WhatsAppSettingEntity'.
2025-10-01 13:43:47.569 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api) in 91.5275ms
2025-10-01 13:43:47.572 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.GetMySettings (xbytechat.api)'
2025-10-01 13:43:47.573 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/me - 200 null application/json; charset=utf-8 123.5646ms
2025-10-01 13:43:47.597 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-10-01 13:43:47.597 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-10-01 13:43:47.602 +05:30 [INF] CORS policy execution successful.
2025-10-01 13:43:47.605 +05:30 [INF] CORS policy execution successful.
2025-10-01 13:43:47.606 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 9.3804ms
2025-10-01 13:43:47.608 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 204 null null 10.2941ms
2025-10-01 13:43:47.620 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-10-01 13:43:47.624 +05:30 [INF] CORS policy execution successful.
2025-10-01 13:43:47.627 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-10-01 13:43:47.628 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-10-01 13:43:47.638 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-10-01 13:43:47.645 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 13:43:47.647 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 15.7888ms
2025-10-01 13:43:47.649 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - null null
2025-10-01 13:43:47.650 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-10-01 13:43:47.654 +05:30 [INF] CORS policy execution successful.
2025-10-01 13:43:47.655 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 35.6268ms
2025-10-01 13:43:47.657 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-10-01 13:43:47.663 +05:30 [INF] Route matched with {action = "List", controller = "WhatsAppNumbers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] List(System.String) on controller xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController (xbytechat.api).
2025-10-01 13:43:47.673 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1
ORDER BY w."IsDefault" DESC, w."WhatsAppBusinessNumber"
2025-10-01 13:43:47.678 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[xbytechat.api.Features.WhatsAppSettings.Models.WhatsAppPhoneNumber, xbytechat.api, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 13:43:47.680 +05:30 [INF] Executed action xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api) in 14.4644ms
2025-10-01 13:43:47.683 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.WhatsAppSettings.Controllers.WhatsAppNumbersController.List (xbytechat.api)'
2025-10-01 13:43:47.685 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/api/whatsappsettings/META_CLOUD/numbers - 200 null application/json; charset=utf-8 36.7858ms
2025-10-01 13:43:49.798 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:13:49.7940836+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:43:59.807 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T08:13:59.8028140+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:44:01.679 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - null null
2025-10-01 13:44:01.684 +05:30 [INF] CORS policy execution successful.
2025-10-01 13:44:01.686 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/update - 204 null null 7.1416ms
2025-10-01 13:44:01.696 +05:30 [INF] Request starting HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - application/json 568
2025-10-01 13:44:01.700 +05:30 [INF] CORS policy execution successful.
2025-10-01 13:44:01.703 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-10-01 13:44:01.710 +05:30 [INF] Route matched with {action = "UpdateSetting", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateSetting(xbytechat_api.WhatsAppSettings.DTOs.SaveWhatsAppSettingDto) on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-10-01 13:44:01.739 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__dto_Provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__dto_BusinessId_0 AND w."Provider" = @__dto_Provider_1
LIMIT 1
2025-10-01 13:44:01.881 +05:30 [INF] Executed DbCommand (23ms) [Parameters=[@p2='22ee5a32-2db4-4602-814f-0a24694f5636', @p0='EAAUbmP4285YBPlms1qUDvY7IKqLeKfMIEihcnD0SUTjcVeZACkl9ZB3SqqaGZC4y8V2u2qmZBnhrwbzJxnqkOYHZBZCykn1c3cZA5kfZBamXDhg315s9G4h2woceGZBRAma0mp9LjTNZBZA4s0YLMgtkNOZCu6MkarX8gUiLxlawkF1OkN6WEAWzduvRV8zJiyjAedTXTeFHhYAwalNM6IeINQ4YG1wg3d9dT9GCLeZA9POjHv7xTyYOYrE7vSjCa6k7VtQZDZD' (Nullable = false), @p1='2025-10-01T08:14:01.7461489Z' (Nullable = true) (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
UPDATE "WhatsAppSettings" SET "ApiKey" = @p0, "UpdatedAt" = @p1
WHERE "Id" = @p2;
2025-10-01 13:44:01.898 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:44:01.902 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api) in 189.6222ms
2025-10-01 13:44:01.904 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.UpdateSetting (xbytechat.api)'
2025-10-01 13:44:01.907 +05:30 [INF] Request finished HTTP/1.1 PUT http://localhost:7113/api/whatsappsettings/update - 200 null application/json; charset=utf-8 210.6781ms
2025-10-01 13:44:02.554 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection/current - null null
2025-10-01 13:44:02.559 +05:30 [INF] CORS policy execution successful.
2025-10-01 13:44:02.561 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:7113/api/whatsappsettings/test-connection/current - 204 null null 6.4957ms
2025-10-01 13:44:02.565 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection/current - application/json 2
2025-10-01 13:44:02.570 +05:30 [INF] CORS policy execution successful.
2025-10-01 13:44:02.574 +05:30 [INF] Executing endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnectionCurrent (xbytechat.api)'
2025-10-01 13:44:02.579 +05:30 [INF] Route matched with {action = "TestConnectionCurrent", controller = "WhatsAppSettings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestConnectionCurrent() on controller xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController (xbytechat.api).
2025-10-01 13:44:02.627 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-10-01 13:44:02.643 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-10-01 13:44:02.648 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/673199269218077
2025-10-01 13:44:04.313 +05:30 [INF] Received HTTP response headers after 1659.6928ms - 200
2025-10-01 13:44:04.316 +05:30 [INF] End processing HTTP request after 1676.3248ms - 200
2025-10-01 13:44:04.342 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType14`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:44:04.345 +05:30 [INF] Executed action xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnectionCurrent (xbytechat.api) in 1762.8912ms
2025-10-01 13:44:04.347 +05:30 [INF] Executed endpoint 'xbytechat_api.WhatsAppSettings.Controllers.WhatsAppSettingsController.TestConnectionCurrent (xbytechat.api)'
2025-10-01 13:44:04.349 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/whatsappsettings/test-connection/current - 200 null application/json; charset=utf-8 1783.2289ms
2025-10-01 13:44:09.586 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - application/json 350
2025-10-01 13:44:09.592 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 13:44:09.599 +05:30 [INF] Route matched with {action = "SendTemplate", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplate(xbytechat.api.Features.CustomeApi.DTOs.DirectTemplateSendRequest, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 13:44:09.656 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__req_PhoneNumberId_0='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."IsActive" AND w."PhoneNumberId" = @__req_PhoneNumberId_0
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 13:44:09.663 +05:30 [INF] [CustomAPI:"04d0b3f3-731d-4ede-b73e-0b62f71f2a02"] Begin send. biz="9841bcab-ca71-439f-8691-d85ada887b01" pnid=673199269218077 to=********5240 template=welcome_video
2025-10-01 13:44:09.698 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-10-01 13:44:09.702 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 13:44:09.704 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 13:44:09.819 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:14:09.8164383+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:44:10.440 +05:30 [INF] Received HTTP response headers after 733.6943ms - 200
2025-10-01 13:44:10.443 +05:30 [INF] End processing HTTP request after 740.6542ms - 200
2025-10-01 13:44:10.793 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__req_FlowConfigId_Value_0='0c5e1825-c899-41f0-b947-388dbffed015'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "CTAFlowSteps" AS c
WHERE c."CTAFlowConfigId" = @__req_FlowConfigId_Value_0
ORDER BY c."StepOrder"
LIMIT 1
2025-10-01 13:44:10.801 +05:30 [INF] [CustomAPI:"04d0b3f3-731d-4ede-b73e-0b62f71f2a02"] Sending welcome_video to ********5240 via META_CLOUD (PNID=673199269218077) video=true
2025-10-01 13:44:10.826 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-10-01 13:44:10.843 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-10-01 13:44:10.866 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 13:44:10.868 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 13:44:11.668 +05:30 [INF] Received HTTP response headers after 798.4834ms - 200
2025-10-01 13:44:11.670 +05:30 [INF] End processing HTTP request after 804.069ms - 200
2025-10-01 13:44:11.848 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@p0='d2f7b638-6751-4061-b24a-808b38a21abf', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='[{"i":0,"position":1,"text":"Yes","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"position":2,"text":"No","type":"QUICK_REPLY","subType":"quick_reply"}]', @p3='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p4='f468d694-c120-4e84-8ef1-024085736ca8' (Nullable = true), @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7=NULL, @p8=NULL, @p9=NULL (DbType = DateTime), @p10='2025-10-01T08:14:11.6754984Z' (DbType = DateTime), @p11=NULL, @p12=NULL (DbType = Int32), @p13=NULL (DbType = Boolean), @p14='False', @p15='https://whatsappdata.s3.ap-south-1.amazonaws.com/userMedia/dab49080d80c724aad5ebf158d63df41/vde_templ.mp4', @p16='welcome_video' (Nullable = false), @p17='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA==', @p18=NULL (DbType = Decimal), @p19=NULL, @p20='META_CLOUD', @p21='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA==', @p22='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA==","message_status":"accepted"}]}', @p23='918974005240' (Nullable = false), @p24=NULL (DbType = Guid), @p25=NULL, @p26=NULL (DbType = Guid), @p27='2025-10-01T08:14:11.6754984Z' (Nullable = true) (DbType = DateTime), @p28='custom_api', @p29='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29)
RETURNING "MessageTime";
2025-10-01 13:44:11.888 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__messageLogId_0='d2f7b638-6751-4061-b24a-808b38a21abf', @__businessId_1='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-10-01 13:44:11.946 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='7cf6cff6-159a-4786-84c4-ff9f49d9cbad', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2=NULL, @p3=NULL, @p4='2025-10-01T08:14:11.8928215+00:00' (DbType = DateTime), @p5='send_response' (Nullable = false), @p6=NULL (DbType = Boolean), @p7='d2f7b638-6751-4061-b24a-808b38a21abf' (Nullable = true), @p8='2025-10-01T08:14:11.8932845+00:00' (DbType = DateTime), @p9='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA==","message_status":"accepted"}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 13:44:11.951 +05:30 [INF] [CustomAPI:"04d0b3f3-731d-4ede-b73e-0b62f71f2a02"] Done. success=true msgId=wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA== flow="0c5e1825-c899-41f0-b947-388dbffed015" step="f468d694-c120-4e84-8ef1-024085736ca8"
2025-10-01 13:44:11.955 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-10-01 13:44:11.968 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api) in 2366.1877ms
2025-10-01 13:44:11.970 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 13:44:11.972 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - 200 null application/json; charset=utf-8 2385.6662ms
2025-10-01 13:44:19.823 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:14:19.8208005+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:44:22.839 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-10-01 13:44:22.844 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:44:22.848 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:44:22.859 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA==","status":"sent","timestamp":"1759306464","recipient_id":"918974005240","conversation":{"id":"787f37c353b8689b1758a07527da450c","expiration_timestamp":"1759306464","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:44:22.864 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:44:22.866 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:44:22.871 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 19.9559ms
2025-10-01 13:44:22.874 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:44:22.875 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 36.3407ms
2025-10-01 13:44:23.072 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA==","status":"sent","timestamp":"1759306464","recipient_id":"918974005240","conversation":{"id":"787f37c353b8689b1758a07527da450c","expiration_timestamp":"1759306464","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:44:23.111 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@__provider_0='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-10-01 13:44:23.119 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 13:44:23.138 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='sent', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:44:23.143 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-10-01 13:44:23.147 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:44:23.150 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:44:23.153 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:44:23.158 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA==","status":"delivered","timestamp":"1759306465","recipient_id":"918974005240","conversation":{"id":"787f37c353b8689b1758a07527da450c","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:44:23.161 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:44:23.163 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:44:23.165 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.6523ms
2025-10-01 13:44:23.168 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:44:23.168 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:44:23.170 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 27.2722ms
2025-10-01 13:44:23.208 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p4='d2f7b638-6751-4061-b24a-808b38a21abf', @p0='marketing', @p1='787f37c353b8689b1758a07527da450c', @p2='2025-09-30T08:14:24.0000000+00:00' (Nullable = true) (DbType = DateTime), @p3='True' (Nullable = true), @p5='1e7cea32-8f07-4941-8221-f6ca18eebf71', @p6='9841bcab-ca71-439f-8691-d85ada887b01', @p7='marketing', @p8='787f37c353b8689b1758a07527da450c', @p9='2025-10-01T08:14:23.1432880+00:00' (DbType = DateTime), @p10='sent' (Nullable = false), @p11='True' (Nullable = true), @p12=NULL (DbType = Guid), @p13='2025-10-01T08:14:24.0000000+00:00' (DbType = DateTime), @p14='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA==","status":"sent","timestamp":"1759306464","recipient_id":"918974005240","conversation":{"id":"787f37c353b8689b1758a07527da450c","expiration_timestamp":"1759306464","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p15=NULL (DbType = Decimal), @p16=NULL, @p17='META_CLOUD' (Nullable = false), @p18='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA==', @p19='2fb8132c-bdb1-4e89-80a4-aeb022baf48a', @p20='9841bcab-ca71-439f-8691-d85ada887b01', @p21='marketing', @p22='787f37c353b8689b1758a07527da450c', @p23='2025-10-01T08:14:23.1523399+00:00' (DbType = DateTime), @p24='pricing_update' (Nullable = false), @p25='True' (Nullable = true), @p26=NULL (DbType = Guid), @p27='2025-10-01T08:14:24.0000000+00:00' (DbType = DateTime), @p28='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA==","status":"sent","timestamp":"1759306464","recipient_id":"918974005240","conversation":{"id":"787f37c353b8689b1758a07527da450c","expiration_timestamp":"1759306464","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p29=NULL (DbType = Decimal), @p30=NULL, @p31='META_CLOUD' (Nullable = false), @p32='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA=='], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "ConversationCategory" = @p0, "ConversationId" = @p1, "ConversationStartedAt" = @p2, "IsChargeable" = @p3
WHERE "Id" = @p4
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32);
2025-10-01 13:44:23.270 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 13:44:23.289 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 13:44:23.301 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA==","status":"delivered","timestamp":"1759306465","recipient_id":"918974005240","conversation":{"id":"787f37c353b8689b1758a07527da450c","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:44:23.303 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 13:44:23.309 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='delivered', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:44:23.316 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:44:23.323 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:44:23.333 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='89cbc252-9442-4b18-b484-eb0a209f7b9b', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='787f37c353b8689b1758a07527da450c', @p4='2025-10-01T08:14:23.3132715+00:00' (DbType = DateTime), @p5='delivered' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:14:25.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA==","status":"delivered","timestamp":"1759306465","recipient_id":"918974005240","conversation":{"id":"787f37c353b8689b1758a07527da450c","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 13:44:23.341 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 13:44:23.347 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 13:44:23.355 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='d2f7b638-6751-4061-b24a-808b38a21abf', @p0='Delivered' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-10-01 13:44:29.842 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:14:29.8398348+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:44:34.001 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-10-01 13:44:34.006 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:44:34.008 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:44:34.014 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA==","status":"read","timestamp":"1759306476","recipient_id":"918974005240","conversation":{"id":"787f37c353b8689b1758a07527da450c","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:44:34.017 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:44:34.018 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:44:34.020 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 9.4541ms
2025-10-01 13:44:34.023 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:44:34.025 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 23.6685ms
2025-10-01 13:44:34.033 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA==","status":"read","timestamp":"1759306476","recipient_id":"918974005240","conversation":{"id":"787f37c353b8689b1758a07527da450c","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:44:34.035 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 13:44:34.040 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='read', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:44:34.045 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:44:34.052 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:44:34.074 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p0='ad947aff-8593-4bbb-b053-ee97d390a6a3', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='787f37c353b8689b1758a07527da450c', @p4='2025-10-01T08:14:34.0435426+00:00' (DbType = DateTime), @p5='read' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:14:36.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA==","status":"read","timestamp":"1759306476","recipient_id":"918974005240","conversation":{"id":"787f37c353b8689b1758a07527da450c","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 13:44:34.081 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 13:44:34.086 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 13:44:34.092 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='d2f7b638-6751-4061-b24a-808b38a21abf', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-10-01 13:44:34.206 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-10-01 13:44:34.218 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:44:34.220 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:44:34.224 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA==","status":"read","timestamp":"1759306476","recipient_id":"918974005240","conversation":{"id":"546378a849bb250eb7bae77e4a8fe514","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:44:34.226 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:44:34.226 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA==","status":"read","timestamp":"1759306476","recipient_id":"918974005240","conversation":{"id":"546378a849bb250eb7bae77e4a8fe514","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:44:34.227 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:44:34.228 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 13:44:34.230 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.1914ms
2025-10-01 13:44:34.234 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:44:34.235 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='read', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:44:34.237 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 31.1382ms
2025-10-01 13:44:34.242 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:44:34.251 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:44:34.258 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='ec2b45d8-fa87-4ad2-9dc7-999bb13d30f0', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='546378a849bb250eb7bae77e4a8fe514', @p4='2025-10-01T08:14:34.2404442+00:00' (DbType = DateTime), @p5='read' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:14:36.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA==","status":"read","timestamp":"1759306476","recipient_id":"918974005240","conversation":{"id":"546378a849bb250eb7bae77e4a8fe514","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 13:44:34.265 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 13:44:34.270 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSQzkwQTAwNTk5RTdERDk3OTY5AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 13:44:34.276 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='47327f20-addd-42d8-adc6-89a43af0235f', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-10-01 13:44:36.349 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 603
2025-10-01 13:44:36.353 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:44:36.355 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:44:36.358 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTU2QkFCQTkyMEQ3QzY5QThDN0NFRkI0OUJEOEY2NTAA","timestamp":"1759306478","type":"button","button":{"payload":"Yes","text":"Yes"}}]},"field":"messages"}]}]}
2025-10-01 13:44:36.360 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:44:36.361 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTU2QkFCQTkyMEQ3QzY5QThDN0NFRkI0OUJEOEY2NTAA","timestamp":"1759306478","type":"button","button":{"payload":"Yes","text":"Yes"}}]},"field":"messages"}]}]}
2025-10-01 13:44:36.362 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:44:36.363 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-10-01 13:44:36.365 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.6424ms
2025-10-01 13:44:36.368 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:44:36.370 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 20.5871ms
2025-10-01 13:44:36.384 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-10-01 13:44:36.386 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTU2QkFCQTkyMEQ3QzY5QThDN0NFRkI0OUJEOEY2NTAA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA==, Text: Yes
2025-10-01 13:44:36.397 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-10-01 13:44:36.409 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__origin_Id_0='d2f7b638-6751-4061-b24a-808b38a21abf' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNUVBMTQxOTVENERFQ0E0NzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-10-01 13:44:36.424 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__fromDigits_1='918974005240', @__fromRaw_2='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND (c."PhoneNumber" = @__fromDigits_1 OR c."PhoneNumber" = @__fromRaw_2)
LIMIT 1
2025-10-01 13:44:36.487 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__stepId_0='f468d694-c120-4e84-8ef1-024085736ca8'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
WHERE f."CTAFlowStepId" = @__stepId_0
ORDER BY f."ButtonIndex"
2025-10-01 13:44:36.509 +05:30 [INF] ✅ Mapped click by TEXT to index 0 (flow="0c5e1825-c899-41f0-b947-388dbffed015", step="f468d694-c120-4e84-8ef1-024085736ca8")
2025-10-01 13:44:36.525 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__sourceStepId_0='f468d694-c120-4e84-8ef1-024085736ca8', @__flowId_1='0c5e1825-c899-41f0-b947-388dbffed015', @__buttonIndex_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-10-01 13:44:36.535 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__stepId_0='f468d694-c120-4e84-8ef1-024085736ca8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-10-01 13:44:36.638 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='e028b477-1321-44c7-aec1-55e948d12575', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-10-01T08:14:36.5419358Z' (DbType = DateTime), @p7='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p8='d2f7b638-6751-4061-b24a-808b38a21abf' (Nullable = true), @p9=NULL, @p10='a3652f2e-930c-4eb9-b43a-16e277bf4d9d' (Nullable = true), @p11=NULL (DbType = Guid), @p12='f468d694-c120-4e84-8ef1-024085736ca8', @p13='welcome_video' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='Yes'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-10-01 13:44:36.650 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__stepId_0='f468d694-c120-4e84-8ef1-024085736ca8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-10-01 13:44:36.659 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__link_NextStepId_Value_0='00e8efb2-eb9d-4c6d-a516-1ea299da5c61'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__link_NextStepId_Value_0
LIMIT 1
2025-10-01 13:44:36.671 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__fromDigits_1='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__fromDigits_1
LIMIT 1
2025-10-01 13:44:36.689 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BearerToken", c."BusinessId", c."CreatedAt", c."IsActive", c."UpdatedAt", c."Url"
FROM "CustomerWebhookConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-10-01 13:44:36.696 +05:30 [INF] Start processing HTTP request POST https://webhook.site/c5a8e6f1-509b-4b4a-b090-68f3d96c99ca
2025-10-01 13:44:36.699 +05:30 [INF] Sending HTTP request POST https://webhook.site/c5a8e6f1-509b-4b4a-b090-68f3d96c99ca
2025-10-01 13:44:39.863 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:14:39.8611745+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:44:40.341 +05:30 [INF] Received HTTP response headers after 3640.196ms - 200
2025-10-01 13:44:40.343 +05:30 [INF] End processing HTTP request after 3647.1309ms - 200
2025-10-01 13:44:40.346 +05:30 [INF] CTA Journey posted to https://webhook.site/c5a8e6f1-509b-4b4a-b090-68f3d96c99ca | 200
2025-10-01 13:44:40.348 +05:30 [INF] 📤 CTAJourney posted: welcome_video_to_template_1 (biz="9841bcab-ca71-439f-8691-d85ada887b01", phone=918974005240, botId=15551622077)
2025-10-01 13:44:40.400 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_TargetStepId_0='00e8efb2-eb9d-4c6d-a516-1ea299da5c61' (Nullable = true), @__8__locals1_context_FlowId_1='0c5e1825-c899-41f0-b947-388dbffed015'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."ProfileNameSlot", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", t."UseProfileName", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."ProfileNameSlot", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c."UseProfileName"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__8__locals1_context_TargetStepId_0 AND c."CTAFlowConfigId" = @__8__locals1_context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-10-01 13:44:40.446 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-10-01 13:44:40.450 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 13:44:40.451 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 13:44:41.180 +05:30 [INF] Received HTTP response headers after 726.8202ms - 200
2025-10-01 13:44:41.182 +05:30 [INF] End processing HTTP request after 732.3255ms - 200
2025-10-01 13:44:41.274 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__8__locals1_context_BusinessId_0 AND w."IsActive"
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 13:44:41.278 +05:30 [INF] ➡️ SEND-INTENT flow="0c5e1825-c899-41f0-b947-388dbffed015" step="00e8efb2-eb9d-4c6d-a516-1ea299da5c61" tmpl=template_1 to=918974005240 provider=META_CLOUD/673199269218077
2025-10-01 13:44:41.283 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-10-01 13:44:41.288 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-10-01 13:44:41.294 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 13:44:41.297 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 13:44:42.388 +05:30 [INF] Received HTTP response headers after 1090.012ms - 200
2025-10-01 13:44:42.403 +05:30 [INF] End processing HTTP request after 1108.4952ms - 200
2025-10-01 13:44:42.435 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='a380ad2b-efb4-4ffa-b531-c2cd94759b96', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-10-01T08:14:42.4168083Z' (DbType = DateTime), @p7='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p8='fb987482-e212-462b-90e8-68526f2eafbd' (Nullable = true), @p9='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA==","message_status":"accepted"}]}', @p10='393603d2-9dbb-41aa-bc56-44cc50fe131a' (Nullable = true), @p11=NULL (DbType = Guid), @p12='00e8efb2-eb9d-4c6d-a516-1ea299da5c61', @p13='template_1' (Nullable = false), @p14='True', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='fb987482-e212-462b-90e8-68526f2eafbd', @p20='9841bcab-ca71-439f-8691-d85ada887b01', @p21='[{"i":0,"t":"Show Me Template 2","ty":"QUICK_REPLY","v":"","ns":"0f631cc5-7088-49ad-82c6-2f7a13484896"}]', @p22='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p23='00e8efb2-eb9d-4c6d-a516-1ea299da5c61' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26=NULL, @p27=NULL, @p28=NULL (DbType = DateTime), @p29='2025-10-01T08:14:42.4161018Z' (DbType = DateTime), @p30=NULL, @p31='1' (Nullable = true), @p32=NULL (DbType = Boolean), @p33='False', @p34=NULL, @p35='template_1' (Nullable = false), @p36='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA==', @p37=NULL (DbType = Decimal), @p38=NULL, @p39=NULL, @p40=NULL, @p41='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA==","message_status":"accepted"}]}', @p42='918974005240' (Nullable = false), @p43='d2f7b638-6751-4061-b24a-808b38a21abf' (Nullable = true), @p44=NULL, @p45=NULL (DbType = Guid), @p46='2025-10-01T08:14:42.4161054Z' (Nullable = true) (DbType = DateTime), @p47='flow', @p48='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48)
RETURNING "MessageTime";
2025-10-01 13:44:43.840 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-10-01 13:44:43.844 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:44:43.845 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:44:43.848 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA==","status":"sent","timestamp":"1759306485","recipient_id":"918974005240","conversation":{"id":"d3851078cc3206444914a4fefe8f61e9","expiration_timestamp":"1759306486","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:44:43.851 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:44:43.852 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA==","status":"sent","timestamp":"1759306485","recipient_id":"918974005240","conversation":{"id":"d3851078cc3206444914a4fefe8f61e9","expiration_timestamp":"1759306486","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:44:43.852 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:44:43.853 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 13:44:43.857 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 9.1947ms
2025-10-01 13:44:43.861 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='sent', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:44:43.861 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:44:43.867 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:44:43.867 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 27.0947ms
2025-10-01 13:44:43.873 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:44:43.888 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='d3851078cc3206444914a4fefe8f61e9'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:44:43.894 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='167235d6-1b2c-4082-a2db-6bfb68149243', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='d3851078cc3206444914a4fefe8f61e9', @p4='2025-10-01T08:14:43.8699513+00:00' (DbType = DateTime), @p5='pricing_update' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:14:45.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA==","status":"sent","timestamp":"1759306485","recipient_id":"918974005240","conversation":{"id":"d3851078cc3206444914a4fefe8f61e9","expiration_timestamp":"1759306486","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA==', @p14='33fc5a45-c254-4d50-8843-4d51384da7cb', @p15='9841bcab-ca71-439f-8691-d85ada887b01', @p16='marketing', @p17='d3851078cc3206444914a4fefe8f61e9', @p18='2025-10-01T08:14:43.8643110+00:00' (DbType = DateTime), @p19='sent' (Nullable = false), @p20='True' (Nullable = true), @p21=NULL (DbType = Guid), @p22='2025-10-01T08:14:45.0000000+00:00' (DbType = DateTime), @p23='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA==","status":"sent","timestamp":"1759306485","recipient_id":"918974005240","conversation":{"id":"d3851078cc3206444914a4fefe8f61e9","expiration_timestamp":"1759306486","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p24=NULL (DbType = Decimal), @p25=NULL, @p26='META_CLOUD' (Nullable = false), @p27='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27);
2025-10-01 13:44:43.920 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 13:44:43.926 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 13:44:44.134 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-10-01 13:44:44.138 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:44:44.141 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:44:44.145 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA==","status":"read","timestamp":"1759306486","recipient_id":"918974005240","conversation":{"id":"d3851078cc3206444914a4fefe8f61e9","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:44:44.147 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:44:44.148 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA==","status":"read","timestamp":"1759306486","recipient_id":"918974005240","conversation":{"id":"d3851078cc3206444914a4fefe8f61e9","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:44:44.149 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:44:44.150 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 13:44:44.153 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 8.8228ms
2025-10-01 13:44:44.157 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='read', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:44:44.158 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:44:44.164 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:44:44.165 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 31.0105ms
2025-10-01 13:44:44.173 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:44:44.184 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='d3851078cc3206444914a4fefe8f61e9'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:44:44.189 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='702c9345-aa3a-4f58-a7f8-0b9cc636d7a3', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='d3851078cc3206444914a4fefe8f61e9', @p4='2025-10-01T08:14:44.1622479+00:00' (DbType = DateTime), @p5='read' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:14:46.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA==","status":"read","timestamp":"1759306486","recipient_id":"918974005240","conversation":{"id":"d3851078cc3206444914a4fefe8f61e9","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 13:44:44.196 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 13:44:44.202 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 13:44:44.209 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='fb987482-e212-462b-90e8-68526f2eafbd', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-10-01 13:44:49.873 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:14:49.8707027+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:44:59.891 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:14:59.8875742+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:45:09.905 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:15:09.9030763+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:45:19.925 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:15:19.9226771+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:45:24.607 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 633
2025-10-01 13:45:24.612 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:45:24.614 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:45:24.617 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTU1Q0U4NEZEMDhCNDI4NjExMjZFOTcyM0E2RTE2MTgA","timestamp":"1759306526","type":"button","button":{"payload":"Show Me Template 2","text":"Show Me Template 2"}}]},"field":"messages"}]}]}
2025-10-01 13:45:24.620 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:45:24.621 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTU1Q0U4NEZEMDhCNDI4NjExMjZFOTcyM0E2RTE2MTgA","timestamp":"1759306526","type":"button","button":{"payload":"Show Me Template 2","text":"Show Me Template 2"}}]},"field":"messages"}]}]}
2025-10-01 13:45:24.624 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:45:24.625 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-10-01 13:45:24.628 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 11.2013ms
2025-10-01 13:45:24.629 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-10-01 13:45:24.630 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:45:24.631 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTU1Q0U4NEZEMDhCNDI4NjExMjZFOTcyM0E2RTE2MTgA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA==, Text: Show Me Template 2
2025-10-01 13:45:24.633 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 25.8313ms
2025-10-01 13:45:24.639 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-10-01 13:45:24.648 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__origin_Id_0='fb987482-e212-462b-90e8-68526f2eafbd' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-10-01 13:45:24.653 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__fromDigits_1='918974005240', @__fromRaw_2='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND (c."PhoneNumber" = @__fromDigits_1 OR c."PhoneNumber" = @__fromRaw_2)
LIMIT 1
2025-10-01 13:45:24.663 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sourceStepId_0='00e8efb2-eb9d-4c6d-a516-1ea299da5c61', @__flowId_1='0c5e1825-c899-41f0-b947-388dbffed015', @__buttonIndex_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-10-01 13:45:24.667 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='00e8efb2-eb9d-4c6d-a516-1ea299da5c61'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-10-01 13:45:24.673 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='05de69c4-cfc4-404c-84ac-53e78b6857fc', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-10-01T08:15:24.6712487Z' (DbType = DateTime), @p7='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p8='fb987482-e212-462b-90e8-68526f2eafbd' (Nullable = true), @p9=NULL, @p10='37262b02-a471-4e66-a326-a148effa80ac' (Nullable = true), @p11=NULL (DbType = Guid), @p12='00e8efb2-eb9d-4c6d-a516-1ea299da5c61', @p13='template_1' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='Show Me Template 2'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-10-01 13:45:24.679 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__stepId_0='00e8efb2-eb9d-4c6d-a516-1ea299da5c61'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-10-01 13:45:24.684 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__link_NextStepId_Value_0='0f631cc5-7088-49ad-82c6-2f7a13484896'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__link_NextStepId_Value_0
LIMIT 1
2025-10-01 13:45:24.689 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__fromDigits_1='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__fromDigits_1
LIMIT 1
2025-10-01 13:45:24.695 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BearerToken", c."BusinessId", c."CreatedAt", c."IsActive", c."UpdatedAt", c."Url"
FROM "CustomerWebhookConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-10-01 13:45:24.699 +05:30 [INF] Start processing HTTP request POST https://webhook.site/c5a8e6f1-509b-4b4a-b090-68f3d96c99ca
2025-10-01 13:45:24.700 +05:30 [INF] Sending HTTP request POST https://webhook.site/c5a8e6f1-509b-4b4a-b090-68f3d96c99ca
2025-10-01 13:45:25.911 +05:30 [INF] Received HTTP response headers after 1209.2683ms - 200
2025-10-01 13:45:25.913 +05:30 [INF] End processing HTTP request after 1214.6003ms - 200
2025-10-01 13:45:25.915 +05:30 [INF] CTA Journey posted to https://webhook.site/c5a8e6f1-509b-4b4a-b090-68f3d96c99ca | 200
2025-10-01 13:45:25.916 +05:30 [INF] 📤 CTAJourney posted: template_1_to_template_2 (biz="9841bcab-ca71-439f-8691-d85ada887b01", phone=918974005240, botId=15551622077)
2025-10-01 13:45:25.922 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_TargetStepId_0='0f631cc5-7088-49ad-82c6-2f7a13484896' (Nullable = true), @__8__locals1_context_FlowId_1='0c5e1825-c899-41f0-b947-388dbffed015'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."ProfileNameSlot", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", t."UseProfileName", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."ProfileNameSlot", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c."UseProfileName"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__8__locals1_context_TargetStepId_0 AND c."CTAFlowConfigId" = @__8__locals1_context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-10-01 13:45:25.927 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-10-01 13:45:25.930 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 13:45:25.932 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 13:45:26.861 +05:30 [INF] Received HTTP response headers after 927.3668ms - 200
2025-10-01 13:45:26.863 +05:30 [INF] End processing HTTP request after 932.5053ms - 200
2025-10-01 13:45:26.996 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__8__locals1_context_BusinessId_0 AND w."IsActive"
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 13:45:27.000 +05:30 [INF] ➡️ SEND-INTENT flow="0c5e1825-c899-41f0-b947-388dbffed015" step="0f631cc5-7088-49ad-82c6-2f7a13484896" tmpl=template_2 to=918974005240 provider=META_CLOUD/673199269218077
2025-10-01 13:45:27.005 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-10-01 13:45:27.010 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-10-01 13:45:27.014 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 13:45:27.016 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 13:45:27.967 +05:30 [INF] Received HTTP response headers after 950.0925ms - 200
2025-10-01 13:45:27.970 +05:30 [INF] End processing HTTP request after 955.9732ms - 200
2025-10-01 13:45:27.975 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='a6daaec6-5ccd-43fe-a890-2078a4acdd3a', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-10-01T08:15:27.9723288Z' (DbType = DateTime), @p7='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p8='3ce2acad-1cb7-40b5-9b62-f3ffafa1e802' (Nullable = true), @p9='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA==","message_status":"accepted"}]}', @p10='b21c91fb-7872-4044-9070-60908660a497' (Nullable = true), @p11=NULL (DbType = Guid), @p12='0f631cc5-7088-49ad-82c6-2f7a13484896', @p13='template_2' (Nullable = false), @p14='True', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='3ce2acad-1cb7-40b5-9b62-f3ffafa1e802', @p20='9841bcab-ca71-439f-8691-d85ada887b01', @p21=NULL, @p22='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p23='0f631cc5-7088-49ad-82c6-2f7a13484896' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26=NULL, @p27=NULL, @p28=NULL (DbType = DateTime), @p29='2025-10-01T08:15:27.9720286Z' (DbType = DateTime), @p30=NULL, @p31='1' (Nullable = true), @p32=NULL (DbType = Boolean), @p33='False', @p34=NULL, @p35='template_2' (Nullable = false), @p36='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA==', @p37=NULL (DbType = Decimal), @p38=NULL, @p39=NULL, @p40=NULL, @p41='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA==","message_status":"accepted"}]}', @p42='918974005240' (Nullable = false), @p43='fb987482-e212-462b-90e8-68526f2eafbd' (Nullable = true), @p44=NULL, @p45=NULL (DbType = Guid), @p46='2025-10-01T08:15:27.9720299Z' (Nullable = true) (DbType = DateTime), @p47='flow', @p48='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48)
RETURNING "MessageTime";
2025-10-01 13:45:29.468 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-10-01 13:45:29.472 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:45:29.474 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:45:29.477 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA==","status":"sent","timestamp":"1759306531","recipient_id":"918974005240","conversation":{"id":"4ee7f363c8acebea24279264ec999413","expiration_timestamp":"1759306531","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:45:29.479 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:45:29.480 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA==","status":"sent","timestamp":"1759306531","recipient_id":"918974005240","conversation":{"id":"4ee7f363c8acebea24279264ec999413","expiration_timestamp":"1759306531","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:45:29.481 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:45:29.482 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 13:45:29.485 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.9411ms
2025-10-01 13:45:29.489 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:45:29.489 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='sent', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:45:29.491 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 22.8085ms
2025-10-01 13:45:29.497 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:45:29.508 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:45:29.514 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='4ee7f363c8acebea24279264ec999413'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:45:29.521 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='3d1e3954-70e7-4da3-810c-697118d2d694', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='4ee7f363c8acebea24279264ec999413', @p4='2025-10-01T08:15:29.4944877+00:00' (DbType = DateTime), @p5='sent' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:15:31.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA==","status":"sent","timestamp":"1759306531","recipient_id":"918974005240","conversation":{"id":"4ee7f363c8acebea24279264ec999413","expiration_timestamp":"1759306531","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA==', @p14='e81ecb3c-951d-44f1-8e2c-5248c287dcac', @p15='9841bcab-ca71-439f-8691-d85ada887b01', @p16='marketing', @p17='4ee7f363c8acebea24279264ec999413', @p18='2025-10-01T08:15:29.5061623+00:00' (DbType = DateTime), @p19='pricing_update' (Nullable = false), @p20='True' (Nullable = true), @p21=NULL (DbType = Guid), @p22='2025-10-01T08:15:31.0000000+00:00' (DbType = DateTime), @p23='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA==","status":"sent","timestamp":"1759306531","recipient_id":"918974005240","conversation":{"id":"4ee7f363c8acebea24279264ec999413","expiration_timestamp":"1759306531","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p24=NULL (DbType = Decimal), @p25=NULL, @p26='META_CLOUD' (Nullable = false), @p27='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27);
2025-10-01 13:45:29.538 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 13:45:29.544 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 13:45:29.766 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-10-01 13:45:29.770 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-10-01 13:45:29.772 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:45:29.775 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:45:29.776 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:45:29.777 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:45:29.780 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA==","status":"read","timestamp":"1759306531","recipient_id":"918974005240","conversation":{"id":"4ee7f363c8acebea24279264ec999413","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:45:29.783 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA==","status":"delivered","timestamp":"1759306531","recipient_id":"918974005240","conversation":{"id":"4ee7f363c8acebea24279264ec999413","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:45:29.785 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:45:29.785 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA==","status":"read","timestamp":"1759306531","recipient_id":"918974005240","conversation":{"id":"4ee7f363c8acebea24279264ec999413","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:45:29.787 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:45:29.789 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:45:29.790 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 13:45:29.792 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:45:29.794 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 13.89ms
2025-10-01 13:45:29.798 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='read', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:45:29.799 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 16.7963ms
2025-10-01 13:45:29.807 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:45:29.801 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:45:29.807 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:45:29.812 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:45:29.813 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 47.2909ms
2025-10-01 13:45:29.815 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 45.365ms
2025-10-01 13:45:29.820 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='4ee7f363c8acebea24279264ec999413'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:45:29.834 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='1e00c628-0d12-46b6-94d5-2fe387b1cecb', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='4ee7f363c8acebea24279264ec999413', @p4='2025-10-01T08:15:29.8048260+00:00' (DbType = DateTime), @p5='read' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:15:31.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA==","status":"read","timestamp":"1759306531","recipient_id":"918974005240","conversation":{"id":"4ee7f363c8acebea24279264ec999413","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 13:45:29.840 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 13:45:29.846 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 13:45:29.852 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p1='3ce2acad-1cb7-40b5-9b62-f3ffafa1e802', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-10-01 13:45:29.856 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA==","status":"delivered","timestamp":"1759306531","recipient_id":"918974005240","conversation":{"id":"4ee7f363c8acebea24279264ec999413","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:45:29.858 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 13:45:29.863 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='delivered', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:45:29.868 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:45:29.877 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:45:29.887 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='4ee7f363c8acebea24279264ec999413'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:45:29.893 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='4abc4ff8-81b5-4ff1-9b0d-77a3d0a5d180', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='4ee7f363c8acebea24279264ec999413', @p4='2025-10-01T08:15:29.8669414+00:00' (DbType = DateTime), @p5='delivered' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:15:31.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA==","status":"delivered","timestamp":"1759306531","recipient_id":"918974005240","conversation":{"id":"4ee7f363c8acebea24279264ec999413","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 13:45:29.899 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 13:45:29.905 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 13:45:29.927 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:15:29.9249136+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:45:36.159 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 633
2025-10-01 13:45:36.164 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:45:36.165 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:45:36.168 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTVCMUNFRTE2QjZGRUZBQzE1ODgzM0Y0MDlDMzI3MjgA","timestamp":"1759306537","type":"button","button":{"payload":"Show Me Template 3","text":"Show Me Template 3"}}]},"field":"messages"}]}]}
2025-10-01 13:45:36.171 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:45:36.171 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTVCMUNFRTE2QjZGRUZBQzE1ODgzM0Y0MDlDMzI3MjgA","timestamp":"1759306537","type":"button","button":{"payload":"Show Me Template 3","text":"Show Me Template 3"}}]},"field":"messages"}]}]}
2025-10-01 13:45:36.172 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:45:36.173 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-10-01 13:45:36.179 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 11.1287ms
2025-10-01 13:45:36.183 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-10-01 13:45:36.186 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:45:36.187 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTVCMUNFRTE2QjZGRUZBQzE1ODgzM0Y0MDlDMzI3MjgA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA==, Text: Show Me Template 3
2025-10-01 13:45:36.190 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 31.2219ms
2025-10-01 13:45:36.196 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-10-01 13:45:36.205 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__origin_Id_0='fb987482-e212-462b-90e8-68526f2eafbd' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMEJFNjhFNERFQUY2OUFCMDVBAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-10-01 13:45:36.210 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__fromDigits_1='918974005240', @__fromRaw_2='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND (c."PhoneNumber" = @__fromDigits_1 OR c."PhoneNumber" = @__fromRaw_2)
LIMIT 1
2025-10-01 13:45:36.215 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='00e8efb2-eb9d-4c6d-a516-1ea299da5c61'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
WHERE f."CTAFlowStepId" = @__stepId_0
ORDER BY f."ButtonIndex"
2025-10-01 13:45:36.219 +05:30 [INF] 🟨 Falling back to single available link for step "00e8efb2-eb9d-4c6d-a516-1ea299da5c61"
2025-10-01 13:45:36.220 +05:30 [INF] ✅ Mapped click by TEXT to index 0 (flow="0c5e1825-c899-41f0-b947-388dbffed015", step="00e8efb2-eb9d-4c6d-a516-1ea299da5c61")
2025-10-01 13:45:36.226 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sourceStepId_0='00e8efb2-eb9d-4c6d-a516-1ea299da5c61', @__flowId_1='0c5e1825-c899-41f0-b947-388dbffed015', @__buttonIndex_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-10-01 13:45:36.230 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='00e8efb2-eb9d-4c6d-a516-1ea299da5c61'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-10-01 13:45:36.254 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p0='b5394b31-0af9-436d-a34f-e4702954ac86', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-10-01T08:15:36.2337156Z' (DbType = DateTime), @p7='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p8='fb987482-e212-462b-90e8-68526f2eafbd' (Nullable = true), @p9=NULL, @p10='9b722d9b-a671-4080-837f-8c87ec1dc469' (Nullable = true), @p11=NULL (DbType = Guid), @p12='00e8efb2-eb9d-4c6d-a516-1ea299da5c61', @p13='template_1' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='Show Me Template 3'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-10-01 13:45:36.260 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__stepId_0='00e8efb2-eb9d-4c6d-a516-1ea299da5c61'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-10-01 13:45:36.266 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__link_NextStepId_Value_0='0f631cc5-7088-49ad-82c6-2f7a13484896'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__link_NextStepId_Value_0
LIMIT 1
2025-10-01 13:45:36.270 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__fromDigits_1='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__fromDigits_1
LIMIT 1
2025-10-01 13:45:36.275 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BearerToken", c."BusinessId", c."CreatedAt", c."IsActive", c."UpdatedAt", c."Url"
FROM "CustomerWebhookConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-10-01 13:45:36.279 +05:30 [INF] Start processing HTTP request POST https://webhook.site/c5a8e6f1-509b-4b4a-b090-68f3d96c99ca
2025-10-01 13:45:36.280 +05:30 [INF] Sending HTTP request POST https://webhook.site/c5a8e6f1-509b-4b4a-b090-68f3d96c99ca
2025-10-01 13:45:37.452 +05:30 [INF] Received HTTP response headers after 1169.8265ms - 200
2025-10-01 13:45:37.455 +05:30 [INF] End processing HTTP request after 1176.7077ms - 200
2025-10-01 13:45:37.459 +05:30 [INF] CTA Journey posted to https://webhook.site/c5a8e6f1-509b-4b4a-b090-68f3d96c99ca | 200
2025-10-01 13:45:37.462 +05:30 [INF] 📤 CTAJourney posted: template_1_to_template_2 (biz="9841bcab-ca71-439f-8691-d85ada887b01", phone=918974005240, botId=15551622077)
2025-10-01 13:45:37.468 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_TargetStepId_0='0f631cc5-7088-49ad-82c6-2f7a13484896' (Nullable = true), @__8__locals1_context_FlowId_1='0c5e1825-c899-41f0-b947-388dbffed015'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."ProfileNameSlot", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", t."UseProfileName", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."ProfileNameSlot", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c."UseProfileName"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__8__locals1_context_TargetStepId_0 AND c."CTAFlowConfigId" = @__8__locals1_context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-10-01 13:45:37.475 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-10-01 13:45:37.483 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 13:45:37.485 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 13:45:38.403 +05:30 [INF] Received HTTP response headers after 916.3697ms - 200
2025-10-01 13:45:38.406 +05:30 [INF] End processing HTTP request after 923.2689ms - 200
2025-10-01 13:45:38.509 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_context_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__8__locals1_context_BusinessId_0 AND w."IsActive"
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 13:45:38.512 +05:30 [INF] ➡️ SEND-INTENT flow="0c5e1825-c899-41f0-b947-388dbffed015" step="0f631cc5-7088-49ad-82c6-2f7a13484896" tmpl=template_2 to=918974005240 provider=META_CLOUD/673199269218077
2025-10-01 13:45:38.517 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-10-01 13:45:38.537 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-10-01 13:45:38.540 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 13:45:38.542 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 13:45:39.938 +05:30 [INF] Received HTTP response headers after 1395.134ms - 200
2025-10-01 13:45:39.942 +05:30 [INF] End processing HTTP request after 1401.7449ms - 200
2025-10-01 13:45:39.948 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:15:39.9467446+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:45:39.954 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='3f858671-d98d-43ff-b5f4-cab10d7b4213', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-10-01T08:15:39.9509718Z' (DbType = DateTime), @p7='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p8='d6ba3d86-e41c-4284-87f8-6c5790ed99c5' (Nullable = true), @p9='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA==","message_status":"accepted"}]}', @p10='e742e81d-8d8c-454e-8bd6-2d275207117e' (Nullable = true), @p11=NULL (DbType = Guid), @p12='0f631cc5-7088-49ad-82c6-2f7a13484896', @p13='template_2' (Nullable = false), @p14='True', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='d6ba3d86-e41c-4284-87f8-6c5790ed99c5', @p20='9841bcab-ca71-439f-8691-d85ada887b01', @p21=NULL, @p22='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p23='0f631cc5-7088-49ad-82c6-2f7a13484896' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26=NULL, @p27=NULL, @p28=NULL (DbType = DateTime), @p29='2025-10-01T08:15:39.9505359Z' (DbType = DateTime), @p30=NULL, @p31='1' (Nullable = true), @p32=NULL (DbType = Boolean), @p33='False', @p34=NULL, @p35='template_2' (Nullable = false), @p36='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA==', @p37=NULL (DbType = Decimal), @p38=NULL, @p39=NULL, @p40=NULL, @p41='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA==","message_status":"accepted"}]}', @p42='918974005240' (Nullable = false), @p43='fb987482-e212-462b-90e8-68526f2eafbd' (Nullable = true), @p44=NULL, @p45=NULL (DbType = Guid), @p46='2025-10-01T08:15:39.9505379Z' (Nullable = true) (DbType = DateTime), @p47='flow', @p48='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48)
RETURNING "MessageTime";
2025-10-01 13:45:40.874 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-10-01 13:45:40.879 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:45:40.880 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:45:40.884 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA==","status":"sent","timestamp":"1759306543","recipient_id":"918974005240","conversation":{"id":"402e07d69e2b2be614ab125dab601124","expiration_timestamp":"1759306543","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:45:40.887 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:45:40.887 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA==","status":"sent","timestamp":"1759306543","recipient_id":"918974005240","conversation":{"id":"402e07d69e2b2be614ab125dab601124","expiration_timestamp":"1759306543","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:45:40.888 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:45:40.889 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 13:45:40.891 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 8.0661ms
2025-10-01 13:45:40.900 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='sent', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:45:40.900 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:45:40.907 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:45:40.907 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 33.2335ms
2025-10-01 13:45:40.913 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:45:40.923 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='402e07d69e2b2be614ab125dab601124'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:45:40.931 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='e0fa321b-6546-49dc-a30a-4258be9b0d5c', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='402e07d69e2b2be614ab125dab601124', @p4='2025-10-01T08:15:40.9050662+00:00' (DbType = DateTime), @p5='sent' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:15:43.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA==","status":"sent","timestamp":"1759306543","recipient_id":"918974005240","conversation":{"id":"402e07d69e2b2be614ab125dab601124","expiration_timestamp":"1759306543","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA==', @p14='f4a4fa13-7c4e-42ba-aa2f-c8f49eeae01f', @p15='9841bcab-ca71-439f-8691-d85ada887b01', @p16='marketing', @p17='402e07d69e2b2be614ab125dab601124', @p18='2025-10-01T08:15:40.9109974+00:00' (DbType = DateTime), @p19='pricing_update' (Nullable = false), @p20='True' (Nullable = true), @p21=NULL (DbType = Guid), @p22='2025-10-01T08:15:43.0000000+00:00' (DbType = DateTime), @p23='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA==","status":"sent","timestamp":"1759306543","recipient_id":"918974005240","conversation":{"id":"402e07d69e2b2be614ab125dab601124","expiration_timestamp":"1759306543","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p24=NULL (DbType = Decimal), @p25=NULL, @p26='META_CLOUD' (Nullable = false), @p27='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27);
2025-10-01 13:45:40.957 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 13:45:40.963 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 13:45:41.555 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-10-01 13:45:41.561 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:45:41.563 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:45:41.565 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA==","status":"read","timestamp":"1759306543","recipient_id":"918974005240","conversation":{"id":"402e07d69e2b2be614ab125dab601124","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:45:41.568 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:45:41.568 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA==","status":"read","timestamp":"1759306543","recipient_id":"918974005240","conversation":{"id":"402e07d69e2b2be614ab125dab601124","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:45:41.569 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:45:41.572 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.1177ms
2025-10-01 13:45:41.570 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 13:45:41.574 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:45:41.580 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 24.984ms
2025-10-01 13:45:41.582 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='read', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:45:41.591 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:45:41.596 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:45:41.602 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='402e07d69e2b2be614ab125dab601124'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:45:41.625 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p0='9a627d06-5034-48a9-a576-92a32202731c', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='402e07d69e2b2be614ab125dab601124', @p4='2025-10-01T08:15:41.5892565+00:00' (DbType = DateTime), @p5='read' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:15:43.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA==","status":"read","timestamp":"1759306543","recipient_id":"918974005240","conversation":{"id":"402e07d69e2b2be614ab125dab601124","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 13:45:41.631 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 13:45:41.637 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 13:45:41.643 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='d6ba3d86-e41c-4284-87f8-6c5790ed99c5', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-10-01 13:45:42.354 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-10-01 13:45:42.359 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:45:42.360 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:45:42.364 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA==","status":"delivered","timestamp":"1759306543","recipient_id":"918974005240","conversation":{"id":"402e07d69e2b2be614ab125dab601124","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:45:42.366 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:45:42.366 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA==","status":"delivered","timestamp":"1759306543","recipient_id":"918974005240","conversation":{"id":"402e07d69e2b2be614ab125dab601124","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:45:42.367 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:45:42.368 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 13:45:42.372 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 8.6371ms
2025-10-01 13:45:42.377 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='delivered', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:45:42.378 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:45:42.384 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:45:42.385 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 30.7702ms
2025-10-01 13:45:42.390 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:45:42.400 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='402e07d69e2b2be614ab125dab601124'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:45:42.423 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@p0='1d52d5c9-8b3e-4a2f-a757-5caa4f4e44c9', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='402e07d69e2b2be614ab125dab601124', @p4='2025-10-01T08:15:42.3819284+00:00' (DbType = DateTime), @p5='delivered' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:15:43.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA==","status":"delivered","timestamp":"1759306543","recipient_id":"918974005240","conversation":{"id":"402e07d69e2b2be614ab125dab601124","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 13:45:42.429 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 13:45:42.435 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 13:45:49.660 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 633
2025-10-01 13:45:49.665 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:45:49.666 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:45:49.669 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTVBRjIzRkIzQjIzNzlGQjE5OTU0MTRGNzIwNDQ4RUIA","timestamp":"1759306551","type":"button","button":{"payload":"Show Me Template 1","text":"Show Me Template 1"}}]},"field":"messages"}]}]}
2025-10-01 13:45:49.672 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:45:49.673 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTVBRjIzRkIzQjIzNzlGQjE5OTU0MTRGNzIwNDQ4RUIA","timestamp":"1759306551","type":"button","button":{"payload":"Show Me Template 1","text":"Show Me Template 1"}}]},"field":"messages"}]}]}
2025-10-01 13:45:49.674 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:45:49.675 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-10-01 13:45:49.677 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 8.291ms
2025-10-01 13:45:49.678 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-10-01 13:45:49.680 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:45:49.681 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTVBRjIzRkIzQjIzNzlGQjE5OTU0MTRGNzIwNDQ4RUIA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA==, Text: Show Me Template 1
2025-10-01 13:45:49.682 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 22.267ms
2025-10-01 13:45:49.688 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-10-01 13:45:49.697 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__origin_Id_0='d6ba3d86-e41c-4284-87f8-6c5790ed99c5' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-10-01 13:45:49.702 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__fromDigits_1='918974005240', @__fromRaw_2='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND (c."PhoneNumber" = @__fromDigits_1 OR c."PhoneNumber" = @__fromRaw_2)
LIMIT 1
2025-10-01 13:45:49.708 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__stepId_0='0f631cc5-7088-49ad-82c6-2f7a13484896'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
WHERE f."CTAFlowStepId" = @__stepId_0
ORDER BY f."ButtonIndex"
2025-10-01 13:45:49.711 +05:30 [INF] 🟡 Button text not found in bundle or flow links. Ref=wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDMzOTY5M0VFN0ZDODAwODYzAA==, Text='Show Me Template 1'
2025-10-01 13:45:49.965 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:15:49.9620945+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:45:59.979 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:15:59.9767225+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:46:09.990 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:16:09.9879867+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:46:19.997 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:16:19.9951691+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:46:30.007 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:16:30.0046699+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:46:40.011 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:16:40.0088049+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:46:50.025 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:16:50.0225926+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:47:00.040 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:17:00.0373524+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:47:10.052 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:17:10.0504283+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:47:20.061 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:17:20.0587302+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:47:30.067 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:17:30.0651424+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:47:40.071 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:17:40.0684852+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:47:50.072 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:17:50.0706947+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:48:00.085 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:18:00.0830939+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:48:10.093 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:18:10.0906422+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:48:20.112 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:18:20.1092455+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:48:30.126 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:18:30.1234999+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:48:40.322 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__now_0='2025-10-01T08:18:40.1270792+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:48:50.337 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:18:50.3345519+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:49:00.350 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:19:00.3470634+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:49:10.362 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:19:10.3597174+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:49:20.372 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:19:20.3698058+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:49:30.386 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:19:30.3842191+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:49:40.401 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:19:40.3985440+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:49:50.414 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:19:50.4109872+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:50:00.421 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:20:00.4182021+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:50:10.426 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:20:10.4240983+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:50:20.437 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:20:20.4347944+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:50:30.447 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:20:30.4445047+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:50:40.450 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:20:40.4477450+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:50:50.463 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:20:50.4602865+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:51:00.476 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:21:00.4745250+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:51:10.486 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:21:10.4841766+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:51:20.500 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:21:20.4974159+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:51:30.507 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:21:30.5050812+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:51:40.512 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:21:40.5090211+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:51:50.521 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:21:50.5190212+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:52:00.532 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:22:00.5301237+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:52:10.535 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:22:10.5332609+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:52:20.540 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:22:20.5392854+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:52:30.546 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:22:30.5442687+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:52:40.559 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:22:40.5576794+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:52:50.568 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:22:50.5663701+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:53:00.576 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:23:00.5751212+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:53:10.587 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:23:10.5854699+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:53:20.595 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:23:20.5935954+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:53:30.602 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:23:30.6013711+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:53:40.725 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__now_0='2025-10-01T08:23:40.6202098+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:53:50.740 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:23:50.7382230+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:54:00.751 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:24:00.7486102+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:54:10.758 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:24:10.7558297+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:54:20.771 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:24:20.7689061+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:54:30.779 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:24:30.7772484+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:54:40.803 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:24:40.8013143+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:54:50.807 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:24:50.8051430+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:55:00.826 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:25:00.8235633+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:55:10.843 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:25:10.8413737+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:55:20.859 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:25:20.8559363+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:56:04.647 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-01 13:56:04.689 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-10-01 13:56:04.708 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-10-01 13:56:05.801 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 13:56:06.642 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-10-01 13:56:06.661 +05:30 [INF] ClickLogWorker started
2025-10-01 13:56:06.836 +05:30 [INF] Now listening on: http://localhost:7113
2025-10-01 13:56:06.837 +05:30 [INF] Now listening on: http://localhost:5295
2025-10-01 13:56:06.838 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-01 13:56:06.839 +05:30 [INF] Hosting environment: Development
2025-10-01 13:56:06.841 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-10-01 13:56:06.844 +05:30 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-10-01 13:56:06.862 +05:30 [INF] Executed DbCommand (48ms) [Parameters=[@__cutoff_0='2025-09-24T08:26:04.8429723Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-10-01 13:56:07.174 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-10-01 13:56:07.317 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 150.562ms
2025-10-01 13:56:07.338 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-10-01 13:56:07.346 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.9825ms
2025-10-01 13:56:07.409 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-10-01 13:56:07.449 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 40.0821ms
2025-10-01 13:56:07.598 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-10-01 13:56:07.696 +05:30 [INF] ClickLogWorker stopped
2025-10-01 13:56:07.877 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 279.2211ms
2025-10-01 13:56:11.806 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__now_0='2025-10-01T08:26:11.6713027+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:56:15.249 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 633
2025-10-01 13:56:15.260 +05:30 [WRN] Failed to determine the https port for redirect.
2025-10-01 13:56:15.382 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:56:15.406 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:56:15.439 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTVDMTFBQzRDMEU2QzUwMDgxMzlBRUE4RDJCMEY2MzkA","timestamp":"1759307177","type":"button","button":{"payload":"Show Me Template 1","text":"Show Me Template 1"}}]},"field":"messages"}]}]}
2025-10-01 13:56:15.444 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:56:15.451 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:56:15.464 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 47.6438ms
2025-10-01 13:56:15.466 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:56:15.469 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 220.0787ms
2025-10-01 13:56:15.602 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTVDMTFBQzRDMEU2QzUwMDgxMzlBRUE4RDJCMEY2MzkA","timestamp":"1759307177","type":"button","button":{"payload":"Show Me Template 1","text":"Show Me Template 1"}}]},"field":"messages"}]}]}
2025-10-01 13:56:15.605 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-10-01 13:56:15.626 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-10-01 13:56:15.630 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTVDMTFBQzRDMEU2QzUwMDgxMzlBRUE4RDJCMEY2MzkA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA==, Text: Show Me Template 1
2025-10-01 13:56:15.667 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-10-01 13:56:15.711 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__origin_Id_0='3ce2acad-1cb7-40b5-9b62-f3ffafa1e802' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-10-01 13:56:15.728 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__fromDigits_1='918974005240', @__fromRaw_2='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND (c."PhoneNumber" = @__fromDigits_1 OR c."PhoneNumber" = @__fromRaw_2)
LIMIT 1
2025-10-01 13:56:15.840 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__stepId_0='0f631cc5-7088-49ad-82c6-2f7a13484896'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
WHERE f."CTAFlowStepId" = @__stepId_0
ORDER BY f."ButtonIndex"
2025-10-01 13:56:15.844 +05:30 [INF] 🟡 Button text not found in bundle or flow links. Ref=wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRDI0NTA5ODU5MjM3OEJGRDJGAA==, Text='Show Me Template 1'
2025-10-01 13:56:16.698 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT w."BusinessId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-10-01 13:56:16.737 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='8390da76-10de-4d76-80f2-68b68f4e2b82'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-10-01 13:56:16.756 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='8390da76-10de-4d76-80f2-68b68f4e2b82'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-10-01 13:56:16.761 +05:30 [INF] ⏭️ Skipping sync for "8390da76-10de-4d76-80f2-68b68f4e2b82"; TTL not expired.
2025-10-01 13:56:16.763 +05:30 [INF] TemplateSyncWorker: biz="8390da76-10de-4d76-80f2-68b68f4e2b82" added=0 updated=0 skipped=0 syncedAt="2025-10-01T05:59:46.4435240Z"
2025-10-01 13:56:16.775 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-10-01 13:56:16.779 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-10-01 13:56:16.783 +05:30 [INF] ⏭️ Skipping sync for "9841bcab-ca71-439f-8691-d85ada887b01"; TTL not expired.
2025-10-01 13:56:16.785 +05:30 [INF] TemplateSyncWorker: biz="9841bcab-ca71-439f-8691-d85ada887b01" added=0 updated=0 skipped=0 syncedAt="2025-10-01T06:42:20.3255670Z"
2025-10-01 13:56:16.788 +05:30 [INF] TemplateSyncWorker: sweep finished in 109 ms; processed=2; next run ~"2025-10-01T14:26:16.6787792Z"
2025-10-01 13:56:21.824 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:26:21.8202252+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:56:31.843 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T08:26:31.8380179+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:56:33.866 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - application/json 350
2025-10-01 13:56:33.882 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 13:56:33.893 +05:30 [INF] Route matched with {action = "SendTemplate", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplate(xbytechat.api.Features.CustomeApi.DTOs.DirectTemplateSendRequest, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 13:56:33.960 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__req_PhoneNumberId_0='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."IsActive" AND w."PhoneNumberId" = @__req_PhoneNumberId_0
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 13:56:33.967 +05:30 [INF] [CustomAPI:"e3a193a5-be6e-4e7e-8e3b-c04cb01d8972"] Begin send. biz="9841bcab-ca71-439f-8691-d85ada887b01" pnid=673199269218077 to=********5240 template=welcome_video
2025-10-01 13:56:34.004 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-10-01 13:56:34.059 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 13:56:34.063 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 13:56:36.041 +05:30 [INF] Received HTTP response headers after 1973.3633ms - 200
2025-10-01 13:56:36.044 +05:30 [INF] End processing HTTP request after 1986.8335ms - 200
2025-10-01 13:56:36.394 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__req_FlowConfigId_Value_0='0c5e1825-c899-41f0-b947-388dbffed015'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "CTAFlowSteps" AS c
WHERE c."CTAFlowConfigId" = @__req_FlowConfigId_Value_0
ORDER BY c."StepOrder"
LIMIT 1
2025-10-01 13:56:36.401 +05:30 [INF] [CustomAPI:"e3a193a5-be6e-4e7e-8e3b-c04cb01d8972"] Sending welcome_video to ********5240 via META_CLOUD (PNID=673199269218077) video=true
2025-10-01 13:56:36.426 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-10-01 13:56:36.440 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-10-01 13:56:36.461 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 13:56:36.463 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 13:56:37.834 +05:30 [INF] Received HTTP response headers after 1370.0029ms - 200
2025-10-01 13:56:37.836 +05:30 [INF] End processing HTTP request after 1375.1967ms - 200
2025-10-01 13:56:38.077 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p0='246bd159-ed24-43bd-9669-61a47f47f38e', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='[{"i":0,"position":1,"text":"Yes","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"position":2,"text":"No","type":"QUICK_REPLY","subType":"quick_reply"}]', @p3='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p4='f468d694-c120-4e84-8ef1-024085736ca8' (Nullable = true), @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7=NULL, @p8=NULL, @p9=NULL (DbType = DateTime), @p10='2025-10-01T08:26:37.8423442Z' (DbType = DateTime), @p11=NULL, @p12=NULL (DbType = Int32), @p13=NULL (DbType = Boolean), @p14='False', @p15='https://whatsappdata.s3.ap-south-1.amazonaws.com/userMedia/dab49080d80c724aad5ebf158d63df41/vde_templ.mp4', @p16='welcome_video' (Nullable = false), @p17='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA==', @p18=NULL (DbType = Decimal), @p19=NULL, @p20='META_CLOUD', @p21='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA==', @p22='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA==","message_status":"accepted"}]}', @p23='918974005240' (Nullable = false), @p24=NULL (DbType = Guid), @p25=NULL, @p26=NULL (DbType = Guid), @p27='2025-10-01T08:26:37.8423442Z' (Nullable = true) (DbType = DateTime), @p28='custom_api', @p29='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29)
RETURNING "MessageTime";
2025-10-01 13:56:38.120 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__messageLogId_0='246bd159-ed24-43bd-9669-61a47f47f38e', @__businessId_1='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-10-01 13:56:38.177 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='d70d2c7a-770a-4275-8d3a-2ffcfbffe94d', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2=NULL, @p3=NULL, @p4='2025-10-01T08:26:38.1245093+00:00' (DbType = DateTime), @p5='send_response' (Nullable = false), @p6=NULL (DbType = Boolean), @p7='246bd159-ed24-43bd-9669-61a47f47f38e' (Nullable = true), @p8='2025-10-01T08:26:38.1249487+00:00' (DbType = DateTime), @p9='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA==","message_status":"accepted"}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 13:56:38.182 +05:30 [INF] [CustomAPI:"e3a193a5-be6e-4e7e-8e3b-c04cb01d8972"] Done. success=true msgId=wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA== flow="0c5e1825-c899-41f0-b947-388dbffed015" step="f468d694-c120-4e84-8ef1-024085736ca8"
2025-10-01 13:56:38.189 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-10-01 13:56:38.205 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api) in 4308.5709ms
2025-10-01 13:56:38.207 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 13:56:38.214 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - 200 null application/json; charset=utf-8 4347.6641ms
2025-10-01 13:56:41.862 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:26:41.8600302+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:56:47.702 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-10-01 13:56:47.712 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:56:47.714 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:56:47.717 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA==","status":"sent","timestamp":"1759307209","recipient_id":"918974005240","conversation":{"id":"84522c6f1f3045f971302ad04e3f485d","expiration_timestamp":"1759307209","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:56:47.719 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:56:47.720 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:56:47.722 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 5.6346ms
2025-10-01 13:56:47.722 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA==","status":"sent","timestamp":"1759307209","recipient_id":"918974005240","conversation":{"id":"84522c6f1f3045f971302ad04e3f485d","expiration_timestamp":"1759307209","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:56:47.724 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:56:47.727 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 24.8925ms
2025-10-01 13:56:47.781 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-10-01 13:56:47.789 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 13:56:47.808 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='sent', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:56:47.819 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:56:47.834 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:56:47.876 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p4='246bd159-ed24-43bd-9669-61a47f47f38e', @p0='marketing', @p1='84522c6f1f3045f971302ad04e3f485d', @p2='2025-09-30T08:26:49.0000000+00:00' (Nullable = true) (DbType = DateTime), @p3='True' (Nullable = true), @p5='55843562-e336-4d93-aefd-250b5cf44e0b', @p6='9841bcab-ca71-439f-8691-d85ada887b01', @p7='marketing', @p8='84522c6f1f3045f971302ad04e3f485d', @p9='2025-10-01T08:26:47.8158627+00:00' (DbType = DateTime), @p10='sent' (Nullable = false), @p11='True' (Nullable = true), @p12=NULL (DbType = Guid), @p13='2025-10-01T08:26:49.0000000+00:00' (DbType = DateTime), @p14='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA==","status":"sent","timestamp":"1759307209","recipient_id":"918974005240","conversation":{"id":"84522c6f1f3045f971302ad04e3f485d","expiration_timestamp":"1759307209","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p15=NULL (DbType = Decimal), @p16=NULL, @p17='META_CLOUD' (Nullable = false), @p18='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA==', @p19='cde340ec-136d-4dcc-82e5-16955ba31914', @p20='9841bcab-ca71-439f-8691-d85ada887b01', @p21='marketing', @p22='84522c6f1f3045f971302ad04e3f485d', @p23='2025-10-01T08:26:47.8217754+00:00' (DbType = DateTime), @p24='pricing_update' (Nullable = false), @p25='True' (Nullable = true), @p26=NULL (DbType = Guid), @p27='2025-10-01T08:26:49.0000000+00:00' (DbType = DateTime), @p28='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA==","status":"sent","timestamp":"1759307209","recipient_id":"918974005240","conversation":{"id":"84522c6f1f3045f971302ad04e3f485d","expiration_timestamp":"1759307209","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p29=NULL (DbType = Decimal), @p30=NULL, @p31='META_CLOUD' (Nullable = false), @p32='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA=='], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "ConversationCategory" = @p0, "ConversationId" = @p1, "ConversationStartedAt" = @p2, "IsChargeable" = @p3
WHERE "Id" = @p4
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32);
2025-10-01 13:56:47.923 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 13:56:47.942 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 13:56:47.957 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-10-01 13:56:47.961 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:56:47.963 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:56:47.969 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA==","status":"delivered","timestamp":"1759307210","recipient_id":"918974005240","conversation":{"id":"84522c6f1f3045f971302ad04e3f485d","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:56:47.971 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:56:47.972 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:56:47.974 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 8.9358ms
2025-10-01 13:56:47.977 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:56:47.979 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 21.3551ms
2025-10-01 13:56:47.984 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA==","status":"delivered","timestamp":"1759307210","recipient_id":"918974005240","conversation":{"id":"84522c6f1f3045f971302ad04e3f485d","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:56:47.986 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 13:56:47.992 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='delivered', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:56:47.998 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:56:48.003 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:56:48.013 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='530947d2-c225-4643-8a34-9cd933663732', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='84522c6f1f3045f971302ad04e3f485d', @p4='2025-10-01T08:26:47.9953007+00:00' (DbType = DateTime), @p5='delivered' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:26:50.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA==","status":"delivered","timestamp":"1759307210","recipient_id":"918974005240","conversation":{"id":"84522c6f1f3045f971302ad04e3f485d","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 13:56:48.019 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 13:56:48.025 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 13:56:48.031 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='246bd159-ed24-43bd-9669-61a47f47f38e', @p0='Delivered' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-10-01 13:56:48.058 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-10-01 13:56:48.062 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:56:48.063 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:56:48.067 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA==","status":"read","timestamp":"1759307210","recipient_id":"918974005240","conversation":{"id":"84522c6f1f3045f971302ad04e3f485d","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:56:48.069 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:56:48.070 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA==","status":"read","timestamp":"1759307210","recipient_id":"918974005240","conversation":{"id":"84522c6f1f3045f971302ad04e3f485d","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:56:48.071 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:56:48.072 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 13:56:48.074 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.7033ms
2025-10-01 13:56:48.077 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:56:48.080 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='read', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:56:48.081 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 23.7311ms
2025-10-01 13:56:48.087 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:56:48.096 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:56:48.103 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='2a13ce0a-81e3-4035-a2f0-3f1996ce64b5', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='84522c6f1f3045f971302ad04e3f485d', @p4='2025-10-01T08:26:48.0848422+00:00' (DbType = DateTime), @p5='read' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:26:50.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA==","status":"read","timestamp":"1759307210","recipient_id":"918974005240","conversation":{"id":"84522c6f1f3045f971302ad04e3f485d","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 13:56:48.109 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 13:56:48.115 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 13:56:48.120 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='246bd159-ed24-43bd-9669-61a47f47f38e', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-10-01 13:56:51.884 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:26:51.8806276+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:56:52.257 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 603
2025-10-01 13:56:52.260 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:56:52.262 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:56:52.265 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTUxN0E1RkM5MzQwMUJEQkE0MjY3QUM5QTY3Q0RDQzkA","timestamp":"1759307213","type":"button","button":{"payload":"Yes","text":"Yes"}}]},"field":"messages"}]}]}
2025-10-01 13:56:52.267 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:56:52.267 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTUxN0E1RkM5MzQwMUJEQkE0MjY3QUM5QTY3Q0RDQzkA","timestamp":"1759307213","type":"button","button":{"payload":"Yes","text":"Yes"}}]},"field":"messages"}]}]}
2025-10-01 13:56:52.268 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:56:52.269 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-10-01 13:56:52.271 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.9878ms
2025-10-01 13:56:52.273 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-10-01 13:56:52.274 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:56:52.276 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTUxN0E1RkM5MzQwMUJEQkE0MjY3QUM5QTY3Q0RDQzkA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA==, Text: Yes
2025-10-01 13:56:52.278 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 21.9395ms
2025-10-01 13:56:52.283 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-10-01 13:56:52.293 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__origin_Id_0='246bd159-ed24-43bd-9669-61a47f47f38e' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-10-01 13:56:52.298 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__fromDigits_1='918974005240', @__fromRaw_2='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND (c."PhoneNumber" = @__fromDigits_1 OR c."PhoneNumber" = @__fromRaw_2)
LIMIT 1
2025-10-01 13:56:52.309 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__stepId_0='f468d694-c120-4e84-8ef1-024085736ca8'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
WHERE f."CTAFlowStepId" = @__stepId_0
ORDER BY f."ButtonIndex"
2025-10-01 13:56:52.332 +05:30 [INF] ✅ Mapped click by TEXT to index 0 (flow="0c5e1825-c899-41f0-b947-388dbffed015", step="f468d694-c120-4e84-8ef1-024085736ca8")
2025-10-01 13:56:52.371 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__sourceStepId_0='f468d694-c120-4e84-8ef1-024085736ca8', @__flowId_1='0c5e1825-c899-41f0-b947-388dbffed015', @__buttonIndex_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-10-01 13:56:52.381 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__stepId_0='f468d694-c120-4e84-8ef1-024085736ca8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-10-01 13:56:52.481 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p0='501c3452-ae07-47bb-87f9-ea13dc1d0c0f', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-10-01T08:26:52.3857812Z' (DbType = DateTime), @p7='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p8='246bd159-ed24-43bd-9669-61a47f47f38e' (Nullable = true), @p9=NULL, @p10='e1848a4f-09b2-425f-8a06-d5584bef1114' (Nullable = true), @p11=NULL (DbType = Guid), @p12='f468d694-c120-4e84-8ef1-024085736ca8', @p13='welcome_video' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='Yes'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-10-01 13:56:52.494 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__fromDigits_1='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__fromDigits_1
LIMIT 1
2025-10-01 13:56:52.501 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."PhoneNumberId"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."PhoneNumberId" IS NOT NULL
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 13:56:52.508 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."WhatsAppBusinessNumber" IS NOT NULL
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 13:56:52.523 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BearerToken", c."BusinessId", c."CreatedAt", c."IsActive", c."UpdatedAt", c."Url"
FROM "CustomerWebhookConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-10-01 13:56:52.529 +05:30 [INF] Start processing HTTP request POST https://webhook.site/c5a8e6f1-509b-4b4a-b090-68f3d96c99ca
2025-10-01 13:56:52.531 +05:30 [INF] Sending HTTP request POST https://webhook.site/c5a8e6f1-509b-4b4a-b090-68f3d96c99ca
2025-10-01 13:56:53.844 +05:30 [INF] Received HTTP response headers after 1312.0341ms - 200
2025-10-01 13:56:53.847 +05:30 [INF] End processing HTTP request after 1318.2791ms - 200
2025-10-01 13:56:53.850 +05:30 [INF] CTA Journey posted to https://webhook.site/c5a8e6f1-509b-4b4a-b090-68f3d96c99ca | 200
2025-10-01 13:56:53.853 +05:30 [INF] 📤 CTAJourney posted (button): yes (biz="9841bcab-ca71-439f-8691-d85ada887b01", phone=918974005240)
2025-10-01 13:56:53.938 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_TargetStepId_0='00e8efb2-eb9d-4c6d-a516-1ea299da5c61' (Nullable = true), @__8__locals1_context_FlowId_1='0c5e1825-c899-41f0-b947-388dbffed015'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."ProfileNameSlot", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", t."UseProfileName", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."ProfileNameSlot", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c."UseProfileName"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__8__locals1_context_TargetStepId_0 AND c."CTAFlowConfigId" = @__8__locals1_context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-10-01 13:56:53.988 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-10-01 13:56:53.991 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 13:56:53.992 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 13:56:54.758 +05:30 [INF] Received HTTP response headers after 764.111ms - 200
2025-10-01 13:56:54.760 +05:30 [INF] End processing HTTP request after 769.0013ms - 200
2025-10-01 13:56:54.920 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__8__locals1_context_BusinessId_0 AND w."IsActive"
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 13:56:54.924 +05:30 [INF] ➡️ SEND-INTENT flow="0c5e1825-c899-41f0-b947-388dbffed015" step="00e8efb2-eb9d-4c6d-a516-1ea299da5c61" tmpl=template_1 to=918974005240 provider=META_CLOUD/673199269218077
2025-10-01 13:56:54.929 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-10-01 13:56:54.935 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-10-01 13:56:54.941 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 13:56:54.943 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 13:56:55.862 +05:30 [INF] Received HTTP response headers after 917.1479ms - 200
2025-10-01 13:56:55.864 +05:30 [INF] End processing HTTP request after 922.2929ms - 200
2025-10-01 13:56:55.899 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='66d31c69-010c-4a07-a3d2-c66cec0e9c8a', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-10-01T08:26:55.8796469Z' (DbType = DateTime), @p7='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p8='c15c3dac-236d-4709-acd8-0672133c779c' (Nullable = true), @p9='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA==","message_status":"accepted"}]}', @p10='39cac92a-8e16-49c8-8cdc-4c3f65e978d1' (Nullable = true), @p11=NULL (DbType = Guid), @p12='00e8efb2-eb9d-4c6d-a516-1ea299da5c61', @p13='template_1' (Nullable = false), @p14='True', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='c15c3dac-236d-4709-acd8-0672133c779c', @p20='9841bcab-ca71-439f-8691-d85ada887b01', @p21='[{"i":0,"t":"Show Me Template 2","ty":"QUICK_REPLY","v":"","ns":"0f631cc5-7088-49ad-82c6-2f7a13484896"}]', @p22='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p23='00e8efb2-eb9d-4c6d-a516-1ea299da5c61' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26=NULL, @p27=NULL, @p28=NULL (DbType = DateTime), @p29='2025-10-01T08:26:55.8783473Z' (DbType = DateTime), @p30=NULL, @p31='1' (Nullable = true), @p32=NULL (DbType = Boolean), @p33='False', @p34=NULL, @p35='template_1' (Nullable = false), @p36='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA==', @p37=NULL (DbType = Decimal), @p38=NULL, @p39=NULL, @p40=NULL, @p41='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA==","message_status":"accepted"}]}', @p42='918974005240' (Nullable = false), @p43='246bd159-ed24-43bd-9669-61a47f47f38e' (Nullable = true), @p44=NULL, @p45=NULL (DbType = Guid), @p46='2025-10-01T08:26:55.8783501Z' (Nullable = true) (DbType = DateTime), @p47='flow', @p48='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48)
RETURNING "MessageTime";
2025-10-01 13:56:57.209 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-10-01 13:56:57.214 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:56:57.215 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:56:57.222 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA==","status":"sent","timestamp":"1759307219","recipient_id":"918974005240","conversation":{"id":"f3db2d21306ddb68c3758dbd42a3a985","expiration_timestamp":"1759307219","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:56:57.226 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:56:57.227 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA==","status":"sent","timestamp":"1759307219","recipient_id":"918974005240","conversation":{"id":"f3db2d21306ddb68c3758dbd42a3a985","expiration_timestamp":"1759307219","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:56:57.227 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:56:57.229 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 13:56:57.231 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 9.5947ms
2025-10-01 13:56:57.235 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:56:57.238 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 29.0977ms
2025-10-01 13:56:57.239 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='sent', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:56:57.250 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:56:57.264 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:56:57.286 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='f3db2d21306ddb68c3758dbd42a3a985'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:56:57.295 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='20fc408e-2051-44ed-8e6b-71fc4c19d5b0', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='f3db2d21306ddb68c3758dbd42a3a985', @p4='2025-10-01T08:26:57.2594361+00:00' (DbType = DateTime), @p5='pricing_update' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:26:59.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA==","status":"sent","timestamp":"1759307219","recipient_id":"918974005240","conversation":{"id":"f3db2d21306ddb68c3758dbd42a3a985","expiration_timestamp":"1759307219","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA==', @p14='6b5996bb-c9e4-446f-bffb-450218331b8b', @p15='9841bcab-ca71-439f-8691-d85ada887b01', @p16='marketing', @p17='f3db2d21306ddb68c3758dbd42a3a985', @p18='2025-10-01T08:26:57.2475169+00:00' (DbType = DateTime), @p19='sent' (Nullable = false), @p20='True' (Nullable = true), @p21=NULL (DbType = Guid), @p22='2025-10-01T08:26:59.0000000+00:00' (DbType = DateTime), @p23='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA==","status":"sent","timestamp":"1759307219","recipient_id":"918974005240","conversation":{"id":"f3db2d21306ddb68c3758dbd42a3a985","expiration_timestamp":"1759307219","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p24=NULL (DbType = Decimal), @p25=NULL, @p26='META_CLOUD' (Nullable = false), @p27='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27);
2025-10-01 13:56:57.323 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 13:56:57.329 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 13:56:57.558 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-10-01 13:56:57.562 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:56:57.563 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:56:57.566 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA==","status":"read","timestamp":"1759307219","recipient_id":"918974005240","conversation":{"id":"f3db2d21306ddb68c3758dbd42a3a985","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:56:57.569 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:56:57.569 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA==","status":"read","timestamp":"1759307219","recipient_id":"918974005240","conversation":{"id":"f3db2d21306ddb68c3758dbd42a3a985","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:56:57.570 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:56:57.571 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 13:56:57.573 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.1604ms
2025-10-01 13:56:57.578 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='read', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:56:57.578 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:56:57.583 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:56:57.583 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 25.3631ms
2025-10-01 13:56:57.588 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:56:57.596 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='f3db2d21306ddb68c3758dbd42a3a985'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:56:57.618 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p0='84b0d23a-82cf-4faf-9966-36c7b2b9dac0', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='f3db2d21306ddb68c3758dbd42a3a985', @p4='2025-10-01T08:26:57.5809100+00:00' (DbType = DateTime), @p5='read' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:26:59.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA==","status":"read","timestamp":"1759307219","recipient_id":"918974005240","conversation":{"id":"f3db2d21306ddb68c3758dbd42a3a985","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 13:56:57.624 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 13:56:57.629 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 13:56:57.634 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='c15c3dac-236d-4709-acd8-0672133c779c', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-10-01 13:56:57.938 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-10-01 13:56:57.942 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:56:57.944 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:56:57.946 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA==","status":"delivered","timestamp":"1759307219","recipient_id":"918974005240","conversation":{"id":"f3db2d21306ddb68c3758dbd42a3a985","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:56:57.949 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:56:57.949 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:56:57.949 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA==","status":"delivered","timestamp":"1759307219","recipient_id":"918974005240","conversation":{"id":"f3db2d21306ddb68c3758dbd42a3a985","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:56:57.953 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.6251ms
2025-10-01 13:56:57.955 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 13:56:57.957 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:56:57.961 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 23.336ms
2025-10-01 13:56:57.962 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='delivered', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:56:57.972 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:56:57.976 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:56:57.980 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='f3db2d21306ddb68c3758dbd42a3a985'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:56:58.003 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p0='e9e0c2f5-dab9-44a8-9daa-570140ddc6d5', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='f3db2d21306ddb68c3758dbd42a3a985', @p4='2025-10-01T08:26:57.9698937+00:00' (DbType = DateTime), @p5='delivered' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:26:59.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA==","status":"delivered","timestamp":"1759307219","recipient_id":"918974005240","conversation":{"id":"f3db2d21306ddb68c3758dbd42a3a985","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 13:56:58.007 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 13:56:58.013 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMkU2RDE1MjhBMTJBM0I5MDQ4AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 13:57:01.893 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:27:01.8903678+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:57:04.442 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 601
2025-10-01 13:57:04.446 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:57:04.447 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:57:04.450 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTU5RjRFODhBNTNDQzk0MUMwNzgxMEU0ODMzMjRGQzIA","timestamp":"1759307226","type":"button","button":{"payload":"No","text":"No"}}]},"field":"messages"}]}]}
2025-10-01 13:57:04.453 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:57:04.453 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTU5RjRFODhBNTNDQzk0MUMwNzgxMEU0ODMzMjRGQzIA","timestamp":"1759307226","type":"button","button":{"payload":"No","text":"No"}}]},"field":"messages"}]}]}
2025-10-01 13:57:04.454 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:57:04.455 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-10-01 13:57:04.457 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.6453ms
2025-10-01 13:57:04.458 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-10-01 13:57:04.459 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:57:04.462 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 20.1708ms
2025-10-01 13:57:04.461 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTU5RjRFODhBNTNDQzk0MUMwNzgxMEU0ODMzMjRGQzIA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA==, Text: No
2025-10-01 13:57:04.471 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-10-01 13:57:04.475 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__origin_Id_0='246bd159-ed24-43bd-9669-61a47f47f38e' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMTNGRUFFOTc0Rjg5RjVCMTc0AA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-10-01 13:57:04.481 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__fromDigits_1='918974005240', @__fromRaw_2='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND (c."PhoneNumber" = @__fromDigits_1 OR c."PhoneNumber" = @__fromRaw_2)
LIMIT 1
2025-10-01 13:57:04.487 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='f468d694-c120-4e84-8ef1-024085736ca8'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
WHERE f."CTAFlowStepId" = @__stepId_0
ORDER BY f."ButtonIndex"
2025-10-01 13:57:04.490 +05:30 [INF] 🟨 Falling back to single available link for step "f468d694-c120-4e84-8ef1-024085736ca8"
2025-10-01 13:57:04.492 +05:30 [INF] ✅ Mapped click by TEXT to index 0 (flow="0c5e1825-c899-41f0-b947-388dbffed015", step="f468d694-c120-4e84-8ef1-024085736ca8")
2025-10-01 13:57:04.496 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sourceStepId_0='f468d694-c120-4e84-8ef1-024085736ca8', @__flowId_1='0c5e1825-c899-41f0-b947-388dbffed015', @__buttonIndex_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-10-01 13:57:04.502 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='f468d694-c120-4e84-8ef1-024085736ca8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-10-01 13:57:04.524 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@p0='d0a7c339-2fa5-44b4-b57d-0c75b5503795', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-10-01T08:27:04.5051554Z' (DbType = DateTime), @p7='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p8='246bd159-ed24-43bd-9669-61a47f47f38e' (Nullable = true), @p9=NULL, @p10='39a135b1-84a0-407e-a6dc-13ac4457a87b' (Nullable = true), @p11=NULL (DbType = Guid), @p12='f468d694-c120-4e84-8ef1-024085736ca8', @p13='welcome_video' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='No'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-10-01 13:57:04.529 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__fromDigits_1='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__fromDigits_1
LIMIT 1
2025-10-01 13:57:04.533 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."PhoneNumberId"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."PhoneNumberId" IS NOT NULL
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 13:57:04.537 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."WhatsAppBusinessNumber" IS NOT NULL
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 13:57:04.541 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BearerToken", c."BusinessId", c."CreatedAt", c."IsActive", c."UpdatedAt", c."Url"
FROM "CustomerWebhookConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-10-01 13:57:04.544 +05:30 [INF] Start processing HTTP request POST https://webhook.site/c5a8e6f1-509b-4b4a-b090-68f3d96c99ca
2025-10-01 13:57:04.546 +05:30 [INF] Sending HTTP request POST https://webhook.site/c5a8e6f1-509b-4b4a-b090-68f3d96c99ca
2025-10-01 13:57:05.930 +05:30 [INF] Received HTTP response headers after 1382.2005ms - 200
2025-10-01 13:57:05.932 +05:30 [INF] End processing HTTP request after 1387.1349ms - 200
2025-10-01 13:57:05.933 +05:30 [INF] CTA Journey posted to https://webhook.site/c5a8e6f1-509b-4b4a-b090-68f3d96c99ca | 200
2025-10-01 13:57:05.934 +05:30 [INF] 📤 CTAJourney posted (button): no (biz="9841bcab-ca71-439f-8691-d85ada887b01", phone=918974005240)
2025-10-01 13:57:05.943 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_context_TargetStepId_0='00e8efb2-eb9d-4c6d-a516-1ea299da5c61' (Nullable = true), @__8__locals1_context_FlowId_1='0c5e1825-c899-41f0-b947-388dbffed015'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."ProfileNameSlot", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", t."UseProfileName", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."ProfileNameSlot", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c."UseProfileName"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__8__locals1_context_TargetStepId_0 AND c."CTAFlowConfigId" = @__8__locals1_context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-10-01 13:57:05.952 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-10-01 13:57:05.956 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 13:57:05.958 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 13:57:06.850 +05:30 [INF] Received HTTP response headers after 889.8678ms - 200
2025-10-01 13:57:06.854 +05:30 [INF] End processing HTTP request after 897.3763ms - 200
2025-10-01 13:57:06.961 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__8__locals1_context_BusinessId_0 AND w."IsActive"
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 13:57:06.965 +05:30 [INF] ➡️ SEND-INTENT flow="0c5e1825-c899-41f0-b947-388dbffed015" step="00e8efb2-eb9d-4c6d-a516-1ea299da5c61" tmpl=template_1 to=918974005240 provider=META_CLOUD/673199269218077
2025-10-01 13:57:06.971 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-10-01 13:57:06.979 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-10-01 13:57:06.982 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 13:57:06.984 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 13:57:08.205 +05:30 [INF] Received HTTP response headers after 1220.3373ms - 200
2025-10-01 13:57:08.235 +05:30 [INF] End processing HTTP request after 1252.6154ms - 200
2025-10-01 13:57:08.248 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='2ccbd08f-e59a-436a-9f2d-6228c42033b8', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-10-01T08:27:08.2414712Z' (DbType = DateTime), @p7='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p8='e72359e0-647f-4376-bdea-3de4f011b721' (Nullable = true), @p9='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA==","message_status":"accepted"}]}', @p10='f86ae039-1437-43a9-b044-1dea5ded089b' (Nullable = true), @p11=NULL (DbType = Guid), @p12='00e8efb2-eb9d-4c6d-a516-1ea299da5c61', @p13='template_1' (Nullable = false), @p14='True', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='e72359e0-647f-4376-bdea-3de4f011b721', @p20='9841bcab-ca71-439f-8691-d85ada887b01', @p21='[{"i":0,"t":"Show Me Template 2","ty":"QUICK_REPLY","v":"","ns":"0f631cc5-7088-49ad-82c6-2f7a13484896"}]', @p22='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p23='00e8efb2-eb9d-4c6d-a516-1ea299da5c61' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26=NULL, @p27=NULL, @p28=NULL (DbType = DateTime), @p29='2025-10-01T08:27:08.2409645Z' (DbType = DateTime), @p30=NULL, @p31='1' (Nullable = true), @p32=NULL (DbType = Boolean), @p33='False', @p34=NULL, @p35='template_1' (Nullable = false), @p36='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA==', @p37=NULL (DbType = Decimal), @p38=NULL, @p39=NULL, @p40=NULL, @p41='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA==","message_status":"accepted"}]}', @p42='918974005240' (Nullable = false), @p43='246bd159-ed24-43bd-9669-61a47f47f38e' (Nullable = true), @p44=NULL, @p45=NULL (DbType = Guid), @p46='2025-10-01T08:27:08.2409672Z' (Nullable = true) (DbType = DateTime), @p47='flow', @p48='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48)
RETURNING "MessageTime";
2025-10-01 13:57:09.939 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-10-01 13:57:09.940 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-10-01 13:57:09.944 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:57:09.946 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:57:09.947 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:57:09.948 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:57:09.951 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA==","status":"sent","timestamp":"1759307231","recipient_id":"918974005240","conversation":{"id":"7aada6a4d815b5ddf524a00fae73bcdb","expiration_timestamp":"1759307231","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:57:09.953 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA==","status":"delivered","timestamp":"1759307232","recipient_id":"918974005240","conversation":{"id":"7aada6a4d815b5ddf524a00fae73bcdb","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:57:09.954 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:57:09.955 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA==","status":"sent","timestamp":"1759307231","recipient_id":"918974005240","conversation":{"id":"7aada6a4d815b5ddf524a00fae73bcdb","expiration_timestamp":"1759307231","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:57:09.957 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:57:09.957 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:57:09.959 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 13:57:09.960 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:57:09.961 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 11.2452ms
2025-10-01 13:57:09.965 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='sent', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:57:09.966 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 13.7313ms
2025-10-01 13:57:09.968 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:57:09.972 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:57:09.973 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:57:09.974 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 36.4529ms
2025-10-01 13:57:09.980 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:57:09.981 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 41.8014ms
2025-10-01 13:57:09.990 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='7aada6a4d815b5ddf524a00fae73bcdb'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:57:09.992 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-10-01 13:57:10.004 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='0a66b56c-0d63-4c1d-9944-df280040f07b', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='7aada6a4d815b5ddf524a00fae73bcdb', @p4='2025-10-01T08:27:09.9776729+00:00' (DbType = DateTime), @p5='pricing_update' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:27:11.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA==","status":"sent","timestamp":"1759307231","recipient_id":"918974005240","conversation":{"id":"7aada6a4d815b5ddf524a00fae73bcdb","expiration_timestamp":"1759307231","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA==', @p14='35dc43ca-c66a-458d-a396-8d21afc89942', @p15='9841bcab-ca71-439f-8691-d85ada887b01', @p16='marketing', @p17='7aada6a4d815b5ddf524a00fae73bcdb', @p18='2025-10-01T08:27:09.9708032+00:00' (DbType = DateTime), @p19='sent' (Nullable = false), @p20='True' (Nullable = true), @p21=NULL (DbType = Guid), @p22='2025-10-01T08:27:11.0000000+00:00' (DbType = DateTime), @p23='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA==","status":"sent","timestamp":"1759307231","recipient_id":"918974005240","conversation":{"id":"7aada6a4d815b5ddf524a00fae73bcdb","expiration_timestamp":"1759307231","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p24=NULL (DbType = Decimal), @p25=NULL, @p26='META_CLOUD' (Nullable = false), @p27='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27);
2025-10-01 13:57:10.005 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:57:10.010 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:57:10.011 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 13:57:10.014 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA==","status":"read","timestamp":"1759307232","recipient_id":"918974005240","conversation":{"id":"7aada6a4d815b5ddf524a00fae73bcdb","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:57:10.018 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 13:57:10.019 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:57:10.023 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:57:10.023 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA==","status":"delivered","timestamp":"1759307232","recipient_id":"918974005240","conversation":{"id":"7aada6a4d815b5ddf524a00fae73bcdb","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:57:10.025 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 11.0147ms
2025-10-01 13:57:10.026 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 13:57:10.028 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:57:10.032 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='delivered', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:57:10.032 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 40.8361ms
2025-10-01 13:57:10.037 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:57:10.046 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:57:10.051 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='7aada6a4d815b5ddf524a00fae73bcdb'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:57:10.055 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='bdb5c64b-4b61-46bf-a61c-1bd875ac41c1', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='7aada6a4d815b5ddf524a00fae73bcdb', @p4='2025-10-01T08:27:10.0357699+00:00' (DbType = DateTime), @p5='delivered' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:27:12.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA==","status":"delivered","timestamp":"1759307232","recipient_id":"918974005240","conversation":{"id":"7aada6a4d815b5ddf524a00fae73bcdb","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 13:57:10.061 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 13:57:10.066 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 13:57:10.072 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='e72359e0-647f-4376-bdea-3de4f011b721', @p0='Delivered' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-10-01 13:57:10.075 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA==","status":"read","timestamp":"1759307232","recipient_id":"918974005240","conversation":{"id":"7aada6a4d815b5ddf524a00fae73bcdb","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:57:10.077 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 13:57:10.081 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='read', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:57:10.086 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:57:10.091 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:57:10.097 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='7aada6a4d815b5ddf524a00fae73bcdb'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:57:10.102 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='a20d6217-1337-4303-9d2e-365b277a2f4e', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='7aada6a4d815b5ddf524a00fae73bcdb', @p4='2025-10-01T08:27:10.0851343+00:00' (DbType = DateTime), @p5='read' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:27:12.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA==","status":"read","timestamp":"1759307232","recipient_id":"918974005240","conversation":{"id":"7aada6a4d815b5ddf524a00fae73bcdb","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 13:57:10.108 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 13:57:10.113 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 13:57:10.119 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='e72359e0-647f-4376-bdea-3de4f011b721', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-10-01 13:57:11.901 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:27:11.8985255+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:57:17.815 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 633
2025-10-01 13:57:17.819 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:57:17.820 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:57:17.823 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTU0OUQzRkZDODBFNUI0MTNEN0IyNTMwNDMwNzU0RTEA","timestamp":"1759307239","type":"button","button":{"payload":"Show Me Template 2","text":"Show Me Template 2"}}]},"field":"messages"}]}]}
2025-10-01 13:57:17.826 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:57:17.826 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTU0OUQzRkZDODBFNUI0MTNEN0IyNTMwNDMwNzU0RTEA","timestamp":"1759307239","type":"button","button":{"payload":"Show Me Template 2","text":"Show Me Template 2"}}]},"field":"messages"}]}]}
2025-10-01 13:57:17.827 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:57:17.828 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-10-01 13:57:17.830 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.9827ms
2025-10-01 13:57:17.831 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-10-01 13:57:17.832 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:57:17.833 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTU0OUQzRkZDODBFNUI0MTNEN0IyNTMwNDMwNzU0RTEA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA==, Text: Show Me Template 2
2025-10-01 13:57:17.835 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 20.0572ms
2025-10-01 13:57:17.840 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-10-01 13:57:17.847 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__origin_Id_0='e72359e0-647f-4376-bdea-3de4f011b721' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSMDM2QzVBNUMyNjE1RDI4MzAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-10-01 13:57:17.852 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__fromDigits_1='918974005240', @__fromRaw_2='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND (c."PhoneNumber" = @__fromDigits_1 OR c."PhoneNumber" = @__fromRaw_2)
LIMIT 1
2025-10-01 13:57:17.861 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sourceStepId_0='00e8efb2-eb9d-4c6d-a516-1ea299da5c61', @__flowId_1='0c5e1825-c899-41f0-b947-388dbffed015', @__buttonIndex_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-10-01 13:57:17.867 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='00e8efb2-eb9d-4c6d-a516-1ea299da5c61'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-10-01 13:57:17.873 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='9ecd2e38-1800-4201-ad76-a3b6b6381933', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-10-01T08:27:17.8708305Z' (DbType = DateTime), @p7='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p8='e72359e0-647f-4376-bdea-3de4f011b721' (Nullable = true), @p9=NULL, @p10='042b0072-3d82-4b42-80ee-44d0dd074225' (Nullable = true), @p11=NULL (DbType = Guid), @p12='00e8efb2-eb9d-4c6d-a516-1ea299da5c61', @p13='template_1' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='Show Me Template 2'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-10-01 13:57:17.878 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__fromDigits_1='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__fromDigits_1
LIMIT 1
2025-10-01 13:57:17.882 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."PhoneNumberId"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."PhoneNumberId" IS NOT NULL
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 13:57:17.886 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."WhatsAppBusinessNumber" IS NOT NULL
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 13:57:17.890 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BearerToken", c."BusinessId", c."CreatedAt", c."IsActive", c."UpdatedAt", c."Url"
FROM "CustomerWebhookConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-10-01 13:57:17.893 +05:30 [INF] Start processing HTTP request POST https://webhook.site/c5a8e6f1-509b-4b4a-b090-68f3d96c99ca
2025-10-01 13:57:17.895 +05:30 [INF] Sending HTTP request POST https://webhook.site/c5a8e6f1-509b-4b4a-b090-68f3d96c99ca
2025-10-01 13:57:19.236 +05:30 [INF] Received HTTP response headers after 1339.9464ms - 200
2025-10-01 13:57:19.243 +05:30 [INF] End processing HTTP request after 1349.2165ms - 200
2025-10-01 13:57:19.245 +05:30 [INF] CTA Journey posted to https://webhook.site/c5a8e6f1-509b-4b4a-b090-68f3d96c99ca | 200
2025-10-01 13:57:19.248 +05:30 [INF] 📤 CTAJourney posted (button): show_me_template_2 (biz="9841bcab-ca71-439f-8691-d85ada887b01", phone=918974005240)
2025-10-01 13:57:19.256 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_TargetStepId_0='0f631cc5-7088-49ad-82c6-2f7a13484896' (Nullable = true), @__8__locals1_context_FlowId_1='0c5e1825-c899-41f0-b947-388dbffed015'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."ProfileNameSlot", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", t."UseProfileName", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."ProfileNameSlot", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c."UseProfileName"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__8__locals1_context_TargetStepId_0 AND c."CTAFlowConfigId" = @__8__locals1_context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-10-01 13:57:19.263 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-10-01 13:57:19.270 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 13:57:19.272 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 13:57:20.368 +05:30 [INF] Received HTTP response headers after 1094.1394ms - 200
2025-10-01 13:57:20.370 +05:30 [INF] End processing HTTP request after 1100.5743ms - 200
2025-10-01 13:57:20.484 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__8__locals1_context_BusinessId_0 AND w."IsActive"
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 13:57:20.491 +05:30 [INF] ➡️ SEND-INTENT flow="0c5e1825-c899-41f0-b947-388dbffed015" step="0f631cc5-7088-49ad-82c6-2f7a13484896" tmpl=template_2 to=918974005240 provider=META_CLOUD/673199269218077
2025-10-01 13:57:20.501 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-10-01 13:57:20.506 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-10-01 13:57:20.509 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 13:57:20.510 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 13:57:21.878 +05:30 [INF] Received HTTP response headers after 1366.636ms - 200
2025-10-01 13:57:21.883 +05:30 [INF] End processing HTTP request after 1373.8649ms - 200
2025-10-01 13:57:21.890 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='d46cc767-bdce-4748-b101-1b2ff209a4aa', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-10-01T08:27:21.8868987Z' (DbType = DateTime), @p7='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p8='0c5f2c8f-32f2-4b9f-9de3-5137af8558a9' (Nullable = true), @p9='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA==","message_status":"accepted"}]}', @p10='e8980486-05cd-48c1-91fe-e4ba256665a8' (Nullable = true), @p11=NULL (DbType = Guid), @p12='0f631cc5-7088-49ad-82c6-2f7a13484896', @p13='template_2' (Nullable = false), @p14='True', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='0c5f2c8f-32f2-4b9f-9de3-5137af8558a9', @p20='9841bcab-ca71-439f-8691-d85ada887b01', @p21=NULL, @p22='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p23='0f631cc5-7088-49ad-82c6-2f7a13484896' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26=NULL, @p27=NULL, @p28=NULL (DbType = DateTime), @p29='2025-10-01T08:27:21.8865572Z' (DbType = DateTime), @p30=NULL, @p31='1' (Nullable = true), @p32=NULL (DbType = Boolean), @p33='False', @p34=NULL, @p35='template_2' (Nullable = false), @p36='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA==', @p37=NULL (DbType = Decimal), @p38=NULL, @p39=NULL, @p40=NULL, @p41='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA==","message_status":"accepted"}]}', @p42='918974005240' (Nullable = false), @p43='e72359e0-647f-4376-bdea-3de4f011b721' (Nullable = true), @p44=NULL, @p45=NULL (DbType = Guid), @p46='2025-10-01T08:27:21.8865592Z' (Nullable = true) (DbType = DateTime), @p47='flow', @p48='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48)
RETURNING "MessageTime";
2025-10-01 13:57:21.915 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:27:21.9125893+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:57:23.149 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-10-01 13:57:23.156 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:57:23.158 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:57:23.161 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA==","status":"sent","timestamp":"1759307245","recipient_id":"918974005240","conversation":{"id":"18f56e243844fcfdb05ac8f67376de09","expiration_timestamp":"1759307245","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:57:23.163 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:57:23.165 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA==","status":"sent","timestamp":"1759307245","recipient_id":"918974005240","conversation":{"id":"18f56e243844fcfdb05ac8f67376de09","expiration_timestamp":"1759307245","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:57:23.167 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:57:23.169 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 13:57:23.171 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 10.7283ms
2025-10-01 13:57:23.177 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='sent', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:57:23.179 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:57:23.183 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:57:23.191 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 41.4931ms
2025-10-01 13:57:23.198 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:57:23.211 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='18f56e243844fcfdb05ac8f67376de09'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:57:23.219 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='03209907-0d78-44d1-b075-29c540283b09', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='18f56e243844fcfdb05ac8f67376de09', @p4='2025-10-01T08:27:23.1820922+00:00' (DbType = DateTime), @p5='sent' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:27:25.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA==","status":"sent","timestamp":"1759307245","recipient_id":"918974005240","conversation":{"id":"18f56e243844fcfdb05ac8f67376de09","expiration_timestamp":"1759307245","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA==', @p14='36f1a313-d99b-4871-98b4-078fcfa0ad98', @p15='9841bcab-ca71-439f-8691-d85ada887b01', @p16='marketing', @p17='18f56e243844fcfdb05ac8f67376de09', @p18='2025-10-01T08:27:23.1949886+00:00' (DbType = DateTime), @p19='pricing_update' (Nullable = false), @p20='True' (Nullable = true), @p21=NULL (DbType = Guid), @p22='2025-10-01T08:27:25.0000000+00:00' (DbType = DateTime), @p23='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA==","status":"sent","timestamp":"1759307245","recipient_id":"918974005240","conversation":{"id":"18f56e243844fcfdb05ac8f67376de09","expiration_timestamp":"1759307245","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p24=NULL (DbType = Decimal), @p25=NULL, @p26='META_CLOUD' (Nullable = false), @p27='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27);
2025-10-01 13:57:23.243 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 13:57:23.249 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 13:57:23.779 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-10-01 13:57:23.782 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-10-01 13:57:23.788 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:57:23.786 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:57:23.789 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:57:23.791 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:57:23.793 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA==","status":"delivered","timestamp":"1759307245","recipient_id":"918974005240","conversation":{"id":"18f56e243844fcfdb05ac8f67376de09","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:57:23.795 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA==","status":"read","timestamp":"1759307245","recipient_id":"918974005240","conversation":{"id":"18f56e243844fcfdb05ac8f67376de09","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:57:23.797 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:57:23.798 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA==","status":"delivered","timestamp":"1759307245","recipient_id":"918974005240","conversation":{"id":"18f56e243844fcfdb05ac8f67376de09","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:57:23.800 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:57:23.801 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:57:23.802 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 13:57:23.803 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:57:23.804 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 11.6829ms
2025-10-01 13:57:23.809 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='delivered', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:57:23.809 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 14.213ms
2025-10-01 13:57:23.811 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:57:23.818 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:57:23.818 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:57:23.819 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 36.7652ms
2025-10-01 13:57:23.824 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:57:23.824 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 45.2785ms
2025-10-01 13:57:23.836 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='18f56e243844fcfdb05ac8f67376de09'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:57:23.863 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p0='9d650c7e-974e-46c3-a408-d5e5a6e0bf50', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='18f56e243844fcfdb05ac8f67376de09', @p4='2025-10-01T08:27:23.8155225+00:00' (DbType = DateTime), @p5='delivered' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:27:25.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA==","status":"delivered","timestamp":"1759307245","recipient_id":"918974005240","conversation":{"id":"18f56e243844fcfdb05ac8f67376de09","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 13:57:23.869 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 13:57:23.874 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 13:57:23.881 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='0c5f2c8f-32f2-4b9f-9de3-5137af8558a9', @p0='Delivered' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-10-01 13:57:23.885 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA==","status":"read","timestamp":"1759307245","recipient_id":"918974005240","conversation":{"id":"18f56e243844fcfdb05ac8f67376de09","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 13:57:23.887 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 13:57:23.891 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='read', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:57:23.896 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 13:57:23.901 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:57:23.906 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='18f56e243844fcfdb05ac8f67376de09'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 13:57:23.911 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p0='04558e3e-7aab-4160-8a53-9cc2c989cd80', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='18f56e243844fcfdb05ac8f67376de09', @p4='2025-10-01T08:27:23.8944522+00:00' (DbType = DateTime), @p5='read' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:27:25.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA==","status":"read","timestamp":"1759307245","recipient_id":"918974005240","conversation":{"id":"18f56e243844fcfdb05ac8f67376de09","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 13:57:23.916 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 13:57:23.921 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 13:57:23.926 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='0c5f2c8f-32f2-4b9f-9de3-5137af8558a9', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-10-01 13:57:31.926 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:27:31.9229507+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:57:33.379 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 633
2025-10-01 13:57:33.384 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:57:33.386 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 13:57:33.389 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTVFRUVGMDFBQTY3QTg1MTU3MERGMzRBOEZCNzg4NTcA","timestamp":"1759307255","type":"button","button":{"payload":"Show Me Template 1","text":"Show Me Template 1"}}]},"field":"messages"}]}]}
2025-10-01 13:57:33.391 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 13:57:33.392 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTVFRUVGMDFBQTY3QTg1MTU3MERGMzRBOEZCNzg4NTcA","timestamp":"1759307255","type":"button","button":{"payload":"Show Me Template 1","text":"Show Me Template 1"}}]},"field":"messages"}]}]}
2025-10-01 13:57:33.392 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 13:57:33.394 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-10-01 13:57:33.395 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.4754ms
2025-10-01 13:57:33.396 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-10-01 13:57:33.398 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 13:57:33.399 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTVFRUVGMDFBQTY3QTg1MTU3MERGMzRBOEZCNzg4NTcA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA==, Text: Show Me Template 1
2025-10-01 13:57:33.400 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 20.8579ms
2025-10-01 13:57:33.404 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-10-01 13:57:33.413 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__origin_Id_0='0c5f2c8f-32f2-4b9f-9de3-5137af8558a9' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-10-01 13:57:33.417 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__fromDigits_1='918974005240', @__fromRaw_2='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND (c."PhoneNumber" = @__fromDigits_1 OR c."PhoneNumber" = @__fromRaw_2)
LIMIT 1
2025-10-01 13:57:33.421 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='0f631cc5-7088-49ad-82c6-2f7a13484896'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
WHERE f."CTAFlowStepId" = @__stepId_0
ORDER BY f."ButtonIndex"
2025-10-01 13:57:33.424 +05:30 [INF] 🟡 Button text not found in bundle or flow links. Ref=wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSN0M3NkJGNDc0MEM2NjU3QUExAA==, Text='Show Me Template 1'
2025-10-01 13:57:41.936 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:27:41.9340898+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:57:51.952 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:27:51.9492054+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:58:01.961 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:28:01.9582377+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:58:11.968 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:28:11.9665044+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:58:21.983 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:28:21.9795563+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:58:31.991 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:28:31.9888751+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:58:42.001 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:28:41.9990189+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:58:52.008 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:28:52.0047760+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:59:02.026 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:29:02.0233846+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:59:12.036 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:29:12.0331558+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:59:22.055 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:29:22.0518040+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:59:32.055 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:29:32.0527255+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:59:42.062 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:29:42.0593254+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 13:59:52.078 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:29:52.0754332+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:00:02.093 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:30:02.0914603+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:00:12.115 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:30:12.1134669+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:00:22.134 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:30:22.1324517+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:00:32.158 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@__now_0='2025-10-01T08:30:32.1372286+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:00:42.201 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:30:42.1989650+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:00:52.209 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:30:52.2058963+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:01:02.216 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:31:02.2136965+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:01:12.320 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T08:31:12.2253382+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:01:22.329 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T08:31:22.3253827+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:01:32.342 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:31:32.3400841+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:01:42.353 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:31:42.3518682+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:01:52.372 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:31:52.3709747+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:02:02.379 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:32:02.3761231+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:02:12.397 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:32:12.3943348+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:02:22.410 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:32:22.4061577+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:02:49.865 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-01 14:02:49.924 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-10-01 14:02:49.944 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-10-01 14:02:51.327 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 14:02:52.213 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-10-01 14:02:52.235 +05:30 [INF] ClickLogWorker started
2025-10-01 14:02:52.435 +05:30 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-10-01 14:02:52.471 +05:30 [INF] Executed DbCommand (90ms) [Parameters=[@__cutoff_0='2025-09-24T08:32:50.0994928Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-10-01 14:02:52.476 +05:30 [INF] Now listening on: http://localhost:7113
2025-10-01 14:02:52.484 +05:30 [INF] Now listening on: http://localhost:5295
2025-10-01 14:02:52.485 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-01 14:02:52.486 +05:30 [INF] Hosting environment: Development
2025-10-01 14:02:52.487 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-10-01 14:02:53.281 +05:30 [INF] ClickLogWorker stopped
2025-10-01 14:02:53.956 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-10-01 14:02:54.239 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 292.1105ms
2025-10-01 14:02:54.282 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-10-01 14:02:54.291 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 9.5439ms
2025-10-01 14:02:54.354 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-10-01 14:02:54.404 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 49.295ms
2025-10-01 14:02:54.614 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-10-01 14:02:54.983 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 368.9323ms
2025-10-01 14:02:57.362 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__now_0='2025-10-01T08:32:57.2456762+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:03:02.288 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT w."BusinessId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-10-01 14:03:02.336 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='8390da76-10de-4d76-80f2-68b68f4e2b82'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-10-01 14:03:02.364 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='8390da76-10de-4d76-80f2-68b68f4e2b82'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-10-01 14:03:02.371 +05:30 [INF] ⏭️ Skipping sync for "8390da76-10de-4d76-80f2-68b68f4e2b82"; TTL not expired.
2025-10-01 14:03:02.374 +05:30 [INF] TemplateSyncWorker: biz="8390da76-10de-4d76-80f2-68b68f4e2b82" added=0 updated=0 skipped=0 syncedAt="2025-10-01T05:59:46.4435240Z"
2025-10-01 14:03:02.386 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive"
LIMIT 1
2025-10-01 14:03:02.392 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."LastSyncedAt"
FROM "WhatsAppTemplates" AS w
WHERE w."BusinessId" = @__businessId_0
ORDER BY w."LastSyncedAt" DESC
LIMIT 1
2025-10-01 14:03:02.396 +05:30 [INF] ⏭️ Skipping sync for "9841bcab-ca71-439f-8691-d85ada887b01"; TTL not expired.
2025-10-01 14:03:02.398 +05:30 [INF] TemplateSyncWorker: biz="9841bcab-ca71-439f-8691-d85ada887b01" added=0 updated=0 skipped=0 syncedAt="2025-10-01T06:42:20.3255670Z"
2025-10-01 14:03:02.401 +05:30 [INF] TemplateSyncWorker: sweep finished in 147 ms; processed=2; next run ~"2025-10-01T14:33:02.2531535Z"
2025-10-01 14:03:07.368 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:33:07.3640160+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:03:17.385 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T08:33:17.3809266+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:03:27.401 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:33:27.3973156+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:03:37.414 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:33:37.4111845+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:03:47.429 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:33:47.4251516+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:03:57.452 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:33:57.4487365+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:04:07.462 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:34:07.4594704+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:04:17.470 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:34:17.4664220+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:04:19.566 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - application/json 350
2025-10-01 14:04:19.573 +05:30 [WRN] Failed to determine the https port for redirect.
2025-10-01 14:04:19.735 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 14:04:19.764 +05:30 [INF] Route matched with {action = "SendTemplate", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SendTemplate(xbytechat.api.Features.CustomeApi.DTOs.DirectTemplateSendRequest, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 14:04:19.856 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__req_PhoneNumberId_0='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."BusinessId", w."CreatedAt", w."IsActive", w."IsDefault", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WhatsAppBusinessNumber"
FROM "WhatsAppPhoneNumbers" AS w
WHERE w."IsActive" AND w."PhoneNumberId" = @__req_PhoneNumberId_0
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 14:04:19.864 +05:30 [INF] [CustomAPI:"d876adb6-6db9-49e6-8c34-bc5cc83adb36"] Begin send. biz="9841bcab-ca71-439f-8691-d85ada887b01" pnid=673199269218077 to=********5240 template=welcome_video
2025-10-01 14:04:19.914 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-10-01 14:04:20.010 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 14:04:20.033 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 14:04:21.249 +05:30 [INF] Received HTTP response headers after 1209.9479ms - 200
2025-10-01 14:04:21.252 +05:30 [INF] End processing HTTP request after 1245.0294ms - 200
2025-10-01 14:04:21.763 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__req_FlowConfigId_Value_0='0c5e1825-c899-41f0-b947-388dbffed015'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "CTAFlowSteps" AS c
WHERE c."CTAFlowConfigId" = @__req_FlowConfigId_Value_0
ORDER BY c."StepOrder"
LIMIT 1
2025-10-01 14:04:21.770 +05:30 [INF] [CustomAPI:"d876adb6-6db9-49e6-8c34-bc5cc83adb36"] Sending welcome_video to ********5240 via META_CLOUD (PNID=673199269218077) video=true
2025-10-01 14:04:21.794 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-10-01 14:04:21.807 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-10-01 14:04:21.829 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 14:04:21.831 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 14:04:22.885 +05:30 [INF] Received HTTP response headers after 1052.0943ms - 200
2025-10-01 14:04:22.887 +05:30 [INF] End processing HTTP request after 1058.5353ms - 200
2025-10-01 14:04:23.219 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@p0='4ade4b9c-df3f-439d-a1b1-a9f06887b15c', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='[{"i":0,"position":1,"text":"Yes","type":"QUICK_REPLY","subType":"quick_reply"},{"i":1,"position":2,"text":"No","type":"QUICK_REPLY","subType":"quick_reply"}]', @p3='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p4='f468d694-c120-4e84-8ef1-024085736ca8' (Nullable = true), @p5=NULL (DbType = Guid), @p6=NULL (DbType = Guid), @p7=NULL, @p8=NULL, @p9=NULL (DbType = DateTime), @p10='2025-10-01T08:34:22.8935292Z' (DbType = DateTime), @p11=NULL, @p12=NULL (DbType = Int32), @p13=NULL (DbType = Boolean), @p14='False', @p15='https://whatsappdata.s3.ap-south-1.amazonaws.com/userMedia/dab49080d80c724aad5ebf158d63df41/vde_templ.mp4', @p16='welcome_video' (Nullable = false), @p17='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA==', @p18=NULL (DbType = Decimal), @p19=NULL, @p20='META_CLOUD', @p21='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA==', @p22='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA==","message_status":"accepted"}]}', @p23='918974005240' (Nullable = false), @p24=NULL (DbType = Guid), @p25=NULL, @p26=NULL (DbType = Guid), @p27='2025-10-01T08:34:22.8935292Z' (Nullable = true) (DbType = DateTime), @p28='custom_api', @p29='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29)
RETURNING "MessageTime";
2025-10-01 14:04:23.265 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__messageLogId_0='4ade4b9c-df3f-439d-a1b1-a9f06887b15c', @__businessId_1='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."Id" = @__messageLogId_0 AND m."BusinessId" = @__businessId_1
LIMIT 1
2025-10-01 14:04:23.315 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='73f73c3d-6dc6-4eef-a603-0e6cbdfc63d6', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2=NULL, @p3=NULL, @p4='2025-10-01T08:34:23.2695603+00:00' (DbType = DateTime), @p5='send_response' (Nullable = false), @p6=NULL (DbType = Boolean), @p7='4ade4b9c-df3f-439d-a1b1-a9f06887b15c' (Nullable = true), @p8='2025-10-01T08:34:23.2699426+00:00' (DbType = DateTime), @p9='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA==","message_status":"accepted"}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 14:04:23.320 +05:30 [INF] [CustomAPI:"d876adb6-6db9-49e6-8c34-bc5cc83adb36"] Done. success=true msgId=wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA== flow="0c5e1825-c899-41f0-b947-388dbffed015" step="f468d694-c120-4e84-8ef1-024085736ca8"
2025-10-01 14:04:23.331 +05:30 [INF] Executing OkObjectResult, writing value of type 'xbytechat.api.Helpers.ResponseResult'.
2025-10-01 14:04:23.353 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api) in 3580.5554ms
2025-10-01 14:04:23.356 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.SendTemplate (xbytechat.api)'
2025-10-01 14:04:23.367 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:7113/api/custom/sendflow - 200 null application/json; charset=utf-8 3800.4029ms
2025-10-01 14:04:27.480 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:34:27.4768491+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:04:32.206 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-10-01 14:04:32.224 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 14:04:32.228 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 14:04:32.241 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA==","status":"sent","timestamp":"1759307673","recipient_id":"918974005240","conversation":{"id":"8c79079a4239d0a311df7300c180cdc1","expiration_timestamp":"1759307674","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 14:04:32.247 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 14:04:32.249 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 14:04:32.255 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 24.1457ms
2025-10-01 14:04:32.258 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 14:04:32.260 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 53.9951ms
2025-10-01 14:04:32.479 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA==","status":"sent","timestamp":"1759307673","recipient_id":"918974005240","conversation":{"id":"8c79079a4239d0a311df7300c180cdc1","expiration_timestamp":"1759307674","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 14:04:32.560 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__provider_0='meta_cloud'], CommandType='"Text"', CommandTimeout='30']
SELECT w."BusinessId", w."PhoneNumberId", w."WhatsAppBusinessNumber", w."WabaId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND lower(w."Provider") = @__provider_0
2025-10-01 14:04:32.568 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 14:04:32.588 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='sent', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 14:04:32.595 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 14:04:32.612 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 14:04:32.648 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p4='4ade4b9c-df3f-439d-a1b1-a9f06887b15c', @p0='marketing', @p1='8c79079a4239d0a311df7300c180cdc1', @p2='2025-09-30T08:34:34.0000000+00:00' (Nullable = true) (DbType = DateTime), @p3='True' (Nullable = true), @p5='6f39ff7b-826a-4cf7-8a9c-4215de019a1b', @p6='9841bcab-ca71-439f-8691-d85ada887b01', @p7='marketing', @p8='8c79079a4239d0a311df7300c180cdc1', @p9='2025-10-01T08:34:32.5918770+00:00' (DbType = DateTime), @p10='sent' (Nullable = false), @p11='True' (Nullable = true), @p12=NULL (DbType = Guid), @p13='2025-10-01T08:34:33.0000000+00:00' (DbType = DateTime), @p14='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA==","status":"sent","timestamp":"1759307673","recipient_id":"918974005240","conversation":{"id":"8c79079a4239d0a311df7300c180cdc1","expiration_timestamp":"1759307674","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p15=NULL (DbType = Decimal), @p16=NULL, @p17='META_CLOUD' (Nullable = false), @p18='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA==', @p19='d6d78057-eb39-407f-ac75-2fb4444d37e4', @p20='9841bcab-ca71-439f-8691-d85ada887b01', @p21='marketing', @p22='8c79079a4239d0a311df7300c180cdc1', @p23='2025-10-01T08:34:32.5991056+00:00' (DbType = DateTime), @p24='pricing_update' (Nullable = false), @p25='True' (Nullable = true), @p26=NULL (DbType = Guid), @p27='2025-10-01T08:34:33.0000000+00:00' (DbType = DateTime), @p28='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA==","status":"sent","timestamp":"1759307673","recipient_id":"918974005240","conversation":{"id":"8c79079a4239d0a311df7300c180cdc1","expiration_timestamp":"1759307674","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p29=NULL (DbType = Decimal), @p30=NULL, @p31='META_CLOUD' (Nullable = false), @p32='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA=='], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "ConversationCategory" = @p0, "ConversationId" = @p1, "ConversationStartedAt" = @p2, "IsChargeable" = @p3
WHERE "Id" = @p4
RETURNING "MessageTime";
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32);
2025-10-01 14:04:32.691 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 14:04:32.705 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 14:04:32.809 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-10-01 14:04:32.811 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-10-01 14:04:32.819 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 14:04:32.819 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 14:04:32.822 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 14:04:32.823 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 14:04:32.826 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA==","status":"read","timestamp":"1759307674","recipient_id":"918974005240","conversation":{"id":"8c79079a4239d0a311df7300c180cdc1","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 14:04:32.830 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 14:04:32.831 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA==","status":"delivered","timestamp":"1759307674","recipient_id":"918974005240","conversation":{"id":"8c79079a4239d0a311df7300c180cdc1","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 14:04:32.834 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA==","status":"read","timestamp":"1759307674","recipient_id":"918974005240","conversation":{"id":"8c79079a4239d0a311df7300c180cdc1","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 14:04:32.832 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 14:04:32.835 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 14:04:32.847 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 14:04:32.848 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 22.2864ms
2025-10-01 14:04:32.849 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 14:04:32.854 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 14:04:32.855 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='read', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 14:04:32.857 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 29.3684ms
2025-10-01 14:04:32.859 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 48.1849ms
2025-10-01 14:04:32.866 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 14:04:32.866 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 14:04:32.878 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 14:04:32.878 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 69.3491ms
2025-10-01 14:04:32.906 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p0='7d7d830c-3066-4661-880e-aaf6c478156c', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='8c79079a4239d0a311df7300c180cdc1', @p4='2025-10-01T08:34:32.8638622+00:00' (DbType = DateTime), @p5='read' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:34:34.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA==","status":"read","timestamp":"1759307674","recipient_id":"918974005240","conversation":{"id":"8c79079a4239d0a311df7300c180cdc1","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 14:04:32.913 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 14:04:32.919 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 14:04:32.927 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='4ade4b9c-df3f-439d-a1b1-a9f06887b15c', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-10-01 14:04:32.948 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA==","status":"delivered","timestamp":"1759307674","recipient_id":"918974005240","conversation":{"id":"8c79079a4239d0a311df7300c180cdc1","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 14:04:32.951 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 14:04:32.957 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='delivered', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 14:04:32.964 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 14:04:32.971 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 14:04:32.978 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='1de1ad60-6b14-43d2-a285-0efcf20f1604', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='8c79079a4239d0a311df7300c180cdc1', @p4='2025-10-01T08:34:32.9618766+00:00' (DbType = DateTime), @p5='delivered' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:34:34.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA==","status":"delivered","timestamp":"1759307674","recipient_id":"918974005240","conversation":{"id":"8c79079a4239d0a311df7300c180cdc1","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 14:04:32.985 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 14:04:32.991 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 14:04:35.991 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 603
2025-10-01 14:04:35.996 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 14:04:35.997 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 14:04:36.002 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTU1Q0M5NkQ2RTE0NTNBOEVDNTIyMjhDQ0VCMDM1MDIA","timestamp":"1759307677","type":"button","button":{"payload":"Yes","text":"Yes"}}]},"field":"messages"}]}]}
2025-10-01 14:04:36.005 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 14:04:36.005 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTU1Q0M5NkQ2RTE0NTNBOEVDNTIyMjhDQ0VCMDM1MDIA","timestamp":"1759307677","type":"button","button":{"payload":"Yes","text":"Yes"}}]},"field":"messages"}]}]}
2025-10-01 14:04:36.006 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 14:04:36.007 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-10-01 14:04:36.010 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 8.7885ms
2025-10-01 14:04:36.018 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 14:04:36.020 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 29.3003ms
2025-10-01 14:04:36.037 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-10-01 14:04:36.040 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTU1Q0M5NkQ2RTE0NTNBOEVDNTIyMjhDQ0VCMDM1MDIA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA==, Text: Yes
2025-10-01 14:04:36.056 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-10-01 14:04:36.072 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__origin_Id_0='4ade4b9c-df3f-439d-a1b1-a9f06887b15c' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSOTU5MEU4RjEyQzNDOUI5NDgyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-10-01 14:04:36.085 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__fromDigits_1='918974005240', @__fromRaw_2='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND (c."PhoneNumber" = @__fromDigits_1 OR c."PhoneNumber" = @__fromRaw_2)
LIMIT 1
2025-10-01 14:04:36.158 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__stepId_0='f468d694-c120-4e84-8ef1-024085736ca8'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
WHERE f."CTAFlowStepId" = @__stepId_0
ORDER BY f."ButtonIndex"
2025-10-01 14:04:36.189 +05:30 [INF] ✅ Mapped click by TEXT to index 0 (flow="0c5e1825-c899-41f0-b947-388dbffed015", step="f468d694-c120-4e84-8ef1-024085736ca8")
2025-10-01 14:04:36.224 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__sourceStepId_0='f468d694-c120-4e84-8ef1-024085736ca8', @__flowId_1='0c5e1825-c899-41f0-b947-388dbffed015', @__buttonIndex_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-10-01 14:04:36.233 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__stepId_0='f468d694-c120-4e84-8ef1-024085736ca8'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-10-01 14:04:36.316 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='ac5d7124-d912-4c1f-a7e4-81c6bd3e74bd', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-10-01T08:34:36.2398245Z' (DbType = DateTime), @p7='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p8='4ade4b9c-df3f-439d-a1b1-a9f06887b15c' (Nullable = true), @p9=NULL, @p10='f90ce9e5-3855-45b1-867e-ca44ac2c0c61' (Nullable = true), @p11=NULL (DbType = Guid), @p12='f468d694-c120-4e84-8ef1-024085736ca8', @p13='welcome_video' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='Yes'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-10-01 14:04:36.332 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__fromDigits_1='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__fromDigits_1
LIMIT 1
2025-10-01 14:04:36.343 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."PhoneNumberId"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."PhoneNumberId" IS NOT NULL
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 14:04:36.351 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."WhatsAppBusinessNumber" IS NOT NULL
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 14:04:36.368 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BearerToken", c."BusinessId", c."CreatedAt", c."IsActive", c."UpdatedAt", c."Url"
FROM "CustomerWebhookConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-10-01 14:04:36.375 +05:30 [INF] Start processing HTTP request POST https://webhook.site/c5a8e6f1-509b-4b4a-b090-68f3d96c99ca
2025-10-01 14:04:36.378 +05:30 [INF] Sending HTTP request POST https://webhook.site/c5a8e6f1-509b-4b4a-b090-68f3d96c99ca
2025-10-01 14:04:37.493 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:34:37.4904223+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:04:37.827 +05:30 [INF] Received HTTP response headers after 1447.3091ms - 200
2025-10-01 14:04:37.829 +05:30 [INF] End processing HTTP request after 1453.8826ms - 200
2025-10-01 14:04:37.832 +05:30 [INF] CTA Journey posted to https://webhook.site/c5a8e6f1-509b-4b4a-b090-68f3d96c99ca | 200
2025-10-01 14:04:37.833 +05:30 [INF] 📤 CTAJourney posted (button): Yes (biz="9841bcab-ca71-439f-8691-d85ada887b01", phone=918974005240)
2025-10-01 14:04:37.923 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_TargetStepId_0='00e8efb2-eb9d-4c6d-a516-1ea299da5c61' (Nullable = true), @__8__locals1_context_FlowId_1='0c5e1825-c899-41f0-b947-388dbffed015'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."ProfileNameSlot", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", t."UseProfileName", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."ProfileNameSlot", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c."UseProfileName"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__8__locals1_context_TargetStepId_0 AND c."CTAFlowConfigId" = @__8__locals1_context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-10-01 14:04:37.981 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-10-01 14:04:37.985 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 14:04:37.988 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 14:04:38.839 +05:30 [INF] Received HTTP response headers after 849.6656ms - 200
2025-10-01 14:04:38.842 +05:30 [INF] End processing HTTP request after 856.4743ms - 200
2025-10-01 14:04:38.964 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__8__locals1_context_BusinessId_0 AND w."IsActive"
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 14:04:38.968 +05:30 [INF] ➡️ SEND-INTENT flow="0c5e1825-c899-41f0-b947-388dbffed015" step="00e8efb2-eb9d-4c6d-a516-1ea299da5c61" tmpl=template_1 to=918974005240 provider=META_CLOUD/673199269218077
2025-10-01 14:04:38.976 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-10-01 14:04:38.987 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-10-01 14:04:38.994 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 14:04:38.996 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 14:04:40.325 +05:30 [INF] Received HTTP response headers after 1324.2865ms - 200
2025-10-01 14:04:40.327 +05:30 [INF] End processing HTTP request after 1332.9791ms - 200
2025-10-01 14:04:40.363 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='9a78cf86-c75a-435e-b471-dd87789450ad', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-10-01T08:34:40.3442034Z' (DbType = DateTime), @p7='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p8='e814ea20-e45e-4382-931d-9b2720fc8ae7' (Nullable = true), @p9='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA==","message_status":"accepted"}]}', @p10='ad7ff491-b833-481b-bddd-5e04202de5b0' (Nullable = true), @p11=NULL (DbType = Guid), @p12='00e8efb2-eb9d-4c6d-a516-1ea299da5c61', @p13='template_1' (Nullable = false), @p14='True', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='e814ea20-e45e-4382-931d-9b2720fc8ae7', @p20='9841bcab-ca71-439f-8691-d85ada887b01', @p21='[{"i":0,"t":"Show Me Template 2","ty":"QUICK_REPLY","v":"","ns":"0f631cc5-7088-49ad-82c6-2f7a13484896"}]', @p22='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p23='00e8efb2-eb9d-4c6d-a516-1ea299da5c61' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26=NULL, @p27=NULL, @p28=NULL (DbType = DateTime), @p29='2025-10-01T08:34:40.3429468Z' (DbType = DateTime), @p30=NULL, @p31='1' (Nullable = true), @p32=NULL (DbType = Boolean), @p33='False', @p34=NULL, @p35='template_1' (Nullable = false), @p36='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA==', @p37=NULL (DbType = Decimal), @p38=NULL, @p39=NULL, @p40=NULL, @p41='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA==","message_status":"accepted"}]}', @p42='918974005240' (Nullable = false), @p43='4ade4b9c-df3f-439d-a1b1-a9f06887b15c' (Nullable = true), @p44=NULL, @p45=NULL (DbType = Guid), @p46='2025-10-01T08:34:40.3429489Z' (Nullable = true) (DbType = DateTime), @p47='flow', @p48='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48)
RETURNING "MessageTime";
2025-10-01 14:04:41.860 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-10-01 14:04:41.864 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 14:04:41.866 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 14:04:41.869 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA==","status":"sent","timestamp":"1759307683","recipient_id":"918974005240","conversation":{"id":"f570a7202dca6953d1fd0fb4cab2af3f","expiration_timestamp":"1759307683","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 14:04:41.871 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 14:04:41.872 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA==","status":"sent","timestamp":"1759307683","recipient_id":"918974005240","conversation":{"id":"f570a7202dca6953d1fd0fb4cab2af3f","expiration_timestamp":"1759307683","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 14:04:41.872 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 14:04:41.874 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 14:04:41.876 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.9079ms
2025-10-01 14:04:41.880 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='sent', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 14:04:41.881 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 14:04:41.886 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 14:04:41.887 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 26.7056ms
2025-10-01 14:04:41.892 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 14:04:41.908 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='f570a7202dca6953d1fd0fb4cab2af3f'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 14:04:41.915 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='721c2e29-b000-4e8f-9166-0fdf127512df', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='f570a7202dca6953d1fd0fb4cab2af3f', @p4='2025-10-01T08:34:41.8903866+00:00' (DbType = DateTime), @p5='pricing_update' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:34:43.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA==","status":"sent","timestamp":"1759307683","recipient_id":"918974005240","conversation":{"id":"f570a7202dca6953d1fd0fb4cab2af3f","expiration_timestamp":"1759307683","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA==', @p14='b00aab73-7342-4512-a6e1-13cb99a09c59', @p15='9841bcab-ca71-439f-8691-d85ada887b01', @p16='marketing', @p17='f570a7202dca6953d1fd0fb4cab2af3f', @p18='2025-10-01T08:34:41.8843255+00:00' (DbType = DateTime), @p19='sent' (Nullable = false), @p20='True' (Nullable = true), @p21=NULL (DbType = Guid), @p22='2025-10-01T08:34:43.0000000+00:00' (DbType = DateTime), @p23='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA==","status":"sent","timestamp":"1759307683","recipient_id":"918974005240","conversation":{"id":"f570a7202dca6953d1fd0fb4cab2af3f","expiration_timestamp":"1759307683","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p24=NULL (DbType = Decimal), @p25=NULL, @p26='META_CLOUD' (Nullable = false), @p27='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27);
2025-10-01 14:04:41.940 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 14:04:41.946 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 14:04:41.980 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-10-01 14:04:41.985 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 14:04:41.987 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 14:04:41.990 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA==","status":"delivered","timestamp":"1759307683","recipient_id":"918974005240","conversation":{"id":"f570a7202dca6953d1fd0fb4cab2af3f","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 14:04:41.993 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 14:04:41.993 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA==","status":"delivered","timestamp":"1759307683","recipient_id":"918974005240","conversation":{"id":"f570a7202dca6953d1fd0fb4cab2af3f","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 14:04:41.994 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 14:04:41.995 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 14:04:41.997 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 7.7812ms
2025-10-01 14:04:42.002 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='delivered', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 14:04:42.002 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 14:04:42.008 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 14:04:42.009 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 28.8774ms
2025-10-01 14:04:42.016 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 14:04:42.025 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='f570a7202dca6953d1fd0fb4cab2af3f'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 14:04:42.030 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='6d491452-7772-4429-ad55-4d42ea684db6', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='f570a7202dca6953d1fd0fb4cab2af3f', @p4='2025-10-01T08:34:42.0057782+00:00' (DbType = DateTime), @p5='delivered' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:34:43.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA==","status":"delivered","timestamp":"1759307683","recipient_id":"918974005240","conversation":{"id":"f570a7202dca6953d1fd0fb4cab2af3f","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 14:04:42.037 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 14:04:42.041 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-10-01 14:04:42.043 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 14:04:42.046 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 14:04:42.053 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 14:04:42.053 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='e814ea20-e45e-4382-931d-9b2720fc8ae7', @p0='Delivered' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-10-01 14:04:42.057 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA==","status":"read","timestamp":"1759307684","recipient_id":"918974005240","conversation":{"id":"f570a7202dca6953d1fd0fb4cab2af3f","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 14:04:42.062 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 14:04:42.063 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA==","status":"read","timestamp":"1759307684","recipient_id":"918974005240","conversation":{"id":"f570a7202dca6953d1fd0fb4cab2af3f","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 14:04:42.063 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 14:04:42.065 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 14:04:42.067 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 10.5738ms
2025-10-01 14:04:42.071 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 14:04:42.072 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='read', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 14:04:42.074 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 32.8271ms
2025-10-01 14:04:42.079 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 14:04:42.089 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 14:04:42.095 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='f570a7202dca6953d1fd0fb4cab2af3f'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 14:04:42.101 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='e341b06e-bb4b-4f5e-adc3-e97226e91ff4', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='f570a7202dca6953d1fd0fb4cab2af3f', @p4='2025-10-01T08:34:42.0773720+00:00' (DbType = DateTime), @p5='read' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:34:44.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA==","status":"read","timestamp":"1759307684","recipient_id":"918974005240","conversation":{"id":"f570a7202dca6953d1fd0fb4cab2af3f","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 14:04:42.108 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 14:04:42.113 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 14:04:42.119 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='e814ea20-e45e-4382-931d-9b2720fc8ae7', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-10-01 14:04:44.314 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 633
2025-10-01 14:04:44.318 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 14:04:44.320 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 14:04:44.323 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTU1MDBBNUQzMURCRUMwOUExRjM2QjQyMkUyM0I4OTUA","timestamp":"1759307686","type":"button","button":{"payload":"Show Me Template 2","text":"Show Me Template 2"}}]},"field":"messages"}]}]}
2025-10-01 14:04:44.326 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 14:04:44.326 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTU1MDBBNUQzMURCRUMwOUExRjM2QjQyMkUyM0I4OTUA","timestamp":"1759307686","type":"button","button":{"payload":"Show Me Template 2","text":"Show Me Template 2"}}]},"field":"messages"}]}]}
2025-10-01 14:04:44.328 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 14:04:44.329 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-10-01 14:04:44.331 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 9.2488ms
2025-10-01 14:04:44.333 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-10-01 14:04:44.334 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 14:04:44.335 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTU1MDBBNUQzMURCRUMwOUExRjM2QjQyMkUyM0I4OTUA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA==, Text: Show Me Template 2
2025-10-01 14:04:44.337 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 23.1431ms
2025-10-01 14:04:44.342 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-10-01 14:04:44.353 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__origin_Id_0='e814ea20-e45e-4382-931d-9b2720fc8ae7' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-10-01 14:04:44.358 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__fromDigits_1='918974005240', @__fromRaw_2='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND (c."PhoneNumber" = @__fromDigits_1 OR c."PhoneNumber" = @__fromRaw_2)
LIMIT 1
2025-10-01 14:04:44.367 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sourceStepId_0='00e8efb2-eb9d-4c6d-a516-1ea299da5c61', @__flowId_1='0c5e1825-c899-41f0-b947-388dbffed015', @__buttonIndex_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-10-01 14:04:44.373 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='00e8efb2-eb9d-4c6d-a516-1ea299da5c61'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-10-01 14:04:44.396 +05:30 [INF] Executed DbCommand (18ms) [Parameters=[@p0='21e9eeab-e732-4805-8f15-f1062a00da6c', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-10-01T08:34:44.3766709Z' (DbType = DateTime), @p7='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p8='e814ea20-e45e-4382-931d-9b2720fc8ae7' (Nullable = true), @p9=NULL, @p10='0112ba77-ce50-4fc1-a560-87df1abc41ba' (Nullable = true), @p11=NULL (DbType = Guid), @p12='00e8efb2-eb9d-4c6d-a516-1ea299da5c61', @p13='template_1' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='Show Me Template 2'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-10-01 14:04:44.403 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__fromDigits_1='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__fromDigits_1
LIMIT 1
2025-10-01 14:04:44.408 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."PhoneNumberId"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."PhoneNumberId" IS NOT NULL
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 14:04:44.413 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."WhatsAppBusinessNumber" IS NOT NULL
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 14:04:44.419 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BearerToken", c."BusinessId", c."CreatedAt", c."IsActive", c."UpdatedAt", c."Url"
FROM "CustomerWebhookConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-10-01 14:04:44.422 +05:30 [INF] Start processing HTTP request POST https://webhook.site/c5a8e6f1-509b-4b4a-b090-68f3d96c99ca
2025-10-01 14:04:44.424 +05:30 [INF] Sending HTTP request POST https://webhook.site/c5a8e6f1-509b-4b4a-b090-68f3d96c99ca
2025-10-01 14:04:45.648 +05:30 [INF] Received HTTP response headers after 1222.6115ms - 200
2025-10-01 14:04:45.657 +05:30 [INF] End processing HTTP request after 1235.057ms - 200
2025-10-01 14:04:45.667 +05:30 [INF] CTA Journey posted to https://webhook.site/c5a8e6f1-509b-4b4a-b090-68f3d96c99ca | 200
2025-10-01 14:04:45.671 +05:30 [INF] 📤 CTAJourney posted (button): Show Me Template 2 (biz="9841bcab-ca71-439f-8691-d85ada887b01", phone=918974005240)
2025-10-01 14:04:45.680 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_TargetStepId_0='0f631cc5-7088-49ad-82c6-2f7a13484896' (Nullable = true), @__8__locals1_context_FlowId_1='0c5e1825-c899-41f0-b947-388dbffed015'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."ProfileNameSlot", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", t."UseProfileName", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."ProfileNameSlot", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c."UseProfileName"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__8__locals1_context_TargetStepId_0 AND c."CTAFlowConfigId" = @__8__locals1_context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-10-01 14:04:45.684 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-10-01 14:04:45.687 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 14:04:45.689 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 14:04:46.504 +05:30 [INF] Received HTTP response headers after 814.2177ms - 200
2025-10-01 14:04:46.506 +05:30 [INF] End processing HTTP request after 819.348ms - 200
2025-10-01 14:04:46.639 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__8__locals1_context_BusinessId_0 AND w."IsActive"
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 14:04:46.643 +05:30 [INF] ➡️ SEND-INTENT flow="0c5e1825-c899-41f0-b947-388dbffed015" step="0f631cc5-7088-49ad-82c6-2f7a13484896" tmpl=template_2 to=918974005240 provider=META_CLOUD/673199269218077
2025-10-01 14:04:46.648 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-10-01 14:04:46.653 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-10-01 14:04:46.658 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 14:04:46.660 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 14:04:47.509 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:34:47.5060786+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:04:47.761 +05:30 [INF] Received HTTP response headers after 1098.8107ms - 200
2025-10-01 14:04:47.765 +05:30 [INF] End processing HTTP request after 1106.9753ms - 200
2025-10-01 14:04:47.771 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='e1fc8d99-1e99-4997-88ae-af281a369416', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-10-01T08:34:47.7679155Z' (DbType = DateTime), @p7='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p8='a63ba69f-78fd-4f58-a34f-c136880c8265' (Nullable = true), @p9='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA==","message_status":"accepted"}]}', @p10='4588b38f-760d-44ae-ae96-bee848eb10c6' (Nullable = true), @p11=NULL (DbType = Guid), @p12='0f631cc5-7088-49ad-82c6-2f7a13484896', @p13='template_2' (Nullable = false), @p14='True', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='a63ba69f-78fd-4f58-a34f-c136880c8265', @p20='9841bcab-ca71-439f-8691-d85ada887b01', @p21=NULL, @p22='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p23='0f631cc5-7088-49ad-82c6-2f7a13484896' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26=NULL, @p27=NULL, @p28=NULL (DbType = DateTime), @p29='2025-10-01T08:34:47.7672967Z' (DbType = DateTime), @p30=NULL, @p31='1' (Nullable = true), @p32=NULL (DbType = Boolean), @p33='False', @p34=NULL, @p35='template_2' (Nullable = false), @p36='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA==', @p37=NULL (DbType = Decimal), @p38=NULL, @p39=NULL, @p40=NULL, @p41='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA==","message_status":"accepted"}]}', @p42='918974005240' (Nullable = false), @p43='e814ea20-e45e-4382-931d-9b2720fc8ae7' (Nullable = true), @p44=NULL, @p45=NULL (DbType = Guid), @p46='2025-10-01T08:34:47.7673109Z' (Nullable = true) (DbType = DateTime), @p47='flow', @p48='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48)
RETURNING "MessageTime";
2025-10-01 14:04:49.074 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-10-01 14:04:49.079 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 14:04:49.082 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 14:04:49.087 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA==","status":"sent","timestamp":"1759307691","recipient_id":"918974005240","conversation":{"id":"6c09615995e739b2d79f02deba57e8a1","expiration_timestamp":"1759307691","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 14:04:49.090 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 14:04:49.092 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA==","status":"sent","timestamp":"1759307691","recipient_id":"918974005240","conversation":{"id":"6c09615995e739b2d79f02deba57e8a1","expiration_timestamp":"1759307691","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 14:04:49.094 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 14:04:49.096 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 14:04:49.098 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 11.3705ms
2025-10-01 14:04:49.102 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='sent', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 14:04:49.102 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 14:04:49.107 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 14:04:49.109 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 34.9563ms
2025-10-01 14:04:49.114 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 14:04:49.124 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='6c09615995e739b2d79f02deba57e8a1'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 14:04:49.131 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='110ff3de-f346-4ca3-b4dd-642150982b4a', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='6c09615995e739b2d79f02deba57e8a1', @p4='2025-10-01T08:34:49.1118247+00:00' (DbType = DateTime), @p5='pricing_update' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:34:51.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA==","status":"sent","timestamp":"1759307691","recipient_id":"918974005240","conversation":{"id":"6c09615995e739b2d79f02deba57e8a1","expiration_timestamp":"1759307691","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA==', @p14='f189ab7a-ae93-4ac2-8079-57eded0d4adc', @p15='9841bcab-ca71-439f-8691-d85ada887b01', @p16='marketing', @p17='6c09615995e739b2d79f02deba57e8a1', @p18='2025-10-01T08:34:49.1060137+00:00' (DbType = DateTime), @p19='sent' (Nullable = false), @p20='True' (Nullable = true), @p21=NULL (DbType = Guid), @p22='2025-10-01T08:34:51.0000000+00:00' (DbType = DateTime), @p23='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA==","status":"sent","timestamp":"1759307691","recipient_id":"918974005240","conversation":{"id":"6c09615995e739b2d79f02deba57e8a1","expiration_timestamp":"1759307691","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p24=NULL (DbType = Decimal), @p25=NULL, @p26='META_CLOUD' (Nullable = false), @p27='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27);
2025-10-01 14:04:49.138 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 14:04:49.145 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 14:04:49.450 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-10-01 14:04:49.455 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 14:04:49.459 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 14:04:49.462 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA==","status":"read","timestamp":"1759307691","recipient_id":"918974005240","conversation":{"id":"6c09615995e739b2d79f02deba57e8a1","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 14:04:49.465 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 14:04:49.465 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA==","status":"read","timestamp":"1759307691","recipient_id":"918974005240","conversation":{"id":"6c09615995e739b2d79f02deba57e8a1","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 14:04:49.467 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 14:04:49.468 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 14:04:49.470 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 8.7018ms
2025-10-01 14:04:49.475 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='read', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 14:04:49.476 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 14:04:49.482 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 14:04:49.482 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 32.0364ms
2025-10-01 14:04:49.489 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 14:04:49.499 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='6c09615995e739b2d79f02deba57e8a1'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 14:04:49.507 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='8b0fee19-ee93-4c47-9c67-9f04419e6976', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='6c09615995e739b2d79f02deba57e8a1', @p4='2025-10-01T08:34:49.4799982+00:00' (DbType = DateTime), @p5='read' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:34:51.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA==","status":"read","timestamp":"1759307691","recipient_id":"918974005240","conversation":{"id":"6c09615995e739b2d79f02deba57e8a1","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 14:04:49.513 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 14:04:49.519 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 14:04:49.527 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='a63ba69f-78fd-4f58-a34f-c136880c8265', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-10-01 14:04:49.612 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-10-01 14:04:49.617 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 14:04:49.619 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 14:04:49.622 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA==","status":"delivered","timestamp":"1759307691","recipient_id":"918974005240","conversation":{"id":"6c09615995e739b2d79f02deba57e8a1","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 14:04:49.624 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 14:04:49.625 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA==","status":"delivered","timestamp":"1759307691","recipient_id":"918974005240","conversation":{"id":"6c09615995e739b2d79f02deba57e8a1","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 14:04:49.626 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 14:04:49.627 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 14:04:49.630 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 8.5429ms
2025-10-01 14:04:49.635 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 14:04:49.635 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='delivered', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 14:04:49.637 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 24.3983ms
2025-10-01 14:04:49.641 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 14:04:49.651 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 14:04:49.656 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='6c09615995e739b2d79f02deba57e8a1'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 14:04:49.679 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p0='2933bdab-5d3a-4888-9cdf-48a9039c55e7', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='6c09615995e739b2d79f02deba57e8a1', @p4='2025-10-01T08:34:49.6402121+00:00' (DbType = DateTime), @p5='delivered' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:34:51.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA==","status":"delivered","timestamp":"1759307691","recipient_id":"918974005240","conversation":{"id":"6c09615995e739b2d79f02deba57e8a1","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 14:04:49.686 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 14:04:49.691 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSNDFDMjc5NkUxODZDQURGRkQyAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 14:04:51.962 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 633
2025-10-01 14:04:51.966 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 14:04:51.968 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 14:04:51.970 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTVFMTJCMkM2OEUwOUU1OTAwNTc4REFEMjhEMTcyMDUA","timestamp":"1759307693","type":"button","button":{"payload":"Show Me Template 3","text":"Show Me Template 3"}}]},"field":"messages"}]}]}
2025-10-01 14:04:51.973 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 14:04:51.973 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"contacts":[{"profile":{"name":"S K"},"wa_id":"918974005240"}],"messages":[{"context":{"from":"15551622077","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA=="},"from":"918974005240","id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTVFMTJCMkM2OEUwOUU1OTAwNTc4REFEMjhEMTcyMDUA","timestamp":"1759307693","type":"button","button":{"payload":"Show Me Template 3","text":"Show Me Template 3"}}]},"field":"messages"}]}]}
2025-10-01 14:04:51.974 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 14:04:51.975 +05:30 [INF] 👉 Routing to Click Processor (legacy 'button')
2025-10-01 14:04:51.977 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 6.7995ms
2025-10-01 14:04:51.979 +05:30 [WRN] 📥 [ENTERED CLICK PROCESSOR]
2025-10-01 14:04:51.981 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 14:04:51.982 +05:30 [INF] 🖱️ Button Click → From: 918974005240, ClickId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAEhggQTVFMTJCMkM2OEUwOUU1OTAwNTc4REFEMjhEMTcyMDUA, OrigMsgId: wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA==, Text: Show Me Template 3
2025-10-01 14:04:51.983 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 21.4086ms
2025-10-01 14:04:51.990 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__originalMessageId_0='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."MessageId" = @__originalMessageId_0 AND m."CTAFlowConfigId" IS NOT NULL AND m."CTAFlowStepId" IS NOT NULL
LIMIT 1
2025-10-01 14:04:51.997 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__origin_Id_0='e814ea20-e45e-4382-931d-9b2720fc8ae7' (Nullable = true), @__originalMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSRTBDQjI4OThEQkE4ODhDRDcwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."RunId"
FROM "CampaignSendLogs" AS c
WHERE c."MessageLogId" = @__origin_Id_0 OR c."MessageId" = @__originalMessageId_1
ORDER BY c."CreatedAt" DESC
LIMIT 1
2025-10-01 14:04:52.002 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__fromDigits_1='918974005240', @__fromRaw_2='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND (c."PhoneNumber" = @__fromDigits_1 OR c."PhoneNumber" = @__fromRaw_2)
LIMIT 1
2025-10-01 14:04:52.007 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='00e8efb2-eb9d-4c6d-a516-1ea299da5c61'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
WHERE f."CTAFlowStepId" = @__stepId_0
ORDER BY f."ButtonIndex"
2025-10-01 14:04:52.010 +05:30 [INF] 🟨 Falling back to single available link for step "00e8efb2-eb9d-4c6d-a516-1ea299da5c61"
2025-10-01 14:04:52.012 +05:30 [INF] ✅ Mapped click by TEXT to index 0 (flow="0c5e1825-c899-41f0-b947-388dbffed015", step="00e8efb2-eb9d-4c6d-a516-1ea299da5c61")
2025-10-01 14:04:52.016 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sourceStepId_0='00e8efb2-eb9d-4c6d-a516-1ea299da5c61', @__flowId_1='0c5e1825-c899-41f0-b947-388dbffed015', @__buttonIndex_2='0'], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM "FlowButtonLinks" AS f
INNER JOIN "CTAFlowSteps" AS c ON f."CTAFlowStepId" = c."Id"
WHERE f."CTAFlowStepId" = @__sourceStepId_0 AND f."NextStepId" IS NOT NULL AND c."CTAFlowConfigId" = @__flowId_1 AND f."ButtonIndex" = @__buttonIndex_2
LIMIT 2
2025-10-01 14:04:52.022 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__stepId_0='00e8efb2-eb9d-4c6d-a516-1ea299da5c61'], CommandType='"Text"', CommandTimeout='30']
SELECT c."TemplateToSend"
FROM "CTAFlowSteps" AS c
WHERE c."Id" = @__stepId_0
LIMIT 1
2025-10-01 14:04:52.045 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p0='c7e8a007-e853-43b0-8e3e-3423f2a6ae7b', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-10-01T08:34:52.0251956Z' (DbType = DateTime), @p7='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p8='e814ea20-e45e-4382-931d-9b2720fc8ae7' (Nullable = true), @p9=NULL, @p10='8893b5bc-ef62-4a6a-887e-76e7a829dd37' (Nullable = true), @p11=NULL (DbType = Guid), @p12='00e8efb2-eb9d-4c6d-a516-1ea299da5c61', @p13='template_1' (Nullable = false), @p14='True', @p15=NULL, @p16='quick_reply', @p17=NULL (DbType = Guid), @p18='Show Me Template 3'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-10-01 14:04:52.052 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__fromDigits_1='918974005240'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AssignedAgentId", c."BusinessId", c."CreatedAt", c."Email", c."Group", c."IsActive", c."IsArchived", c."IsAutomationPaused", c."IsFavorite", c."LastCTAInteraction", c."LastCTAType", c."LastClickedProductId", c."LastContactedAt", c."LeadSource", c."Name", c."NextFollowUpAt", c."Notes", c."PhoneNumber", c."ProfileName", c."ProfileNameUpdatedAt", c."Tags"
FROM "Contacts" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."PhoneNumber" = @__fromDigits_1
LIMIT 1
2025-10-01 14:04:52.057 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."PhoneNumberId"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."PhoneNumberId" IS NOT NULL
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 14:04:52.063 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."IsActive" AND w."WhatsAppBusinessNumber" IS NOT NULL
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 14:04:52.067 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BearerToken", c."BusinessId", c."CreatedAt", c."IsActive", c."UpdatedAt", c."Url"
FROM "CustomerWebhookConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
2025-10-01 14:04:52.071 +05:30 [INF] Start processing HTTP request POST https://webhook.site/c5a8e6f1-509b-4b4a-b090-68f3d96c99ca
2025-10-01 14:04:52.073 +05:30 [INF] Sending HTTP request POST https://webhook.site/c5a8e6f1-509b-4b4a-b090-68f3d96c99ca
2025-10-01 14:04:53.392 +05:30 [INF] Received HTTP response headers after 1317.9087ms - 200
2025-10-01 14:04:53.402 +05:30 [INF] End processing HTTP request after 1331.5991ms - 200
2025-10-01 14:04:53.409 +05:30 [INF] CTA Journey posted to https://webhook.site/c5a8e6f1-509b-4b4a-b090-68f3d96c99ca | 200
2025-10-01 14:04:53.419 +05:30 [INF] 📤 CTAJourney posted (button): Show Me Template 3 (biz="9841bcab-ca71-439f-8691-d85ada887b01", phone=918974005240)
2025-10-01 14:04:53.429 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_TargetStepId_0='0f631cc5-7088-49ad-82c6-2f7a13484896' (Nullable = true), @__8__locals1_context_FlowId_1='0c5e1825-c899-41f0-b947-388dbffed015'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."CTAFlowConfigId", t."PositionX", t."PositionY", t."ProfileNameSlot", t."RequiredSource", t."RequiredTag", t."StepOrder", t."TemplateToSend", t."TemplateType", t."TriggerButtonText", t."TriggerButtonType", t."UseProfileName", f."Id", f."ButtonIndex", f."ButtonSubType", f."ButtonText", f."ButtonType", f."ButtonValue", f."CTAFlowStepId", f."NextStepId"
FROM (
    SELECT c."Id", c."CTAFlowConfigId", c."PositionX", c."PositionY", c."ProfileNameSlot", c."RequiredSource", c."RequiredTag", c."StepOrder", c."TemplateToSend", c."TemplateType", c."TriggerButtonText", c."TriggerButtonType", c."UseProfileName"
    FROM "CTAFlowSteps" AS c
    WHERE c."Id" = @__8__locals1_context_TargetStepId_0 AND c."CTAFlowConfigId" = @__8__locals1_context_FlowId_1
    LIMIT 1
) AS t
LEFT JOIN "FlowButtonLinks" AS f ON t."Id" = f."CTAFlowStepId"
ORDER BY t."Id"
2025-10-01 14:04:53.435 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive" AND w."BusinessId" = @__businessId_0
LIMIT 1
2025-10-01 14:04:53.438 +05:30 [INF] Start processing HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 14:04:53.440 +05:30 [INF] Sending HTTP request GET https://graph.facebook.com/v22.0/744548247936621/message_templates?limit=200
2025-10-01 14:04:54.225 +05:30 [INF] Received HTTP response headers after 784.1919ms - 200
2025-10-01 14:04:54.227 +05:30 [INF] End processing HTTP request after 789.147ms - 200
2025-10-01 14:04:54.419 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_context_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__8__locals1_context_BusinessId_0 AND w."IsActive"
ORDER BY COALESCE(w."UpdatedAt", w."CreatedAt") DESC
LIMIT 1
2025-10-01 14:04:54.422 +05:30 [INF] ➡️ SEND-INTENT flow="0c5e1825-c899-41f0-b947-388dbffed015" step="0f631cc5-7088-49ad-82c6-2f7a13484896" tmpl=template_2 to=918974005240 provider=META_CLOUD/673199269218077
2025-10-01 14:04:54.428 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__phoneNumberId_2='673199269218077'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "WhatsAppPhoneNumbers" AS w
    WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."PhoneNumberId" = @__phoneNumberId_2)
2025-10-01 14:04:54.434 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD'], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."ApiKey", w."ApiUrl", w."BusinessId", w."CreatedAt", w."IsActive", w."PhoneNumberId", w."Provider", w."SenderDisplayName", w."UpdatedAt", w."WabaId", w."WebhookCallbackUrl", w."WebhookSecret", w."WebhookVerifyToken", w."WhatsAppBusinessNumber"
FROM "WhatsAppSettings" AS w
WHERE w."BusinessId" = @__businessId_0 AND w."Provider" = @__provider_1 AND w."IsActive"
LIMIT 1
2025-10-01 14:04:54.438 +05:30 [INF] Start processing HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 14:04:54.441 +05:30 [INF] Sending HTTP request POST https://graph.facebook.com/v22.0/673199269218077/messages
2025-10-01 14:04:55.394 +05:30 [INF] Received HTTP response headers after 951.4718ms - 200
2025-10-01 14:04:55.396 +05:30 [INF] End processing HTTP request after 958.7976ms - 200
2025-10-01 14:04:55.403 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@p0='efc66888-201a-45ec-b442-004ce88e85b7', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='0' (Nullable = true), @p3=NULL (DbType = Guid), @p4='918974005240', @p5=NULL, @p6='2025-10-01T08:34:55.3992378Z' (DbType = DateTime), @p7='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p8='4466abb1-d1a0-47db-af1f-7795f1f08f2d' (Nullable = true), @p9='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA==","message_status":"accepted"}]}', @p10='b4639ffc-37c1-4dea-872f-710250e04574' (Nullable = true), @p11=NULL (DbType = Guid), @p12='0f631cc5-7088-49ad-82c6-2f7a13484896', @p13='template_2' (Nullable = false), @p14='True', @p15=NULL, @p16=NULL, @p17=NULL (DbType = Guid), @p18=NULL, @p19='4466abb1-d1a0-47db-af1f-7795f1f08f2d', @p20='9841bcab-ca71-439f-8691-d85ada887b01', @p21=NULL, @p22='0c5e1825-c899-41f0-b947-388dbffed015' (Nullable = true), @p23='0f631cc5-7088-49ad-82c6-2f7a13484896' (Nullable = true), @p24=NULL (DbType = Guid), @p25=NULL (DbType = Guid), @p26=NULL, @p27=NULL, @p28=NULL (DbType = DateTime), @p29='2025-10-01T08:34:55.3989018Z' (DbType = DateTime), @p30=NULL, @p31='1' (Nullable = true), @p32=NULL (DbType = Boolean), @p33='False', @p34=NULL, @p35='template_2' (Nullable = false), @p36='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA==', @p37=NULL (DbType = Decimal), @p38=NULL, @p39=NULL, @p40=NULL, @p41='{"messaging_product":"whatsapp","contacts":[{"input":"918974005240","wa_id":"918974005240"}],"messages":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA==","message_status":"accepted"}]}', @p42='918974005240' (Nullable = false), @p43='e814ea20-e45e-4382-931d-9b2720fc8ae7' (Nullable = true), @p44=NULL, @p45=NULL (DbType = Guid), @p46='2025-10-01T08:34:55.3989034Z' (Nullable = true) (DbType = DateTime), @p47='flow', @p48='Sent' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "FlowExecutionLogs" ("Id", "BusinessId", "ButtonIndex", "CampaignSendLogId", "ContactPhone", "ErrorMessage", "ExecutedAt", "FlowId", "MessageLogId", "RawResponse", "RequestId", "RunId", "StepId", "StepName", "Success", "TemplateName", "TemplateType", "TrackingLogId", "TriggeredByButton")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
INSERT INTO "MessageLogs" ("Id", "BusinessId", "ButtonBundleJson", "CTAFlowConfigId", "CTAFlowStepId", "CampaignId", "ContactId", "ConversationCategory", "ConversationId", "ConversationStartedAt", "CreatedAt", "ErrorMessage", "FlowVersion", "IsChargeable", "IsIncoming", "MediaUrl", "MessageContent", "MessageId", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId", "RawResponse", "RecipientNumber", "RefMessageId", "RenderedBody", "RunId", "SentAt", "Source", "Status")
VALUES (@p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47, @p48)
RETURNING "MessageTime";
2025-10-01 14:04:56.741 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 602
2025-10-01 14:04:56.746 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 14:04:56.747 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 14:04:56.751 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA==","status":"sent","timestamp":"1759307698","recipient_id":"918974005240","conversation":{"id":"2ca0a203727fcea5eeb25f83b7b5ecbb","expiration_timestamp":"1759307699","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 14:04:56.756 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 14:04:56.756 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA==","status":"sent","timestamp":"1759307698","recipient_id":"918974005240","conversation":{"id":"2ca0a203727fcea5eeb25f83b7b5ecbb","expiration_timestamp":"1759307699","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 14:04:56.757 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 14:04:56.758 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 14:04:56.760 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 10.4123ms
2025-10-01 14:04:56.766 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='sent', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 14:04:56.766 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 14:04:56.772 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 14:04:56.772 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 31.1113ms
2025-10-01 14:04:56.777 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 14:04:56.787 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='2ca0a203727fcea5eeb25f83b7b5ecbb'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 14:04:56.793 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='cd23a547-db98-45e6-ba63-ad6e4fc9aa76', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='2ca0a203727fcea5eeb25f83b7b5ecbb', @p4='2025-10-01T08:34:56.7757447+00:00' (DbType = DateTime), @p5='pricing_update' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:34:58.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA==","status":"sent","timestamp":"1759307698","recipient_id":"918974005240","conversation":{"id":"2ca0a203727fcea5eeb25f83b7b5ecbb","expiration_timestamp":"1759307699","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA==', @p14='fb1fd473-3369-4c40-baf6-30299c23e890', @p15='9841bcab-ca71-439f-8691-d85ada887b01', @p16='marketing', @p17='2ca0a203727fcea5eeb25f83b7b5ecbb', @p18='2025-10-01T08:34:56.7697057+00:00' (DbType = DateTime), @p19='sent' (Nullable = false), @p20='True' (Nullable = true), @p21=NULL (DbType = Guid), @p22='2025-10-01T08:34:58.0000000+00:00' (DbType = DateTime), @p23='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA==","status":"sent","timestamp":"1759307698","recipient_id":"918974005240","conversation":{"id":"2ca0a203727fcea5eeb25f83b7b5ecbb","expiration_timestamp":"1759307699","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p24=NULL (DbType = Decimal), @p25=NULL, @p26='META_CLOUD' (Nullable = false), @p27='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p14, @p15, @p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, @p27);
2025-10-01 14:04:56.800 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 14:04:56.806 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 14:04:57.182 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 571
2025-10-01 14:04:57.189 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 14:04:57.192 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 14:04:57.196 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA==","status":"delivered","timestamp":"1759307699","recipient_id":"918974005240","conversation":{"id":"2ca0a203727fcea5eeb25f83b7b5ecbb","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 14:04:57.199 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 14:04:57.200 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA==","status":"delivered","timestamp":"1759307699","recipient_id":"918974005240","conversation":{"id":"2ca0a203727fcea5eeb25f83b7b5ecbb","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 14:04:57.202 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 14:04:57.204 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 14:04:57.206 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 11.305ms
2025-10-01 14:04:57.212 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 14:04:57.212 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='delivered', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 14:04:57.214 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 32.0795ms
2025-10-01 14:04:57.219 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 14:04:57.230 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 14:04:57.235 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='2ca0a203727fcea5eeb25f83b7b5ecbb'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 14:04:57.258 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@p0='b220d744-c2da-4bf9-9a5b-537c3f89e289', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='2ca0a203727fcea5eeb25f83b7b5ecbb', @p4='2025-10-01T08:34:57.2177505+00:00' (DbType = DateTime), @p5='delivered' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:34:59.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA==","status":"delivered","timestamp":"1759307699","recipient_id":"918974005240","conversation":{"id":"2ca0a203727fcea5eeb25f83b7b5ecbb","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 14:04:57.264 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 14:04:57.270 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 14:04:57.275 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p1='4466abb1-d1a0-47db-af1f-7795f1f08f2d', @p0='Delivered' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-10-01 14:04:57.516 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:34:57.5131479+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:04:57.652 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - application/json 566
2025-10-01 14:04:57.657 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 14:04:57.659 +05:30 [INF] Route matched with {action = "HandleStatus", controller = "WhatsAppWebhook"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult HandleStatus(System.Text.Json.JsonElement) on controller xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController (xbytechat.api).
2025-10-01 14:04:57.662 +05:30 [WRN] 📥 Webhook received at controller:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA==","status":"read","timestamp":"1759307699","recipient_id":"918974005240","conversation":{"id":"2ca0a203727fcea5eeb25f83b7b5ecbb","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 14:04:57.665 +05:30 [INF] 📥 Webhook payload enqueued successfully.
2025-10-01 14:04:57.665 +05:30 [WRN] 📦 Dispatcher Raw Payload:
{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA==","status":"read","timestamp":"1759307699","recipient_id":"918974005240","conversation":{"id":"2ca0a203727fcea5eeb25f83b7b5ecbb","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}
2025-10-01 14:04:57.666 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType187`1[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 14:04:57.668 +05:30 [INF] 📦 Routing to Unified Status Updater (provider=meta, businessId="9841bcab-ca71-439f-8691-d85ada887b01")
2025-10-01 14:04:57.670 +05:30 [INF] Executed action xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api) in 8.1875ms
2025-10-01 14:04:57.675 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='read', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 14:04:57.676 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.Webhooks.Controllers.WhatsAppWebhookController.HandleStatus (xbytechat.api)'
2025-10-01 14:04:57.681 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__provider_1='META_CLOUD', @__eventType_2='pricing_update', @__providerMessageId_3='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "ProviderBillingEvents" AS p
    WHERE p."BusinessId" = @__businessId_0 AND p."Provider" = @__provider_1 AND p."EventType" = @__eventType_2 AND p."ProviderMessageId" = @__providerMessageId_3)
2025-10-01 14:04:57.682 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/webhooks/whatsapp - 200 null application/json; charset=utf-8 30.213ms
2025-10-01 14:04:57.687 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__providerMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ProviderMessageId" = @__providerMessageId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 14:04:57.696 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__conversationId_1='2ca0a203727fcea5eeb25f83b7b5ecbb'], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__businessId_0 AND m."ConversationId" = @__conversationId_1
ORDER BY m."CreatedAt" DESC
LIMIT 1
2025-10-01 14:04:57.701 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@p0='8b90c92c-bd7e-417f-a43d-74e5d094d2e5', @p1='9841bcab-ca71-439f-8691-d85ada887b01', @p2='marketing', @p3='2ca0a203727fcea5eeb25f83b7b5ecbb', @p4='2025-10-01T08:34:57.6795217+00:00' (DbType = DateTime), @p5='read' (Nullable = false), @p6='True' (Nullable = true), @p7=NULL (DbType = Guid), @p8='2025-10-01T08:34:59.0000000+00:00' (DbType = DateTime), @p9='{"object":"whatsapp_business_account","entry":[{"id":"744548247936621","changes":[{"value":{"messaging_product":"whatsapp","metadata":{"display_phone_number":"15551622077","phone_number_id":"673199269218077"},"statuses":[{"id":"wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA==","status":"read","timestamp":"1759307699","recipient_id":"918974005240","conversation":{"id":"2ca0a203727fcea5eeb25f83b7b5ecbb","origin":{"type":"marketing"}},"pricing":{"billable":true,"pricing_model":"PMP","category":"marketing","type":"regular"}}]},"field":"messages"}]}]}' (Nullable = false), @p10=NULL (DbType = Decimal), @p11=NULL, @p12='META_CLOUD' (Nullable = false), @p13='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA=='], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProviderBillingEvents" ("Id", "BusinessId", "ConversationCategory", "ConversationId", "CreatedAt", "EventType", "IsChargeable", "MessageLogId", "OccurredAt", "PayloadJson", "PriceAmount", "PriceCurrency", "Provider", "ProviderMessageId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13);
2025-10-01 14:04:57.707 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."AllowRetry", c."Browser", c."BusinessId", c."ButtonBundleJson", c."CTAFlowConfigId", c."CTAFlowStepId", c."CampaignId", c."City", c."ClickType", c."ClickedAt", c."ContactId", c."Country", c."CreatedAt", c."CreatedBy", c."DeliveredAt", c."DeviceInfo", c."DeviceType", c."ErrorMessage", c."IpAddress", c."IsClicked", c."LastRetryAt", c."LastRetryStatus", c."MacAddress", c."MessageBody", c."MessageId", c."MessageLogId", c."ReadAt", c."RecipientId", c."RetryCount", c."RunId", c."SendStatus", c."SentAt", c."SourceChannel", c."TemplateId", c."UserId"
FROM "CampaignSendLogs" AS c
WHERE c."BusinessId" = @__ev_BusinessId_0 AND c."MessageId" = @__ev_ProviderMessageId_1
LIMIT 1
2025-10-01 14:04:57.712 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__ev_BusinessId_0='9841bcab-ca71-439f-8691-d85ada887b01', @__ev_ProviderMessageId_1='wamid.HBgMOTE4OTc0MDA1MjQwFQIAERgSREY1ODc5QUEyMjAwREE1QTAwAA=='], CommandType='"Text"', CommandTimeout='30']
SELECT m."Id", m."BusinessId", m."ButtonBundleJson", m."CTAFlowConfigId", m."CTAFlowStepId", m."CampaignId", m."ContactId", m."ConversationCategory", m."ConversationId", m."ConversationStartedAt", m."CreatedAt", m."ErrorMessage", m."FlowVersion", m."IsChargeable", m."IsIncoming", m."MediaUrl", m."MessageContent", m."MessageId", m."MessageTime", m."PriceAmount", m."PriceCurrency", m."Provider", m."ProviderMessageId", m."RawResponse", m."RecipientNumber", m."RefMessageId", m."RenderedBody", m."RunId", m."SentAt", m."Source", m."Status"
FROM "MessageLogs" AS m
WHERE m."BusinessId" = @__ev_BusinessId_0 AND (m."ProviderMessageId" = @__ev_ProviderMessageId_1 OR m."MessageId" = @__ev_ProviderMessageId_1)
LIMIT 1
2025-10-01 14:04:57.718 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@p1='4466abb1-d1a0-47db-af1f-7795f1f08f2d', @p0='Read' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
UPDATE "MessageLogs" SET "Status" = @p0
WHERE "Id" = @p1
RETURNING "MessageTime";
2025-10-01 14:05:07.535 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:35:07.5329034+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:05:17.542 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:35:17.5396982+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:05:25.561 +05:30 [INF] Request starting HTTP/1.1 GET http://3585323701f3.ngrok-free.app/api/getflow/9841bcab-ca71-439f-8691-d85ada887b01 - null null
2025-10-01 14:05:25.566 +05:30 [INF] Executing endpoint 'DevCustomerWebhookConfigController.Get (xbytechat.api)'
2025-10-01 14:05:25.572 +05:30 [INF] Route matched with {action = "Get", controller = "DevCustomerWebhookConfig"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.Guid) on controller DevCustomerWebhookConfigController (xbytechat.api).
2025-10-01 14:05:25.588 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BearerToken", c."BusinessId", c."CreatedAt", c."IsActive", c."UpdatedAt", c."Url"
FROM "CustomerWebhookConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
LIMIT 1
2025-10-01 14:05:25.593 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType143`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 14:05:25.598 +05:30 [INF] Executed action DevCustomerWebhookConfigController.Get (xbytechat.api) in 23.7528ms
2025-10-01 14:05:25.600 +05:30 [INF] Executed endpoint 'DevCustomerWebhookConfigController.Get (xbytechat.api)'
2025-10-01 14:05:25.602 +05:30 [INF] Request finished HTTP/1.1 GET http://3585323701f3.ngrok-free.app/api/getflow/9841bcab-ca71-439f-8691-d85ada887b01 - 200 null application/json; charset=utf-8 41.0668ms
2025-10-01 14:05:27.555 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:35:27.5524806+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:05:37.566 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T08:35:37.5626847+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:05:47.579 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:35:47.5767591+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:05:57.583 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:35:57.5776792+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:06:07.596 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:36:07.5947443+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:06:17.602 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:36:17.6002556+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:06:27.613 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:36:27.6101213+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:06:37.624 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:36:37.6221851+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:06:47.637 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:36:47.6350905+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:06:57.655 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:36:57.6527324+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:07:07.674 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:37:07.6714081+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:07:17.689 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:37:17.6857435+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:07:27.700 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:37:27.6979490+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:07:36.017 +05:30 [INF] Request starting HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/test-webhook?businessId=9841bcab-ca71-439f-8691-d85ada887b01 - null 0
2025-10-01 14:07:36.024 +05:30 [INF] CORS policy execution failed.
2025-10-01 14:07:36.026 +05:30 [INF] Request origin https://3585323701f3.ngrok-free.app does not have permission to access the resource.
2025-10-01 14:07:36.053 +05:30 [INF] Executing endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.TestWebhook (xbytechat.api)'
2025-10-01 14:07:36.062 +05:30 [INF] Route matched with {action = "TestWebhook", controller = "CustomApi"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] TestWebhook(System.Guid, System.Threading.CancellationToken) on controller xbytechat.api.Features.CustomeApi.Controllers.CustomApiController (xbytechat.api).
2025-10-01 14:07:36.078 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BearerToken", c."BusinessId", c."CreatedAt", c."IsActive", c."UpdatedAt", c."Url"
FROM "CustomerWebhookConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
ORDER BY COALESCE(c."UpdatedAt", c."CreatedAt") DESC
LIMIT 1
2025-10-01 14:07:36.086 +05:30 [INF] Start processing HTTP request POST https://webhook.site/c5a8e6f1-509b-4b4a-b090-68f3d96c99ca
2025-10-01 14:07:36.087 +05:30 [INF] Sending HTTP request POST https://webhook.site/c5a8e6f1-509b-4b4a-b090-68f3d96c99ca
2025-10-01 14:07:37.235 +05:30 [INF] Received HTTP response headers after 1146.268ms - 200
2025-10-01 14:07:37.237 +05:30 [INF] End processing HTTP request after 1151.5543ms - 200
2025-10-01 14:07:37.243 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType141`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 14:07:37.247 +05:30 [INF] Executed action xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.TestWebhook (xbytechat.api) in 1181.9342ms
2025-10-01 14:07:37.250 +05:30 [INF] Executed endpoint 'xbytechat.api.Features.CustomeApi.Controllers.CustomApiController.TestWebhook (xbytechat.api)'
2025-10-01 14:07:37.252 +05:30 [INF] Request finished HTTP/1.1 POST http://3585323701f3.ngrok-free.app/api/custom/test-webhook?businessId=9841bcab-ca71-439f-8691-d85ada887b01 - 200 null application/json; charset=utf-8 1234.5535ms
2025-10-01 14:07:37.711 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:37:37.7079436+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:07:47.733 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:37:47.7302938+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:07:57.833 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T08:37:57.7365101+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:08:01.605 +05:30 [INF] Request starting HTTP/1.1 GET http://3585323701f3.ngrok-free.app/api/getflow/9841bcab-ca71-439f-8691-d85ada887b01 - null null
2025-10-01 14:08:01.609 +05:30 [INF] Executing endpoint 'DevCustomerWebhookConfigController.Get (xbytechat.api)'
2025-10-01 14:08:01.611 +05:30 [INF] Route matched with {action = "Get", controller = "DevCustomerWebhookConfig"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Get(System.Guid) on controller DevCustomerWebhookConfigController (xbytechat.api).
2025-10-01 14:08:01.617 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__businessId_0='9841bcab-ca71-439f-8691-d85ada887b01'], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."BearerToken", c."BusinessId", c."CreatedAt", c."IsActive", c."UpdatedAt", c."Url"
FROM "CustomerWebhookConfigs" AS c
WHERE c."BusinessId" = @__businessId_0 AND c."IsActive"
LIMIT 1
2025-10-01 14:08:01.623 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType143`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-10-01 14:08:01.625 +05:30 [INF] Executed action DevCustomerWebhookConfigController.Get (xbytechat.api) in 11.3259ms
2025-10-01 14:08:01.628 +05:30 [INF] Executed endpoint 'DevCustomerWebhookConfigController.Get (xbytechat.api)'
2025-10-01 14:08:01.630 +05:30 [INF] Request finished HTTP/1.1 GET http://3585323701f3.ngrok-free.app/api/getflow/9841bcab-ca71-439f-8691-d85ada887b01 - 200 null application/json; charset=utf-8 25.0889ms
2025-10-01 14:08:07.848 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:38:07.8455292+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:08:17.857 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:38:17.8550936+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:08:27.884 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:38:27.8816006+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:08:37.899 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:38:37.8973505+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:08:47.914 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:38:47.9110630+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:08:57.931 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:38:57.9287968+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:09:07.938 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:39:07.9349706+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:09:17.966 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:39:17.9641260+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:09:27.973 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:39:27.9712900+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:09:37.984 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:39:37.9822941+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:09:48.003 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:39:48.0007560+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:09:58.027 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:39:58.0245812+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:10:08.039 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:40:08.0369149+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:10:18.053 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:40:18.0512833+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:10:28.063 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:40:28.0607864+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:10:38.070 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:40:38.0677679+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:10:48.080 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:40:48.0776562+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:10:58.092 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:40:58.0893243+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:11:08.102 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:41:08.0995599+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:11:18.122 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T08:41:18.1185210+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:11:28.134 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:41:28.1320287+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:11:38.157 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:41:38.1551322+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:11:46.126 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-10-01 14:11:46.136 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 10.9852ms
2025-10-01 14:11:46.204 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-10-01 14:11:46.205 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-10-01 14:11:46.214 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 8.7398ms
2025-10-01 14:11:46.228 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 24.0323ms
2025-10-01 14:11:46.681 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-10-01 14:11:46.802 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 121.2207ms
2025-10-01 14:11:48.171 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__now_0='2025-10-01T08:41:48.1671136+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:11:58.185 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:41:58.1825440+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:12:08.191 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:42:08.1892559+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:12:18.205 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:42:18.2026047+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:12:28.213 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:42:28.2109604+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:12:38.227 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:42:38.2243392+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:12:48.242 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:42:48.2392938+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:12:58.339 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T08:42:58.2530857+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:13:08.345 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:43:08.3430703+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:13:18.357 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:43:18.3547974+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:13:28.367 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:43:28.3648960+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:13:38.369 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:43:38.3668686+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:13:48.377 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:43:48.3753583+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:13:58.384 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:43:58.3819124+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:14:08.405 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:44:08.4025188+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:14:18.414 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:44:18.4113636+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:14:28.415 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:44:28.4132981+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:14:38.421 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:44:38.4184820+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:14:48.431 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:44:48.4288736+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:14:58.443 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:44:58.4401367+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:15:08.456 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:45:08.4541996+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:15:18.476 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:45:18.4743173+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:15:28.496 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:45:28.4938012+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:15:38.507 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:45:38.5050144+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:15:48.515 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:45:48.5127160+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:15:58.523 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:45:58.5211779+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:16:08.536 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:46:08.5336322+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:16:18.551 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:46:18.5495509+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:16:28.560 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:46:28.5584230+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:16:38.574 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:46:38.5710726+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:16:48.577 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:46:48.5743462+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:16:58.587 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:46:58.5844094+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:17:08.609 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:47:08.6065885+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:17:18.611 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:47:18.6085985+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:17:28.619 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:47:28.6173221+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:17:38.640 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:47:38.6372519+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:17:48.646 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:47:48.6437763+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:17:58.757 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T08:47:58.6580240+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:18:08.758 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:48:08.7558269+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:18:18.761 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:48:18.7585941+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:18:28.765 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:48:28.7624931+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:18:35.732 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-10-01 14:18:35.756 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 23.9363ms
2025-10-01 14:18:35.883 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-10-01 14:18:35.885 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-10-01 14:18:35.887 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 4.1721ms
2025-10-01 14:18:35.906 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 21.0882ms
2025-10-01 14:18:36.316 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-10-01 14:18:36.419 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 103.6638ms
2025-10-01 14:18:38.765 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:48:38.7634513+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:18:48.790 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:48:48.7878375+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:18:58.802 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:48:58.7992332+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:19:08.806 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:49:08.8034051+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:19:18.811 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:49:18.8095326+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:19:28.819 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:49:28.8164059+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:19:38.825 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:49:38.8234161+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:19:48.831 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:49:48.8285480+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:19:58.844 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:49:58.8413728+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:20:08.864 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:50:08.8616348+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:20:18.872 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:50:18.8696689+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:20:28.885 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:50:28.8825447+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:20:38.901 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:50:38.8991087+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:20:48.917 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:50:48.9140188+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:20:58.920 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:50:58.9181870+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:21:08.927 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:51:08.9251314+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:21:18.936 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:51:18.9338117+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:21:28.946 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:51:28.9435411+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:21:38.957 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:51:38.9546519+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:21:48.964 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:51:48.9619524+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:21:58.986 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:51:58.9824834+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:22:08.992 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:52:08.9903503+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:22:19.010 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:52:19.0080414+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:22:29.025 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:52:29.0226328+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:22:39.043 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:52:39.0407512+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:22:49.056 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:52:49.0529771+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:22:59.278 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T08:52:59.0714394+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:23:09.288 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:53:09.2854756+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:23:19.308 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:53:19.3067012+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:23:29.315 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:53:29.3125669+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:23:39.330 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:53:39.3271820+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:23:49.368 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:53:49.3654186+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:23:59.384 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:53:59.3812130+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:24:09.390 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:54:09.3884802+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:24:19.398 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:54:19.3948275+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:24:29.418 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:54:29.4153344+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:24:39.434 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:54:39.4311445+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:24:49.446 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:54:49.4439216+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:24:59.461 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:54:59.4586269+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:25:09.463 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:55:09.4607215+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:25:19.491 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T08:55:19.4883426+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:25:29.497 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:55:29.4949780+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:25:39.507 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:55:39.5047281+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:25:49.514 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:55:49.5121729+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:25:59.563 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:55:59.5272275+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:26:09.575 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:56:09.5724444+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:26:19.585 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:56:19.5819851+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:26:29.595 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:56:29.5924126+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:26:39.605 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:56:39.6022083+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:26:49.619 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T08:56:49.6159276+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:26:59.630 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:56:59.6282677+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:27:09.646 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:57:09.6438183+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:27:19.666 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:57:19.6633446+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:27:29.688 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T08:57:29.6843323+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:27:39.699 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:57:39.6964717+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:27:49.708 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:57:49.7055334+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:27:59.829 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T08:57:59.7164529+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:28:09.845 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:58:09.8433721+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:28:19.873 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T08:58:19.8694622+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:28:29.887 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:58:29.8843689+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:28:39.900 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:58:39.8960924+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:28:49.916 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:58:49.9128660+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:28:59.922 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:58:59.9195374+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:29:09.933 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:59:09.9299852+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:29:19.945 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:59:19.9427566+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:29:29.957 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:59:29.9550191+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:29:39.972 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T08:59:39.9698784+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:29:49.979 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:59:49.9772993+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:29:59.999 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T08:59:59.9961616+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:30:10.007 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T09:00:10.0049224+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:30:20.017 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:00:20.0141915+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:30:30.032 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:00:30.0295554+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:30:40.045 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:00:40.0426195+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:30:50.065 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T09:00:50.0613993+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:31:00.075 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:01:00.0719499+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:31:10.093 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T09:01:10.0883410+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:31:20.106 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:01:20.1032329+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:31:30.110 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T09:01:30.1075635+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:31:40.127 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:01:40.1238807+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:31:50.146 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T09:01:50.1427218+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:32:00.166 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__now_0='2025-10-01T09:02:00.1615233+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:32:10.178 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:02:10.1753014+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:32:20.196 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:02:20.1937098+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:32:30.207 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:02:30.2038175+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:32:40.223 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:02:40.2203133+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:32:50.235 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:02:50.2319327+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:33:00.399 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__now_0='2025-10-01T09:03:00.2506267+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:33:10.411 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:03:10.4077426+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:33:20.426 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:03:20.4229113+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:33:30.438 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:03:30.4351412+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:33:40.448 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:03:40.4447133+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:33:50.470 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:03:50.4668285+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:34:00.481 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:04:00.4776555+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:34:10.492 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:04:10.4895799+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:34:20.495 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:04:20.4925813+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:34:30.501 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T09:04:30.4972955+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:34:40.513 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:04:40.5102617+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:34:50.522 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:04:50.5196118+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:35:00.543 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T09:05:00.5406292+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:35:10.626 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:05:10.6232120+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:35:20.646 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:05:20.6429702+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:35:30.671 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:05:30.6685370+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:35:40.686 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T09:05:40.6824070+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:35:50.695 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:05:50.6923691+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:36:00.714 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:06:00.7110350+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:36:10.732 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:06:10.7291054+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:36:20.750 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T09:06:20.7461344+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:36:30.765 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:06:30.7622780+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:36:40.784 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T09:06:40.7805724+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:36:50.800 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:06:50.7974054+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:37:00.815 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:07:00.8123650+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:37:10.828 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:07:10.8254399+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:37:20.842 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:07:20.8390322+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:37:30.855 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:07:30.8518907+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:37:40.871 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:07:40.8678911+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:37:50.883 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:07:50.8802746+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:38:01.012 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T09:08:00.8891156+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:38:11.032 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:08:11.0292369+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:38:21.051 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:08:21.0478155+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:38:31.062 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:08:31.0597377+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:38:41.069 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:08:41.0663038+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:38:51.084 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:08:51.0810110+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:39:01.097 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:09:01.0940072+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:39:11.117 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:09:11.1141185+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:39:21.133 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:09:21.1293980+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:39:31.144 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:09:31.1411705+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:39:41.155 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:09:41.1514495+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:39:51.174 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__now_0='2025-10-01T09:09:51.1683608+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:40:01.197 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:10:01.1937483+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:40:11.211 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:10:11.2088995+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:40:21.236 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:10:21.2335154+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:40:31.247 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:10:31.2445383+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:40:41.255 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:10:41.2518688+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:40:51.266 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:10:51.2631602+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:41:01.276 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:11:01.2732224+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:41:11.282 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:11:11.2793617+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:41:21.293 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T09:11:21.2891533+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:41:31.323 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:11:31.2983891+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:41:41.336 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:11:41.3328524+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:41:51.351 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T09:11:51.3475353+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:42:01.373 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:12:01.3706578+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:42:11.383 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:12:11.3798212+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:42:21.402 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T09:12:21.4003371+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:42:31.440 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T09:12:31.4382977+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:42:41.453 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:12:41.4500622+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:42:51.470 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:12:51.4668717+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:43:01.620 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__now_0='2025-10-01T09:13:01.4888273+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:43:11.636 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:13:11.6336784+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:43:21.658 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T09:13:21.6543155+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:43:31.666 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:13:31.6620635+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:43:41.678 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T09:13:41.6749521+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:43:51.699 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T09:13:51.6955474+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:44:01.708 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:14:01.7050381+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:44:11.716 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:14:11.7134385+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:44:21.731 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__now_0='2025-10-01T09:14:21.7262126+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:44:31.769 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T09:14:31.7651102+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:44:41.776 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T09:14:41.7730264+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:44:51.785 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:14:51.7819514+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:45:01.799 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:15:01.7962828+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:45:11.810 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:15:11.8070361+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:45:21.822 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T09:15:21.8183384+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:45:31.828 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:15:31.8255463+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:45:41.838 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:15:41.8359211+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:45:51.849 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:15:51.8460529+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:46:01.872 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:16:01.8693390+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:46:11.891 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:16:11.8885620+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:46:21.917 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__now_0='2025-10-01T09:16:21.9121719+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:46:31.927 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:16:31.9245996+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:46:41.948 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__now_0='2025-10-01T09:16:41.9452020+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:46:51.961 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:16:51.9579401+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:47:01.984 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:17:01.9808448+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:47:12.008 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:17:12.0047455+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:47:22.022 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T09:17:22.0200303+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:47:32.024 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T09:17:32.0225751+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:47:42.037 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T09:17:42.0359850+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:47:52.056 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:17:52.0538083+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:48:02.124 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T09:18:02.0682220+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:48:12.132 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T09:18:12.1307210+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:48:22.147 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T09:18:22.1456754+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:48:32.147 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T09:18:32.1460359+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:48:42.167 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:18:42.1627821+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:48:52.179 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__now_0='2025-10-01T09:18:52.1770504+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:49:02.195 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T09:19:02.1933123+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:49:12.211 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T09:19:12.2099546+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:49:22.226 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T09:19:22.2251722+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:49:32.231 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T09:19:32.2289276+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:49:42.234 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T09:19:42.2334011+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:49:52.237 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T09:19:52.2362191+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:50:02.242 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T09:20:02.2409851+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:50:12.250 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T09:20:12.2484091+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:50:22.267 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T09:20:22.2655869+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:50:32.279 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__now_0='2025-10-01T09:20:32.2771125+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 14:53:36.774 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 14:53:59.852 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 14:54:16.781 +05:30 [INF] Executed DbCommand (149ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 14:54:16.870 +05:30 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 14:54:25.199 +05:30 [INF] Executed DbCommand (169ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 14:54:33.305 +05:30 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 14:54:33.374 +05:30 [INF] Executed DbCommand (68ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 14:54:33.382 +05:30 [INF] Applying migration '20250928044553_Initial'.
2025-10-01 14:54:33.689 +05:30 [ERR] Failed executing DbCommand (103ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AuditLogs" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "PerformedByUserId" uuid NOT NULL,
    "PerformedByUserName" text,
    "RoleAtTime" text,
    "ActionType" text NOT NULL,
    "Description" text,
    "IPAddress" text,
    "UserAgent" text,
    "Location" text,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AuditLogs" PRIMARY KEY ("Id")
);
2025-10-01 14:58:02.357 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 14:58:16.464 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 14:58:33.049 +05:30 [INF] Executed DbCommand (97ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 14:58:33.148 +05:30 [INF] Executed DbCommand (87ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 14:58:41.171 +05:30 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 14:58:49.163 +05:30 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 14:58:49.223 +05:30 [INF] Executed DbCommand (59ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 14:58:49.232 +05:30 [INF] Applying migration '20250928044553_Initial'.
2025-10-01 14:58:49.507 +05:30 [ERR] Failed executing DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AuditLogs" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "PerformedByUserId" uuid NOT NULL,
    "PerformedByUserName" text,
    "RoleAtTime" text,
    "ActionType" text NOT NULL,
    "Description" text,
    "IPAddress" text,
    "UserAgent" text,
    "Location" text,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AuditLogs" PRIMARY KEY ("Id")
);
2025-10-01 15:03:16.415 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 15:03:33.879 +05:30 [INF] Executed DbCommand (106ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 15:03:33.978 +05:30 [INF] Executed DbCommand (87ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 15:03:51.182 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 15:04:08.584 +05:30 [INF] Executed DbCommand (102ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 15:04:08.671 +05:30 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 15:04:22.192 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 15:04:39.627 +05:30 [INF] Executed DbCommand (102ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 15:04:39.714 +05:30 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 15:04:56.714 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 15:05:14.060 +05:30 [INF] Executed DbCommand (105ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 15:05:14.154 +05:30 [INF] Executed DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 15:06:17.036 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 15:06:41.260 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 15:06:57.791 +05:30 [INF] Executed DbCommand (112ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 15:06:57.886 +05:30 [INF] Executed DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 15:07:05.938 +05:30 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 15:07:13.947 +05:30 [INF] Executed DbCommand (71ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 15:07:14.009 +05:30 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 15:07:14.018 +05:30 [INF] Applying migration '20250928044553_Initial'.
2025-10-01 15:07:14.296 +05:30 [ERR] Failed executing DbCommand (86ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AuditLogs" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "PerformedByUserId" uuid NOT NULL,
    "PerformedByUserName" text,
    "RoleAtTime" text,
    "ActionType" text NOT NULL,
    "Description" text,
    "IPAddress" text,
    "UserAgent" text,
    "Location" text,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AuditLogs" PRIMARY KEY ("Id")
);
2025-10-01 15:07:41.095 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 15:07:57.713 +05:30 [INF] Executed DbCommand (168ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 15:07:57.842 +05:30 [INF] Executed DbCommand (117ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 15:08:05.875 +05:30 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 15:08:13.851 +05:30 [INF] Executed DbCommand (59ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 15:08:13.923 +05:30 [INF] Executed DbCommand (71ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 15:08:13.932 +05:30 [INF] Applying migration '20250928044553_Initial'.
2025-10-01 15:08:14.214 +05:30 [ERR] Failed executing DbCommand (86ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AuditLogs" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "PerformedByUserId" uuid NOT NULL,
    "PerformedByUserName" text,
    "RoleAtTime" text,
    "ActionType" text NOT NULL,
    "Description" text,
    "IPAddress" text,
    "UserAgent" text,
    "Location" text,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AuditLogs" PRIMARY KEY ("Id")
);
2025-10-01 15:11:37.918 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 15:11:54.674 +05:30 [INF] Executed DbCommand (118ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 15:11:54.772 +05:30 [INF] Executed DbCommand (86ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 15:12:02.867 +05:30 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 15:12:11.036 +05:30 [INF] Executed DbCommand (95ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 15:12:11.135 +05:30 [INF] Executed DbCommand (99ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 15:12:11.143 +05:30 [INF] Applying migration '20250928044553_Initial'.
2025-10-01 15:12:11.428 +05:30 [ERR] Failed executing DbCommand (87ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AuditLogs" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "PerformedByUserId" uuid NOT NULL,
    "PerformedByUserName" text,
    "RoleAtTime" text,
    "ActionType" text NOT NULL,
    "Description" text,
    "IPAddress" text,
    "UserAgent" text,
    "Location" text,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AuditLogs" PRIMARY KEY ("Id")
);
2025-10-01 15:13:20.451 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 15:13:38.316 +05:30 [INF] Executed DbCommand (125ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 15:13:38.410 +05:30 [INF] Executed DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 15:13:57.802 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 15:14:15.641 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 15:14:32.456 +05:30 [INF] Executed DbCommand (121ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 15:14:32.543 +05:30 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 15:14:40.730 +05:30 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 15:14:48.802 +05:30 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 15:14:48.876 +05:30 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 15:14:48.883 +05:30 [INF] Applying migration '20250928044553_Initial'.
2025-10-01 15:14:49.155 +05:30 [ERR] Failed executing DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AuditLogs" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "PerformedByUserId" uuid NOT NULL,
    "PerformedByUserName" text,
    "RoleAtTime" text,
    "ActionType" text NOT NULL,
    "Description" text,
    "IPAddress" text,
    "UserAgent" text,
    "Location" text,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AuditLogs" PRIMARY KEY ("Id")
);
2025-10-01 15:15:21.442 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 15:15:38.498 +05:30 [INF] Executed DbCommand (104ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 15:15:38.601 +05:30 [INF] Executed DbCommand (91ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 15:15:47.016 +05:30 [INF] Executed DbCommand (112ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 15:15:55.095 +05:30 [INF] Executed DbCommand (66ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 15:15:55.159 +05:30 [INF] Executed DbCommand (63ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 15:15:55.167 +05:30 [INF] Applying migration '20250928044553_Initial'.
2025-10-01 15:15:55.417 +05:30 [ERR] Failed executing DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AuditLogs" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "PerformedByUserId" uuid NOT NULL,
    "PerformedByUserName" text,
    "RoleAtTime" text,
    "ActionType" text NOT NULL,
    "Description" text,
    "IPAddress" text,
    "UserAgent" text,
    "Location" text,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AuditLogs" PRIMARY KEY ("Id")
);
2025-10-01 15:17:09.670 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 15:17:27.513 +05:30 [INF] Executed DbCommand (132ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 15:17:27.694 +05:30 [INF] Executed DbCommand (169ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 15:17:46.494 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 15:18:02.361 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 15:18:18.988 +05:30 [INF] Executed DbCommand (121ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 15:18:19.116 +05:30 [INF] Executed DbCommand (115ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 15:18:27.158 +05:30 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 15:18:35.178 +05:30 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 15:18:35.237 +05:30 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 15:18:35.253 +05:30 [INF] Applying migration '20250928044553_Initial'.
2025-10-01 15:18:35.632 +05:30 [ERR] Failed executing DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AuditLogs" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "PerformedByUserId" uuid NOT NULL,
    "PerformedByUserName" text,
    "RoleAtTime" text,
    "ActionType" text NOT NULL,
    "Description" text,
    "IPAddress" text,
    "UserAgent" text,
    "Location" text,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AuditLogs" PRIMARY KEY ("Id")
);
2025-10-01 15:20:22.986 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 15:20:40.623 +05:30 [INF] Executed DbCommand (102ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 15:20:40.713 +05:30 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 15:21:21.387 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 15:21:38.067 +05:30 [INF] Executed DbCommand (119ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 15:21:38.146 +05:30 [INF] Executed DbCommand (68ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 15:21:46.209 +05:30 [INF] Executed DbCommand (72ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 15:21:54.172 +05:30 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 15:21:54.239 +05:30 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 15:21:54.248 +05:30 [INF] Applying migration '20250928044553_Initial'.
2025-10-01 15:21:54.545 +05:30 [ERR] Failed executing DbCommand (106ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AuditLogs" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "PerformedByUserId" uuid NOT NULL,
    "PerformedByUserName" text,
    "RoleAtTime" text,
    "ActionType" text NOT NULL,
    "Description" text,
    "IPAddress" text,
    "UserAgent" text,
    "Location" text,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AuditLogs" PRIMARY KEY ("Id")
);
2025-10-01 15:40:23.432 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 15:40:52.170 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 15:41:08.905 +05:30 [INF] Executed DbCommand (126ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 15:41:09.060 +05:30 [INF] Executed DbCommand (142ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 15:41:17.266 +05:30 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 15:41:25.781 +05:30 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 15:41:25.865 +05:30 [INF] Executed DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 15:41:25.874 +05:30 [INF] Applying migration '20250928044553_Initial'.
2025-10-01 15:41:26.731 +05:30 [ERR] Failed executing DbCommand (659ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AuditLogs" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "PerformedByUserId" uuid NOT NULL,
    "PerformedByUserName" text,
    "RoleAtTime" text,
    "ActionType" text NOT NULL,
    "Description" text,
    "IPAddress" text,
    "UserAgent" text,
    "Location" text,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AuditLogs" PRIMARY KEY ("Id")
);
2025-10-01 16:12:31.961 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 16:12:50.419 +05:30 [INF] Executed DbCommand (123ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 16:12:50.526 +05:30 [INF] Executed DbCommand (95ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 16:13:14.467 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 16:13:34.406 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 16:13:51.367 +05:30 [INF] Executed DbCommand (111ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 16:13:51.466 +05:30 [INF] Executed DbCommand (87ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 16:13:59.540 +05:30 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 16:14:07.592 +05:30 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 16:14:07.651 +05:30 [INF] Executed DbCommand (59ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 16:14:07.660 +05:30 [INF] Applying migration '20250928044553_Initial'.
2025-10-01 16:14:07.986 +05:30 [ERR] Failed executing DbCommand (128ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AuditLogs" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "PerformedByUserId" uuid NOT NULL,
    "PerformedByUserName" text,
    "RoleAtTime" text,
    "ActionType" text NOT NULL,
    "Description" text,
    "IPAddress" text,
    "UserAgent" text,
    "Location" text,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AuditLogs" PRIMARY KEY ("Id")
);
2025-10-01 17:44:29.624 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 17:44:47.751 +05:30 [INF] Executed DbCommand (147ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 17:44:47.871 +05:30 [INF] Executed DbCommand (108ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 17:45:07.522 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 17:45:28.686 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 17:45:45.311 +05:30 [INF] Executed DbCommand (105ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 17:45:45.397 +05:30 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 17:45:53.514 +05:30 [INF] Executed DbCommand (108ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 17:46:01.617 +05:30 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 17:46:01.694 +05:30 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 17:46:01.704 +05:30 [INF] Applying migration '20250928044553_Initial'.
2025-10-01 17:46:01.985 +05:30 [ERR] Failed executing DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AuditLogs" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "PerformedByUserId" uuid NOT NULL,
    "PerformedByUserName" text,
    "RoleAtTime" text,
    "ActionType" text NOT NULL,
    "Description" text,
    "IPAddress" text,
    "UserAgent" text,
    "Location" text,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AuditLogs" PRIMARY KEY ("Id")
);
2025-10-01 17:55:10.433 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 17:55:27.506 +05:30 [INF] Executed DbCommand (105ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 17:55:27.711 +05:30 [INF] Executed DbCommand (194ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 17:55:35.768 +05:30 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 17:55:43.889 +05:30 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 17:55:43.963 +05:30 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 17:55:43.971 +05:30 [INF] Applying migration '20250928044553_Initial'.
2025-10-01 17:55:44.251 +05:30 [ERR] Failed executing DbCommand (91ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AuditLogs" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "PerformedByUserId" uuid NOT NULL,
    "PerformedByUserName" text,
    "RoleAtTime" text,
    "ActionType" text NOT NULL,
    "Description" text,
    "IPAddress" text,
    "UserAgent" text,
    "Location" text,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AuditLogs" PRIMARY KEY ("Id")
);
2025-10-01 17:58:47.327 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 17:59:04.190 +05:30 [INF] Executed DbCommand (254ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP DATABASE "postgresql-database-jow4kcw0s8s8o8c0og4scok8" WITH (FORCE);
2025-10-01 17:59:33.578 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 17:59:54.843 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 18:00:28.225 +05:30 [INF] Executed DbCommand (371ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE "postgresql-database-jow4kcw0s8s8o8c0og4scok8";
2025-10-01 18:00:44.698 +05:30 [INF] Executed DbCommand (90ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-10-01 18:00:52.756 +05:30 [INF] Executed DbCommand (108ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 18:00:52.842 +05:30 [INF] Executed DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 18:00:52.852 +05:30 [INF] Applying migration '20250928044553_Initial'.
2025-10-01 18:00:53.097 +05:30 [INF] Executed DbCommand (90ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AuditLogs" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "PerformedByUserId" uuid NOT NULL,
    "PerformedByUserName" text,
    "RoleAtTime" text,
    "ActionType" text NOT NULL,
    "Description" text,
    "IPAddress" text,
    "UserAgent" text,
    "Location" text,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AuditLogs" PRIMARY KEY ("Id")
);
2025-10-01 18:00:53.194 +05:30 [INF] Executed DbCommand (97ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AutomationFlows" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "Name" text NOT NULL,
    "TriggerKeyword" text NOT NULL,
    "NodesJson" text NOT NULL,
    "EdgesJson" text NOT NULL,
    "IsActive" boolean NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AutomationFlows" PRIMARY KEY ("Id")
);
2025-10-01 18:00:53.282 +05:30 [INF] Executed DbCommand (87ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AutoReplyFlows" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "Name" text NOT NULL,
    "NodesJson" text NOT NULL,
    "EdgesJson" text NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "TriggerKeyword" text,
    "IsActive" boolean NOT NULL,
    "IndustryTag" text,
    "UseCase" text,
    "IsDefaultTemplate" boolean NOT NULL,
    "Keyword" text,
    CONSTRAINT "PK_AutoReplyFlows" PRIMARY KEY ("Id")
);
2025-10-01 18:00:53.362 +05:30 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AutoReplyLogs" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "ContactId" uuid NOT NULL,
    "TriggerKeyword" text NOT NULL,
    "TriggerType" text NOT NULL,
    "ReplyContent" text NOT NULL,
    "FlowName" text,
    "MessageLogId" uuid,
    "TriggeredAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AutoReplyLogs" PRIMARY KEY ("Id")
);
2025-10-01 18:00:53.441 +05:30 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "CampaignClickDailyAgg" (
    "Id" uuid NOT NULL,
    "CampaignId" uuid NOT NULL,
    "Day" date NOT NULL,
    "ButtonIndex" integer NOT NULL,
    "Clicks" bigint NOT NULL,
    CONSTRAINT "PK_CampaignClickDailyAgg" PRIMARY KEY ("Id")
);
2025-10-01 18:00:53.527 +05:30 [INF] Executed DbCommand (86ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "CampaignClickLogs" (
    "Id" uuid NOT NULL,
    "RunId" uuid,
    "CampaignSendLogId" uuid NOT NULL,
    "CampaignId" uuid NOT NULL,
    "ContactId" uuid,
    "ButtonIndex" integer NOT NULL,
    "ButtonTitle" character varying(120) NOT NULL,
    "ClickType" character varying(16) NOT NULL,
    "Destination" character varying(2048) NOT NULL,
    "Ip" character varying(64) NOT NULL,
    "UserAgent" character varying(512) NOT NULL,
    "ClickedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_CampaignClickLogs" PRIMARY KEY ("Id")
);
2025-10-01 18:00:53.612 +05:30 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "CatalogClickLogs" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "ProductId" uuid,
    "UserId" text,
    "UserName" text,
    "UserPhone" text,
    "BotId" text,
    "CategoryBrowsed" text,
    "ProductBrowsed" text,
    "CTAJourney" text,
    "TemplateId" text NOT NULL,
    "RefMessageId" text NOT NULL,
    "ButtonText" text NOT NULL,
    "ClickedAt" timestamp with time zone,
    "CampaignSendLogId" uuid,
    "ContactId" uuid,
    "FollowUpSent" boolean NOT NULL,
    "LastInteractionType" text,
    "MessageLogId" uuid,
    "PlanSnapshot" text,
    "CtaId" uuid,
    "CampaignId" uuid,
    "Source" text NOT NULL,
    CONSTRAINT "PK_CatalogClickLogs" PRIMARY KEY ("Id")
);
2025-10-01 18:00:53.692 +05:30 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ChatSessionStates" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "ContactId" uuid NOT NULL,
    "Mode" text NOT NULL,
    "LastUpdatedAt" timestamp with time zone NOT NULL,
    "UpdatedBy" text,
    CONSTRAINT "PK_ChatSessionStates" PRIMARY KEY ("Id")
);
2025-10-01 18:00:53.769 +05:30 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ContactReads" (
    "Id" uuid NOT NULL,
    "ContactId" uuid NOT NULL,
    "UserId" uuid NOT NULL,
    "LastReadAt" timestamp with time zone NOT NULL,
    "BusinessId" uuid NOT NULL,
    CONSTRAINT "PK_ContactReads" PRIMARY KEY ("Id")
);
2025-10-01 18:00:53.865 +05:30 [INF] Executed DbCommand (96ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "CTADefinitions" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "Title" text NOT NULL,
    "ButtonText" text NOT NULL,
    "ButtonType" text NOT NULL,
    "TargetUrl" text NOT NULL,
    "Description" text NOT NULL,
    "IsActive" boolean NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone,
    CONSTRAINT "PK_CTADefinitions" PRIMARY KEY ("Id")
);
2025-10-01 18:00:53.946 +05:30 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "CTAFlowConfigs" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "FlowName" character varying(100) NOT NULL,
    "IsActive" boolean NOT NULL,
    "IsPublished" boolean NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "CreatedBy" text,
    "UpdatedAt" timestamp with time zone,
    CONSTRAINT "PK_CTAFlowConfigs" PRIMARY KEY ("Id")
);
2025-10-01 18:00:54.026 +05:30 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "FailedWebhookLogs" (
    "Id" uuid NOT NULL,
    "ErrorMessage" text,
    "SourceModule" text,
    "FailureType" text,
    "RawJson" text NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_FailedWebhookLogs" PRIMARY KEY ("Id")
);
2025-10-01 18:00:54.121 +05:30 [INF] Executed DbCommand (95ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "FeatureAccess" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "FeatureName" character varying(50) NOT NULL,
    "Description" character varying(200) NOT NULL,
    "IsEnabled" boolean NOT NULL,
    "Notes" text,
    "CreatedAt" timestamp with time zone NOT NULL,
    "Group" character varying(50) NOT NULL,
    "Plan" text,
    CONSTRAINT "PK_FeatureAccess" PRIMARY KEY ("Id")
);
2025-10-01 18:00:54.219 +05:30 [INF] Executed DbCommand (97ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "FeatureMaster" (
    "Id" uuid NOT NULL,
    "FeatureCode" character varying(100) NOT NULL,
    "DisplayName" character varying(100) NOT NULL,
    "Description" character varying(250) NOT NULL,
    "Group" character varying(50) NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_FeatureMaster" PRIMARY KEY ("Id")
);
2025-10-01 18:00:54.311 +05:30 [INF] Executed DbCommand (92ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "FlowExecutionLogs" (
    "Id" uuid NOT NULL,
    "RunId" uuid,
    "BusinessId" uuid NOT NULL,
    "StepId" uuid NOT NULL,
    "StepName" text NOT NULL,
    "FlowId" uuid,
    "CampaignSendLogId" uuid,
    "TrackingLogId" uuid,
    "ContactPhone" text,
    "TriggeredByButton" text,
    "TemplateName" text,
    "TemplateType" text,
    "Success" boolean NOT NULL,
    "ErrorMessage" text,
    "RawResponse" text,
    "ExecutedAt" timestamp with time zone NOT NULL,
    "MessageLogId" uuid,
    "ButtonIndex" smallint,
    "RequestId" uuid,
    CONSTRAINT "PK_FlowExecutionLogs" PRIMARY KEY ("Id")
);
2025-10-01 18:00:54.392 +05:30 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Notes" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid,
    "ContactId" uuid,
    "Title" text NOT NULL,
    "Content" text NOT NULL,
    "Source" text NOT NULL,
    "CreatedBy" text NOT NULL,
    "IsPinned" boolean NOT NULL,
    "IsInternal" boolean NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "EditedAt" timestamp with time zone,
    CONSTRAINT "PK_Notes" PRIMARY KEY ("Id")
);
2025-10-01 18:00:54.492 +05:30 [INF] Executed DbCommand (99ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "OutboundCampaignJobs" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "CampaignId" uuid NOT NULL,
    "Status" character varying(32) NOT NULL,
    "Attempt" integer NOT NULL,
    "MaxAttempts" integer NOT NULL,
    "NextAttemptAt" timestamp with time zone NOT NULL,
    "LastError" character varying(4000),
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_OutboundCampaignJobs" PRIMARY KEY ("Id")
);
2025-10-01 18:00:54.572 +05:30 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Permissions" (
    "Id" uuid NOT NULL,
    "Code" text NOT NULL,
    "Name" text NOT NULL,
    "Group" text,
    "Description" text,
    "IsActive" boolean NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_Permissions" PRIMARY KEY ("Id")
);
2025-10-01 18:00:54.638 +05:30 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "PlanFeatureMatrix" (
    "Id" uuid NOT NULL,
    "PlanName" character varying(20) NOT NULL,
    "FeatureName" character varying(50) NOT NULL,
    "IsEnabled" boolean NOT NULL,
    CONSTRAINT "PK_PlanFeatureMatrix" PRIMARY KEY ("Id")
);
2025-10-01 18:00:54.718 +05:30 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Plans" (
    "Id" uuid NOT NULL,
    "Code" text NOT NULL,
    "Name" text NOT NULL,
    "Description" text,
    "IsActive" boolean NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_Plans" PRIMARY KEY ("Id")
);
2025-10-01 18:00:54.796 +05:30 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Products" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "Name" text NOT NULL,
    "Description" text NOT NULL,
    "Price" numeric NOT NULL,
    "Currency" text NOT NULL,
    "ImageUrl" text NOT NULL,
    "IsActive" boolean NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "TotalClicks" integer NOT NULL,
    "LastClickedAt" timestamp with time zone,
    "MostClickedCTA" text,
    CONSTRAINT "PK_Products" PRIMARY KEY ("Id")
);
2025-10-01 18:00:54.876 +05:30 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ProviderBillingEvents" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "MessageLogId" uuid,
    "Provider" text NOT NULL,
    "EventType" text NOT NULL,
    "ProviderMessageId" text,
    "ConversationId" text,
    "ConversationCategory" text,
    "IsChargeable" boolean,
    "PriceAmount" numeric,
    "PriceCurrency" text,
    "PayloadJson" text NOT NULL,
    "OccurredAt" timestamp with time zone NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_ProviderBillingEvents" PRIMARY KEY ("Id")
);
2025-10-01 18:00:54.980 +05:30 [INF] Executed DbCommand (104ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "QuickReplies" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "OwnerUserId" uuid,
    "Title" character varying(120) NOT NULL,
    "Body" text NOT NULL,
    "TagsCsv" character varying(240),
    "Language" character varying(8),
    "Scope" integer NOT NULL,
    "IsActive" boolean NOT NULL,
    "IsDeleted" boolean NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone NOT NULL DEFAULT (NOW()),
    "CreatedBy" text,
    "UpdatedBy" text,
    CONSTRAINT "PK_QuickReplies" PRIMARY KEY ("Id")
);
2025-10-01 18:00:55.087 +05:30 [INF] Executed DbCommand (106ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Reminders" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "ContactId" uuid NOT NULL,
    "Title" text NOT NULL,
    "Description" text,
    "DueAt" timestamp with time zone NOT NULL,
    "Status" text NOT NULL,
    "ReminderType" text,
    "Priority" integer,
    "IsRecurring" boolean NOT NULL,
    "RecurrencePattern" text,
    "SendWhatsappNotification" boolean NOT NULL,
    "LinkedCampaign" text,
    "IsActive" boolean NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone,
    "CompletedAt" timestamp with time zone,
    "LastCTAType" text,
    "LastClickedAt" timestamp with time zone,
    "FollowUpSent" boolean NOT NULL,
    CONSTRAINT "PK_Reminders" PRIMARY KEY ("Id")
);
2025-10-01 18:00:55.177 +05:30 [INF] Executed DbCommand (90ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Roles" (
    "Id" uuid NOT NULL,
    "Name" text NOT NULL,
    "Description" text,
    "IsSystemDefined" boolean NOT NULL,
    "IsActive" boolean NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_Roles" PRIMARY KEY ("Id")
);
2025-10-01 18:00:55.255 +05:30 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Tags" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "Name" text NOT NULL,
    "ColorHex" text,
    "Category" text,
    "Notes" text,
    "IsSystemTag" boolean NOT NULL,
    "IsActive" boolean NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "LastUsedAt" timestamp with time zone,
    CONSTRAINT "PK_Tags" PRIMARY KEY ("Id")
);
2025-10-01 18:00:55.337 +05:30 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "UserFeatureAccess" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "UserId" uuid NOT NULL,
    "FeatureName" character varying(50) NOT NULL,
    "IsEnabled" boolean NOT NULL,
    "Notes" text,
    "ModifiedByUserId" uuid,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_UserFeatureAccess" PRIMARY KEY ("Id")
);
2025-10-01 18:00:55.417 +05:30 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "WebhookSettings" (
    "Id" uuid NOT NULL,
    "AutoCleanupEnabled" boolean NOT NULL,
    "LastCleanupAt" timestamp with time zone,
    CONSTRAINT "PK_WebhookSettings" PRIMARY KEY ("Id")
);
2025-10-01 18:00:55.501 +05:30 [INF] Executed DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "WhatsAppTemplates" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "Provider" character varying(40) NOT NULL,
    "ExternalId" character varying(120),
    "Name" character varying(160) NOT NULL,
    "Language" character varying(16) NOT NULL,
    "Status" character varying(32) NOT NULL,
    "Category" character varying(40),
    "Body" text NOT NULL,
    "HasImageHeader" boolean NOT NULL,
    "PlaceholderCount" integer NOT NULL,
    "ButtonsJson" text NOT NULL,
    "RawJson" text NOT NULL,
    "LastSyncedAt" timestamp with time zone NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone NOT NULL,
    "IsActive" boolean NOT NULL,
    CONSTRAINT "PK_WhatsAppTemplates" PRIMARY KEY ("Id")
);
2025-10-01 18:00:56.171 +05:30 [INF] Executed DbCommand (104ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AutoReplyFlowEdges" (
    "Id" uuid NOT NULL,
    "FlowId" uuid NOT NULL,
    "SourceNodeId" text NOT NULL,
    "TargetNodeId" text NOT NULL,
    "SourceHandle" text,
    "TargetHandle" text,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AutoReplyFlowEdges" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_AutoReplyFlowEdges_AutoReplyFlows_FlowId" FOREIGN KEY ("FlowId") REFERENCES "AutoReplyFlows" ("Id") ON DELETE CASCADE
);
2025-10-01 18:00:56.252 +05:30 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AutoReplyFlowNodes" (
    "Id" uuid NOT NULL,
    "FlowId" uuid NOT NULL,
    "NodeType" text NOT NULL,
    "Label" text NOT NULL,
    "NodeName" text,
    "ConfigJson" text NOT NULL,
    "Position_X" double precision NOT NULL,
    "Position_Y" double precision NOT NULL,
    "Order" integer NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_AutoReplyFlowNodes" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_AutoReplyFlowNodes_AutoReplyFlows_FlowId" FOREIGN KEY ("FlowId") REFERENCES "AutoReplyFlows" ("Id") ON DELETE CASCADE
);
2025-10-01 18:00:56.346 +05:30 [INF] Executed DbCommand (94ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AutoReplyRules" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "TriggerKeyword" text NOT NULL,
    "ReplyMessage" text NOT NULL,
    "MediaUrl" text,
    "Priority" integer NOT NULL,
    "IsActive" boolean NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone,
    "FlowName" text,
    "FlowId" uuid,
    "IndustryTag" text,
    "SourceChannel" text,
    CONSTRAINT "PK_AutoReplyRules" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_AutoReplyRules_AutoReplyFlows_FlowId" FOREIGN KEY ("FlowId") REFERENCES "AutoReplyFlows" ("Id")
);
2025-10-01 18:00:56.432 +05:30 [INF] Executed DbCommand (86ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "CTAFlowSteps" (
    "Id" uuid NOT NULL,
    "CTAFlowConfigId" uuid NOT NULL,
    "TriggerButtonText" text NOT NULL,
    "TriggerButtonType" text NOT NULL,
    "TemplateToSend" text NOT NULL,
    "StepOrder" integer NOT NULL,
    "RequiredTag" text,
    "RequiredSource" text,
    "PositionX" real,
    "PositionY" real,
    "TemplateType" text,
    "UseProfileName" boolean NOT NULL,
    "ProfileNameSlot" integer,
    CONSTRAINT "PK_CTAFlowSteps" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_CTAFlowSteps_CTAFlowConfigs_CTAFlowConfigId" FOREIGN KEY ("CTAFlowConfigId") REFERENCES "CTAFlowConfigs" ("Id") ON DELETE CASCADE
);
2025-10-01 18:00:56.531 +05:30 [INF] Executed DbCommand (98ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Businesses" (
    "Id" uuid NOT NULL,
    "CompanyName" text,
    "BusinessName" text NOT NULL,
    "BusinessEmail" text NOT NULL,
    "RepresentativeName" text,
    "CreatedByPartnerId" uuid,
    "Phone" text,
    "CompanyPhone" text,
    "Website" text,
    "Address" text,
    "Industry" text,
    "LogoUrl" text,
    "Status" integer NOT NULL,
    "Tags" text,
    "Source" text,
    "Notes" text,
    "CreatedAt" timestamp with time zone NOT NULL,
    "CreatedBy" text,
    "IsApproved" boolean NOT NULL,
    "ApprovedBy" text,
    "ApprovedAt" timestamp with time zone,
    "LastLoginAt" timestamp with time zone,
    "IsDeleted" boolean NOT NULL,
    "DeletedAt" timestamp with time zone,
    "DeletedBy" text,
    "PlanId" uuid,
    CONSTRAINT "PK_Businesses" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Businesses_Plans_PlanId" FOREIGN KEY ("PlanId") REFERENCES "Plans" ("Id")
);
2025-10-01 18:00:56.617 +05:30 [INF] Executed DbCommand (86ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "PlanPermissions" (
    "Id" uuid NOT NULL,
    "PlanId" uuid NOT NULL,
    "PermissionId" uuid NOT NULL,
    "IsActive" boolean NOT NULL,
    "AssignedAt" timestamp with time zone NOT NULL,
    "AssignedBy" text,
    CONSTRAINT "PK_PlanPermissions" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_PlanPermissions_Permissions_PermissionId" FOREIGN KEY ("PermissionId") REFERENCES "Permissions" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_PlanPermissions_Plans_PlanId" FOREIGN KEY ("PlanId") REFERENCES "Plans" ("Id") ON DELETE CASCADE
);
2025-10-01 18:00:57.788 +05:30 [INF] Executed DbCommand (104ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "RolePermissions" (
    "Id" uuid NOT NULL,
    "RoleId" uuid NOT NULL,
    "PermissionId" uuid NOT NULL,
    "AssignedAt" timestamp with time zone NOT NULL,
    "AssignedBy" text,
    "IsActive" boolean NOT NULL,
    "IsRevoked" boolean NOT NULL,
    CONSTRAINT "PK_RolePermissions" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_RolePermissions_Permissions_PermissionId" FOREIGN KEY ("PermissionId") REFERENCES "Permissions" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_RolePermissions_Roles_RoleId" FOREIGN KEY ("RoleId") REFERENCES "Roles" ("Id") ON DELETE CASCADE
);
2025-10-01 18:00:57.871 +05:30 [INF] Executed DbCommand (82ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "FlowButtonLinks" (
    "Id" uuid NOT NULL,
    "ButtonText" text NOT NULL,
    "NextStepId" uuid,
    "ButtonType" text NOT NULL,
    "ButtonSubType" text NOT NULL,
    "ButtonValue" text NOT NULL,
    "CTAFlowStepId" uuid NOT NULL,
    "ButtonIndex" smallint NOT NULL,
    CONSTRAINT "PK_FlowButtonLinks" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_FlowButtonLinks_CTAFlowSteps_CTAFlowStepId" FOREIGN KEY ("CTAFlowStepId") REFERENCES "CTAFlowSteps" ("Id") ON DELETE CASCADE
);
2025-10-01 18:00:58.018 +05:30 [INF] Executed DbCommand (147ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "BusinessPlanInfos" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "Plan" integer NOT NULL,
    "TotalMonthlyQuota" integer NOT NULL,
    "RemainingMessages" integer NOT NULL,
    "QuotaResetDate" timestamp with time zone NOT NULL,
    "WalletBalance" numeric NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_BusinessPlanInfos" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_BusinessPlanInfos_Businesses_BusinessId" FOREIGN KEY ("BusinessId") REFERENCES "Businesses" ("Id") ON DELETE CASCADE
);
2025-10-01 18:00:58.146 +05:30 [INF] Executed DbCommand (128ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Campaigns" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "CampaignId" uuid,
    "SourceCampaignId" uuid,
    "Name" text NOT NULL,
    "MessageTemplate" text NOT NULL,
    "TemplateId" text,
    "MessageBody" text,
    "FollowUpTemplateId" text,
    "CampaignType" text,
    "CtaId" uuid,
    "CTAFlowConfigId" uuid,
    "ScheduledAt" timestamp with time zone,
    "Status" text NOT NULL,
    "CreatedBy" text,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone NOT NULL,
    "IsDeleted" boolean NOT NULL,
    "DeletedAt" timestamp with time zone,
    "DeletedBy" text,
    "ImageUrl" text,
    "ImageCaption" text,
    "TemplateParameters" text,
    "Provider" text,
    "PhoneNumberId" text,
    "TemplateSchemaSnapshot" jsonb,
    "AudienceId" uuid,
    "VideoUrl" text,
    "DocumentUrl" text,
    CONSTRAINT "PK_Campaigns" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Campaigns_Businesses_BusinessId" FOREIGN KEY ("BusinessId") REFERENCES "Businesses" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_Campaigns_CTADefinitions_CtaId" FOREIGN KEY ("CtaId") REFERENCES "CTADefinitions" ("Id"),
    CONSTRAINT "FK_Campaigns_CTAFlowConfigs_CTAFlowConfigId" FOREIGN KEY ("CTAFlowConfigId") REFERENCES "CTAFlowConfigs" ("Id") ON DELETE RESTRICT,
    CONSTRAINT "FK_Campaigns_Campaigns_SourceCampaignId" FOREIGN KEY ("SourceCampaignId") REFERENCES "Campaigns" ("Id")
);
2025-10-01 18:00:58.239 +05:30 [INF] Executed DbCommand (92ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Contacts" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "Name" character varying(100) NOT NULL,
    "PhoneNumber" character varying(20) NOT NULL,
    "Email" character varying(100),
    "LeadSource" character varying(50),
    "Tags" character varying(200),
    "LastContactedAt" timestamp with time zone,
    "NextFollowUpAt" timestamp with time zone,
    "Notes" character varying(500),
    "CreatedAt" timestamp with time zone NOT NULL,
    "LastCTAInteraction" timestamp with time zone,
    "LastCTAType" text,
    "LastClickedProductId" uuid,
    "IsAutomationPaused" boolean NOT NULL,
    "AssignedAgentId" uuid,
    "IsFavorite" boolean NOT NULL,
    "IsArchived" boolean NOT NULL,
    "Group" text,
    "IsActive" boolean NOT NULL,
    "ProfileName" text,
    "ProfileNameUpdatedAt" timestamp with time zone,
    CONSTRAINT "PK_Contacts" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Contacts_Businesses_BusinessId" FOREIGN KEY ("BusinessId") REFERENCES "Businesses" ("Id") ON DELETE CASCADE
);
2025-10-01 18:00:59.838 +05:30 [INF] Executed DbCommand (135ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Users" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid,
    "Name" text NOT NULL,
    "Email" text NOT NULL,
    "PasswordHash" text NOT NULL,
    "RoleId" uuid,
    "Status" text NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "IsDeleted" boolean NOT NULL,
    "DeletedAt" timestamp with time zone,
    "RefreshToken" text,
    "RefreshTokenExpiry" timestamp with time zone,
    CONSTRAINT "PK_Users" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Users_Businesses_BusinessId" FOREIGN KEY ("BusinessId") REFERENCES "Businesses" ("Id"),
    CONSTRAINT "FK_Users_Roles_RoleId" FOREIGN KEY ("RoleId") REFERENCES "Roles" ("Id")
);
2025-10-01 18:00:59.927 +05:30 [INF] Executed DbCommand (89ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "WhatsAppSettings" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "Provider" character varying(50) NOT NULL,
    "ApiUrl" character varying(500) NOT NULL,
    "ApiKey" character varying(1000) NOT NULL,
    "WhatsAppBusinessNumber" character varying(20),
    "PhoneNumberId" text,
    "WabaId" text,
    "SenderDisplayName" character varying(100),
    "WebhookSecret" character varying(200),
    "WebhookVerifyToken" character varying(200),
    "WebhookCallbackUrl" character varying(1000),
    "IsActive" boolean NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone,
    CONSTRAINT "PK_WhatsAppSettings" PRIMARY KEY ("Id"),
    CONSTRAINT "AK_WhatsAppSettings_BusinessId_Provider" UNIQUE ("BusinessId", "Provider"),
    CONSTRAINT "FK_WhatsAppSettings_Businesses_BusinessId" FOREIGN KEY ("BusinessId") REFERENCES "Businesses" ("Id") ON DELETE CASCADE
);
2025-10-01 18:01:00.009 +05:30 [INF] Executed DbCommand (82ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "CampaignButtons" (
    "Id" uuid NOT NULL,
    "CampaignId" uuid NOT NULL,
    "Title" text NOT NULL,
    "Type" text NOT NULL,
    "Value" text NOT NULL,
    "Position" integer NOT NULL,
    "IsFromTemplate" boolean NOT NULL,
    CONSTRAINT "PK_CampaignButtons" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_CampaignButtons_Campaigns_CampaignId" FOREIGN KEY ("CampaignId") REFERENCES "Campaigns" ("Id") ON DELETE CASCADE
);
2025-10-01 18:01:00.090 +05:30 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "CampaignFlowOverrides" (
    "Id" uuid NOT NULL,
    "CampaignId" uuid NOT NULL,
    "TemplateName" character varying(100) NOT NULL,
    "ButtonText" character varying(50) NOT NULL,
    "OverrideNextTemplate" text,
    "CreatedAt" timestamp with time zone NOT NULL,
    "CreatedBy" text,
    CONSTRAINT "PK_CampaignFlowOverrides" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_CampaignFlowOverrides_Campaigns_CampaignId" FOREIGN KEY ("CampaignId") REFERENCES "Campaigns" ("Id") ON DELETE CASCADE
);
2025-10-01 18:01:00.183 +05:30 [INF] Executed DbCommand (92ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "CampaignVariableMaps" (
    "Id" uuid NOT NULL,
    "CampaignId" uuid NOT NULL,
    "Component" character varying(64) NOT NULL,
    "Index" integer NOT NULL,
    "SourceType" character varying(32) NOT NULL,
    "SourceKey" character varying(128),
    "StaticValue" text,
    "Expression" text,
    "DefaultValue" text,
    "IsRequired" boolean NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "CreatedByUserId" uuid,
    "BusinessId" uuid NOT NULL,
    CONSTRAINT "PK_CampaignVariableMaps" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_CampaignVariableMaps_Campaigns_CampaignId" FOREIGN KEY ("CampaignId") REFERENCES "Campaigns" ("Id") ON DELETE CASCADE
);
2025-10-01 18:01:01.470 +05:30 [INF] Executed DbCommand (117ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ContactTags" (
    "Id" uuid NOT NULL,
    "ContactId" uuid NOT NULL,
    "TagId" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "AssignedAt" timestamp with time zone NOT NULL,
    "AssignedBy" text,
    CONSTRAINT "PK_ContactTags" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_ContactTags_Contacts_ContactId" FOREIGN KEY ("ContactId") REFERENCES "Contacts" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_ContactTags_Tags_TagId" FOREIGN KEY ("TagId") REFERENCES "Tags" ("Id") ON DELETE CASCADE
);
2025-10-01 18:01:01.561 +05:30 [INF] Executed DbCommand (91ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "LeadTimelines" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "ContactId" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "EventType" text NOT NULL,
    "Description" text NOT NULL,
    "Data" text,
    "ReferenceId" uuid,
    "IsSystemGenerated" boolean NOT NULL,
    "CreatedBy" text NOT NULL,
    "Source" text,
    "Category" text,
    "CreatedAt" timestamp with time zone NOT NULL,
    "CTAType" text,
    "CTASourceType" text,
    "CTASourceId" uuid,
    CONSTRAINT "PK_LeadTimelines" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_LeadTimelines_Businesses_BusinessId" FOREIGN KEY ("BusinessId") REFERENCES "Businesses" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_LeadTimelines_Contacts_ContactId" FOREIGN KEY ("ContactId") REFERENCES "Contacts" ("Id") ON DELETE CASCADE
);
2025-10-01 18:01:01.655 +05:30 [INF] Executed DbCommand (93ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "MessageLogs" (
    "Id" uuid NOT NULL,
    "MessageId" text,
    "RunId" uuid,
    "BusinessId" uuid NOT NULL,
    "RecipientNumber" text NOT NULL,
    "MessageContent" text NOT NULL,
    "MediaUrl" text,
    "Status" text NOT NULL,
    "ErrorMessage" text,
    "RawResponse" text,
    "CreatedAt" timestamp with time zone NOT NULL,
    "SentAt" timestamp with time zone,
    "ContactId" uuid,
    "CampaignId" uuid,
    "CTAFlowConfigId" uuid,
    "CTAFlowStepId" uuid,
    "FlowVersion" integer,
    "ButtonBundleJson" text,
    "IsIncoming" boolean NOT NULL,
    "RenderedBody" text,
    "RefMessageId" uuid,
    "Source" text,
    "Provider" text,
    "ProviderMessageId" text,
    "IsChargeable" boolean,
    "ConversationId" text,
    "ConversationCategory" text,
    "ConversationStartedAt" timestamp with time zone,
    "PriceAmount" numeric,
    "PriceCurrency" text,
    "MessageTime" timestamp with time zone GENERATED ALWAYS AS (COALESCE("SentAt", "CreatedAt")) STORED,
    CONSTRAINT "PK_MessageLogs" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_MessageLogs_Businesses_BusinessId" FOREIGN KEY ("BusinessId") REFERENCES "Businesses" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_MessageLogs_Campaigns_CampaignId" FOREIGN KEY ("CampaignId") REFERENCES "Campaigns" ("Id") ON DELETE RESTRICT,
    CONSTRAINT "FK_MessageLogs_Contacts_ContactId" FOREIGN KEY ("ContactId") REFERENCES "Contacts" ("Id")
);
2025-10-01 18:01:01.753 +05:30 [INF] Executed DbCommand (98ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "MessageStatusLogs" (
    "Id" uuid NOT NULL,
    "RecipientNumber" text NOT NULL,
    "CustomerProfileName" text,
    "MessageId" text,
    "Status" text NOT NULL,
    "MessageType" text NOT NULL,
    "TemplateName" text,
    "TemplateCategory" text,
    "Channel" text NOT NULL,
    "IsSessionOpen" boolean NOT NULL,
    "MetaTimestamp" bigint,
    "SentAt" timestamp with time zone,
    "DeliveredAt" timestamp with time zone,
    "ReadAt" timestamp with time zone,
    "ErrorMessage" text,
    "ErrorCode" integer,
    "RawPayload" text,
    "CampaignId" uuid,
    "BusinessId" uuid,
    "UserId" uuid,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_MessageStatusLogs" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_MessageStatusLogs_Businesses_BusinessId" FOREIGN KEY ("BusinessId") REFERENCES "Businesses" ("Id"),
    CONSTRAINT "FK_MessageStatusLogs_Campaigns_CampaignId" FOREIGN KEY ("CampaignId") REFERENCES "Campaigns" ("Id"),
    CONSTRAINT "FK_MessageStatusLogs_Users_UserId" FOREIGN KEY ("UserId") REFERENCES "Users" ("Id")
);
2025-10-01 18:01:02.945 +05:30 [INF] Executed DbCommand (131ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "UserPermissions" (
    "Id" uuid NOT NULL,
    "UserId" uuid NOT NULL,
    "PermissionId" uuid NOT NULL,
    "IsGranted" boolean NOT NULL,
    "AssignedAt" timestamp with time zone NOT NULL,
    "AssignedBy" text,
    "IsRevoked" boolean NOT NULL,
    CONSTRAINT "PK_UserPermissions" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_UserPermissions_Permissions_PermissionId" FOREIGN KEY ("PermissionId") REFERENCES "Permissions" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_UserPermissions_Users_UserId" FOREIGN KEY ("UserId") REFERENCES "Users" ("Id") ON DELETE CASCADE
);
2025-10-01 18:01:03.047 +05:30 [INF] Executed DbCommand (101ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "WhatsAppPhoneNumbers" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "Provider" character varying(50) NOT NULL,
    "PhoneNumberId" text NOT NULL,
    "WhatsAppBusinessNumber" text NOT NULL,
    "SenderDisplayName" text,
    "IsActive" boolean NOT NULL,
    "IsDefault" boolean NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone,
    CONSTRAINT "PK_WhatsAppPhoneNumbers" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_WhatsAppPhoneNumbers_WhatsAppSettings_BusinessId_Provider" FOREIGN KEY ("BusinessId", "Provider") REFERENCES "WhatsAppSettings" ("BusinessId", "Provider") ON DELETE CASCADE
);
2025-10-01 18:01:03.131 +05:30 [INF] Executed DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "AudienceMembers" (
    "Id" uuid NOT NULL,
    "AudienceId" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "ContactId" uuid,
    "PhoneRaw" character varying(64),
    "PhoneE164" character varying(32),
    "Name" character varying(160),
    "Email" character varying(256),
    "AttributesJson" jsonb,
    "IsTransientContact" boolean NOT NULL,
    "IsDeleted" boolean NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone,
    "PromotedAt" timestamp with time zone,
    "CreatedByUserId" uuid,
    CONSTRAINT "PK_AudienceMembers" PRIMARY KEY ("Id")
);
2025-10-01 18:01:03.228 +05:30 [INF] Executed DbCommand (97ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "CampaignRecipients" (
    "Id" uuid NOT NULL,
    "CampaignId" uuid NOT NULL,
    "ContactId" uuid,
    "Status" text NOT NULL,
    "SentAt" timestamp with time zone,
    "BotId" text,
    "MessagePreview" text,
    "ClickedCTA" text,
    "CategoryBrowsed" text,
    "ProductBrowsed" text,
    "UpdatedAt" timestamp with time zone NOT NULL,
    "IsAutoTagged" boolean NOT NULL,
    "BusinessId" uuid NOT NULL,
    "AudienceMemberId" uuid,
    "ResolvedParametersJson" jsonb,
    "ResolvedButtonUrlsJson" jsonb,
    "IdempotencyKey" text,
    "MaterializedAt" timestamp with time zone,
    CONSTRAINT "PK_CampaignRecipients" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_CampaignRecipients_AudienceMembers_AudienceMemberId" FOREIGN KEY ("AudienceMemberId") REFERENCES "AudienceMembers" ("Id") ON DELETE SET NULL,
    CONSTRAINT "FK_CampaignRecipients_Businesses_BusinessId" FOREIGN KEY ("BusinessId") REFERENCES "Businesses" ("Id") ON DELETE RESTRICT,
    CONSTRAINT "FK_CampaignRecipients_Campaigns_CampaignId" FOREIGN KEY ("CampaignId") REFERENCES "Campaigns" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_CampaignRecipients_Contacts_ContactId" FOREIGN KEY ("ContactId") REFERENCES "Contacts" ("Id") ON DELETE SET NULL
);
2025-10-01 18:01:04.469 +05:30 [INF] Executed DbCommand (127ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "CampaignSendLogs" (
    "Id" uuid NOT NULL,
    "RunId" uuid,
    "MessageId" text,
    "CampaignId" uuid NOT NULL,
    "ContactId" uuid,
    "RecipientId" uuid NOT NULL,
    "MessageBody" text NOT NULL,
    "TemplateId" text,
    "SendStatus" text,
    "ErrorMessage" text,
    "CreatedAt" timestamp with time zone NOT NULL,
    "CreatedBy" text,
    "SentAt" timestamp with time zone,
    "DeliveredAt" timestamp with time zone,
    "ReadAt" timestamp with time zone,
    "IpAddress" text,
    "DeviceInfo" text,
    "MacAddress" text,
    "SourceChannel" text,
    "DeviceType" text,
    "Browser" text,
    "Country" text,
    "City" text,
    "IsClicked" boolean NOT NULL,
    "ClickedAt" timestamp with time zone,
    "ClickType" text,
    "RetryCount" integer NOT NULL,
    "LastRetryAt" timestamp with time zone,
    "LastRetryStatus" text,
    "AllowRetry" boolean NOT NULL,
    "MessageLogId" uuid,
    "BusinessId" uuid NOT NULL,
    "CTAFlowConfigId" uuid,
    "CTAFlowStepId" uuid,
    "ButtonBundleJson" text,
    "UserId" uuid,
    CONSTRAINT "PK_CampaignSendLogs" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_CampaignSendLogs_CampaignRecipients_RecipientId" FOREIGN KEY ("RecipientId") REFERENCES "CampaignRecipients" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_CampaignSendLogs_Campaigns_CampaignId" FOREIGN KEY ("CampaignId") REFERENCES "Campaigns" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_CampaignSendLogs_Contacts_ContactId" FOREIGN KEY ("ContactId") REFERENCES "Contacts" ("Id") ON DELETE SET NULL,
    CONSTRAINT "FK_CampaignSendLogs_MessageLogs_MessageLogId" FOREIGN KEY ("MessageLogId") REFERENCES "MessageLogs" ("Id") ON DELETE RESTRICT,
    CONSTRAINT "FK_CampaignSendLogs_Users_UserId" FOREIGN KEY ("UserId") REFERENCES "Users" ("Id")
);
2025-10-01 18:01:04.561 +05:30 [INF] Executed DbCommand (92ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "TrackingLogs" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "ContactId" uuid,
    "ContactPhone" text,
    "SourceType" text NOT NULL,
    "SourceId" uuid,
    "CampaignId" uuid,
    "CampaignSendLogId" uuid,
    "ButtonText" text,
    "CTAType" text,
    "MessageId" text,
    "TemplateId" text,
    "MessageLogId" uuid,
    "ClickedVia" text,
    "Referrer" text,
    "ClickedAt" timestamp with time zone NOT NULL,
    "IPAddress" text,
    "DeviceType" text,
    "Browser" text,
    "Country" text,
    "City" text,
    "FollowUpSent" boolean NOT NULL,
    "LastInteractionType" text,
    "SessionId" uuid,
    "ThreadId" uuid,
    "StepId" uuid,
    CONSTRAINT "PK_TrackingLogs" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_TrackingLogs_CampaignSendLogs_CampaignSendLogId" FOREIGN KEY ("CampaignSendLogId") REFERENCES "CampaignSendLogs" ("Id"),
    CONSTRAINT "FK_TrackingLogs_Campaigns_CampaignId" FOREIGN KEY ("CampaignId") REFERENCES "Campaigns" ("Id"),
    CONSTRAINT "FK_TrackingLogs_Contacts_ContactId" FOREIGN KEY ("ContactId") REFERENCES "Contacts" ("Id"),
    CONSTRAINT "FK_TrackingLogs_MessageLogs_MessageLogId" FOREIGN KEY ("MessageLogId") REFERENCES "MessageLogs" ("Id")
);
2025-10-01 18:01:04.642 +05:30 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Audiences" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "Name" character varying(160) NOT NULL,
    "Description" character varying(512),
    "CampaignId" uuid,
    "CsvBatchId" uuid,
    "IsDeleted" boolean NOT NULL,
    "CreatedByUserId" uuid,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone,
    CONSTRAINT "PK_Audiences" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Audiences_Campaigns_CampaignId" FOREIGN KEY ("CampaignId") REFERENCES "Campaigns" ("Id") ON DELETE SET NULL
);
2025-10-01 18:01:06.183 +05:30 [INF] Executed DbCommand (99ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "CsvBatches" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "AudienceId" uuid,
    "FileName" character varying(256),
    "HeadersJson" jsonb,
    "Checksum" character varying(128),
    "RowCount" integer NOT NULL,
    "SkippedCount" integer NOT NULL,
    "Status" character varying(32) NOT NULL,
    "ErrorMessage" text,
    "CreatedByUserId" uuid,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_CsvBatches" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_CsvBatches_Audiences_AudienceId" FOREIGN KEY ("AudienceId") REFERENCES "Audiences" ("Id") ON DELETE SET NULL
);
2025-10-01 18:01:06.277 +05:30 [INF] Executed DbCommand (94ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "CsvRows" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "BatchId" uuid NOT NULL,
    "RowIndex" integer NOT NULL,
    "PhoneRaw" character varying(64),
    "PhoneE164" character varying(32),
    "RowJson" jsonb NOT NULL,
    "ValidationError" text,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_CsvRows" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_CsvRows_CsvBatches_BatchId" FOREIGN KEY ("BatchId") REFERENCES "CsvBatches" ("Id") ON DELETE CASCADE
);
2025-10-01 18:01:06.427 +05:30 [INF] Executed DbCommand (150ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('0485154c-dde5-4732-a7aa-a379c77a5b27', 'messaging.send.template', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Messaging', TRUE, 'messaging.send.template');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('0dedac5b-81c8-44c3-8cfe-76c58e29c6db', 'automation_trigger_test', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Automation', TRUE, 'automation_trigger_test');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('205b87c7-b008-4e51-9fea-798c2dc4f9c2', 'admin.whatsappsettings.view', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Admin', TRUE, 'admin.whatsappsettings.view');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('29461562-ef9c-48c0-a606-482ff57b8f95', 'messaging.send', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Messaging', TRUE, 'messaging.send');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('30000000-0000-0000-0000-000000000000', 'dashboard.view', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Dashboard', TRUE, 'dashboard.view');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('30000000-0000-0000-0000-000000000001', 'campaign.view', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Campaign', TRUE, 'campaign.view');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('30000000-0000-0000-0000-000000000002', 'campaign.create', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Campaign', TRUE, 'campaign.create');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('30000000-0000-0000-0000-000000000003', 'campaign.delete', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Campaign', TRUE, 'campaign.delete');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('30000000-0000-0000-0000-000000000004', 'product.view', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Catalog', TRUE, 'product.view');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('30000000-0000-0000-0000-000000000005', 'product.create', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Catalog', TRUE, 'product.create');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('30000000-0000-0000-0000-000000000006', 'product.delete', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Catalog', TRUE, 'product.delete');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('30000000-0000-0000-0000-000000000007', 'contacts.view', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'CRM', TRUE, 'contacts.view');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('30000000-0000-0000-0000-000000000008', 'tags.edit', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, NULL, TRUE, 'tags.edit');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('30000000-0000-0000-0000-000000000009', 'admin.business.approve', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Admin', TRUE, 'admin.business.approve');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('30000000-0000-0000-0000-000000000010', 'admin.logs.view', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, NULL, TRUE, 'admin.logs.view');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('30000000-0000-0000-0000-000000000011', 'admin.plans.view', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Admin', TRUE, 'admin.plans.view');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('30000000-0000-0000-0000-000000000012', 'admin.plans.create', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Admin', TRUE, 'admin.plans.create');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('30000000-0000-0000-0000-000000000013', 'admin.plans.update', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Admin', TRUE, 'admin.plans.update');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('30000000-0000-0000-0000-000000000014', 'admin.plans.delete', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Admin', TRUE, 'admin.plans.delete');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('636b17f2-1c54-4e26-a8cd-dbf561dcb522', 'automation.View.Template.Flow_analytics', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Automation', TRUE, 'automation.View.Template.Flow_analytics');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('6e4d3a86-7cf9-4ac2-b8a7-ed10c9f0173d', 'settings.whatsapp.view', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Settings', TRUE, 'Settings - WhatsApp View');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('74828fc0-e358-4cfc-b924-13719a0d9f50', 'inbox.menu', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Inbox', TRUE, 'inbox.menu');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('74c8034f-d9cb-4a17-8578-a9f765bd845c', 'messaging.report.view', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Messaging', TRUE, 'messaging.report.view');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('7d7cbceb-4ce7-4835-85cd-59562487298d', 'automation.View.TemplatePlusFreetext.Flow', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Automation', TRUE, 'automation.View.TemplatePlusFreetext.Flow');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('821480c6-1464-415e-bba8-066fcb4e7e63', 'automation.menu', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Automation', TRUE, 'automation.menu');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('918a61d0-5ab6-46af-a3d3-41e37b7710f9', 'automation.Create.Template.Flow', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Automation', TRUE, 'automation.Create.Template.Flow');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('93c5d5a7-f8dd-460a-8c7b-e3788440ba3a', 'automation.Create.TemplatePlusFreetext.Flow', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Automation', TRUE, 'automation.Create.TemplatePlusFreetext.Flow');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('974af1f9-3caa-4857-a1a7-48462c389332', 'messaging.send.text', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Messaging', TRUE, 'messaging.send.text');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('98572fe7-d142-475a-b990-f248641809e2', 'settings.profile.view', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Settings', TRUE, 'settings.profile.view');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('9ae90cfe-3fea-4307-b024-3083c2728148', 'automation.View.Template.Flow', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Automation', TRUE, 'automation.View.Template.Flow');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('ad36cdb7-5221-448b-a6a6-c35c9f88d021', 'inbox.view', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Inbox', TRUE, 'inbox.view');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('adfa8490-9705-4a36-a86e-d5bff7ddc220', 'automation.View.TemplatePlusFreeText.Flow_analytics', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Automation', TRUE, 'automation.View.TemplatePlusFreeText.Flow_analytics');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('bbc5202a-eac9-40bb-aa78-176c677dbf5b', 'messaging.whatsappsettings.view', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Messaging', TRUE, 'messaging.whatsappsettings.view');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('c819f1bd-422d-4609-916c-cc185fe44ab0', 'messaging.status.view', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Messaging', TRUE, 'messaging.status.view');
INSERT INTO "Permissions" ("Id", "Code", "CreatedAt", "Description", "Group", "IsActive", "Name")
VALUES ('eecd0fac-223c-4dba-9fa1-2a6e973d61d1', 'messaging.inbox.view', TIMESTAMPTZ '2025-09-13T00:00:00Z', NULL, 'Messaging', TRUE, 'messaging.inbox.view');
2025-10-01 18:01:09.064 +05:30 [INF] Executed DbCommand (90ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Plans" ("Id", "Code", "CreatedAt", "Description", "IsActive", "Name")
VALUES ('5f9f5de1-a0b2-48ba-b03d-77b27345613f', 'basic', TIMESTAMPTZ '2025-01-01T00:00:00Z', 'Default free plan', TRUE, 'Basic');
2025-10-01 18:01:09.149 +05:30 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Roles" ("Id", "CreatedAt", "Description", "IsActive", "IsSystemDefined", "Name")
VALUES ('00000000-0000-0000-0000-000000000001', TIMESTAMPTZ '2025-01-01T00:00:00Z', 'Super Admin', TRUE, FALSE, 'admin');
INSERT INTO "Roles" ("Id", "CreatedAt", "Description", "IsActive", "IsSystemDefined", "Name")
VALUES ('00000000-0000-0000-0000-000000000002', TIMESTAMPTZ '2025-01-01T00:00:00Z', 'Business Partner', TRUE, FALSE, 'partner');
INSERT INTO "Roles" ("Id", "CreatedAt", "Description", "IsActive", "IsSystemDefined", "Name")
VALUES ('00000000-0000-0000-0000-000000000003', TIMESTAMPTZ '2025-01-01T00:00:00Z', 'Reseller Partner', TRUE, FALSE, 'reseller');
INSERT INTO "Roles" ("Id", "CreatedAt", "Description", "IsActive", "IsSystemDefined", "Name")
VALUES ('00000000-0000-0000-0000-000000000004', TIMESTAMPTZ '2025-01-01T00:00:00Z', 'Business Owner', TRUE, FALSE, 'business');
INSERT INTO "Roles" ("Id", "CreatedAt", "Description", "IsActive", "IsSystemDefined", "Name")
VALUES ('00000000-0000-0000-0000-000000000005', TIMESTAMPTZ '2025-01-01T00:00:00Z', 'Staff', TRUE, FALSE, 'staff');
2025-10-01 18:01:09.238 +05:30 [INF] Executed DbCommand (89ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Id", "BusinessId", "CreatedAt", "DeletedAt", "Email", "IsDeleted", "Name", "PasswordHash", "RefreshToken", "RefreshTokenExpiry", "RoleId", "Status")
VALUES ('62858aa2-3a54-4fd5-8696-c343d9af7634', NULL, TIMESTAMPTZ '2025-01-01T00:00:00Z', NULL, 'admin@xbytechat.com', FALSE, 'Super Admin', 'JAvlGPq9JyTdtvBO6x2llnRI1+gxwIyPqCKAn3THIKk=', NULL, NULL, '00000000-0000-0000-0000-000000000001', 'active');
2025-10-01 18:01:09.566 +05:30 [INF] Executed DbCommand (94ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX ix_audmember_contact ON "AudienceMembers" ("ContactId");
2025-10-01 18:01:09.645 +05:30 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX ux_audmember_audience_phone ON "AudienceMembers" ("AudienceId", "PhoneE164");
2025-10-01 18:01:09.726 +05:30 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX ix_audiences_biz_deleted ON "Audiences" ("BusinessId", "IsDeleted");
2025-10-01 18:01:09.816 +05:30 [INF] Executed DbCommand (90ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Audiences_BusinessId_CampaignId" ON "Audiences" ("BusinessId", "CampaignId");
2025-10-01 18:01:09.904 +05:30 [INF] Executed DbCommand (88ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Audiences_BusinessId_CsvBatchId" ON "Audiences" ("BusinessId", "CsvBatchId");
2025-10-01 18:01:09.995 +05:30 [INF] Executed DbCommand (91ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Audiences_CampaignId" ON "Audiences" ("CampaignId");
2025-10-01 18:01:10.078 +05:30 [INF] Executed DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Audiences_CsvBatchId" ON "Audiences" ("CsvBatchId");
2025-10-01 18:01:10.181 +05:30 [INF] Executed DbCommand (103ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_AutoReplyFlowEdges_FlowId" ON "AutoReplyFlowEdges" ("FlowId");
2025-10-01 18:01:10.258 +05:30 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_AutoReplyFlowNodes_FlowId" ON "AutoReplyFlowNodes" ("FlowId");
2025-10-01 18:01:10.335 +05:30 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_AutoReplyRules_FlowId" ON "AutoReplyRules" ("FlowId");
2025-10-01 18:01:10.413 +05:30 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Businesses_PlanId" ON "Businesses" ("PlanId");
2025-10-01 18:01:10.490 +05:30 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_BusinessPlanInfos_BusinessId" ON "BusinessPlanInfos" ("BusinessId");
2025-10-01 18:01:10.590 +05:30 [INF] Executed DbCommand (100ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CampaignButtons_CampaignId" ON "CampaignButtons" ("CampaignId");
2025-10-01 18:01:10.669 +05:30 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_CampaignClickDailyAgg_CampaignId_Day_ButtonIndex" ON "CampaignClickDailyAgg" ("CampaignId", "Day", "ButtonIndex");
2025-10-01 18:01:10.761 +05:30 [INF] Executed DbCommand (91ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CampaignClickLogs_CampaignId_ButtonIndex" ON "CampaignClickLogs" ("CampaignId", "ButtonIndex");
2025-10-01 18:01:10.884 +05:30 [INF] Executed DbCommand (105ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CampaignClickLogs_CampaignId_ClickType_ClickedAt" ON "CampaignClickLogs" ("CampaignId", "ClickType", "ClickedAt");
2025-10-01 18:01:10.964 +05:30 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CampaignClickLogs_CampaignId_ContactId" ON "CampaignClickLogs" ("CampaignId", "ContactId");
2025-10-01 18:01:11.060 +05:30 [INF] Executed DbCommand (96ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CampaignFlowOverrides_CampaignId" ON "CampaignFlowOverrides" ("CampaignId");
2025-10-01 18:01:11.164 +05:30 [INF] Executed DbCommand (104ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CampaignRecipients_AudienceMemberId" ON "CampaignRecipients" ("AudienceMemberId");
2025-10-01 18:01:11.274 +05:30 [INF] Executed DbCommand (110ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CampaignRecipients_BusinessId" ON "CampaignRecipients" ("BusinessId");
2025-10-01 18:01:11.365 +05:30 [INF] Executed DbCommand (91ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CampaignRecipients_ContactId" ON "CampaignRecipients" ("ContactId");
2025-10-01 18:01:11.444 +05:30 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX ix_campaignrecipients_idempotency ON "CampaignRecipients" ("IdempotencyKey");
2025-10-01 18:01:11.534 +05:30 [INF] Executed DbCommand (90ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX ix_recipients_campaign_contact ON "CampaignRecipients" ("CampaignId", "ContactId");
2025-10-01 18:01:11.611 +05:30 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Campaigns_BusinessId" ON "Campaigns" ("BusinessId");
2025-10-01 18:01:11.687 +05:30 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Campaigns_CTAFlowConfigId" ON "Campaigns" ("CTAFlowConfigId");
2025-10-01 18:01:11.763 +05:30 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Campaigns_CtaId" ON "Campaigns" ("CtaId");
2025-10-01 18:01:11.839 +05:30 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Campaigns_SourceCampaignId" ON "Campaigns" ("SourceCampaignId");
2025-10-01 18:01:11.918 +05:30 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CampaignSendLogs_Business_MessageId" ON "CampaignSendLogs" ("BusinessId", "MessageId");
2025-10-01 18:01:12.024 +05:30 [INF] Executed DbCommand (106ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CampaignSendLogs_CampaignId" ON "CampaignSendLogs" ("CampaignId");
2025-10-01 18:01:12.099 +05:30 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CampaignSendLogs_ContactId" ON "CampaignSendLogs" ("ContactId");
2025-10-01 18:01:12.177 +05:30 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CampaignSendLogs_MessageId" ON "CampaignSendLogs" ("MessageId");
2025-10-01 18:01:12.256 +05:30 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CampaignSendLogs_MessageLogId" ON "CampaignSendLogs" ("MessageLogId");
2025-10-01 18:01:12.334 +05:30 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CampaignSendLogs_RecipientId" ON "CampaignSendLogs" ("RecipientId");
2025-10-01 18:01:12.411 +05:30 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CampaignSendLogs_RunId" ON "CampaignSendLogs" ("RunId");
2025-10-01 18:01:12.526 +05:30 [INF] Executed DbCommand (115ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CampaignSendLogs_UserId" ON "CampaignSendLogs" ("UserId");
2025-10-01 18:01:12.637 +05:30 [INF] Executed DbCommand (111ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CampaignVariableMaps_CampaignId" ON "CampaignVariableMaps" ("CampaignId");
2025-10-01 18:01:12.769 +05:30 [INF] Executed DbCommand (132ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_ContactReads_ContactId_UserId" ON "ContactReads" ("ContactId", "UserId");
2025-10-01 18:01:12.865 +05:30 [INF] Executed DbCommand (96ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX ux_contactreads_biz_user_contact ON "ContactReads" ("BusinessId", "UserId", "ContactId");
2025-10-01 18:01:12.942 +05:30 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Contacts_BusinessId_PhoneNumber" ON "Contacts" ("BusinessId", "PhoneNumber");
2025-10-01 18:01:13.022 +05:30 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_ContactTags_ContactId" ON "ContactTags" ("ContactId");
2025-10-01 18:01:13.099 +05:30 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_ContactTags_TagId" ON "ContactTags" ("TagId");
2025-10-01 18:01:13.176 +05:30 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX ix_csvbatch_biz_created ON "CsvBatches" ("BusinessId", "CreatedAt");
2025-10-01 18:01:13.257 +05:30 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX ix_csvbatch_checksum ON "CsvBatches" ("Checksum");
2025-10-01 18:01:13.335 +05:30 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CsvBatches_AudienceId" ON "CsvBatches" ("AudienceId");
2025-10-01 18:01:13.413 +05:30 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CsvBatches_BusinessId_AudienceId" ON "CsvBatches" ("BusinessId", "AudienceId");
2025-10-01 18:01:13.488 +05:30 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX ix_csvrow_phone ON "CsvRows" ("PhoneE164");
2025-10-01 18:01:13.583 +05:30 [INF] Executed DbCommand (96ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CsvRows_BusinessId_BatchId" ON "CsvRows" ("BusinessId", "BatchId");
2025-10-01 18:01:13.658 +05:30 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX ux_csvrow_batch_rowidx ON "CsvRows" ("BatchId", "RowIndex");
2025-10-01 18:01:13.734 +05:30 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX ix_ctaflowconfigs_biz_active_name ON "CTAFlowConfigs" ("BusinessId", "IsActive", "FlowName");
2025-10-01 18:01:13.840 +05:30 [INF] Executed DbCommand (105ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_CTAFlowConfigs_BusinessId_FlowName_IsActive" ON "CTAFlowConfigs" ("BusinessId", "FlowName", "IsActive");
2025-10-01 18:01:13.943 +05:30 [INF] Executed DbCommand (103ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CTAFlowSteps_CTAFlowConfigId" ON "CTAFlowSteps" ("CTAFlowConfigId");
2025-10-01 18:01:14.021 +05:30 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_FeatureAccess_BusinessId_FeatureName" ON "FeatureAccess" ("BusinessId", "FeatureName");
2025-10-01 18:01:14.101 +05:30 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_FlowButtonLinks_CTAFlowStepId" ON "FlowButtonLinks" ("CTAFlowStepId");
2025-10-01 18:01:14.181 +05:30 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_LeadTimelines_BusinessId" ON "LeadTimelines" ("BusinessId");
2025-10-01 18:01:14.267 +05:30 [INF] Executed DbCommand (86ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_LeadTimelines_ContactId" ON "LeadTimelines" ("ContactId");
2025-10-01 18:01:14.346 +05:30 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_MessageLogs_Business_MessageId" ON "MessageLogs" ("BusinessId", "MessageId");
2025-10-01 18:01:14.425 +05:30 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_MessageLogs_Business_Recipient" ON "MessageLogs" ("BusinessId", "RecipientNumber");
2025-10-01 18:01:14.504 +05:30 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_MessageLogs_CampaignId" ON "MessageLogs" ("CampaignId");
2025-10-01 18:01:14.584 +05:30 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_MessageLogs_ContactId" ON "MessageLogs" ("ContactId");
2025-10-01 18:01:14.669 +05:30 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_MessageLogs_MessageId" ON "MessageLogs" ("MessageId");
2025-10-01 18:01:14.746 +05:30 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_MessageLogs_RunId" ON "MessageLogs" ("RunId");
2025-10-01 18:01:14.824 +05:30 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX ix_msglogs_biz_in_contact_msgtime ON "MessageLogs" ("BusinessId", "IsIncoming", "ContactId", "MessageTime");
2025-10-01 18:01:14.900 +05:30 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_MessageStatusLogs_BusinessId" ON "MessageStatusLogs" ("BusinessId");
2025-10-01 18:01:14.995 +05:30 [INF] Executed DbCommand (95ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_MessageStatusLogs_CampaignId" ON "MessageStatusLogs" ("CampaignId");
2025-10-01 18:01:15.117 +05:30 [INF] Executed DbCommand (121ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_MessageStatusLogs_UserId" ON "MessageStatusLogs" ("UserId");
2025-10-01 18:01:15.203 +05:30 [INF] Executed DbCommand (86ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_OutboundCampaignJobs_CampaignId" ON "OutboundCampaignJobs" ("CampaignId");
2025-10-01 18:01:15.335 +05:30 [INF] Executed DbCommand (132ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_OutboundCampaignJobs_Status_NextAttemptAt" ON "OutboundCampaignJobs" ("Status", "NextAttemptAt");
2025-10-01 18:01:15.412 +05:30 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_PlanPermissions_PermissionId" ON "PlanPermissions" ("PermissionId");
2025-10-01 18:01:15.533 +05:30 [INF] Executed DbCommand (121ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_PlanPermissions_PlanId" ON "PlanPermissions" ("PlanId");
2025-10-01 18:01:15.746 +05:30 [INF] Executed DbCommand (213ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_QuickReplies_BusinessId_OwnerUserId_IsActive" ON "QuickReplies" ("BusinessId", "OwnerUserId", "IsActive");
2025-10-01 18:01:15.825 +05:30 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_QuickReplies_BusinessId_Scope_IsActive" ON "QuickReplies" ("BusinessId", "Scope", "IsActive");
2025-10-01 18:01:15.916 +05:30 [INF] Executed DbCommand (91ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_QuickReplies_UpdatedAt" ON "QuickReplies" ("UpdatedAt");
2025-10-01 18:01:16.005 +05:30 [INF] Executed DbCommand (88ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_RolePermissions_PermissionId" ON "RolePermissions" ("PermissionId");
2025-10-01 18:01:16.085 +05:30 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_RolePermissions_RoleId" ON "RolePermissions" ("RoleId");
2025-10-01 18:01:16.164 +05:30 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_TrackingLogs_CampaignId" ON "TrackingLogs" ("CampaignId");
2025-10-01 18:01:16.239 +05:30 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_TrackingLogs_CampaignSendLogId" ON "TrackingLogs" ("CampaignSendLogId");
2025-10-01 18:01:16.333 +05:30 [INF] Executed DbCommand (94ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_TrackingLogs_ContactId" ON "TrackingLogs" ("ContactId");
2025-10-01 18:01:16.409 +05:30 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_TrackingLogs_MessageLogId" ON "TrackingLogs" ("MessageLogId");
2025-10-01 18:01:16.514 +05:30 [INF] Executed DbCommand (105ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_UserPermissions_PermissionId" ON "UserPermissions" ("PermissionId");
2025-10-01 18:01:16.596 +05:30 [INF] Executed DbCommand (82ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_UserPermissions_UserId" ON "UserPermissions" ("UserId");
2025-10-01 18:01:16.673 +05:30 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Users_BusinessId" ON "Users" ("BusinessId");
2025-10-01 18:01:16.747 +05:30 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Users_RoleId" ON "Users" ("RoleId");
2025-10-01 18:01:16.831 +05:30 [INF] Executed DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "UX_WhatsappPhoneNumbers_Bus_Prov_PhoneId" ON "WhatsAppPhoneNumbers" ("BusinessId", "Provider", "PhoneNumberId");
2025-10-01 18:01:16.910 +05:30 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_WhatsAppSettings_Business_Provider_IsActive" ON "WhatsAppSettings" ("BusinessId", "Provider", "IsActive");
2025-10-01 18:01:17.007 +05:30 [INF] Executed DbCommand (97ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_WhatsAppSettings_Provider_BusinessNumber" ON "WhatsAppSettings" ("Provider", "WhatsAppBusinessNumber");
2025-10-01 18:01:17.086 +05:30 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_WhatsAppSettings_Provider_CallbackUrl" ON "WhatsAppSettings" ("Provider", "WebhookCallbackUrl");
2025-10-01 18:01:17.164 +05:30 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_WhatsAppSettings_Provider_PhoneNumberId" ON "WhatsAppSettings" ("Provider", "PhoneNumberId");
2025-10-01 18:01:17.247 +05:30 [INF] Executed DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_WhatsAppSettings_Provider_WabaId" ON "WhatsAppSettings" ("Provider", "WabaId");
2025-10-01 18:01:17.325 +05:30 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_WhatsAppTemplates_BusinessId_Name" ON "WhatsAppTemplates" ("BusinessId", "Name");
2025-10-01 18:01:17.403 +05:30 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_WhatsAppTemplates_BusinessId_Name_Language_Provider" ON "WhatsAppTemplates" ("BusinessId", "Name", "Language", "Provider");
2025-10-01 18:01:17.477 +05:30 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_WhatsAppTemplates_BusinessId_Provider" ON "WhatsAppTemplates" ("BusinessId", "Provider");
2025-10-01 18:01:17.681 +05:30 [INF] Executed DbCommand (204ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "AudienceMembers" ADD CONSTRAINT "FK_AudienceMembers_Audiences_AudienceId" FOREIGN KEY ("AudienceId") REFERENCES "Audiences" ("Id") ON DELETE CASCADE;
2025-10-01 18:01:17.805 +05:30 [INF] Executed DbCommand (124ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Audiences" ADD CONSTRAINT "FK_Audiences_CsvBatches_CsvBatchId" FOREIGN KEY ("CsvBatchId") REFERENCES "CsvBatches" ("Id") ON DELETE SET NULL;
2025-10-01 18:01:17.893 +05:30 [INF] Executed DbCommand (88ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250928044553_Initial', '8.0.18');
2025-10-01 18:01:17.987 +05:30 [INF] Applying migration '20250928180718_AddAlwaysSendToCTAFlowSteps'.
2025-10-01 18:01:18.116 +05:30 [INF] Executed DbCommand (92ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250928180718_AddAlwaysSendToCTAFlowSteps', '8.0.18');
2025-10-01 18:01:18.209 +05:30 [INF] Applying migration '20250929043613_AddBillingIndexes'.
2025-10-01 18:01:18.343 +05:30 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER INDEX "IX_WhatsAppSettings_Business_Provider_IsActive" RENAME TO "IX_WhatsAppSettings_BizProviderActive";
2025-10-01 18:01:18.419 +05:30 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER INDEX "UX_WhatsappPhoneNumbers_Bus_Prov_PhoneId" RENAME TO "IX_WhatsAppPhoneNumbers_BizProviderPhone";
2025-10-01 18:01:18.503 +05:30 [INF] Executed DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER INDEX "IX_CampaignSendLogs_Business_MessageId" RENAME TO "IX_CampaignSendLogs_BizMessage";
2025-10-01 18:01:18.596 +05:30 [INF] Executed DbCommand (93ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Billing_BizConversation" ON "ProviderBillingEvents" ("BusinessId", "ConversationId") WHERE "ConversationId" IS NOT NULL;
2025-10-01 18:01:18.687 +05:30 [INF] Executed DbCommand (91ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Billing_BizEventTime" ON "ProviderBillingEvents" ("BusinessId", "EventType", "OccurredAt");
2025-10-01 18:01:18.774 +05:30 [INF] Executed DbCommand (87ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Billing_BizProviderMessage" ON "ProviderBillingEvents" ("BusinessId", "ProviderMessageId") WHERE "ProviderMessageId" IS NOT NULL;
2025-10-01 18:01:18.847 +05:30 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "UX_ProviderBillingEvents_UniqueEvent" ON "ProviderBillingEvents" ("BusinessId", "Provider", "ProviderMessageId", "EventType") WHERE "ProviderMessageId" IS NOT NULL;
2025-10-01 18:01:18.933 +05:30 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_MessageLogs_BizConversation" ON "MessageLogs" ("BusinessId", "ConversationId") WHERE "ConversationId" IS NOT NULL;
2025-10-01 18:01:19.102 +05:30 [INF] Executed DbCommand (169ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_MessageLogs_BizCreatedAt" ON "MessageLogs" ("BusinessId", "CreatedAt");
2025-10-01 18:01:19.182 +05:30 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_MessageLogs_BizProviderMessage" ON "MessageLogs" ("BusinessId", "ProviderMessageId") WHERE "ProviderMessageId" IS NOT NULL;
2025-10-01 18:01:19.262 +05:30 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CampaignSendLogs_StatusTime" ON "CampaignSendLogs" ("BusinessId", "SendStatus", "SentAt");
2025-10-01 18:01:19.339 +05:30 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250929043613_AddBillingIndexes', '8.0.18');
2025-10-01 18:01:19.433 +05:30 [INF] Applying migration '20250929044940_AddBillingIndexesUpdate'.
2025-10-01 18:01:19.543 +05:30 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250929044940_AddBillingIndexesUpdate', '8.0.18');
2025-10-01 18:01:19.620 +05:30 [INF] Applying migration '20250929054429_UpdateAtHostingerSever'.
2025-10-01 18:01:19.741 +05:30 [INF] Executed DbCommand (88ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER INDEX "IX_CampaignSendLogs_BizMessage" RENAME TO "IX_CampaignSendLogs_Business_MessageId";
2025-10-01 18:01:19.824 +05:30 [INF] Executed DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250929054429_UpdateAtHostingerSever', '8.0.18');
2025-10-01 18:01:19.903 +05:30 [INF] Applying migration '20250930081420_AddApiKeys'.
2025-10-01 18:01:20.037 +05:30 [INF] Executed DbCommand (96ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "ApiKeys" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "Name" text NOT NULL,
    "Prefix" text NOT NULL,
    "SecretHash" text NOT NULL,
    "Scopes" character varying(512) NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "ExpiresAt" timestamp with time zone,
    "LastUsedAt" timestamp with time zone,
    "IsRevoked" boolean NOT NULL,
    "CreatedBy" text,
    "Notes" text,
    CONSTRAINT "PK_ApiKeys" PRIMARY KEY ("Id")
);
2025-10-01 18:01:20.118 +05:30 [INF] Executed DbCommand (82ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_ApiKeys_Prefix" ON "ApiKeys" ("Prefix");
2025-10-01 18:01:20.201 +05:30 [INF] Executed DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250930081420_AddApiKeys', '8.0.18');
2025-10-01 18:01:20.316 +05:30 [INF] Applying migration '20251001121508_freshDeplyafterWebhookConfigs077'.
2025-10-01 18:01:20.436 +05:30 [INF] Executed DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "CustomerWebhookConfigs" (
    "Id" uuid NOT NULL,
    "BusinessId" uuid NOT NULL,
    "Url" character varying(1024) NOT NULL,
    "BearerToken" character varying(2048),
    "IsActive" boolean NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone,
    CONSTRAINT "PK_CustomerWebhookConfigs" PRIMARY KEY ("Id")
);
2025-10-01 18:01:20.513 +05:30 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20251001121508_freshDeplyafterWebhookConfigs077', '8.0.18');
2025-10-01 18:01:20.601 +05:30 [INF] Applying migration '20251001122934_InitialMigration'.
2025-10-01 18:01:20.722 +05:30 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20251001122934_InitialMigration', '8.0.18');
2025-10-01 18:03:25.182 +05:30 [INF] User profile is available. Using 'C:\Users\sunde\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-01 18:03:25.227 +05:30 [INF] 🚀 Webhook Queue Worker started.
2025-10-01 18:03:25.245 +05:30 [INF] 🧹 FailedWebhookLogCleanupService started.
2025-10-01 18:03:26.438 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-10-01 18:03:26.979 +05:30 [WRN] The query uses the 'First'/'FirstOrDefault' operator without 'OrderBy' and filter operators. This may lead to unpredictable results.
2025-10-01 18:03:26.995 +05:30 [INF] ClickLogWorker started
2025-10-01 18:03:27.177 +05:30 [INF] Now listening on: http://localhost:7113
2025-10-01 18:03:27.178 +05:30 [INF] Now listening on: http://localhost:5295
2025-10-01 18:03:27.179 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-01 18:03:27.180 +05:30 [INF] Hosting environment: Development
2025-10-01 18:03:27.181 +05:30 [INF] Content root path: D:\xbytechat\xbytechat-api\xbytechat-api
2025-10-01 18:03:28.065 +05:30 [INF] ClickLogWorker stopped
2025-10-01 18:03:28.245 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/index.html - null null
2025-10-01 18:03:28.557 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/index.html - 200 null text/html;charset=utf-8 322.4507ms
2025-10-01 18:03:28.594 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - null null
2025-10-01 18:03:28.609 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 14.558ms
2025-10-01 18:03:28.682 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/_vs/browserLink - null null
2025-10-01 18:03:28.766 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/_vs/browserLink - 200 null text/javascript; charset=UTF-8 83.3517ms
2025-10-01 18:03:29.015 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - null null
2025-10-01 18:03:29.620 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:7113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 604.5471ms
2025-10-01 18:03:35.387 +05:30 [INF] Executed DbCommand (102ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT w."Id", w."AutoCleanupEnabled", w."LastCleanupAt"
FROM "WebhookSettings" AS w
LIMIT 1
2025-10-01 18:03:35.420 +05:30 [INF] Executed DbCommand (135ms) [Parameters=[@__cutoff_0='2025-09-24T12:33:25.3486969Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."ErrorMessage", f."FailureType", f."RawJson", f."SourceModule"
FROM "FailedWebhookLogs" AS f
WHERE f."CreatedAt" < @__cutoff_0
2025-10-01 18:03:37.131 +05:30 [INF] Executed DbCommand (96ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT DISTINCT w."BusinessId"
FROM "WhatsAppSettings" AS w
WHERE w."IsActive"
2025-10-01 18:03:37.137 +05:30 [INF] TemplateSyncWorker: no active WhatsApp settings found.
2025-10-01 18:03:37.138 +05:30 [INF] TemplateSyncWorker: sweep finished in 125 ms; processed=0; next run ~"2025-10-01T18:33:37.0131047Z"
2025-10-01 18:03:40.165 +05:30 [INF] Executed DbCommand (84ms) [Parameters=[@__now_0='2025-10-01T12:33:32.0147241+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:03:50.320 +05:30 [INF] Executed DbCommand (134ms) [Parameters=[@__now_0='2025-10-01T12:33:50.1830536+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:04:00.575 +05:30 [INF] Executed DbCommand (245ms) [Parameters=[@__now_0='2025-10-01T12:34:00.3289801+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:04:10.673 +05:30 [INF] Executed DbCommand (90ms) [Parameters=[@__now_0='2025-10-01T12:34:10.5831660+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:04:20.794 +05:30 [INF] Executed DbCommand (116ms) [Parameters=[@__now_0='2025-10-01T12:34:20.6778294+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:04:30.897 +05:30 [INF] Executed DbCommand (93ms) [Parameters=[@__now_0='2025-10-01T12:34:30.8029606+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:04:40.980 +05:30 [INF] Executed DbCommand (84ms) [Parameters=[@__now_0='2025-10-01T12:34:40.8959736+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:04:51.075 +05:30 [INF] Executed DbCommand (87ms) [Parameters=[@__now_0='2025-10-01T12:34:50.9873671+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:05:01.150 +05:30 [INF] Executed DbCommand (70ms) [Parameters=[@__now_0='2025-10-01T12:35:01.0800300+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:05:11.240 +05:30 [INF] Executed DbCommand (84ms) [Parameters=[@__now_0='2025-10-01T12:35:11.1557886+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:05:21.338 +05:30 [INF] Executed DbCommand (91ms) [Parameters=[@__now_0='2025-10-01T12:35:21.2460383+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:05:31.427 +05:30 [INF] Executed DbCommand (80ms) [Parameters=[@__now_0='2025-10-01T12:35:31.3461449+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:05:41.507 +05:30 [INF] Executed DbCommand (75ms) [Parameters=[@__now_0='2025-10-01T12:35:41.4314959+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:05:51.611 +05:30 [INF] Executed DbCommand (92ms) [Parameters=[@__now_0='2025-10-01T12:35:51.5187924+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:06:01.698 +05:30 [INF] Executed DbCommand (82ms) [Parameters=[@__now_0='2025-10-01T12:36:01.6155355+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:06:11.797 +05:30 [INF] Executed DbCommand (93ms) [Parameters=[@__now_0='2025-10-01T12:36:11.7034553+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:06:21.891 +05:30 [INF] Executed DbCommand (79ms) [Parameters=[@__now_0='2025-10-01T12:36:21.8120843+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:06:31.998 +05:30 [INF] Executed DbCommand (92ms) [Parameters=[@__now_0='2025-10-01T12:36:31.9061655+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:06:42.084 +05:30 [INF] Executed DbCommand (71ms) [Parameters=[@__now_0='2025-10-01T12:36:42.0130882+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:06:52.178 +05:30 [INF] Executed DbCommand (92ms) [Parameters=[@__now_0='2025-10-01T12:36:52.0859251+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:07:02.247 +05:30 [INF] Executed DbCommand (64ms) [Parameters=[@__now_0='2025-10-01T12:37:02.1825641+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:07:12.427 +05:30 [INF] Executed DbCommand (172ms) [Parameters=[@__now_0='2025-10-01T12:37:12.2547731+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:07:22.567 +05:30 [INF] Executed DbCommand (133ms) [Parameters=[@__now_0='2025-10-01T12:37:22.4342897+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:07:32.659 +05:30 [INF] Executed DbCommand (89ms) [Parameters=[@__now_0='2025-10-01T12:37:32.5704458+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:07:42.744 +05:30 [INF] Executed DbCommand (81ms) [Parameters=[@__now_0='2025-10-01T12:37:42.6626995+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:07:52.865 +05:30 [INF] Executed DbCommand (106ms) [Parameters=[@__now_0='2025-10-01T12:37:52.7594720+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:08:02.965 +05:30 [INF] Executed DbCommand (82ms) [Parameters=[@__now_0='2025-10-01T12:38:02.8829002+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:08:13.064 +05:30 [INF] Executed DbCommand (88ms) [Parameters=[@__now_0='2025-10-01T12:38:12.9747886+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:08:23.173 +05:30 [INF] Executed DbCommand (101ms) [Parameters=[@__now_0='2025-10-01T12:38:23.0711534+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:08:33.274 +05:30 [INF] Executed DbCommand (99ms) [Parameters=[@__now_0='2025-10-01T12:38:33.1738812+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:08:51.364 +05:30 [INF] Executed DbCommand (85ms) [Parameters=[@__now_0='2025-10-01T12:38:43.2824711+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:09:01.484 +05:30 [INF] Executed DbCommand (103ms) [Parameters=[@__now_0='2025-10-01T12:39:01.3806020+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:09:11.554 +05:30 [INF] Executed DbCommand (57ms) [Parameters=[@__now_0='2025-10-01T12:39:11.4962427+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:09:21.645 +05:30 [INF] Executed DbCommand (91ms) [Parameters=[@__now_0='2025-10-01T12:39:21.5533128+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:09:31.740 +05:30 [INF] Executed DbCommand (84ms) [Parameters=[@__now_0='2025-10-01T12:39:31.6554866+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:09:41.851 +05:30 [INF] Executed DbCommand (97ms) [Parameters=[@__now_0='2025-10-01T12:39:41.7528984+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:09:51.933 +05:30 [INF] Executed DbCommand (70ms) [Parameters=[@__now_0='2025-10-01T12:39:51.8628579+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:10:02.033 +05:30 [INF] Executed DbCommand (85ms) [Parameters=[@__now_0='2025-10-01T12:40:01.9475159+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:10:12.111 +05:30 [INF] Executed DbCommand (66ms) [Parameters=[@__now_0='2025-10-01T12:40:12.0450576+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:10:22.194 +05:30 [INF] Executed DbCommand (76ms) [Parameters=[@__now_0='2025-10-01T12:40:22.1183576+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:10:32.302 +05:30 [INF] Executed DbCommand (91ms) [Parameters=[@__now_0='2025-10-01T12:40:32.2108592+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:10:42.393 +05:30 [INF] Executed DbCommand (85ms) [Parameters=[@__now_0='2025-10-01T12:40:42.3068647+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:10:52.491 +05:30 [INF] Executed DbCommand (93ms) [Parameters=[@__now_0='2025-10-01T12:40:52.3985298+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:11:02.569 +05:30 [INF] Executed DbCommand (76ms) [Parameters=[@__now_0='2025-10-01T12:41:02.4923173+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:11:12.651 +05:30 [INF] Executed DbCommand (66ms) [Parameters=[@__now_0='2025-10-01T12:41:12.5842954+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:11:22.752 +05:30 [INF] Executed DbCommand (83ms) [Parameters=[@__now_0='2025-10-01T12:41:22.6681150+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:11:32.843 +05:30 [INF] Executed DbCommand (77ms) [Parameters=[@__now_0='2025-10-01T12:41:32.7657102+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:11:42.911 +05:30 [INF] Executed DbCommand (67ms) [Parameters=[@__now_0='2025-10-01T12:41:42.8431397+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:11:53.031 +05:30 [INF] Executed DbCommand (102ms) [Parameters=[@__now_0='2025-10-01T12:41:52.9278099+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:12:03.125 +05:30 [INF] Executed DbCommand (82ms) [Parameters=[@__now_0='2025-10-01T12:42:03.0420012+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:12:13.199 +05:30 [INF] Executed DbCommand (84ms) [Parameters=[@__now_0='2025-10-01T12:42:13.1152450+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:12:23.283 +05:30 [INF] Executed DbCommand (75ms) [Parameters=[@__now_0='2025-10-01T12:42:23.2076309+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:12:33.383 +05:30 [INF] Executed DbCommand (90ms) [Parameters=[@__now_0='2025-10-01T12:42:33.2918939+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:12:43.483 +05:30 [INF] Executed DbCommand (91ms) [Parameters=[@__now_0='2025-10-01T12:42:43.3911032+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:12:53.578 +05:30 [INF] Executed DbCommand (91ms) [Parameters=[@__now_0='2025-10-01T12:42:53.4867287+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:13:03.677 +05:30 [INF] Executed DbCommand (93ms) [Parameters=[@__now_0='2025-10-01T12:43:03.5833631+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:13:13.763 +05:30 [INF] Executed DbCommand (77ms) [Parameters=[@__now_0='2025-10-01T12:43:13.6854549+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:13:23.867 +05:30 [INF] Executed DbCommand (94ms) [Parameters=[@__now_0='2025-10-01T12:43:23.7732025+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:13:33.965 +05:30 [INF] Executed DbCommand (88ms) [Parameters=[@__now_0='2025-10-01T12:43:33.8766488+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:13:44.070 +05:30 [INF] Executed DbCommand (95ms) [Parameters=[@__now_0='2025-10-01T12:43:43.9755376+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:14:02.148 +05:30 [INF] Executed DbCommand (85ms) [Parameters=[@__now_0='2025-10-01T12:43:54.0870970+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:14:12.243 +05:30 [INF] Executed DbCommand (81ms) [Parameters=[@__now_0='2025-10-01T12:44:12.1623664+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:14:22.360 +05:30 [INF] Executed DbCommand (95ms) [Parameters=[@__now_0='2025-10-01T12:44:22.2644981+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:14:32.447 +05:30 [INF] Executed DbCommand (93ms) [Parameters=[@__now_0='2025-10-01T12:44:32.3543389+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:14:42.534 +05:30 [INF] Executed DbCommand (79ms) [Parameters=[@__now_0='2025-10-01T12:44:42.4555421+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:14:52.625 +05:30 [INF] Executed DbCommand (76ms) [Parameters=[@__now_0='2025-10-01T12:44:52.5496449+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:15:02.707 +05:30 [INF] Executed DbCommand (74ms) [Parameters=[@__now_0='2025-10-01T12:45:02.6320232+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:15:12.774 +05:30 [INF] Executed DbCommand (64ms) [Parameters=[@__now_0='2025-10-01T12:45:12.7099099+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:15:22.868 +05:30 [INF] Executed DbCommand (87ms) [Parameters=[@__now_0='2025-10-01T12:45:22.7806781+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:15:32.969 +05:30 [INF] Executed DbCommand (95ms) [Parameters=[@__now_0='2025-10-01T12:45:32.8740604+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:15:43.058 +05:30 [INF] Executed DbCommand (83ms) [Parameters=[@__now_0='2025-10-01T12:45:42.9751887+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:15:53.142 +05:30 [INF] Executed DbCommand (75ms) [Parameters=[@__now_0='2025-10-01T12:45:53.0672365+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:16:03.238 +05:30 [INF] Executed DbCommand (89ms) [Parameters=[@__now_0='2025-10-01T12:46:03.1494459+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:16:13.343 +05:30 [INF] Executed DbCommand (88ms) [Parameters=[@__now_0='2025-10-01T12:46:13.2550053+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:16:23.469 +05:30 [INF] Executed DbCommand (121ms) [Parameters=[@__now_0='2025-10-01T12:46:23.3484797+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:16:33.558 +05:30 [INF] Executed DbCommand (81ms) [Parameters=[@__now_0='2025-10-01T12:46:33.4772400+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:16:43.651 +05:30 [INF] Executed DbCommand (85ms) [Parameters=[@__now_0='2025-10-01T12:46:43.5667599+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:16:53.741 +05:30 [INF] Executed DbCommand (82ms) [Parameters=[@__now_0='2025-10-01T12:46:53.6590020+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:17:03.936 +05:30 [INF] Executed DbCommand (179ms) [Parameters=[@__now_0='2025-10-01T12:47:03.7569679+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:17:14.050 +05:30 [INF] Executed DbCommand (96ms) [Parameters=[@__now_0='2025-10-01T12:47:13.9537413+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:17:24.159 +05:30 [INF] Executed DbCommand (109ms) [Parameters=[@__now_0='2025-10-01T12:47:24.0497907+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:17:34.249 +05:30 [INF] Executed DbCommand (85ms) [Parameters=[@__now_0='2025-10-01T12:47:34.1634706+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:17:44.340 +05:30 [INF] Executed DbCommand (88ms) [Parameters=[@__now_0='2025-10-01T12:47:44.2511864+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:17:54.458 +05:30 [INF] Executed DbCommand (113ms) [Parameters=[@__now_0='2025-10-01T12:47:54.3446806+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:18:04.547 +05:30 [INF] Executed DbCommand (78ms) [Parameters=[@__now_0='2025-10-01T12:48:04.4684154+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:18:14.638 +05:30 [INF] Executed DbCommand (85ms) [Parameters=[@__now_0='2025-10-01T12:48:14.5531332+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
2025-10-01 18:18:24.726 +05:30 [INF] Executed DbCommand (80ms) [Parameters=[@__now_0='2025-10-01T12:48:24.6455571+00:00' (DbType = DateTime), @__p_1='3'], CommandType='"Text"', CommandTimeout='30']
SELECT o."Id", o."Attempt", o."BusinessId", o."CampaignId", o."CreatedAt", o."LastError", o."MaxAttempts", o."NextAttemptAt", o."Status", o."UpdatedAt"
FROM "OutboundCampaignJobs" AS o
WHERE o."Status" = 'queued' AND o."NextAttemptAt" <= @__now_0
ORDER BY o."NextAttemptAt", o."CreatedAt"
LIMIT @__p_1
